(function(){var Xe,St,wn,Oe,Ve,Q,se,q,j,ne,$,X,Y,W,U,K,le,de,pe,_e,ae,Ge,Re,Ue,ve,Me,Pe,ee,Se,F,We,_t,rt,wt,nt,Bt,Wt,ue,Ct,Gt,xi,to,Jt,_n,hn,Qe,uo,dn,Ao=[].slice,Oo={}.hasOwnProperty,_i=function(ft,pt){function Tt(){this.constructor=ft}for(var $t in pt)Oo.call(pt,$t)&&(ft[$t]=pt[$t]);return Tt.prototype=pt.prototype,ft.prototype=new Tt,ft.__super__=pt.prototype,ft},Qo=[].indexOf||function(ft){for(var pt=0,Tt=this.length;Tt>pt;pt++)if(pt in this&&this[pt]===ft)return pt;return-1};for(ae={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},Se=function(){var ft;return null!=(ft=typeof performance<"u"&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?ft:+new Date},We=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,_e=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==We&&(We=function(ft){return setTimeout(ft,50)},_e=function(ft){return clearTimeout(ft)}),rt=function(ft){var pt,Tt;return pt=Se(),(Tt=function(){var $t;return($t=Se()-pt)>=33?(pt=Se(),ft($t,function(){return We(Tt)})):setTimeout(Tt,33-$t)})()},_t=function(){var ft,pt,Tt;return Tt=arguments[0],pt=arguments[1],ft=3<=arguments.length?Ao.call(arguments,2):[],"function"==typeof Tt[pt]?Tt[pt].apply(Tt,ft):Tt[pt]},Ge=function(){var ft,pt,Tt,$t,tn,on,Sn;for(pt=arguments[0],on=0,Sn=($t=2<=arguments.length?Ao.call(arguments,1):[]).length;Sn>on;on++)if(Tt=$t[on])for(ft in Tt)Oo.call(Tt,ft)&&(tn=Tt[ft],null!=pt[ft]&&"object"==typeof pt[ft]&&null!=tn&&"object"==typeof tn?Ge(pt[ft],tn):pt[ft]=tn);return pt},le=function(ft){var pt,Tt,tn,on;for(Tt=pt=0,tn=0,on=ft.length;on>tn;tn++)Tt+=Math.abs(ft[tn]),pt++;return Tt/pt},Ue=function(ft,pt){var Tt,tn;if(null==ft&&(ft="options"),null==pt&&(pt=!0),tn=document.querySelector("[data-pace-"+ft+"]")){if(Tt=tn.getAttribute("data-pace-"+ft),!pt)return Tt;try{return JSON.parse(Tt)}catch(on){return typeof console<"u"&&null!==console?console.error("Error parsing inline pace options",on):void 0}}},se=function(){function ft(){}return ft.prototype.on=function(pt,Tt,$t,tn){var on;return null==tn&&(tn=!1),null==this.bindings&&(this.bindings={}),null==(on=this.bindings)[pt]&&(on[pt]=[]),this.bindings[pt].push({handler:Tt,ctx:$t,once:tn})},ft.prototype.once=function(pt,Tt,$t){return this.on(pt,Tt,$t,!0)},ft.prototype.off=function(pt,Tt){var $t,tn,on;if(null!=(null!=(tn=this.bindings)?tn[pt]:void 0)){if(null==Tt)return delete this.bindings[pt];for($t=0,on=[];$t<this.bindings[pt].length;)on.push(this.bindings[pt][$t].handler===Tt?this.bindings[pt].splice($t,1):$t++);return on}},ft.prototype.trigger=function(){var pt,$t,on,Sn,no,ao,Rn;if($t=arguments[0],pt=2<=arguments.length?Ao.call(arguments,1):[],null!=(no=this.bindings)?no[$t]:void 0){for(on=0,Rn=[];on<this.bindings[$t].length;)Sn=(ao=this.bindings[$t][on]).once,ao.handler.apply(ao.ctx??this,pt),Rn.push(Sn?this.bindings[$t].splice(on,1):on++);return Rn}},ft}(),ne=window.Pace||{},window.Pace=ne,Ge(ne,se.prototype),F=ne.options=Ge({},ae,window.paceOptions,Ue()),Jt=0,hn=(uo=["ajax","document","eventLag","elements"]).length;hn>Jt;Jt++)!0===F[Wt=uo[Jt]]&&(F[Wt]=ae[Wt]);j=function(ft){function pt(){return pt.__super__.constructor.apply(this,arguments)}return _i(pt,ft),pt}(Error),St=function(){function ft(){this.progress=0}return ft.prototype.getElement=function(){var pt;if(null==this.el){if(!(pt=document.querySelector(F.target)))throw new j;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=pt.firstChild?pt.insertBefore(this.el,pt.firstChild):pt.appendChild(this.el)}return this.el},ft.prototype.finish=function(){var pt;return(pt=this.getElement()).className=pt.className.replace("pace-active",""),pt.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},ft.prototype.update=function(pt){return this.progress=pt,this.render()},ft.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(pt){j=pt}return this.el=void 0},ft.prototype.render=function(){var pt,$t,tn,on,Sn,no;if(null==document.querySelector(F.target))return!1;for(pt=this.getElement(),tn="translate3d("+this.progress+"%, 0, 0)",on=0,Sn=(no=["webkitTransform","msTransform","transform"]).length;Sn>on;on++)pt.children[0].style[no[on]]=tn;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(pt.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?$t="99":($t=this.progress<10?"0":"",$t+=0|this.progress),pt.children[0].setAttribute("data-progress",""+$t)),this.lastRenderedProgress=this.progress},ft.prototype.done=function(){return this.progress>=100},ft}(),q=function(){function ft(){this.bindings={}}return ft.prototype.trigger=function(pt,Tt){var tn,on,Sn,no;if(null!=this.bindings[pt]){for(no=[],tn=0,on=(Sn=this.bindings[pt]).length;on>tn;tn++)no.push(Sn[tn].call(this,Tt));return no}},ft.prototype.on=function(pt,Tt){var $t;return null==($t=this.bindings)[pt]&&($t[pt]=[]),this.bindings[pt].push(Tt)},ft}(),to=window.XMLHttpRequest,xi=window.XDomainRequest,Gt=window.WebSocket,Re=function(ft,pt){var $t,tn;for($t in tn=[],pt.prototype)try{tn.push(null==ft[$t]&&"function"!=typeof pt[$t]?"function"==typeof Object.defineProperty?Object.defineProperty(ft,$t,{get:function(){return pt.prototype[$t]},configurable:!0,enumerable:!0}):ft[$t]=pt.prototype[$t]:void 0)}catch(on){}return tn},Pe=[],ne.ignore=function(){var ft,pt,Tt;return pt=arguments[0],ft=2<=arguments.length?Ao.call(arguments,1):[],Pe.unshift("ignore"),Tt=pt.apply(null,ft),Pe.shift(),Tt},ne.track=function(){var ft,pt,Tt;return pt=arguments[0],ft=2<=arguments.length?Ao.call(arguments,1):[],Pe.unshift("track"),Tt=pt.apply(null,ft),Pe.shift(),Tt},Bt=function(ft){var pt;return null==ft&&(ft="GET"),"track"===Pe[0]?"force":!(Pe.length||!F.ajax||!("socket"===ft&&F.ajax.trackWebSockets||(pt=ft.toUpperCase(),Qo.call(F.ajax.trackMethods,pt)>=0)))},$=function(ft){function pt(){var Tt,$t=this;pt.__super__.constructor.apply(this,arguments),Tt=function(tn){var on;return on=tn.open,tn.open=function(Sn,no,ao){return Bt(Sn)&&$t.trigger("request",{type:Sn,url:no,request:tn}),on.apply(tn,arguments)}},window.XMLHttpRequest=function(tn){var on;return on=new to(tn),Tt(on),on};try{Re(window.XMLHttpRequest,to)}catch{}if(null!=xi){window.XDomainRequest=function(){var tn;return tn=new xi,Tt(tn),tn};try{Re(window.XDomainRequest,xi)}catch{}}if(null!=Gt&&F.ajax.trackWebSockets){window.WebSocket=function(tn,on){var Sn;return Sn=null!=on?new Gt(tn,on):new Gt(tn),Bt("socket")&&$t.trigger("request",{type:"socket",url:tn,protocols:on,request:Sn}),Sn};try{Re(window.WebSocket,Gt)}catch{}}}return _i(pt,ft),pt}(q),_n=null,nt=function(ft){var pt,Tt,$t,tn;for(Tt=0,$t=(tn=F.ajax.ignoreURLs).length;$t>Tt;Tt++)if("string"==typeof(pt=tn[Tt])){if(-1!==ft.indexOf(pt))return!0}else if(pt.test(ft))return!0;return!1},(ve=function(){return null==_n&&(_n=new $),_n})().on("request",function(ft){var pt,Tt,$t,tn;return tn=ft.type,$t=ft.request,nt(ft.url)||ne.running||!1===F.restartOnRequestAfter&&"force"!==Bt(tn)?void 0:(Tt=arguments,"boolean"==typeof(pt=F.restartOnRequestAfter||0)&&(pt=0),setTimeout(function(){var no,ao,Rn,wi,Go;if("socket"===tn?$t.readyState<2:0<(Rn=$t.readyState)&&4>Rn){for(ne.restart(),Go=[],no=0,ao=(wi=ne.sources).length;ao>no;no++){if((Wt=wi[no])instanceof Xe){Wt.watch.apply(Wt,Tt);break}Go.push(void 0)}return Go}},pt))}),Xe=function(){function ft(){var pt=this;this.elements=[],ve().on("request",function(){return pt.watch.apply(pt,arguments)})}return ft.prototype.watch=function(pt){var Tt,$t,tn;return tn=pt.type,Tt=pt.request,nt(pt.url)?void 0:($t="socket"===tn?new W(Tt):new U(Tt),this.elements.push($t))},ft}(),U=function ft(pt){var tn,on,Sn,no,ao=this;if(this.progress=0,null!=window.ProgressEvent)for(pt.addEventListener("progress",function(Rn){return ao.progress=Rn.lengthComputable?100*Rn.loaded/Rn.total:ao.progress+(100-ao.progress)/2},!1),tn=0,on=(no=["load","abort","timeout","error"]).length;on>tn;tn++)pt.addEventListener(no[tn],function(){return ao.progress=100},!1);else Sn=pt.onreadystatechange,pt.onreadystatechange=function(){var Rn;return 0===(Rn=pt.readyState)||4===Rn?ao.progress=100:3===pt.readyState&&(ao.progress=50),"function"==typeof Sn?Sn.apply(null,arguments):void 0}},W=function ft(pt){var $t,tn,on,Sn=this;for(this.progress=0,$t=0,tn=(on=["error","open"]).length;tn>$t;$t++)pt.addEventListener(on[$t],function(){return Sn.progress=100},!1)},Oe=function ft(pt){var $t,tn,on;for(null==pt&&(pt={}),this.elements=[],null==pt.selectors&&(pt.selectors=[]),$t=0,tn=(on=pt.selectors).length;tn>$t;$t++)this.elements.push(new Ve(on[$t]))},Ve=function(){function ft(pt){this.selector=pt,this.progress=0,this.check()}return ft.prototype.check=function(){var pt=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return pt.check()},F.elements.checkInterval)},ft.prototype.done=function(){return this.progress=100},ft}(),wn=function(){function ft(){var pt,Tt,$t=this;this.progress=null!=(Tt=this.states[document.readyState])?Tt:100,pt=document.onreadystatechange,document.onreadystatechange=function(){return null!=$t.states[document.readyState]&&($t.progress=$t.states[document.readyState]),"function"==typeof pt?pt.apply(null,arguments):void 0}}return ft.prototype.states={loading:0,interactive:50,complete:100},ft}(),Q=function ft(){var pt,Tt,$t,tn,on,Sn=this;this.progress=0,pt=0,on=[],tn=0,$t=Se(),Tt=setInterval(function(){var no;return no=Se()-$t-50,$t=Se(),on.push(no),on.length>F.eventLag.sampleCount&&on.shift(),pt=le(on),++tn>=F.eventLag.minSamples&&pt<F.eventLag.lagThreshold?(Sn.progress=100,clearInterval(Tt)):Sn.progress=3/(pt+3)*100},50)},Y=function(){function ft(pt){this.source=pt,this.last=this.sinceLastUpdate=0,this.rate=F.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=_t(this.source,"progress"))}return ft.prototype.tick=function(pt,Tt){var $t;return null==Tt&&(Tt=_t(this.source,"progress")),Tt>=100&&(this.done=!0),Tt===this.last?this.sinceLastUpdate+=pt:(this.sinceLastUpdate&&(this.rate=(Tt-this.last)/this.sinceLastUpdate),this.catchup=(Tt-this.progress)/F.catchupTime,this.sinceLastUpdate=0,this.last=Tt),Tt>this.progress&&(this.progress+=this.catchup*pt),$t=1-Math.pow(this.progress/100,F.easeFactor),this.progress+=$t*this.rate*pt,this.progress=Math.min(this.lastProgress+F.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},ft}(),ue=null,wt=null,de=null,Ct=null,K=null,pe=null,ne.running=!1,Me=function(){return F.restartOnPushState?ne.restart():void 0},null!=window.history.pushState&&(Qe=window.history.pushState,window.history.pushState=function(){return Me(),Qe.apply(window.history,arguments)}),null!=window.history.replaceState&&(dn=window.history.replaceState,window.history.replaceState=function(){return Me(),dn.apply(window.history,arguments)}),X={ajax:Xe,elements:Oe,document:wn,eventLag:Q},(ee=function(){var ft,pt,Tt,$t,tn,on,Sn,no;for(ne.sources=ue=[],pt=0,$t=(on=["ajax","elements","document","eventLag"]).length;$t>pt;pt++)!1!==F[ft=on[pt]]&&ue.push(new X[ft](F[ft]));for(Tt=0,tn=(no=null!=(Sn=F.extraSources)?Sn:[]).length;tn>Tt;Tt++)ue.push(new(Wt=no[Tt])(F));return ne.bar=de=new St,wt=[],Ct=new Y})(),ne.stop=function(){return ne.trigger("stop"),ne.running=!1,de.destroy(),pe=!0,null!=K&&("function"==typeof _e&&_e(K),K=null),ee()},ne.restart=function(){return ne.trigger("restart"),ne.stop(),ne.start()},ne.go=function(){var ft;return ne.running=!0,de.render(),ft=Se(),pe=!1,K=rt(function(pt,Tt){var tn,on,no,ao,Rn,Go,Si,Ds,Ur,vs,ho,vn,bo;for(tn=Ds=0,on=!0,ao=Ur=0,ho=ue.length;ho>Ur;ao=++Ur)for(Wt=ue[ao],Si=null!=wt[ao]?wt[ao]:wt[ao]=[],Rn=vs=0,vn=(no=null!=(bo=Wt.elements)?bo:[Wt]).length;vn>vs;Rn=++vs)on&=(Go=null!=Si[Rn]?Si[Rn]:Si[Rn]=new Y(no[Rn])).done,Go.done||(tn++,Ds+=Go.tick(pt));return de.update(Ct.tick(pt,Ds/tn)),de.done()||on||pe?(de.update(100),ne.trigger("done"),setTimeout(function(){return de.finish(),ne.running=!1,ne.trigger("hide")},Math.max(F.ghostTime,Math.max(F.minTime-(Se()-ft),0)))):Tt()})},ne.start=function(ft){Ge(F,ft),ne.running=!0;try{de.render()}catch(pt){j=pt}return document.querySelector(".pace")?(ne.trigger("start"),ne.go()):setTimeout(ne.start,50)},"function"==typeof define&&define.amd?define(["pace"],function(){return ne}):"object"==typeof exports?module.exports=ne:F.startOnPageLoad&&ne.start()}).call(this),function(){"use strict";var Xe=function(n){if(null===n)return"null";if(void 0===n)return"undefined";var i=typeof n;return"object"===i&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===i&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":i},St=function(n){return{eq:n}},wn=St(function(n,i){return n===i}),Oe=function(n){return St(function(i,s){if(i.length!==s.length)return!1;for(var d=i.length,u=0;u<d;u++)if(!n.eq(i[u],s[u]))return!1;return!0})},Ve=function(n){return St(function(i,s){var k,M,I,d=Object.keys(i),u=Object.keys(s);if(!(k=wn,M=Oe(k),I=function(M){return Array.prototype.slice.call(M).sort(void 0)},St(function(O,R){return M.eq(I(O),I(R))})).eq(d,u))return!1;for(var f=d.length,v=0;v<f;v++){var _=d[v];if(!n.eq(i[_],s[_]))return!1}return!0})},Q=St(function(n,i){if(n===i)return!0;var s=Xe(n);return s===Xe(i)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(s)?n===i:"array"===s?Oe(Q).eq(n,i):"object"===s&&Ve(Q).eq(n,i))});const se=Object.getPrototypeOf,q=(n,i,s)=>{var d;return!!s(n,i.prototype)||(null===(d=n.constructor)||void 0===d?void 0:d.name)===i.name},j=n=>i=>(s=>{const d=typeof s;return null===s?"null":"object"===d&&Array.isArray(s)?"array":"object"===d&&q(s,String,(u,f)=>f.isPrototypeOf(u))?"string":d})(i)===n,ne=n=>i=>typeof i===n,$=n=>i=>n===i,X=(n,i)=>W(n)&&q(n,i,(s,d)=>se(s)===d),Y=j("string"),W=j("object"),U=n=>X(n,Object),K=j("array"),le=$(null),de=ne("boolean"),pe=$(void 0),_e=n=>null==n,ae=n=>!_e(n),Ge=ne("function"),Re=ne("number"),Ue=(n,i)=>{if(K(n)){for(let s=0,d=n.length;s<d;++s)if(!i(n[s]))return!1;return!0}return!1},ve=()=>{},Me=(n,i)=>(...s)=>n(i.apply(null,s)),Pe=(n,i)=>s=>n(i(s)),ee=n=>()=>n,Se=n=>n,F=(n,i)=>n===i;function We(n,...i){return(...s)=>{const d=i.concat(s);return n.apply(null,d)}}const _t=n=>i=>!n(i),rt=n=>()=>{throw new Error(n)},wt=n=>n(),nt=n=>{n()},Bt=ee(!1),Wt=ee(!0);class ue{constructor(i,s){this.tag=i,this.value=s}static some(i){return new ue(!0,i)}static none(){return ue.singletonNone}fold(i,s){return this.tag?s(this.value):i()}isSome(){return this.tag}isNone(){return!this.tag}map(i){return this.tag?ue.some(i(this.value)):ue.none()}bind(i){return this.tag?i(this.value):ue.none()}exists(i){return this.tag&&i(this.value)}forall(i){return!this.tag||i(this.value)}filter(i){return!this.tag||i(this.value)?this:ue.none()}getOr(i){return this.tag?this.value:i}or(i){return this.tag?this:i}getOrThunk(i){return this.tag?this.value:i()}orThunk(i){return this.tag?this:i()}getOrDie(i){if(this.tag)return this.value;throw new Error(i??"Called getOrDie on None")}static from(i){return ae(i)?ue.some(i):ue.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(i){this.tag&&i(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ue.singletonNone=new ue(!1);const Ct=Array.prototype.slice,Gt=Array.prototype.indexOf,xi=Array.prototype.push,to=(n,i)=>Gt.call(n,i),Jt=(n,i)=>to(n,i)>-1,_n=(n,i)=>{for(let s=0,d=n.length;s<d;s++)if(i(n[s],s))return!0;return!1},hn=(n,i)=>{const s=n.length,d=new Array(s);for(let u=0;u<s;u++)d[u]=i(n[u],u);return d},Qe=(n,i)=>{for(let s=0,d=n.length;s<d;s++)i(n[s],s)},uo=(n,i)=>{for(let s=n.length-1;s>=0;s--)i(n[s],s)},Yn=(n,i)=>{const s=[],d=[];for(let u=0,f=n.length;u<f;u++){const v=n[u];(i(v,u)?s:d).push(v)}return{pass:s,fail:d}},dn=(n,i)=>{const s=[];for(let d=0,u=n.length;d<u;d++){const f=n[d];i(f,d)&&s.push(f)}return s},Ao=(n,i,s)=>(uo(n,(d,u)=>{s=i(s,d,u)}),s),Oo=(n,i,s)=>(Qe(n,(d,u)=>{s=i(s,d,u)}),s),_i=(n,i,s)=>{for(let d=0,u=n.length;d<u;d++){const f=n[d];if(i(f,d))return ue.some(f);if(s(f,d))break}return ue.none()},Qo=(n,i)=>_i(n,i,Bt),ft=(n,i)=>{for(let s=0,d=n.length;s<d;s++)if(i(n[s],s))return ue.some(s);return ue.none()},pt=n=>{const i=[];for(let s=0,d=n.length;s<d;++s){if(!K(n[s]))throw new Error("Arr.flatten item "+s+" was not an array, input: "+n);xi.apply(i,n[s])}return i},Tt=(n,i)=>pt(hn(n,i)),$t=(n,i)=>{for(let s=0,d=n.length;s<d;++s)if(!0!==i(n[s],s))return!1;return!0},tn=n=>{const i=Ct.call(n,0);return i.reverse(),i},on=(n,i)=>dn(n,s=>!Jt(i,s)),Sn=(n,i)=>{const s={};for(let d=0,u=n.length;d<u;d++){const f=n[d];s[String(f)]=i(f,d)}return s},no=(n,i)=>{const s=Ct.call(n,0);return s.sort(i),s},ao=(n,i)=>i>=0&&i<n.length?ue.some(n[i]):ue.none(),Rn=n=>ao(n,0),wi=n=>ao(n,n.length-1),Go=Ge(Array.from)?Array.from:n=>Ct.call(n),Si=(n,i)=>{for(let s=0;s<n.length;s++){const d=i(n[s],s);if(d.isSome())return d}return ue.none()},Ds=(n,i)=>{const s=[],d=Ge(i)?u=>_n(s,f=>i(f,u)):u=>Jt(s,u);for(let u=0,f=n.length;u<f;u++){const v=n[u];d(v)||s.push(v)}return s},Ur=Object.keys,vs=Object.hasOwnProperty,ho=(n,i)=>{const s=Ur(n);for(let d=0,u=s.length;d<u;d++){const f=s[d];i(n[f],f)}},vn=(n,i)=>bo(n,(s,d)=>({k:d,v:i(s,d)})),bo=(n,i)=>{const s={};return ho(n,(d,u)=>{const f=i(d,u);s[f.k]=f.v}),s},Br=n=>(i,s)=>{n[s]=i},Ma=(n,i,s,d)=>{ho(n,(u,f)=>{(i(u,f)?s:d)(u,f)})},pa=(n,i)=>{const s={};return Ma(n,i,Br(s),ve),s},Ml=(n,i)=>{const s=[];return ho(n,(d,u)=>{s.push(i(d,u))}),s},ir=n=>Ml(n,Se),go=(n,i)=>Ln(n,i)?ue.from(n[i]):ue.none(),Ln=(n,i)=>vs.call(n,i),Jd=(n,i)=>Ln(n,i)&&null!=n[i],ji=n=>{const i={};return Qe(n,s=>{i[s]={}}),Ur(i)},fd=n=>void 0!==n.length,Ec=Array.isArray,si=(n,i,s)=>{if(!n)return!1;if(s=s||n,fd(n)){for(let d=0,u=n.length;d<u;d++)if(!1===i.call(s,n[d],d,n))return!1}else for(const d in n)if(Ln(n,d)&&!1===i.call(s,n[d],d,n))return!1;return!0},vd=(n,i)=>{const s=[];return si(n,(d,u)=>{s.push(i(d,u,n))}),s},Al=(n,i)=>{const s=[];return si(n,(d,u)=>{i&&!i(d,u,n)||s.push(d)}),s},el=(n,i,s,d)=>{let u=pe(s)?n[0]:s;for(let f=0;f<n.length;f++)u=i.call(d,u,n[f],f);return u},Fu=(n,i,s)=>{for(let d=0,u=n.length;d<u;d++)if(i.call(s,n[d],d,n))return d;return-1},os=n=>n[n.length-1],ma=n=>{let i,s=!1;return(...d)=>(s||(s=!0,i=n.apply(null,d)),i)},dt=()=>je(0,0),je=(n,i)=>({major:n,minor:i}),lt={nu:je,detect:(n,i)=>{const s=String(i).toLowerCase();return 0===n.length?dt():((d,u)=>{const f=((_,k)=>{for(let T=0;T<_.length;T++){const M=_[T];if(M.test(k))return M}})(d,u);if(!f)return{major:0,minor:0};const v=_=>Number(u.replace(f,"$"+_));return je(v(1),v(2))})(n,s)},unknown:dt},Nt=(n,i)=>{const s=String(i).toLowerCase();return Qo(n,d=>d.search(s))},yn=(n,i,s)=>""===i||n.length>=i.length&&n.substr(s,s+i.length)===i,Ft=(n,i)=>gn(n,i)?n.substring(i.length):n,Rt=(n,i,s=0,d)=>{const u=n.indexOf(i,s);return-1!==u&&(!!pe(d)||u+i.length<=d)},gn=(n,i)=>yn(n,i,0),En=(n,i)=>yn(n,i,n.length-i.length),$n=n=>i=>i.replace(n,""),Xn=$n(/^\s+|\s+$/g),Zo=$n(/^\s+/g),_o=$n(/\s+$/g),Er=n=>n.length>0,Kr=n=>!Er(n),li=(n,i=10)=>{const s=parseInt(n,i);return isNaN(s)?ue.none():ue.some(s)},Nc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,po=n=>i=>Rt(i,n),ys=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:n=>Rt(n,"edge/")&&Rt(n,"chrome")&&Rt(n,"safari")&&Rt(n,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Nc],search:n=>Rt(n,"chrome")&&!Rt(n,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:n=>Rt(n,"msie")||Rt(n,"trident")},{name:"Opera",versionRegexes:[Nc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:po("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:po("firefox")},{name:"Safari",versionRegexes:[Nc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:n=>(Rt(n,"safari")||Rt(n,"mobile/"))&&Rt(n,"applewebkit")}],bs=[{name:"Windows",search:po("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:n=>Rt(n,"iphone")||Rt(n,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:po("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:po("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:po("linux"),versionRegexes:[]},{name:"Solaris",search:po("sunos"),versionRegexes:[]},{name:"FreeBSD",search:po("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:po("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Qd={browsers:ee(ys),oses:ee(bs)},am="Chromium",tl="Firefox",Aa=n=>{const i=n.current,d=u=>()=>i===u;return{current:i,version:n.version,isEdge:d("Edge"),isChromium:d(am),isIE:d("IE"),isOpera:d("Opera"),isFirefox:d(tl),isSafari:d("Safari")}},zr=()=>Aa({current:void 0,version:lt.unknown()}),Rc=Aa,Rh=(ee("Edge"),ee(am),ee("IE"),ee("Opera"),ee(tl),ee("Safari"),"Windows"),Lh="Android",Il="Solaris",eu="FreeBSD",tc="ChromeOS",Jr=n=>{const i=n.current,d=u=>()=>i===u;return{current:i,version:n.version,isWindows:d(Rh),isiOS:d("iOS"),isAndroid:d(Lh),isMacOS:d("macOS"),isLinux:d("Linux"),isSolaris:d(Il),isFreeBSD:d(eu),isChromeOS:d(tc)}},Os=()=>Jr({current:void 0,version:lt.unknown()}),sm=Jr,lm=(ee(Rh),ee("iOS"),ee(Lh),ee("Linux"),ee("macOS"),ee(Il),ee(eu),ee(tc),n=>window.matchMedia(n).matches);let Pn=ma(()=>((n,i,s)=>{const d=Qd.browsers(),u=Qd.oses(),f=i.bind(k=>{return T=d,Si(k.brands,I=>{const O=I.brand.toLowerCase();return Qo(T,R=>{var N;return O===(null===(N=R.brand)||void 0===N?void 0:N.toLowerCase())}).map(R=>({current:R.name,version:lt.nu(parseInt(I.version,10),0)}))});var T}).orThunk(()=>{return Nt(d,T=n).map(M=>{const I=lt.detect(M.versionRegexes,T);return{current:M.name,version:I}});var T}).fold(zr,Rc),v=(k=u,T=n,Nt(k,T).map(M=>{const I=lt.detect(M.versionRegexes,T);return{current:M.name,version:I}})).fold(Os,sm),_=((k,T,M,I)=>{const O=k.isiOS()&&!0===/ipad/i.test(M),R=k.isiOS()&&!O,N=k.isiOS()||k.isAndroid(),z=N||I("(pointer:coarse)"),L=O||!R&&N&&I("(min-device-width:768px)"),V=R||N&&!L,J=T.isSafari()&&k.isiOS()&&!1===/safari/i.test(M),te=!V&&!L&&!J;return{isiPad:ee(O),isiPhone:ee(R),isTablet:ee(L),isPhone:ee(V),isTouch:ee(z),isAndroid:k.isAndroid,isiOS:k.isiOS,isWebView:ee(J),isDesktop:ee(te)}})(v,f,n,s);var k,T;return{browser:f,os:v,deviceType:_}})(window.navigator.userAgent,ue.from(window.navigator.userAgentData),lm));const Dl=()=>Pn(),qi=window.navigator.userAgent,mi=Dl(),Ol=mi.browser,tr=mi.os,Lc=mi.deviceType,L1=-1!==qi.indexOf("Windows Phone"),Yt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ol.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ol.isIE(),windowsPhone:L1,browser:{current:Ol.current,version:Ol.version,isChromium:Ol.isChromium,isEdge:Ol.isEdge,isFirefox:Ol.isFirefox,isIE:Ol.isIE,isOpera:Ol.isOpera,isSafari:Ol.isSafari},os:{current:tr.current,version:tr.version,isAndroid:tr.isAndroid,isChromeOS:tr.isChromeOS,isFreeBSD:tr.isFreeBSD,isiOS:tr.isiOS,isLinux:tr.isLinux,isMacOS:tr.isMacOS,isSolaris:tr.isSolaris,isWindows:tr.isWindows},deviceType:{isDesktop:Lc.isDesktop,isiPad:Lc.isiPad,isiPhone:Lc.isiPhone,isPhone:Lc.isPhone,isTablet:Lc.isTablet,isTouch:Lc.isTouch,isWebView:Lc.isWebView}},yd=/^\s*|\s*$/g,Vu=n=>_e(n)?"":(""+n).replace(yd,""),Di=function(n,i,s,d){d=d||this,n&&(s&&(n=n[s]),si(n,(u,f)=>!1!==i.call(d,u,f,s)&&(Di(u,i,s,d),!0)))},zt={trim:Vu,isArray:Ec,is:(n,i)=>i?!("array"!==i||!Ec(n))||typeof n===i:void 0!==n,toArray:n=>{if(Ec(n))return n;{const i=[];for(let s=0,d=n.length;s<d;s++)i[s]=n[s];return i}},makeMap:(n,i,s={})=>{const d=Y(n)?n.split(i||","):n||[];let u=d.length;for(;u--;)s[d[u]]={};return s},each:si,map:vd,grep:Al,inArray:(n,i)=>{if(n)for(let s=0,d=n.length;s<d;s++)if(n[s]===i)return s;return-1},hasOwn:Ln,extend:(n,...i)=>{for(let s=0;s<i.length;s++){const d=i[s];for(const u in d)if(Ln(d,u)){const f=d[u];void 0!==f&&(n[u]=f)}}return n},walk:Di,resolve:(n,i=window)=>{const s=n.split(".");for(let d=0,u=s.length;d<u&&(i=i[s[d]]);d++);return i},explode:(n,i)=>K(n)?n:""===n?[]:vd(n.split(i||","),Vu),_addCacheSuffix:n=>{const i=Yt.cacheSuffix;return i&&(n+=(-1===n.indexOf("?")?"?":"&")+i),n}},kr=(n,i,s=F)=>n.exists(d=>s(d,i)),El=(n,i,s=F)=>ea(n,i,s).getOr(n.isNone()&&i.isNone()),ea=(n,i,s)=>n.isSome()&&i.isSome()?ue.some(s(n.getOrDie(),i.getOrDie())):ue.none(),No=(n,i)=>n?ue.some(i):ue.none(),Ph=typeof window<"u"?window:Function("return this;")(),Bh=(n,i)=>((s,d)=>{let u=d??Ph;for(let f=0;f<s.length&&null!=u;++f)u=u[s[f]];return u})(n.split("."),i),nl=Object.getPrototypeOf,mo=n=>n.dom.nodeName.toLowerCase(),zg=n=>n.dom.nodeType,nr=n=>i=>zg(i)===n,Hu=n=>ci(n)&&(n=>{const i=Bh("ownerDocument.defaultView",n);return W(n)&&((s=i,((d,u)=>{const f=Bh(d,u);if(null==f)throw new Error(d+" not available on this browser");return f})("HTMLElement",s)).prototype.isPrototypeOf(n)||/^HTML\w*Element$/.test(nl(n).constructor.name));var s})(n.dom),ci=nr(1),fa=nr(3),tu=nr(9),Ua=nr(11),rs=n=>i=>ci(i)&&mo(i)===n,bd=(n,i,s)=>{if(!(Y(s)||de(s)||Re(s)))throw console.error("Invalid call to Attribute.set. Key ",i,":: Value ",s,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(i,s+"")},ta=(n,i,s)=>{bd(n.dom,i,s)},nc=(n,i)=>{const s=n.dom;ho(i,(d,u)=>{bd(s,u,d)})},is=(n,i)=>{const s=n.dom.getAttribute(i);return null===s?void 0:s},Pc=(n,i)=>ue.from(is(n,i)),Wu=(n,i)=>{const s=n.dom;return!(!s||!s.hasAttribute)&&s.hasAttribute(i)},Gr=(n,i)=>{n.dom.removeAttribute(i)},Mv=n=>Oo(n.dom.attributes,(i,s)=>(i[s.name]=s.value,i),{}),P1=(n,i)=>{const s=is(n,i);return void 0===s||""===s?[]:s.split(" ")},Fg=n=>void 0!==n.dom.classList,cm=n=>P1(n,"class"),Wy=(n,i)=>((s,d,u)=>{const f=P1(s,d).concat([u]);return ta(s,d,f.join(" ")),!0})(n,"class",i),Av=(n,i)=>((s,d,u)=>{const f=dn(P1(s,d),v=>v!==u);return f.length>0?ta(s,d,f.join(" ")):Gr(s,d),!1})(n,"class",i),Uu=(n,i)=>{Fg(n)?n.dom.classList.add(i):Wy(n,i)},Iv=n=>{0===(Fg(n)?n.dom.classList:cm(n)).length&&Gr(n,"class")},Gu=(n,i)=>{Fg(n)?n.dom.classList.remove(i):Av(n,i),Iv(n)},zh=(n,i)=>Fg(n)&&n.dom.classList.contains(i),Vg=n=>{if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}},Nl=(n,i)=>{const s=(i||document).createElement("div");if(s.innerHTML=n,!s.hasChildNodes()||s.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,n),new Error(d)}return Vg(s.childNodes[0])},yr=(n,i)=>{const s=(i||document).createElement(n);return Vg(s)},Bc=(n,i)=>{const s=(i||document).createTextNode(n);return Vg(s)},Ze=Vg,zc=(n,i)=>{const s=[],d=f=>(s.push(f),i(f));let u=i(n);do{u=u.bind(d)}while(u.isSome());return s},va=(n,i)=>{const s=n.dom;if(1!==s.nodeType)return!1;{const d=s;if(void 0!==d.matches)return d.matches(i);if(void 0!==d.msMatchesSelector)return d.msMatchesSelector(i);if(void 0!==d.webkitMatchesSelector)return d.webkitMatchesSelector(i);if(void 0!==d.mozMatchesSelector)return d.mozMatchesSelector(i);throw new Error("Browser lacks native selectors")}},xd=n=>1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount,To=(n,i)=>n.dom===i.dom,Es=(n,i)=>{const s=n.dom,d=i.dom;return s!==d&&s.contains(d)},Hg=n=>Ze(n.dom.ownerDocument),Fc=n=>tu(n)?n:Hg(n),Ro=n=>Ze(Fc(n).dom.defaultView),pn=n=>ue.from(n.dom.parentNode).map(Ze),Wg=n=>ue.from(n.dom.parentElement).map(Ze),Ug=(n,i)=>{const s=Ge(i)?i:Bt;let d=n.dom;const u=[];for(;null!=d.parentNode;){const f=d.parentNode,v=Ze(f);if(u.push(v),!0===s(v))break;d=f}return u},nu=n=>ue.from(n.dom.previousSibling).map(Ze),_d=n=>ue.from(n.dom.nextSibling).map(Ze),Uy=n=>tn(zc(n,nu)),Gy=n=>zc(n,_d),Qr=n=>hn(n.dom.childNodes,Ze),rc=(n,i)=>ue.from(n.dom.childNodes[i]).map(Ze),Fh=n=>rc(n,0),Rl=n=>rc(n,n.dom.childNodes.length-1),xs=n=>n.dom.childNodes.length,ju=n=>Ua(n)&&ae(n.dom.host),Ns=n=>Ze(n.dom.getRootNode()),Gg=n=>ju(n)?n:(i=>{const s=i.dom.head;if(null==s)throw new Error("Head is not available yet");return Ze(s)})(Fc(n)),jg=n=>Ze(n.dom.host),ou=n=>{if(ae(n.target)){const i=Ze(n.target);if(ci(i)&&gA(i)&&n.composed&&n.composedPath){const s=n.composedPath();if(s)return Rn(s)}}return ue.from(n.target)},gA=n=>ae(n.dom.shadowRoot),Vh=n=>{const i=fa(n)?n.dom.parentNode:n.dom;if(null==i||null===i.ownerDocument)return!1;const s=i.ownerDocument;return(d=>{const u=Ns(d);return ju(u)?ue.some(u):ue.none()})(Ze(i)).fold(()=>s.body.contains(i),Pe(Vh,jg))};var Oi=(n,i,s,d,u)=>n(s,d)?ue.some(s):Ge(u)&&u(s)?ue.none():i(s,d,u);const Fr=(n,i,s)=>{let d=n.dom;const u=Ge(s)?s:Bt;for(;d.parentNode;){d=d.parentNode;const f=Ze(d);if(i(f))return ue.some(f);if(u(f))break}return ue.none()},ol=(n,i,s)=>Oi((d,u)=>u(d),Fr,n,i,s),qg=(n,i)=>{const s=d=>{for(let u=0;u<d.childNodes.length;u++){const f=Ze(d.childNodes[u]);if(i(f))return ue.some(f);const v=s(d.childNodes[u]);if(v.isSome())return v}return ue.none()};return s(n.dom)},$i=(n,i,s)=>Fr(n,d=>va(d,i),s),kn=(n,i)=>((s,d)=>{const u=void 0===d?document:d.dom;return xd(u)?ue.none():ue.from(u.querySelector(s)).map(Ze)})(i,n),ic=(n,i,s)=>Oi((d,u)=>va(d,u),$i,n,i,s),Ll=(n,i=!1)=>{return Vh(n)?n.dom.isContentEditable:(s=n,ic(s,"[contenteditable]")).fold(ee(i),d=>"true"===ar(d));var s},ar=n=>n.dom.contentEditable,Dv=n=>void 0!==n.style&&Ge(n.style.getPropertyValue),jy=(n,i,s)=>{if(!Y(s))throw console.error("Invalid call to CSS.set. Property ",i,":: Value ",s,":: Element ",n),new Error("CSS value must be a string: "+s);Dv(n)&&n.style.setProperty(i,s)},B1=(n,i,s)=>{jy(n.dom,i,s)},so=(n,i)=>{const s=n.dom;ho(i,(d,u)=>{jy(s,u,d)})},Ci=(n,i)=>{const s=n.dom,d=window.getComputedStyle(s).getPropertyValue(i);return""!==d||Vh(n)?d:dm(s,i)},dm=(n,i)=>Dv(n)?n.style.getPropertyValue(i):"",Ov=(n,i)=>{const d=dm(n.dom,i);return ue.from(d).filter(u=>u.length>0)},$g=n=>{const i={},s=n.dom;if(Dv(s))for(let d=0;d<s.style.length;d++){const u=s.style.item(d);i[u]=s.style[u]}return i},Pl=(n,i)=>{var s,d;d=i,Dv(s=n.dom)&&s.style.removeProperty(d),kr(Pc(n,"style").map(Xn),"")&&Gr(n,"style")},ki=(n,i)=>{pn(n).each(s=>{s.dom.insertBefore(i.dom,n.dom)})},ya=(n,i)=>{_d(n).fold(()=>{pn(n).each(s=>{ge(s,i)})},s=>{ki(s,i)})},rl=(n,i)=>{Fh(n).fold(()=>{ge(n,i)},s=>{n.dom.insertBefore(i.dom,s.dom)})},ge=(n,i)=>{n.dom.appendChild(i.dom)},xe=(n,i)=>{ki(n,i),ge(i,n)},be=(n,i)=>{Qe(i,s=>{ge(n,s)})},Le=n=>{n.dom.textContent="",Qe(Qr(n),i=>{Ke(i)})},Ke=n=>{const i=n.dom;null!==i.parentNode&&i.parentNode.removeChild(i)},tt=n=>{const i=Qr(n);var s,d;i.length>0&&(s=n,Qe(d=i,(u,f)=>{ya(0===f?s:d[f-1],u)})),Ke(n)},At=n=>hn(n,Ze),jt=n=>n.dom.innerHTML,Lt=(n,i)=>{const s=Hg(n).dom,d=Ze(s.createDocumentFragment()),u=((f,v)=>{const _=(v||document).createElement("div");return _.innerHTML=f,Qr(Ze(_))})(i,s);be(d,u),Le(n),ge(n,d)},ln=(n,i,s,d)=>{n.dom.removeEventListener(i,s,d)},xn=(n,i)=>({left:n,top:i,translate:(s,d)=>xn(n+s,i+d)}),Po=xn,Vn=(n,i)=>void 0!==n?n:void 0!==i?i:0,oo=n=>{const i=n.dom,s=i.ownerDocument.body;return s===i?Po(s.offsetLeft,s.offsetTop):Vh(n)?(d=>{const u=d.getBoundingClientRect();return Po(u.left,u.top)})(i):Po(0,0)},Bo=n=>{const i=void 0!==n?n.dom:document;return Po(i.body.scrollLeft||i.documentElement.scrollLeft,i.body.scrollTop||i.documentElement.scrollTop)},fn=(n,i,s)=>{const d=(void 0!==s?s.dom:document).defaultView;d&&d.scrollTo(n,i)},Et=(n,i)=>{Dl().browser.isSafari()&&Ge(n.dom.scrollIntoViewIfNeeded)?n.dom.scrollIntoViewIfNeeded(!1):n.dom.scrollIntoView(i)},lo=(n,i,s,d)=>({x:n,y:i,width:s,height:d,right:n+s,bottom:i+d}),xo=n=>{const i=void 0===n?window:n,d=Bo(Ze(i.document));return(u=>{const f=void 0===u?window:u;return Dl().browser.isFirefox()?ue.none():ue.from(f.visualViewport)})(i).fold(()=>{const u=i.document.documentElement;return lo(d.left,d.top,u.clientWidth,u.clientHeight)},u=>lo(Math.max(u.pageLeft,d.left),Math.max(u.pageTop,d.top),u.width,u.height))},zo=(n,i)=>{let s=[];return Qe(Qr(n),d=>{i(d)&&(s=s.concat([d])),s=s.concat(zo(d,i))}),s},jo=(n,i)=>((s,d)=>{const u=void 0===d?document:d.dom;return xd(u)?[]:hn(u.querySelectorAll(s),Ze)})(i,n),dr=(n,i,s)=>Fr(n,i,s).isSome(),Ga=(n,i)=>qg(n,i).isSome();class io{constructor(i,s){this.node=i,this.rootNode=s,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(i){return this.node=this.findSibling(this.node,"firstChild","nextSibling",i),this.node}prev(i){return this.node=this.findSibling(this.node,"lastChild","previousSibling",i),this.node}prev2(i){return this.node=this.findPreviousNode(this.node,i),this.node}findSibling(i,s,d,u){if(i){if(!u&&i[s])return i[s];if(i!==this.rootNode){let f=i[d];if(f)return f;for(let v=i.parentNode;v&&v!==this.rootNode;v=v.parentNode)if(f=v[d],f)return f}}}findPreviousNode(i,s){if(i){const d=i.previousSibling;if(this.rootNode&&d===this.rootNode)return;if(d){if(!s)for(let f=d.lastChild;f;f=f.lastChild)if(!f.lastChild)return f;return d}const u=i.parentNode;if(u&&u!==this.rootNode)return u}}}const Bi="\xa0",as=n=>"\ufeff"===n,pA=/^[ \t\r\n]*$/,ru=n=>pA.test(n),um=n=>"\n"===n||"\r"===n,aC=(n,i=4,s=!0,d=!0)=>{const u=(k=i)<=0?"":new Array(k+1).join(" "),f=n.replace(/\t/g,u);var k;return Oo(f,(_,k)=>{return-1!==" \f\t\v".indexOf(k)||k===Bi?_.pcIsSpace||""===_.str&&s||_.str.length===f.length-1&&d||(M=_.str.length+1)<(T=f).length&&M>=0&&um(T[M])?{pcIsSpace:!1,str:_.str+Bi}:{pcIsSpace:!0,str:_.str+" "}:{pcIsSpace:um(k),str:_.str+k};var T,M},{pcIsSpace:!1,str:""}).str},br=n=>i=>!!i&&i.nodeType===n,il=n=>!!n&&!Object.getPrototypeOf(n),nn=br(1),Ei=n=>nn(n)&&Hu(Ze(n)),xr=n=>{const i=n.toLowerCase();return s=>ae(s)&&s.nodeName.toLowerCase()===i},Rs=n=>{const i=n.map(s=>s.toLowerCase());return s=>{if(s&&s.nodeName){const d=s.nodeName.toLowerCase();return Jt(i,d)}return!1}},zi=(n,i)=>{const s=i.toLowerCase().split(" ");return d=>{if(nn(d)){const u=d.ownerDocument.defaultView;if(u)for(let f=0;f<s.length;f++){const v=u.getComputedStyle(d,null);if((v?v.getPropertyValue(n):null)===s[f])return!0}}return!1}},Yi=n=>nn(n)&&n.hasAttribute("data-mce-bogus"),Vc=n=>nn(n)&&"TABLE"===n.tagName,kt=n=>i=>!(!Ei(i)||i.contentEditable!==n&&i.getAttribute("data-mce-contenteditable")!==n),Ls=Rs(["textarea","input"]),Mt=br(3),Hh=br(4),Hc=br(7),al=br(8),Ev=br(9),sl=br(11),Bn=xr("br"),wd=xr("img"),ll=kt("true"),fo=kt("false"),Nv=Rs(["td","th"]),Ps=Rs(["td","th","caption"]),Sd=Rs(["video","audio","object","embed"]),Wc=xr("li"),st=xr("details"),Bl=xr("summary"),qy={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},xa=(n,i,s,d)=>{return Ge(d.isContent)&&d.isContent(i)||(f=n,nn(u=i)&&Ln(f.getNonEmptyElements(),u.nodeName))||(n=>nn(n)&&n.hasAttribute("data-mce-bookmark"))(i)||(u=>nn(u)&&"A"===u.nodeName&&!u.hasAttribute("href")&&(u.hasAttribute("name")||u.hasAttribute("id")))(i)||((n,i,s,d)=>{return Mt(n)&&(f=i,v=s,!(ru((u=n).data)&&!((_,k,T)=>{const M=Ze(k),I=Ze(_),O=T.getWhitespaceElements();return dr(I,R=>Ln(O,mo(R)),We(To,M))})(u,f,v)))&&(!d.includeZwsp||!(u=>{for(const f of u)if(!as(f))return!1;return!0})(n.data));var u,f,v})(i,s,n,d)||fo(i)||ll(i)&&(u=>Wg(Ze(u)).exists(f=>!Ll(f)))(i);var u,f},Tr=(n,i,s)=>{const d={...qy,...s};if(d.checkRootAsContent&&xa(n,i,i,d))return!1;let u=i.firstChild,f=0;if(!u)return!0;const v=new io(u,i);do{if(d.skipBogus&&nn(u)){const _=u.getAttribute("data-mce-bogus");if(_){u=v.next("all"===_);continue}}if(al(u))u=v.next(!0);else if(Bn(u))f++,u=v.next();else{if(xa(n,u,i,d))return!1;u=v.next()}}while(u);return f<=1},na=(n,i,s)=>Tr(n,i.dom,{checkRootAsContent:!0,...s}),Rv=(n,i,s)=>xa(n,i,i,{includeZwsp:qy.includeZwsp,...s}),ur=n=>{let i=n;return{get:()=>i,set:s=>{i=s}}},Yg=n=>{const i=ur(ue.none()),s=()=>i.get().each(d=>clearInterval(d));return{clear:()=>{s(),i.set(ue.none())},isSet:()=>i.get().isSome(),get:()=>i.get(),set:d=>{s(),i.set(ue.some(setInterval(d,n)))}}},zl=()=>{const n=(i=>{const s=ur(ue.none()),d=()=>s.get().each(i);return{clear:()=>{d(),s.set(ue.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:u=>{d(),s.set(ue.some(u))}}})(ve);return{...n,on:i=>n.get().each(i)}},z1=n=>{const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":"html"},hm=n=>"html"!==z1(n),$u=n=>hm(n.nodeName),gm=n=>z1(n.nodeName),$E=["svg","math"],Wh="data-mce-block",hr=n=>{return hn((i=n,dn(Ur(i),s=>!/[A-Z]/.test(s))),i=>{const s=CSS.escape(i);return`${s}:`+hn($E,d=>`not(${d} ${s})`).join(":")}).join(",");var i},Fl=(n,i)=>ae(i.querySelector(n))?(i.setAttribute(Wh,"true"),"inline-boundary"===i.getAttribute("data-mce-selected")&&i.removeAttribute("data-mce-selected"),!0):(i.removeAttribute(Wh),!1),Lv=(n,i)=>{const s=hr(n.getTransparentElements()),d=hr(n.getBlockElements());return dn(i.querySelectorAll(s),u=>Fl(d,u))},iu=(n,i,s)=>{var d;const u=s?"lastChild":"firstChild";for(let f=i[u];f;f=f[u])if(Tr(n,f,{checkRootAsContent:!0}))return void(null===(d=f.parentNode)||void 0===d||d.removeChild(f))},cl=(n,i)=>{const s=Lv(n,i);var d,u,f;((n,i,s)=>{const d=n.getBlockElements(),u=Ze(i),f=_=>mo(_)in d,v=_=>To(_,u);Qe(At(s),_=>{Fr(_,f,v).each(k=>{const T=dn(Qr(_),O=>f(O)&&!n.isValidChild(mo(k),mo(O)));if(T.length>0){const M=Wg(k);Qe(T,I=>{Fr(I,f,v).each(O=>{((R,N,z)=>{const L=document.createRange(),V=N.parentNode;if(V){L.setStartBefore(N),L.setEndBefore(z);const J=L.extractContents();iu(R,J,!0),L.setStartAfter(z),L.setEndAfter(N);const te=L.extractContents();iu(R,te,!1),Tr(R,J,{checkRootAsContent:!0})||V.insertBefore(J,N),Tr(R,z,{checkRootAsContent:!0})||V.insertBefore(z,N),Tr(R,te,{checkRootAsContent:!0})||V.insertBefore(te,N),V.removeChild(N)}})(n,O.dom,I.dom)})}),M.each(I=>Lv(n,I.dom))}})})})(n,i,s),d=n,u=i,f=s,Qe([...f,...dl(d,u)?[u]:[]],v=>Qe(jo(Ze(v),v.nodeName.toLowerCase()),_=>{F1(d,_.dom)&&tt(_)}))},$y=(n,i)=>{if(Xi(n,i)){const s=hr(n.getBlockElements());Fl(s,i)}},Xg=n=>n.hasAttribute(Wh),pm=(n,i)=>Ln(n.getTransparentElements(),i),Xi=(n,i)=>nn(i)&&pm(n,i.nodeName),dl=(n,i)=>Xi(n,i)&&Xg(i),F1=(n,i)=>Xi(n,i)&&!Xg(i),sc=(n,i)=>1===i.type&&pm(n,i.name)&&Y(i.attr(Wh)),zD=Dl().browser,Zg=n=>Qo(n,ci),Kg=(n,i)=>n.children&&Jt(n.children,i),mm=(n,i={})=>{let s=0;const d={},u=Ze(n),f=Fc(u),v=I=>{ge(Gg(u),I)},_=I=>{const O=Gg(u);kn(O,"#"+I).each(Ke)},k=I=>go(d,I).getOrThunk(()=>({id:"mce-u"+s++,passed:[],failed:[],count:0})),T=I=>new Promise((O,R)=>{let N;const z=zt._addCacheSuffix(I),L=k(z);d[z]=L,L.count++;const V=(ie,he)=>{Qe(ie,nt),L.status=he,L.passed=[],L.failed=[],N&&(N.onload=null,N.onerror=null,N=null)},J=()=>V(L.passed,2),te=()=>V(L.failed,3);if(O&&L.passed.push(O),R&&L.failed.push(R),1===L.status)return;if(2===L.status)return void J();if(3===L.status)return void te();L.status=1;const re=yr("link",f.dom);nc(re,{rel:"stylesheet",type:"text/css",id:L.id}),i.contentCssCors&&ta(re,"crossOrigin","anonymous"),i.referrerPolicy&&ta(re,"referrerpolicy",i.referrerPolicy),N=re.dom,N.onload=J,N.onerror=te,v(re),ta(re,"href",z)}),M=I=>{const O=zt._addCacheSuffix(I);go(d,O).each(R=>{0==--R.count&&(delete d[O],_(R.id))})};return{load:T,loadRawCss:(I,O)=>{const R=k(I);d[I]=R,R.count++;const N=yr("style",f.dom);nc(N,{rel:"stylesheet",type:"text/css",id:R.id}),N.dom.innerHTML=O,v(N)},loadAll:I=>Promise.allSettled(hn(I,O=>T(O).then(ee(O)))).then(O=>{const R=Yn(O,N=>"fulfilled"===N.status);return R.fail.length>0?Promise.reject(hn(R.fail,N=>N.reason)):hn(R.pass,N=>N.value)}),unload:M,unloadRawCss:I=>{go(d,I).each(O=>{0==--O.count&&(delete d[I],_(O.id))})},unloadAll:I=>{Qe(I,O=>{M(O)})},_setReferrerPolicy:I=>{i.referrerPolicy=I},_setContentCssCors:I=>{i.contentCssCors=I}}},fm=(()=>{const n=new WeakMap;return{forElement:(i,s)=>{const d=Ns(i).dom;return ue.from(n.get(d)).getOrThunk(()=>{const u=mm(d,s);return n.set(d,u),u})}}})(),Cd=(n,i)=>ae(n)&&(Rv(i,n)||i.isInline(n.nodeName.toLowerCase())),Yy=n=>"span"===n.nodeName.toLowerCase()&&"bookmark"===n.getAttribute("data-mce-type"),mA=(n,i,s,d)=>{var u;const f=d||i;if(nn(i)&&Yy(i))return i;const v=i.childNodes;for(let _=v.length-1;_>=0;_--)mA(n,v[_],s,f);if(nn(i)){const _=i.childNodes;1===_.length&&Yy(_[0])&&(null===(u=i.parentNode)||void 0===u||u.insertBefore(_[0],i))}return sl(_=i)||Ev(_)||Rv(s,i)||(_=>!!nn(_)&&_.childNodes.length>0)(i)||((_,k,T)=>Mt(_)&&_.data.length>0&&((M,I,O)=>{const R=new io(M,I).prev(!1),N=new io(M,I).next(!1),z=pe(R)||Cd(R,O),L=pe(N)||Cd(N,O);return z&&L})(_,k,T))(i,f,s)||n.remove(i),i;var _},fi=zt.makeMap,lC=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yu=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vm=/[<>&\"\']/g,ym=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Pv={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},ss={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},V1={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Xy=(n,i)=>{const s={};if(n){const d=n.split(",");i=i||10;for(let u=0;u<d.length;u+=2){const f=String.fromCharCode(parseInt(d[u],i));if(!ss[f]){const v="&"+d[u+1]+";";s[f]=v,s[v]=f}}return s}},Zy=Xy("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),au=(n,i)=>n.replace(i?lC:Yu,s=>ss[s]||s),Bv=(n,i)=>n.replace(i?lC:Yu,s=>s.length>1?"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";":ss[s]||"&#"+s.charCodeAt(0)+";"),zv=(n,i,s)=>{const d=s||Zy;return n.replace(i?lC:Yu,u=>ss[u]||d[u]||u)},bm={encodeRaw:au,encodeAllRaw:n=>(""+n).replace(vm,i=>ss[i]||i),encodeNumeric:Bv,encodeNamed:zv,getEncodeFunc:(n,i)=>{const s=Xy(i)||Zy,d=fi(n.replace(/\+/g,","));return d.named&&d.numeric?(u,f)=>u.replace(f?lC:Yu,v=>void 0!==ss[v]?ss[v]:void 0!==s[v]?s[v]:v.length>1?"&#"+(1024*(v.charCodeAt(0)-55296)+(v.charCodeAt(1)-56320)+65536)+";":"&#"+v.charCodeAt(0)+";"):d.named?i?(u,f)=>zv(u,f,s):zv:d.numeric?Bv:au},decode:n=>n.replace(ym,(i,s)=>s?(s="x"===s.charAt(0).toLowerCase()?parseInt(s.substr(1),16):parseInt(s,10))>65535?(s-=65536,String.fromCharCode(55296+(s>>10),56320+(1023&s))):Pv[s]||String.fromCharCode(s):V1[i]||Zy[i]||(d=>{const u=yr("div").dom;return u.innerHTML=d,u.textContent||u.innerText||d})(i))},Da=(n,i)=>(n=zt.trim(n))?n.split(i||" "):[],kd=n=>new RegExp("^"+n.replace(/([?+*])/g,".$1")+"$"),ul=n=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==n?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],..."html5-strict"!==n?["xml:lang"]:[]]),hl=n=>{let i,s;i="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",s="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==n&&(i+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",s+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==n&&(s=[s,"acronym applet basefont big font strike tt"].join(" "),i=[i,"center dir isindex noframes"].join(" "));const d=[i,s].join(" ");return{blockContent:i,phrasingContent:s,flowContent:d}},Bs=n=>{const{blockContent:i,phrasingContent:s,flowContent:d}=hl(n),u=f=>Object.freeze(f.split(" "));return Object.freeze({blockContent:u(i),phrasingContent:u(s),flowContent:u(d)})},xm={html4:ma(()=>Bs("html4")),html5:ma(()=>Bs("html5")),"html5-strict":ma(()=>Bs("html5-strict"))},gl=(n,i)=>{const{blockContent:s,phrasingContent:d,flowContent:u}=xm[n]();return"blocks"===i?ue.some(s):"phrasing"===i?ue.some(d):"flow"===i?ue.some(u):ue.none()},Fv=n=>ue.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(n)).map(i=>({preset:"@"===i[1],name:i[2]})),Vv={},Hv=zt.makeMap,Ni=zt.each,H1=zt.extend,W1=zt.explode,Ky=(n,i={})=>{const s=Hv(n," ",Hv(n.toUpperCase()," "));return H1(s,i)},Zn=n=>Ky("td th li dt dd figcaption caption details summary",n.getTextBlockElements()),mn=(n,i)=>{if(n){const s={};return Y(n)&&(n={"*":n}),Ni(n,(d,u)=>{s[u]=s[u.toUpperCase()]="map"===i?Hv(d,/[, ]/):W1(d,/[, ]/)}),s}},Vl=(n={})=>{var i;const s={},d={};let u=[];const f={},v={},_=(un,ro,Co)=>{const qn=n[un];if(qn)return Hv(qn,/[, ]/,Hv(qn.toUpperCase(),/[, ]/));{let er=Vv[un];return er||(er=Ky(ro,Co),Vv[un]=er),er}},k=null!==(i=n.schema)&&void 0!==i?i:"html5",T=(un=>{const ro=ul(un),{phrasingContent:Co,flowContent:qn}=hl(un),er={},Sr=(Lr,Ir,Gi)=>{er[Lr]={attributes:Sn(Ir,ee({})),attributesOrder:Ir,children:Sn(Gi,ee({}))}},sn=(Lr,Ir="",Gi="")=>{const Js=Da(Gi),Pg=Da(Lr);let ps=Pg.length;const zu=[...ro,...Da(Ir)];for(;ps--;)Sr(Pg[ps],zu.slice(),Js)},Hn=(Lr,Ir)=>{const Gi=Da(Lr),Js=Da(Ir);let Pg=Gi.length;for(;Pg--;){const ps=er[Gi[Pg]];for(let zu=0,ms=Js.length;zu<ms;zu++)ps.attributes[Js[zu]]={},ps.attributesOrder.push(Js[zu])}};return"html5-strict"!==un&&(Qe(Da("acronym applet basefont big font strike tt"),Lr=>{sn(Lr,"",Co)}),Qe(Da("center dir isindex noframes"),Lr=>{sn(Lr,"",qn)})),sn("html","manifest","head body"),sn("head","","base command link meta noscript script style title"),sn("title hr noscript br"),sn("base","href target"),sn("link","href rel media hreflang type sizes hreflang"),sn("meta","name http-equiv content charset"),sn("style","media type scoped"),sn("script","src async defer type charset"),sn("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",qn),sn("dd div","",qn),sn("address dt caption","","html4"===un?Co:qn),sn("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",Co),sn("blockquote","cite",qn),sn("ol","reversed start type","li"),sn("ul","","li"),sn("li","value",qn),sn("dl","","dt dd"),sn("a","href target rel media hreflang type","html4"===un?Co:qn),sn("q","cite",Co),sn("ins del","cite datetime",qn),sn("img","src sizes srcset alt usemap ismap width height"),sn("iframe","src name width height",qn),sn("embed","src type width height"),sn("object","data type typemustmatch name usemap form width height",[qn,"param"].join(" ")),sn("param","name value"),sn("map","name",[qn,"area"].join(" ")),sn("area","alt coords shape href target rel media hreflang type"),sn("table","border","caption colgroup thead tfoot tbody tr"+("html4"===un?" col":"")),sn("colgroup","span","col"),sn("col","span"),sn("tbody thead tfoot","","tr"),sn("tr","","td th"),sn("td","colspan rowspan headers",qn),sn("th","colspan rowspan headers scope abbr",qn),sn("form","accept-charset action autocomplete enctype method name novalidate target",qn),sn("fieldset","disabled form name",[qn,"legend"].join(" ")),sn("label","form for",Co),sn("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),sn("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===un?qn:Co),sn("select","disabled form multiple name required size","option optgroup"),sn("optgroup","disabled label","option"),sn("option","disabled label selected value"),sn("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),sn("menu","type label",[qn,"li"].join(" ")),sn("noscript","",qn),"html4"!==un&&(sn("wbr"),sn("ruby","",[Co,"rt rp"].join(" ")),sn("figcaption","",qn),sn("mark rt rp bdi","",Co),sn("summary","",[Co,"h1 h2 h3 h4 h5 h6"].join(" ")),sn("canvas","width height",qn),sn("data","value",Co),sn("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[qn,"track source"].join(" ")),sn("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[qn,"track source"].join(" ")),sn("picture","","img source"),sn("source","src srcset type media sizes"),sn("track","kind src srclang label default"),sn("datalist","",[Co,"option"].join(" ")),sn("article section nav aside main header footer","",qn),sn("hgroup","","h1 h2 h3 h4 h5 h6"),sn("figure","",[qn,"figcaption"].join(" ")),sn("time","datetime",Co),sn("dialog","open",qn),sn("command","type label icon disabled checked radiogroup command"),sn("output","for form name",Co),sn("progress","value max",Co),sn("meter","value min max low high optimum",Co),sn("details","open",[qn,"summary"].join(" ")),sn("keygen","autofocus challenge disabled form keytype name"),Sr("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==un&&(Hn("script","language xml:space"),Hn("style","xml:space"),Hn("object","declare classid code codebase codetype archive standby align border hspace vspace"),Hn("embed","align name hspace vspace"),Hn("param","valuetype type"),Hn("a","charset name rev shape coords"),Hn("br","clear"),Hn("applet","codebase archive code object alt name width height align hspace vspace"),Hn("img","name longdesc align border hspace vspace"),Hn("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Hn("font basefont","size color face"),Hn("input","usemap align"),Hn("select"),Hn("textarea"),Hn("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Hn("ul","type compact"),Hn("li","type"),Hn("ol dl menu dir","compact"),Hn("pre","width xml:space"),Hn("hr","align noshade size width"),Hn("isindex","prompt"),Hn("table","summary width frame rules cellspacing cellpadding align bgcolor"),Hn("col","width align char charoff valign"),Hn("colgroup","width align char charoff valign"),Hn("thead","align char charoff valign"),Hn("tr","align char charoff valign bgcolor"),Hn("th","axis align char charoff valign nowrap bgcolor width height"),Hn("form","accept"),Hn("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Hn("tfoot","align char charoff valign"),Hn("tbody","align char charoff valign"),Hn("area","nohref"),Hn("body","background bgcolor text link vlink alink")),"html4"!==un&&(Hn("input button select textarea","autofocus"),Hn("input textarea","placeholder"),Hn("a","download"),Hn("link script img","crossorigin"),Hn("img","loading"),Hn("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),"html4"!==un&&Qe([er.video,er.audio],Lr=>{delete Lr.children.audio,delete Lr.children.video}),Qe(Da("a form meter progress dfn"),Lr=>{er[Lr]&&delete er[Lr].children[Lr]}),delete er.caption.children.table,delete er.script,er})(k);!1===n.verify_html&&(n.valid_elements="*[*]");const M=mn(n.valid_styles),I=mn(n.invalid_styles,"map"),O=mn(n.valid_classes,"map"),R=_("whitespace_elements","pre script noscript style textarea video audio iframe object code"),N=_("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),z=_("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),L=_("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),V="td th iframe video audio object script code",J=_("non_empty_elements",V+" pre svg textarea summary",z),te=_("move_caret_before_on_enter_elements",V+" table",z),re="h1 h2 h3 h4 h5 h6",ie=_("text_block_elements",re+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),he=_("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",ie),fe=_("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),ye=_("transparent_elements","a ins del canvas map"),Ie=_("wrap_block_elements","pre "+re);Ni("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),un=>{v[un]=new RegExp("</"+un+"[^>]*>","gi")});const He=un=>{const ro=ue.from(s["@"]),Co=/[*?+]/;Qe(((qn,er)=>{const Sr=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Tt(Da(er,","),sn=>{const Hn=Sr.exec(sn);if(Hn){const Lr=Hn[1],Ir=Hn[2],Gi=Hn[3],Js=Hn[4],Pg=Hn[5],ps={attributes:{},attributesOrder:[]};if(qn.each(zu=>{return I1=ps,ho((ms=zu).attributes,(Py,Sv)=>{I1.attributes[Sv]=Py}),void I1.attributesOrder.push(...ms.attributesOrder);var ms,I1}),"#"===Lr?ps.paddEmpty=!0:"-"===Lr&&(ps.removeEmpty=!0),"!"===Js&&(ps.removeEmptyAttrs=!0),Pg&&((zu,ms)=>{const I1=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Py=/[*?+]/,{attributes:Sv,attributesOrder:Oh}=ms;Qe(Da(zu,"|"),D1=>{const By=I1.exec(D1);if(By){const nm={},iA=By[1],Dc=By[2].replace(/[\\:]:/g,":"),JS=By[3],Ta=By[4];if("!"===iA&&(ms.attributesRequired=ms.attributesRequired||[],ms.attributesRequired.push(Dc),nm.required=!0),"-"===iA)return delete Sv[Dc],void Oh.splice(zt.inArray(Oh,Dc),1);if(JS&&("="===JS?(ms.attributesDefault=ms.attributesDefault||[],ms.attributesDefault.push({name:Dc,value:Ta}),nm.defaultValue=Ta):"~"===JS?(ms.attributesForced=ms.attributesForced||[],ms.attributesForced.push({name:Dc,value:Ta}),nm.forcedValue=Ta):"<"===JS&&(nm.validValues=zt.makeMap(Ta,"?"))),Py.test(Dc)){const Cv=nm;ms.attributePatterns=ms.attributePatterns||[],Cv.pattern=kd(Dc),ms.attributePatterns.push(Cv)}else Sv[Dc]||Oh.push(Dc),Sv[Dc]=nm}})})(Pg,ps),Gi&&(ps.outputName=Ir),"@"===Ir){if(!qn.isNone())return[];qn=ue.some(ps)}return[Gi?{name:Ir,element:ps,aliasName:Gi}:{name:Ir,element:ps}]}return[]})})(ro,un??""),({name:qn,element:er,aliasName:Sr})=>{if(Sr&&(s[Sr]=er),Co.test(qn)){const sn=er;sn.pattern=kd(qn),u.push(sn)}else s[qn]=er})},we=un=>{u=[],Qe(Ur(s),ro=>{delete s[ro]}),He(un)},De=(un,ro)=>{var Co,qn;delete Vv.text_block_elements,delete Vv.block_elements;const er=!!ro.extends&&!wr(ro.extends),Sr=ro.extends;if(d[un]=Sr?d[Sr]:{},f[un]=Sr??un,J[un.toUpperCase()]={},J[un]={},er||(he[un.toUpperCase()]={},he[un]={}),Sr&&!s[un]&&s[Sr]){const sn=(Hn=>{const Lr=Ir=>{return K(Ir)?hn(Ir,Lr):W(Gi=Ir)&&Gi.source&&"[object RegExp]"===Object.prototype.toString.call(Gi)?new RegExp(Ir.source,Ir.flags):W(Ir)?vn(Ir,Lr):Ir;var Gi};return Lr(Hn)})(s[Sr]);delete sn.removeEmptyAttrs,delete sn.removeEmpty,s[un]=sn}else s[un]={attributesOrder:[],attributes:{}};if(K(ro.attributes)){const sn=Lr=>{Hn.attributesOrder.push(Lr),Hn.attributes[Lr]={}},Hn=null!==(Co=s[un])&&void 0!==Co?Co:{};delete Hn.attributesDefault,delete Hn.attributesForced,delete Hn.attributePatterns,delete Hn.attributesRequired,Hn.attributesOrder=[],Hn.attributes={},Qe(ro.attributes,Lr=>{const Ir=ul(k);Fv(Lr).each(({preset:Gi,name:Js})=>{Gi?"global"===Js&&Qe(Ir,sn):sn(Js)})}),s[un]=Hn}if(de(ro.padEmpty)){const sn=null!==(qn=s[un])&&void 0!==qn?qn:{};sn.paddEmpty=ro.padEmpty,s[un]=sn}if(K(ro.children)){const sn={},Hn=Ir=>{sn[Ir]={}},Lr=Ir=>{gl(k,Ir).each(Gi=>{Qe(Gi,Hn)})};Qe(ro.children,Ir=>{Fv(Ir).each(({preset:Gi,name:Js})=>{Gi?Lr(Js):Hn(Js)})}),d[un]=sn}Sr&&ho(d,(sn,Hn)=>{sn[Sr]&&(d[Hn]=sn=H1({},d[Hn]),sn[un]=sn[Sr])})},Be=un=>{W(un)?ho(un,(ro,Co)=>De(Co,ro)):Y(un)&&Qe((Co=>{const qn=/^(~)?(.+)$/;return Tt(Da(Co,","),er=>{const Sr=qn.exec(er);return Sr?[{cloneName:"~"===Sr[1]?"span":"div",name:Sr[2]}]:[]})})(un??""),({name:Co,cloneName:qn})=>{De(Co,{extends:qn})})},et=un=>{Qe((ro=>{const Co=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Tt(Da(ro,","),qn=>{const er=Co.exec(qn);if(er){const Sr=er[1];return[{operation:Sr?(Hn=Sr,"-"===Hn?"remove":"add"):"replace",name:er[2],validChildren:Tt(Da(er[3],"|"),Hn=>Fv(Hn).toArray())}]}var Hn;return[]})})(un??""),({operation:ro,name:Co,validChildren:qn})=>{const er="replace"===ro?{"#comment":{}}:d[Co],Sr=sn=>{"remove"===ro?delete er[sn]:er[sn]={}};Qe(qn,({preset:sn,name:Hn})=>{sn?gl(k,Hn).each(Ir=>{Qe(Ir,Sr)}):Sr(Hn)}),d[Co]=er})},Ye=un=>{const ro=s[un];if(ro)return ro;let Co=u.length;for(;Co--;){const qn=u[Co];if(qn.pattern.test(un))return qn}},it=ee(M),yt=ee(I),It=ee(O),qt=ee(L),Xt=ee(he),Dt=ee(ie),en=ee(fe),qe=ee(Object.seal(z)),Je=ee(N),gt=ee(J),ht=ee(te),Zt=ee(R),Ut=ee(ye),Mn=ee(Ie),In=ee(Object.seal(v)),Jn=(un,ro)=>{const Co=Ye(un);if(Co){if(!ro)return!0;{if(Co.attributes[ro])return!0;const qn=Co.attributePatterns;if(qn){let er=qn.length;for(;er--;)if(qn[er].pattern.test(ro))return!0}}}return!1},wr=un=>Ln(Xt(),un),pi=un=>!gn(un,"#")&&Jn(un)&&!wr(un),Zd=ee(f);return n.valid_elements?(we(n.valid_elements),Ni(T,(un,ro)=>{d[ro]=un.children})):(Ni(T,(un,ro)=>{s[ro]={attributes:un.attributes,attributesOrder:un.attributesOrder},d[ro]=un.children}),Ni(Da("strong/b em/i"),un=>{const ro=Da(un,"/");s[ro[1]].outputName=ro[0]}),Ni(fe,(un,ro)=>{s[ro]&&(n.padd_empty_block_inline_children&&(s[ro].paddInEmptyBlock=!0),s[ro].removeEmpty=!0)}),Ni(Da("ol ul blockquote a table tbody"),un=>{s[un]&&(s[un].removeEmpty=!0)}),Ni(Da("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),un=>{s[un]&&(s[un].paddEmpty=!0)}),Ni(Da("span"),un=>{s[un].removeEmptyAttrs=!0})),delete s.svg,Be(n.custom_elements),et(n.valid_children),He(n.extended_valid_elements),et("+ol[ul|ol],+ul[ul|ol]"),Ni({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(un,ro)=>{s[ro]&&(s[ro].parentsRequired=Da(un))}),n.invalid_elements&&Ni(W1(n.invalid_elements),un=>{s[un]&&delete s[un]}),Ye("span")||He("span[!data-mce-type|*]"),{type:k,children:d,elements:s,getValidStyles:it,getValidClasses:It,getBlockElements:Xt,getInvalidStyles:yt,getVoidElements:qe,getTextBlockElements:Dt,getTextInlineElements:en,getBoolAttrs:qt,getElementRule:Ye,getSelfClosingElements:Je,getNonEmptyElements:gt,getMoveCaretBeforeOnEnterElements:ht,getWhitespaceElements:Zt,getTransparentElements:Ut,getSpecialElements:In,isValidChild:(un,ro)=>{const Co=d[un.toLowerCase()];return!(!Co||!Co[ro.toLowerCase()])},isValid:Jn,isBlock:wr,isInline:pi,isWrapper:un=>Ln(Mn(),un)||pi(un),getCustomElements:Zd,addValidElements:He,setValidElements:we,addCustomElements:Be,addValidChildren:et}},Wv=n=>{const i=n.toString(16);return(1===i.length?"0"+i:i).toUpperCase()},Jg=n=>{return{value:(s=Wv(n.red)+Wv(n.green)+Wv(n.blue),Ft(s,"#").toUpperCase())};var s},Jy=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,gr=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Qy=(n,i,s,d)=>({red:parseInt(n,10),green:parseInt(i,10),blue:parseInt(s,10),alpha:parseFloat(d)}),eb=n=>{const i=Jy.exec(n);if(null!==i)return ue.some(Qy(i[1],i[2],i[3],"1"));const s=gr.exec(n);return null!==s?ue.some(Qy(s[1],s[2],s[3],s[4])):ue.none()},xt=n=>`rgba(${n.red},${n.green},${n.blue},${n.alpha})`,_m=n=>eb(n).map(Jg).map(i=>"#"+i.value).getOr(n),Uv=(n={},i)=>{const s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,d=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,f={};let v,_;i&&(v=i.getValidStyles(),_=i.getInvalidStyles());const T="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let I=0;I<T.length;I++)f[T[I]]="\ufeff"+I,f["\ufeff"+I]=T[I];const M={parse:I=>{const O={};let R=!1;const N=n.url_converter,z=n.url_converter_scope||M,L=(we,De,Be)=>{const et=O[we+"-top"+De];if(!et)return;const Ye=O[we+"-right"+De];if(!Ye)return;const it=O[we+"-bottom"+De];if(!it)return;const yt=O[we+"-left"+De];if(!yt)return;const It=[et,Ye,it,yt];let qt=It.length-1;for(;qt--&&It[qt]===It[qt+1];);qt>-1&&Be||(O[we+De]=-1===qt?It[0]:It.join(" "),delete O[we+"-top"+De],delete O[we+"-right"+De],delete O[we+"-bottom"+De],delete O[we+"-left"+De])},V=we=>{const De=O[we];if(!De)return;const Be=De.indexOf(",")>-1?[De]:De.split(" ");let et=Be.length;for(;et--;)if(Be[et]!==Be[0])return!1;return O[we]=Be[0],!0},J=we=>(R=!0,f[we]),te=(we,De)=>(R&&(we=we.replace(/\uFEFF[0-9]/g,Be=>f[Be])),De||(we=we.replace(/\\([\'\";:])/g,"$1")),we),re=we=>String.fromCharCode(parseInt(we.slice(1),16)),ie=we=>we.replace(/\\[0-9a-f]+/gi,re),he=(we,De,Be,et,Ye,it)=>{if(Ye=Ye||it)return"'"+(Ye=te(Ye)).replace(/\'/g,"\\'")+"'";if(De=te(De||Be||et||""),!n.allow_script_urls){const yt=De.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(yt)||!n.allow_svg_data_urls&&/^data:image\/svg/i.test(yt))return""}return N&&(De=N.call(z,De,"style")),"url('"+De.replace(/\'/g,"\\'")+"')"};if(I){let we;for(I=(I=I.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,J).replace(/\"[^\"]+\"|\'[^\']+\'/g,De=>De.replace(/[;:]/g,J));we=d.exec(I);){d.lastIndex=we.index+we[0].length;let De=we[1].replace(u,"").toLowerCase(),Be=we[2].replace(u,"");if(De&&Be){if(De=ie(De),Be=ie(Be),-1!==De.indexOf("\ufeff")||-1!==De.indexOf('"')||!n.allow_script_urls&&("behavior"===De||/expression\s*\(|\/\*|\*\//.test(Be)))continue;"font-weight"===De&&"700"===Be?Be="bold":"color"!==De&&"background-color"!==De||(Be=Be.toLowerCase()),"rgb"==(Jy.test(He=Be)?"rgb":gr.test(He)?"rgba":"other")&&eb(Be).each(et=>{Be=_m(xt(et)).toLowerCase()}),Be=Be.replace(s,he),O[De]=R?te(Be,!0):Be}}L("border","",!0),L("border","-width"),L("border","-color"),L("border","-style"),L("padding",""),L("margin",""),ye="border-style",Ie="border-color",V(fe="border-width")&&V(ye)&&V(Ie)&&(O.border=O[fe]+" "+O[ye]+" "+O[Ie],delete O[fe],delete O[ye],delete O[Ie]),"medium none"===O.border&&delete O.border,"none"===O["border-image"]&&delete O["border-image"]}var fe,ye,Ie,He;return O},serialize:(I,O)=>{let R="";const N=(z,L)=>{const V=L[z];if(V)for(let J=0,te=V.length;J<te;J++){const re=V[J],ie=I[re];ie&&(R+=(R.length>0?" ":"")+re+": "+ie+";")}};return O&&v?(N("*",v),N(O,v)):ho(I,(z,L)=>{z&&((V,J)=>{if(!_||!J)return!0;let te=_["*"];return!(te&&te[V]||(te=_[J],te&&te[V]))})(L,O)&&(R+=(R.length>0?" ":"")+L+": "+z+";")}),R}};return M},tb={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},cC=(n,i)=>{const s=i??{};for(const d in n)Ln(tb,d)||(s[d]=n[d]);return ae(n.composedPath)&&(s.composedPath=()=>n.composedPath()),ae(n.getModifierState)&&(s.getModifierState=d=>n.getModifierState(d)),ae(n.getTargetRanges)&&(s.getTargetRanges=()=>n.getTargetRanges()),s},di=(n,i,s,d)=>{var u;const f=cC(i,d);return f.type=n,_e(f.target)&&(f.target=null!==(u=f.srcElement)&&void 0!==u?u:s),(_e((v=i).preventDefault)||(_=v)instanceof Event||Ge(_.initEvent))&&(f.preventDefault=()=>{f.defaultPrevented=!0,f.isDefaultPrevented=Wt,Ge(i.preventDefault)&&i.preventDefault()},f.stopPropagation=()=>{f.cancelBubble=!0,f.isPropagationStopped=Wt,Ge(i.stopPropagation)&&i.stopPropagation()},f.stopImmediatePropagation=()=>{f.isImmediatePropagationStopped=Wt,f.stopPropagation()},(v=>v.isDefaultPrevented===Wt||v.isDefaultPrevented===Bt)(f)||(f.isDefaultPrevented=!0===f.defaultPrevented?Wt:Bt,f.isPropagationStopped=!0===f.cancelBubble?Wt:Bt,f.isImmediatePropagationStopped=Bt)),f;var v,_},Uh=/^(?:mouse|contextmenu)|click/,lc=(n,i,s,d)=>{n.addEventListener(i,s,d||!1)},qo=(n,i,s,d)=>{n.removeEventListener(i,s,d||!1)},_a=(n,i)=>{const s=di(n.type,n,document,i);if(ae(d=n)&&Uh.test(d.type)&&pe(n.pageX)&&!pe(n.clientX)){const d=s.target.ownerDocument||document,u=d.documentElement,f=d.body,v=s;v.pageX=n.clientX+(u&&u.scrollLeft||f&&f.scrollLeft||0)-(u&&u.clientLeft||f&&f.clientLeft||0),v.pageY=n.clientY+(u&&u.scrollTop||f&&f.scrollTop||0)-(u&&u.clientTop||f&&f.clientTop||0)}var d;return s},fA=(n,i,s)=>{const d=n.document,u={type:"ready"};if(s.domLoaded)return void i(u);const f=()=>{qo(n,"DOMContentLoaded",f),qo(n,"load",f),s.domLoaded||(s.domLoaded=!0,i(u)),n=null};"complete"===d.readyState||"interactive"===d.readyState&&d.body?f():lc(n,"DOMContentLoaded",f),s.domLoaded||lc(n,"load",f)};class Hl{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(i,s,d,u){const f=this;let v;const _=window,k=O=>{f.executeHandlers(_a(O||_.event),T)};if(!i||Mt(i)||al(i))return d;let T;i[f.expando]?T=i[f.expando]:(T=f.count++,i[f.expando]=T,f.events[T]={}),u=u||i;const M=s.split(" ");let I=M.length;for(;I--;){let O=M[I],R=k,N=!1,z=!1;"DOMContentLoaded"===O&&(O="ready"),f.domLoaded&&"ready"===O&&"complete"===i.readyState?d.call(u,_a({type:O})):(f.hasFocusIn||"focusin"!==O&&"focusout"!==O||(N=!0,z="focusin"===O?"focus":"blur",R=L=>{const V=_a(L||_.event);V.type="focus"===V.type?"focusin":"focusout",f.executeHandlers(V,T)}),v=f.events[T][O],v?"ready"===O&&f.domLoaded?d(_a({type:O})):v.push({func:d,scope:u}):(f.events[T][O]=v=[{func:d,scope:u}],v.fakeName=z,v.capture=N,v.nativeHandler=R,"ready"===O?fA(i,R,f):lc(i,z||O,R,N)))}return i=v=null,d}unbind(i,s,d){if(!i||Mt(i)||al(i))return this;const u=i[this.expando];if(u){let f=this.events[u];if(s){const v=s.split(" ");let _=v.length;for(;_--;){const k=v[_],T=f[k];if(T){if(d){let M=T.length;for(;M--;)if(T[M].func===d){const I=T.nativeHandler,O=T.fakeName,R=T.capture,N=T.slice(0,M).concat(T.slice(M+1));N.nativeHandler=I,N.fakeName=O,N.capture=R,f[k]=N}}d&&0!==T.length||(delete f[k],qo(i,T.fakeName||k,T.nativeHandler,T.capture))}}}else ho(f,(v,_)=>{qo(i,v.fakeName||_,v.nativeHandler,v.capture)}),f={};for(const v in f)if(Ln(f,v))return this;delete this.events[u];try{delete i[this.expando]}catch{i[this.expando]=null}}return this}fire(i,s,d){return this.dispatch(i,s,d)}dispatch(i,s,d){if(!i||Mt(i)||al(i))return this;const u=_a({type:s,target:i},d);do{const f=i[this.expando];f&&this.executeHandlers(u,f),i=i.parentNode||i.ownerDocument||i.defaultView||i.parentWindow}while(i&&!u.isPropagationStopped());return this}clean(i){if(!i||Mt(i)||al(i))return this;if(i[this.expando]&&this.unbind(i),i.getElementsByTagName||(i=i.document),i&&i.getElementsByTagName){this.unbind(i);const s=i.getElementsByTagName("*");let d=s.length;for(;d--;)(i=s[d])[this.expando]&&this.unbind(i)}return this}destroy(){this.events={}}cancel(i){return i&&(i.preventDefault(),i.stopImmediatePropagation()),!1}executeHandlers(i,s){const d=this.events[s],u=d&&d[i.type];if(u)for(let f=0,v=u.length;f<v;f++){const _=u[f];if(_&&!1===_.func.call(_.scope,i)&&i.preventDefault(),i.isImmediatePropagationStopped())return}}}Hl.Event=new Hl;const Qg=zt.each,Gv=zt.grep,Wl="data-mce-style",wm=zt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),jv=(n,i,s)=>{_e(s)||""===s?Gr(n,i):ta(n,i,s)},Ul=n=>n.replace(/[A-Z]/g,i=>"-"+i.toLowerCase()),wa=(n,i)=>{let s=0;if(n)for(let d=n.nodeType,u=n.previousSibling;u;u=u.previousSibling){const f=u.nodeType;(!i||!Mt(u)||f!==d&&u.data.length)&&(s++,d=f)}return s},cc=(n,i)=>{const s=is(i,"style"),d=n.serialize(n.parse(s),mo(i));jv(i,Wl,d)},Pt=(n,i,s)=>{const d=Ul(i);var u,f;_e(s)||""===s?Pl(n,d):B1(n,d,(f=d,Re(u=s)?Ln(wm,f)?u+"":u+"px":u))},Mr=(n,i={})=>{const s={},d=window,u={};let f=0;const v=fm.forElement(Ze(n),{contentCssCors:i.contentCssCors,referrerPolicy:i.referrerPolicy}),_=[],k=i.schema?i.schema:Vl({}),T=Uv({url_converter:i.url_converter,url_converter_scope:i.url_converter_scope},i.schema),M=i.ownEvents?new Hl:Hl.Event,I=k.getBlockElements(),O=qe=>qe&&n&&Y(qe)?n.getElementById(qe):qe,R=qe=>{const Je=O(qe);return ae(Je)?Ze(Je):null},N=(qe,Je,gt="")=>{let ht;const Zt=R(qe);if(ae(Zt)&&ci(Zt)){const Ut=en[Je];ht=Ut&&Ut.get?Ut.get(Zt.dom,Je):is(Zt,Je)}return ae(ht)?ht:gt},z=qe=>{const Je=O(qe);return _e(Je)?[]:Je.attributes},L=(qe,Je,gt)=>{ye(qe,ht=>{if(nn(ht)){const Zt=Ze(ht),Ut=""===gt?null:gt,Mn=is(Zt,Je),In=en[Je];In&&In.set?In.set(Zt.dom,Ut,Je):jv(Zt,Je,Ut),Mn!==Ut&&i.onSetAttrib&&i.onSetAttrib({attrElm:Zt.dom,attrName:Je,attrValue:Ut})}})},V=()=>i.root_element||n.body,J=(qe,Je)=>((gt,ht,Zt)=>{let Ut=0,Mn=0;const In=gt.ownerDocument;if(Zt=Zt||gt,ht){if(Zt===gt&&ht.getBoundingClientRect&&"static"===Ci(Ze(gt),"position")){const wr=ht.getBoundingClientRect();return Ut=wr.left+(In.documentElement.scrollLeft||gt.scrollLeft)-In.documentElement.clientLeft,Mn=wr.top+(In.documentElement.scrollTop||gt.scrollTop)-In.documentElement.clientTop,{x:Ut,y:Mn}}let Jn=ht;for(;Jn&&Jn!==Zt&&Jn.nodeType&&!Kg(Jn,Zt);)Ut+=Jn.offsetLeft||0,Mn+=Jn.offsetTop||0,Jn=Jn.offsetParent;for(Jn=ht.parentNode;Jn&&Jn!==Zt&&Jn.nodeType&&!Kg(Jn,Zt);)Ut-=Jn.scrollLeft||0,Mn-=Jn.scrollTop||0,Jn=Jn.parentNode;Mn+=(wr=Ze(ht),zD.isFirefox()&&"table"===mo(wr)?Zg(Qr(wr)).filter(pi=>"caption"===mo(pi)).bind(pi=>Zg(Gy(pi)).map(Zd=>Zd.dom.offsetTop<=pi.dom.offsetTop?-pi.dom.offsetHeight:0)).getOr(0):0)}var wr;return{x:Ut,y:Mn}})(n.body,O(qe),Je),te=(qe,Je,gt)=>{const ht=O(qe);var Zt;if(!_e(ht)&&(Ei(ht)||nn(Zt=ht)&&"http://www.w3.org/2000/svg"===Zt.namespaceURI))return gt?Ci(Ze(ht),Ul(Je)):("float"===(Je=Je.replace(/-(\D)/g,(Ut,Mn)=>Mn.toUpperCase()))&&(Je="cssFloat"),ht.style?ht.style[Je]:void 0)},re=qe=>{const Je=O(qe);if(!Je)return{w:0,h:0};let gt=te(Je,"width"),ht=te(Je,"height");return gt&&-1!==gt.indexOf("px")||(gt="0"),ht&&-1!==ht.indexOf("px")||(ht="0"),{w:parseInt(gt,10)||Je.offsetWidth||Je.clientWidth,h:parseInt(ht,10)||Je.offsetHeight||Je.clientHeight}},ie=(qe,Je)=>{if(!qe)return!1;const gt=K(qe)?qe:[qe];return _n(gt,ht=>va(Ze(ht),Je))},he=(qe,Je,gt,ht)=>{const Zt=[];let Ut=O(qe);ht=void 0===ht;const Mn=gt||("BODY"!==V().nodeName?V().parentNode:null);if(Y(Je))if("*"===Je)Je=nn;else{const In=Je;Je=Jn=>ie(Jn,In)}for(;Ut&&!(Ut===Mn||_e(Ut.nodeType)||Ev(Ut)||sl(Ut));){if(!Je||Je(Ut)){if(!ht)return[Ut];Zt.push(Ut)}Ut=Ut.parentNode}return ht?Zt:null},fe=(qe,Je,gt)=>{let ht=Je;if(qe){Y(Je)&&(ht=Zt=>ie(Zt,Je));for(let Zt=qe[gt];Zt;Zt=Zt[gt])if(Ge(ht)&&ht(Zt))return Zt}return null},ye=function(qe,Je,gt){const ht=gt??this;if(K(qe)){const Zt=[];return Qg(qe,(Ut,Mn)=>{const In=O(Ut);In&&Zt.push(Je.call(ht,In,Mn))}),Zt}{const Zt=O(qe);return!!Zt&&Je.call(ht,Zt)}},Ie=(qe,Je)=>{ye(qe,gt=>{ho(Je,(ht,Zt)=>{L(gt,Zt,ht)})})},He=(qe,Je)=>{ye(qe,gt=>{const ht=Ze(gt);Lt(ht,Je)})},we=(qe,Je,gt,ht,Zt)=>ye(qe,Ut=>{const Mn=Y(Je)?n.createElement(Je):Je;return ae(gt)&&Ie(Mn,gt),ht&&(!Y(ht)&&ht.nodeType?Mn.appendChild(ht):Y(ht)&&He(Mn,ht)),Zt?Mn:Ut.appendChild(Mn)}),De=(qe,Je,gt)=>we(n.createElement(qe),qe,Je,gt,!0),Be=bm.encodeAllRaw,et=(qe,Je)=>ye(qe,gt=>{const ht=Ze(gt);return Je&&Qe(Qr(ht),Zt=>{fa(Zt)&&0===Zt.dom.length?Ke(Zt):ki(ht,Zt)}),Ke(ht),ht.dom}),Ye=(qe,Je,gt)=>{ye(qe,ht=>{if(nn(ht)){const Zt=Ze(ht),Ut=Je.split(" ");Qe(Ut,Mn=>{var In,Jn,pi,Zd;ae(gt)?(gt?Uu:Gu)(Zt,Mn):(Jn=Mn,Fg(In=Zt)?In.dom.classList.toggle(Jn):(Zd=Jn,Jt(cm(pi=In),Zd)?Av(pi,Zd):Wy(pi,Zd)),Iv(In))})}})},it=(qe,Je,gt)=>ye(Je,ht=>{var Zt;const Ut=K(Je)?qe.cloneNode(!0):qe;return gt&&Qg(Gv(ht.childNodes),Mn=>{Ut.appendChild(Mn)}),null===(Zt=ht.parentNode)||void 0===Zt||Zt.replaceChild(Ut,ht),ht}),yt=()=>n.createRange(),It=(qe,Je,gt,ht)=>{if(K(qe)){let Zt=qe.length;const Ut=[];for(;Zt--;)Ut[Zt]=It(qe[Zt],Je,gt,ht);return Ut}return!i.collect||qe!==n&&qe!==d||_.push([qe,Je,gt,ht]),M.bind(qe,Je,gt,ht||Dt)},qt=(qe,Je,gt)=>{if(K(qe)){let ht=qe.length;const Zt=[];for(;ht--;)Zt[ht]=qt(qe[ht],Je,gt);return Zt}if(_.length>0&&(qe===n||qe===d)){let ht=_.length;for(;ht--;){const[Zt,Ut,Mn]=_[ht];qe!==Zt||Je&&Je!==Ut||gt&&gt!==Mn||M.unbind(Zt,Ut,Mn)}}return M.unbind(qe,Je,gt)},Xt=qe=>{if(qe&&Ei(qe)){const Je=qe.getAttribute("data-mce-contenteditable");return Je&&"inherit"!==Je?Je:"inherit"!==qe.contentEditable?qe.contentEditable:null}return null},Dt={doc:n,settings:i,win:d,files:u,stdMode:!0,boxModel:!0,styleSheetLoader:v,boundEvents:_,styles:T,schema:k,events:M,isBlock:qe=>Y(qe)?Ln(I,qe):nn(qe)&&(Ln(I,qe.nodeName)||dl(k,qe)),root:null,clone:(qe,Je)=>qe.cloneNode(Je),getRoot:V,getViewPort:qe=>{const Je=xo(qe);return{x:Je.x,y:Je.y,w:Je.width,h:Je.height}},getRect:qe=>{const Je=O(qe),gt=J(Je),ht=re(Je);return{x:gt.x,y:gt.y,w:ht.w,h:ht.h}},getSize:re,getParent:(qe,Je,gt)=>{const ht=he(qe,Je,gt,!1);return ht&&ht.length>0?ht[0]:null},getParents:he,get:O,getNext:(qe,Je)=>fe(qe,Je,"nextSibling"),getPrev:(qe,Je)=>fe(qe,Je,"previousSibling"),select:(qe,Je)=>{var gt,ht;const Zt=null!==(ht=null!==(gt=O(Je))&&void 0!==gt?gt:i.root_element)&&void 0!==ht?ht:n;return Ge(Zt.querySelectorAll)?Go(Zt.querySelectorAll(qe)):[]},is:ie,add:we,create:De,createHTML:(qe,Je,gt="")=>{let ht="<"+qe;for(const Zt in Je)Jd(Je,Zt)&&(ht+=" "+Zt+'="'+Be(Je[Zt])+'"');return Kr(gt)&&Ln(k.getVoidElements(),qe)?ht+" />":ht+">"+gt+"</"+qe+">"},createFragment:qe=>{const Je=n.createElement("div"),gt=n.createDocumentFragment();let ht;for(gt.appendChild(Je),qe&&(Je.innerHTML=qe);ht=Je.firstChild;)gt.appendChild(ht);return gt.removeChild(Je),gt},remove:et,setStyle:(qe,Je,gt)=>{ye(qe,ht=>{const Zt=Ze(ht);Pt(Zt,Je,gt),i.update_styles&&cc(T,Zt)})},getStyle:te,setStyles:(qe,Je)=>{ye(qe,gt=>{const ht=Ze(gt);ho(Je,(Zt,Ut)=>{Pt(ht,Ut,Zt)}),i.update_styles&&cc(T,ht)})},removeAllAttribs:qe=>ye(qe,Je=>{const gt=Je.attributes;for(let ht=gt.length-1;ht>=0;ht--)Je.removeAttributeNode(gt.item(ht))}),setAttrib:L,setAttribs:Ie,getAttrib:N,getPos:J,parseStyle:qe=>T.parse(qe),serializeStyle:(qe,Je)=>T.serialize(qe,Je),addStyle:qe=>{if(Dt!==Mr.DOM&&n===document){if(s[qe])return;s[qe]=!0}let Je=n.getElementById("mceDefaultStyles");if(!Je){Je=n.createElement("style"),Je.id="mceDefaultStyles",Je.type="text/css";const gt=n.head;gt.firstChild?gt.insertBefore(Je,gt.firstChild):gt.appendChild(Je)}Je.styleSheet?Je.styleSheet.cssText+=qe:Je.appendChild(n.createTextNode(qe))},loadCSS:qe=>{qe||(qe=""),Qe(qe.split(","),Je=>{u[Je]=!0,v.load(Je).catch(ve)})},addClass:(qe,Je)=>{Ye(qe,Je,!0)},removeClass:(qe,Je)=>{Ye(qe,Je,!1)},hasClass:(qe,Je)=>{const gt=R(qe),ht=Je.split(" ");return ae(gt)&&$t(ht,Zt=>zh(gt,Zt))},toggleClass:Ye,show:qe=>{ye(qe,Je=>Pl(Ze(Je),"display"))},hide:qe=>{ye(qe,Je=>B1(Ze(Je),"display","none"))},isHidden:qe=>{const Je=R(qe);return ae(Je)&&kr(Ov(Je,"display"),"none")},uniqueId:qe=>(qe||"mce_")+f++,setHTML:He,getOuterHTML:qe=>{const Je=R(qe);return ae(Je)?nn(Je.dom)?Je.dom.outerHTML:(gt=>{const ht=yr("div"),Zt=Ze(gt.dom.cloneNode(!0));return ge(ht,Zt),jt(ht)})(Je):""},setOuterHTML:(qe,Je)=>{ye(qe,gt=>{nn(gt)&&(gt.outerHTML=Je)})},decode:bm.decode,encode:Be,insertAfter:(qe,Je)=>{const gt=O(Je);return ye(qe,ht=>{const Zt=gt?.parentNode,Ut=gt?.nextSibling;return Zt&&(Ut?Zt.insertBefore(ht,Ut):Zt.appendChild(ht)),ht})},replace:it,rename:(qe,Je)=>{if(qe.nodeName!==Je.toUpperCase()){const gt=De(Je);return Qg(z(qe),ht=>{L(gt,ht.nodeName,N(qe,ht.nodeName))}),it(gt,qe,!0),gt}return qe},findCommonAncestor:(qe,Je)=>{let gt=qe;for(;gt;){let ht=Je;for(;ht&&gt!==ht;)ht=ht.parentNode;if(gt===ht)break;gt=gt.parentNode}return!gt&&qe.ownerDocument?qe.ownerDocument.documentElement:gt},run:ye,getAttribs:z,isEmpty:(qe,Je,gt)=>U(Je)?Tr(k,qe,{...gt,isContent:Zt=>{const Ut=Zt.nodeName.toLowerCase();return Boolean(Je[Ut])}}):Tr(k,qe,gt),createRng:yt,nodeIndex:wa,split:(qe,Je,gt)=>{let ht,Zt,Ut=yt();if(qe&&Je&&qe.parentNode&&Je.parentNode){const Mn=qe.parentNode;return Ut.setStart(Mn,wa(qe)),Ut.setEnd(Je.parentNode,wa(Je)),ht=Ut.extractContents(),Ut=yt(),Ut.setStart(Je.parentNode,wa(Je)+1),Ut.setEnd(Mn,wa(qe)+1),Zt=Ut.extractContents(),Mn.insertBefore(mA(Dt,ht,k),qe),Mn.insertBefore(gt||Je,qe),Mn.insertBefore(mA(Dt,Zt,k),qe),et(qe),gt||Je}},bind:It,unbind:qt,fire:(qe,Je,gt)=>M.dispatch(qe,Je,gt),dispatch:(qe,Je,gt)=>M.dispatch(qe,Je,gt),getContentEditable:Xt,getContentEditableParent:qe=>{const Je=V();let gt=null;for(let ht=qe;ht&&ht!==Je&&(gt=Xt(ht),null===gt);ht=ht.parentNode);return gt},isEditable:qe=>{if(ae(qe)){const Je=nn(qe)?qe:qe.parentElement;return ae(Je)&&Ei(Je)&&Ll(Ze(Je))}return!1},destroy:()=>{if(_.length>0){let qe=_.length;for(;qe--;){const[Je,gt,ht]=_[qe];M.unbind(Je,gt,ht)}}ho(u,(qe,Je)=>{v.unload(Je),delete u[Je]})},isChildOf:(qe,Je)=>qe===Je||Je.contains(qe),dumpRng:qe=>"startContainer: "+qe.startContainer.nodeName+", startOffset: "+qe.startOffset+", endContainer: "+qe.endContainer.nodeName+", endOffset: "+qe.endOffset},en=((qe,Je,gt)=>{const ht=Je.keep_values,Ut={style:{set:(Mn,In)=>{const Jn=Ze(Mn);ht&&jv(Jn,Wl,In),Gr(Jn,"style"),Y(In)&&so(Jn,qe.parse(In))},get:Mn=>{const In=Ze(Mn),Jn=is(In,Wl)||is(In,"style");return qe.serialize(qe.parse(Jn),mo(In))}}};return ht&&(Ut.href=Ut.src={set:(Mn,In,Jn)=>{const wr=Ze(Mn);Ge(Je.url_converter)&&ae(In)&&(In=Je.url_converter.call(Je.url_converter_scope||gt(),String(In),Jn,Mn)),jv(wr,"data-mce-"+Jn,In),jv(wr,Jn,In)},get:(Mn,In)=>{const Jn=Ze(Mn);return is(Jn,"data-mce-"+In)||is(Jn,In)}}),Ut})(T,i,ee(Dt));return Dt};Mr.DOM=Mr(document),Mr.nodeIndex=wa;const Mi=Mr.DOM;class Td{constructor(i={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=i}_setReferrerPolicy(i){this.settings.referrerPolicy=i}loadScript(i){return new Promise((s,d)=>{const u=Mi;let f;const v=()=>{u.remove(_),f&&(f.onerror=f.onload=f=null)},_=u.uniqueId();f=document.createElement("script"),f.id=_,f.type="text/javascript",f.src=zt._addCacheSuffix(i),this.settings.referrerPolicy&&u.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy),f.onload=()=>{v(),s()},f.onerror=()=>{v(),d("Failed to load script: "+i)},(document.getElementsByTagName("head")[0]||document.body).appendChild(f)})}isDone(i){return 2===this.states[i]}markDone(i){this.states[i]=2}add(i){const s=this;return s.queue.push(i),void 0===s.states[i]&&(s.states[i]=0),new Promise((d,u)=>{s.scriptLoadedCallbacks[i]||(s.scriptLoadedCallbacks[i]=[]),s.scriptLoadedCallbacks[i].push({resolve:d,reject:u})})}load(i){return this.add(i)}remove(i){delete this.states[i],delete this.scriptLoadedCallbacks[i]}loadQueue(){const i=this.queue;return this.queue=[],this.loadScripts(i)}loadScripts(i){const s=this,d=(k,T)=>{go(s.scriptLoadedCallbacks,T).each(M=>{Qe(M,I=>I[k](T))}),delete s.scriptLoadedCallbacks[T]},u=k=>{const T=dn(k,M=>"rejected"===M.status);return T.length>0?Promise.reject(Tt(T,({reason:M})=>K(M)?M:[M])):Promise.resolve()},f=k=>Promise.allSettled(hn(k,T=>2===s.states[T]?(d("resolve",T),Promise.resolve()):3===s.states[T]?(d("reject",T),Promise.reject(T)):(s.states[T]=1,s.loadScript(T).then(()=>{s.states[T]=2,d("resolve",T);const M=s.queue;return M.length>0?(s.queue=[],f(M).then(u)):Promise.resolve()},()=>(s.states[T]=3,d("reject",T),Promise.reject(T)))))),v=k=>(s.loading=!0,f(k).then(T=>{s.loading=!1;const M=s.queueLoadedCallbacks.shift();return ue.from(M).each(nt),u(T)})),_=ji(i);return s.loading?new Promise((k,T)=>{s.queueLoadedCallbacks.push(()=>{v(_).then(k,T)})}):v(_)}}Td.ScriptLoader=new Td;const nb={},Xu=ur("en"),Zu=()=>go(nb,Xu.get()),ja={getData:()=>vn(nb,n=>({...n})),setCode:n=>{n&&Xu.set(n)},getCode:()=>Xu.get(),add:(n,i)=>{let s=nb[n];s||(nb[n]=s={});const d=hn(Ur(i),u=>u.toLowerCase());ho(i,(u,f)=>{const v=f.toLowerCase();v!==f&&((_,k)=>{const T=_.indexOf(k);return-1!==T&&_.indexOf(k,T+1)>T})(d,v)?(Ln(i,v)||(s[v]=u),s[f]=u):s[v]=u})},translate:n=>{const i=Zu().getOr({}),s=_=>Ge(_)?Object.prototype.toString.call(_):d(_)?"":""+_,d=_=>""===_||null==_,u=_=>{const k=s(_);return Ln(i,k)?s(i[k]):go(i,k.toLowerCase()).map(s).getOr(k)},f=_=>_.replace(/{context:\w+}$/,"");if(d(n))return"";if(W(v=n)&&Ln(v,"raw"))return s(n.raw);var v,_;if(K(_=n)&&_.length>1){const _=n.slice(1);return f(u(n[0]).replace(/\{([0-9]+)\}/g,(k,T)=>Ln(_,T)?s(_[T]):k))}return f(u(n))},isRtl:()=>Zu().bind(n=>go(n,"_dir")).exists(n=>"rtl"===n),hasCode:n=>Ln(nb,n)},_s=()=>{const n=[],i={},s={},d=[],u=(k,T)=>{const M=dn(d,I=>I.name===k&&I.state===T);Qe(M,I=>I.resolve())},f=k=>Ln(i,k),v=(k,T)=>{const M=ja.getCode();!M||T&&-1===(","+(T||"")+",").indexOf(","+M+",")||Td.ScriptLoader.add(i[k]+"/langs/"+M+".js")},_=(k,T="added")=>"added"===T&&Ln(s,k)||"loaded"===T&&f(k)?Promise.resolve():new Promise(M=>{d.push({name:k,state:T,resolve:M})});return{items:n,urls:i,lookup:s,get:k=>{if(s[k])return s[k].instance},requireLangPack:(k,T)=>{!1!==_s.languageLoad&&(f(k)?v(k,T):_(k,"loaded").then(()=>v(k,T)))},add:(k,T)=>(n.push(T),s[k]={instance:T},u(k,"added"),T),remove:k=>{delete i[k],delete s[k]},createUrl:(k,T)=>Y(T)?Y(k)?{prefix:"",resource:T,suffix:""}:{prefix:k.prefix,resource:T,suffix:k.suffix}:T,load:(k,T)=>{if(i[k])return Promise.resolve();let M=Y(T)?T:T.prefix+T.resource+T.suffix;0!==M.indexOf("/")&&-1===M.indexOf("://")&&(M=_s.baseURL+"/"+M),i[k]=M.substring(0,M.lastIndexOf("/"));const I=()=>(u(k,"loaded"),Promise.resolve());return s[k]?I():Td.ScriptLoader.add(M).then(I)},waitFor:_}};_s.languageLoad=!0,_s.baseURL="",_s.PluginManager=_s(),_s.ThemeManager=_s(),_s.ModelManager=_s();const ws=(n,i)=>{let s=null;return{cancel:()=>{le(s)||(clearTimeout(s),s=null)},throttle:(...d)=>{le(s)&&(s=setTimeout(()=>{s=null,n.apply(null,d)},i))}}},dc=(n,i)=>{let s=null;const d=()=>{le(s)||(clearTimeout(s),s=null)};return{cancel:d,throttle:(...u)=>{d(),s=setTimeout(()=>{s=null,n.apply(null,u)},i)}}},ui=ee("mce-annotation"),Sm=ee("data-mce-annotation"),Vr=ee("data-mce-annotation-uid"),qa=ee("data-mce-annotation-active"),su=ee("data-mce-annotation-classes"),zs=ee("data-mce-annotation-attrs"),vA=n=>i=>To(i,n),Mo=(n,i)=>{const s=n.selection.getRng(),d=Ze(s.startContainer),u=Ze(n.getBody()),f=i.fold(()=>"."+ui(),_=>`[${Sm()}="${_}"]`),v=rc(d,s.startOffset).getOr(d);return ic(v,f,vA(u)).bind(_=>Pc(_,`${Vr()}`).bind(k=>Pc(_,`${Sm()}`).map(T=>{const M=ep(n,k);return{uid:k,name:T,elements:M}})))},dC=(n,i)=>{return Wu(n,"data-mce-bogus")||(s=n,u=vA(i),$i(s,'[data-mce-bogus="all"]',u).isSome());var s,u},ep=(n,i)=>{const s=Ze(n.getBody()),d=jo(s,`[${Vr()}="${i}"]`);return dn(d,u=>!dC(u,s))},yA=(n,i)=>{const s=Ze(n.getBody()),d=jo(s,`[${Sm()}="${i}"]`),u={};return Qe(d,f=>{if(!dC(f,s)){const v=is(f,Vr()),_=go(u,v).getOr([]);u[v]=_.concat([f])}}),u},bA=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let FD=0;const ob=n=>{const i=(new Date).getTime(),s=Math.floor(1e9*bA());return FD++,n+"_"+s+FD+String(i)},U1=(n,i)=>Ze(n.dom.cloneNode(i)),lu=n=>U1(n,!1),qv=n=>U1(n,!0),$v=(n,i,s=Bt)=>{const d=new io(n,i),u=f=>{let v;do{v=d[f]()}while(v&&!Mt(v)&&!s(v));return ue.from(v).filter(Mt)};return{current:()=>ue.from(d.current()).filter(Mt),next:()=>u("next"),prev:()=>u("prev"),prev2:()=>u("prev2")}},Ku=(n,i)=>{const s=i||(u=>n.isBlock(u)||Bn(u)||fo(u)),d=(u,f,v,_)=>{if(Mt(u)){const k=_(u,f,u.data);if(-1!==k)return ue.some({container:u,offset:k})}return v().bind(k=>d(k.container,k.offset,v,_))};return{backwards:(u,f,v,_)=>{const k=$v(u,_??n.getRoot(),s);return d(u,f,()=>k.prev().map(T=>({container:T,offset:T.length})),v).getOrNull()},forwards:(u,f,v,_)=>{const k=$v(u,_??n.getRoot(),s);return d(u,f,()=>k.next().map(T=>({container:T,offset:0})),v).getOrNull()}}},G1=((n,i)=>{const s=d=>n(d)?ue.from(d.dom.nodeValue):ue.none();return{get:d=>{if(!n(d))throw new Error("Can only get text value of a text node");return s(d).getOr("")},getOption:s,set:(d,u)=>{if(!n(d))throw new Error("Can only set raw text value of a text node");d.dom.nodeValue=u}}})(fa),Yv=n=>G1.get(n),uC=(n,i)=>G1.set(n,i),rb=n=>{let i;return s=>(i=i||Sn(n,Wt),Ln(i,mo(s)))},tp=n=>ci(n)&&"br"===mo(n),j1=rb(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Yo=rb(["ul","ol","dl"]),np=rb(["li","dd","dt"]),Md=rb(["thead","tbody","tfoot"]),Ad=rb(["td","th"]),uc=rb(["pre","script","textarea","style"]),op=()=>{const n=yr("br");return ta(n,"data-mce-bogus","1"),n},rp=n=>{Le(n),ge(n,op())},Sa="\ufeff",pl=as,Zi=n=>n.replace(/\uFEFF/g,""),Cm=nn,cu=Mt,km=n=>(cu(n)&&(n=n.parentNode),Cm(n)&&n.hasAttribute("data-mce-caret")),$a=n=>cu(n)&&pl(n.data),oa=n=>km(n)||$a(n),sr=n=>n.firstChild!==n.lastChild||!Bn(n.firstChild),Xv=n=>{const i=n.container();return!!Mt(i)&&(i.data.charAt(n.offset())===Sa||n.isAtStart()&&$a(i.previousSibling))},Ya=n=>{const i=n.container();return!!Mt(i)&&(i.data.charAt(n.offset()-1)===Sa||n.isAtEnd()&&$a(i.nextSibling))},ml=n=>cu(n)&&n.data[0]===Sa,ib=n=>cu(n)&&n.data[n.data.length-1]===Sa,Uc=n=>n&&n.hasAttribute("data-mce-caret")?((i=>{var s;const d=i.getElementsByTagName("br"),u=d[d.length-1];Yi(u)&&(null===(s=u.parentNode)||void 0===s||s.removeChild(u))})(n),n.removeAttribute("data-mce-caret"),n.removeAttribute("data-mce-bogus"),n.removeAttribute("style"),n.removeAttribute("data-mce-style"),n.removeAttribute("_moz_abspos"),n):null,q1=n=>km(n.startContainer),Tm=Math.round,Ju=n=>n?{left:Tm(n.left),top:Tm(n.top),bottom:Tm(n.bottom),right:Tm(n.right),width:Tm(n.width),height:Tm(n.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Gc=(n,i)=>(n=Ju(n),i||(n.left=n.left+n.width),n.right=n.left,n.width=0,n),Mm=(n,i,s)=>n>=0&&n<=Math.min(i.height,s.height)/2,Kn=(n,i)=>{const s=Math.min(i.height/2,n.height/2);return n.bottom-s<i.top||!(n.top>i.bottom)&&Mm(i.top-n.bottom,n,i)},Ss=(n,i)=>n.top>i.bottom||!(n.bottom<i.top)&&Mm(i.bottom-n.top,n,i),Qu=(n,i,s)=>{const d=Math.max(Math.min(i,n.left+n.width),n.left),u=Math.max(Math.min(s,n.top+n.height),n.top);return Math.sqrt((i-d)*(i-d)+(s-u)*(s-u))},ip=n=>{const i=n.startContainer,s=n.startOffset;return i===n.endContainer&&i.hasChildNodes()&&n.endOffset===s+1?i.childNodes[s]:null},Ko=(n,i)=>{if(nn(n)&&n.hasChildNodes()){const s=n.childNodes;return s[(v=s.length-1,Math.min(Math.max(i,0),v))]}var v;return n},ab=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),hC=n=>Y(n)&&n.charCodeAt(0)>=768&&ab.test(n),xA=ll,jr=fo,VD=Bn,HD=Mt,Am=Rs(["script","style","textarea"]),ra=Rs(["img","input","textarea","hr","iframe","video","audio","object","embed"]),eh=Rs(["table"]),cn=oa,jc=n=>!cn(n)&&(HD(n)?!Am(n.parentNode):ra(n)||VD(n)||eh(n)||gC(n)),gC=n=>{return!(nn(i=n)&&"true"===i.getAttribute("unselectable"))&&jr(n);var i},_A=(n,i)=>jc(n)&&((s,d)=>{for(let u=s.parentNode;u&&u!==d;u=u.parentNode){if(gC(u))return!1;if(xA(u))return!0}return!0})(n,i),qc=nn,pC=jc,ap=zi("display","block table"),Zv=zi("float","left right"),sb=((...n)=>i=>{for(let s=0;s<n.length;s++)if(!n[s](i))return!1;return!0})(qc,pC,_t(Zv)),$1=_t(zi("white-space","pre pre-line pre-wrap")),Kv=Mt,Jv=Bn,Y1=Mr.nodeIndex,sp=(n,i)=>i<0&&nn(n)&&n.hasChildNodes()?void 0:Ko(n,i),Gh=n=>n?n.createRange():Mr.DOM.createRng(),mC=n=>Y(n)&&/[\r\n\t ]/.test(n),fC=n=>!!n.setStart&&!!n.setEnd,wA=n=>{const i=n.startContainer,s=n.startOffset;if(mC(n.toString())&&$1(i.parentNode)&&Mt(i)){const d=i.data;if(mC(d[s-1])||mC(d[s+1]))return!0}return!1},WD=n=>0===n.left&&0===n.right&&0===n.top&&0===n.bottom,lp=n=>{var i;let s;const d=n.getClientRects();return s=Ju(d.length>0?d[0]:n.getBoundingClientRect()),!fC(n)&&Jv(n)&&WD(s)?(u=>{const f=u.ownerDocument,v=Gh(f),_=f.createTextNode(Bi),k=u.parentNode;k.insertBefore(_,u),v.setStart(_,0),v.setEnd(_,1);const T=Ju(v.getBoundingClientRect());return k.removeChild(_),T})(n):WD(s)&&fC(n)&&null!==(i=(u=>{const v=u.endContainer,_=u.startOffset,k=u.endOffset;if(u.startContainer===v&&Mt(v)&&0===_&&1===k){const T=u.cloneRange();return T.setEndAfter(v),lp(T)}return null})(n))&&void 0!==i?i:s},qr=(n,i)=>{const s=Gc(n,i);return s.width=1,s.right=s.left+1,s},ut=(n,i,s)=>{const d=()=>(s||(s=(u=>{const f=[],v=M=>{var I,O;0!==M.height&&(f.length>0&&(I=M).left===(O=f[f.length-1]).left&&I.top===O.top&&I.bottom===O.bottom&&I.right===O.right||f.push(M))},_=(M,I)=>{const O=Gh(M.ownerDocument);if(I<M.data.length){if(hC(M.data[I]))return;if(hC(M.data[I-1])&&(O.setStart(M,I),O.setEnd(M,I+1),!wA(O)))return void v(qr(lp(O),!1))}I>0&&(O.setStart(M,I-1),O.setEnd(M,I),wA(O)||v(qr(lp(O),!1))),I<M.data.length&&(O.setStart(M,I),O.setEnd(M,I+1),wA(O)||v(qr(lp(O),!0)))},k=u.container(),T=u.offset();if(Kv(k))return _(k,T),f;if(qc(k))if(u.isAtEnd()){const M=sp(k,T);Kv(M)&&_(M,M.data.length),sb(M)&&!Jv(M)&&v(qr(lp(M),!1))}else{const M=sp(k,T);if(Kv(M)&&_(M,0),sb(M)&&u.isAtEnd())return v(qr(lp(M),!1)),f;const I=sp(u.container(),u.offset()-1);sb(I)&&!Jv(I)&&(ap(I)||ap(M)||!sb(M))&&v(qr(lp(I),!1)),sb(M)&&v(qr(lp(M),!0))}return f})(ut(n,i))),s);return{container:ee(n),offset:ee(i),toRange:()=>{const u=Gh(n.ownerDocument);return u.setStart(n,i),u.setEnd(n,i),u},getClientRects:d,isVisible:()=>d().length>0,isAtStart:()=>(Kv(n),0===i),isAtEnd:()=>Kv(n)?i>=n.data.length:i>=n.childNodes.length,isEqual:u=>u&&n===u.container()&&i===u.offset(),getNode:u=>sp(n,u?i-1:i)}};ut.fromRangeStart=n=>ut(n.startContainer,n.startOffset),ut.fromRangeEnd=n=>ut(n.endContainer,n.endOffset),ut.after=n=>ut(n.parentNode,Y1(n)+1),ut.before=n=>ut(n.parentNode,Y1(n)),ut.isAbove=(n,i)=>ea(Rn(i.getClientRects()),wi(n.getClientRects()),Kn).getOr(!1),ut.isBelow=(n,i)=>ea(wi(i.getClientRects()),Rn(n.getClientRects()),Ss).getOr(!1),ut.isAtStart=n=>!!n&&n.isAtStart(),ut.isAtEnd=n=>!!n&&n.isAtEnd(),ut.isTextPosition=n=>!!n&&Mt(n.container()),ut.isElementPosition=n=>!ut.isTextPosition(n);const Qv=(n,i)=>{Mt(i)&&0===i.data.length&&n.remove(i)},vC=(n,i,s)=>{var d,f;sl(s)?((d,u,f)=>{const v=ue.from(f.firstChild),_=ue.from(f.lastChild);u.insertNode(f),v.each(k=>Qv(d,k.previousSibling)),_.each(k=>Qv(d,k.nextSibling))})(n,i,s):(d=n,i.insertNode(f=s),Qv(d,f.previousSibling),Qv(d,f.nextSibling))},ei=Mt,jh=Yi,Fi=Mr.nodeIndex,yC=n=>{const i=n.parentNode;return jh(i)?yC(i):i},X1=n=>n?el(n.childNodes,(i,s)=>(jh(s)&&"BR"!==s.nodeName?i=i.concat(X1(s)):i.push(s),i),[]):[],lb=n=>i=>n===i,cb=n=>(ei(n)?"text()":n.nodeName.toLowerCase())+"["+(i=>{let s,d;s=X1(yC(i)),d=Fu(s,lb(i),i),s=s.slice(0,d+1);const u=el(s,(f,v,_)=>(ei(v)&&ei(s[_-1])&&f++,f),0);return s=Al(s,Rs([i.nodeName])),d=Fu(s,lb(i),i),d-u})(n)+"]",Z1=(n,i)=>{let s,d=[],u=i.container(),f=i.offset();if(ei(u))s=((_,k)=>{let T=_;for(;(T=T.previousSibling)&&ei(T);)k+=T.data.length;return k})(u,f);else{const _=u.childNodes;f>=_.length?(s="after",f=_.length-1):s="before",u=_[f]}d.push(cb(u));let v=((_,k,T)=>{const M=[];for(let I=k.parentNode;I&&I!==_;I=I.parentNode)M.push(I);return M})(n,u);return v=Al(v,_t(Yi)),d=d.concat(vd(v,_=>cb(_))),d.reverse().join("/")+","+s},bC=(n,i)=>{if(!i)return null;const s=i.split(","),d=s[0].split("/"),u=s.length>1?s[1]:"before",f=el(d,(v,_)=>{const k=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(_);return k?("text()"===k[1]&&(k[1]="#text"),((T,M,I)=>{let O=X1(T);return O=Al(O,(R,N)=>!ei(R)||!ei(O[N-1])),O=Al(O,Rs([M])),O[I]})(v,k[1],parseInt(k[2],10))):null},n);if(!f)return null;if(!ei(f)&&f.parentNode){let v;return v="after"===u?Fi(f)+1:Fi(f),ut(f.parentNode,v)}return((v,_)=>{let k=v,T=0;for(;ei(k);){const M=k.data.length;if(_>=T&&_<=T+M){v=k,_-=T;break}if(!ei(k.nextSibling)){v=k,_=M;break}T+=M,k=k.nextSibling}return ei(v)&&_>v.data.length&&(_=v.data.length),ut(v,_)})(f,parseInt(u,10))},Hr=fo,Eo=(n,i,s,d,u)=>{const f=u?d.startContainer:d.endContainer;let v=u?d.startOffset:d.endOffset;const _=[],k=n.getRoot();if(Mt(f))_.push(s?((T,M,I)=>{let O=T(M.data.slice(0,I)).length;for(let R=M.previousSibling;R&&Mt(R);R=R.previousSibling)O+=T(R.data).length;return O})(i,f,v):v);else{let T=0;const M=f.childNodes;v>=M.length&&M.length&&(T=1,v=Math.max(0,M.length-1)),_.push(n.nodeIndex(M[v],s)+T)}for(let T=f;T&&T!==k;T=T.parentNode)_.push(n.nodeIndex(T,s));return _},Fs=(n,i,s)=>{let d=0;return zt.each(n.select(i),u=>"all"===u.getAttribute("data-mce-bogus")?void 0:u!==s&&void d++),d},qh=(n,i)=>{let s=i?n.startContainer:n.endContainer,d=i?n.startOffset:n.endOffset;if(nn(s)&&"TR"===s.nodeName){const u=s.childNodes;s=u[Math.min(i?d:d-1,u.length-1)],s&&(d=i?0:s.childNodes.length,i?n.setStart(s,d):n.setEnd(s,d))}},vi=n=>(qh(n,!0),qh(n,!1),n),fl=(n,i)=>{if(nn(n)&&(n=Ko(n,i),Hr(n)))return n;if(oa(n)){Mt(n)&&km(n)&&(n=n.parentNode);let s=n.previousSibling;if(Hr(s)||(s=n.nextSibling,Hr(s)))return s}},db=(n,i,s)=>{const d=s.getNode(),u=s.getRng();if("IMG"===d.nodeName||Hr(d)){const v=d.nodeName;return{name:v,index:Fs(s.dom,v,d)}}const f=fl((v=u).startContainer,v.startOffset)||fl(v.endContainer,v.endOffset);var v;if(f){const v=f.tagName;return{name:v,index:Fs(s.dom,v,f)}}return((v,_,k,T)=>{const M=_.dom,I=Eo(M,v,k,T,!0),O=_.isForward(),R=q1(T)?{isFakeCaret:!0}:{};return _.isCollapsed()?{start:I,forward:O,...R}:{start:I,end:Eo(M,v,k,T,!1),forward:O,...R}})(n,s,i,u)},xC=(n,i,s)=>{const d={"data-mce-type":"bookmark",id:i,style:"overflow:hidden;line-height:0px"};return s?n.create("span",d,"&#xFEFF;"):n.create("span",d)},Im=(n,i)=>{const s=n.dom;let d=n.getRng();const u=s.uniqueId(),f=n.isCollapsed(),v=n.getNode(),_=v.nodeName,k=n.isForward();if("IMG"===_)return{name:_,index:Fs(s,_,v)};const T=vi(d.cloneRange());if(!f){T.collapse(!1);const I=xC(s,u+"_end",i);vC(s,T,I)}d=vi(d),d.collapse(!0);const M=xC(s,u+"_start",i);return vC(s,d,M),n.moveToBookmark({id:u,keep:!0,forward:k}),{id:u,forward:k}},Dm=We(db,Se,!0),_C=n=>{const i=f=>f(n),s=ee(n),d=()=>u,u={tag:!0,inner:n,fold:(f,v)=>v(n),isValue:Wt,isError:Bt,map:f=>ti.value(f(n)),mapError:d,bind:i,exists:i,forall:i,getOr:s,or:d,getOrThunk:s,orThunk:d,getOrDie:s,each:f=>{f(n)},toOptional:()=>ue.some(n)};return u},K1=n=>{const i=()=>s,s={tag:!1,inner:n,fold:(d,u)=>d(n),isValue:Bt,isError:Wt,map:i,mapError:d=>ti.error(d(n)),bind:i,exists:Bt,forall:Wt,getOr:Se,or:Se,getOrThunk:wt,orThunk:wt,getOrDie:rt(String(n)),each:ve,toOptional:ue.none};return s},ti={value:_C,error:K1,fromOption:(n,i)=>n.fold(()=>K1(i),_C)},$h=n=>{if(!K(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");const i=[],s={};return Qe(n,(d,u)=>{const f=Ur(d);if(1!==f.length)throw new Error("one and only one name per case");const v=f[0],_=d[v];if(void 0!==s[v])throw new Error("duplicate key detected:"+v);if("cata"===v)throw new Error("cannot have a case named cata (sorry)");if(!K(_))throw new Error("case arguments must be an array");i.push(v),s[v]=(...k)=>{const T=k.length;if(T!==_.length)throw new Error("Wrong number of arguments to case "+v+". Expected "+_.length+" ("+_+"), got "+T);return{fold:(...M)=>{if(M.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+M.length);return M[u].apply(null,k)},match:M=>{const I=Ur(M);if(i.length!==I.length)throw new Error("Wrong number of arguments to match. Expected: "+i.join(",")+"\nActual: "+I.join(","));if(!$t(i,O=>Jt(I,O)))throw new Error("Not all branches were specified when using match. Specified: "+I.join(", ")+"\nRequired: "+i.join(", "));return M[v].apply(null,k)},log:M=>{console.log(M,{constructors:i,constructor:v,params:k})}}}}),s};$h([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const SA=n=>"inline-command"===n.type||"inline-format"===n.type,$r=n=>"block-command"===n.type||"block-format"===n.type,Yh=n=>{var i;const s=u=>ti.error({message:u,pattern:n}),d=(u,f,v)=>{if(void 0!==n.format){let _;if(K(n.format)){if(!$t(n.format,Y))return s(u+" pattern has non-string items in the `format` array");_=n.format}else{if(!Y(n.format))return s(u+" pattern has non-string `format` parameter");_=[n.format]}return ti.value(f(_))}return void 0!==n.cmd?Y(n.cmd)?ti.value(v(n.cmd,n.value)):s(u+" pattern has non-string `cmd` parameter"):s(u+" pattern is missing both `format` and `cmd` parameters")};if(!W(n))return s("Raw pattern is not an object");if(!Y(n.start))return s("Raw pattern is missing `start` parameter");if(void 0!==n.end){if(!Y(n.end))return s("Inline pattern has non-string `end` parameter");if(0===n.start.length&&0===n.end.length)return s("Inline pattern has empty `start` and `end` parameters");let u=n.start,f=n.end;return 0===f.length&&(f=u,u=""),d("Inline",v=>({type:"inline-format",start:u,end:f,format:v}),(v,_)=>({type:"inline-command",start:u,end:f,cmd:v,value:_}))}if(void 0!==n.replacement)return Y(n.replacement)?0===n.start.length?s("Replacement pattern has empty `start` parameter"):ti.value({type:"inline-command",start:"",end:n.start,cmd:"mceInsertContent",value:n.replacement}):s("Replacement pattern has non-string `replacement` parameter");{const u=null!==(i=n.trigger)&&void 0!==i?i:"space";return 0===n.start.length?s("Block pattern has empty `start` parameter"):d("Block",f=>({type:"block-format",start:n.start,format:f[0],trigger:u}),(f,v)=>({type:"block-command",start:n.start,cmd:f,value:v,trigger:u}))}},cp=n=>dn(n,$r),wC=n=>dn(n,SA),Fo=(n,i)=>({...n,blockPatterns:dn(n.blockPatterns,s=>{return("block-command"===(d=s).type||"block-format"===d.type)&&d.trigger===i;var d})}),Oa=n=>{const i=(s=>{const d=[],u=[];return Qe(s,f=>{f.fold(v=>{d.push(v)},v=>{u.push(v)})}),{errors:d,values:u}})(hn(n,Yh));return Qe(i.errors,s=>console.error(s.message,s.pattern)),i.values},du=Dl().deviceType,SC=du.isTouch(),e0=Mr.DOM,J1=n=>X(n,RegExp),Ht=n=>i=>i.options.get(n),rn=n=>Y(n)||W(n),Ea=(n,i="")=>s=>{const d=Y(s);if(d){if(-1!==s.indexOf("=")){const u=(f=>{const v=f.indexOf("=")>0?f.split(/[;,](?![^=;,]*(?:[;,]|$))/):f.split(",");return Oo(v,(_,k)=>{const T=k.split("="),M=T[0],I=T.length>1?T[1]:M;return _[Xn(M)]=Xn(I),_},{})})(s);return{value:go(u,n.id).getOr(i),valid:d}}return{value:s,valid:d}}return{valid:!1,message:"Must be a string."}},Om=Ht("iframe_attrs"),CA=Ht("doctype"),ia=Ht("document_base_url"),Xh=Ht("body_id"),kA=Ht("body_class"),Q1=Ht("content_security_policy"),CC=Ht("br_in_pre"),aa=Ht("forced_root_block"),t0=Ht("forced_root_block_attrs"),ub=Ht("newline_behavior"),Ki=Ht("br_newline_selector"),Vi=Ht("no_newline_selector"),Na=Ht("keep_styles"),Ra=Ht("end_container_on_empty_block"),sa=Ht("automatic_uploads"),Ji=Ht("images_reuse_filename"),Zh=Ht("images_replace_blob_uris"),e_=Ht("icons"),Em=Ht("icons_url"),UD=Ht("images_upload_url"),GD=Ht("images_upload_base_path"),Hi=Ht("images_upload_credentials"),t_=Ht("images_upload_handler"),kC=Ht("content_css_cors"),n_=Ht("referrer_policy"),TA=Ht("language"),Vs=Ht("language_url"),n0=Ht("indent_use_margin"),hc=Ht("indentation"),o0=Ht("content_css"),hb=Ht("content_style"),gc=Ht("font_css"),vl=Ht("directionality"),gb=Ht("inline_boundaries_selector"),o_=Ht("object_resizing"),Nm=Ht("resize_img_proportional"),TC=Ht("placeholder"),Kh=Ht("event_root"),Xa=Ht("service_message"),Jh=Ht("theme"),Rm=Ht("theme_url"),Lm=Ht("model"),MC=Ht("model_url"),Pm=Ht("inline_boundaries"),r0=Ht("formats"),jD=Ht("preview_styles"),qD=Ht("format_empty_lines"),wo=Ht("format_noneditable_selector"),AC=Ht("custom_ui_selector"),r_=Ht("inline"),$D=Ht("hidden_input"),pb=Ht("submit_patch"),MA=Ht("add_form_submit_trigger"),Bm=Ht("add_unload_trigger"),mb=Ht("custom_undo_redo_levels"),Qh=Ht("disable_nodechange"),i0=Ht("readonly"),YD=Ht("editable_root"),i_=Ht("content_css_cors"),Gl=Ht("plugins"),fb=Ht("external_plugins"),$c=Ht("block_unsupported_drop"),Hs=Ht("visual"),vb=Ht("visual_table_class"),th=Ht("visual_anchor_class"),a_=Ht("iframe_aria_text"),XD=Ht("setup"),dp=Ht("init_instance_callback"),yb=Ht("urlconverter_callback"),AA=Ht("auto_focus"),ZD=Ht("browser_spellcheck"),IC=Ht("protect"),IA=Ht("paste_block_drop"),bb=Ht("paste_data_images"),DA=Ht("paste_preprocess"),KD=Ht("paste_postprocess"),JD=Ht("newdocument_content"),OA=Ht("paste_webkit_styles"),yl=Ht("paste_remove_styles_if_webkit"),xb=Ht("paste_merge_formats"),zm=Ht("smart_paste"),DC=Ht("paste_as_text"),s_=Ht("paste_tab_spaces"),EA=Ht("allow_html_data_urls"),NA=Ht("text_patterns"),OC=Ht("text_patterns_lookup"),jl=Ht("noneditable_class"),_b=Ht("editable_class"),RA=Ht("noneditable_regexp"),EC=Ht("preserve_cdata"),ls=Ht("highlight_on_focus"),a0=Ht("xss_sanitization"),La=Ht("init_content_sync"),Yc=n=>zt.explode(n.options.get("images_file_types")),Qi=Ht("table_tab_navigation"),LA=Ht("details_initial_state"),YE=Ht("details_serialized_state"),NC=Ht("sandbox_iframes"),PA=n=>n.options.get("sandbox_iframes_exclusions"),RC=Ht("convert_unsafe_embeds"),BA=Ht("license_key"),zA=Ht("api_key"),FA=nn,LC=Mt,l_=n=>{const i=n.parentNode;i&&i.removeChild(n)},PC=n=>{const i=Zi(n);return{count:n.length-i.length,text:i}},BC=n=>{let i;for(;-1!==(i=n.data.lastIndexOf(Sa));)n.deleteData(i,1)},c_=(n,i)=>(eg(n),i),eg=n=>{FA(n)&&oa(n)&&(sr(n)?n.removeAttribute("data-mce-caret"):l_(n)),LC(n)&&(BC(n),0===n.data.length&&l_(n))},VA=fo,HA=Sd,zC=Nv,up=(n,i,s)=>{const d=Gc(i.getBoundingClientRect(),s);let u,f;if("BODY"===n.tagName){const _=n.ownerDocument.documentElement;u=n.scrollLeft||_.scrollLeft,f=n.scrollTop||_.scrollTop}else{const _=n.getBoundingClientRect();u=n.scrollLeft-_.left,f=n.scrollTop-_.top}d.left+=u,d.right+=u,d.top+=f,d.bottom+=f,d.width=1;let v=i.offsetWidth-i.clientWidth;return v>0&&(s&&(v*=-1),d.left+=v,d.right+=v),d},eO=()=>Yt.browser.isFirefox(),s0=n=>VA(n)||HA(n),hp=n=>(s0(n)||Vc(n)&&eO())&&Wg(Ze(n)).exists(Ll),tO=ll,tg=fo,FC=Sd,gp=zi("display","block table table-cell table-row table-caption list-item"),Ca=oa,l0=km,c0=nn,wb=Mt,UA=jc,Fm=n=>n>0,Vm=n=>n<0,nh=(n,i)=>{let s;for(;s=n(i);)if(!l0(s))return s;return null},ng=(n,i,s,d,u)=>{const f=new io(n,d),v=tg(n)||l0(n);let _;if(Vm(i)){if(v&&(_=nh(f.prev.bind(f),!0),s(_)))return _;for(;_=nh(f.prev.bind(f),u);)if(s(_))return _}if(Fm(i)){if(v&&(_=nh(f.next.bind(f),!0),s(_)))return _;for(;_=nh(f.next.bind(f),u);)if(s(_))return _}return null},Yr=(n,i)=>{for(;n&&n!==i;){if(gp(n))return n;n=n.parentNode}return null},Cs=(n,i,s)=>Yr(n.container(),s)===Yr(i.container(),s),VC=(n,i)=>{if(!i)return ue.none();const s=i.container(),d=i.offset();return c0(s)?ue.from(s.childNodes[d+n]):ue.none()},HC=(n,i)=>{var s;const d=(null!==(s=i.ownerDocument)&&void 0!==s?s:document).createRange();return n?(d.setStartBefore(i),d.setEndBefore(i)):(d.setStartAfter(i),d.setEndAfter(i)),d},WC=(n,i,s)=>Yr(i,n)===Yr(s,n),UC=(n,i,s)=>{const d=n?"previousSibling":"nextSibling";let u=s;for(;u&&u!==i;){let f=u[d];if(f&&Ca(f)&&(f=f[d]),tg(f)||FC(f)){if(WC(i,f,u))return f;break}if(UA(f))break;u=u.parentNode}return null},d_=We(HC,!0),Hm=We(HC,!1),Id=(n,i,s)=>{let d;const u=We(UC,!0,i),f=We(UC,!1,i),v=s.startContainer,_=s.startOffset;if(km(v)){const k=wb(v)?v.parentNode:v,T=k.getAttribute("data-mce-caret");if("before"===T&&(d=k.nextSibling,hp(d)))return d_(d);if("after"===T&&(d=k.previousSibling,hp(d)))return Hm(d)}if(!s.collapsed)return s;if(Mt(v)){if(Ca(v)){if(1===n){if(d=f(v),d)return d_(d);if(d=u(v),d)return Hm(d)}if(-1===n){if(d=u(v),d)return Hm(d);if(d=f(v),d)return d_(d)}return s}if(ib(v)&&_>=v.data.length-1)return 1===n&&(d=f(v),d)?d_(d):s;if(ml(v)&&_<=1)return-1===n&&(d=u(v),d)?Hm(d):s;if(_===v.data.length)return d=f(v),d?d_(d):s;if(0===_)return d=u(v),d?Hm(d):s}return s},u_=(n,i)=>VC(n?0:-1,i).filter(tg),oh=(n,i,s)=>{const d=Id(n,i,s);return-1===n?ut.fromRangeStart(d):ut.fromRangeEnd(d)},Sb=n=>ue.from(n.getNode()).map(Ze),GC=(n,i)=>{let s=i;for(;s=n(s);)if(s.isVisible())return s;return s},Za=(n,i)=>{const s=Cs(n,i);return!(s||!Bn(n.getNode()))||s};var ka,n;(n=ka||(ka={}))[n.Backwards=-1]="Backwards",n[n.Forwards=1]="Forwards";const GA=fo,rh=Mt,Io=nn,og=Bn,ih=jc,d0=n=>{return ra(n)||!!gC(i=n)&&!Oo(Go(i.getElementsByTagName("*")),(s,d)=>s||xA(d),!1);var i},h_=_A,g_=(n,i)=>n.hasChildNodes()&&i<n.childNodes.length?n.childNodes[i]:null,p_=(n,i)=>{if(Fm(n)){if(ih(i.previousSibling)&&!rh(i.previousSibling))return ut.before(i);if(rh(i))return ut(i,0)}if(Vm(n)){if(ih(i.nextSibling)&&!rh(i.nextSibling))return ut.after(i);if(rh(i))return ut(i,i.data.length)}return Vm(n)?og(i)?ut.before(i):ut.after(i):ut.before(i)},pp=(n,i,s)=>{let d,u,f,v;if(!Io(s)||!i)return null;if(i.isEqual(ut.after(s))&&s.lastChild){if(v=ut.after(s.lastChild),Vm(n)&&ih(s.lastChild)&&Io(s.lastChild))return og(s.lastChild)?ut.before(s.lastChild):v}else v=i;const _=v.container();let k=v.offset();if(rh(_)){if(Vm(n)&&k>0)return ut(_,--k);if(Fm(n)&&k<_.length)return ut(_,++k);d=_}else{if(Vm(n)&&k>0&&(u=g_(_,k-1),ih(u)))return!d0(u)&&(f=ng(u,n,h_,u),f)?rh(f)?ut(f,f.data.length):ut.after(f):rh(u)?ut(u,u.data.length):ut.before(u);if(Fm(n)&&k<_.childNodes.length&&(u=g_(_,k),ih(u)))return og(u)?((M,I)=>{const O=I.nextSibling;return O&&ih(O)?rh(O)?ut(O,0):ut.before(O):pp(ka.Forwards,ut.after(I),M)})(s,u):!d0(u)&&(f=ng(u,n,h_,u),f)?rh(f)?ut(f,0):ut.before(f):rh(u)?ut(u,0):ut.after(u);d=u||v.getNode()}if(d&&(Fm(n)&&v.isAtEnd()||Vm(n)&&v.isAtStart())&&(d=ng(d,n,Wt,s,!0),h_(d,s)))return p_(n,d);u=d&&ng(d,n,h_,s);const T=os(dn(((M,I)=>{const O=[];let R=M;for(;R&&R!==I;)O.push(R),R=R.parentNode;return O})(_,s),GA));return!T||u&&T.contains(u)?u?p_(n,u):null:(v=Fm(n)?ut.after(T):ut.before(T),v)},Dd=n=>({next:i=>pp(ka.Forwards,i,n),prev:i=>pp(ka.Backwards,i,n)}),jA=n=>ut.isTextPosition(n)?0===n.offset():jc(n.getNode()),rg=n=>{if(ut.isTextPosition(n)){const i=n.container();return n.offset()===i.data.length}return jc(n.getNode(!0))},nO=(n,i)=>!ut.isTextPosition(n)&&!ut.isTextPosition(i)&&n.getNode()===i.getNode(!0),bl=(n,i,s)=>{const d=Dd(i);return ue.from(n?d.next(s):d.prev(s))},ig=(n,i,s)=>bl(n,i,s).bind(d=>{return Cs(s,d,i)&&(f=s,v=d,n?!nO(f,v)&&(ut.isTextPosition(_=f)||!Bn(_.getNode()))&&rg(f)&&jA(v):!nO(v,f)&&jA(f)&&rg(v))?bl(n,i,d):ue.some(d);var f,v,_}),Od=(n,i,s,d)=>ig(n,i,s).bind(u=>d(u)?Od(n,i,u,d):ue.some(u)),Wm=(n,i)=>{const s=n?i.firstChild:i.lastChild;return Mt(s)?ue.some(ut(s,n?0:s.data.length)):s?jc(s)?ue.some(n?ut.before(s):Bn(d=s)?ut.before(d):ut.after(d)):((u,f,v)=>{const _=u?ut.before(v):ut.after(v);return bl(u,f,_)})(n,i,s):ue.none();var d},xl=We(bl,!0),pc=We(bl,!1),Ws=We(Wm,!0),uu=We(Wm,!1),Qt="_mce_caret",Nr=n=>nn(n)&&n.id===Qt,mp=(n,i)=>{let s=i;for(;s&&s!==n;){if(Nr(s))return s;s=s.parentNode}return null},Pa=n=>Ln(n,"name"),Um=n=>zt.isArray(n.start),fp=n=>!(!Pa(n)&&de(n.forward))||n.forward,Cb=(n,i)=>(nn(i)&&n.isBlock(i)&&!i.innerHTML&&(i.innerHTML='<br data-mce-bogus="1" />'),i),u0=(n,i)=>uu(n).fold(Bt,s=>(i.setStart(s.container(),s.offset()),i.setEnd(s.container(),s.offset()),!0)),Gm=(n,i,s)=>!(i.hasChildNodes()||!mp(n,i)||(((d,u)=>{var f;const v=(null!==(f=d.ownerDocument)&&void 0!==f?f:document).createTextNode(Sa);d.appendChild(v),u.setStart(v,0),u.setEnd(v,0)})(i,s),0)),jC=(n,i,s,d)=>{const u=s[i?"start":"end"],f=n.getRoot();if(u){let v=f,_=u[0];for(let k=u.length-1;v&&k>=1;k--){const T=v.childNodes;if(Gm(f,v,d))return!0;if(u[k]>T.length-1)return!!Gm(f,v,d)||u0(v,d);v=T[u[k]]}Mt(v)&&(_=Math.min(u[0],v.data.length)),nn(v)&&(_=Math.min(u[0],v.childNodes.length)),i?d.setStart(v,_):d.setEnd(v,_)}return!0},m_=n=>Mt(n)&&n.data.length>0,f_=(n,i,s)=>{const d=n.get(s.id+"_"+i),u=d?.parentNode,f=s.keep;if(d&&u){let v,_;if("start"===i?f?d.hasChildNodes()?(v=d.firstChild,_=1):m_(d.nextSibling)?(v=d.nextSibling,_=0):m_(d.previousSibling)?(v=d.previousSibling,_=d.previousSibling.data.length):(v=u,_=n.nodeIndex(d)+1):(v=u,_=n.nodeIndex(d)):f?d.hasChildNodes()?(v=d.firstChild,_=1):m_(d.previousSibling)?(v=d.previousSibling,_=d.previousSibling.data.length):(v=u,_=n.nodeIndex(d)):(v=u,_=n.nodeIndex(d)),!f){const k=d.previousSibling,T=d.nextSibling;let M;for(zt.each(zt.grep(d.childNodes),I=>{Mt(I)&&(I.data=I.data.replace(/\uFEFF/g,""))});M=n.get(s.id+"_"+i);)n.remove(M,!0);if(Mt(T)&&Mt(k)&&!Yt.browser.isOpera()){const I=k.data.length;k.appendData(T.data),n.remove(T),v=k,_=I}}return ue.some(ut(v,_))}return ue.none()},qA=(n,i,s)=>((d,u,f=!1)=>{return 2===u?db(Zi,f,d):3===u?(v=>{const _=v.getRng();return{start:Z1(v.dom.getRoot(),ut.fromRangeStart(_)),end:Z1(v.dom.getRoot(),ut.fromRangeEnd(_)),forward:v.isForward()}})(d):u?{rng:(v=d).getRng(),forward:v.isForward()}:Im(d,!1);var v})(n,i,s),qC=(n,i)=>{((s,d)=>{const u=s.dom;if(d){if(Um(d))return((f,v)=>{const _=f.createRng();return jC(f,!0,v,_)&&jC(f,!1,v,_)?ue.some({range:_,forward:fp(v)}):ue.none()})(u,d);if(Y(d.start))return((f,v)=>{const _=ue.from(bC(f.getRoot(),v.start)),k=ue.from(bC(f.getRoot(),v.end));return ea(_,k,(T,M)=>{const I=f.createRng();return I.setStart(T.container(),T.offset()),I.setEnd(M.container(),M.offset()),{range:I,forward:fp(v)}})})(u,d);if(Ln(d,"id"))return((f,v)=>{const _=f_(f,"start",v),k=f_(f,"end",v);return ea(_,k.or(_),(T,M)=>{const I=f.createRng();return I.setStart(Cb(f,T.container()),T.offset()),I.setEnd(Cb(f,M.container()),M.offset()),{range:I,forward:fp(v)}})})(u,d);if(Pa(d))return((f,v)=>ue.from(f.select(v.name)[v.index]).map(_=>{const k=f.createRng();return k.selectNode(_),{range:k,forward:!0}}))(u,d);if((f=>Ln(f,"rng"))(d))return ue.some({range:d.rng,forward:fp(d)})}return ue.none()})(n,i).each(({range:s,forward:d})=>{n.setRng(s,d)})},Xr=n=>nn(n)&&"SPAN"===n.tagName&&"bookmark"===n.getAttribute("data-mce-type"),jm=(kb=Bi,n=>kb===n);var kb;const vp=n=>""!==n&&-1!==" \f\n\r\t\v".indexOf(n),ag=n=>!vp(n)&&!jm(n)&&!as(n),h0=n=>{const i=[];if(n)for(let s=0;s<n.rangeCount;s++)i.push(n.getRangeAt(s));return i},qm=(n,i)=>{const s=jo(i,"td[data-mce-selected],th[data-mce-selected]");return s.length>0?s:dn(Tt(n,f=>{const v=ip(f);return v?[Ze(v)]:[]}),Ad)},Tb=n=>qm(h0(n.selection.getSel()),Ze(n.getBody())),v_=(n,i)=>$i(n,"table",i),Ed=n=>Fh(n).fold(ee([n]),i=>[n].concat(Ed(i))),$C=n=>Rl(n).fold(ee([n]),i=>"br"===mo(i)?nu(i).map(s=>[n].concat($C(s))).getOr([]):[n].concat($C(i))),yp=(n,i)=>ea((s=>{const d=s.startContainer,u=s.startOffset;return Mt(d)?0===u?ue.some(Ze(d)):ue.none():ue.from(d.childNodes[u]).map(Ze)})(i),(s=>{const d=s.endContainer,u=s.endOffset;return Mt(d)?u===d.data.length?ue.some(Ze(d)):ue.none():ue.from(d.childNodes[u-1]).map(Ze)})(i),(s,d)=>{const u=Qo(Ed(n),We(To,s)),f=Qo($C(n),We(To,d));return u.isSome()&&f.isSome()}).getOr(!1),ql=(n,i,s,d)=>{const u=s,f=new io(s,u),v=pa(n.schema.getMoveCaretBeforeOnEnterElements(),(k,T)=>!Jt(["td","th","table"],T.toLowerCase()));let _=s;do{if(Mt(_)&&0!==zt.trim(_.data).length)return void(d?i.setStart(_,0):i.setEnd(_,_.data.length));if(v[_.nodeName])return void(d?i.setStartBefore(_):"BR"===_.nodeName?i.setEndBefore(_):i.setEndAfter(_))}while(_=d?f.next():f.prev());"BODY"===u.nodeName&&(d?i.setStart(u,0):i.setEnd(u,u.childNodes.length))},g0=n=>{const i=n.selection.getSel();return ae(i)&&i.rangeCount>0},Ba=(n,i)=>{const s=Tb(n);s.length>0?Qe(s,d=>{const u=d.dom,f=n.dom.createRng();f.setStartBefore(u),f.setEndAfter(u),i(f,!0)}):i(n.selection.getRng(),!1)},Nd=(n,i,s)=>{const d=Im(n,i);s(d),n.moveToBookmark(d)},Us=n=>Re(n?.nodeType),p0=n=>nn(n)&&!Xr(n)&&!Nr(n)&&!Yi(n),y_=(n,i,s)=>{const{selection:d,dom:u}=n,f=d.getNode(),v=fo(f);Nd(d,!0,()=>{i()}),v&&fo(f)&&u.isChildOf(f,n.getBody())?n.selection.select(f):s(d.getStart())&&YC(u,d)},YC=(n,i)=>{var s,d;const u=i.getRng(),{startContainer:f,startOffset:v}=u;if(!((_,k)=>{if(p0(k)&&!/^(TD|TH)$/.test(k.nodeName)){const T=_.getAttrib(k,"data-mce-selected"),M=parseInt(T,10);return!isNaN(M)&&M>0}return!1})(n,i.getNode())&&nn(f)){const _=f.childNodes,k=n.getRoot();let T;if(v<_.length){const M=_[v];T=new io(M,null!==(s=n.getParent(M,n.isBlock))&&void 0!==s?s:k)}else{const M=_[_.length-1];T=new io(M,null!==(d=n.getParent(M,n.isBlock))&&void 0!==d?d:k),T.next(!0)}for(let M=T.current();M;M=T.next()){if("false"===n.getContentEditable(M))return;if(Mt(M)&&!x_(M))return u.setStart(M,0),void i.setRng(u)}}},XC=(n,i,s)=>{if(n){const d=i?"nextSibling":"previousSibling";for(n=s?n:n[d];n;n=n[d])if(nn(n)||!x_(n))return n}},b_=(n,i)=>!!n.getTextBlockElements()[i.nodeName.toLowerCase()]||dl(n,i),la=(n,i,s)=>n.schema.isValidChild(i,s),x_=(n,i=!1)=>{if(ae(n)&&Mt(n)){const s=i?n.data.replace(/ /g,"\xa0"):n.data;return ru(s)}return!1},m0=(n,i)=>{const s=n.dom;return p0(i)&&"false"===s.getContentEditable(i)&&((d,u)=>{const f="[data-mce-cef-wrappable]",v=wo(d),_=Kr(v)?f:`${f},${v}`;return va(Ze(u),_)})(n,i)&&0===s.select('[contenteditable="true"]',i).length},ah=(n,i)=>Ge(n)?n(i):(ae(i)&&(n=n.replace(/%(\w+)/g,(s,d)=>i[d]||s)),n),Xc=(n,i)=>(n=""+((n=n||"").nodeName||n),i=""+((i=i||"").nodeName||i),n.toLowerCase()===i.toLowerCase()),Zc=(n,i)=>{if(_e(n))return null;{let s=String(n);return"color"!==i&&"backgroundColor"!==i||(s=_m(s)),"fontWeight"===i&&700===n&&(s="bold"),"fontFamily"===i&&(s=s.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),s}},Vo=(n,i,s)=>{const d=n.getStyle(i,s);return Zc(d,s)},sg=(n,i)=>{let s;return n.getParent(i,d=>!!nn(d)&&(s=n.getStyle(d,"text-decoration"),!!s&&"none"!==s)),s},lg=(n,i,s)=>n.getParents(i,s,n.getRoot()),$m=(n,i,s)=>{const d=n.formatter.get(i);return ae(d)&&_n(d,s)},mc=n=>Jd(n,"block"),Ho=n=>Jd(n,"selector"),ca=n=>Jd(n,"inline"),hu=n=>Ho(n)&&!1!==n.expand&&!ca(n),Mb=n=>(i=>{const s=[];let d=i;for(;d;){if(Mt(d)&&d.data!==Sa||d.childNodes.length>1)return[];nn(d)&&s.push(d),d=d.firstChild}return s})(n).length>0,__=n=>Nr(n.dom)&&Mb(n.dom),bp=Xr,ZC=lg,w_=x_,KC=b_,$l=(n,i)=>{let s=i;for(;s;){if(nn(s)&&n.getContentEditable(s))return"false"===n.getContentEditable(s)?s:i;s=s.parentNode}return i},Ka=(n,i,s,d)=>{const u=i.data;if(n){for(let f=s;f>0;f--)if(d(u.charAt(f-1)))return f}else for(let f=s;f<u.length;f++)if(d(u.charAt(f)))return f;return-1},f0=(n,i,s)=>Ka(n,i,s,d=>jm(d)||vp(d)),$A=(n,i,s)=>Ka(n,i,s,ag),JC=(n,i,s,d,u,f)=>{let v;const _=n.getParent(s,n.isBlock)||i,k=(T,M,I)=>{const O=Ku(n);return ue.from((u?O.backwards:O.forwards)(T,M,(N,z)=>bp(N.parentNode)?-1:(v=N,I(u,N,z)),_))};return k(s,d,f0).bind(T=>f?k(T.container,T.offset+(u?-1:0),$A):ue.some(T)).orThunk(()=>v?ue.some({container:v,offset:u?0:v.length}):ue.none())},So=(n,i,s,d,u)=>{const f=d[u];Mt(d)&&Kr(d.data)&&f&&(d=f);const v=ZC(n,d);for(let _=0;_<v.length;_++)for(let k=0;k<i.length;k++){const T=i[k];if((!ae(T.collapsed)||T.collapsed===s.collapsed)&&Ho(T)&&n.is(v[_],T.selector))return v[_]}return d},YA=(n,i,s,d)=>{var u;let f=s;const v=n.getRoot(),_=i[0];if(mc(_)&&(f=_.wrapper?null:n.getParent(s,_.block,v)),!f){const k=null!==(u=n.getParent(s,"LI,TD,TH,SUMMARY"))&&void 0!==u?u:v;f=n.getParent(Mt(s)?s.parentNode:s,T=>T!==v&&KC(n.schema,T),k)}if(f&&mc(_)&&_.wrapper&&(f=ZC(n,f,"ul,ol").reverse()[0]||f),!f)for(f=s;f&&f[d]&&!n.isBlock(f[d])&&(f=f[d],!Xc(f,"br")););return f||s},S_=(n,i,s,d)=>{const u=s.parentNode;return!ae(s[d])&&(!(u!==i&&!_e(u)&&!n.isBlock(u))||S_(n,i,u,d))},xp=(n,i,s,d,u)=>{let f=s;const v=u?"previousSibling":"nextSibling",_=n.getRoot();if(Mt(s)&&!w_(s)&&(u?d>0:d<s.data.length))return s;for(;f;){if(!i[0].block_expand&&n.isBlock(f))return f;for(let T=f[v];T;T=T[v]){const M=Mt(T)&&!S_(n,_,T,v);if(!bp(T)&&(!Bn(k=T)||!k.getAttribute("data-mce-bogus")||k.nextSibling)&&!w_(T,M))return f}if(f===_||f.parentNode===_){s=f;break}f=f.parentNode}var k;return s},C_=n=>bp(n.parentNode)||bp(n),_p=(n,i,s,d=!1)=>{let{startContainer:u,startOffset:f,endContainer:v,endOffset:_}=i;const k=s[0];return nn(u)&&u.hasChildNodes()&&(u=Ko(u,f),Mt(u)&&(f=0)),nn(v)&&v.hasChildNodes()&&(v=Ko(v,i.collapsed?_:_-1),Mt(v)&&(_=v.data.length)),u=$l(n,u),v=$l(n,v),C_(u)&&(u=bp(u)?u:u.parentNode,u=i.collapsed?u.previousSibling||u:u.nextSibling||u,Mt(u)&&(f=i.collapsed?u.length:0)),C_(v)&&(v=bp(v)?v:v.parentNode,v=i.collapsed?v.nextSibling||v:v.previousSibling||v,Mt(v)&&(_=i.collapsed?0:v.length)),i.collapsed&&(JC(n,n.getRoot(),u,f,!0,d).each(({container:T,offset:M})=>{u=T,f=M}),JC(n,n.getRoot(),v,_,!1,d).each(({container:T,offset:M})=>{v=T,_=M})),(ca(k)||k.block_expand)&&(ca(k)&&Mt(u)&&0!==f||(u=xp(n,s,u,f,!0)),ca(k)&&Mt(v)&&_!==v.data.length||(v=xp(n,s,v,_,!1))),hu(k)&&(u=So(n,s,i,u,"previousSibling"),v=So(n,s,i,v,"nextSibling")),(mc(k)||Ho(k))&&(u=YA(n,s,u,"previousSibling"),v=YA(n,s,v,"nextSibling"),mc(k)&&(n.isBlock(u)||(u=xp(n,s,u,f,!0),Mt(u)&&(f=0)),n.isBlock(v)||(v=xp(n,s,v,_,!1),Mt(v)&&(_=v.data.length)))),nn(u)&&u.parentNode&&(f=n.nodeIndex(u),u=u.parentNode),nn(v)&&v.parentNode&&(_=n.nodeIndex(v)+1,v=v.parentNode),{startContainer:u,startOffset:f,endContainer:v,endOffset:_}},Ab=(n,i,s)=>{var d;const u=i.startOffset,f=Ko(i.startContainer,u),v=i.endOffset,_=Ko(i.endContainer,v-1),k=L=>{const V=L[0];Mt(V)&&V===f&&u>=V.data.length&&L.splice(0,1);const J=L[L.length-1];return 0===v&&L.length>0&&J===_&&Mt(J)&&L.splice(L.length-1,1),L},T=(L,V,J)=>{const te=[];for(;L&&L!==J;L=L[V])te.push(L);return te},M=(L,V)=>n.getParent(L,J=>J.parentNode===V,V),I=(L,V,J)=>{const te=J?"nextSibling":"previousSibling";for(let re=L,ie=re.parentNode;re&&re!==V;re=ie){ie=re.parentNode;const he=T(re===L?re:re[te],te);he.length&&(J||he.reverse(),s(k(he)))}};if(f===_)return s(k([f]));const O=null!==(d=n.findCommonAncestor(f,_))&&void 0!==d?d:n.getRoot();if(n.isChildOf(f,_))return I(f,O,!0);if(n.isChildOf(_,f))return I(_,O);const R=M(f,O)||f,N=M(_,O)||_;I(f,R,!0);const z=T(R===f?R:R.nextSibling,"nextSibling",N===_?N.nextSibling:N);z.length&&s(k(z)),I(_,N)},oO=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],v0=(n,i,s,d,u,f)=>{const{uid:v=i,..._}=s;Uu(n,ui()),ta(n,`${Vr()}`,v),ta(n,`${Sm()}`,d);const{attributes:k={},classes:T=[]}=u(v,_);if(nc(n,k),M=n,Qe(T,O=>{Uu(M,O)}),f){T.length>0&&ta(n,`${su()}`,T.join(","));const M=Ur(k);M.length>0&&ta(n,`${zs()}`,M.join(","))}var M},k_=(n,i,s,d,u)=>{const f=yr("span",n);return v0(f,i,s,d,u,!1),f},Ym=n=>{const i=(()=>{const f={};return{register:(v,_)=>{f[v]={name:v,settings:_}},lookup:v=>go(f,v).map(_=>_.settings),getNames:()=>Ur(f)}})();((f,v)=>{const _=Sm(),k=M=>ue.from(M.attr(_)).bind(v.lookup),T=M=>{var I,O;M.attr(Vr(),null),M.attr(Sm(),null),M.attr(qa(),null);const R=ue.from(M.attr(zs())).map(V=>V.split(",")).getOr([]),N=ue.from(M.attr(su())).map(V=>V.split(",")).getOr([]);Qe(R,V=>M.attr(V,null));const z=null!==(O=null===(I=M.attr("class"))||void 0===I?void 0:I.split(" "))&&void 0!==O?O:[],L=on(z,[ui()].concat(N));M.attr("class",L.length>0?L.join(" "):null),M.attr(su(),null),M.attr(zs(),null)};f.serializer.addTempAttr(qa()),f.serializer.addAttributeFilter(_,M=>{for(const I of M)k(I).each(O=>{!1===O.persistent&&("span"===I.name?I.unwrap():T(I))})})})(n,i);const s=((f,v)=>{const _=ur({}),k=()=>({listeners:[],previous:zl()}),T=(R,N)=>{M(R,z=>(N(z),z))},M=(R,N)=>{const z=_.get(),L=N(go(z,R).getOrThunk(k));z[R]=L,_.set(z)},I=(R,N)=>{Qe(ep(f,R),z=>{N?ta(z,qa(),"true"):Gr(z,qa())})},O=dc(()=>{const R=no(v.getNames());Qe(R,N=>{M(N,z=>{const L=z.previous.get();return Mo(f,ue.some(N)).fold(()=>{L.each(V=>{var J;T(J=N,te=>{Qe(te.listeners,re=>re(!1,J))}),z.previous.clear(),I(V,!1)})},({uid:V,name:J,elements:te})=>{var re,ie,he;kr(L,V)||(L.each(re=>I(re,!1)),ie=V,he=te,T(re=J,fe=>{Qe(fe.listeners,ye=>ye(!0,re,{uid:ie,nodes:hn(he,Ie=>Ie.dom)}))}),z.previous.set(V),I(V,!0))}),{previous:z.previous,listeners:z.listeners}})})},30);return f.on("remove",()=>{O.cancel()}),f.on("NodeChange",()=>{O.throttle()}),{addListener:(R,N)=>{M(R,z=>({previous:z.previous,listeners:z.listeners.concat([N])}))}}})(n,i),d=rs("span"),u=f=>{Qe(f,v=>{d(v)?tt(v):(_=>{Gu(_,ui()),Gr(_,`${Vr()}`),Gr(_,`${Sm()}`),Gr(_,`${qa()}`);const k=Pc(_,`${zs()}`).map(I=>I.split(",")).getOr([]),T=Pc(_,`${su()}`).map(I=>I.split(",")).getOr([]);var M;Qe(k,I=>Gr(_,I)),M=_,Qe(T,I=>{Gu(M,I)}),Gr(_,`${su()}`),Gr(_,`${zs()}`)})(v)})};return{register:(f,v)=>{i.register(f,v)},annotate:(f,v)=>{i.lookup(f).each(_=>{var k,T,M,I;T=f,M=_,I=v,(k=n).undoManager.transact(()=>{const O=k.selection,R=O.getRng(),N=Tb(k).length>0,z=ob("mce-annotation");if(R.collapsed&&!N&&((L,V)=>{const J=_p(L.dom,V,[{inline:"span"}]);V.setStart(J.startContainer,J.startOffset),V.setEnd(J.endContainer,J.endOffset),L.selection.setRng(V)})(k,R),O.getRng().collapsed&&!N){const L=k_(k.getDoc(),z,I,T,M.decorate);Lt(L,Bi),O.getRng().insertNode(L.dom),O.select(L.dom)}else Nd(O,!1,()=>{Ba(k,L=>{((n,i,s,d,u,f)=>{const v=[],_=k_(n.getDoc(),s,f,d,u),k=zl(),T=()=>{k.clear()},M=O=>{Qe(O,I)},I=O=>{switch(R=n,N=O,z="span",L=mo(O),pn(N).fold(()=>"skipping",V=>{return"br"===L||fa(J=N)&&Yv(J)===Sa?"valid":(J=>ci(J)&&zh(J,ui()))(N)?"existing":Nr(N.dom)?"caret":_n(oO,J=>va(N,J))?"valid-block":la(R,z,L)&&la(R,mo(V),z)?"valid":"invalid-child";var J})){case"invalid-child":{T();const R=Qr(O);M(R),T();break}case"valid-block":T(),v0(O,s,f,d,u,!0);break;case"valid":{const R=k.get().getOrThunk(()=>{const N=lu(_);return v.push(N),k.set(N),N});xe(O,R);break}}var R,N,z,L};Ab(n.dom,i,O=>{T(),(R=>{const N=hn(R,Ze);M(N)})(O)})})(k,L,z,T,M.decorate,I)})})})})},annotationChanged:(f,v)=>{s.addListener(f,v)},remove:f=>{Mo(n,ue.some(f)).each(({elements:v})=>{const _=n.selection.getBookmark();u(v),n.selection.moveToBookmark(_)})},removeAll:f=>{const v=n.selection.getBookmark();ho(yA(n,f),(_,k)=>{u(_)}),n.selection.moveToBookmark(v)},getAll:f=>{const v=yA(n,f);return vn(v,_=>hn(_,k=>k.dom))}}},Xm=n=>({getBookmark:We(qA,n),moveToBookmark:We(qC,n)});Xm.isBookmarkNode=Xr;const rO=(n,i,s)=>!s.collapsed&&_n(s.getClientRects(),d=>{return v=i,(f=n)>=(u=d).left&&f<=u.right&&v>=u.top&&v<=u.bottom;var u,f,v}),Nn=(n,i,s)=>{n.dispatch(i,s)},T_=(n,i,s,d)=>{n.dispatch("FormatApply",{format:i,node:s,vars:d})},y0=(n,i,s,d)=>{n.dispatch("FormatRemove",{format:i,node:s,vars:d})},ek=(n,i)=>n.dispatch("SetContent",i),M_=(n,i)=>n.dispatch("GetContent",i),Ib=(n,i)=>{n.dispatch("AutocompleterUpdateActiveRange",i)},ks=(n,i)=>n.dispatch("PastePlainTextToggle",{state:i}),Kt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:n=>n.shiftKey||n.ctrlKey||n.altKey||Kt.metaKeyPressed(n),metaKeyPressed:n=>Yt.os.isMacOS()||Yt.os.isiOS()?n.metaKey:n.ctrlKey&&!n.altKey},Xo="data-mce-selected",tk=Math.abs,Wn=Math.round,yi={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},gu=(n,i)=>{const s=i.dom,d=i.getDoc(),u=document,f=i.getBody();let v,_,k,T,M,I,O,R,N,z,L,V,J,te,re;const ie=Dt=>ae(Dt)&&(wd(Dt)||s.is(Dt,"figure.image")),he=Dt=>Sd(Dt)||s.hasClass(Dt,"mce-preview-object"),fe=Dt=>{const en=Dt.target;((qe,Je)=>{if("longpress"===(gt=qe).type||0===gt.type.indexOf("touch")){const gt=qe.touches[0];return ie(qe.target)&&!rO(gt.clientX,gt.clientY,Je)}var gt;return ie(qe.target)&&!rO(qe.clientX,qe.clientY,Je)})(Dt,i.selection.getRng())&&!Dt.isDefaultPrevented()&&i.selection.select(en)},ye=Dt=>s.hasClass(Dt,"mce-preview-object")&&ae(Dt.firstElementChild)?[Dt,Dt.firstElementChild]:s.is(Dt,"figure.image")?[Dt.querySelector("img")]:[Dt],Ie=Dt=>{const en=o_(i);return!(!en||i.mode.isReadOnly())&&"false"!==Dt.getAttribute("data-mce-resize")&&Dt!==i.getBody()&&(s.hasClass(Dt,"mce-preview-object")&&ae(Dt.firstElementChild)?va(Ze(Dt.firstElementChild),en):va(Ze(Dt),en))},He=(Dt,en,qe)=>{if(ae(qe)){const Je=ye(Dt);Qe(Je,gt=>{gt.style[en]||!i.schema.isValid(gt.nodeName.toLowerCase(),en)?s.setStyle(gt,en,qe):s.setAttrib(gt,en,""+qe)})}},we=(Dt,en,qe)=>{He(Dt,"width",en),He(Dt,"height",qe)},De=Dt=>{let en,qe,Je,gt,ht;en=Dt.screenX-I,qe=Dt.screenY-O,V=en*T[2]+R,J=qe*T[3]+N,V=V<5?5:V,J=J<5?5:J,Je=(ie(v)||he(v))&&!1!==Nm(i)?!Kt.modifierPressed(Dt):Kt.modifierPressed(Dt),Je&&(tk(en)>tk(qe)?(J=Wn(V*z),V=Wn(J/z)):(V=Wn(J/z),J=Wn(V*z))),we(_,V,J),gt=T.startPos.x+en,ht=T.startPos.y+qe,gt=gt>0?gt:0,ht=ht>0?ht:0,s.setStyles(k,{left:gt,top:ht,display:"block"}),k.innerHTML=V+" &times; "+J,T[2]<0&&_.clientWidth<=V&&s.setStyle(_,"left",void 0+(R-V)),T[3]<0&&_.clientHeight<=J&&s.setStyle(_,"top",void 0+(N-J)),en=f.scrollWidth-te,qe=f.scrollHeight-re,en+qe!==0&&s.setStyles(k,{left:gt-en,top:ht-qe}),L||(i.dispatch("ObjectResizeStart",{target:v,width:R,height:N,origin:"corner-"+T.name}),L=!0)},Be=()=>{const Dt=L;L=!1,Dt&&(He(v,"width",V),He(v,"height",J)),s.unbind(d,"mousemove",De),s.unbind(d,"mouseup",Be),u!==d&&(s.unbind(u,"mousemove",De),s.unbind(u,"mouseup",Be)),s.remove(_),s.remove(k),s.remove(M),et(v),Dt&&(i.dispatch("ObjectResized",{target:v,width:V,height:J,origin:"corner-"+T.name}),s.setAttrib(v,"style",s.getAttrib(v,"style"))),i.nodeChanged()},et=Dt=>{qt();const en=s.getPos(Dt,f),qe=en.x,Je=en.y,gt=Dt.getBoundingClientRect(),ht=gt.width||gt.right-gt.left,Zt=gt.height||gt.bottom-gt.top;v!==Dt&&(it(),v=Dt,V=J=0);const Ut=i.dispatch("ObjectSelected",{target:Dt});Ie(Dt)&&!Ut.isDefaultPrevented()?ho(yi,(Mn,In)=>{let Jn=s.get("mceResizeHandle"+In);Jn&&s.remove(Jn),Jn=s.add(f,"div",{id:"mceResizeHandle"+In,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+In+"-resize; margin:0; padding:0"}),s.bind(Jn,"mousedown",wr=>{wr.stopImmediatePropagation(),wr.preventDefault(),(pi=>{const Zd=ye(v)[0];I=pi.screenX,O=pi.screenY,R=Zd.clientWidth,N=Zd.clientHeight,z=N/R,T=Mn,T.name=In,T.startPos={x:ht*Mn[0]+qe,y:Zt*Mn[1]+Je},te=f.scrollWidth,re=f.scrollHeight,M=s.add(f,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),s.setStyles(M,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),_=((un,ro)=>{if(he(ro))return un.create("img",{src:Yt.transparentSrc});if(Vc(ro)){const Co=gn(T.name,"n")?Rn:wi,qn=ro.cloneNode(!0);return Co(un.select("tr",qn)).each(er=>{const Sr=un.select("td,th",er);un.setStyle(er,"height",null),Qe(Sr,sn=>un.setStyle(sn,"height",null))}),qn}return ro.cloneNode(!0)})(s,v),s.addClass(_,"mce-clonedresizable"),s.setAttrib(_,"data-mce-bogus","all"),_.contentEditable="false",s.setStyles(_,{left:qe,top:Je,margin:0}),we(_,ht,Zt),_.removeAttribute(Xo),f.appendChild(_),s.bind(d,"mousemove",De),s.bind(d,"mouseup",Be),u!==d&&(s.bind(u,"mousemove",De),s.bind(u,"mouseup",Be)),k=s.add(f,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},R+" &times; "+N)})(wr)}),Mn.elm=Jn,s.setStyles(Jn,{left:ht*Mn[0]+qe-Jn.offsetWidth/2,top:Zt*Mn[1]+Je-Jn.offsetHeight/2})}):it(!1)},Ye=ws(et,0),it=(Dt=!0)=>{Ye.cancel(),qt(),v&&Dt&&v.removeAttribute(Xo),ho(yi,(en,qe)=>{const Je=s.get("mceResizeHandle"+qe);Je&&(s.unbind(Je),s.remove(Je))})},yt=(Dt,en)=>s.isChildOf(Dt,en),It=Dt=>{if(L||i.removed||i.composing)return;const en="mousedown"===Dt.type?Dt.target:n.getNode(),qe=ic(Ze(en),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(gt=>gt.dom).filter(gt=>s.isEditable(gt.parentElement)||"IMG"===gt.nodeName&&s.isEditable(gt)).getOrUndefined(),Je=ae(qe)?s.getAttrib(qe,Xo,"1"):"1";if(Qe(s.select(`img[${Xo}],hr[${Xo}]`),gt=>{gt.removeAttribute(Xo)}),ae(qe)&&yt(qe,f)&&i.hasFocus()){Xt();const gt=n.getStart(!0);if(yt(gt,qe)&&yt(n.getEnd(!0),qe))return s.setAttrib(qe,Xo,Je),void Ye.throttle(qe)}it()},qt=()=>{ho(yi,Dt=>{Dt.elm&&(s.unbind(Dt.elm),delete Dt.elm)})},Xt=()=>{try{i.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return i.on("init",()=>{Xt(),i.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",It),i.on("keyup compositionend",Dt=>{v&&"TABLE"===v.nodeName&&It(Dt)}),i.on("hide blur",it),i.on("contextmenu longpress",fe,!0)}),i.on("remove",qt),{isResizable:Ie,showResizeRect:et,hideResizeRect:it,updateResizeRect:It,destroy:()=>{Ye.cancel(),v=_=M=null}}},pu=(n,i,s)=>{const d=n.document.createRange();var u,f;return u=d,i.fold(f=>{u.setStartBefore(f.dom)},(f,v)=>{u.setStart(f.dom,v)},f=>{u.setStartAfter(f.dom)}),f=d,s.fold(_=>{f.setEndBefore(_.dom)},(_,k)=>{f.setEnd(_.dom,k)},_=>{f.setEndAfter(_.dom)}),d},Gs=(n,i,s,d,u)=>{const f=n.document.createRange();return f.setStart(i.dom,s),f.setEnd(d.dom,u),f},fr=$h([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Zm=(n,i,s)=>i(Ze(s.startContainer),s.startOffset,Ze(s.endContainer),s.endOffset),Ts=(n,i,s,d)=>({start:n,soffset:i,finish:s,foffset:d}),b0=$h([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),za={before:b0.before,on:b0.on,after:b0.after,cata:(n,i,s,d)=>n.fold(i,s,d),getStart:n=>n.fold(Se,Se,Se)},A_=$h([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),x0={domRange:A_.domRange,relative:A_.relative,exact:A_.exact,exactFromRange:n=>A_.exact(n.start,n.soffset,n.finish,n.foffset),getWin:n=>{const i=n.match({domRange:d=>Ze(d.startContainer),relative:(d,u)=>za.getStart(d),exact:(d,u,f,v)=>d});return Ro(i)},range:Ts},Db=(n,i)=>{const s=mo(n);return"input"===s?za.after(n):Jt(["br","img"],s)?0===i?za.before(n):za.after(n):za.on(n,i)},nk=(n,i)=>{const s=n.fold(za.before,Db,za.after),d=i.fold(za.before,Db,za.after);return x0.relative(s,d)},vo=(n,i,s,d)=>{const u=Db(n,i),f=Db(s,d);return x0.relative(u,f)},Yl=(n,i)=>{const s=(i||document).createDocumentFragment();return Qe(n,d=>{s.appendChild(d.dom)}),Ze(s)},Ob=(n,i,s)=>((n,i,s)=>{return(v=n.document,_=i,k=s,v.caretPositionFromPoint?(M=_,I=k,ue.from(null===(O=(T=v).caretPositionFromPoint)||void 0===O?void 0:O.call(T,M,I)).bind(R=>{if(null===R.offsetNode)return ue.none();const N=T.createRange();return N.setStart(R.offsetNode,R.offset),N.collapse(),ue.some(N)})):v.caretRangeFromPoint?((T,M,I)=>{var O;return ue.from(null===(O=T.caretRangeFromPoint)||void 0===O?void 0:O.call(T,M,I))})(v,_,k):ue.none()).map(v=>Ts(Ze(v.startContainer),v.startOffset,Ze(v.endContainer),v.endOffset));var v,_,k,T,M,I,O})(Ro(Ze(s)).dom,n,i).map(u=>{const f=s.createRange();return f.setStart(u.start.dom,u.soffset),f.setEnd(u.finish.dom,u.foffset),f}).getOrUndefined(),Do=(n,i)=>ae(n)&&ae(i)&&n.startContainer===i.startContainer&&n.startOffset===i.startOffset&&n.endContainer===i.endContainer&&n.endOffset===i.endOffset,XA=(n,i,s)=>null!==((d,u,f)=>{let v=d;for(;v&&v!==u;){if(f(v))return v;v=v.parentNode}return null})(n,i,s),Eb=(n,i,s)=>XA(n,i,d=>d.nodeName===s),ZE=(n,i)=>oa(n)&&!XA(n,i,Nr),Km=(n,i,s)=>{const d=i.parentNode;if(d){const u=new io(i,n.getParent(d,n.isBlock)||n.getRoot());let f;for(;f=u[s?"prev":"next"]();)if(Bn(f))return!0}return!1},cg=(n,i,s,d,u)=>{const f=n.getRoot(),v=n.schema.getNonEmptyElements(),_=u.parentNode;let k,T;if(!_)return ue.none();const M=n.getParent(_,n.isBlock)||f;if(d&&Bn(u)&&i&&n.isEmpty(M))return ue.some(ut(_,n.nodeIndex(u)));const I=new io(u,M);for(;T=I[d?"prev":"next"]();){if("false"===n.getContentEditableParent(T)||ZE(T,f))return ue.none();if(Mt(T)&&T.data.length>0)return Eb(T,f,"A")?ue.none():ue.some(ut(T,d?T.data.length:0));if(n.isBlock(T)||v[T.nodeName.toLowerCase()])return ue.none();k=T}return al(k)?ue.none():s&&k?ue.some(ut(k,0)):ue.none()},Ja=(n,i,s,d)=>{const u=n.getRoot();let f,v=!1,_=s?d.startContainer:d.endContainer,k=s?d.startOffset:d.endOffset;const T=nn(_)&&k===_.childNodes.length,M=n.schema.getNonEmptyElements();let I=s;if(oa(_))return ue.none();if(nn(_)&&k>_.childNodes.length-1&&(I=!1),Ev(_)&&(_=u,k=0),_===u){if(I&&(f=_.childNodes[k>0?k-1:0],f)&&(oa(f)||M[f.nodeName]||Vc(f)))return ue.none();if(_.hasChildNodes()){if(k=Math.min(!I&&k>0?k-1:k,_.childNodes.length-1),_=_.childNodes[k],k=Mt(_)&&T?_.data.length:0,!i&&_===u.lastChild&&Vc(_)||((O,R)=>{let N=R;for(;N&&N!==O;){if(fo(N))return!0;N=N.parentNode}return!1})(u,_)||oa(_)||st(_))return ue.none();if(_.hasChildNodes()&&!Vc(_)){f=_;const O=new io(_,u);do{if(fo(f)||oa(f)){v=!1;break}if(Mt(f)&&f.data.length>0){k=I?0:f.data.length,_=f,v=!0;break}if(M[f.nodeName.toLowerCase()]&&!Ps(f)){k=n.nodeIndex(f),_=f.parentNode,I||k++,v=!0;break}}while(f=I?O.next():O.prev())}}}return i&&(Mt(_)&&0===k&&cg(n,T,i,!0,_).each(O=>{_=O.container(),k=O.offset(),v=!0}),nn(_)&&(f=_.childNodes[k],f||(f=_.childNodes[k-1]),!f||!Bn(f)||"A"===(null===(N=f.previousSibling)||void 0===N?void 0:N.nodeName)||Km(n,f,!1)||Km(n,f,!0)||cg(n,T,i,!0,f).each(O=>{_=O.container(),k=O.offset(),v=!0}))),I&&!i&&Mt(_)&&k===_.data.length&&cg(n,T,i,!1,_).each(O=>{_=O.container(),k=O.offset(),v=!0}),v&&_?ue.some(ut(_,k)):ue.none();var N},eo=(n,i)=>{const s=i.collapsed,d=i.cloneRange(),u=ut.fromRangeStart(i);return Ja(n,s,!0,d).each(f=>{s&&ut.isAbove(u,f)||d.setStart(f.container(),f.offset())}),s||Ja(n,s,!1,d).each(f=>{d.setEnd(f.container(),f.offset())}),s&&d.collapse(!0),Do(i,d)?ue.none():ue.some(d)},I_=(n,i)=>n.splitText(i),wp=n=>{let i=n.startContainer,s=n.startOffset,d=n.endContainer,u=n.endOffset;if(i===d&&Mt(i)){if(s>0&&s<i.data.length)if(d=I_(i,s),i=d.previousSibling,u>s){u-=s;const f=I_(d,u).previousSibling;i=d=f,u=f.data.length,s=0}else u=0}else if(Mt(i)&&s>0&&s<i.data.length&&(i=I_(i,s),s=0),Mt(d)&&u>0&&u<d.data.length){const f=I_(d,u).previousSibling;d=f,u=f.data.length}return{startContainer:i,startOffset:s,endContainer:d,endOffset:u}},Rd=n=>({walk:(i,s)=>Ab(n,i,s),split:wp,expand:(i,s={type:"word"})=>{if("word"===s.type){const d=_p(n,i,[{inline:"span"}]),u=n.createRng();return u.setStart(d.startContainer,d.startOffset),u.setEnd(d.endContainer,d.endOffset),u}return i},normalize:i=>eo(n,i).fold(Bt,s=>(i.setStart(s.startContainer,s.startOffset),i.setEnd(s.endContainer,s.endOffset),!0))});Rd.compareRanges=Do,Rd.getCaretRangeFromPoint=Ob,Rd.getSelectedNode=ip,Rd.getNode=Ko;const D_=((n,i)=>{const s=u=>{const f=(v=>{const _=v.dom;return Vh(v)?_.getBoundingClientRect().height:_.offsetHeight})(u);if(f<=0||null===f){const v=Ci(u,n);return parseFloat(v)||0}return f},d=(u,f)=>Oo(f,(v,_)=>{const k=Ci(u,_),T=void 0===k?0:parseInt(k,10);return isNaN(T)?v:v+T},0);return{set:(u,f)=>{if(!Re(f)&&!f.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+f);const v=u.dom;Dv(v)&&(v.style[n]=f+"px")},get:s,getOuter:s,aggregate:d,max:(u,f,v)=>{const _=d(u,v);return f>_?f-_:0}}})("height"),_0=()=>Ze(document),ok=(n,i)=>n.view(i).fold(ee([]),s=>{const d=n.owner(s),u=ok(n,d);return[s].concat(u)});var rk=Object.freeze({__proto__:null,view:n=>{var i;return(n.dom===document?ue.none():ue.from(null===(i=n.dom.defaultView)||void 0===i?void 0:i.frameElement)).map(Ze)},owner:n=>Fc(n)});const ik=n=>"textarea"===mo(n),ZA=(n,i)=>{const s=(u=>{const f=u.dom.ownerDocument,v=f.body,_=f.defaultView,k=f.documentElement;if(v===u.dom)return Po(v.offsetLeft,v.offsetTop);const T=Vn(_?.pageYOffset,k.scrollTop),M=Vn(_?.pageXOffset,k.scrollLeft),I=Vn(k.clientTop,v.clientTop),O=Vn(k.clientLeft,v.clientLeft);return oo(u).translate(M-O,T-I)})(n),d=D_.get(n);return{element:n,bottom:s.top+d,height:d,pos:s,cleanup:i}},w0=(n,i,s,d)=>{S0(n,(u,f)=>sk(n,i,s,d),s)},ak=(n,i,s,d,u)=>{const f={elm:d.element.dom,alignToTop:u};n.dispatch("ScrollIntoView",f).isDefaultPrevented()||(s(n,i,Bo(i).top,d,u),n.dispatch("AfterScrollIntoView",f))},sk=(n,i,s,d)=>{Ze(n.getBody());const f=Ze(n.getDoc()),v=((_,k)=>{const T=((I,O)=>{const R=Qr(I);if(0===R.length||ik(I))return{element:I,offset:O};if(O<R.length&&!ik(R[O]))return{element:R[O],offset:0};{const N=R[R.length-1];return ik(N)?{element:I,offset:O}:"img"===mo(N)?{element:N,offset:1}:fa(N)?{element:N,offset:Yv(N).length}:{element:N,offset:Qr(N).length}}})(_,k),M=Nl('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return ki(T.element,M),ZA(M,()=>Ke(M))})(Ze(s.startContainer),s.startOffset);ak(n,f,i,v,d),v.cleanup()},lk=(n,i,s,d)=>{const u=Ze(n.getDoc());ak(n,u,s,ZA(Ze(i),ve),d)},S0=(n,i,s)=>{const d=s.startContainer,u=s.startOffset,f=s.endContainer,v=s.endOffset;i(Ze(d),Ze(f));const _=n.dom.createRng();_.setStart(d,u),_.setEnd(f,v),n.selection.setRng(s)},ck=(n,i,s,d,u)=>{const f=i.pos;if(d)fn(f.left,f.top,u);else{const v=f.top-s+i.height;fn(-n.getBody().getBoundingClientRect().left,v,u)}},O_=(n,i,s,d,u,f)=>{const v=d+s,_=u.pos.top,k=u.bottom,T=k-_>=d;_<s?ck(n,u,d,!1!==f,i):_>v?ck(n,u,d,T?!1!==f:!0===f,i):k>v&&!T&&ck(n,u,d,!0===f,i)},Jm=(n,i,s,d,u)=>{const f=Ro(i).dom.innerHeight;O_(n,i,s,f,d,u)},dk=(n,i,s,d,u)=>{const f=Ro(i).dom.innerHeight;O_(n,i,s,f,d,u);const v=(k=>{const T=_0(),M=Bo(T),I=((N,z)=>{const L=z.owner(N);return ok(z,L)})(k,rk),O=oo(k),R=Ao(I,(N,z)=>{const L=oo(z);return{left:N.left+L.left,top:N.top+L.top}},{left:0,top:0});return Po(R.left+O.left+M.left,R.top+O.top+M.top)})(d.element),_=xo(window);v.top<_.y?Et(d.element,!1!==u):v.top>_.bottom&&Et(d.element,!0===u)},dg=(n,i,s)=>w0(n,Jm,i,s),Nb=(n,i,s)=>lk(n,i,Jm,s),ug=(n,i,s)=>w0(n,dk,i,s),Fa=(n,i,s)=>lk(n,i,dk,s),Sp=(n,i,s)=>{(n.inline?dg:ug)(n,i,s)},KA=(n,i=!1)=>n.dom.focus({preventScroll:i}),Rb=n=>{const i=Ns(n).dom;return n.dom===i.activeElement},uk=(n=_0())=>ue.from(n.dom.activeElement).map(Ze),E_=(n,i)=>{const s=fa(i)?Yv(i).length:Qr(i).length+1;return n>s?s:n<0?0:n},hk=n=>x0.range(n.start,E_(n.soffset,n.start),n.finish,E_(n.foffset,n.finish)),JA=(n,i)=>!il(i.dom)&&(Es(n,i)||To(n,i)),QA=n=>i=>JA(n,i.start)&&JA(n,i.finish),iO=n=>x0.range(Ze(n.startContainer),n.startOffset,Ze(n.endContainer),n.endOffset),aO=n=>{const i=document.createRange();try{return i.setStart(n.start.dom,n.soffset),i.setEnd(n.finish.dom,n.foffset),ue.some(i)}catch{return ue.none()}},Cp=n=>{const i=n.inline||Yt.browser.isFirefox()?(s=Ze(n.getBody()),(d=>{const u=d.getSelection();return(u&&0!==u.rangeCount?ue.from(u.getRangeAt(0)):ue.none()).map(iO)})(Ro(s).dom).filter(QA(s))):ue.none();var s;n.bookmark=i.isSome()?i:n.bookmark},Ld=n=>(n.bookmark?n.bookmark:ue.none()).bind(i=>{return s=Ze(n.getBody()),ue.from(i).filter(QA(s)).map(hk);var s}).bind(aO),N_={isEditorUIElement:n=>{const i=n.className.toString();return-1!==i.indexOf("tox-")||-1!==i.indexOf("mce-")}},js={setEditorTimeout:(n,i,s)=>{return Re(u=s)||(u=0),setTimeout(()=>{n.removed||i()},u);var u},setEditorInterval:(n,i,s)=>{const d=(Re(f=s)||(f=0),setInterval(()=>{n.removed?clearInterval(d):i()},f));var f;return d}};let Qm;const C0=Mr.DOM,gk=n=>{const i=n.classList;return void 0!==i&&(i.contains("tox-edit-area")||i.contains("tox-edit-area__iframe")||i.contains("mce-content-body"))},k0=(n,i)=>{const s=AC(n);return null!==C0.getParent(i,u=>{return nn(f=u)&&N_.isEditorUIElement(f)||!!s&&n.dom.is(u,s);var f})},R_=n=>{try{const i=Ns(Ze(n.getElement()));return uk(i).fold(()=>document.body,s=>s.dom)}catch{return document.body}},e2=(n,i)=>{const s=i.editor;(u=>{const f=ws(()=>{Cp(u)},0);u.on("init",()=>{var v,T;u.inline&&((v,_)=>{const k=()=>{_.throttle()};Mr.DOM.bind(document,"mouseup",k),v.on("remove",()=>{Mr.DOM.unbind(document,"mouseup",k)})})(u,f),T=f,(v=u).on("mouseup touchend",M=>{T.throttle()}),v.on("keyup NodeChange AfterSetSelectionRange",k=>{(T=>"nodechange"===T.type&&T.selectionChange)(k)||Cp(v)})}),u.on("remove",()=>{f.cancel()})})(s);const d=(u,f)=>{ls(u)&&!0!==u.inline&&f(Ze(u.getContainer()),"tox-edit-focus")};s.on("focusin",()=>{const u=n.focusedEditor;gk(R_(s))&&d(s,Uu),u!==s&&(u&&u.dispatch("blur",{focusedEditor:s}),n.setActive(s),n.focusedEditor=s,s.dispatch("focus",{blurredEditor:u}),s.focus(!0))}),s.on("focusout",()=>{js.setEditorTimeout(s,()=>{const u=n.focusedEditor;gk(R_(s))&&u===s||d(s,Gu),k0(s,R_(s))||u!==s||(s.dispatch("blur",{focusedEditor:null}),n.focusedEditor=null)})}),Qm||(Qm=u=>{const f=n.activeEditor;f&&ou(u).each(v=>{v.ownerDocument===document&&(v===document.body||k0(f,v)||n.focusedEditor!==f||(f.dispatch("blur",{focusedEditor:null}),n.focusedEditor=null))})},C0.bind(document,"focusin",Qm))},sO=(n,i)=>{n.focusedEditor===i.editor&&(n.focusedEditor=null),!n.activeEditor&&Qm&&(C0.unbind(document,"focusin",Qm),Qm=null)},lO=(n,i)=>{var s,d,u;(s=Ze(n.getBody()),d=i,(u=d,u.collapsed?ue.from(Ko(u.startContainer,u.startOffset)).map(Ze):ue.none()).bind(u=>Md(u)?ue.some(u):Es(s,u)?ue.none():ue.some(s))).bind(s=>Ws(s.dom)).fold(()=>{n.selection.normalize()},s=>n.selection.setRng(s.toRange()))},ef=n=>{if(n.setActive)try{n.setActive()}catch{n.focus()}else n.focus()},tf=n=>{return n.inline?(i=>{const s=i.getBody();return s&&(d=Ze(s),Rb(d)||(u=d,uk(Ns(u)).filter(f=>u.dom.contains(f.dom))).isSome());var d,u})(n):ae((i=n).iframeElement)&&Rb(Ze(i.iframeElement));var i},pk=n=>tf(n)||(i=>{const s=Ns(Ze(i.getElement()));return uk(s).filter(d=>!gk(d.dom)&&k0(i,d.dom)).isSome()})(n),mk=n=>n.editorManager.setActive(n),fk=(n,i)=>i.collapsed?n.isEditable(i.startContainer):n.isEditable(i.startContainer)&&n.isEditable(i.endContainer),t2=(n,i,s,d,u)=>{const v=s?i.startOffset:i.endOffset;return ue.from(s?i.startContainer:i.endContainer).map(Ze).map(_=>d&&i.collapsed?_:rc(_,u(_,v)).getOr(_)).bind(_=>ci(_)?ue.some(_):pn(_).filter(ci)).map(_=>_.dom).getOr(n)},n2=(n,i,s=!1)=>t2(n,i,!0,s,(d,u)=>Math.min(xs(d),u)),da=(n,i,s=!1)=>t2(n,i,!1,s,(d,u)=>u>0?u-1:u),L_=(n,i)=>{const s=n;for(;n&&Mt(n)&&0===n.length;)n=i?n.nextSibling:n.previousSibling;return n||s},Lb=(n,i)=>hn(i,s=>{const d=n.dispatch("GetSelectionRange",{range:s});return d.range!==s?d.range:s}),vk={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},nf=(n,i,s)=>{const d=s?"lastChild":"firstChild",u=s?"prev":"next";if(n[d])return n[d];if(n!==i){let f=n[u];if(f)return f;for(let v=n.parent;v&&v!==i;v=v.parent)if(f=v[u],f)return f}},KE=n=>{var i;const s=null!==(i=n.value)&&void 0!==i?i:"";if(!ru(s))return!1;const d=n.parent;return!d||"span"===d.name&&!d.attr("style")||!/^[ ]+$/.test(s)},cO=n=>{const i="a"===n.name&&!n.attr("href")&&n.attr("id");return n.attr("name")||n.attr("id")&&!n.firstChild||n.attr("data-mce-bookmark")||i};class _l{static create(i,s){const d=new _l(i,vk[i]||1);return s&&ho(s,(u,f)=>{d.attr(f,u)}),d}constructor(i,s){this.name=i,this.type=s,1===s&&(this.attributes=[],this.attributes.map={})}replace(i){const s=this;return i.parent&&i.remove(),s.insert(i,s),s.remove(),s}attr(i,s){const d=this;if(!Y(i))return ae(i)&&ho(i,(f,v)=>{d.attr(v,f)}),d;const u=d.attributes;if(u){if(void 0!==s){if(null===s){if(i in u.map){delete u.map[i];let f=u.length;for(;f--;)if(u[f].name===i)return u.splice(f,1),d}return d}if(i in u.map){let f=u.length;for(;f--;)if(u[f].name===i){u[f].value=s;break}}else u.push({name:i,value:s});return u.map[i]=s,d}return u.map[i]}}clone(){const i=this,s=new _l(i.name,i.type),d=i.attributes;if(d){const u=[];u.map={};for(let f=0,v=d.length;f<v;f++){const _=d[f];"id"!==_.name&&(u[u.length]={name:_.name,value:_.value},u.map[_.name]=_.value)}s.attributes=u}return s.value=i.value,s}wrap(i){const s=this;return s.parent&&(s.parent.insert(i,s),i.append(s)),s}unwrap(){const i=this;for(let s=i.firstChild;s;){const d=s.next;i.insert(s,i,!0),s=d}i.remove()}remove(){const i=this,s=i.parent,d=i.next,u=i.prev;return s&&(s.firstChild===i?(s.firstChild=d,d&&(d.prev=null)):u&&(u.next=d),s.lastChild===i?(s.lastChild=u,u&&(u.next=null)):d&&(d.prev=u),i.parent=i.next=i.prev=null),i}append(i){const s=this;i.parent&&i.remove();const d=s.lastChild;return d?(d.next=i,i.prev=d,s.lastChild=i):s.lastChild=s.firstChild=i,i.parent=s,i}insert(i,s,d){i.parent&&i.remove();const u=s.parent||this;return d?(s===u.firstChild?u.firstChild=i:s.prev&&(s.prev.next=i),i.prev=s.prev,i.next=s,s.prev=i):(s===u.lastChild?u.lastChild=i:s.next&&(s.next.prev=i),i.next=s.next,i.prev=s,s.next=i),i.parent=u,i}getAll(i){const s=this,d=[];for(let u=s.firstChild;u;u=nf(u,s))u.name===i&&d.push(u);return d}children(){const i=[];for(let s=this.firstChild;s;s=s.next)i.push(s);return i}empty(){const i=this;if(i.firstChild){const s=[];for(let u=i.firstChild;u;u=nf(u,i))s.push(u);let d=s.length;for(;d--;){const u=s[d];u.parent=u.firstChild=u.lastChild=u.next=u.prev=null}}return i.firstChild=i.lastChild=null,i}isEmpty(i,s={},d){var u;const f=this;let v=f.firstChild;if(cO(f))return!1;if(v)do{if(1===v.type){if(v.attr("data-mce-bogus"))continue;if(i[v.name]||cO(v))return!1}if(8===v.type||3===v.type&&!KE(v)||3===v.type&&v.parent&&s[v.parent.name]&&ru(null!==(u=v.value)&&void 0!==u?u:"")||d&&d(v))return!1}while(v=nf(v,f));return!0}walk(i){return nf(this,null,i)}}const JE=zt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),Pb=n=>Y(n.nodeValue)&&n.nodeValue.includes(Sa),lh=n=>(0===n.length?"":`${hn(n,i=>`[${i}]`).join(",")},`)+'[data-mce-bogus="all"]',Bb=n=>document.createTreeWalker(n,NodeFilter.SHOW_COMMENT,i=>Pb(i)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),zb=n=>document.createTreeWalker(n,NodeFilter.SHOW_TEXT,i=>{if(Pb(i)){const s=i.parentNode;return s&&Ln(JE,s.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),dO=n=>null!==Bb(n).nextNode(),of=n=>null!==zb(n).nextNode(),Fb=(n,i)=>null!==i.querySelector(lh(n)),P_=(n,i)=>{Qe(i.querySelectorAll(lh(n)),s=>{const d=Ze(s);"all"===is(d,"data-mce-bogus")?Ke(d):Qe(n,u=>{Wu(d,u)&&Gr(d,u)})})},yk=n=>{let i=n.nextNode();for(;null!==i;)i.nodeValue=null,i=n.nextNode()},o2=Me(yk,Bb),uO=Me(yk,zb),rf=(n,i)=>{const s=[{condition:We(Fb,i),action:We(P_,i)},{condition:dO,action:o2},{condition:of,action:uO}];let d=n,u=!1;return Qe(s,({condition:f,action:v})=>{f(d)&&(u||(d=n.cloneNode(!0),u=!0),v(d))}),d},hO=n=>{const i=jo(n,"[data-mce-bogus]");Qe(i,s=>{"all"===is(s,"data-mce-bogus")?Ke(s):tp(s)?(ki(s,Bc("\ufeff")),Ke(s)):tt(s)})},gO=n=>{const i=jo(n,"input");Qe(i,s=>{Gr(s,"name")})},pO=zt.makeMap,mO=n=>{const i=[],s=(n=n||{}).indent,d=pO(n.indent_before||""),u=pO(n.indent_after||""),f=bm.getEncodeFunc(n.entity_encoding||"raw",n.entities),v="xhtml"!==n.element_format;return{start:(_,k,T)=>{if(s&&d[_]&&i.length>0){const M=i[i.length-1];M.length>0&&"\n"!==M&&i.push("\n")}if(i.push("<",_),k)for(let M=0,I=k.length;M<I;M++){const O=k[M];i.push(" ",O.name,'="',f(O.value,!0),'"')}if(i[i.length]=!T||v?">":" />",T&&s&&u[_]&&i.length>0){const M=i[i.length-1];M.length>0&&"\n"!==M&&i.push("\n")}},end:_=>{let k;i.push("</",_,">"),s&&u[_]&&i.length>0&&(k=i[i.length-1],k.length>0&&"\n"!==k&&i.push("\n"))},text:(_,k)=>{_.length>0&&(i[i.length]=k?_:f(_))},cdata:_=>{i.push("<![CDATA[",_,"]]>")},comment:_=>{i.push("\x3c!--",_,"--\x3e")},pi:(_,k)=>{k?i.push("<?",_," ",f(k),"?>"):i.push("<?",_,"?>"),s&&i.push("\n")},doctype:_=>{i.push("<!DOCTYPE",_,">",s?"\n":"")},reset:()=>{i.length=0},getContent:()=>i.join("").replace(/\n$/,"")}},bn=(n={},i=Vl())=>{const s=mO(n);return n.validate=!("validate"in n)||n.validate,{serialize:d=>{const u=n.validate,f={3:_=>{var k;s.text(null!==(k=_.value)&&void 0!==k?k:"",_.raw)},8:_=>{var k;s.comment(null!==(k=_.value)&&void 0!==k?k:"")},7:_=>{s.pi(_.name,_.value)},10:_=>{var k;s.doctype(null!==(k=_.value)&&void 0!==k?k:"")},4:_=>{var k;s.cdata(null!==(k=_.value)&&void 0!==k?k:"")},11:_=>{let k=_;if(k=k.firstChild)do{v(k)}while(k=k.next)}};s.reset();const v=_=>{var k;const T=f[_.type];if(T)T(_);else{const M=_.name,I=M in i.getVoidElements();let O=_.attributes;if(u&&O&&O.length>1){const R=[];R.map={};const N=i.getElementRule(_.name);if(N){for(let z=0,L=N.attributesOrder.length;z<L;z++){const V=N.attributesOrder[z];if(V in O.map){const J=O.map[V];R.map[V]=J,R.push({name:V,value:J})}}for(let z=0,L=O.length;z<L;z++){const V=O[z].name;if(!(V in R.map)){const J=O.map[V];R.map[V]=J,R.push({name:V,value:J})}}O=R}}if(s.start(M,O,I),hm(M))Y(_.value)&&s.text(_.value,!0),s.end(M);else if(!I){let R=_.firstChild;if(R){"pre"!==M&&"textarea"!==M||3!==R.type||"\n"!==(null===(k=R.value)||void 0===k?void 0:k[0])||s.text("\n",!0);do{v(R)}while(R=R.next)}s.end(M)}}};return 1!==d.type||n.inner?3===d.type?f[3](d):f[11](d):v(d),s.getContent()}}},r2=new Set;Qe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{r2.add(n)});const i2=new Set;Qe(["background-color"],n=>{i2.add(n)});const Kc=["font","text-decoration","text-emphasis"],af=(n,i)=>{return Ur((s=n).parseStyle(s.getAttrib(i,"style")));var s},fO=(n,i)=>_n(af(n,i),s=>r2.has(s)),B_=(n,i,s)=>ue.from(s.container()).filter(Mt).exists(d=>{const u=n?0:-1;return i(d.data.charAt(s.offset()+u))}),z_=We(B_,!0,vp),kp=We(B_,!1,vp),zn=n=>{const i=n.container();return Mt(i)&&(0===i.data.length||pl(i.data)&&Xm.isBookmarkNode(i.parentNode))},Fn=(n,i)=>s=>VC(n?0:-1,s).filter(i).isSome(),F_=n=>wd(n)&&"block"===Ci(Ze(n),"display"),Vb=n=>{return fo(n)&&!(nn(i=n)&&"all"===i.getAttribute("data-mce-bogus"));var i},eN=Fn(!0,F_),tN=Fn(!1,F_),Dn=Fn(!0,Sd),hg=Fn(!1,Sd),bk=Fn(!0,Vc),V_=Fn(!1,Vc),Tp=Fn(!0,Vb),Mp=Fn(!1,Vb),xk=(n,i)=>{return u=Bt,Es(d=i,s=n)?Ug(s,f=>u(f)||To(f,d)).slice(0,-1):[];var s,d,u},bi=(n,i)=>[n].concat(xk(n,i)),Qn=(n,i,s)=>Od(n,i,s,zn),a2=(n,i,s)=>{return Qo(bi(Ze(i.container()),n),(d=s,u=>d.isBlock(mo(u))));var d},Hb=(n,i,s,d)=>Qn(n,i.dom,s).forall(u=>a2(i,s,d).fold(()=>!Cs(u,s,i.dom),f=>!Cs(u,s,i.dom)&&Es(f,Ze(u.container())))),_k=(n,i,s,d)=>a2(i,s,d).fold(()=>Qn(n,i.dom,s).forall(u=>!Cs(u,s,i.dom)),u=>Qn(n,u.dom,s).isNone()),T0=We(_k,!1),gg=We(_k,!0),mu=We(Hb,!1),vO=We(Hb,!0),wk=n=>Sb(n).exists(tp),Sk=(n,i,s,d)=>{const u=dn(bi(Ze(s.container()),i),v=>d.isBlock(mo(v))),f=Rn(u).getOr(i);return bl(n,f.dom,s).filter(wk)},s2=(n,i,s)=>Sb(i).exists(tp)||Sk(!0,n,i,s).isSome(),Ck=(n,i,s)=>{return(d=i,ue.from(d.getNode(!0)).map(Ze)).exists(tp)||Sk(!1,n,i,s).isSome();var d},yO=We(Sk,!1),nN=We(Sk,!0),kk=n=>ut.isTextPosition(n)&&!n.isAtStart()&&!n.isAtEnd(),Ap=(n,i,s)=>{const d=dn(bi(Ze(i.container()),n),u=>s.isBlock(mo(u)));return Rn(d).getOr(n)},M0=(n,i,s)=>kk(i)?kp(i):kp(i)||pc(Ap(n,i,s).dom,i).exists(kp),Tk=(n,i,s)=>kk(i)?z_(i):z_(i)||xl(Ap(n,i,s).dom,i).exists(z_),Mk=n=>Sb(n).bind(i=>ol(i,ci)).exists(i=>{return s=Ci(i,"white-space"),Jt(["pre","pre-wrap"],s);var s}),l2=(n,i)=>s=>{return d=new io(s,n)[i](),ae(d)&&fo(d)&&gp(d);var d},H_=(n,i,s)=>{return!Mk(i)&&(f=s,pc((d=n).dom,u=i).isNone()||xl(d.dom,u).isNone()||T0(d,u,f)||gg(d,u,f)||Ck(d,u,f)||s2(d,u,f)||M0(n,i,s)||Tk(n,i,s));var d,u,f},Pd=(n,i,s)=>!Mk(i)&&(T0(n,i,s)||mu(n,i,s)||Ck(n,i,s)||M0(n,i,s)||((d,u)=>{const f=pc(d.dom,u).getOr(u),v=l2(d.dom,"prev");return u.isAtStart()&&(v(u.container())||v(f.container()))})(n,i)),A0=(n,i,s)=>!Mk(i)&&(gg(n,i,s)||vO(n,i,s)||s2(n,i,s)||Tk(n,i,s)||((d,u)=>{const f=xl(d.dom,u).getOr(u),v=l2(d.dom,"next");return u.isAtEnd()&&(v(u.container())||v(f.container()))})(n,i)),W_=(n,i,s)=>Pd(n,i,s)||A0(n,(d=>{const u=d.container(),f=d.offset();return Mt(u)&&f<u.data.length?ut(u,f+1):d})(i),s),c2=(n,i)=>jm(n.charAt(i)),U_=(n,i)=>vp(n.charAt(i)),G_=(n,i,s,d)=>{const u=i.data,f=ut(i,0);return s||!c2(u,0)||W_(n,f,d)?!!(s&&U_(u,0)&&Pd(n,f,d))&&(i.data=Bi+u.slice(1),!0):(i.data=" "+u.slice(1),!0)},Jc=(n,i,s,d)=>{const u=i.data,f=ut(i,u.length-1);return s||!c2(u,u.length-1)||W_(n,f,d)?!!(s&&U_(u,u.length-1)&&A0(n,f,d))&&(i.data=u.slice(0,-1)+Bi,!0):(i.data=u.slice(0,-1)+" ",!0)},pg=(n,i,s,d)=>{if(0===s)return;const u=Ze(n),f=Fr(u,T=>d.isBlock(mo(T))).getOr(u),v=n.data.slice(i,i+s),_=i+s>=n.data.length&&A0(f,ut(n,n.data.length),d),k=0===i&&Pd(f,ut(n,0),d);n.replaceData(i,s,aC(v,4,k,_))},fu=(n,i,s)=>{const d=n.data.slice(i),u=d.length-Zo(d).length;pg(n,i,u,s)},_r=(n,i,s)=>{const d=n.data.slice(0,i),u=d.length-_o(d).length;pg(n,i-u,u,s)},fc=(n,i,s,d,u=!0)=>{const f=_o(n.data).length,v=u?n:i,_=u?i:n;return u?v.appendData(_.data):v.insertData(0,_.data),Ke(Ze(_)),d&&fu(v,f,s),v},Wb=(n,i)=>((s,d)=>{const u=s.container(),f=s.offset();return!ut.isTextPosition(s)&&u===d.parentNode&&f>ut.before(d).offset()})(i,n)?ut(i.container(),i.offset()-1):i,Ub=n=>{return jc(n.previousSibling)?ue.some(Mt(i=n.previousSibling)?ut(i,i.data.length):ut.after(i)):n.previousSibling?uu(n.previousSibling):ue.none();var i},sf=n=>{return jc(n.nextSibling)?ue.some(Mt(i=n.nextSibling)?ut(i,0):ut.before(i)):n.nextSibling?Ws(n.nextSibling):ue.none();var i},lf=(n,i,s)=>{s.fold(()=>{n.focus()},d=>{n.selection.setRng(d.toRange(),i)})},lr=(n,i)=>i&&Ln(n.schema.getBlockElements(),mo(i)),vu=(n,i,s,d=!0,u=!1)=>{const f=((n,i,s)=>{return(d=n,u=i,f=s,d?(v=u,sf(_=f).orThunk(()=>Ub(_)).orThunk(()=>{return xl(k=v,ut.after(T=_)).orThunk(()=>pc(k,ut.before(T)));var k,T})):((v,_)=>Ub(_).orThunk(()=>sf(_)).orThunk(()=>{return k=v,ue.from((T=_).previousSibling?T.previousSibling:T.parentNode).bind(M=>pc(k,ut.before(M))).orThunk(()=>xl(k,ut.after(T)));var k,T}))(u,f)).map(We(Wb,s));var d,u,f,v,_})(i,n.getBody(),s.dom),v=Fr(s,We(lr,n),(_=n.getBody(),T=>T.dom===_));var _;const k=((T,M,I,O)=>{const R=nu(T).filter(fa),N=_d(T).filter(fa);return Ke(T),(z=R,L=N,V=M,J=(te,re,ie)=>{const he=te.dom,fe=re.dom,ye=he.data.length;return fc(he,fe,I,O),ie.container()===fe?ut(he,ye):ie},z.isSome()&&L.isSome()&&V.isSome()?ue.some(J(z.getOrDie(),L.getOrDie(),V.getOrDie())):ue.none()).orThunk(()=>(O&&(R.each(te=>_r(te.dom,te.dom.length,I)),N.each(te=>fu(te.dom,0,I))),M));var z,L,V,J})(s,f,n.schema,(M=s,Ln(n.schema.getTextInlineElements(),mo(M))));var M;n.dom.isEmpty(n.getBody())?(n.setContent(""),n.selection.setCursorLocation()):v.bind(T=>((M,I,O)=>{if(na(M,I)){const R=Nl('<br data-mce-bogus="1">');return O?Qe(Qr(I),N=>{__(N)||Ke(N)}):Le(I),ge(I,R),ue.some(ut.before(R.dom))}return ue.none()})(n.schema,T,u)).fold(()=>{d&&lf(n,i,k)},T=>{d&&lf(n,i,ue.some(T))})},Ip=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,cf=(n,i)=>va(Ze(i),gb(n))&&!dl(n.schema,i)&&n.dom.isEditable(i),j_=n=>{var i,s;return"rtl"===Mr.DOM.getStyle(n,"direction",!0)||(s=null!==(i=n.textContent)&&void 0!==i?i:"",Ip.test(s))},Xl=(n,i,s)=>{const d=(u=n,f=i,dn(Mr.DOM.getParents(s.container(),"*",f),u));var u,f;return ue.from(d[d.length-1])},Ms=(n,i)=>{const s=i.container(),d=i.offset();return n?$a(s)?Mt(s.nextSibling)?ut(s.nextSibling,0):ut.after(s):Xv(i)?ut(s,d+1):i:$a(s)?Mt(s.previousSibling)?ut(s.previousSibling,s.previousSibling.data.length):ut.before(s):Ya(i)?ut(s,d-1):i},Ik=We(Ms,!0),q_=We(Ms,!1),Dk=(n,i)=>{const s=d=>d.stopImmediatePropagation();n.on("beforeinput input",s,!0),n.getDoc().execCommand(i),n.off("beforeinput input",s)},df=n=>Dk(n,"Delete"),I0=n=>Dk(n,"ForwardDelete"),$_=n=>j1(n)||np(n),Gb=(n,i)=>{return Es(n,i)?ol(i,$_,(s=n,d=>kr(pn(d),s,To))):ue.none();var s},ch=(n,i=!0)=>{n.dom.isEmpty(n.getBody())&&n.setContent("",{no_selection:!i})},yu=(n,i,s)=>ea(Ws(s),uu(s),(d,u)=>{const f=Ms(!0,d),v=Ms(!1,u),_=Ms(!1,i);return n?xl(s,_).exists(k=>k.isEqual(v)&&i.isEqual(f)):pc(s,_).exists(k=>k.isEqual(f)&&i.isEqual(v))}).getOr(!0),d2=n=>{var i;return(8===zg(i=n)||"#comment"===mo(i)?nu(n):Rl(n)).bind(d2).orThunk(()=>ue.some(n))},Dp=(n,i,s,d=!0)=>{var u;i.deleteContents();const f=d2(s).getOr(s),v=Ze(null!==(u=n.dom.getParent(f.dom,n.dom.isBlock))&&void 0!==u?u:s.dom);if(v.dom===n.getBody()?ch(n,d):na(n.schema,v,{checkRootAsContent:!1})&&(rp(v),d&&n.selection.setCursorLocation(v.dom,0)),!To(s,v)){const k=kr(pn(v),s)?[]:pn(_=v).map(Qr).map(T=>dn(T,M=>!To(_,M))).getOr([]);Qe(k.concat(Qr(s)),T=>{To(T,v)||Es(T,v)||!na(n.schema,T)||Ke(T)})}var _},Ok=n=>jo(n,"td,th"),u2=(n,i)=>v_(Ze(n),i),jb=(n,i)=>({start:n,end:i}),dh=$h([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),cs=(n,i)=>ic(Ze(n),"td,th",i),qb=n=>!To(n.start,n.end),Ek=(n,i)=>v_(n.start,i).bind(s=>v_(n.end,i).bind(d=>No(To(s,d),s))),Nk=n=>i=>Ek(i,n).map(s=>({rng:i,table:s,cells:Ok(s)})),Rk=(n,i,s,d)=>{if(s.collapsed||!n.forall(qb))return ue.none();if(i.isSameTable){const u=n.bind(Nk(d));return ue.some({start:u,end:u})}{const u=cs(s.startContainer,d),f=cs(s.endContainer,d),v=u.bind((k=d,T=>v_(T,k).bind(M=>wi(Ok(M)).map(I=>jb(T,I))))).bind(Nk(d)),_=f.bind((k=>T=>v_(T,k).bind(M=>Rn(Ok(M)).map(I=>jb(I,T))))(d)).bind(Nk(d));return ue.some({start:v,end:_})}var k},Lk=(n,i)=>ft(n,s=>To(s,i)),wl=n=>ea(Lk(n.cells,n.rng.start),Lk(n.cells,n.rng.end),(i,s)=>n.cells.slice(i,s+1)),mg=(n,i)=>{const{startTable:s,endTable:d}=i,u=n.cloneRange();return s.each(f=>u.setStartAfter(f.dom)),d.each(f=>u.setEndBefore(f.dom)),u},Pk=n=>Qe(n,i=>{Gr(i,"contenteditable"),rp(i)}),Y_=(n,i,s,d)=>{const u=s.cloneRange();d?(u.setStart(s.startContainer,s.startOffset),u.setEndAfter(i.dom.lastChild)):(u.setStartBefore(i.dom.firstChild),u.setEnd(s.endContainer,s.endOffset)),X_(n,u,i,!1).each(f=>f())},Bk=n=>{const i=Tb(n),s=Ze(n.selection.getNode());Nv(s.dom)&&na(n.schema,s)?n.selection.setCursorLocation(s.dom,0):n.selection.collapse(!0),i.length>1&&_n(i,d=>To(d,s))&&ta(s,"data-mce-selected","1")},vc=(n,i,s)=>ue.some(()=>{const d=n.selection.getRng(),u=s.bind(({rng:f,isStartInTable:v})=>{const _=ue.from((T=n).dom.getParent(v?f.endContainer:f.startContainer,T.dom.isBlock)).map(Ze);var T;f.deleteContents(),((T,M,I)=>{I.each(O=>{M?Ke(O):(rp(O),T.selection.setCursorLocation(O.dom,0))})})(n,v,_.filter(We(na,n.schema)));const k=v?i[0]:i[i.length-1];return Y_(n,k,d,v),na(n.schema,k)?ue.none():ue.some(v?i.slice(1):i.slice(0,-1))}).getOr(i);Pk(u),Bk(n)}),g2=(n,i,s,d)=>ue.some(()=>{const u=n.selection.getRng(),f=i[0],v=s[s.length-1];Y_(n,f,u,!0),Y_(n,v,u,!1);const _=na(n.schema,f)?i:i.slice(1),k=na(n.schema,v)?s:s.slice(0,-1);Pk(_.concat(k)),d.deleteContents(),Bk(n)}),X_=(n,i,s,d=!0)=>ue.some(()=>{Dp(n,i,s,d)}),p2=(n,i)=>ue.some(()=>vu(n,!1,i)),uf=(n,i)=>Qo(bi(i,n),Ad),$b=(n,i)=>Qo(bi(i,n),rs("caption")),Z_=(n,i)=>ue.some(()=>{rp(i),n.selection.setCursorLocation(i.dom,0)}),Yb=(n,i)=>n?bk(i):V_(i),D0=(n,i)=>{const s=Ze(n.selection.getStart(!0)),d=Tb(n);return n.selection.isCollapsed()&&0===d.length?((n,i,s)=>{const d=Ze(n.getBody());return $b(d,s).fold(()=>((u,f,v,_)=>{const k=ut.fromRangeStart(u.selection.getRng());return uf(v,_).bind(T=>{return na(u.schema,T,{checkRootAsContent:!1})?Z_(u,T):(I=v,R=T,N=k,ig(f,u.getBody(),N).bind(z=>uf(I,Ze(z.getNode())).bind(L=>To(L,R)?ue.none():ue.some(ve))));var I,R,N})})(n,i,d,s).orThunk(()=>No(((u,f)=>{const v=ut.fromRangeStart(u.selection.getRng());return Yb(f,v)||bl(f,u.getBody(),v).exists(_=>Yb(f,_))})(n,i),ve)),u=>((f,v,_,k)=>{const T=ut.fromRangeStart(f.selection.getRng());return na(f.schema,k)?Z_(f,k):(I=_,R=k,N=T,ig(O=v,(M=f).getBody(),N).fold(()=>ue.some(ve),z=>{return V=O,J=N,te=z,Ws((L=R).dom).bind(re=>uu(L.dom).map(ie=>V?J.isEqual(re)&&te.isEqual(ie):J.isEqual(ie)&&te.isEqual(re))).getOr(!0)?((L,V)=>Z_(L,V))(M,R):((L,V,J)=>$b(L,Ze(J.getNode())).fold(()=>ue.some(ve),te=>No(!To(te,V),ve)))(I,R,z);var L,V,J,te}));var M,I,O,R,N})(n,i,d,u))})(n,i,s):((u,f,v)=>{const _=Ze(u.getBody()),k=u.selection.getRng();return 0!==v.length?vc(u,v,ue.none()):(T=u,I=k,$b(M=_,f).fold(()=>{return R=T,((n,i)=>{const s=(f=n,v=>To(f,v)),d=((f,v)=>{const _=cs(f.startContainer,v),k=cs(f.endContainer,v);return ea(_,k,jb)})(i,s),u=((f,v)=>{const _=u2(f.startContainer,v),k=u2(f.endContainer,v),T=_.isSome(),M=k.isSome(),I=ea(_,k,To).getOr(!1);return ea((O={startTable:_,endTable:k,isStartInTable:T,isEndInTable:M,isSameTable:I,isMultiTable:!I&&T&&M}).startTable,O.endTable,(R,N)=>{const z=Ga(R,V=>To(V,N)),L=Ga(N,V=>To(V,R));return z||L?{...O,startTable:z?ue.none():O.startTable,endTable:L?ue.none():O.endTable,isSameTable:!1,isMultiTable:!1}:O}).getOr(O);var O})(i,s);var f;return((f,v,_)=>f.exists(k=>{return M=_,!qb(T=k)&&Ek(T,M).exists(I=>{const O=I.dom.rows;return 1===O.length&&1===O[0].cells.length})&&yp(k.start,v);var T,M}))(d,i,s)?d.map(f=>dh.singleCellTable(i,f.start)):u.isMultiTable?((f,v,_,k)=>Rk(f,v,_,k).bind(({start:T,end:M})=>{const I=T.bind(wl).getOr([]),O=M.bind(wl).getOr([]);if(I.length>0&&O.length>0){const R=mg(_,v);return ue.some(dh.multiTable(I,O,R))}return ue.none()}))(d,u,i,s):((f,v,_,k)=>Rk(f,v,_,k).bind(({start:T,end:M})=>T.or(M)).bind(T=>{const{isSameTable:M}=v,I=wl(T).getOr([]);if(M&&T.cells.length===I.length)return ue.some(dh.fullTable(T.table));if(I.length>0){if(M)return ue.some(dh.partialTable(I,ue.none()));{const O=mg(_,v);return ue.some(dh.partialTable(I,ue.some({...v,rng:O})))}}return ue.none()}))(d,u,i,s)})(M,I).bind(L=>L.fold(We(X_,R),We(p2,R),We(vc,R),We(g2,R)));var R},R=>Z_(T,R)));var T,M,I})(n,s,d)},Qc=(n,i)=>{let s=i;for(;s&&s!==n;){if(ll(s)||fo(s))return s;s=s.parentNode}return null},ed=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],K_=zt.each,Zb=n=>{const i=n.dom,s=new Set(n.serializer.getTempAttrs()),d=u=>_n(ed,f=>gn(u,f))||s.has(u);return{compare:(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const v=k=>{const T={};return K_(i.getAttribs(k),M=>{const I=M.nodeName.toLowerCase();"style"===I||d(I)||(T[I]=i.getAttrib(k,I))}),T},_=(k,T)=>{for(const M in k)if(Ln(k,M)){const I=T[M];if(pe(I)||k[M]!==I)return!1;delete T[M]}for(const M in T)if(Ln(T,M))return!1;return!0};return!(nn(u)&&nn(f)&&(!_(v(u),v(f))||!_(i.parseStyle(i.getAttrib(u,"style")),i.parseStyle(i.getAttrib(f,"style"))))||Xr(u)||Xr(f))},isAttributeInternal:d}},O0=n=>["h1","h2","h3","h4","h5","h6"].includes(n.name),Kb=(n,i,s,d)=>{const u=s.name;for(let f=0,v=n.length;f<v;f++){const _=n[f];if(_.name===u){const k=d.nodes[u];k?k.nodes.push(s):d.nodes[u]={filter:_,nodes:[s]}}}if(s.attributes)for(let f=0,v=i.length;f<v;f++){const _=i[f],k=_.name;if(k in s.attributes.map){const T=d.attributes[k];T?T.nodes.push(s):d.attributes[k]={filter:_,nodes:[s]}}}},zk=(n,i)=>{const s=(d,u)=>{ho(d,f=>{const v=Go(f.nodes);Qe(f.filter.callbacks,_=>{for(let k=v.length-1;k>=0;k--){const T=v[k];(u?void 0!==T.attr(f.filter.name):T.name===f.filter.name)&&!_e(T.parent)||v.splice(k,1)}v.length>0&&_(v,f.filter.name,i)})})};s(n.nodes,!1),s(n.attributes,!0)},hf=(n,i,s,d={})=>{const u=((f,v,_)=>{const k={nodes:{},attributes:{}};return _.firstChild&&((T,M)=>{let I=T;for(;I=I.walk();)Kb(f,v,I,k)})(_),k})(n,i,s);zk(u,d)},J_=(n,i,s,d)=>{if((n.pad_empty_with_br||i.insert)&&s(d)){const u=new _l("br",1);i.insert&&u.attr("data-mce-bogus","1"),d.empty().append(u)}else d.empty().append(new _l("#text",3)).value=Bi},Fk=(n,i)=>{const s=n?.firstChild;return ae(s)&&s===n.lastChild&&s.name===i},bu=(n,i,s,d)=>d.isEmpty(i,s,u=>!0===n.getElementRule(u.name)?.paddEmpty),Op=n=>{let i;for(let s=n;s;s=s.parent){const d=s.attr("contenteditable");if("false"===d)break;"true"===d&&(i=s)}return ue.from(i)},Q_=(n,i,s=n.parent)=>{if(i.getSpecialElements()[n.name])n.empty().remove();else{const d=n.children();for(const u of d)s&&!i.isValidChild(s.name,u.name)&&Q_(u,i,s);n.unwrap()}},Vk=(n,i,s,d=ve)=>{const u=i.getTextBlockElements(),f=i.getNonEmptyElements(),v=i.getWhitespaceElements(),_=zt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),k=new Set,T=M=>M!==s&&!_[M.name];for(let M=0;M<n.length;M++){const I=n[M];let O,R,N;if(!I.parent||k.has(I))continue;if(u[I.name]&&"li"===I.parent.name){let L=I.next;for(;L&&u[L.name];)L.name="li",k.add(L),I.parent.insert(L,I.parent),L=L.next;I.unwrap();continue}const z=[I];for(O=I.parent;O&&!i.isValidChild(O.name,I.name)&&T(O);O=O.parent)z.push(O);if(O&&z.length>1)if(m2(i,I,O))Q_(I,i);else{z.reverse(),R=z[0].clone(),d(R);let L=R;for(let V=0;V<z.length-1;V++){i.isValidChild(L.name,z[V].name)&&V>0?(N=z[V].clone(),d(N),L.append(N)):N=L;for(let J=z[V].firstChild;J&&J!==z[V+1];){const te=J.next;N.append(J),J=te}L=N}bu(i,f,v,R)?O.insert(I,z[0],!0):(O.insert(R,z[0],!0),O.insert(I,R)),O=z[0],(bu(i,f,v,O)||Fk(O,"br"))&&O.empty().remove()}else if(I.parent){if("li"===I.name){let L=I.prev;if(L&&("ul"===L.name||"ol"===L.name)){L.append(I);continue}if(L=I.next,L&&("ul"===L.name||"ol"===L.name)&&L.firstChild){L.insert(I,L.firstChild,!0);continue}const V=new _l("ul",1);d(V),I.wrap(V);continue}if(i.isValidChild(I.parent.name,"div")&&i.isValidChild("div",I.name)){const L=new _l("div",1);d(L),I.wrap(L)}else Q_(I,i)}}},m2=(n,i,s=i.parent)=>{return!(!s||(!n.children[i.name]||n.isValidChild(s.name,i.name))&&("a"!==i.name||!((d,u)=>{let f=d;for(;f;){if("a"===f.name)return!0;f=f.parent}return!1})(s))&&(d=s,"summary"!==d.name||!O0(i)||s?.firstChild===i&&s?.lastChild===i));var d},Hk=n=>n.collapsed?n:(i=>{const s=ut.fromRangeStart(i),d=ut.fromRangeEnd(i),u=i.commonAncestorContainer;return bl(!1,u,d).map(f=>!Cs(s,d,u)&&Cs(s,f,u)?((v,_,k,T)=>{const M=document.createRange();return M.setStart(v,_),M.setEnd(k,T),M})(s.container(),s.offset(),f.container(),f.offset()):i).getOr(i)})(n),xu=(n,i)=>{const s=n.getParent(i,n.isBlock);return s&&"LI"===s.nodeName?s:null},ua=(n,i)=>{const s=ut.after(n),d=Dd(i).prev(s);return d?d.toRange():null},Wo=["pre"],Wk=Nv,xO=(n,i,s)=>{var d,u;const f=n.selection,v=n.dom,_=n.parser,k=s.merge,T=bn({validate:!0},n.schema),M='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';s.preserve_zwsp||(i=Zi(i)),-1===i.indexOf("{$caret}")&&(i+="{$caret}"),i=i.replace(/\{\$caret\}/,M);let I=f.getRng();const O=I.startContainer,R=n.getBody();var te,re;O===R&&f.isCollapsed()&&v.isBlock(R.firstChild)&&(te=n,ae(re=R.firstChild)&&!te.schema.getVoidElements()[re.nodeName])&&v.isEmpty(R.firstChild)&&(I=v.createRng(),I.setStart(R.firstChild,0),I.setEnd(R.firstChild,0),f.setRng(I)),f.isCollapsed()||(te=>{const re=te.dom,ie=Hk(te.selection.getRng());te.selection.setRng(ie);const he=re.getParent(ie.startContainer,Wk);var fe,ye,Ie;fe=re,ye=ie,ae(Ie=he)&&Ie===fe.getParent(ye.endContainer,Wk)&&yp(Ze(Ie),ye)?X_(te,ie,Ze(he)):ie.startContainer===ie.endContainer&&ie.endOffset-ie.startOffset==1&&Mt(ie.startContainer.childNodes[ie.startOffset])?ie.deleteContents():te.getDoc().execCommand("Delete",!1)})(n);const N=f.getNode(),z={context:N.nodeName.toLowerCase(),data:s.data,insert:!0},L=_.parse(i,z);if(!0===s.paste&&((n,i)=>{let s=i.firstChild,d=i.lastChild;return s&&"meta"===s.name&&(s=s.next),d&&"mce_marker"===d.attr("id")&&(d=d.prev),((u,f)=>{const v=u.getNonEmptyElements();return ae(f)&&(f.isEmpty(v)||(k=f,u.getBlockElements()[k.name]&&ae((T=k).firstChild)&&T.firstChild===T.lastChild&&(T=>"br"===T.name||T.value===Bi)(k.firstChild)));var k,T})(n,d)&&(d=d?.prev),!(!s||s!==d||"ul"!==s.name&&"ol"!==s.name)})(n.schema,L)&&((te,re)=>!!xu(te,re))(v,N))return I=((n,i,s,d)=>{const u=((I,O,R)=>{const N=O.serialize(R);return(z=>{var L,V;const J=z.firstChild,te=z.lastChild;return J&&"META"===J.nodeName&&(null===(L=J.parentNode)||void 0===L||L.removeChild(J)),te&&"mce_marker"===te.id&&(null===(V=te.parentNode)||void 0===V||V.removeChild(te)),z})(I.createFragment(N))})(i,n,d),f=xu(i,s.startContainer),v=(n=>{return n.length>0&&(!(s=n[n.length-1]).firstChild||ae(null==(i=s)?void 0:i.firstChild)&&i.firstChild===i.lastChild&&((d=i.firstChild).data===Bi||Bn(d)))?n.slice(0,-1):n;var d,i,s})(dn(null!==(k=u.firstChild?.childNodes)&&void 0!==k?k:[],I=>"LI"===I.nodeName));var k;const T=i.getRoot(),M=I=>{const O=ut.fromRangeStart(s),R=Dd(i.getRoot()),z=(1===I?R.prev(O):R.next(O))?.getNode();return!z||xu(i,z)!==f};return f?M(1)?((I,O,R)=>{const N=I.parentNode;return N&&zt.each(O,z=>{N.insertBefore(z,I)}),((z,L)=>{const V=ut.before(z),J=Dd(L).next(V);return J?J.toRange():null})(I,R)})(f,v,T):M(2)?(I=f,R=T,i.insertAfter((O=v).reverse(),I),ua(O[0],R)):((I,O,R,N)=>{const z=((V,J)=>{const te=J.cloneRange(),re=J.cloneRange();return te.setStartBefore(V),re.setEndAfter(V),[te.cloneContents(),re.cloneContents()]})(I,N),L=I.parentNode;return L&&(L.insertBefore(z[0],I),zt.each(O,V=>{L.insertBefore(V,I)}),L.insertBefore(z[1],I),L.removeChild(I)),ua(O[O.length-1],R)})(f,v,T,s):null;var I,O,R})(T,v,f.getRng(),L),I&&f.setRng(I),i;!0===s.paste&&((te,re,ie,he)=>{var fe;const ye=re.firstChild,Ie=re.lastChild,He=ye===("bookmark"===Ie.attr("data-mce-type")?Ie.prev:Ie),we=Jt(Wo,ye.name);if(He&&we){const De="false"!==ye.attr("contenteditable"),Be=(null===(fe=te.getParent(ie,te.isBlock))||void 0===fe?void 0:fe.nodeName.toLowerCase())===ye.name,et=ue.from(Qc(he,ie)).forall(ll);return De&&Be&&et}return!1})(v,L,N,n.getBody())&&(null===(d=L.firstChild)||void 0===d||d.unwrap()),(te=>{let re=te;for(;re=re.walk();)1===re.type&&re.attr("data-mce-fragment","1")})(L);let V=L.lastChild;if(V&&"mce_marker"===V.attr("id")){const te=V;for(V=V.prev;V&&"table"!==V.name;V=V.walk(!0))if(3===V.type||!v.isBlock(V.name)){V.parent&&n.schema.isValidChild(V.parent.name,"span")&&V.parent.insert(te,V,"br"===V.name);break}}if(n._selectionOverrides.showBlockCaretContainer(N),z.invalid||((te,re,ie)=>{var he;return _n(ie.children(),O0)&&"SUMMARY"===(null===(he=te.getParent(re,te.isBlock))||void 0===he?void 0:he.nodeName)})(v,N,L)){n.selection.setContent(M);let te,re=f.getNode();const ie=n.getBody();for(Ev(re)?re=te=ie:te=re;te&&te!==ie;)re=te,te=te.parentNode;i=re===ie?ie.innerHTML:v.getOuterHTML(re);const he=_.parse(i),fe=(De=>{for(let Be=De;Be;Be=Be.walk())if("mce_marker"===Be.attr("id"))return ue.some(Be);return ue.none()})(he),ye=fe.bind(Op).getOr(he);fe.each(De=>De.replace(L));const Ie=L.children(),He=null!==(u=L.parent)&&void 0!==u?u:he;L.unwrap();const we=dn(Ie,De=>m2(n.schema,De,He));Vk(we,n.schema,ye),hf(_.getNodeFilters(),_.getAttributeFilters(),he),i=T.serialize(he),re===ie?v.setHTML(ie,i):v.setOuterHTML(re,i)}else i=T.serialize(L),((te,re,ie)=>{var he;if("all"===ie.getAttribute("data-mce-bogus"))null===(he=ie.parentNode)||void 0===he||he.insertBefore(te.dom.createFragment(re),ie);else{const fe=ie.firstChild;!fe||fe===ie.lastChild&&"BR"===fe.nodeName?te.dom.setHTML(ie,re):te.selection.setContent(re,{no_events:!0})}})(n,i,N);var J;return((te,re)=>{const ie=te.schema.getTextInlineElements(),he=te.dom;if(re){const fe=te.getBody(),ye=Zb(te),Ie="*[data-mce-fragment]",He=he.select(Ie);zt.each(He,we=>{const De=Ye=>ae(ie[Ye.nodeName.toLowerCase()]),Be=Ye=>1===Ye.childNodes.length;if(!fO(he,et=we)&&(!fO(Ye=he,it=et)||!_n(af(Ye,it),yt=>i2.has(yt)))&&De(we)&&Be(we)){const Ye=af(he,we),it=(Xt,Dt)=>$t(Xt,en=>Jt(Dt,en)),yt=Xt=>Be(we)&&he.is(Xt,Ie)&&De(Xt)&&(Xt.nodeName===we.nodeName&&it(Ye,af(he,Xt))||yt(Xt.children[0])),It=Xt=>ae(Xt)&&Xt!==fe&&(ye.compare(we,Xt)||It(Xt.parentElement)),qt=Xt=>ae(Xt)&&Xt!==fe&&he.is(Xt,Ie)&&(((Dt,en,qe)=>{const Je=af(Dt,en),gt=af(Dt,qe),ht=Zt=>{var Ut,Mn;const In=null!==(Ut=Dt.getStyle(en,Zt))&&void 0!==Ut?Ut:"",Jn=null!==(Mn=Dt.getStyle(qe,Zt))&&void 0!==Mn?Mn:"";return Er(In)&&Er(Jn)&&In!==Jn};return _n(Je,Zt=>{const Ut=Mn=>_n(Mn,In=>In===Zt);if(!Ut(gt)&&Ut(Kc)){const Mn=dn(gt,In=>_n(Kc,Jn=>gn(In,Jn)));return _n(Mn,ht)}return ht(Zt)})})(he,we,Xt)||qt(Xt.parentElement));(yt(we.children[0])||It(we.parentElement)&&!qt(we.parentElement))&&he.remove(we,!0)}var Ye,it,et})}})(n,k),((te,re)=>{var ie,he,fe;let ye;const Ie=te.dom,He=te.selection;if(!re)return;He.scrollIntoView(re);const we=Qc(te.getBody(),re);if(we&&"false"===Ie.getContentEditable(we))return Ie.remove(re),void He.select(we);let De=Ie.createRng();const Be=re.previousSibling;if(Mt(Be)){De.setStart(Be,null!==(he=null===(ie=Be.nodeValue)||void 0===ie?void 0:ie.length)&&void 0!==he?he:0);const Ye=re.nextSibling;Mt(Ye)&&(Be.appendData(Ye.data),null===(fe=Ye.parentNode)||void 0===fe||fe.removeChild(Ye))}else De.setStartBefore(re),De.setEndBefore(re);const et=Ie.getParent(re,Ie.isBlock);if(Ie.remove(re),et&&Ie.isEmpty(et)){const Ye=Wk(et);Le(Ze(et)),De.setStart(et,0),De.setEnd(et,0),Ye||et.getAttribute("data-mce-fragment")||!(ye=(it=>{let yt=ut.fromRangeStart(it);return yt=Dd(te.getBody()).next(yt),yt?.toRange()})(De))?Ie.add(et,Ie.create("br",Ye?{}:{"data-mce-bogus":"1"})):(De=ye,Ie.remove(et))}He.setRng(De)})(n,v.get("mce_marker")),J=n.getBody(),zt.each(J.getElementsByTagName("*"),te=>{te.removeAttribute("data-mce-fragment")}),((te,re,ie)=>{ue.from(te.getParent(re,"td,th")).map(Ze).each(he=>{return ye=ie,void Rl(fe=he).each(Ie=>{nu(Ie).each(He=>{ye.isBlock(mo(fe))&&tp(Ie)&&ye.isBlock(mo(He))&&Ke(Ie)})});var fe,ye})})(v,f.getStart(),n.schema),((te,re,ie)=>{const he=Ug(Ze(ie),fe=>To(fe,Ze(re)));ao(he,he.length-2).filter(ci).fold(()=>cl(te,re),fe=>cl(te,fe.dom))})(n.schema,n.getBody(),f.getStart()),i},cr=n=>n instanceof _l,E0=(n,i,s)=>{var d;n.dom.setHTML(n.getBody(),i),!0!==s&&tf(d=n)&&Ws(d.getBody()).each(u=>{const f=u.getNode(),v=Vc(f)?Ws(f).getOr(u):u;d.selection.setRng(v.toRange())})},pf=n=>Ge(n)?n:Bt,mf=(n,i,s)=>{const d=i(n),u=pf(s);return d.orThunk(()=>u(n)?ue.none():((f,v,_)=>{let k=f.dom;const T=pf(_);for(;k.parentNode;){k=k.parentNode;const M=Ze(k),I=v(M);if(I.isSome())return I;if(T(M))break}return ue.none()})(n,i,u))},ff=Xc,N0=(n,i,s)=>{const d=n.formatter.get(s);if(d)for(let u=0;u<d.length;u++){const f=d[u];if(Ho(f)&&!1===f.inherit&&n.dom.is(i,f.selector))return!0}return!1},ew=(n,i,s,d,u)=>{const f=n.dom.getRoot();if(i===f)return!1;const v=n.dom.getParent(i,_=>!!N0(n,_,s)||_.parentNode===f||!!_u(n,_,s,d,!0));return!!_u(n,v,s,d,u)},tw=(n,i,s)=>!(!ca(s)||!ff(i,s.inline))||!(!mc(s)||!ff(i,s.block))||!!Ho(s)&&nn(i)&&n.is(i,s.selector),R0=(n,i,s,d,u,f)=>{const v=s[d],_="attributes"===d;if(Ge(s.onmatch))return s.onmatch(i,s,d);if(v)if(fd(v)){for(let k=0;k<v.length;k++)if(_?n.getAttrib(i,v[k]):Vo(n,i,v[k]))return!0}else for(const k in v)if(Ln(v,k)){const T=_?n.getAttrib(i,k):Vo(n,i,k),M=ah(v[k],f),I=_e(T)||Kr(T);if(I&&_e(M))continue;if(u&&I&&!s.exact||(!u||s.exact)&&!ff(T,Zc(M,k)))return!1}return!0},_u=(n,i,s,d,u)=>{const f=n.formatter.get(s),v=n.dom;if(f&&nn(i))for(let _=0;_<f.length;_++){const k=f[_];if(tw(n.dom,i,k)&&R0(v,i,k,"attributes",u,d)&&R0(v,i,k,"styles",u,d)){const T=k.classes;if(T)for(let M=0;M<T.length;M++)if(!n.dom.hasClass(i,ah(T[M],d)))return;return k}}},L0=(n,i,s,d,u)=>{if(d)return ew(n,d,i,s,u);if(d=n.selection.getNode(),ew(n,d,i,s,u))return!0;const f=n.selection.getStart();return!(f===d||!ew(n,f,i,s,u))},vr=Sa,f2=n=>{if(n){const i=new io(n,n);for(let s=i.current();s;s=i.next())if(Mt(s))return s}return null},nw=n=>{const i=yr("span");return nc(i,{id:Qt,"data-mce-bogus":"1","data-mce-type":"format-caret"}),n&&ge(i,Bc(vr)),i},ow=(n,i,s)=>{const d=n.dom,u=n.selection;if(Mb(i))vu(n,!1,Ze(i),s,!0);else{const f=u.getRng(),v=d.getParent(i,d.isBlock),_=f.startContainer,k=f.startOffset,T=f.endContainer,M=f.endOffset,I=(O=>{const R=f2(O);return R&&R.data.charAt(0)===vr&&R.deleteData(0,1),R})(i);d.remove(i,!0),_===I&&k>0&&f.setStart(I,k-1),T===I&&M>0&&f.setEnd(I,M-1),v&&d.isEmpty(v)&&rp(Ze(v)),u.setRng(f)}},Uk=(n,i,s)=>{const d=n.dom,u=n.selection;if(i)ow(n,i,s);else if(!(i=mp(n.getBody(),u.getStart())))for(;i=d.get(Qt);)ow(n,i,s)},v2=(n,i)=>(n.appendChild(i),i),As=(n,i)=>{var s;const d=Ao(n,(f,v)=>v2(f,v.cloneNode(!1)),i),u=null!==(s=d.ownerDocument)&&void 0!==s?s:document;return v2(d,u.createTextNode(vr))},Bd=n=>uC(n,Yv(n).replace(new RegExp(`${Bi}$`)," ")),Gk=(n,i)=>{const s=()=>{null===i||n.dom.isEmpty(i)||nu(Ze(i)).each(d=>{fa(d)?Bd(d):qg(d,u=>fa(u)).each(u=>{fa(u)&&Bd(u)})})};n.once("input",d=>{d.data&&!vp(d.data)&&(d.isComposing?n.once("compositionend",()=>{s()}):s())})},qk=n=>{const i=nw(!1),s=As(n,i.dom);return{caretContainer:i,caretPosition:ut(s,0)}},vf=(n,i)=>{const{caretContainer:s,caretPosition:d}=qk(i);return ki(Ze(n),s),Ke(Ze(n)),d},$k=(n,i)=>{if(Nr(i.dom))return!1;const s=n.schema.getTextInlineElements();return Ln(s,mo(i))&&!Nr(i.dom)&&!Yi(i.dom)},zd={},P0=Rs(["pre"]);((n,i)=>{zd[n]||(zd[n]=[]),zd[n].push(s=>{if(!s.selection.getRng().collapsed){const d=s.selection.getSelectedBlocks(),u=dn(dn(d,P0),(f=d,v=>{const _=v.previousSibling;return P0(_)&&Jt(f,_)}));Qe(u,f=>{((v,_)=>{const k=Ze(_),T=Fc(k).dom;Ke(k),be(Ze(v),[yr("br",T),yr("br",T),...Qr(k)])})(f.previousSibling,f)})}var f})})("pre");const rw=["fontWeight","fontStyle","color","fontSize","fontFamily"],fg=(n,i)=>{const s=n.get(i);return K(s)?Qo(s,d=>{return ca(d)&&"span"===d.inline&&W((u=d).styles)&&_n(Ur(u.styles),f=>Jt(rw,f));var u}):ue.none()},B0=(n,i)=>pc(i,ut.fromRangeStart(n)).isNone(),hh=(n,i)=>!1===xl(i,ut.fromRangeEnd(n)).exists(s=>!Bn(s.getNode())||xl(i,s).isSome()),Jb=n=>i=>Wc(i)&&n.isEditable(i),yc=n=>dn(n.getSelectedBlocks(),Jb(n.dom)),Sl=zt.each,z0=n=>nn(n)&&!Xr(n)&&!Nr(n)&&!Yi(n),Yk=(n,i)=>{for(let s=n;s;s=s[i]){if(Mt(s)&&Er(s.data))return n;if(nn(s)&&!Xr(s))return s}return n},bc=(n,i,s)=>{const d=Zb(n),u=Ei(i)&&n.dom.isEditable(i),f=Ei(s)&&n.dom.isEditable(s);if(u&&f){const v=Yk(i,"previousSibling"),_=Yk(s,"nextSibling");if(d.compare(v,_)){for(let k=v.nextSibling;k&&k!==_;){const T=k;k=k.nextSibling,v.appendChild(T)}return n.dom.remove(_),zt.each(zt.grep(_.childNodes),k=>{v.appendChild(k)}),v}}return s},or=(n,i,s,d)=>{var u;if(d&&!1!==i.merge_siblings){const f=null!==(u=bc(n,XC(d),d))&&void 0!==u?u:d;bc(n,f,XC(f,!0))}},Ep=(n,i,s)=>{Sl(n.childNodes,d=>{z0(d)&&(i(d)&&s(d),d.hasChildNodes()&&Ep(d,i,s))})},td=(n,i)=>s=>!(!s||!Vo(n,s,i)),gh=(n,i,s)=>d=>{var u,f;n.setStyle(d,i,s),""===d.getAttribute("style")&&d.removeAttribute("style"),u=n,"SPAN"===(f=d).nodeName&&0===u.getAttribs(f).length&&u.remove(f,!0)},yf=$h([{keep:[]},{rename:["name"]},{removed:[]}]),y2=/^(src|href|style)$/,iw=zt.each,aw=Xc,Xk=(n,i,s)=>n.isChildOf(i,s)&&i!==s&&!n.isBlock(s),F0=(n,i,s)=>{let d=i[s?"startContainer":"endContainer"],u=i[s?"startOffset":"endOffset"];if(nn(d)){const f=d.childNodes.length-1;!s&&u&&u--,d=d.childNodes[u>f?f:u]}return Mt(d)&&s&&u>=d.data.length&&(d=new io(d,n.getBody()).next()||d),Mt(d)&&!s&&0===u&&(d=new io(d,n.getBody()).prev()||d),d},Zk=(n,i)=>{const s=i?"firstChild":"lastChild",d=n[s];return/^(TR|TH|TD)$/.test(n.nodeName)&&d?"TR"===n.nodeName&&d[s]||d:n},sw=(n,i,s,d)=>{var u;const f=n.create(s,d);return null===(u=i.parentNode)||void 0===u||u.insertBefore(f,i),f.appendChild(i),f},bf=(n,i,s,d,u)=>{const f=Ze(i),v=Ze(n.create(d,u)),_=s?Gy(f):Uy(f);return be(v,_),s?(ki(f,v),rl(v,f)):(ya(f,v),ge(v,f)),v.dom},Kk=(n,i,s)=>{const d=i.parentNode;let u;const f=n.dom,v=aa(n);var _;mc(s)&&d===f.getRoot()&&(s.list_block&&aw(i,s.list_block)||Qe(Go(i.childNodes),_=>{la(n,v,_.nodeName.toLowerCase())?u?u.appendChild(_):(u=sw(f,_,v),f.setAttribs(u,t0(n))):u=null})),Ho(_=s)&&ca(_)&&kr(go(_,"mixed"),!0)&&!aw(s.inline,i)||f.remove(i,!0)},Qb=(n,i,s)=>Re(n)?{name:i,value:null}:{name:n,value:ah(i,s)},b2=(n,i)=>{""===n.getAttrib(i,"style")&&(i.removeAttribute("style"),i.removeAttribute("data-mce-style"))},x2=(n,i,s,d,u)=>{let f=!1;iw(s.styles,(v,_)=>{const{name:k,value:T}=Qb(_,v,d),M=Zc(T,k);(s.remove_similar||le(T)||!nn(u)||aw(Vo(n,u,k),M))&&n.setStyle(i,k,""),f=!0}),f&&b2(n,i)},Jk=(n,i,s,d,u)=>{const f=n.dom,v=Zb(n),_=n.schema;if(ca(i)&&pm(_,i.inline)&&dl(_,d)&&d.parentElement===n.getBody())return Kk(n,d,i),yf.removed();if(!i.ceFalseOverride&&d&&"false"===f.getContentEditableParent(d)||d&&!tw(f,d,i)&&(!i.links||"A"!==d.nodeName))return yf.keep();const k=d,T=i.preserve_attributes;if(ca(i)&&"all"===i.remove&&K(T)){const M=dn(f.getAttribs(k),I=>Jt(T,I.name.toLowerCase()));if(f.removeAllAttribs(k),Qe(M,I=>f.setAttrib(k,I.name,I.value)),M.length>0)return yf.rename("span")}if("all"!==i.remove){x2(f,k,i,s,u),iw(i.attributes,(I,O)=>{const{name:R,value:N}=Qb(O,I,s);if(i.remove_similar||le(N)||!nn(u)||aw(f.getAttrib(u,R),N)){if("class"===R){const z=f.getAttrib(k,R);if(z){let L="";if(Qe(z.split(/\s+/),V=>{/mce\-\w+/.test(V)&&(L+=(L?" ":"")+V)}),L)return void f.setAttrib(k,R,L)}}if(y2.test(R)&&k.removeAttribute("data-mce-"+R),"style"===R&&Rs(["li"])(k)&&"none"===f.getStyle(k,"list-style-type"))return k.removeAttribute(R),void f.setStyle(k,"list-style-type","none");"class"===R&&k.removeAttribute("className"),k.removeAttribute(R)}}),iw(i.classes,I=>{I=ah(I,s),nn(u)&&!f.hasClass(u,I)||f.removeClass(k,I)});const M=f.getAttribs(k);for(let I=0;I<M.length;I++)if(!v.isAttributeInternal(M[I].nodeName))return yf.keep()}return"none"!==i.remove?(Kk(n,k,i),yf.removed()):yf.keep()},ex=(n,i,s,d)=>Jk(n,i,s,d,d).fold(ee(d),u=>(n.dom.createFragment().appendChild(d),n.dom.rename(d,u)),ee(null)),_O=(n,i,s,d,u)=>{(d||n.selection.isEditable())&&((f,v,_,k,T)=>{const M=f.formatter.get(v),I=M[0],O=f.dom,R=f.selection,N=te=>{const re=((ie,he,fe,ye,Ie)=>{let He;return he.parentNode&&Qe(lg(ie.dom,he.parentNode).reverse(),we=>{if(!He&&nn(we)&&"_start"!==we.id&&"_end"!==we.id){const De=_u(ie,we,fe,ye,Ie);De&&!1!==De.split&&(He=we)}}),He})(f,te,v,_,T);return((ie,he,fe,ye,Ie,He,we,De)=>{var Be,et;let Ye,it;const yt=ie.dom;if(fe){const It=fe.parentNode;for(let qt=ye.parentNode;qt&&qt!==It;qt=qt.parentNode){let Xt=yt.clone(qt,!1);for(let Dt=0;Dt<he.length&&(Xt=ex(ie,he[Dt],De,Xt),null!==Xt);Dt++);Xt&&(Ye&&Xt.appendChild(Ye),it||(it=Xt),Ye=Xt)}we.mixed&&yt.isBlock(fe)||(ye=null!==(Be=yt.split(fe,ye))&&void 0!==Be?Be:ye),Ye&&it&&(null===(et=Ie.parentNode)||void 0===et||et.insertBefore(Ye,Ie),it.appendChild(Ie),ca(we)&&or(ie,we,0,Ye))}return ye})(f,M,re,te,te,0,I,_)},z=te=>_n(M,re=>tx(f,re,_,te,te)),L=te=>{const re=Go(te.childNodes),ie=z(te)||_n(M,fe=>tw(O,te,fe)),he=te.parentNode;if(!ie&&ae(he)&&hu(I)&&z(he),I.deep&&re.length)for(let fe=0;fe<re.length;fe++)L(re[fe]);Qe(["underline","line-through","overline"],fe=>{nn(te)&&f.dom.getStyle(te,"text-decoration")===fe&&te.parentNode&&sg(O,te.parentNode)===fe&&tx(f,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:fe}},void 0,te)})},V=te=>{const re=O.get(te?"_start":"_end");if(re){let ie=re[te?"firstChild":"lastChild"];return Xr(he=ie)&&nn(he)&&("_start"===he.id||"_end"===he.id)&&(ie=ie[te?"firstChild":"lastChild"]),Mt(ie)&&0===ie.data.length&&(ie=te?re.previousSibling||re.nextSibling:re.nextSibling||re.previousSibling),O.remove(re,!0),ie}var he;return null},J=te=>{let re,ie,he=_p(O,te,M,te.collapsed);if(I.split){if(he=wp(he),re=F0(f,he,!0),ie=F0(f,he),re!==ie){if(re=Zk(re,!0),ie=Zk(ie,!1),Xk(O,re,ie)){const ye=ue.from(re.firstChild).getOr(re);return N(bf(O,ye,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void V(!0)}if(Xk(O,ie,re)){const ye=ue.from(ie.lastChild).getOr(ie);return N(bf(O,ye,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void V(!1)}re=sw(O,re,"span",{id:"_start","data-mce-type":"bookmark"}),ie=sw(O,ie,"span",{id:"_end","data-mce-type":"bookmark"});const fe=O.createRng();fe.setStartAfter(re),fe.setEndBefore(ie),Ab(O,fe,ye=>{Qe(ye,Ie=>{Xr(Ie)||Xr(Ie.parentNode)||N(Ie)})}),N(re),N(ie),re=V(!0),ie=V()}else re=ie=N(re);he.startContainer=re.parentNode?re.parentNode:re,he.startOffset=O.nodeIndex(re),he.endContainer=ie.parentNode?ie.parentNode:ie,he.endOffset=O.nodeIndex(ie)+1}Ab(O,he,fe=>{Qe(fe,L)})};if(k){if(Us(k)){const te=O.createRng();te.setStartBefore(k),te.setEndAfter(k),J(te)}else J(k);y0(f,v,k,_)}else R.isCollapsed()&&ca(I)&&!Tb(f).length?((n,i,s,d)=>{const u=n.dom,f=n.selection;let v=!1;const _=n.formatter.get(i);if(!_)return;const k=f.getRng(),T=k.startContainer,M=k.startOffset;let I=T;Mt(T)&&(M!==T.data.length&&(v=!0),I=I.parentNode);const O=[];let R;for(;I;){if(_u(n,I,i,s,d)){R=I;break}I.nextSibling&&(v=!0),O.push(I),I=I.parentNode}if(R)if(v){const N=f.getBookmark();k.collapse(!0);let z=_p(u,k,_,!0);z=wp(z),n.formatter.remove(i,s,z,d),f.moveToBookmark(N)}else{const N=mp(n.getBody(),R),z=ae(N)?u.getParents(R.parentNode,Wt,N):[],L=nw(!1).dom;((te,re,ie)=>{var he,fe;const ye=te.dom,Ie=ye.getParent(ie,We(b_,te.schema));Ie&&ye.isEmpty(Ie)?null===(he=ie.parentNode)||void 0===he||he.replaceChild(re,ie):((He=>{const we=jo(He,"br"),De=dn((Be=>{const et=[];let Ye=Be.dom;for(;Ye;)et.push(Ze(Ye)),Ye=Ye.lastChild;return et})(He).slice(-1),tp);we.length===De.length&&Qe(De,Ke)})(Ze(ie)),ye.isEmpty(ie)?null===(fe=ie.parentNode)||void 0===fe||fe.replaceChild(re,ie):ye.insertAfter(re,ie))})(n,L,N??R);const V=((te,re,ie,he,fe,ye)=>{const Ie=te.formatter,He=te.dom,we=dn(Ur(Ie.get()),Be=>Be!==he&&!Rt(Be,"removeformat")),De=(Be=te,et=ie,Oo(we,(it,yt)=>{const It=$m(Be,yt,Dt=>{const en=qe=>Ge(qe)||qe.length>1&&"%"===qe.charAt(0);return _n(["styles","attributes"],qe=>go(Dt,qe).exists(Je=>{const gt=K(Je)?Je:ir(Je);return _n(gt,en)}))});return Be.formatter.matchNode(et,yt,{},It)?it.concat([yt]):it},[]));var Be,et;if(dn(De,Be=>!((et,Ye,it)=>{const yt=["inline","block","selector","attributes","styles","classes"],It=qt=>pa(qt,(Xt,Dt)=>_n(yt,en=>en===Dt));return $m(et,Ye,qt=>{const Xt=It(qt);return $m(et,it,Dt=>{const en=It(Dt);return((qe,Je,gt=Q)=>Ve(gt).eq(qe,Je))(Xt,en)})})})(te,Be,he)).length>0){const Be=ie.cloneNode(!1);return He.add(re,Be),Ie.remove(he,fe,Be,ye),He.remove(Be),ue.some(Be)}return ue.none()})(n,L,R,i,s,d),J=As([...O,...V.toArray(),...z],L);N&&ow(n,N,ae(N)),f.setCursorLocation(J,1),Gk(n,L),u.isEmpty(R)&&u.remove(R)}})(f,v,_,T):(y_(f,()=>Ba(f,J),te=>ca(I)&&L0(f,v,_,te)),f.nodeChanged()),te=f,ie=_,"removeformat"===(re=v)?Qe(yc(te.selection),he=>{Qe(rw,fe=>te.dom.setStyle(he,fe,"")),b2(te.dom,he)}):fg(te.formatter,re).each(he=>{Qe(yc(te.selection),fe=>x2(te.dom,fe,he,ie,null))}),y0(f,v,k,_);var te,re,ie})(n,i,s,d,u)},tx=(n,i,s,d,u)=>Jk(n,i,s,d,u).fold(Bt,f=>(n.dom.rename(d,f),!0),Wt),wO=zt.each,Qk=zt.each,_2=(n,i,s,d)=>{if(Qk(s.styles,(u,f)=>{n.setStyle(i,f,ah(u,d))}),s.styles){const u=n.getAttrib(i,"style");u&&n.setAttrib(i,"data-mce-style",u)}},w2=(n,i,s,d)=>{const u=n.formatter.get(i),f=u[0],v=!d&&n.selection.isCollapsed(),_=n.dom,k=n.selection,T=(N,z=f)=>{Ge(z.onformat)&&z.onformat(N,z,s,d),_2(_,N,z,s),Qk(z.attributes,(L,V)=>{_.setAttrib(N,V,ah(L,s))}),Qk(z.classes,L=>{const V=ah(L,s);_.hasClass(N,V)||_.addClass(N,V)})},M=(N,z)=>{let L=!1;return Qk(N,V=>!(!Ho(V)||("false"!==_.getContentEditable(z)||V.ceFalseOverride)&&(!ae(V.collapsed)||V.collapsed===v)&&_.is(z,V.selector)&&!Nr(z)&&(T(z,V),L=!0,1))),L},O=(N,z,L)=>{const V=[];let J=!0;const te=f.inline||f.block,re=(N=>{if(Y(N)){const z=_.create(N);return T(z),z}return null})(te);Ab(N,z,ie=>{let he;const fe=ye=>{let Ie=!1,He=J,we=!1;const De=ye.parentNode,Be=De.nodeName.toLowerCase(),et=N.getContentEditable(ye);ae(et)&&(He=J,J="true"===et,Ie=!0,we=m0(n,ye));const Ye=J&&!Ie;if(Bn(ye)&&!((it,yt,It,qt)=>{if(qD(it)&&ca(yt)&&It.parentNode){const Xt=Zn(it.schema),Dt=((n,i)=>((s,d)=>{const u=s.dom;return u.parentNode?(f=Ze(u.parentNode),Qo(f.dom.childNodes,_=>(f=>!To(s,f)&&d(f))(Ze(_))).map(Ze)):ue.none();var f})(n,i).isSome())(Ze(It),en=>Nr(en.dom));return Jd(Xt,qt)&&Tr(it.schema,It.parentNode,{skipBogus:!1,includeZwsp:!0})&&!Dt}return!1})(n,f,ye,Be))return he=null,void(mc(f)&&N.remove(ye));if(it=ye,mc(yt=f)&&!0===yt.wrapper&&_u(n,it,i,s))he=null;else{if(((it,yt,It)=>{const qt=mc(Xt=f)&&!0!==Xt.wrapper&&b_(n.schema,it)&&la(n,yt,te);var Xt;return It&&qt})(ye,Be,Ye)){const it=N.rename(ye,te);return T(it),V.push(it),void(he=null)}if(Ho(f)){let it=M(u,ye);if(!it&&ae(De)&&hu(f)&&(it=M(u,De)),!ca(f)||it)return void(he=null)}ae(re)&&((it,yt,It,qt)=>{const Xt=it.nodeName.toLowerCase(),Dt=la(n,te,Xt)&&la(n,yt,te),en=!L&&Mt(it)&&pl(it.data),qe=Nr(it),Je=!ca(f)||!N.isBlock(it);return(It||qt)&&Dt&&!en&&!qe&&Je})(ye,Be,Ye,we)?(he||(he=N.clone(re,!1),De.insertBefore(he,ye),V.push(he)),we&&Ie&&(J=He),he.appendChild(ye)):(he=null,Qe(Go(ye.childNodes),fe),Ie&&(J=He),he=null)}var it,yt};Qe(ie,fe)}),!0===f.links&&Qe(V,ie=>{const he=fe=>{"A"===fe.nodeName&&T(fe,f),Qe(Go(fe.childNodes),he)};he(ie)}),Qe(V,ie=>{const he=(fe=>{let ye=0;return Qe(fe.childNodes,Ie=>{var He;ae(He=Ie)&&Mt(He)&&0===He.length||Xr(Ie)||ye++}),ye})(ie);var fe;!(V.length>1)&&N.isBlock(ie)||0!==he?(ca(f)||mc(f)&&f.wrapper)&&(f.exact||1!==he||(ie=Qo((fe=ie).childNodes,p0).filter(Ie=>"false"!==N.getContentEditable(Ie)&&tw(N,Ie,f)).map(Ie=>{const He=N.clone(Ie,!1);return T(He),N.replace(He,fe,!0),N.remove(Ie,!0),He}).getOr(fe)),((fe,ye,Ie,He)=>{wO(ye,we=>{var De,Be,et;ca(we)&&wO(fe.dom.select(we.inline,He),De=>{z0(De)&&tx(fe,we,Ie,De,we.exact?De:null)}),De=fe.dom,et=He,(Be=we).clear_child_styles&&Sl(De.select(Be.links?"*:not(a)":"*",et),it=>{z0(it)&&De.isEditable(it)&&Sl(Be.styles,(yt,It)=>{De.setStyle(it,It,"")})})})})(n,u,s,ie),((fe,ye,Ie,He,we)=>{const De=we.parentNode;_u(fe,De,Ie,He)&&tx(fe,ye,He,we)||ye.merge_with_parents&&De&&fe.dom.getParent(De,Be=>!!_u(fe,Be,Ie,He)&&(tx(fe,ye,He,we),!0))})(n,f,i,s,ie),((fe,ye,Ie,He)=>{if(ye.styles&&ye.styles.backgroundColor){const we=td(fe,"fontSize");Ep(He,De=>we(De)&&fe.isEditable(De),gh(fe,"backgroundColor",ah(ye.styles.backgroundColor,Ie)))}})(N,f,s,ie),((fe,ye,Ie,He)=>{const we=De=>{if(Ei(De)&&nn(De.parentNode)&&fe.isEditable(De)){const Be=sg(fe,De.parentNode);fe.getStyle(De,"color")&&Be?fe.setStyle(De,"text-decoration",Be):fe.getStyle(De,"text-decoration")===Be&&fe.setStyle(De,"text-decoration",null)}};ye.styles&&(ye.styles.color||ye.styles.textDecoration)&&(zt.walk(He,we,"childNodes"),we(He))})(N,f,0,ie),((fe,ye,Ie,He)=>{if(ca(ye)&&("sub"===ye.inline||"sup"===ye.inline)){const we=td(fe,"fontSize");Ep(He,Be=>we(Be)&&fe.isEditable(Be),gh(fe,"fontSize",""));const De=dn(fe.select("sup"===ye.inline?"sub":"sup",He),fe.isEditable);fe.remove(De,!0)}})(N,f,0,ie),or(n,f,0,ie)):N.remove(ie,!0)})},R=Us(d)?d:k.getNode();if("false"===_.getContentEditable(R)&&!m0(n,R))return M(u,d=R),void T_(n,i,d,s);if(f){if(d)if(Us(d)){if(!M(u,d)){const N=_.createRng();N.setStartBefore(d),N.setEndAfter(d),O(_,_p(_,N,u),!0)}}else O(_,d,!0);else v&&ca(f)&&!Tb(n).length?((N,z,L)=>{let V;const J=N.selection,te=N.formatter.get(z);if(!te)return;const re=J.getRng();let ie=re.startOffset;const he=re.startContainer.nodeValue;V=mp(N.getBody(),J.getStart());const fe=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(he&&ie>0&&ie<he.length&&fe.test(he.charAt(ie))&&fe.test(he.charAt(ie-1))){const He=J.getBookmark();re.collapse(!0);let we=_p(N.dom,re,te);we=wp(we),N.formatter.apply(z,L,we),J.moveToBookmark(He)}else{let He=V?f2(V):null;V&&He?.data===vr||(ye=N.getDoc(),Ie=nw(!0).dom,V=ye.importNode(Ie,!0),He=V.firstChild,re.insertNode(V),ie=1,Gk(N,V)),N.formatter.apply(z,L,V),J.setCursorLocation(He,ie)}var ye,Ie})(n,i,s):(k.setRng(Hk(k.getRng())),y_(n,()=>{Ba(n,(N,z)=>{const L=z?N:_p(_,N,u);O(_,L,!1)})},Wt),n.nodeChanged()),fg(n.formatter,i).each(N=>{var z;Qe(dn((L=>{const V=L.getSelectedBlocks(),J=L.getRng();if(L.isCollapsed())return[];if(1===V.length)return B0(J,V[0])&&hh(J,V[0])?V:[];{const te=Rn(V).filter(he=>B0(J,he)).toArray(),re=wi(V).filter(he=>hh(J,he)).toArray(),ie=V.slice(1,-1);return te.concat(ie).concat(re)}})(z=n.selection),Jb(z.dom)),z=>_2(_,z,N,s))});z=n,Ln(zd,N=i)&&Qe(zd[N],L=>{L(z)})}var N,z;T_(n,i,d,s)},eT=(n,i,s,d)=>{(d||n.selection.isEditable())&&w2(n,i,s,d)},lw=n=>Ln(n,"vars"),tT=n=>n.selection.getStart(),cw=(n,i,s,d,u)=>_i(i,f=>{const v=n.formatter.matchNode(f,s,u??{},d);return!pe(v)},f=>!!N0(n,f,s)||!d&&ae(n.formatter.matchNode(f,s,u,!0))),nd=(n,i)=>{const s=i??tT(n);return dn(lg(n.dom,s),d=>nn(d)&&!Yi(d))},dw=(n,i,s)=>{const d=nd(n,i);ho(s,(u,f)=>{const v=_=>{const k=cw(n,d,f,_.similar,lw(_)?_.vars:void 0),T=k.isSome();if(_.state.get()!==T){_.state.set(T);const M=k.getOr(i);lw(_)?_.callback(T,{node:M,format:f,parents:d}):Qe(_.callbacks,I=>I(T,{node:M,format:f,parents:d}))}};Qe([u.withSimilar,u.withoutSimilar],v),Qe(u.withVars,v)})},nT=zt.explode,uw=()=>{const n={};return{addFilter:(i,s)=>{Qe(nT(i),d=>{Ln(n,d)||(n[d]={name:d,callbacks:[]}),n[d].callbacks.push(s)})},getFilters:()=>ir(n),removeFilter:(i,s)=>{Qe(nT(i),d=>{if(Ln(n,d))if(ae(s)){const u=n[d],f=dn(u.callbacks,v=>v!==s);f.length>0?u.callbacks=f:delete n[d]}else delete n[d]})}}},ox=n=>{const[i,...s]=n.split(","),d=s.join(","),u=/data:([^/]+\/[^;]+)(;.+)?/.exec(i);if(u){const f=";base64"===u[2],v=f?(_=>{const k=/([a-z0-9+\/=\s]+)/i.exec(_);return k?k[1]:""})(d):decodeURIComponent(d);return ue.some({type:u[1],data:v,base64Encoded:f})}return ue.none()},oT=(n,i,s=!0)=>{let d=i;if(s)try{d=atob(i)}catch{return ue.none()}const u=new Uint8Array(d.length);for(let f=0;f<u.length;f++)u[f]=d.charCodeAt(f);return ue.some(new Blob([u],{type:n}))},rT=n=>new Promise((i,s)=>{const d=new FileReader;d.onloadend=()=>{i(d.result)},d.onerror=()=>{var u;s(null===(u=d.error)||void 0===u?void 0:u.message)},d.readAsDataURL(n)});let S2=0;const Zl=(n,i,s)=>ox(n).bind(({data:d,type:u,base64Encoded:f})=>{if(i&&!f)return ue.none();{const v=f?d:btoa(d);return s(v,u)}}),C2=(n,i,s)=>{const d=n.create("blobid"+S2++,i,s);return n.add(d),d},rx=(n,i,s=!1)=>Zl(i,s,(d,u)=>ue.from(n.getByData(d,u)).orThunk(()=>oT(u,d).map(f=>C2(n,f,d)))),xf=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,iT=n=>ue.from(n.match(xf)).bind(i=>ao(i,1)).map(i=>gn(i,"www.")?i.substring(4):i),Cl=(n,i)=>{ue.from(n.attr("src")).bind(iT).forall(s=>!Jt(i,s))&&n.attr("sandbox","")},ix=(n,i)=>gn(n,`${i}/`),{entries:ax,setPrototypeOf:aT,isFrozen:SO,getPrototypeOf:sx,getOwnPropertyDescriptor:lx}=Object;let{freeze:ds,seal:od,create:_f}=Object,{apply:sT,construct:lT}=typeof Reflect<"u"&&Reflect;ds||(ds=function(n){return n}),od||(od=function(n){return n}),sT||(sT=function(n,i,s){return n.apply(i,s)}),lT||(lT=function(n,i){return new n(...i)});const hw=rd(Array.prototype.forEach),k2=rd(Array.prototype.pop),Np=rd(Array.prototype.push),wu=rd(String.prototype.toLowerCase),Rp=rd(String.prototype.toString),CO=rd(String.prototype.match),wf=rd(String.prototype.replace),kO=rd(String.prototype.indexOf),T2=rd(String.prototype.trim),xc=rd(Object.prototype.hasOwnProperty),qs=rd(RegExp.prototype.test),Fd=(M2=TypeError,function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return lT(M2,i)});var M2;function rd(n){return function(i){for(var s=arguments.length,d=new Array(s>1?s-1:0),u=1;u<s;u++)d[u-1]=arguments[u];return sT(n,i,d)}}function pr(n,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wu;aT&&aT(n,null);let d=i.length;for(;d--;){let u=i[d];if("string"==typeof u){const f=s(u);f!==u&&(SO(i)||(i[d]=f),u=f)}n[u]=!0}return n}function gw(n){for(let i=0;i<n.length;i++)xc(n,i)||(n[i]=null);return n}function Lp(n){const i=_f(null);for(const[s,d]of ax(n))xc(n,s)&&(i[s]=Array.isArray(d)?gw(d):d&&"object"==typeof d&&d.constructor===Object?Lp(d):d);return i}function V0(n,i){for(;null!==n;){const s=lx(n,i);if(s){if(s.get)return rd(s.get);if("function"==typeof s.value)return rd(s.value)}n=sx(n)}return function(){return null}}const A2=ds(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Sf=ds(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Cf=ds(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),H0=ds(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),pw=ds(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),mw=ds(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),fw=ds(["#text"]),W0=ds(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Vd=ds(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),TO=ds(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),U0=ds(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hi=od(/\{\{[\w\W]*|[\w\W]*\}\}/gm),cT=od(/<%[\w\W]*|[\w\W]*%>/gm),dT=od(/\${[\w\W]*}/gm),$s=od(/^data-[\-\w.\u00B7-\uFFFF]/),MO=od(/^aria-[\-\w]+$/),I2=od(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vw=od(/^(?:\w+script|data):/i),oN=od(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),AO=od(/^html$/i),kf=od(/^[a-z][.\w]*(-[.\w]+)+$/i);var IO=Object.freeze({__proto__:null,MUSTACHE_EXPR:hi,ERB_EXPR:cT,TMPLIT_EXPR:dT,DATA_ATTR:$s,ARIA_ATTR:MO,IS_ALLOWED_URI:I2,IS_SCRIPT_OR_DATA:vw,ATTR_WHITESPACE:oN,DOCTYPE_NAME:AO,CUSTOM_ELEMENT:kf});const G0=function(){return typeof window>"u"?null:window};var uT=function n(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G0();const s=at=>n(at);if(s.version="3.1.7",s.removed=[],!i||!i.document||9!==i.document.nodeType)return s.isSupported=!1,s;let{document:d}=i;const u=d,f=u.currentScript,{DocumentFragment:v,HTMLTemplateElement:_,Node:k,Element:T,NodeFilter:M,NamedNodeMap:I=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:O,DOMParser:R,trustedTypes:N}=i,z=T.prototype,L=V0(z,"cloneNode"),V=V0(z,"remove"),J=V0(z,"nextSibling"),te=V0(z,"childNodes"),re=V0(z,"parentNode");if("function"==typeof _){const at=d.createElement("template");at.content&&at.content.ownerDocument&&(d=at.content.ownerDocument)}let ie,he="";const{implementation:fe,createNodeIterator:ye,createDocumentFragment:Ie,getElementsByTagName:He}=d,{importNode:we}=u;let De={};s.isSupported="function"==typeof ax&&"function"==typeof re&&fe&&void 0!==fe.createHTMLDocument;const{MUSTACHE_EXPR:Be,ERB_EXPR:et,TMPLIT_EXPR:Ye,DATA_ATTR:it,ARIA_ATTR:yt,IS_SCRIPT_OR_DATA:It,ATTR_WHITESPACE:qt,CUSTOM_ELEMENT:Xt}=IO;let{IS_ALLOWED_URI:Dt}=IO,en=null;const qe=pr({},[...A2,...Sf,...Cf,...pw,...fw]);let Je=null;const gt=pr({},[...W0,...Vd,...TO,...U0]);let ht=Object.seal(_f(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Zt=null,Ut=null,Mn=!0,In=!0,Jn=!1,wr=!0,pi=!1,Zd=!0,un=!1,ro=!1,Co=!1,qn=!1,er=!1,Sr=!1,sn=!0,Hn=!1,Lr=!0,Ir=!1,Gi={},Js=null;const Pg=pr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ps=null;const zu=pr({},["audio","video","img","source","image","track"]);let ms=null;const I1=pr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Py="http://www.w3.org/1998/Math/MathML",Sv="http://www.w3.org/2000/svg",Oh="http://www.w3.org/1999/xhtml";let D1=Oh,By=!1,nm=null;const iA=pr({},[Py,Sv,Oh],Rp);let Dc=null;const JS=["application/xhtml+xml","text/html"];let Ta=null,Cv=null;const FN=d.createElement("form"),PE=function(at){return at instanceof RegExp||at instanceof Function},aA=function(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Cv||Cv!==at){if(at&&"object"==typeof at||(at={}),at=Lp(at),Dc=-1===JS.indexOf(at.PARSER_MEDIA_TYPE)?"text/html":at.PARSER_MEDIA_TYPE,Ta="application/xhtml+xml"===Dc?Rp:wu,en=xc(at,"ALLOWED_TAGS")?pr({},at.ALLOWED_TAGS,Ta):qe,Je=xc(at,"ALLOWED_ATTR")?pr({},at.ALLOWED_ATTR,Ta):gt,nm=xc(at,"ALLOWED_NAMESPACES")?pr({},at.ALLOWED_NAMESPACES,Rp):iA,ms=xc(at,"ADD_URI_SAFE_ATTR")?pr(Lp(I1),at.ADD_URI_SAFE_ATTR,Ta):I1,ps=xc(at,"ADD_DATA_URI_TAGS")?pr(Lp(zu),at.ADD_DATA_URI_TAGS,Ta):zu,Js=xc(at,"FORBID_CONTENTS")?pr({},at.FORBID_CONTENTS,Ta):Pg,Zt=xc(at,"FORBID_TAGS")?pr({},at.FORBID_TAGS,Ta):{},Ut=xc(at,"FORBID_ATTR")?pr({},at.FORBID_ATTR,Ta):{},Gi=!!xc(at,"USE_PROFILES")&&at.USE_PROFILES,Mn=!1!==at.ALLOW_ARIA_ATTR,In=!1!==at.ALLOW_DATA_ATTR,Jn=at.ALLOW_UNKNOWN_PROTOCOLS||!1,wr=!1!==at.ALLOW_SELF_CLOSE_IN_ATTR,pi=at.SAFE_FOR_TEMPLATES||!1,Zd=!1!==at.SAFE_FOR_XML,un=at.WHOLE_DOCUMENT||!1,qn=at.RETURN_DOM||!1,er=at.RETURN_DOM_FRAGMENT||!1,Sr=at.RETURN_TRUSTED_TYPE||!1,Co=at.FORCE_BODY||!1,sn=!1!==at.SANITIZE_DOM,Hn=at.SANITIZE_NAMED_PROPS||!1,Lr=!1!==at.KEEP_CONTENT,Ir=at.IN_PLACE||!1,Dt=at.ALLOWED_URI_REGEXP||I2,D1=at.NAMESPACE||Oh,ht=at.CUSTOM_ELEMENT_HANDLING||{},at.CUSTOM_ELEMENT_HANDLING&&PE(at.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ht.tagNameCheck=at.CUSTOM_ELEMENT_HANDLING.tagNameCheck),at.CUSTOM_ELEMENT_HANDLING&&PE(at.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ht.attributeNameCheck=at.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),at.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof at.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ht.allowCustomizedBuiltInElements=at.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),pi&&(In=!1),er&&(qn=!0),Gi&&(en=pr({},fw),Je=[],!0===Gi.html&&(pr(en,A2),pr(Je,W0)),!0===Gi.svg&&(pr(en,Sf),pr(Je,Vd),pr(Je,U0)),!0===Gi.svgFilters&&(pr(en,Cf),pr(Je,Vd),pr(Je,U0)),!0===Gi.mathMl&&(pr(en,pw),pr(Je,TO),pr(Je,U0))),at.ADD_TAGS&&(en===qe&&(en=Lp(en)),pr(en,at.ADD_TAGS,Ta)),at.ADD_ATTR&&(Je===gt&&(Je=Lp(Je)),pr(Je,at.ADD_ATTR,Ta)),at.ADD_URI_SAFE_ATTR&&pr(ms,at.ADD_URI_SAFE_ATTR,Ta),at.FORBID_CONTENTS&&(Js===Pg&&(Js=Lp(Js)),pr(Js,at.FORBID_CONTENTS,Ta)),Lr&&(en["#text"]=!0),un&&pr(en,["html","head","body"]),en.table&&(pr(en,["tbody"]),delete Zt.tbody),at.TRUSTED_TYPES_POLICY){if("function"!=typeof at.TRUSTED_TYPES_POLICY.createHTML)throw Fd('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof at.TRUSTED_TYPES_POLICY.createScriptURL)throw Fd('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ie=at.TRUSTED_TYPES_POLICY,he=ie.createHTML("")}else void 0===ie&&(ie=function(co,Un){if("object"!=typeof co||"function"!=typeof co.createPolicy)return null;let Wr=null;const oi="data-tt-policy-suffix";Un&&Un.hasAttribute(oi)&&(Wr=Un.getAttribute(oi));const Cr="dompurify"+(Wr?"#"+Wr:"");try{return co.createPolicy(Cr,{createHTML:Qs=>Qs,createScriptURL:Qs=>Qs})}catch{return console.warn("TrustedTypes policy "+Cr+" could not be created."),null}}(N,f)),null!==ie&&"string"==typeof he&&(he=ie.createHTML(""));ds&&ds(at),Cv=at}},ND=pr({},["mi","mo","mn","ms","mtext"]),kv=pr({},["annotation-xml"]),BE=pr({},["title","style","font","a","script"]),QS=pr({},[...Sf,...Cf,...H0]),yN=pr({},[...pw,...mw]),om=function(at){Np(s.removed,{element:at});try{re(at).removeChild(at)}catch{V(at)}},eC=function(at,co){try{Np(s.removed,{attribute:co.getAttributeNode(at),from:co})}catch{Np(s.removed,{attribute:null,from:co})}if(co.removeAttribute(at),"is"===at&&!Je[at])if(qn||er)try{om(co)}catch{}else try{co.setAttribute(at,"")}catch{}},RD=function(at){let co=null,Un=null;if(Co)at="<remove></remove>"+at;else{const Cr=CO(at,/^[\r\n\t ]+/);Un=Cr&&Cr[0]}"application/xhtml+xml"===Dc&&D1===Oh&&(at='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+at+"</body></html>");const Wr=ie?ie.createHTML(at):at;if(D1===Oh)try{co=(new R).parseFromString(Wr,Dc)}catch{}if(!co||!co.documentElement){co=fe.createDocument(D1,"template",null);try{co.documentElement.innerHTML=By?he:Wr}catch{}}const oi=co.body||co.documentElement;return at&&Un&&oi.insertBefore(d.createTextNode(Un),oi.childNodes[0]||null),D1===Oh?He.call(co,un?"html":"body")[0]:un?co.documentElement:oi},zy=function(at){return ye.call(at.ownerDocument||at,at,M.SHOW_ELEMENT|M.SHOW_COMMENT|M.SHOW_TEXT|M.SHOW_PROCESSING_INSTRUCTION|M.SHOW_CDATA_SECTION,null)},O1=function(at){return at instanceof O&&("string"!=typeof at.nodeName||"string"!=typeof at.textContent||"function"!=typeof at.removeChild||!(at.attributes instanceof I)||"function"!=typeof at.removeAttribute||"function"!=typeof at.setAttribute||"string"!=typeof at.namespaceURI||"function"!=typeof at.insertBefore||"function"!=typeof at.hasChildNodes)},bN=function(at){return"function"==typeof k&&at instanceof k},Fy=function(at,co,Un){De[at]&&hw(De[at],Wr=>{Wr.call(s,co,Un,Cv)})},xN=function(at){let co=null;if(Fy("beforeSanitizeElements",at,null),O1(at))return om(at),!0;const Un=Ta(at.nodeName);if(Fy("uponSanitizeElement",at,{tagName:Un,allowedTags:en}),at.hasChildNodes()&&!bN(at.firstElementChild)&&qs(/<[/\w]/g,at.innerHTML)&&qs(/<[/\w]/g,at.textContent)||7===at.nodeType||Zd&&8===at.nodeType&&qs(/<[/\w]/g,at.data))return om(at),!0;if(!en[Un]||Zt[Un]){if(!Zt[Un]&&AN(Un)&&(ht.tagNameCheck instanceof RegExp&&qs(ht.tagNameCheck,Un)||ht.tagNameCheck instanceof Function&&ht.tagNameCheck(Un)))return!1;if(Lr&&!Js[Un]){const Wr=re(at)||at.parentNode,oi=te(at)||at.childNodes;if(oi&&Wr)for(let Cr=oi.length-1;Cr>=0;--Cr){const Qs=L(oi[Cr],!0);Qs.__removalCount=(at.__removalCount||0)+1,Wr.insertBefore(Qs,J(at))}}return om(at),!0}return at instanceof T&&!function(Wr){let oi=re(Wr);oi&&oi.tagName||(oi={namespaceURI:D1,tagName:"template"});const Cr=wu(Wr.tagName),Qs=wu(oi.tagName);return!!nm[Wr.namespaceURI]&&(Wr.namespaceURI===Sv?oi.namespaceURI===Oh?"svg"===Cr:oi.namespaceURI===Py?"svg"===Cr&&("annotation-xml"===Qs||ND[Qs]):Boolean(QS[Cr]):Wr.namespaceURI===Py?oi.namespaceURI===Oh?"math"===Cr:oi.namespaceURI===Sv?"math"===Cr&&kv[Qs]:Boolean(yN[Cr]):Wr.namespaceURI===Oh?!(oi.namespaceURI===Sv&&!kv[Qs])&&!(oi.namespaceURI===Py&&!ND[Qs])&&!yN[Cr]&&(BE[Cr]||!QS[Cr]):!("application/xhtml+xml"!==Dc||!nm[Wr.namespaceURI]))}(at)?(om(at),!0):"noscript"!==Un&&"noembed"!==Un&&"noframes"!==Un||!qs(/<\/no(script|embed|frames)/i,at.innerHTML)?(pi&&3===at.nodeType&&(co=at.textContent,hw([Be,et,Ye],Wr=>{co=wf(co,Wr," ")}),at.textContent!==co&&(Np(s.removed,{element:at.cloneNode()}),at.textContent=co)),Fy("afterSanitizeElements",at,null),!1):(om(at),!0)},MN=function(at,co,Un){if(sn&&("id"===co||"name"===co)&&(Un in d||Un in FN))return!1;if((!In||Ut[co]||!qs(it,co))&&(!Mn||!qs(yt,co)))if(!Je[co]||Ut[co]){if(!(AN(at)&&(ht.tagNameCheck instanceof RegExp&&qs(ht.tagNameCheck,at)||ht.tagNameCheck instanceof Function&&ht.tagNameCheck(at))&&(ht.attributeNameCheck instanceof RegExp&&qs(ht.attributeNameCheck,co)||ht.attributeNameCheck instanceof Function&&ht.attributeNameCheck(co))||"is"===co&&ht.allowCustomizedBuiltInElements&&(ht.tagNameCheck instanceof RegExp&&qs(ht.tagNameCheck,Un)||ht.tagNameCheck instanceof Function&&ht.tagNameCheck(Un))))return!1}else if(!ms[co]&&!qs(Dt,wf(Un,qt,""))&&("src"!==co&&"xlink:href"!==co&&"href"!==co||"script"===at||0!==kO(Un,"data:")||!ps[at])&&(!Jn||qs(It,wf(Un,qt,"")))&&Un)return!1;return!0},AN=function(at){return"annotation-xml"!==at&&CO(at,Xt)},IN=function(at){Fy("beforeSanitizeAttributes",at,null);const{attributes:co}=at;if(!co)return;const Un={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Je};let Wr=co.length;for(;Wr--;){const oi=co[Wr],{name:Cr,namespaceURI:Qs,value:rm}=oi,im=Ta(Cr);let kl="value"===Cr?rm:T2(rm);const VN=kl;if(Un.attrName=im,Un.attrValue=kl,Un.keepAttr=!0,Un.forceKeepAttr=void 0,Fy("uponSanitizeAttribute",at,Un),kl=Un.attrValue,Un.forceKeepAttr)continue;if(!Un.keepAttr){eC(Cr,at);continue}if(!wr&&qs(/\/>/i,kl)){eC(Cr,at);continue}pi&&hw([Be,et,Ye],DN=>{kl=wf(kl,DN," ")});const wN=Ta(at.nodeName);if(MN(wN,im,kl))if(!Hn||"id"!==im&&"name"!==im||(eC(Cr,at),kl="user-content-"+kl),Zd&&qs(/((--!?|])>)|<\/(style|title)/i,kl))eC(Cr,at);else{if(ie&&"object"==typeof N&&"function"==typeof N.getAttributeType&&!Qs)switch(N.getAttributeType(wN,im)){case"TrustedHTML":kl=ie.createHTML(kl);break;case"TrustedScriptURL":kl=ie.createScriptURL(kl)}if(kl!==VN)try{Qs?at.setAttributeNS(Qs,Cr,kl):at.setAttribute(Cr,kl),O1(at)?om(at):k2(s.removed)}catch{}}else eC(Cr,at)}Fy("afterSanitizeAttributes",at,null)},_N=function at(co){let Un=null;const Wr=zy(co);for(Fy("beforeSanitizeShadowDOM",co,null);Un=Wr.nextNode();)Fy("uponSanitizeShadowNode",Un,null),xN(Un)||(Un.content instanceof v&&at(Un.content),IN(Un));Fy("afterSanitizeShadowDOM",co,null)};return s.sanitize=function(at){let co=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Un=null,Wr=null,oi=null,Cr=null;if(By=!at,By&&(at="\x3c!--\x3e"),"string"!=typeof at&&!bN(at)){if("function"!=typeof at.toString)throw Fd("toString is not a function");if("string"!=typeof(at=at.toString()))throw Fd("dirty is not a string, aborting")}if(!s.isSupported)return at;if(ro||aA(co),s.removed=[],"string"==typeof at&&(Ir=!1),Ir){if(at.nodeName){const im=Ta(at.nodeName);if(!en[im]||Zt[im])throw Fd("root node is forbidden and cannot be sanitized in-place")}}else if(at instanceof k)Un=RD("\x3c!----\x3e"),Wr=Un.ownerDocument.importNode(at,!0),1===Wr.nodeType&&"BODY"===Wr.nodeName||"HTML"===Wr.nodeName?Un=Wr:Un.appendChild(Wr);else{if(!qn&&!pi&&!un&&-1===at.indexOf("<"))return ie&&Sr?ie.createHTML(at):at;if(Un=RD(at),!Un)return qn?null:Sr?he:""}Un&&Co&&om(Un.firstChild);const Qs=zy(Ir?at:Un);for(;oi=Qs.nextNode();)xN(oi)||(oi.content instanceof v&&_N(oi.content),IN(oi));if(Ir)return at;if(qn){if(er)for(Cr=Ie.call(Un.ownerDocument);Un.firstChild;)Cr.appendChild(Un.firstChild);else Cr=Un;return(Je.shadowroot||Je.shadowrootmode)&&(Cr=we.call(u,Cr,!0)),Cr}let rm=un?Un.outerHTML:Un.innerHTML;return un&&en["!doctype"]&&Un.ownerDocument&&Un.ownerDocument.doctype&&Un.ownerDocument.doctype.name&&qs(AO,Un.ownerDocument.doctype.name)&&(rm="<!DOCTYPE "+Un.ownerDocument.doctype.name+">\n"+rm),pi&&hw([Be,et,Ye],im=>{rm=wf(rm,im," ")}),ie&&Sr?ie.createHTML(rm):rm},s.setConfig=function(){aA(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),ro=!0},s.clearConfig=function(){Cv=null,ro=!1},s.isValidAttribute=function(at,co,Un){Cv||aA({});const Wr=Ta(at),oi=Ta(co);return MN(Wr,oi,Un)},s.addHook=function(at,co){"function"==typeof co&&(De[at]=De[at]||[],Np(De[at],co))},s.removeHook=function(at){if(De[at])return k2(De[at])},s.removeHooks=function(at){De[at]&&(De[at]=[])},s.removeAllHooks=function(){De={}},s}();const ph=zt.each,yw=zt.trim,id=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Tf={ftp:21,http:80,https:443,mailto:25},Rr=["img","video"],Mf=(n,i,s)=>{const d=(u=>{try{return decodeURIComponent(u)}catch{return unescape(u)}})(i).replace(/\s/g,"");return!n.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(d)||!n.allow_html_data_urls&&(/^data:image\//i.test(d)?(f=s,(ae(u=n.allow_svg_data_urls)?!u:!ae(f)||!Jt(Rr,f))&&/^data:image\/svg\+xml/i.test(d)):/^data:/i.test(d)));var u,f};class ad{static parseDataUri(i){let s;const d=decodeURIComponent(i).split(","),u=/data:([^;]+)/.exec(d[0]);return u&&(s=u[1]),{type:s,data:d[1]}}static isDomSafe(i,s,d={}){if(d.allow_script_urls)return!0;{const u=bm.decode(i).replace(/[\s\u0000-\u001F]+/g,"");return!Mf(d,u,s)}}static getDocumentBaseUrl(i){var s;let d;return d=0!==i.protocol.indexOf("http")&&"file:"!==i.protocol?null!==(s=i.href)&&void 0!==s?s:"":i.protocol+"//"+i.host+i.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(d)&&(d=d.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(d)||(d+="/")),d}constructor(i,s={}){this.path="",this.directory="",i=yw(i),this.settings=s;const d=s.base_uri,u=this;if(/^([\w\-]+):([^\/]{2})/i.test(i)||/^\s*#/.test(i))return void(u.source=i);const f=0===i.indexOf("//");if(0!==i.indexOf("/")||f||(i=(d&&d.protocol||"http")+"://mce_host"+i),!/^[\w\-]*:?\/\//.test(i)){const _=d?d.path:new ad(document.location.href).directory;if(""===d?.protocol)i="//mce_host"+u.toAbsPath(_,i);else{const k=/([^#?]*)([#?]?.*)/.exec(i);k&&(i=(d&&d.protocol||"http")+"://mce_host"+u.toAbsPath(_,k[1])+k[2])}}i=i.replace(/@@/g,"(mce_at)");const v=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(i);v&&ph(id,(_,k)=>{let T=v[k];T&&(T=T.replace(/\(mce_at\)/g,"@@")),u[_]=T}),d&&(u.protocol||(u.protocol=d.protocol),u.userInfo||(u.userInfo=d.userInfo),u.port||"mce_host"!==u.host||(u.port=d.port),u.host&&"mce_host"!==u.host||(u.host=d.host),u.source=""),f&&(u.protocol="")}setPath(i){const s=/^(.*?)\/?(\w+)?$/.exec(i);s&&(this.path=s[0],this.directory=s[1],this.file=s[2]),this.source="",this.getURI()}toRelative(i){if("./"===i)return i;const s=new ad(i,{base_uri:this});if("mce_host"!==s.host&&this.host!==s.host&&s.host||this.port!==s.port||this.protocol!==s.protocol&&""!==s.protocol)return s.getURI();const d=this.getURI(),u=s.getURI();if(d===u||"/"===d.charAt(d.length-1)&&d.substr(0,d.length-1)===u)return d;let f=this.toRelPath(this.path,s.path);return s.query&&(f+="?"+s.query),s.anchor&&(f+="#"+s.anchor),f}toAbsolute(i,s){const d=new ad(i,{base_uri:this});return d.getURI(s&&this.isSameOrigin(d))}isSameOrigin(i){if(this.host==i.host&&this.protocol==i.protocol){if(this.port==i.port)return!0;const s=this.protocol?Tf[this.protocol]:null;if(s&&(this.port||s)==(i.port||s))return!0}return!1}toRelPath(i,s){let d,u,f=0,v="";const _=i.substring(0,i.lastIndexOf("/")).split("/"),k=s.split("/");if(_.length>=k.length)for(d=0,u=_.length;d<u;d++)if(d>=k.length||_[d]!==k[d]){f=d+1;break}if(_.length<k.length)for(d=0,u=k.length;d<u;d++)if(d>=_.length||_[d]!==k[d]){f=d+1;break}if(1===f)return s;for(d=0,u=_.length-(f-1);d<u;d++)v+="../";for(d=f-1,u=k.length;d<u;d++)v+=d!==f-1?"/"+k[d]:k[d];return v}toAbsPath(i,s){let d=0;const u=/\/$/.test(s)?"/":"",f=i.split("/"),v=s.split("/"),_=[];ph(f,I=>{I&&_.push(I)});const k=[];for(let I=v.length-1;I>=0;I--)0!==v[I].length&&"."!==v[I]&&(".."!==v[I]?d>0?d--:k.push(v[I]):d++);const T=_.length-d;let M;return M=T<=0?tn(k).join("/"):_.slice(0,T).join("/")+"/"+tn(k).join("/"),0!==M.indexOf("/")&&(M="/"+M),u&&M.lastIndexOf("/")!==M.length-1&&(M+=u),M}getURI(i=!1){let s;return this.source&&!i||(s="",i||(s+=this.protocol?this.protocol+"://":"//",this.userInfo&&(s+=this.userInfo+"@"),this.host&&(s+=this.host),this.port&&(s+=":"+this.port)),this.path&&(s+=this.path),this.query&&(s+="?"+this.query),this.anchor&&(s+="#"+this.anchor),this.source=s),this.source}}const j0=zt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),hT="data-mce-type";let Kl=0;const Af=(n,i,s,d,u)=>{var f,v,_,k;const T=i.validate,M=s.getSpecialElements();8===n.nodeType&&!i.allow_conditional_comments&&/^\[if/i.test(null!==(f=n.nodeValue)&&void 0!==f?f:"")&&(n.nodeValue=" "+n.nodeValue);const I=null!==(v=u?.tagName)&&void 0!==v?v:n.nodeName.toLowerCase();if("html"!==d&&s.isValid(d))return void(ae(u)&&(u.allowedTags[I]=!0));if(1!==n.nodeType||"body"===I)return;const O=Ze(n),R=Wu(O,hT),N=is(O,"data-mce-bogus");if(!R&&Y(N))return void("all"===N?Ke(O):tt(O));const z=s.getElementRule(I);if(!T||z){if(ae(u)&&(u.allowedTags[I]=!0),T&&z&&!R){if(Qe(null!==(_=z.attributesForced)&&void 0!==_?_:[],L=>{ta(O,L.name,"{$uid}"===L.value?"mce_"+Kl++:L.value)}),Qe(null!==(k=z.attributesDefault)&&void 0!==k?k:[],L=>{Wu(O,L.name)||ta(O,L.name,"{$uid}"===L.value?"mce_"+Kl++:L.value)}),z.attributesRequired&&!_n(z.attributesRequired,L=>Wu(O,L))||z.removeEmptyAttrs&&(L=>{const V=L.dom.attributes;return null==V||0===V.length})(O))return void tt(O);z.outputName&&z.outputName!==I&&((L,V)=>{const J=((re,ie)=>{const he=yr(ie),fe=Mv(re);return nc(he,fe),he})(L,V);ya(L,J);const te=Qr(L);be(J,te),Ke(L)})(O,z.outputName)}}else Ln(M,I)?Ke(O):tt(O)},Pp=(n,i,s,d,u,f)=>"html"!==s&&!hm(d)||!(u in j0&&Mf(n,f,d))&&(!n.validate||i.isValid(d,u)||gn(u,"data-")||gn(u,"aria-")),cx=(n,i)=>n.hasAttribute(hT)&&("id"===i||"class"===i||"style"===i),dx=(n,i)=>n in i.getBoolAttrs(),If=(n,i,s,d)=>{const{attributes:u}=n;for(let f=u.length-1;f>=0;f--){const v=u[f],_=v.name,k=v.value;Pp(i,s,d,n.tagName.toLowerCase(),_,k)||cx(n,_)?dx(_,s)&&n.setAttribute(_,_):n.removeAttribute(_)}},bw=n=>i=>{const s=gm(i);if("svg"===s)(d=>{const f={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(v=>`xlink:${v}`)};uT().sanitize(d,f)})(i);else{if("math"!==s)throw new Error("Not a namespace element");((d,u)=>{const f=uT();f.addHook("uponSanitizeElement",(v,_)=>{var k;const T=null!==(k=_.tagName)&&void 0!==k?k:v.nodeName.toLowerCase(),M=u.allow_mathml_annotation_encodings;if("annotation"===T&&K(M)&&M.length>0){const I=v.getAttribute("encoding");Y(I)&&Jt(M,I)&&(_.allowedTags[T]=!0)}}),f.sanitize(d,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})})(i,n)}},DO=zt.makeMap,ux=zt.extend,OO=(n,i,s,d)=>{const u=n.name,f=u in s&&"title"!==u&&"textarea"!==u&&"noscript"!==u,v=i.childNodes;for(let _=0,k=v.length;_<k;_++){const T=v[_],M=new _l(T.nodeName.toLowerCase(),T.nodeType);if(nn(T)){const I=T.attributes;for(let O=0,R=I.length;O<R;O++){const N=I[O];M.attr(N.name,N.value)}hm(M.name)&&(d(T),M.value=T.innerHTML)}else Mt(T)?(M.value=T.data,f&&(M.raw=!0)):(al(T)||Hh(T)||Hc(T))&&(M.value=T.data);hm(M.name)||OO(M,T,s,d),n.append(M)}},q0=(n={},i=Vl())=>{const s=uw(),d=uw(),u={validate:!0,root_name:"body",sanitize:!0,...n},f=new DOMParser,v=((z,L)=>{const V=(()=>{const J=zl(),te=()=>J.get().map(gm).getOr("html");return{track:re=>($u(re)?J.set(re):J.get().exists(ie=>!ie.contains(re))&&J.clear(),te()),current:te,reset:()=>{J.clear()}}})();if(z.sanitize){const J=((n,i,s)=>{const d=uT();return d.addHook("uponSanitizeElement",(u,f)=>{Af(u,n,i,s.track(u),f)}),d.addHook("uponSanitizeAttribute",(u,f)=>{((v,_,k,T,M)=>{const I=v.tagName.toLowerCase(),{attrName:O,attrValue:R}=M;M.keepAttr=Pp(_,k,T,I,O,R),M.keepAttr?(M.allowedAttributes[O]=!0,dx(O,k)&&(M.attrValue=O),_.allow_svg_data_urls&&gn(R,"data:image/svg+xml")&&(M.forceKeepAttr=!0)):cx(v,O)&&(M.forceKeepAttr=!0)})(u,n,i,s.current(),f)}),d})(z,L,V);return{sanitizeHtmlElement:(re,ie)=>{J.sanitize(re,((he,fe)=>{const ye={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1};return ye.PARSER_MEDIA_TYPE=fe,he.allow_script_urls?ye.ALLOWED_URI_REGEXP=/.*/:he.allow_html_data_urls&&(ye.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),ye})(z,ie)),J.removed=[],V.reset()},sanitizeNamespaceElement:bw(z)}}return{sanitizeHtmlElement:(J,te)=>{const re=document.createNodeIterator(J,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let ie;for(;ie=re.nextNode();){const he=V.track(ie);Af(ie,z,L,he),nn(ie)&&If(ie,z,L,he)}V.reset()},sanitizeNamespaceElement:ve}})(u,i),k=s.getFilters,I=d.getFilters,R=(z,L)=>{const V=Y(L.attr(hT)),J=1===L.type&&!Ln(z,L.name)&&!sc(i,L)&&!hm(L.name);return 3===L.type||J&&!V},N={schema:i,addAttributeFilter:d.addFilter,getAttributeFilters:I,removeAttributeFilter:d.removeFilter,addNodeFilter:s.addFilter,getNodeFilters:k,removeNodeFilter:s.removeFilter,parse:(z,L={})=>{var V;const J=u.validate,te=null!==(V=L.context)&&void 0!==V?V:u.root_name,re=((Be,et,Ye="html")=>{const it="xhtml"===Ye?"application/xhtml+xml":"text/html",yt=Ln(i.getSpecialElements(),et.toLowerCase()),It=yt?`<${et}>${Be}</${et}>`:Be,qt=f.parseFromString("xhtml"===Ye?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${It}</body></html>`:/^[\s]*<head/i.test(Be)||/^[\s]*<html/i.test(Be)||/^[\s]*<!DOCTYPE/i.test(Be)?`<html>${It}</html>`:`<body>${It}</body>`,it).body;return v.sanitizeHtmlElement(qt,it),yt?qt.firstChild:qt})(z,te,L.format);cl(i,re);const ie=new _l(te,11);OO(ie,re,i.getSpecialElements(),v.sanitizeNamespaceElement),re.innerHTML="";const[he,fe]=((Be,et,Ye,it)=>{const yt=Ye.validate,It=et.getNonEmptyElements(),qt=et.getWhitespaceElements(),Xt=ux(DO("script,style,head,html,body,title,meta,param"),et.getBlockElements()),Dt=Zn(et),en=/[ \t\r\n]+/g,qe=/^[ \t\r\n]+/,Je=/[ \t\r\n]+$/,gt=Ut=>{let Mn=Ut.parent;for(;ae(Mn);){if(Mn.name in qt)return!0;Mn=Mn.parent}return!1},ht=Ut=>Ut.name in Xt||sc(et,Ut)||hm(Ut.name)&&Ut.parent===Be,Zt=(Ut,Mn)=>!ae(Mn?Ut.prev:Ut.next)&&!_e(Ut.parent)&&ht(Ut.parent)&&(Ut.parent!==Be||!0===it.isRootContent);return[Ut=>{var Mn,Jn,wr;if(3===Ut.type&&!gt(Ut)){let In=null!==(Mn=Ut.value)&&void 0!==Mn?Mn:"";In=In.replace(en," "),wr=ht,(ae(Jn=Ut.prev)&&(wr(Jn)||"br"===Jn.name)||Zt(Ut,!0))&&(In=In.replace(qe,"")),0===In.length||" "===In&&Ut.prev&&8===Ut.prev.type&&Ut.next&&8===Ut.next.type?Ut.remove():Ut.value=In}},Ut=>{var Mn,wr,pi;if(1===Ut.type){const In=et.getElementRule(Ut.name);if(yt&&In){const Jn=bu(et,It,qt,Ut);In.paddInEmptyBlock&&Jn&&(wr=>{let pi=wr;for(;ae(pi);){if(pi.name in Dt)return bu(et,It,qt,pi);pi=pi.parent}return!1})(Ut)?J_(Ye,it,ht,Ut):In.removeEmpty&&Jn?ht(Ut)?Ut.remove():Ut.unwrap():In.paddEmpty&&(Jn||Fk(wr=Ut,"#text")&&(null===(pi=wr?.firstChild)||void 0===pi?void 0:pi.value)===Bi)&&J_(Ye,it,ht,Ut)}}else if(3===Ut.type&&!gt(Ut)){let In=null!==(Mn=Ut.value)&&void 0!==Mn?Mn:"";(Ut.next&&ht(Ut.next)||Zt(Ut,!1))&&(In=In.replace(Je,"")),0===In.length?Ut.remove():Ut.value=In}}]})(ie,i,u,L),ye=[],He={nodes:{},attributes:{}},we=Be=>Kb(k(),I(),Be,He);if(((Be,et,Ye)=>{const it=[];for(let yt=Be,It=yt;yt;It=yt,yt=yt.walk()){const qt=yt;Qe(et,Xt=>Xt(qt)),_e(qt.parent)&&qt!==Be?yt=It:it.push(qt)}for(let yt=it.length-1;yt>=0;yt--){const It=it[yt];Qe(Ye,qt=>qt(It))}})(ie,[he,we],[fe,J?Be=>{return Ye=ye,void(m2(i,et=Be)&&Ye.push(et));var et,Ye}:ve]),ye.reverse(),J&&ye.length>0)if(L.context){const{pass:Be,fail:et}=Yn(ye,Ye=>Ye.parent===ie);Vk(et,i,ie,we),L.invalid=Be.length>0}else Vk(ye,i,ie,we);const De=((Be,et)=>{var Ye;const it=null!==(Ye=et.forced_root_block)&&void 0!==Ye?Ye:Be.forced_root_block;return!1===it?"":!0===it?"p":it})(u,L);return De&&("body"===ie.name||L.isRootContent)&&((Be,et)=>{const Ye=ux(DO("script,style,head,html,body,title,meta,param"),i.getBlockElements()),it=/^[ \t\r\n]+/,yt=/[ \t\r\n]+$/;let It=Be.firstChild,qt=null;const Xt=Dt=>{var en,qe;Dt&&(It=Dt.firstChild,It&&3===It.type&&(It.value=null===(en=It.value)||void 0===en?void 0:en.replace(it,"")),It=Dt.lastChild,It&&3===It.type&&(It.value=null===(qe=It.value)||void 0===qe?void 0:qe.replace(yt,"")))};if(i.isValidChild(Be.name,et.toLowerCase())){for(;It;){const Dt=It.next;R(Ye,It)?(qt||(qt=new _l(et,1),qt.attr(u.forced_root_block_attrs),Be.insert(qt,It)),qt.append(It)):(Xt(qt),qt=null),It=Dt}Xt(qt)}})(ie,De),L.invalid||zk(He,L),ie}};return((z,L)=>{var V,J;const te=z.schema;z.addAttributeFilter("href",fe=>{let ye=fe.length;const Ie=He=>{const we=He?zt.trim(He):"";return/\b(noopener)\b/g.test(we)?we:we.split(" ").filter(Be=>Be.length>0).concat(["noopener"]).sort().join(" ")};if(!L.allow_unsafe_link_target)for(;ye--;){const He=fe[ye];"a"===He.name&&"_blank"===He.attr("target")&&He.attr("rel",Ie(He.attr("rel")))}}),L.allow_html_in_named_anchor||z.addAttributeFilter("id,name",fe=>{let ye,Ie,He,we,De=fe.length;for(;De--;)if(we=fe[De],"a"===we.name&&we.firstChild&&!we.attr("href"))for(He=we.parent,ye=we.lastChild;ye&&He;)Ie=ye.prev,He.insert(ye,we),ye=Ie}),L.fix_list_elements&&z.addNodeFilter("ul,ol",fe=>{let ye,Ie,He=fe.length;for(;He--;)if(ye=fe[He],Ie=ye.parent,Ie&&("ul"===Ie.name||"ol"===Ie.name))if(ye.prev&&"li"===ye.prev.name)ye.prev.append(ye);else{const we=new _l("li",1);we.attr("style","list-style-type: none"),ye.wrap(we)}});const re=te.getValidClasses();L.validate&&re&&z.addAttributeFilter("class",fe=>{var ye;let Ie=fe.length;for(;Ie--;){const He=fe[Ie],we=null!==(ye=He.attr("class"))&&void 0!==ye?ye:"",De=zt.explode(we," ");let Be="";for(let et=0;et<De.length;et++){const Ye=De[et];let it=!1,yt=re["*"];yt&&yt[Ye]&&(it=!0),yt=re[He.name],!it&&yt&&yt[Ye]&&(it=!0),it&&(Be&&(Be+=" "),Be+=Ye)}Be.length||(Be=null),He.attr("class",Be)}}),((fe,ye)=>{const{blob_cache:Ie}=ye;if(Ie){const He=we=>{const De=we.attr("src");var Be;(Be=we).attr("src")===Yt.transparentSrc||ae(Be.attr("data-mce-placeholder"))||(Be=>ae(Be.attr("data-mce-bogus")))(we)||_e(De)||rx(Ie,De,!0).each(Be=>{we.attr("src",Be.blobUri())})};fe.addAttributeFilter("src",we=>Qe(we,He))}})(z,L);const ie=null!==(V=L.sandbox_iframes)&&void 0!==V&&V,he=Ds(null!==(J=L.sandbox_iframes_exclusions)&&void 0!==J?J:[]);L.convert_unsafe_embeds&&z.addNodeFilter("object,embed",fe=>Qe(fe,ye=>{ye.replace((({type:Ie,src:He,width:we,height:De}={},Be,et)=>{const Ye=pe(yt=Ie)?"iframe":ix(yt,"image")?"img":ix(yt,"video")?"video":ix(yt,"audio")?"audio":"iframe",it=new _l(Ye,1);var yt;return it.attr("audio"===Ye?{src:He}:{src:He,width:we,height:De}),"audio"!==Ye&&"video"!==Ye||it.attr("controls",""),"iframe"===Ye&&Be&&Cl(it,et),it})({type:ye.attr("type"),src:ye.attr("object"===ye.name?"data":"src"),width:ye.attr("width"),height:ye.attr("height")},ie,he))})),ie&&z.addNodeFilter("iframe",fe=>Qe(fe,ye=>Cl(ye,he)))})(N,u),(L=u).inline_styles&&((n,i,s)=>{var d;const u=Uv();var f,v,_;i.convert_fonts_to_spans&&(f=n,v=u,_=zt.explode(null!==(d=i.font_size_legacy_values)&&void 0!==d?d:""),f.addNodeFilter("font",k=>{Qe(k,T=>{const M=v.parse(T.attr("style")),I=T.attr("color"),O=T.attr("face"),R=T.attr("size");var N;I&&(M.color=I),O&&(M["font-family"]=O),R&&li(R).each(N=>{M["font-size"]=_[N-1]}),T.name="span",T.attr("style",v.serialize(M)),N=T,Qe(["color","face","size"],L=>{N.attr(L,null)})})})),((f,v,_)=>{f.addNodeFilter("strike",k=>{const T="html4"!==v.type;Qe(k,M=>{if(T)M.name="s";else{const I=_.parse(M.attr("style"));I["text-decoration"]="line-through",M.name="span",M.attr("style",_.serialize(I))}})})})(n,s,u)})(N,L,i),N;var L},xw=(n,i,s)=>{const d=cr(f=n)?bn({validate:!1}).serialize(f):f,u=i(d);var f;if(u.isDefaultPrevented())return u;if(cr(n)){if(u.content!==d){const f=q0({validate:!1,forced_root_block:!1,...s}).parse(u.content,{context:n.name});return{...u,content:f}}return{...u,content:n}}return u},gT=n=>({sanitize:a0(n),sandbox_iframes:NC(n),sandbox_iframes_exclusions:PA(n)}),O2=(n,i)=>{if(i.no_events)return ti.value(i);{const s=n.dispatch("BeforeGetContent",i);return s.isDefaultPrevented()?ti.error(M_(n,{content:"",...s}).content):ti.value(s)}},_w=(n,i,s)=>s.no_events?i:xw(i,u=>M_(n,{...s,content:u}),gT(n)).content,E2=(n,i)=>{if(i.no_events)return ti.value(i);{const s=xw(i.content,d=>{return u=n,f={...i,content:d},u.dispatch("BeforeSetContent",f);var u,f},gT(n));return s.isDefaultPrevented()?(ek(n,s),ti.error(void 0)):ti.value(s)}},$0=(n,i,s)=>{s.no_events||ek(n,{...s,content:i})},hx=(n,i,s)=>({element:n,width:i,rows:s}),N2=(n,i)=>({element:n,cells:i}),R2=(n,i)=>({x:n,y:i}),L2=(n,i)=>Pc(n,i).bind(li).getOr(1),rN=(n,i,s)=>{const d=n.rows;return!!(d[s]?d[s].cells:[])[i]},EO=n=>Oo(n,(i,s)=>s.cells.length>i?s.cells.length:i,0),NO=(n,i)=>{const s=n.rows;for(let d=0;d<s.length;d++){const u=s[d].cells;for(let f=0;f<u.length;f++)if(To(u[f],i))return ue.some(R2(f,d))}return ue.none()},RO=(n,i,s,d,u)=>{const f=[],v=n.rows;for(let _=s;_<=u;_++){const k=v[_].cells,T=i<d?k.slice(i,d+1):k.slice(d,i+1);f.push(N2(v[_].element,T))}return f},iN=n=>((i,s)=>{const d=lu(i.element),u=yr("tbody");return be(u,s),ge(d,u),d})(n,hn(n.rows,s=>{const d=hn(s.cells,f=>{const v=qv(f);return Gr(v,"colspan"),Gr(v,"rowspan"),v}),u=lu(s.element);return be(u,d),u})),P2=()=>Yl([]),Df=(n,i)=>i>=0&&i<n.length&&vp(n.charAt(i)),_c=n=>Zi(n.innerText),Su=n=>nn(n)?n.outerHTML:Mt(n)?bm.encodeRaw(n.data,!1):al(n)?"\x3c!--"+n.data+"--\x3e":"",PO=ma(()=>document.implementation.createHTMLDocument("undo")),Sw=n=>{const i=n.serializer.getTempAttrs(),s=rf(n.getBody(),i);return null!==s.querySelector("iframe")?{type:"fragmented",fragments:dn(hn(Go(s.childNodes),Me(Zi,Su)),d=>d.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:Zi(s.innerHTML),bookmark:null,beforeBookmark:null}},Cw=(n,i,s)=>{const d=s?i.beforeBookmark:i.bookmark;"fragmented"===i.type?((n,i)=>{((s,d)=>{let u=0;Qe(s,f=>{var v,_;0===f[0]?u++:1===f[0]?(((v,_,k)=>{const T=(M=>{let I;const O=document.createElement("div"),R=document.createDocumentFragment();for(M&&(O.innerHTML=M);I=O.firstChild;)R.appendChild(I);return R})(_);v.hasChildNodes()&&k<v.childNodes.length?v.insertBefore(T,v.childNodes[k]):v.appendChild(T)})(d,f[1],u),u++):2===f[0]&&(_=u,(v=d).hasChildNodes()&&_<v.childNodes.length&&v.removeChild(v.childNodes[_]))})})(((s,d)=>{const u=s.length+d.length+2,f=new Array(u),v=new Array(u),_=(I,O,R,N,z)=>{const L=T(I,O,R,N);if(null===L||L.start===O&&L.diag===O-N||L.end===I&&L.diag===I-R){let V=I,J=R;for(;V<O||J<N;)V<O&&J<N&&s[V]===d[J]?(z.push([0,s[V]]),++V,++J):O-I>N-R?(z.push([2,s[V]]),++V):(z.push([1,d[J]]),++J)}else{_(I,L.start,R,L.start-L.diag,z);for(let V=L.start;V<L.end;++V)z.push([0,s[V]]);_(L.end,O,L.end-L.diag,N,z)}},k=(I,O,R,N)=>{let z=I;for(;z-O<N&&z<R&&s[z]===d[z-O];)++z;return{start:I,end:z,diag:O}},T=(I,O,R,N)=>{const z=O-I,L=N-R;if(0===z||0===L)return null;const V=z-L,J=L+z,te=(J%2==0?J:J+1)/2;let re,ie,he,fe,ye;for(f[1+te]=I,v[1+te]=O+1,re=0;re<=te;++re){for(ie=-re;ie<=re;ie+=2){for(he=ie+te,f[he]=ie===-re||ie!==re&&f[he-1]<f[he+1]?f[he+1]:f[he-1]+1,fe=f[he],ye=fe-I+R-ie;fe<O&&ye<N&&s[fe]===d[ye];)f[he]=++fe,++ye;if(V%2!=0&&V-re<=ie&&ie<=V+re&&v[he-V]<=f[he])return k(v[he-V],ie+I-R,O,N)}for(ie=V-re;ie<=V+re;ie+=2){for(he=ie+te-V,v[he]=ie===V-re||ie!==V+re&&v[he+1]<=v[he-1]?v[he+1]-1:v[he-1],fe=v[he]-1,ye=fe-I+R-ie;fe>=I&&ye>=R&&s[fe]===d[ye];)v[he]=fe--,ye--;if(V%2==0&&-re<=ie&&ie<=re&&v[he]<=f[he+V])return k(v[he],ie+I-R,O,N)}}return null},M=[];return _(0,s.length,0,d.length,M),M})(hn(Go(i.childNodes),Su),n),i)})(i.fragments,n.getBody()):n.setContent(i.content,{format:"raw",no_selection:!ae(d)||!Um(d)||!d.isFakeCaret}),d&&(n.selection.moveToBookmark(d),n.selection.scrollIntoView())},px=n=>"fragmented"===n.type?n.fragments.join(""):n.content,kw=n=>{const i=yr("body",PO());return Lt(i,px(n)),Qe(jo(i,"*[data-mce-bogus]"),tt),jt(i)},mh=(n,i)=>{return!(!n||!i)&&(d=i,!(px(n)!==px(d))||((s,d)=>kw(s)===kw(d))(n,i));var d},Tw=n=>0===n.get(),Of=(n,i,s)=>{Tw(s)&&(n.typing=i)},B2=(n,i)=>{n.typing&&(Of(n,!1,i),n.add())},X0=n=>({init:{bindEvents:ve},undoManager:{beforeChange:(i,s)=>{return d=n,f=s,void(Tw(i)&&f.set(Dm(d.selection)));var d,f},add:(i,s,d,u,f,v)=>((_,k,T,M,I,O,R)=>{const N=Sw(_),z=zt.extend(O||{},N);if(!Tw(M)||_.removed)return null;const L=k.data[T.get()];if(_.dispatch("BeforeAddUndo",{level:z,lastLevel:L,originalEvent:R}).isDefaultPrevented()||L&&mh(L,z))return null;k.data[T.get()]&&I.get().each(te=>{k.data[T.get()].beforeBookmark=te});const V=mb(_);if(V&&k.data.length>V){for(let te=0;te<k.data.length-1;te++)k.data[te]=k.data[te+1];k.data.length--,T.set(k.data.length)}z.bookmark=Dm(_.selection),T.get()<k.data.length-1&&(k.data.length=T.get()+1),k.data.push(z),T.set(k.data.length-1);const J={level:z,lastLevel:L,originalEvent:R};return T.get()>0?(_.setDirty(!0),_.dispatch("AddUndo",J),_.dispatch("change",J)):_.dispatch("AddUndo",J),z})(n,i,s,d,u,f,v),undo:(i,s,d)=>((u,f,v,_)=>{let k;return f.typing&&(f.add(),f.typing=!1,Of(f,!1,v)),_.get()>0&&(_.set(_.get()-1),k=f.data[_.get()],Cw(u,k,!0),u.setDirty(!0),u.dispatch("Undo",{level:k})),k})(n,i,s,d),redo:(i,s)=>((d,u,f)=>{let v;return u.get()<f.length-1&&(u.set(u.get()+1),v=f[u.get()],Cw(d,v,!1),d.setDirty(!0),d.dispatch("Redo",{level:v})),v})(n,i,s),clear:(i,s)=>{return d=n,f=s,(u=i).data=[],f.set(0),u.typing=!1,void d.dispatch("ClearUndos");var d,u,f},reset:i=>{return(s=i).clear(),void s.add();var s},hasUndo:(i,s)=>{return d=n,u=i,s.get()>0||u.typing&&u.data[0]&&!mh(Sw(d),u.data[0]);var d,u},hasRedo:(i,s)=>{return d=i,s.get()<d.data.length-1&&!d.typing;var d},transact:(i,s,d)=>{return v=d,B2(u=i,s),u.beforeChange(),u.ignore(v),u.add();var u,v},ignore:(i,s)=>((d,u)=>{try{d.set(d.get()+1),u()}finally{d.set(d.get()-1)}})(i,s),extra:(i,s,d,u)=>((f,v,_,k,T)=>{if(v.transact(k)){const M=v.data[_.get()].bookmark,I=v.data[_.get()-1];Cw(f,I,!0),v.transact(T)&&(v.data[_.get()-1].beforeBookmark=M)}})(n,i,s,d,u)},formatter:{match:(i,s,d,u)=>L0(n,i,s,d,u),matchAll:(i,s)=>((d,u,f)=>{const v=[],_={},k=d.selection.getStart();return d.dom.getParent(k,T=>{for(let M=0;M<u.length;M++){const I=u[M];!_[I]&&_u(d,T,I,f)&&(_[I]=!0,v.push(I))}},d.dom.getRoot()),v})(n,i,s),matchNode:(i,s,d,u)=>_u(n,i,s,d,u),canApply:i=>((s,d)=>{const u=s.formatter.get(d),f=s.dom;if(u&&s.selection.isEditable()){const v=s.selection.getStart(),_=lg(f,v);for(let k=u.length-1;k>=0;k--){const T=u[k];if(!Ho(T))return!0;for(let M=_.length-1;M>=0;M--)if(f.is(_[M],T.selector))return!0}}return!1})(n,i),closest:i=>((s,d)=>{const u=f=>To(f,Ze(s.getBody()));return ue.from(s.selection.getStart(!0)).bind(f=>mf(Ze(f),v=>Si(d,_=>{return _u(s,v.dom,T=_)?ue.some(T):ue.none();var T}),u)).getOrNull()})(n,i),apply:(i,s,d)=>eT(n,i,s,d),remove:(i,s,d,u)=>_O(n,i,s,d,u),toggle:(i,s,d)=>((u,f,v,_)=>{const k=u.formatter.get(f);k&&(!L0(u,f,v,_)||"toggle"in k[0]&&!k[0].toggle?eT(u,f,v,_):_O(u,f,v,_))})(n,i,s,d),formatChanged:(i,s,d,u,f)=>{return((O,R,N,z,L,V)=>{const J=R.get();Qe(N.split(","),te=>{const re=go(J,te).getOrThunk(()=>{const he={withSimilar:{state:ur(!1),similar:!0,callbacks:[]},withoutSimilar:{state:ur(!1),similar:!1,callbacks:[]},withVars:[]};return J[te]=he,he}),ie=()=>{const he=nd(O);return cw(O,he,te,L,V).isSome()};if(pe(V)){const he=L?re.withSimilar:re.withoutSimilar;he.callbacks.push(z),1===he.callbacks.length&&he.state.set(ie())}else re.withVars.push({state:ur(ie()),similar:L,vars:V,callback:z})}),R.set(J)})(n,_=i,k=s,T=d,u,f),{unbind:()=>((O,R,N)=>{const z=O.get();Qe(R.split(","),L=>go(z,L).each(V=>{z[L]={withSimilar:{...V.withSimilar,callbacks:dn(V.withSimilar.callbacks,J=>J!==N)},withoutSimilar:{...V.withoutSimilar,callbacks:dn(V.withoutSimilar.callbacks,J=>J!==N)},withVars:dn(V.withVars,J=>J.callback!==N)}})),O.set(z)})(_,k,T)};var _,k,T}},editor:{getContent:i=>{return d=i,ue.from((s=n).getBody()).fold(ee("tree"===d.format?new _l("body",11):""),u=>((n,i,s)=>{let d;return d="raw"===i.format?zt.trim(Zi(rf(s,n.serializer.getTempAttrs()).innerHTML)):"text"===i.format?((u,f)=>{const v=u.getDoc(),_=Ns(Ze(u.getBody())),k=yr("div",v);ta(k,"data-mce-bogus","all"),so(k,{position:"fixed",left:"-9999999px",top:"0"}),Lt(k,f.innerHTML),hO(k),gO(k);const T=ju(I=_)?I:Ze(Fc(I).dom.body);var I;ge(T,k);const M=Zi(k.dom.innerText);return Ke(k),M})(n,s):"tree"===i.format?n.serializer.serialize(s,i):((u,f)=>{const v=aa(u),_=new RegExp(`^(<${v}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${v}>[\r\n]*|<br \\/>[\r\n]*)$`);return f.replace(_,"")})(n,n.serializer.serialize(s,i)),"text"!==i.format&&!uc(Ze(s))&&Y(d)?zt.trim(d):d})(s,d,u));var s,d},setContent:(i,s)=>{return u=i,f=s,ue.from((d=n).getBody()).map(v=>cr(u)?((_,k,T,M)=>{hf(_.parser.getNodeFilters(),_.parser.getAttributeFilters(),T);const I=bn({validate:!1},_.schema).serialize(T),O=Zi(uc(Ze(k))?I:zt.trim(I));return E0(_,O,M.no_selection),{content:T,html:O}})(d,v,u,f):((_,k,T,M)=>{if(0===(T=Zi(T)).length||/^\s+$/.test(T)){const I='<br data-mce-bogus="1">';"TABLE"===k.nodeName?T="<tr><td>"+I+"</td></tr>":/^(UL|OL)$/.test(k.nodeName)&&(T="<li>"+I+"</li>");const O=aa(_);return _.schema.isValidChild(k.nodeName.toLowerCase(),O.toLowerCase())?(T=I,T=_.dom.createHTML(O,t0(_),T)):T||(T=I),E0(_,T,M.no_selection),{content:T,html:T}}{"raw"!==M.format&&(T=bn({validate:!1},_.schema).serialize(_.parser.parse(T,{isRootContent:!0,insert:!0})));const I=uc(Ze(k))?T:zt.trim(T);return E0(_,I,M.no_selection),{content:I,html:I}}})(d,v,u,f)).getOr({content:u,html:cr(f.content)?"":f.content});var d,u,f},insertContent:(i,s)=>xO(n,i,s),addVisual:i=>((s,d)=>{const u=s.dom,f=ae(d)?d:s.getBody();Qe(u.select("table,a",f),v=>{switch(v.nodeName){case"TABLE":const _=vb(s),k=u.getAttrib(v,"border");k&&"0"!==k||!s.hasVisual?u.removeClass(v,_):u.addClass(v,_);break;case"A":if(!u.getAttrib(v,"href")){const T=u.getAttrib(v,"name")||v.id,M=th(s);T&&s.hasVisual?u.addClass(v,M):u.removeClass(v,M)}}}),s.dispatch("VisualAid",{element:d,hasVisual:s.hasVisual})})(n,i)},selection:{getContent:(i,s)=>((d,u,f={})=>{const v=(_=f,k=u,{..._,format:k,get:!0,selection:!0,getInner:!0});var _,k;return O2(d,v).fold(Se,_=>{const k=((T,M)=>{if("text"===M.format)return ue.from((I=T).selection.getRng()).map(O=>{var R;const N=ue.from(I.dom.getParent(O.commonAncestorContainer,I.dom.isBlock)),z=I.getBody(),L=N.map(he=>he.nodeName).getOr("div").toLowerCase(),V=Ze(O.cloneContents());hO(V),gO(V);const J=I.dom.add(z,L,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},V.dom),te=_c(J),re=Zi(null!==(R=J.textContent)&&void 0!==R?R:"");if(I.dom.remove(J),Df(re,0)||Df(re,re.length-1)){const ie=N.getOr(z),he=_c(ie),fe=he.indexOf(te);return-1===fe?te:(Df(he,fe-1)?" ":"")+te+(Df(he,fe+te.length)?" ":"")}return te}).getOr("");var I;{const I=((O,R)=>{const N=O.selection.getRng(),z=O.dom.create("body"),L=O.selection.getSel(),V=Lb(O,h0(L)),J=R.contextual?((n,i,s)=>{const d=qm(i,n);return d.length>0?((n,i)=>{return(s=n,d=i[0],$i(d,"table",We(To,s))).bind(s=>{const d=i[0],u=i[i.length-1],f=(v=>{const _=hx(lu(v),0,[]);return Qe(jo(v,"tr"),(k,T)=>{Qe(jo(k,"td,th"),(M,I)=>{((O,R,N,z,L)=>{const V=L2(L,"rowspan"),J=L2(L,"colspan"),te=O.rows;for(let re=N;re<N+V;re++){te[re]||(te[re]=N2(qv(z),[]));for(let ie=R;ie<R+J;ie++)te[re].cells[ie]=re===N&&ie===R?L:lu(L)}})(_,((O,R,N)=>{for(;rN(O,R,N);)R++;return R})(_,I,T),T,k,M)})}),hx(_.element,EO(_.rows),_.rows)})(s);return(v=f,_=d,k=u,NO(v,_).bind(T=>NO(v,k).map(M=>((I,O,R)=>{const N=O.x,z=O.y,L=R.x,V=R.y,J=z<V?RO(I,N,z,L,V):RO(I,N,V,L,z);return hx(I.element,EO(J),J)})(v,T,M)))).map(v=>Yl([iN(v)]));var v,_,k}).getOrThunk(P2);var s,d})(n,d):(u=n,v=s,(f=i).length>0&&f[0].collapsed?P2():(_=u,T=v,((M,I)=>{const O=Oo(I,(R,N)=>(ge(N,R),N),M);return I.length>0?Yl([O]):O})(Ze((k=f[0]).cloneContents()),((n,i,s)=>{const d=Ze(i.commonAncestorContainer),u=bi(d,n),f=dn(u,k=>s.isWrapper(mo(k))),v=(T=i,Qo(k=u,M=>"li"===mo(M)&&yp(M,T)).fold(ee([]),M=>{return(I=k,Qo(I,O=>"ul"===mo(O)||"ol"===mo(O))).map(I=>{const O=yr(mo(I)),R=pa($g(I),(N,z)=>gn(z,"list-style"));return so(O,R),[yr("li"),O]}).getOr([]);var I})),_=f.concat(v.length?v:(k=>np(k)?pn(k).filter(Yo).fold(ee([]),T=>[k,T]):Yo(k)?[k]:[])(d));var k,T;return hn(_,lu)})(_,k,T))));var u,f,v,_,k,T})(Ze(O.getBody()),V,O.schema).dom:N.cloneContents();return J&&z.appendChild(J),O.selection.serializer.serialize(z,R)})(T,M);return"tree"===M.format?I:T.selection.isCollapsed()?"":I}})(d,_);return _w(d,k,_)})})(n,i,s)},autocompleter:{addDecoration:ve,removeDecoration:ve},raw:{getModel:()=>ue.none()}}),wc=n=>Ln(n.plugins,"rtc"),sd=n=>n.rtcInstance?n.rtcInstance:X0(n),ni=n=>{const i=n.rtcInstance;if(i)return i;throw new Error("Failed to get RTC instance not yet initialized.")},Mw=n=>ni(n).init.bindEvents(),Ef=n=>0===n.dom.length?(Ke(n),ue.none()):ue.some(n),z2=(n,i,s,d,u)=>{n.bind(f=>((d?_r:fu)(f.dom,d?f.dom.length:0,u),i.filter(fa).map(v=>((_,k,T,M,I)=>{const O=_.dom,R=k.dom,N=M?O.length:R.length;M?(fc(O,R,I,!1,!M),T.setStart(R,N)):(fc(R,O,I,!1,!M),T.setEnd(R,N))})(f,v,s,d,u)))).orThunk(()=>{return(v=i,_=d,v.filter(k=>Xm.isBookmarkNode(k.dom)).bind(_?_d:nu)).or(i).filter(fa).map(v=>((_,k,T)=>{pn(_).each(M=>{const I=_.dom;k&&Pd(M,ut(I,0),T)?fu(I,0,T):!k&&A0(M,ut(I,I.length),T)&&_r(I,I.length,T)})})(v,d,u));var v,_})},gi=(n,i,s)=>{if(Ln(n,i)){const d=dn(n[i],u=>u!==s);0===d.length?delete n[i]:n[i]=d}},F2=n=>!(!n||!n.ownerDocument)&&Es(Ze(n.ownerDocument),Ze(n)),V2=(n,i,s,d)=>{let u,f;const{selectorChangedWithUnbind:v}=((L,V)=>{let J,te;const re=(he,fe)=>Qo(fe,ye=>L.is(ye,he)),ie=he=>L.getParents(he,void 0,L.getRoot());return{selectorChangedWithUnbind:(he,fe)=>(J||(J={},te={},V.on("NodeChange",ye=>{const Ie=ye.element,He=ie(Ie),we={};ho(J,(De,Be)=>{re(Be,He).each(et=>{te[Be]||(Qe(De,Ye=>{Ye(!0,{node:et,selector:Be,parents:He})}),te[Be]=De),we[Be]=De})}),ho(te,(De,Be)=>{we[Be]||(delete te[Be],Qe(De,et=>{et(!1,{node:Ie,selector:Be,parents:He})}))})})),J[he]||(J[he]=[]),J[he].push(fe),re(he,ie(V.selection.getStart())).each(()=>{te[he]=J[he]}),{unbind:()=>{gi(J,he,fe),gi(te,he,fe)}})}})(n,d),_=(L,V)=>((J,te,re={})=>{const ie=(he=re,fe=te,{format:"html",...he,set:!0,selection:!0,content:fe});var he,fe;E2(J,ie).each(he=>{const fe=((Ie,He)=>{if("raw"!==He.format){const we=Ie.selection.getRng(),De=Ie.dom.getParent(we.commonAncestorContainer,Ie.dom.isBlock),Be=De?{context:De.nodeName.toLowerCase()}:{},et=Ie.parser.parse(He.content,{forced_root_block:!1,...Be,...He});return bn({validate:!1},Ie.schema).serialize(et)}return He.content})(J,he),ye=J.selection.getRng();((Ie,He,we)=>{const De=ue.from(He.firstChild).map(Ze),Be=ue.from(He.lastChild).map(Ze);Ie.deleteContents(),Ie.insertNode(He);const et=De.bind(nu).filter(fa).bind(Ef),Ye=Be.bind(_d).filter(fa).bind(Ef);z2(et,De,Ie,!0,we),z2(Ye,Be,Ie,!1,we),Ie.collapse(!1)})(ye,ye.createContextualFragment(fe),J.schema),J.selection.setRng(ye),Sp(J,ye),$0(J,fe,he)})})(d,L,V),k=L=>{const V=M();V.collapse(!!L),I(V)},T=()=>i.getSelection?i.getSelection():i.document.selection,M=()=>{let L;const V=(te,re,ie)=>{try{return re.compareBoundaryPoints(te,ie)}catch{return-1}},J=i.document;if(ae(d.bookmark)&&!tf(d)){const te=Ld(d);if(te.isSome())return te.map(re=>Lb(d,[re])[0]).getOr(J.createRange())}try{const te=T();te&&!il(te.anchorNode)&&(L=te.rangeCount>0?te.getRangeAt(0):J.createRange(),L=Lb(d,[L])[0])}catch{}if(L||(L=J.createRange()),Ev(L.startContainer)&&L.collapsed){const te=n.getRoot();L.setStart(te,0),L.setEnd(te,0)}return u&&f&&(0===V(L.START_TO_START,L,u)&&0===V(L.END_TO_END,L,u)?L=f:(u=null,f=null)),L},I=(L,V)=>{if(!((te=L)&&F2(te.startContainer)&&F2(te.endContainer)))return;var te;const J=T();if(L=d.dispatch("SetSelectionRange",{range:L,forward:V}).range,J){f=L;try{J.removeAllRanges(),J.addRange(L)}catch{}!1===V&&J.extend&&(J.collapse(L.endContainer,L.endOffset),J.extend(L.startContainer,L.startOffset)),u=J.rangeCount>0?J.getRangeAt(0):null}if(!L.collapsed&&L.startContainer===L.endContainer&&J?.setBaseAndExtent&&L.endOffset-L.startOffset<2&&L.startContainer.hasChildNodes()){const te=L.startContainer.childNodes[L.startOffset];te&&"IMG"===te.nodeName&&(J.setBaseAndExtent(L.startContainer,L.startOffset,L.endContainer,L.endOffset),J.anchorNode===L.startContainer&&J.focusNode===L.endContainer||J.setBaseAndExtent(te,0,te,1))}d.dispatch("AfterSetSelectionRange",{range:L,forward:V})},O=()=>{const L=T(),V=L?.anchorNode,J=L?.focusNode;if(!L||!V||!J||il(V)||il(J))return!0;const te=n.createRng(),re=n.createRng();try{te.setStart(V,L.anchorOffset),te.collapse(!0),re.setStart(J,L.focusOffset),re.collapse(!0)}catch{return!0}return te.compareBoundaryPoints(te.START_TO_START,re)<=0},R={dom:n,win:i,serializer:s,editor:d,expand:(L={type:"word"})=>I(Rd(n).expand(M(),L)),collapse:k,setCursorLocation:(L,V)=>{const J=n.createRng();ae(L)&&ae(V)?(J.setStart(L,V),J.setEnd(L,V),I(J),k(!1)):(ql(n,J,d.getBody(),!0),I(J))},getContent:L=>((V,J={})=>{return re=J.format?J.format:"html",ie=J,ni(V).selection.getContent(re,ie);var re,ie})(d,L),setContent:_,getBookmark:(L,V)=>N.getBookmark(L,V),moveToBookmark:L=>N.moveToBookmark(L),select:(L,V)=>{return(J=n,te=L,re=V,ue.from(te).bind(ie=>ue.from(ie.parentNode).map(he=>{const fe=J.nodeIndex(ie),ye=J.createRng();return ye.setStart(he,fe),ye.setEnd(he,fe+1),re&&(ql(J,ye,ie,!0),ql(J,ye,ie,!1)),ye}))).each(I),L;var J,te,re},isCollapsed:()=>{const L=M(),V=T();return!(!L||L.item)&&(L.compareEndPoints?0===L.compareEndPoints("StartToEnd",L):!V||L.collapsed)},isEditable:()=>{if(d.mode.isReadOnly())return!1;const L=M(),V=d.getBody().querySelectorAll('[data-mce-selected="1"]');return V.length>0?$t(V,J=>n.isEditable(J.parentElement)):fk(n,L)},isForward:O,setNode:L=>(_(n.getOuterHTML(L)),L),getNode:()=>((L,V)=>{if(!V)return L;let J=V.startContainer,te=V.endContainer;const re=V.startOffset,ie=V.endOffset;let he=V.commonAncestorContainer;V.collapsed||(J===te&&ie-re<2&&J.hasChildNodes()&&(he=J.childNodes[re]),Mt(J)&&Mt(te)&&(J=J.length===re?L_(J.nextSibling,!0):J.parentNode,te=0===ie?L_(te.previousSibling,!1):te.parentNode,J&&J===te&&(he=J)));const fe=Mt(he)?he.parentNode:he;return Ei(fe)?fe:L})(d.getBody(),M()),getSel:T,setRng:I,getRng:M,getStart:L=>n2(d.getBody(),M(),L),getEnd:L=>da(d.getBody(),M(),L),getSelectedBlocks:(L,V)=>((J,te,re,ie)=>{const he=[],fe=J.getRoot(),ye=J.getParent(re||n2(fe,te,te.collapsed),J.isBlock),Ie=J.getParent(ie||da(fe,te,te.collapsed),J.isBlock);if(ye&&ye!==fe&&he.push(ye),ye&&Ie&&ye!==Ie){let He;const we=new io(ye,fe);for(;(He=we.next())&&He!==Ie;)J.isBlock(He)&&he.push(He)}return Ie&&ye!==Ie&&Ie!==fe&&he.push(Ie),he})(n,M(),L,V),normalize:()=>{const L=M(),V=T();if(!(h0(V).length>1)&&g0(d)){const J=eo(n,L);return J.each(te=>{I(te,O())}),J.getOr(L)}return L},selectorChanged:(L,V)=>(v(L,V),R),selectorChangedWithUnbind:v,getScrollContainer:()=>{let L,V=n.getRoot();for(;V&&"BODY"!==V.nodeName;){if(V.scrollHeight>V.clientHeight){L=V;break}V=V.parentNode}return L},scrollIntoView:(L,V)=>{var J;ae(L)?((J=d).inline?Nb:Fa)(J,L,V):Sp(d,M(),V)},placeCaretAt:(L,V)=>I(Ob(L,V,d.getDoc())),getBoundingClientRect:()=>{const L=M();return L.collapsed?ut.fromRangeStart(L).getClientRects()[0]:L.getBoundingClientRect()},destroy:()=>{i=u=f=null,z.destroy()}},N=Xm(R),z=gu(R,d);return R.bookmarkManager=N,R.controlSelection=z,R},Nf=(n,i,s)=>{-1===zt.inArray(i,s)&&(n.addAttributeFilter(s,(d,u)=>{let f=d.length;for(;f--;)d[f].attr(u,null)}),i.push(s))},ld=(n,i)=>{const s=((n,i)=>{const s=["data-mce-selected"],d={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...n},u=i&&i.dom?i.dom:Mr.DOM,f=i&&i.schema?i.schema:Vl(d),v=q0(d,f);return k=d,T=u,(_=v).addAttributeFilter("data-mce-tabindex",(M,I)=>{let O=M.length;for(;O--;){const R=M[O];R.attr("tabindex",R.attr("data-mce-tabindex")),R.attr(I,null)}}),_.addAttributeFilter("src,href,style",(M,I)=>{const O="data-mce-"+I,R=k.url_converter,N=k.url_converter_scope;let z=M.length;for(;z--;){const L=M[z];let V=L.attr(O);void 0!==V?(L.attr(I,V.length>0?V:null),L.attr(O,null)):(V=L.attr(I),"style"===I?V=T.serializeStyle(T.parseStyle(V),L.name):R&&(V=R.call(N,V,I,L.name)),L.attr(I,V.length>0?V:null))}}),_.addAttributeFilter("class",M=>{let I=M.length;for(;I--;){const O=M[I];let R=O.attr("class");R&&(R=R.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),O.attr("class",R.length>0?R:null))}}),_.addAttributeFilter("data-mce-type",(M,I,O)=>{let R=M.length;for(;R--;){const N=M[R];"bookmark"===N.attr("data-mce-type")&&!O.cleanup&&(ue.from(N.firstChild).exists(L=>{var V;return!pl(null!==(V=L.value)&&void 0!==V?V:"")})?N.unwrap():N.remove())}}),_.addNodeFilter("script,style",(M,I)=>{var O;const R=z=>z.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let N=M.length;for(;N--;){const z=M[N],L=z.firstChild,V=null!==(O=L?.value)&&void 0!==O?O:"";if("script"===I){const J=z.attr("type");J&&z.attr("type","mce-no/type"===J?null:J.replace(/^mce\-/,"")),"xhtml"===k.element_format&&L&&V.length>0&&(L.value="// <![CDATA[\n"+R(V)+"\n// ]]>")}else"xhtml"===k.element_format&&L&&V.length>0&&(L.value="\x3c!--\n"+R(V)+"\n--\x3e")}}),_.addNodeFilter("#comment",M=>{let I=M.length;for(;I--;){const O=M[I],R=O.value;k.preserve_cdata&&0===R?.indexOf("[CDATA[")?(O.name="#cdata",O.type=4,O.value=T.decode(R.replace(/^\[CDATA\[|\]\]$/g,""))):0===R?.indexOf("mce:protected ")&&(O.name="#text",O.type=3,O.raw=!0,O.value=unescape(R).substr(14))}}),_.addNodeFilter("xml:namespace,input",(M,I)=>{let O=M.length;for(;O--;){const R=M[O];7===R.type?R.remove():1===R.type&&("input"!==I||R.attr("type")||R.attr("type","text"))}}),_.addAttributeFilter("data-mce-type",M=>{Qe(M,I=>{"format-caret"===I.attr("data-mce-type")&&(I.isEmpty(_.schema.getNonEmptyElements())?I.remove():I.unwrap())})}),_.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(M,I)=>{let O=M.length;for(;O--;)M[O].attr(I,null)}),k.remove_trailing_brs&&(M=k,O=_.schema,_.addNodeFilter("br",(R,N,z)=>{const L=zt.extend({},O.getBlockElements()),V=O.getNonEmptyElements(),J=O.getWhitespaceElements();L.body=1;const te=re=>re.name in L||sc(O,re);for(let re=0,ie=R.length;re<ie;re++){let he=R[re],fe=he.parent;if(fe&&te(fe)&&he===fe.lastChild){let ye=he.prev;for(;ye;){const Ie=ye.name;if("span"!==Ie||"bookmark"!==ye.attr("data-mce-type")){"br"===Ie&&(he=null);break}ye=ye.prev}if(he&&(he.remove(),bu(O,V,J,fe))){const Ie=O.getElementRule(fe.name);Ie&&(Ie.removeEmpty?fe.remove():Ie.paddEmpty&&J_(M,z,te,fe))}}else{let ye=he;for(;fe&&fe.firstChild===ye&&fe.lastChild===ye&&(ye=fe,!L[fe.name]);)fe=fe.parent;if(ye===fe){const Ie=new _l("#text",3);Ie.value=Bi,he.replace(Ie)}}}})),{schema:f,addNodeFilter:v.addNodeFilter,addAttributeFilter:v.addAttributeFilter,serialize:(_,k={})=>{const T={format:"html",...k},M=(N=_,V=z=T,ae(L=R=i)&&L.hasEventListeners("PreProcess")&&!V.no_events?((L,V,J)=>{let te;const re=L.dom;let ie=V.cloneNode(!0);const he=document.implementation;if(he.createHTMLDocument){const fe=he.createHTMLDocument("");zt.each("BODY"===ie.nodeName?ie.childNodes:[ie],ye=>{fe.body.appendChild(fe.importNode(ye,!0))}),ie="BODY"!==ie.nodeName?fe.body.firstChild:fe.body,te=re.doc,re.doc=fe}return ye={...J,node:ie},L.dispatch("PreProcess",ye),te&&(re.doc=te),ie;var ye})(R,N,z):N),I=((R,N,z)=>{const L=Zi(z.getInner?N.innerHTML:R.getOuterHTML(N));return z.selection||uc(Ze(N))?L:zt.trim(L)})(u,M,T),O=((R,N,z)=>{const L=z.selection?{forced_root_block:!1,...z}:z,V=R.parse(N,L);return(J=>{const te=ie=>"br"===ie?.name,re=J.lastChild;if(te(re)){const ie=re.prev;te(ie)&&(re.remove(),ie.remove())}})(V),V})(v,I,T);var R,N,z,L,V;return"tree"===T.format?O:((R,N,z,L,V)=>{var ie;return((te,re,ie)=>{return!re.no_events&&te?(fe=te,ye={...re,content:ie},fe.dispatch("PostProcess",ye)).content:ie;var fe,ye})(R,V,(ie=L,bn(N,z).serialize(ie)))})(i,d,f,O,T)},addRules:f.addValidElements,setRules:f.setValidElements,addTempAttr:We(Nf,v,s),getTempAttrs:ee(s),getNodeFilters:v.getNodeFilters,getAttributeFilters:v.getAttributeFilters,removeNodeFilter:v.removeNodeFilter,removeAttributeFilter:v.removeAttributeFilter};var _,k,T,M,O})(n,i);return{schema:s.schema,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:s.serialize,addRules:s.addRules,setRules:s.setRules,addTempAttr:s.addTempAttr,getTempAttrs:s.getTempAttrs,getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter}},Rf=(n,i,s={})=>{const d=(u=s,f=i,{format:"html",...u,set:!0,content:f});var u,f;return E2(n,d).map(u=>{const f=(_=u.content,k=u,sd(n).editor.setContent(_,k));var _,k;return $0(n,f.html,u),f.content}).getOr(i)},Bp="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),H2=[],W2="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),pT=[],mx=(n,i)=>{const s=dn(i,d=>Ln(n,d));return no(s)},Lf=(n,i)=>{const s=zt.makeMap(n.plugins," "),d=dn(i,u=>Ln(s,u));return no(d)},vT=n=>Qo(pT,i=>i.name===n).fold(()=>n,i=>i.replacedWith?`${n}, replaced by ${i.replacedWith}`:n),vx=Mr.DOM,yx=n=>ue.from(n).each(i=>i.destroy()),K0=(()=>{const n={};return{add:(i,s)=>{n[i]=s},get:i=>n[i]?n[i]:{icons:{}},has:i=>Ln(n,i)}})(),Cu=_s.ModelManager,Pf=(n,i)=>i.dom[n],zp=(n,i)=>parseInt(Ci(i,n),10),bx=We(Pf,"clientWidth"),xx=We(Pf,"clientHeight"),Aw=We(zp,"margin-top"),Bf=We(zp,"margin-left"),zf=n=>{const i=[],s=()=>{const k=n.theme;return k&&k.getNotificationManagerImpl?k.getNotificationManagerImpl():(()=>{const T=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:T,close:T,getArgs:T}})()},d=()=>ue.from(i[0]),u=()=>{d().each(k=>{k.reposition()})},f=k=>{ft(i,T=>T===k).each(T=>{i.splice(T,1)})},v=(k,T=!0)=>{return n.removed||!(I=(M=n).inline?M.getBody():M.getContentAreaContainer(),ue.from(I).map(Ze)).map(Vh).getOr(!1)?{}:(T&&n.dispatch("BeforeOpenNotification",{notification:k}),Qo(i,M=>{return!((I=s().getArgs(M)).type!==(O=k).type||I.text!==O.text||I.progressBar||I.timeout||O.progressBar||O.timeout);var I,O}).getOrThunk(()=>{n.editorManager.setActive(n);const M=s().open(k,()=>{f(M)},()=>pk(n));return(I=>{i.push(I)})(M),u(),n.dispatch("OpenNotification",{notification:{...M}}),M}));var M,I},_=ee(i);return(k=n).on("SkinLoaded",()=>{const T=Xa(k);T&&v({text:T,type:"warning",timeout:0},!1),u()}),k.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),k.on("remove",()=>{Qe(i.slice(),T=>{s().close(T)})}),k.addShortcut("alt+F12","Focus to notification",()=>d().map(T=>Ze(T.getEl())).each(T=>KA(T))),{open:v,close:()=>{d().each(k=>{s().close(k),f(k),u()})},getNotifications:_};var k},J0=_s.PluginManager,Ff=_s.ThemeManager,Fp=n=>{let i=[];const s=()=>{const v=n.theme;return v&&v.getWindowManagerImpl?v.getWindowManagerImpl():(()=>{const _=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:_,openUrl:_,alert:_,confirm:_,close:_}})()},d=(v,_)=>(...k)=>_?_.apply(v,k):void 0,u=v=>{n.dispatch("CloseWindow",{dialog:v}),i=dn(i,_=>_!==v),0===i.length&&n.focus()},f=v=>{n.editorManager.setActive(n),Cp(n),n.ui.show();const _=v();return i.push(k=_),n.dispatch("OpenWindow",{dialog:k}),_;var k};return n.on("remove",()=>{Qe(i,v=>{s().close(v)})}),{open:(v,_)=>f(()=>s().open(v,_,u)),openUrl:v=>f(()=>s().openUrl(v,u)),alert:(v,_,k)=>{const T=s();T.alert(v,d(k||T,_))},confirm:(v,_,k)=>{const T=s();T.confirm(v,d(k||T,_))},close:()=>{ue.from(i[i.length-1]).each(v=>{s().close(v),u(v)})}}},_x=(n,i)=>{n.notificationManager.open({type:"error",text:i})},Sx=(n,i)=>{n._skinLoaded?_x(n,i):n.on("SkinLoaded",()=>{_x(n,i)})},Vp=(n,i,s)=>{Nn(n,i,{message:s}),console.error(s)},fh=(n,i,s)=>s?`Failed to load ${n}: ${s} from url ${i}`:`Failed to load ${n} url: ${i}`,Cx=(n,...i)=>{const s=window.console;s&&(s.error?s.error(n,...i):s.log(n,...i))},Iw=n=>"content/"+n+"/content.css",U2=(n,i)=>{const s=n.editorManager.baseURL+"/skins/content",d=`content${n.editorManager.suffix}.css`;return hn(i,u=>tinymce.Resource.has(Iw(u))?u:/^[a-z0-9\-]+$/i.test(u)&&!n.inline?`${s}/${u}/${d}`:n.documentBaseURI.toAbsolute(u))},Dw=()=>{let n={};const i=(d,u)=>({status:d,resultUri:u}),s=d=>d in n;return{hasBlobUri:s,getResultUri:d=>{const u=n[d];return u?u.resultUri:null},isPending:d=>!!s(d)&&1===n[d].status,isUploaded:d=>!!s(d)&&2===n[d].status,markPending:d=>{n[d]=i(1,null)},markUploaded:(d,u)=>{n[d]=i(2,u)},removeFailed:d=>{delete n[d]},destroy:()=>{n={}}}};let BO=0;const Va=n=>()=>n.notificationManager.open({text:n.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),vh=(n,i)=>((n,i)=>{const s={},d=(k,T)=>new Promise((M,I)=>{const O=new XMLHttpRequest;O.open("POST",i.url),O.withCredentials=i.credentials,O.upload.onprogress=N=>{T(N.loaded/N.total*100)},O.onerror=()=>{I("Image upload failed due to a XHR Transport error. Code: "+O.status)},O.onload=()=>{if(O.status<200||O.status>=300)return void I("HTTP Error: "+O.status);const N=JSON.parse(O.responseText);var z,L;N&&Y(N.location)?M((L=N.location,(z=i.basePath)?z.replace(/\/$/,"")+"/"+L.replace(/^\//,""):L)):I("Invalid JSON: "+O.responseText)};const R=new FormData;R.append("file",k.blob(),k.filename()),O.send(R)}),u=Ge(i.handler)?i.handler:d,f=(k,T)=>({url:T,blobInfo:k,status:!0}),v=(k,T)=>({url:"",blobInfo:k,status:!1,error:T}),_=(k,T)=>{zt.each(s[k],M=>{M(T)}),delete s[k]};return{upload:(k,T)=>{return i.url||u!==d?(I=T,M=zt.grep(M=k,O=>!n.isUploaded(O.blobUri())),Promise.all(zt.map(M,O=>{return n.isPending(O.blobUri())?(R=>{const N=R.blobUri();return new Promise(z=>{s[N]=s[N]||[],s[N].push(z)})})(O):(N=u,z=I,n.markPending((R=O).blobUri()),new Promise(L=>{let V,J;try{const te=()=>{V&&(V.close(),J=ve)},re=he=>{te(),n.markUploaded(R.blobUri(),he),_(R.blobUri(),f(R,he)),L(f(R,he))},ie=he=>{te(),n.removeFailed(R.blobUri()),_(R.blobUri(),v(R,he)),L(v(R,he))};J=he=>{he<0||he>100||ue.from(V).orThunk(()=>ue.from(z).map(wt)).each(fe=>{V=fe,fe.progressBar.value(he)})},N(R,J).then(re,he=>{ie(Y(he)?{message:he}:he)})}catch(te){L(v(R,te))}}));var R,N,z}))):new Promise(M=>{M([])});var M,I}}})(i,{url:UD(n),basePath:GD(n),credentials:Hi(n),handler:t_(n)}),Vf={remove_similar:!0,inherit:!1},Ha={selector:"td,th",...Vf},Hf={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Ha},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Ha},tablecellbordercolor:{styles:{borderColor:"%value"},...Ha},tablecellclass:{classes:["%value"],...Ha},tableclass:{selector:"table",classes:["%value"],...Vf},tablecellborderstyle:{styles:{borderStyle:"%value"},...Ha},tablecellborderwidth:{styles:{borderWidth:"%value"},...Ha}},G2=ee(Hf),kx=zt.each,cd=Mr.DOM,Wf=n=>ae(n)&&W(n),xT=(n,i)=>{const s=i&&i.schema||Vl({}),d=v=>{const _=Y(v)?{name:v,classes:[],attrs:{}}:v,k=cd.create(_.name);return T=k,(M=_).classes.length>0&&cd.addClass(T,M.classes.join(" ")),cd.setAttribs(T,M.attrs),k;var T,M},u=(v,_,k)=>{let T;const M=_[0],I=Wf(M)?M.name:void 0,O=((z,L)=>{const J=s.getElementRule(z.nodeName.toLowerCase())?.parentsRequired;return!(!J||!J.length)&&(L&&Jt(J,L)?L:J[0])})(v,I);if(O)I===O?(T=M,_=_.slice(1)):T=O;else if(M)T=M,_=_.slice(1);else if(!k)return v;const R=T?d(T):cd.create("div");R.appendChild(v),k&&zt.each(k,z=>{const L=d(z);R.insertBefore(L,v)});const N=Wf(T)?T.siblings:void 0;return u(R,_,N)},f=cd.create("div");if(n.length>0){const v=n[0],_=d(v),k=Wf(v)?v.siblings:void 0;f.appendChild(u(_,n.slice(1),k))}return f},_T=n=>{let i="div";const s={name:i,classes:[],attrs:{},selector:n=zt.trim(n)};return"*"!==n&&(i=n.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(d,u,f,v,_)=>{switch(u){case"#":s.attrs.id=f;break;case".":s.classes.push(f);break;case":":-1!==zt.inArray("checked disabled enabled read-only required".split(" "),f)&&(s.attrs[f]=f)}if("["===v){const k=_.match(/([\w\-]+)(?:\=\"([^\"]+))?/);k&&(s.attrs[k[1]]=k[2])}return""})),s.name=i||"div",s},wT=(n,i)=>{let s="",d=jD(n);if(""===d)return"";const u=R=>Y(R)?R.replace(/%(\w+)/g,""):"",f=(R,N)=>cd.getStyle(N??n.getBody(),R,!0);if(Y(i)){const R=n.formatter.get(i);if(!R)return"";i=R[0]}if("preview"in i){const R=i.preview;if(!1===R)return"";d=R||d}let v,_=i.block||i.inline||"span";const k=Y(T=i.selector)?(T=(T=T.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),zt.map(T.split(/(?:>|\s+(?![^\[\]]+\]))/),R=>{const N=zt.map(R.split(/(?:~\+|~|\+)/),_T),z=N.pop();return N.length&&(z.siblings=N),z}).reverse()):[];var T;k.length>0?(k[0].name||(k[0].name=_),_=i.selector,v=xT(k,n)):v=xT([_],n);const M=cd.select(_,v)[0]||v.firstChild;kx(i.styles,(R,N)=>{const z=u(R);z&&cd.setStyle(M,N,z)}),kx(i.attributes,(R,N)=>{const z=u(R);z&&cd.setAttrib(M,N,z)}),kx(i.classes,R=>{const N=u(R);cd.hasClass(M,N)||cd.addClass(M,N)}),n.dispatch("PreviewFormats"),cd.setStyles(v,{position:"absolute",left:-65535}),n.getBody().appendChild(v);const I=f("fontSize"),O=/px$/.test(I)?parseInt(I,10):0;return kx(d.split(" "),R=>{let N=f(R,M);if(!("background-color"===R&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(N)&&(N=f(R),"#ffffff"===_m(N).toLowerCase())||"color"===R&&"#000000"===_m(N).toLowerCase())){if("font-size"===R&&/em|%$/.test(N)){if(0===O)return;N=parseFloat(N)/(/%$/.test(N)?100:1)*O+"px"}"border"===R&&N&&(s+="padding:0 2px;"),s+=R+":"+N+";"}}),n.dispatch("AfterPreviewFormats"),cd.remove(v),s},Ow=n=>{const i=(d=>{const u={},f=(v,_)=>{v&&(Y(v)?(K(_)||(_=[_]),Qe(_,k=>{pe(k.deep)&&(k.deep=!Ho(k)),pe(k.split)&&(k.split=!Ho(k)||ca(k)),pe(k.remove)&&Ho(k)&&!ca(k)&&(k.remove="none"),Ho(k)&&ca(k)&&(k.mixed=!0,k.block_expand=!0),Y(k.classes)&&(k.classes=k.classes.split(/\s+/))}),u[v]=_):ho(v,(k,T)=>{f(T,k)}))};return f((v=>{const _=v.dom,k=v.schema.type,T={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:M=>{_.setStyle(M,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:M=>{_.setStyle(M,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const M={inline:"span",styles:{textDecoration:"line-through"},exact:!0},I={inline:"strike",remove:"all",preserve_attributes:["class","style"]},O={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==k?[O,M,I]:[M,O,I]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(M,I,O)=>nn(M)&&M.hasAttribute("href"),onformat:(M,I,O)=>{zt.each(O,(R,N)=>{_.setAttrib(M,N,R)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":M=>{var I;return null!==(I=M?.customValue)&&void 0!==I?I:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return zt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),M=>{T[M]={block:M,remove:"all"}}),T})(d)),f(G2()),f(r0(d)),{get:v=>ae(v)?u[v]:u,has:v=>Ln(u,v),register:f,unregister:v=>(v&&u[v]&&delete u[v],u)}})(n),s=ur({});return(d=>{d.addShortcut("meta+b","","Bold"),d.addShortcut("meta+i","","Italic"),d.addShortcut("meta+u","","Underline");for(let u=1;u<=6;u++)d.addShortcut("access+"+u,"",["FormatBlock",!1,"h"+u]);d.addShortcut("access+7","",["FormatBlock",!1,"p"]),d.addShortcut("access+8","",["FormatBlock",!1,"div"]),d.addShortcut("access+9","",["FormatBlock",!1,"address"])})(n),(d=n).on("mouseup keydown",u=>{var f;((v,_,k)=>{const T=v.selection,M=v.getBody();Uk(v,null,k),8!==_&&46!==_||!T.isCollapsed()||T.getStart().innerHTML!==vr||Uk(v,mp(M,T.getStart()),!0),37!==_&&39!==_||Uk(v,mp(M,T.getStart()),!0)})(d,u.keyCode,(f=d.selection.getRng().endContainer,Mt(f)&&En(f.data,Bi)))}),wc(n)||((d,u)=>{d.set({}),u.on("NodeChange",f=>{dw(u,f.element,d.get())}),u.on("FormatApply FormatRemove",f=>{const v=ue.from(f.node).map(_=>Us(_)?_:_.startContainer).bind(_=>nn(_)?ue.some(_):ue.from(_.parentElement)).getOrThunk(()=>tT(u));dw(u,v,d.get())})})(s,n),{get:i.get,has:i.has,register:i.register,unregister:i.unregister,apply:(d,u,f)=>{var _,k,T;_=d,k=u,T=f,ni(n).formatter.apply(_,k,T)},remove:(d,u,f,v)=>{var k,T,M,I;k=d,T=u,M=f,I=v,ni(n).formatter.remove(k,T,M,I)},toggle:(d,u,f)=>{var _,k,T;_=d,k=u,T=f,ni(n).formatter.toggle(_,k,T)},match:(d,u,f,v)=>{return k=d,T=u,M=f,I=v,ni(n).formatter.match(k,T,M,I);var k,T,M,I},closest:d=>{return f=d,ni(n).formatter.closest(f);var f},matchAll:(d,u)=>{return v=d,_=u,ni(n).formatter.matchAll(v,_);var v,_},matchNode:(d,u,f,v)=>{return k=d,T=u,M=f,I=v,ni(n).formatter.matchNode(k,T,M,I);var k,T,M,I},canApply:d=>{return f=d,ni(n).formatter.canApply(f);var f},formatChanged:(d,u,f,v)=>{return k=s,T=d,M=u,I=f,O=v,ni(n).formatter.formatChanged(k,T,M,I,O);var k,T,M,I,O},getCssText:We(wT,n)};var d},yh=n=>{switch(n.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},bh=n=>{const i=zl(),s=ur(0),d=ur(0),u={data:[],typing:!1,beforeChange:()=>{var v,_;v=s,_=i,ni(n).undoManager.beforeChange(v,_)},add:(f,v)=>{return k=u,T=d,M=s,I=i,O=f,R=v,ni(n).undoManager.add(k,T,M,I,O,R);var k,T,M,I,O,R},dispatchChange:()=>{n.setDirty(!0);const f=Sw(n);f.bookmark=Dm(n.selection),n.dispatch("change",{level:f,lastLevel:ao(u.data,d.get()).getOrUndefined()})},undo:()=>{return v=u,_=s,k=d,ni(n).undoManager.undo(v,_,k);var v,_,k},redo:()=>{return v=d,_=u.data,ni(n).undoManager.redo(v,_);var v,_},clear:()=>{var v,_;v=u,_=d,ni(n).undoManager.clear(v,_)},reset:()=>{var v;v=u,ni(n).undoManager.reset(v)},hasUndo:()=>{return v=u,_=d,ni(n).undoManager.hasUndo(v,_);var v,_},hasRedo:()=>{return v=u,_=d,ni(n).undoManager.hasRedo(v,_);var v,_},transact:f=>{return _=u,k=s,T=f,ni(n).undoManager.transact(_,k,T);var _,k,T},ignore:f=>{var _,k;_=s,k=f,ni(n).undoManager.ignore(_,k)},extra:(f,v)=>{var k,T,M,I;k=u,T=d,M=f,I=v,ni(n).undoManager.extra(k,T,M,I)}};return wc(n)||((f,v,_)=>{const k=ur(!1),T=M=>{Of(v,!1,_),v.add({},M)};f.on("init",()=>{v.add()}),f.on("BeforeExecCommand",M=>{yh(M.command)||(B2(v,_),v.beforeChange())}),f.on("ExecCommand",M=>{yh(M.command)||T(M)}),f.on("ObjectResizeStart cut",()=>{v.beforeChange()}),f.on("SaveContent ObjectResized blur",T),f.on("dragend",T),f.on("keyup",M=>{const I=M.keyCode;if(M.isDefaultPrevented())return;const O=Yt.os.isMacOS()&&"Meta"===M.key;(I>=33&&I<=36||I>=37&&I<=40||45===I||M.ctrlKey||O)&&(T(),f.nodeChanged()),46!==I&&8!==I||f.nodeChanged(),k.get()&&v.typing&&!mh(Sw(f),v.data[0])&&(f.isDirty()||f.setDirty(!0),f.dispatch("TypingUndo"),k.set(!1),f.nodeChanged())}),f.on("keydown",M=>{const I=M.keyCode;if(!M.isDefaultPrevented()){if(!(I>=33&&I<=36||I>=37&&I<=40||45===I))return!(I<16||I>20)||224===I||91===I||v.typing||M.ctrlKey&&!M.altKey||M.metaKey?void((Yt.os.isMacOS()?M.metaKey:M.ctrlKey&&!M.altKey)&&v.beforeChange()):(v.beforeChange(),Of(v,!0,_),v.add({},M),void k.set(!0));v.typing&&T(M)}}),f.on("mousedown",M=>{v.typing&&T(M)}),f.on("input",M=>{var I,O;M.inputType&&("insertReplacementText"===M.inputType||"insertText"===(I=M).inputType&&null===I.data||"insertFromPaste"===(O=M).inputType||"insertFromDrop"===O.inputType)&&T(M)}),f.on("AddUndo Undo Redo ClearUndos",M=>{M.isDefaultPrevented()||f.nodeChanged()})})(n,u,s),(f=n).addShortcut("meta+z","","Undo"),f.addShortcut("meta+y,meta+shift+z","","Redo"),u;var f},yg=[9,27,Kt.HOME,Kt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Kt.DOWN,Kt.UP,Kt.LEFT,Kt.RIGHT].concat(Yt.browser.isFirefox()?[224]:[]),Uf="data-mce-placeholder",bg=n=>"keydown"===n.type||"keyup"===n.type,ST=n=>{const i=n.keyCode;return i===Kt.BACKSPACE||i===Kt.DELETE},zO=(n,i)=>({from:n,to:i}),CT=(n,i)=>{const s=Ze(n),d=Ze(i.container());return Gb(s,d).map(u=>({block:u,position:i}))},j2=(n,i)=>ol(i,s=>Ad(s)||ll(s.dom),s=>To(s,n)).filter(ci).getOr(n),q2=(n,i)=>{const s=((d,u)=>{const f=Qr(d);return ft(f,v=>u.isBlock(mo(v))).fold(ee(f),v=>f.slice(0,v))})(n,i);return Qe(s,Ke),s},FO=(n,i,s)=>{const d=bi(s,i);return Qo(d.reverse(),u=>na(n,u)).each(Ke)},VO=(n,i,s,d,u)=>{if(na(d,s))return rp(s),Ws(s.dom);var v;v=d,0===dn(Uy(u),k=>!na(v,k)).length&&na(d,i)&&ki(u,yr("br"));const f=pc(s.dom,ut.before(u.dom));return Qe(q2(i,d),v=>{ki(u,v)}),FO(d,n,i),f},$2=(n,i,s,d)=>{if(na(d,s)){if(na(d,i)){const v=Ao((_=>{const k=(T,M)=>Fh(T).fold(()=>M,I=>d.isInline(mo(I))?k(I,M.concat(lu(I))):M);return k(_,[])})(s),(_,k)=>(xe(_,k),k),op());Le(i),ge(i,v)}return Ke(s),Ws(i.dom)}const u=uu(s.dom);return Qe(q2(i,d),f=>{ge(s,f)}),FO(d,n,i),u},kT=(n,i)=>{Wm(n,i.dom).bind(s=>ue.from(s.getNode())).map(Ze).filter(tp).each(Ke)},Wp=(n,i,s,d)=>{return kT(!0,i),kT(!1,s),(u=i,f=s,Es(f,u)?((v,_)=>{const k=bi(_,v);return ue.from(k[k.length-1])})(f,u):ue.none()).fold(We($2,n,i,s,d),We(VO,n,i,s,d));var u,f},TT=(n,i,s,d,u)=>i?Wp(n,d,s,u):Wp(n,s,d,u),Tx=(n,i)=>{const s=Ze(n.getBody());return(u=n.schema,f=s.dom,v=i,_=n.selection.getRng(),_.collapsed?((k,T,M,I)=>{const O=CT(T,ut.fromRangeStart(I)),R=O.bind(N=>bl(M,T,N.position).bind(z=>CT(T,z).map(L=>{return V=k,J=T,te=M,Bn((re=L).position.getNode())&&!na(V,re.block)?Wm(!1,re.block.dom).bind(ie=>ie.isEqual(re.position)?bl(te,J,ie).bind(he=>CT(J,he)):ue.some(re)).getOr(re):re;var V,J,te,re})));return ea(O,R,zO).filter(N=>{return!To((z=N).from.block,z.to.block)&&((z,L)=>{const V=Ze(z);return To(j2(V,L.from.block),j2(V,L.to.block))})(T,N)&&(z=>!1===fo(z.from.block.dom)&&!1===fo(z.to.block.dom))(N)&&(z=>{const L=V=>j1(V)||Xg(V.dom)||np(V);return L(z.from.block)&&L(z.to.block)})(N)&&(z=>!(Es(z.to.block,z.from.block)||Es(z.from.block,z.to.block)))(N);var z})})(u,f,v,_):ue.none()).map(u=>()=>{TT(s,i,u.from.block,u.to.block,n.schema).each(f=>{n.selection.setRng(f.toRange())})});var u,f,v,_},MT=(n,i)=>{const s=Ze(i),d=We(To,n);return Fr(s,Ad,d).isSome()},Q0=(n,i)=>n.selection.isCollapsed()?ue.none():(n=>{const i=Ze(n.getBody());return((s,d)=>{const u=pc(s.dom,ut.fromRangeStart(d)).isNone(),f=xl(s.dom,ut.fromRangeEnd(d)).isNone();return!(MT(v=s,(_=d).startContainer)||MT(v,_.endContainer))&&u&&f;var v,_})(i,n.selection.getRng())?(s=n,ue.some(()=>{s.setContent(""),s.selection.setCursorLocation()})):((s,d,u)=>{const f=d.getRng();return ea(Gb(s,Ze(f.startContainer)),Gb(s,Ze(f.endContainer)),(v,_)=>To(v,_)?ue.none():ue.some(()=>{f.deleteContents(),TT(s,!0,v,_,u).each(k=>{d.setRng(k.toRange())})})).getOr(ue.none())})(i,n.selection,n.schema);var s})(n),ku=(n,i,s,d,u)=>ue.from(i._selectionOverrides.showCaret(n,s,d,u)),Gf=(n,i)=>n.dispatch("BeforeObjectSelected",{target:i}).isDefaultPrevented()?ue.none():ue.some((s=>{const d=s.ownerDocument.createRange();return d.selectNode(s),d})(i)),Ew=(n,i,s)=>i.collapsed?((d,u,f)=>{const v=Id(1,d.getBody(),u),_=ut.fromRangeStart(v),k=_.getNode();if(s0(k))return ku(1,d,k,!_.isAtEnd(),!1);const T=_.getNode(!0);if(s0(T))return ku(1,d,T,!1,!1);const M=Qc(d.dom.getRoot(),_.getNode());return s0(M)?ku(1,d,M,!1,f):ue.none()})(n,i,s).getOr(i):i,Nw=n=>Tp(n)||Dn(n),ey=n=>Mp(n)||hg(n),Mx=(n,i,s,d,u,f)=>{var v,_;ku(d,n,f.getNode(!u),u,!0).each(v=>{if(i.collapsed){const _=i.cloneRange();u?_.setEnd(v.startContainer,v.startOffset):_.setStart(v.endContainer,v.endOffset),_.deleteContents()}else i.deleteContents();n.selection.setRng(v)}),v=n.dom,Mt(_=s)&&0===_.data.length&&v.remove(_)},Rw=(n,i)=>((s,d)=>{const u=s.selection.getRng();if(!Mt(u.commonAncestorContainer))return ue.none();const f=d?ka.Forwards:ka.Backwards,v=Dd(s.getBody()),_=We(GC,d?v.next:v.prev),k=d?Nw:ey,T=oh(f,s.getBody(),u),M=_(T),I=M&&Ms(d,M);if(!I||!Za(T,I))return ue.none();if(k(I))return ue.some(()=>Mx(s,u,T.getNode(),f,d,I));const O=_(I);return O&&k(O)&&Za(I,O)?ue.some(()=>Mx(s,u,T.getNode(),f,d,O)):ue.none()})(n,i),Lw=(n,i)=>{const s=n.getBody();return i?Ws(s).filter(Tp):uu(s).filter(Mp)},Pw=n=>{const i=n.selection.getRng();return!i.collapsed&&(Lw(n,!0).exists(s=>s.isEqual(ut.fromRangeStart(i)))||Lw(n,!1).exists(s=>s.isEqual(ut.fromRangeEnd(i))))},Qa=$h([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Bw=(n,i,s,d)=>bl(i,n,s).bind(u=>{return f=u.getNode(),ae(f)&&(Ad(Ze(f))||np(Ze(f)))||((v,_,k,T,M)=>{const I=O=>M.isInline(O.nodeName.toLowerCase())&&!Cs(k,T,v);return u_(!_,k).fold(()=>u_(_,T).fold(Bt,I),I)})(n,i,s,u,d)?ue.none():i&&fo(u.getNode())||!i&&fo(u.getNode(!0))?((v,_,k,T,M)=>{const I=M.getNode(!k);return Gb(Ze(_),Ze(T.getNode())).map(O=>na(v,O)?Qa.remove(O.dom):Qa.moveToElement(I)).orThunk(()=>ue.some(Qa.moveToElement(I)))})(d,n,i,s,u):i&&Mp(s)||!i&&Tp(s)?ue.some(Qa.moveToPosition(u)):ue.none();var f}),X2=(n,i)=>ue.from(Qc(n.getBody(),i)),HO=n=>{const i=n.dom,s=n.selection,d=Qc(n.getBody(),s.getNode());if(ll(d)&&i.isBlock(d)&&i.isEmpty(d)){const u=i.create("br",{"data-mce-bogus":"1"});i.setHTML(d,""),d.appendChild(u),s.setRng(ut.before(u).toRange())}return!0},AT=(n,i)=>n.selection.isCollapsed()?((n,i)=>{const s=n.selection.getNode();return X2(n,s).filter(fo).fold(()=>((d,u,f,v)=>{const _=Id(u?1:-1,d,f),k=ut.fromRangeStart(_),T=Ze(d);return!u&&Mp(k)?ue.some(Qa.remove(k.getNode(!0))):u&&Tp(k)?ue.some(Qa.remove(k.getNode())):!u&&Tp(k)&&Ck(T,k,v)?yO(T,k,v).map(M=>Qa.remove(M.getNode())):u&&Mp(k)&&s2(T,k,v)?nN(T,k,v).map(M=>Qa.remove(M.getNode())):(M=d,R=v,((N,z)=>{const L=z.getNode(!N),V=N?"after":"before";return nn(L)&&L.getAttribute("data-mce-caret")===V})(I=u,O=k)?(N=I,z=O.getNode(!I),_e(z)?ue.none():N&&fo(z.nextSibling)?ue.some(Qa.moveToElement(z.nextSibling)):!N&&fo(z.previousSibling)?ue.some(Qa.moveToElement(z.previousSibling)):ue.none()).orThunk(()=>Bw(M,I,O,R)):Bw(M,I,O,R).bind(N=>((z,L,V)=>V.fold(J=>ue.some(Qa.remove(J)),J=>ue.some(Qa.moveToElement(J)),J=>Cs(L,J,z)?ue.none():ue.some(Qa.moveToPosition(J))))(M,O,N)));var M,I,O,R,N,z})(n.getBody(),i,n.selection.getRng(),n.schema).map(d=>()=>{return d.fold((u=n,f=i,v=>(u._selectionOverrides.hideFakeCaret(),vu(u,f,Ze(v)),!0)),((u,f)=>v=>{const _=f?ut.before(v):ut.after(v);return u.selection.setRng(_.toRange()),!0})(n,i),(u=>f=>(u.selection.setRng(f.toRange()),!0))(n));var u,f}),()=>ue.some(ve))})(n,i):((s,d)=>{const u=s.selection.getNode();return fo(u)&&!Nv(u)?X2(s,u.parentNode).filter(fo).fold(()=>ue.some(()=>{var f;f=Ze(s.getBody()),Qe(jo(f,".mce-offscreen-selection"),Ke),vu(s,d,Ze(s.selection.getNode())),ch(s)}),()=>ue.some(ve)):Pw(s)?ue.some(()=>{Dp(s,s.selection.getRng(),Ze(s.getBody()))}):ue.none()})(n,i),IT=n=>n.hasOwnProperty("text"),Zr=n=>n.hasOwnProperty("marker"),Ax=(n,i)=>{const s=(u,f)=>{if(Mt(u))return{text:u,offset:f};{const v=i(),_=u.childNodes;return f<_.length?(u.insertBefore(v,_[f]),{marker:v,before:!0}):(u.appendChild(v),{marker:v,before:!1})}},d=s(n.endContainer,n.endOffset);return{start:s(n.startContainer,n.startOffset),end:d}},K2=n=>{var i,s;const{start:d,end:u}=n,f=new window.Range;return IT(d)?f.setStart(d.text,d.offset):Zr(d)&&(d.before?f.setStartBefore(d.marker):f.setStartAfter(d.marker),null===(i=d.marker.parentNode)||void 0===i||i.removeChild(d.marker)),IT(u)?f.setEnd(u.text,u.offset):Zr(u)&&(u.before?f.setEndBefore(u.marker):f.setEndAfter(u.marker),null===(s=u.marker.parentNode)||void 0===s||s.removeChild(u.marker)),f},DT=(n,i)=>{var s;const d=n.dom,u=d.getParent(n.selection.getStart(),d.isBlock),f=d.getParent(n.selection.getEnd(),d.isBlock),v=n.getBody();if("div"===(null===(s=u?.nodeName)||void 0===s?void 0:s.toLowerCase())&&u&&f&&u===v.firstChild&&f===v.lastChild&&!d.isEmpty(v)){const _=u.cloneNode(!1);return ue.some(()=>{if(i?I0(n):df(n),v.firstChild!==u){const T=Ax(n.selection.getRng(),()=>document.createElement("span"));Array.from(v.childNodes).forEach(M=>_.appendChild(M)),v.appendChild(_),n.selection.setRng(K2(T))}})}return ue.none()},jf=(n,i)=>n.selection.isCollapsed()?((s,d)=>{const u=ut.fromRangeStart(s.selection.getRng());return bl(d,s.getBody(),u).filter(f=>d?eN(f):tN(f)).bind(f=>VC(d?0:-1,f)).map(f=>()=>s.selection.select(f))})(n,i):ue.none(),dd=Mt,Hd=n=>dd(n)&&n.data[0]===Sa,OT=n=>dd(n)&&n.data[n.data.length-1]===Sa,ET=n=>{var i;return(null!==(i=n.ownerDocument)&&void 0!==i?i:document).createTextNode(Sa)},Ix=(n,i)=>n?(s=>{var d;if(dd(s.previousSibling))return OT(s.previousSibling)||s.previousSibling.appendData(Sa),s.previousSibling;if(dd(s))return Hd(s)||s.insertData(0,Sa),s;{const u=ET(s);return null===(d=s.parentNode)||void 0===d||d.insertBefore(u,s),u}})(i):(s=>{var d,u;if(dd(s.nextSibling))return Hd(s.nextSibling)||s.nextSibling.insertData(0,Sa),s.nextSibling;if(dd(s))return OT(s)||s.appendData(Sa),s;{const f=ET(s);return s.nextSibling?null===(d=s.parentNode)||void 0===d||d.insertBefore(f,s.nextSibling):null===(u=s.parentNode)||void 0===u||u.appendChild(f),f}})(i),zw=We(Ix,!0),J2=We(Ix,!1),NT=(n,i)=>Mt(n.container())?Ix(i,n.container()):Ix(i,n.getNode()),Q2=(n,i)=>{const s=i.get();return s&&n.container()===s&&$a(s)},RT=(n,i)=>i.fold(s=>{eg(n.get());const d=zw(s);return n.set(d),ue.some(ut(d,d.length-1))},s=>Ws(s).map(d=>{if(Q2(d,n)){const u=n.get();return ut(u,1)}{eg(n.get());const u=NT(d,!0);return n.set(u),ut(u,1)}}),s=>uu(s).map(d=>{if(Q2(d,n)){const u=n.get();return ut(u,u.length-1)}{eg(n.get());const u=NT(d,!1);return n.set(u),ut(u,u.length-1)}}),s=>{eg(n.get());const d=J2(s);return n.set(d),ue.some(ut(d,1))}),Dx=(n,i)=>{for(let s=0;s<n.length;s++){const d=n[s].apply(null,i);if(d.isSome())return d}return ue.none()},Is=$h([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Fw=(n,i)=>Yr(i,n)||n,WO=(n,i,s)=>{const d=Ik(s),u=Fw(i,d.container());return Xl(n,u,d).fold(()=>xl(u,d).bind(We(Xl,n,u)).map(f=>Is.before(f)),ue.none)},eI=(n,i)=>null===mp(n,i),Sc=(n,i,s)=>Xl(n,i,s).filter(We(eI,i)),tI=(n,i,s)=>{const d=q_(s);return Sc(n,i,d).bind(u=>pc(u,d).isNone()?ue.some(Is.start(u)):ue.none())},UO=(n,i,s)=>{const d=Ik(s);return Sc(n,i,d).bind(u=>xl(u,d).isNone()?ue.some(Is.end(u)):ue.none())},ty=(n,i,s)=>{const d=q_(s),u=Fw(i,d.container());return Xl(n,u,d).fold(()=>pc(u,d).bind(We(Xl,n,u)).map(f=>Is.after(f)),ue.none)},Ox=n=>!j_(LT(n)),Wd=(n,i,s)=>Dx([WO,tI,UO,ty],[n,i,s]).filter(Ox),LT=n=>n.fold(Se,Se,Se,Se),Ex=n=>n.fold(ee("before"),ee("start"),ee("end"),ee("after")),Jl=n=>n.fold(Is.before,Is.before,Is.after,Is.after),nI=n=>n.fold(Is.start,Is.start,Is.end,Is.end),GO=(n,i,s,d,u,f)=>ea(Xl(i,s,d),Xl(i,s,u),(v,_)=>v!==_&&((k,T,M)=>{const I=Yr(T,k),O=Yr(M,k);return ae(I)&&I===O})(s,v,_)?Is.after(n?v:_):f).getOr(f),ny=(n,i)=>n.fold(Wt,s=>{return u=i,!(Ex(d=s)===Ex(u)&&LT(d)===LT(u));var d,u}),jO=(n,i)=>n?i.fold(Me(ue.some,Is.start),ue.none,Me(ue.some,Is.after),ue.none):i.fold(ue.none,Me(ue.some,Is.before),ue.none,Me(ue.some,Is.end)),oI=(n,i,s)=>{const d=n?1:-1;return i.setRng(ut(s.container(),s.offset()+d).toRange()),i.getSel().modify("move",n?"forward":"backward","word"),!0};var xg;!function(n){n[n.Br=0]="Br",n[n.Block=1]="Block",n[n.Wrap=2]="Wrap",n[n.Eol=3]="Eol"}(xg||(xg={}));const Vw=(n,i)=>n===ka.Backwards?tn(i):i,Hw=(n,i,s)=>n===ka.Forwards?i.next(s):i.prev(s),Up=(n,i,s,d)=>Bn(d.getNode(i===ka.Forwards))?xg.Br:!1===Cs(s,d)?xg.Block:xg.Wrap,Nx=(n,i,s,d)=>{const u=Dd(s);let f=d;const v=[];for(;f;){const _=Hw(i,u,f);if(!_)break;if(Bn(_.getNode(!1)))return i===ka.Forwards?{positions:Vw(i,v).concat([_]),breakType:xg.Br,breakAt:ue.some(_)}:{positions:Vw(i,v),breakType:xg.Br,breakAt:ue.some(_)};if(_.isVisible()){if(n(f,_)){const k=Up(0,i,f,_);return{positions:Vw(i,v),breakType:k,breakAt:ue.some(_)}}v.push(_),f=_}else f=_}return{positions:Vw(i,v),breakType:xg.Eol,breakAt:ue.none()}},_g=(n,i,s,d)=>i(s,d).breakAt.map(u=>{const f=i(s,u).positions;return n===ka.Backwards?f.concat(u):[u].concat(f)}).getOr([]),rI=(n,i)=>Oo(n,(s,d)=>s.fold(()=>ue.some(d),u=>ea(Rn(u.getClientRects()),Rn(d.getClientRects()),(f,v)=>{const _=Math.abs(i-f.left);return Math.abs(i-v.left)<=_?d:u}).or(s)),ue.none()),Cc=(n,i)=>Rn(i.getClientRects()).bind(s=>rI(n,s.left)),oy=We(Nx,ut.isAbove,-1),Ww=We(Nx,ut.isBelow,1),qO=We(_g,-1,oy),$o=We(_g,1,Ww),iI=(n,i)=>oy(n,i).breakAt.isNone(),ry=(n,i)=>Ww(n,i).breakAt.isNone(),Uw=(n,i)=>Cc(qO(n,i),i),aI=(n,i)=>Cc($o(n,i),i),qf=fo,Ys=(n,i)=>Math.abs(n.left-i),Rx=(n,i)=>Math.abs(n.right-i),xh=(n,i)=>el(n,(s,d)=>{const u=Math.min(Ys(s,i),Rx(s,i)),f=Math.min(Ys(d,i),Rx(d,i));return f===u&&Jd(d,"node")&&qf(d.node)||f<u?d:s}),_h=n=>{const i=s=>hn(s,d=>{const u=Ju(d);return u.node=n,u});if(nn(n))return i(n.getClientRects());if(Mt(n)){const s=n.ownerDocument.createRange();return s.setStart(n,0),s.setEnd(n,n.data.length),i(s.getClientRects())}return[]},$f=n=>Tt(n,_h);var Yf;!function(n){n[n.Up=-1]="Up",n[n.Down=1]="Down"}(Yf||(Yf={}));const Gw=(n,i,s,d,u,f)=>{let v=0;const _=[],k=I=>{let O=$f([I]);-1===n&&(O=O.reverse());for(let R=0;R<O.length;R++){const N=O[R];if(!s(N,T)){if(_.length>0&&i(N,os(_))&&v++,N.line=v,u(N))return!0;_.push(N)}}return!1},T=os(f.getClientRects());if(!T)return _;const M=f.getNode();return M&&(k(M),((I,O,R,N)=>{let z=N;for(;z=ng(z,I,_A,O);)if(R(z))return})(n,d,k,M)),_},sI=We(Gw,Yf.Up,Kn,Ss),$O=We(Gw,Yf.Down,Ss,Kn),YO=n=>os(n.getClientRects()),XO=n=>i=>i.line>n,PT=n=>i=>i.line===n,wg=(n,i)=>{n.selection.setRng(i),Sp(n,n.selection.getRng())},BT=(n,i,s)=>ue.some(Ew(n,i,s)),lI=(n,i,s,d,u,f)=>{const v=i===ka.Forwards,_=Dd(n.getBody()),k=We(GC,v?_.next:_.prev),T=v?d:u;if(!s.collapsed){const N=ip(s);if(f(N))return ku(i,n,N,i===ka.Backwards,!1);if(Pw(n)){const z=s.cloneRange();return z.collapse(i===ka.Backwards),ue.from(z)}}const M=oh(i,n.getBody(),s);if(T(M))return Gf(n,M.getNode(!v));let I=k(M);const O=q1(s);if(!I)return O?ue.some(s):ue.none();if(I=Ms(v,I),T(I))return ku(i,n,I.getNode(!v),v,!1);const R=k(I);return R&&T(R)&&Za(I,R)?ku(i,n,R.getNode(!v),v,!1):O?BT(n,I.toRange(),!1):ue.none()},jw=(n,i,s,d,u,f)=>{const v=oh(i,n.getBody(),s),_=os(v.getClientRects()),k=i===Yf.Down,T=n.getBody();if(!_)return ue.none();if(Pw(n)){const z=k?ut.fromRangeEnd(s):ut.fromRangeStart(s);return(k?aI:Uw)(T,z).orThunk(()=>ue.from(z)).map(L=>L.toRange())}const M=(k?$O:sI)(T,XO(1),v),I=dn(M,PT(1)),O=_.left,R=xh(I,O);if(R&&f(R.node)){const z=Math.abs(O-R.left),L=Math.abs(O-R.right);return ku(i,n,R.node,z<L,!1)}let N;if(N=d(v)?v.getNode():u(v)?v.getNode(!0):ip(s),N){const z=((V,J,te,re)=>{const ie=Dd(J);let he,fe,ye,Ie;const He=[];let we=0;1===V?(he=ie.next,fe=Ss,ye=Kn,Ie=ut.after(re)):(he=ie.prev,fe=Kn,ye=Ss,Ie=ut.before(re));const De=YO(Ie);do{if(!Ie.isVisible())continue;const Be=YO(Ie);if(ye(Be,De))continue;He.length>0&&fe(Be,os(He))&&we++;const et=Ju(Be);if(et.position=Ie,et.line=we,te(et))return He;He.push(et)}while(Ie=he(Ie));return He})(i,T,XO(1),N);let L=xh(dn(z,PT(1)),O);if(L||(L=os(dn(z,PT(0))),L))return BT(n,L.position.toRange(),!1)}return 0===I.length?zT(n,k).filter(k?u:d).map(z=>Ew(n,z.toRange(),!1)):ue.none()},zT=(n,i)=>{const s=n.selection.getRng(),d=i?ut.fromRangeEnd(s):ut.fromRangeStart(s),u=(f=d.container(),v=n.getBody(),Fr(Ze(f),_=>tO(_.dom),_=>_.dom===v).map(_=>_.dom).getOr(v));var f,v;if(i){const _=Ww(u,d);return wi(_.positions)}{const _=oy(u,d);return Rn(_.positions)}},FT=(n,i,s)=>zT(n,i).filter(s).exists(d=>(n.selection.setRng(d.toRange()),!0)),Sg=(n,i)=>{const s=n.dom.createRng();s.setStart(i.container(),i.offset()),s.setEnd(i.container(),i.offset()),n.selection.setRng(s)},wh=(n,i)=>{n?i.setAttribute("data-mce-selected","inline-boundary"):i.removeAttribute("data-mce-selected")},Lx=(n,i,s)=>RT(i,s).map(d=>(Sg(n,d),s)),VT=(n,i,s)=>!!Pm(n)&&((n,i,s)=>{const d=n.getBody(),u=((f,v,_)=>{const k=ut.fromRangeStart(f);if(f.collapsed)return k;{const T=ut.fromRangeEnd(f);return _?pc(v,T).getOr(T):xl(v,k).getOr(k)}})(n.selection.getRng(),d,s);return((f,v,_,k)=>{const T=Ms(f,k),M=Wd(v,_,T);return Wd(v,_,T).bind(We(jO,f)).orThunk(()=>((I,O,R,N,z)=>{const L=Ms(I,z);return bl(I,R,L).map(We(Ms,I)).fold(()=>N.map(Jl),V=>Wd(O,R,V).map(We(GO,I,O,R,L,V)).filter(We(ny,N))).filter(Ox)})(f,v,_,M,k))})(s,We(cf,n),d,u).bind(f=>Lx(n,i,f))})(n,i,s).isSome(),iy=(n,i,s)=>!!Pm(i)&&((d,u)=>{const f=u.selection.getRng(),v=d?ut.fromRangeEnd(f):ut.fromRangeStart(f);return!!Ge(u.selection.getSel().modify)&&(d&&Xv(v)?oI(!0,u.selection,v):!(d||!Ya(v))&&oI(!1,u.selection,v))})(n,i),Sh=We(iy,!0),HT=We(iy,!1),Px=(n,i,s)=>{if(Pm(n)){const d=zT(n,i).getOrThunk(()=>{const u=n.selection.getRng();return i?ut.fromRangeEnd(u):ut.fromRangeStart(u)});return Wd(We(cf,n),n.getBody(),d).exists(u=>{const f=Jl(u);return RT(s,f).exists(v=>(Sg(n,v),!0))})}return!1},qw=(n,i)=>s=>RT(i,s).map(d=>()=>Sg(n,d)),dI=(n,i,s,d)=>{const u=n.getBody(),f=We(cf,n);n.undoManager.ignore(()=>{n.selection.setRng(((v,_)=>{const k=document.createRange();return k.setStart(v.container(),v.offset()),k.setEnd(_.container(),_.offset()),k})(s,d)),df(n),Wd(f,u,ut.fromRangeStart(n.selection.getRng())).map(nI).bind(qw(n,i)).each(nt)}),n.nodeChanged()},WT=(n,i,s)=>{if(n.selection.isCollapsed()&&Pm(n)){const d=ut.fromRangeStart(n.selection.getRng());return((u,f,v,_)=>{const k=(I=u.getBody(),O=_.container(),Yr(O,I)||I),T=We(cf,u),M=Wd(T,k,_);var I,O;return M.bind(I=>v?I.fold(ee(ue.some(nI(I))),ue.none,ee(ue.some(Jl(I))),ue.none):I.fold(ue.none,ee(ue.some(Jl(I))),ue.none,ee(ue.some(nI(I))))).map(qw(u,f)).getOrThunk(()=>{const I=ig(v,k,_),O=I.bind(R=>Wd(T,k,R));return ea(M,O,()=>Xl(T,k,_).bind(R=>{return ea(Ws(N=R),uu(N),(z,L)=>{const V=Ms(!0,z),J=Ms(!1,L);return xl(N,V).forall(te=>te.isEqual(J))}).getOr(!0)?ue.some(()=>{vu(u,v,Ze(R))}):ue.none();var N})).getOrThunk(()=>O.bind(()=>I.map(R=>()=>{v?dI(u,f,_,R):dI(u,f,R,_)})))})})(n,i,s,d)}return ue.none()},Zf=(n,i)=>{const s=Ze(n.getBody()),d=Ze(n.selection.getStart()),u=bi(d,s);return ft(u,i).fold(ee(u),f=>u.slice(0,f))},ZO=n=>1===xs(n),$w=(n,i)=>{const s=We($k,n);return Tt(i,d=>s(d)?[d.dom]:[])},uI=n=>{const i=Zf(s=n,d=>s.schema.isBlock(mo(d)));var s;return $w(n,i)},hI=(n,i)=>{const s=n.selection.getStart(),d=((u,f)=>{const v=f.parentElement;return Bn(f)&&!le(v)&&u.dom.isEmpty(v)})(n,s)||__(Ze(s))?vf(s,i):((u,f)=>{const{caretContainer:v,caretPosition:_}=qk(f);return u.insertNode(v.dom),_})(n.selection.getRng(),i);n.selection.setRng(d.toRange())},Bx=n=>Mt(n.startContainer),Cg=(n,i)=>n.selection.isCollapsed()?((n,i)=>{const s=dn(Zf(d=n,u=>d.schema.isBlock(mo(u))||xs(u)>1),ZO);var d;return wi(s).bind(d=>{const u=ut.fromRangeStart(n.selection.getRng());return yu(i,u,d.dom)&&!__(d)?ue.some(()=>((f,v,_,k)=>{const T=$w(v,k);if(0===T.length)vu(v,f,_);else{const M=vf(_.dom,T);v.selection.setRng(M.toRange())}})(i,n,d,s)):ue.none()})})(n,i):(s=>{if((n=>{const i=n.selection.getRng();return 0===(s=i).startOffset&&Bx(s)&&((s,d)=>{const u=d.startContainer.parentElement;return!le(u)&&$k(s,Ze(u))})(n,i)&&(s=>{return(u=>{const f=u.startContainer.parentNode,v=u.endContainer.parentNode;return!le(f)&&!le(v)&&f.isEqualNode(v)})(d=s)&&(u=>{const f=u.endContainer;return u.endOffset===(Mt(f)?f.length:f.childNodes.length)})(d)||(d=>!d.endContainer.isEqualNode(d.commonAncestorContainer))(s);var d})(i);var s})(s)){const d=uI(s);return ue.some(()=>{df(s),((u,f)=>{const v=on(f,uI(u));v.length>0&&hI(u,v)})(s,d)})}return ue.none()})(n),Ud=n=>((i=>{const s=i.selection.getRng();return s.collapsed&&(Bx(s)||i.dom.isEmpty(s.startContainer))&&(u=Ze((d=i).selection.getStart()),f=d.schema,!dr(u,v=>Nr(v.dom),v=>f.isBlock(mo(v))));var d,u,f})(n)&&hI(n,[]),!0),ay=(n,i,s)=>ae(s)?ue.some(()=>{n._selectionOverrides.hideFakeCaret(),vu(n,i,Ze(s))}):ue.none(),Kf=(n,i)=>n.selection.isCollapsed()?((s,d)=>{const u=d?Dn:hg,v=oh(d?ka.Forwards:ka.Backwards,s.getBody(),s.selection.getRng());return u(v)?ay(s,d,v.getNode(!d)):ue.from(Ms(d,v)).filter(_=>u(_)&&Za(v,_)).bind(_=>ay(s,d,_.getNode(!d)))})(n,i):((s,d)=>{const u=s.selection.getNode();return Sd(u)?ay(s,d,u):ue.none()})(n,i),kg=n=>li(n??"").getOr(0),Gp=(n,i)=>(n||"table"===mo(i)?"margin":"padding")+("rtl"===Ci(i,"direction")?"-right":"-left"),zx=n=>{const i=GT(n);return!n.mode.isReadOnly()&&(i.length>1||(s=n,$t(i,u=>{const f=Gp(n0(s),u),v=Ov(u,f).map(kg).getOr(0);return"false"!==s.dom.getContentEditable(u.dom)&&v>0})));var s},Fx=n=>Yo(n)||np(n),GT=n=>dn(At(n.selection.getSelectedBlocks()),i=>!Fx(i)&&!pn(i).exists(Fx)&&ol(i,s=>ll(s.dom)||fo(s.dom)).exists(s=>ll(s.dom))),Yw=(n,i)=>{var s,d;if(n.mode.isReadOnly())return;const{dom:u}=n,f=hc(n),v=null!==(d=null===(s=/[a-z%]+$/i.exec(f))||void 0===s?void 0:s[0])&&void 0!==d?d:"px",_=kg(f),k=n0(n);Qe(GT(n),T=>{((M,I,O,R,N,z)=>{const L=Gp(O,Ze(z)),V=kg(M.getStyle(z,L));if("outdent"===I){const J=Math.max(0,V-R);M.setStyle(z,L,J?J+N:"")}else M.setStyle(z,L,V+R+N)})(u,i,k,_,v,T.dom)})},jT=n=>Yw(n,"outdent"),pI=n=>{if(n.selection.isCollapsed()&&zx(n)){const i=n.dom,s=n.selection.getRng(),d=ut.fromRangeStart(s),u=i.getParent(s.startContainer,i.isBlock);if(null!==u&&T0(Ze(u),d,n.schema))return ue.some(()=>jT(n))}return ue.none()},Xw=(n,i,s)=>Si([pI,AT,Rw,(d,u)=>WT(d,i,u),Tx,D0,jf,Kf,Q0,Cg,DT],d=>d(n,s)).filter(d=>n.selection.isEditable()),Jf=n=>void 0===n.touches||1!==n.touches.length?ue.none():ue.some(n.touches[0]),Zw=(n,i)=>Ln(n,i.nodeName),mI=(n,i)=>!!Mt(i)||!!nn(i)&&!(Zw(n.getBlockElements(),i)||Xr(i)||dl(n,i)||$u(i)),Vx=(n,i)=>{if(Mt(i)){if(0===i.data.length)return!0;if(/^\s+$/.test(i.data))return!i.nextSibling||Zw(n,i.nextSibling)||$u(i.nextSibling)}return!1},Ch=n=>n.dom.create(aa(n),t0(n)),qT=(n,i,s)=>{const d=Ze(Ch(n)),u=op();ge(d,u),s(i,d);const f=document.createRange();return f.setStartBefore(u.dom),f.setEndBefore(u.dom),f},$T=n=>i=>-1!==(" "+i.attr("class")+" ").indexOf(n),Kw=(n,i,s)=>function(d){const u=arguments,f=u[u.length-2],v=f>0?i.charAt(f-1):"";if('"'===v)return d;if(">"===v){const _=i.lastIndexOf("<",f);if(-1!==_&&-1!==i.substring(_,f).indexOf('contenteditable="false"'))return d}return'<span class="'+s+'" data-mce-content="'+n.dom.encode(u[0])+'">'+n.dom.encode("string"==typeof u[1]?u[1]:u[0])+"</span>"},YT=(n,i)=>$t(n,s=>{const d=i.match(s);return null!==d&&d[0].length===i.length}),Tu=(n,i)=>{i.hasAttribute("data-mce-caret")&&(Uc(i),n.selection.setRng(n.selection.getRng()),n.selection.scrollIntoView(i))},Qf=(n,i)=>{const s=kn(Ze(n.getBody()),"*[data-mce-caret]").map(u=>u.dom).getOrNull();if(s)return"compositionstart"===i.type?(i.preventDefault(),i.stopPropagation(),void Tu(n,s)):void(sr(s)&&(Tu(n,s),n.undoManager.add()))},Gd=fo,XT=(n,i,s)=>{const d=Dd(n.getBody()),u=We(GC,1===i?d.next:d.prev);if(s.collapsed){const f=n.dom.getParent(s.startContainer,"PRE");if(!f)return;if(!u(ut.fromRangeStart(s))){const v=Ze((_=>{const k=_.dom.create(aa(_));return k.innerHTML='<br data-mce-bogus="1">',k})(n));1===i?ya(Ze(f),v):ki(Ze(f),v),n.selection.select(v.dom,!0),n.selection.collapse()}}},Jw=(n,i)=>((s,d)=>{const u=d?ka.Forwards:ka.Backwards,f=s.selection.getRng();return(v=u,_=s,k=f,lI(_,v,k,Tp,Mp,Gd)).orThunk(()=>(XT(s,u,f),ue.none()));var v,_,k})(n,((s,d)=>{const u=d?s.getEnd(!0):s.getStart(!0);return j_(u)?!d:d})(n.selection,i)).exists(s=>(wg(n,s),!0)),ZT=(n,i)=>((s,d)=>{const u=d?1:-1,f=s.selection.getRng();return(v=u,_=s,k=f,jw(_,v,k,T=>Tp(T)||bk(T),T=>Mp(T)||V_(T),Gd)).orThunk(()=>(XT(s,u,f),ue.none()));var v,_,k})(n,i).exists(s=>(wg(n,s),!0)),Mu=(n,i)=>FT(n,i,i?Mp:Tp),Hx=(n,i)=>Lw(n,!i).map(s=>{const d=s.toRange(),u=n.selection.getRng();return i?d.setStart(u.startContainer,u.startOffset):d.setEnd(u.endContainer,u.endOffset),d}).exists(s=>(wg(n,s),!0)),KT=n=>Jt(["figcaption"],mo(n)),JT=(n,i)=>!!n.selection.isCollapsed()&&((s,d)=>{const u=Ze(s.getBody()),f=ut.fromRangeStart(s.selection.getRng());return((v,_,k)=>{const T=We(To,_);return ol(Ze(v.container()),M=>k.isBlock(mo(M)),T).filter(KT)})(f,u,s.schema).exists(()=>{if(v=u,k=f,d?ry(v.dom,k):iI(v.dom,k)){const v=qT(s,u,d?ge:rl);return s.selection.setRng(v),!0}var v,k;return!1})})(n,i),fI=(n,i)=>{return s=n,i?ue.from(s.dom.getParent(s.selection.getNode(),"details")).map(u=>((f,v)=>{const _=f.selection.getRng(),k=ut.fromRangeStart(_);return!(f.getBody().lastChild!==v||!ry(v,k)||(f.execCommand("InsertNewBlockAfter"),0))})(s,u)).getOr(!1):ue.from(s.dom.getParent(s.selection.getNode(),"summary")).bind(u=>ue.from(s.dom.getParent(u,"details")).map(f=>((v,_,k)=>{const T=v.selection.getRng(),M=ut.fromRangeStart(T);return!(v.getBody().firstChild!==_||!iI(k,M)||(v.execCommand("InsertNewBlockBefore"),0))})(s,f,u))).getOr(!1);var s},QT={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Au=(n,i)=>i.keyCode===n.keyCode&&i.shiftKey===n.shiftKey&&i.altKey===n.altKey&&i.ctrlKey===n.ctrlKey&&i.metaKey===n.metaKey,Tn=(n,...i)=>()=>n.apply(null,i),Ql=(n,i)=>{return Qo((d=i,Tt(hn(n,f=>({...QT,...f})),u=>Au(u,d)?[u]:[])),s=>s.action());var d},vI=(n,i)=>{return Si((d=i,Tt(hn(n,f=>({...QT,...f})),u=>Au(u,d)?[u]:[])),s=>s.action());var d},Wx=(n,i)=>{const s=i?ka.Forwards:ka.Backwards,d=n.selection.getRng();return lI(n,s,d,Dn,hg,Sd).exists(u=>(wg(n,u),!0))},yI=(n,i)=>{const s=i?1:-1,d=n.selection.getRng();return jw(n,s,d,Dn,hg,Sd).exists(u=>(wg(n,u),!0))},eM=(n,i)=>FT(n,i,i?hg:Dn),Qw=$h([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),sy={...Qw,none:n=>Qw.none(n)},jp=(n,i,s)=>Tt(Qr(n),d=>va(d,i)?s(d)?[d]:[]:jp(d,i,s)),tM=(n,i)=>ic(n,"table",i),ev=(n,i,s,d,u=Wt)=>{const f=1===d;if(!f&&s<=0)return sy.first(n[0]);if(f&&s>=n.length-1)return sy.last(n[n.length-1]);{const v=s+d,_=n[v];return u(_)?sy.middle(i,_):ev(n,i,v,d,u)}},tv=(n,i)=>tM(n,i).bind(s=>{const d=jp(s,"th,td",Wt);return ft(d,u=>To(n,u)).map(u=>({index:u,all:d}))}),bI=["img","br"],nM=n=>{return(i=n,G1.getOption(i)).filter(s=>0!==s.trim().length||s.indexOf(Bi)>-1).isSome()||Jt(bI,mo(n))||Hu(s=n)&&"false"===is(s,"contenteditable");var s,i},oM=(n,i,s,d,u)=>{const f=jo(Ze(s),"td,th,caption").map(_=>_.dom);var _;return((_,k,T)=>Oo(_,(M,I)=>M.fold(()=>ue.some(I),O=>{const R=Math.sqrt(Math.abs(O.x-k)+Math.abs(O.y-T)),N=Math.sqrt(Math.abs(I.x-k)+Math.abs(I.y-T));return ue.some(N<R?I:O)}),ue.none()))(dn((_=n,Tt(f,T=>{const M={left:(I=Ju(T.getBoundingClientRect())).left- -1,top:I.top- -1,right:I.right+-2,bottom:I.bottom+-2,width:I.width+-1,height:I.height+-1};var I;return[{x:M.left,y:_(M),cell:T},{x:M.right,y:_(M),cell:T}]})),_=>i(_,u)),d,u).map(_=>_.cell)},KO=We(oM,n=>n.bottom,(n,i)=>n.y<i),xI=We(oM,n=>n.top,(n,i)=>n.y>i),_I=(n,i,s)=>{const d=n(i,s);return(u=d).breakType===xg.Wrap&&0===u.positions.length||!Bn(s.getNode())&&(u=>u.breakType===xg.Br&&1===u.positions.length)(d)?!((u,f,v)=>v.breakAt.exists(_=>u(f,_).breakAt.isSome()))(n,i,d):d.breakAt.isNone();var u},JO=We(_I,oy),wI=We(_I,Ww),eS=(n,i,s,d)=>{const u=n.selection.getRng(),f=i?1:-1;return!(!eO()||!((v,_,k)=>{const T=ut.fromRangeStart(_);return Wm(!v,k).exists(M=>M.isEqual(T))})(i,u,s)||(ku(f,n,s,!i,!1).each(v=>{wg(n,v)}),0))},Ux=(n,i,s)=>{const d=((f,v)=>{const _=v.getNode(f);return Vc(_)?ue.some(_):ue.none()})(!!i,s),u=!1===i;d.fold(()=>wg(n,s.toRange()),f=>Wm(u,n.getBody()).filter(v=>v.isEqual(s)).fold(()=>wg(n,s.toRange()),v=>{return _=i,T=f,void(k=n).undoManager.transact(()=>{const M=_?ya:ki,I=qT(k,Ze(T),M);wg(k,I)});var _,k,T}))},SI=(n,i,s,d)=>{const u=n.selection.getRng(),f=ut.fromRangeStart(u),v=n.getBody();if(!i&&JO(d,f)){const _=(k=v,(I=T=s,O=M=f,Rn(O.getClientRects()).bind(R=>KO(I,R.left,R.top)).bind(R=>{return Cc(uu(N=R).map(z=>oy(N,z).positions.concat(z)).getOr([]),O);var N})).orThunk(()=>Rn(M.getClientRects()).bind(I=>rI(qO(k,ut.before(T)),I.left))).getOr(ut.before(T)));return Ux(n,i,_),!0}var k,T,M,I,O;if(i&&wI(d,f)){const _=((k,T,M)=>((I,O)=>wi(O.getClientRects()).bind(R=>xI(I,R.left,R.top)).bind(R=>{return Cc(Ws(N=R).map(z=>[z].concat(Ww(N,z).positions)).getOr([]),O);var N}))(T,M).orThunk(()=>Rn(M.getClientRects()).bind(I=>rI($o(k,ut.after(T)),I.left))).getOr(ut.after(T)))(v,s,f);return Ux(n,i,_),!0}return!1},tS=(n,i,s)=>ue.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(d=>ue.from(n.dom.getParent(d,"table")).map(u=>s(n,i,u,d))).getOr(!1),QO=(n,i)=>tS(n,i,eS),rM=(n,i)=>tS(n,i,SI),eE=(n,i,s)=>s.fold(ue.none,ue.none,(d,u)=>{return(f=u,qg(f,nM)).map(v=>{return(n=>{const i=x0.getWin(n).dom,s=(u,f,v,_)=>Gs(i,u,f,v,_),d=n.match({domRange:f=>{const v=Ze(f.startContainer),_=Ze(f.endContainer);return vo(v,f.startOffset,_,f.endOffset)},relative:nk,exact:vo});return((u,f)=>{var _;return((_,k)=>{const T=k.ltr();return T.collapsed?k.rtl().filter(M=>!1===M.collapsed).map(M=>fr.rtl(Ze(M.endContainer),M.endOffset,Ze(M.startContainer),M.startOffset)).getOrThunk(()=>Zm(0,fr.ltr,T)):Zm(0,fr.ltr,T)})(0,(_=u,f.match({domRange:T=>({ltr:ee(T),rtl:ue.none}),relative:(T,M)=>({ltr:ma(()=>pu(_,T,M)),rtl:ma(()=>ue.some(pu(_,M,T)))}),exact:(T,M,I,O)=>({ltr:ma(()=>Gs(_,T,M,I,O)),rtl:ma(()=>ue.some(Gs(_,I,O,T,M)))})})))})(i,d).match({ltr:s,rtl:s})})(x0.exact(_=v,0,_,0));var _});var f},d=>n.mode.isReadOnly()?ue.none():(n.execCommand("mceTableInsertRowAfter"),CI(n,i,d))),CI=(n,i,s)=>{return eE(n,i,(u=Ll,tv(d=s,void 0).fold(()=>sy.none(d),f=>ev(f.all,d,f.index,1,u))));var d,u},tE=(n,i,s)=>{return eE(n,i,(u=Ll,tv(d=s,void 0).fold(()=>sy.none(),f=>ev(f.all,d,f.index,-1,u))));var d,u},nE=(n,i)=>{const s=["table","li","dl"],d=Ze(n.getBody()),u=v=>{const _=mo(v);return To(v,d)||Jt(s,_)},f=n.selection.getRng();return(v=Ze(i?f.endContainer:f.startContainer),_=u,((k,T,M=Bt)=>M(T)?ue.none():Jt(k,mo(T))?ue.some(T):$i(T,k.join(","),I=>va(I,"table")||M(I)))(["td","th"],v,_)).map(v=>(tM(v,u).each(_=>{n.model.table.clearSelectedCells(_.dom)}),n.selection.collapse(!i),(i?CI:tE)(n,u,v).each(_=>{n.selection.setRng(_)}),!0)).getOr(!1);var v,_},ud=(n,i)=>({container:n,offset:i}),ly=Mr.DOM,Tg=n=>i=>n===i?-1:0,nS=(n,i,s)=>{if(Mt(n)&&i>=0)return ue.some(ud(n,i));{const d=Ku(ly);return ue.from(d.backwards(n,i,Tg(n),s)).map(u=>ud(u.container,u.container.data.length))}},kI=(n,i,s)=>{if(!Mt(n))return ue.none();if(i>=0&&i<=n.data.length)return ue.some(ud(n,i));{const u=Ku(ly);return ue.from(u.backwards(n,i,Tg(n),s)).bind(f=>kI(f.container,i+f.container.data.length,s))}},TI=(n,i,s)=>{if(!Mt(n))return ue.none();const d=n.data;if(i<=d.length)return ue.some(ud(n,i));{const u=Ku(ly);return ue.from(u.forwards(n,i,Tg(n),s)).bind(f=>TI(f.container,i-d.length,s))}},iM=(n,i,s,d,u)=>{const f=Ku(n,(v=n,_=>v.isBlock(_)||Jt(["BR","IMG","HR","INPUT"],_.nodeName)||"false"===v.getContentEditable(_)));var v;return ue.from(f.backwards(i,s,d,u))},oE=n=>""!==n&&-1!==" \xa0\f\n\r\t\v".indexOf(n),aN=(n,i)=>n.substring(i.length),hd=(n,i,s,d=!1)=>{if(!(u=i).collapsed||!Mt(u.startContainer))return ue.none();var u;const f={text:"",offset:0},v=n.getParent(i.startContainer,n.isBlock)||n.getRoot();return iM(n,i.startContainer,i.startOffset,(_,k,T)=>(f.text=T+f.text,f.offset+=k,((M,I,O,R=!1)=>{let N;const z=O.charAt(0);for(N=I-1;N>=0;N--){const L=M.charAt(N);if(!R&&oE(L))return ue.none();if(z===L&&Rt(M,O,N,I))break}return ue.some(N)})(f.text,f.offset,s,d).getOr(k)),v).bind(_=>{const k=i.cloneRange();if(k.setStart(_.container,_.offset),k.setEnd(i.endContainer,i.endOffset),k.collapsed)return ue.none();const T=Zi(k.toString().replace(/\u00A0/g," "));return 0!==T.lastIndexOf(s)?ue.none():ue.some({text:aN(T,s),range:k,trigger:s})})},aM=n=>{if(3===n.nodeType)return ud(n,n.data.length);{const i=n.childNodes;return i.length>0?aM(i[i.length-1]):ud(n,i.length)}},Gx=(n,i)=>{const s=n.childNodes;return s.length>0&&i<s.length?Gx(s[i],0):s.length>0&&1===n.nodeType&&s.length===i?aM(s[s.length-1]):ud(n,i)},qp=(n,i,s,d={})=>{var u;const f=i(),v=null!==(u=n.selection.getRng().startContainer.nodeValue)&&void 0!==u?u:"",_=dn(f.lookupByTrigger(s.trigger),T=>s.text.length>=T.minChars&&T.matches.getOrThunk(()=>{return M=n.dom,I=>{const O=Gx(I.startContainer,I.startOffset);return!((R,N)=>{var z;const L=null!==(z=R.getParent(N.container,R.isBlock))&&void 0!==z?z:R.getRoot();return iM(R,N.container,N.offset,(V,J)=>0===J?-1:J,L).filter(V=>{const J=V.container.data.charAt(V.offset-1);return!oE(J)}).isSome()})(M,O)};var M})(s.range,v,s.text));if(0===_.length)return ue.none();const k=Promise.all(hn(_,T=>T.fetch(s.text,T.maxResults,d).then(M=>({matchText:s.text,items:M,columns:T.columns,onAction:T.onAction,highlightOn:T.highlightOn}))));return ue.some({lookupData:k,context:s})};var Iu;!function(n){n[n.Error=0]="Error",n[n.Value=1]="Value"}(Iu||(Iu={}));const sM=(n,i,s)=>n.stype===Iu.Error?i(n.serror):s(n.svalue),nv=n=>({stype:Iu.Value,svalue:n}),oS=n=>({stype:Iu.Error,serror:n}),jx=sM,lM=n=>W(n)&&Ur(n).length>100?" removed due to size":JSON.stringify(n,null,2),rS=(n,i)=>oS([{path:n,getErrorInfo:i}]),iS=n=>(...i)=>{if(0===i.length)throw new Error("Can't merge zero objects");const s={};for(let d=0;d<i.length;d++){const u=i[d];for(const f in u)Ln(u,f)&&(s[f]=n(s[f],u[f]))}return s},MI=iS((n,i)=>U(n)&&U(i)?MI(n,i):i),sN=iS((n,i)=>i),iE=n=>({tag:"defaultedThunk",process:ee(n)}),cM=(n,i,s)=>{switch(n.tag){case"field":return i(n.key,n.newKey,n.presence,n.prop);case"custom":return s(n.newKey,n.instantiator)}},AI=n=>({extract:(i,s)=>{return(d=n(s)).stype===Iu.Error?rS(i,ee(d.serror)):d;var d},toString:ee("val")}),aE=AI(nv),$p=(n,i,s,d)=>d(go(n,i).getOrThunk(()=>s(n))),dM=(n,i,s,d,u)=>{const f=_=>u.extract(i.concat([d]),_),v=_=>_.fold(()=>nv(ue.none()),k=>{return(M=u.extract(i.concat([d]),k)).stype===Iu.Value?{stype:Iu.Value,svalue:(0,ue.some)(M.svalue)}:M;var M});switch(n.tag){case"required":return _=i,M=f,go(k=s,T=d).fold(()=>{return O=T,R=k,rS(_,()=>'Could not find valid *required* value for "'+O+'" in '+lM(R));var O,R},M);case"defaultedThunk":return $p(s,d,n.process,f);case"option":return((_,k,T)=>T(go(_,k)))(s,d,v);case"defaultedOptionThunk":return((_,k,T,M)=>M(go(_,k).map(I=>!0===I?T(_):I)))(s,d,n.process,v);case"mergeWithThunk":return $p(s,d,ee({}),_=>{const k=MI(n.process(s),_);return f(k)})}var _,k,T,M},rv=n=>({extract:(i,s)=>((d,u,f)=>{const v={},_=[];for(const k of f)cM(k,(T,M,I,O)=>{const R=dM(I,d,u,T,O);jx(R,N=>{_.push(...N)},N=>{v[M]=N})},(T,M)=>{v[T]=M(u)});return _.length>0?oS(_):nv(v)})(i,s,n),toString:()=>"obj{\n"+hn(n,s=>cM(s,(d,u,f,v)=>d+" -> "+v.toString(),(d,u)=>"state("+d+")")).join("\n")+"}"}),II=n=>({extract:(i,s)=>(n=>{const i=(d=>{const u=[],f=[];return Qe(d,v=>{sM(v,_=>f.push(_),_=>u.push(_))}),{values:u,errors:f}})(n);return i.errors.length>0?(s=i.errors,Me(oS,pt)(s)):nv(i.values);var s})(hn(s,(u,f)=>n.extract(i.concat(["["+f+"]"]),u))),toString:()=>"array("+n.toString()+")"}),uM=(n,i)=>((n,i)=>({extract:(s,d)=>go(d,n).fold(()=>{return f=n,rS(s,()=>'Choice schema did not contain choice key: "'+f+'"');var f},u=>{return f=s,v=d,go(_=i,k=u).fold(()=>{return M=_,I=k,rS(f,()=>'The chosen schema: "'+I+'" did not exist in branches: '+lM(M));var M,I},T=>T.extract(f.concat(["branch: "+k]),v));var f,v,_,k}),toString:()=>"chooseOn("+n+"). Possible values: "+Ur(i)}))(n,vn(i,rv)),Mg=ee(aE),qx=(n,i)=>AI(s=>{const d=typeof s;return n(s)?nv(s):oS(`Expected type: ${i} but got: ${d}`)}),lE=qx(Re,"number"),cy=qx(Y,"string"),hM=qx(de,"boolean"),$x=qx(Ge,"function"),Yp=(n,i,s,d)=>({tag:"field",key:n,newKey:i,presence:s,prop:d}),DI=(n,i)=>({tag:"custom",newKey:n,instantiator:i}),Yx=(n,i)=>Yp(n,n,{tag:"required",process:{}},i),aS=n=>Yx(n,cy),iv=n=>Yx(n,$x),Xx=(n,i)=>Yp(n,n,{tag:"option",process:{}},i),Zx=n=>Xx(n,cy),dy=(n,i,s)=>Yp(n,n,iE(i),s),gM=(n,i)=>dy(n,i,lE),OI=(n,i)=>dy(n,i,cy),av=(n,i,s)=>{return dy(n,i,(d=s,u=f=>Jt(d,f)?ti.value(f):ti.error(`Unsupported value: "${f}", choose one of "${d.join(", ")}".`),AI(f=>u(f).fold(oS,nv))));var d,u},sv=(n,i)=>dy(n,i,hM),lv=(n,i)=>dy(n,i,$x),lN=aS("type"),cE=iv("fetch"),EI=iv("onAction"),cN=lv("onSetup",()=>ve),pM=Zx("text"),Ag=Zx("icon"),dE=Zx("tooltip"),NI=Zx("label"),cv=sv("active",!1),uE=sv("enabled",!0),mM=sv("primary",!1),uy=n=>OI("type",n),RI=rv([lN,aS("trigger"),gM("minChars",1),((n,i)=>Yp(n,n,iE(1),Mg()))("columns"),gM("maxResults",10),Xx("matches",$x),cE,EI,(Ig=cy,dy("highlightOn",[],II(Ig)))]);var Ig;const hy=[uE,dE,Ag,pM,cN,OI("context","mode:design")],kc=[cv].concat(hy),dv=[lv("predicate",Bt),av("scope","node",["node","editor"]),av("position","selection",["node","selection","line"])],uv=hy.concat([uy("contextformbutton"),mM,EI,DI("original",Se)]),LI=kc.concat([uy("contextformbutton"),mM,EI,DI("original",Se)]),dN=hy.concat([uy("contextformbutton")]),PI=kc.concat([uy("contextformtogglebutton")]),gy=uM("type",{contextformbutton:uv,contextformtogglebutton:LI});rv([uy("contextform"),lv("initValue",ee("")),NI,((n,i)=>Yp(n,n,{tag:"required",process:{}},II(i)))("commands",gy),Xx("launch",uM("type",{contextformbutton:dN,contextformtogglebutton:PI}))].concat(dv));const sS=n=>{const i=zl(),s=ur(!1),d=i.isSet,u=()=>{d()&&(n.dispatch("AutocompleterEnd"),s.set(!1),i.clear())},f=ma(()=>(n=>{const i=n.ui.registry.getAll().popups,s=vn(i,f=>{return(v=f,((n,i,s)=>{return d=(_=i.extract([n],v=s)).stype===Iu.Error?{stype:Iu.Error,serror:(_=>({input:v,errors:_}))(_.serror)}:_,sM(d,ti.error,ti.value);var v,_,d})("Autocompleter",RI,v)).fold(_=>{throw new Error("Errors: \n"+(T=>{const M=T.length>10?T.slice(0,10).concat([{path:[],getErrorInfo:ee("... (only showing first ten failures)")}]):T;return hn(M,I=>"Failed path: ("+I.path.join(" > ")+")\n"+I.getErrorInfo())})((k=_).errors).join("\n")+"\n\nInput object: "+lM(k.input));var k},Se);var v}),d=ji(Ml(s,f=>f.trigger)),u=ir(s);return{dataset:s,triggers:d,lookupByTrigger:f=>dn(u,v=>v.trigger===f)}})(n)),v=k=>{var T;(T=k,i.get().map(M=>hd(n.dom,n.selection.getRng(),M.trigger,!0).bind(I=>qp(n,f,I,T))).getOrThunk(()=>((M,I)=>{const O=I(),R=M.selection.getRng();return(N=M.dom,z=R,L=O,Si(L.triggers,V=>hd(N,z,V))).bind(N=>qp(M,I,N));var N,z,L})(n,f))).fold(u,T=>{var M;M=T.context,d()||i.set({trigger:M.trigger,matchLength:M.text.length}),T.lookupData.then(M=>{i.get().map(I=>{const O=T.context;I.trigger===O.trigger&&(i.set({...I,matchLength:O.text.length}),s.get()?(Ib(n,{range:O.range}),n.dispatch("AutocompleterUpdate",{lookupData:M})):(s.set(!0),Ib(n,{range:O.range}),n.dispatch("AutocompleterStart",{lookupData:M})))})})})},_=()=>i.get().bind(({trigger:k})=>{const T=n.selection.getRng();return hd(n.dom,T,k,s.get()).filter(({range:M})=>((I,O)=>{const R=I.compareBoundaryPoints(window.Range.START_TO_START,O),N=I.compareBoundaryPoints(window.Range.END_TO_END,O);return R>=0&&N<=0})(T,M)).map(({range:M})=>M)});n.addCommand("mceAutocompleterReload",(k,T)=>{const M=W(T)?T.fetchOptions:{};v(M)}),n.addCommand("mceAutocompleterClose",u),n.addCommand("mceAutocompleterRefreshActiveRange",()=>{_().each(k=>{Ib(n,{range:k})})}),n.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>_().isSome()),((k,T)=>{const M=dc(T.load,50);k.on("input",I=>{("insertCompositionText"!==I.inputType||k.composing)&&M.throttle()}),k.on("keydown",I=>{const O=I.which;8===O?M.throttle():27===O?(M.cancel(),T.cancelIfNecessary()):38!==O&&40!==O||M.cancel()},!0),k.on("remove",M.cancel)})(n,{cancelIfNecessary:u,load:v})},fM=Dl().browser.isSafari(),Kx=n=>rp(Ze(n)),BI=(n,i)=>{var s;return 0===n.startOffset&&n.endOffset===(null===(s=i.textContent)||void 0===s?void 0:s.length)},lS=(n,i)=>ue.from(n.getParent(i.container(),"details")),zI=(n,i)=>lS(n,i).isSome(),FI=(n,i)=>{const s=i.getNode();pe(s)||n.selection.setCursorLocation(s,i.offset())},Xs=(n,i,s)=>{const d=n.dom.getParent(i.container(),"details");if(d&&!d.open){const u=n.dom.select("summary",d)[0];u&&(s?Ws(u):uu(u)).each(f=>FI(n,f))}else FI(n,i)},Xp=(n,i,s)=>{const{dom:d,selection:u}=n,f=n.getBody();if("character"===s){const v=ut.fromRangeStart(u.getRng()),_=d.getParent(v.container(),d.isBlock),k=lS(d,v),T=_&&d.isEmpty(_),M=le(_?.previousSibling),I=le(_?.nextSibling);return!!(T&&(i?I:M)&&ig(!i,f,v).exists(O=>zI(d,O)&&!El(k,lS(d,O))))||ig(i,f,v).fold(Bt,O=>{const R=lS(d,O);if(zI(d,O)&&!El(k,R)){if(i||Xs(n,O,!1),_&&T){if(i&&M||!i&&I)return!0;Xs(n,O,i),n.dom.remove(_)}return!0}return!1})}return!1},Du=(n,i,s)=>{return u=i,f=s,((v,_)=>{const k=ue.from(v.getParent(_.startContainer,"details")),T=ue.from(v.getParent(_.endContainer,"details"));if(k.isSome()||T.isSome()){const M=k.bind(I=>ue.from(v.select("summary",I)[0]));return ue.some({startSummary:M,startDetails:k,endDetails:T})}return ue.none()})((d=n).dom,d.selection.getRng()).fold(()=>Xp(d,u,f),v=>((n,i,s,d)=>{const u=n.selection.getRng(),f=ut.fromRangeStart(u),v=n.getBody();return"selection"===d?((_,k)=>{const T=k.startSummary.exists(O=>O.contains(_.startContainer)),M=k.startSummary.exists(O=>O.contains(_.endContainer)),I=k.startDetails.forall(O=>k.endDetails.forall(R=>O!==R));return(T||M)&&!(T&&M)||I})(u,i):s?(_=f,i.startSummary.exists(T=>{return M=_,uu(I=T).exists(O=>Bn(O.getNode())&&pc(I,O).exists(R=>R.isEqual(M))||O.isEqual(M));var M,I})||((_,k,T)=>T.startDetails.exists(M=>xl(_,k).forall(I=>!M.contains(I.container()))))(v,f,i)):((_,k)=>k.startSummary.exists(T=>{return M=_,Ws(T).exists(O=>O.isEqual(M));var M}))(f,i)||((_,k)=>k.startDetails.exists(T=>pc(T,_).forall(M=>k.startSummary.exists(I=>!I.contains(_.container())&&I.contains(M.container())))))(f,i);var _})(d,v,u,f)||Xp(d,u,f))||fM&&((d,u,f)=>{const v=d.selection,_=v.getNode(),k=v.getRng(),T=ut.fromRangeStart(k);return!!Bl(_)&&("selection"===f&&BI(k,_)||yu(u,T,_)?Kx(_):d.undoManager.transact(()=>{const M=v.getSel();let{anchorNode:I,anchorOffset:O,focusNode:R,focusOffset:N}=M??{};const z=()=>{ae(I)&&ae(O)&&ae(R)&&ae(N)&&M?.setBaseAndExtent(I,O,R,N)},L=(J,te)=>{Qe(J.childNodes,re=>{Us(re)&&te.appendChild(re)})},V=d.dom.create("span",{"data-mce-bogus":"1"});L(_,V),_.appendChild(V),z(),"word"!==f&&"line"!==f||null==M||M.modify("extend",u?"right":"left",f),!v.isCollapsed()&&BI(v.getRng(),V)?Kx(_):(d.execCommand(u?"ForwardDelete":"Delete"),I=M?.anchorNode,O=M?.anchorOffset,R=M?.focusNode,N=M?.focusOffset,L(V,_),z()),d.dom.remove(V)}),!0)})(n,i,s)?ue.some(ve):ue.none();var d,u,f},cS=n=>(i,s,d={})=>{const u=i.getBody(),f={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:u,currentTarget:u,eventPhase:Event.AT_TARGET,originalTarget:u,explicitOriginalTarget:u,isTrusted:!1,srcElement:u,cancelable:!1,preventDefault:ve,inputType:s},v=cC(new InputEvent(n));return i.dispatch(n,{...v,...f,...d})},Zp=cS("input"),ec=cS("beforeinput"),Tc=Dl(),hv=Tc.os,my=hv.isMacOS()||hv.isiOS(),dS=Tc.browser.isFirefox(),fy=(n,i)=>{const s=n.dom,d=n.schema.getMoveCaretBeforeOnEnterElements();if(!i)return;if(/^(LI|DT|DD)$/.test(i.nodeName)){const f=(v=>{for(;v;){if(nn(v)||Mt(v)&&v.data&&/[\r\n\s]/.test(v.data))return v;v=v.nextSibling}return null})(i.firstChild);f&&/^(UL|OL|DL)$/.test(f.nodeName)&&i.insertBefore(s.doc.createTextNode(Bi),i.firstChild)}const u=s.createRng();if(i.normalize(),i.hasChildNodes()){const f=new io(i,i);let v,_=i;for(;v=f.current();){if(Mt(v)){u.setStart(v,0),u.setEnd(v,0);break}if(d[v.nodeName.toLowerCase()]){u.setStartBefore(v),u.setEndBefore(v);break}_=v,v=f.next()}v||(u.setStart(_,0),u.setEnd(_,0))}else Bn(i)?i.nextSibling&&s.isBlock(i.nextSibling)?(u.setStartBefore(i),u.setEndBefore(i)):(u.setStartAfter(i),u.setEndAfter(i)):(u.setStart(i,0),u.setEnd(i,0));n.selection.setRng(u),Sp(n,u)},gv=(n,i)=>{const s=n.getRoot();let d,u=i;for(;u!==s&&u&&"false"!==n.getContentEditable(u);){if("true"===n.getContentEditable(u)){d=u;break}u=u.parentNode}return u!==s?d:s},Kp=n=>ue.from(n.dom.getParent(n.selection.getStart(!0),n.dom.isBlock)),Jx=n=>{n.innerHTML='<br data-mce-bogus="1">'},vy=(n,i)=>{aa(n).toLowerCase()===i.tagName.toLowerCase()&&((s,d,u)=>{const f=s.dom;ue.from(u.style).map(f.parseStyle).each(M=>{const I={...$g(Ze(d)),...M};f.setStyles(d,I)});const v=ue.from(u.class).map(M=>M.split(/\s+/)),_=ue.from(d.className).map(M=>dn(M.split(/\s+/),I=>""!==I));ea(v,_,(M,I)=>{const O=dn(I,N=>!Jt(M,N)),R=[...M,...O];f.setAttrib(d,"class",R.join(" "))});const k=["style","class"],T=pa(u,(M,I)=>!Jt(k,I));f.setAttribs(d,T)})(n,i,t0(n))},VI=(n,i,s,d,u=!0,f,v)=>{const _=n.dom,k=n.schema,T=aa(n),M=s?s.nodeName.toUpperCase():"";let I=i;const O=k.getTextInlineElements();let R;R=f||"TABLE"===M||"HR"===M?_.create(f||T,v||{}):s.cloneNode(!1);let N=R;if(u){do{if(O[I.nodeName]){if(Nr(I)||Xr(I))continue;const z=I.cloneNode(!1);_.setAttrib(z,"id",""),R.hasChildNodes()?(z.appendChild(R.firstChild),R.appendChild(z)):(N=z,R.appendChild(z))}}while((I=I.parentNode)&&I!==d)}else _.setAttrib(R,"style",null),_.setAttrib(R,"class",null);return vy(n,R),Jx(N),R},HI=(n,i)=>{const s=n?.parentNode;return ae(s)&&s.nodeName===i},WI=n=>ae(n)&&/^(OL|UL|LI)$/.test(n.nodeName),uS=n=>ae(n)&&/^(LI|DT|DD)$/.test(n.nodeName),us=n=>{const i=n.parentNode;return uS(i)?i:n},Qx=(n,i,s)=>{let d=n[s?"firstChild":"lastChild"];for(;d&&!nn(d);)d=d[s?"nextSibling":"previousSibling"];return d===i},yy=n=>Oo(Ml($g(Ze(n)),(i,s)=>`${s}: ${i};`),(i,s)=>i+s,""),gE=(n,i)=>i&&"A"===i.nodeName&&n.isEmpty(i),hS=(n,i)=>n.nodeName===i||n.previousSibling&&n.previousSibling.nodeName===i,e1=(n,i)=>ae(i)&&n.isBlock(i)&&!/^(TD|TH|CAPTION|FORM)$/.test(i.nodeName)&&!/^(fixed|absolute)/i.test(i.style.position)&&n.isEditable(i.parentNode)&&"false"!==n.getContentEditable(i),t1=(n,i,s)=>Mt(i)?n?1===s&&i.data.charAt(s-1)===Sa?0:s:s===i.data.length-1&&i.data.charAt(s)===Sa?i.data.length:s:s,vM={insert:(n,i)=>{let s,d,u,f,v=!1;const _=n.dom,k=n.schema.getNonEmptyElements(),T=n.selection.getRng(),M=aa(n),I=Ze(T.startContainer),O=rc(I,T.startOffset),R=O.exists(Ie=>Hu(Ie)&&!Ll(Ie)),N=T.collapsed&&R,z=(Ie,He)=>VI(n,s,ie,re,Na(n),Ie,He),L=Ie=>{const He=t1(Ie,s,d);if(Mt(s)&&(Ie?He>0:He<s.data.length))return!1;if((s.parentNode===ie||s===ie)&&v&&!Ie||Ie&&nn(s)&&s===ie.firstChild)return!0;if(hS(s,"TABLE")||hS(s,"HR"))return"BR"===(Be=s).nodeName||Be.nextSibling&&"BR"===Be.nextSibling.nodeName?!Ie:v&&!Ie||!v&&Ie;var Be;const we=new io(s,ie);let De;for(Mt(s)&&(Ie&&0===He?we.prev():Ie||He!==s.data.length||we.next());De=we.current();){if(nn(De)){if(!De.getAttribute("data-mce-bogus")){const Be=De.nodeName.toLowerCase();if(k[Be]&&"br"!==Be)return!1}}else if(Mt(De)&&!ru(De.data))return!1;Ie?we.prev():we.next()}return!0},V=()=>{let Ie;return Ie=/^(H[1-6]|PRE|FIGURE)$/.test(u)&&"HGROUP"!==he?z(M):z(),((He,we)=>{const De=Ra(He);return!_e(we)&&(Y(De)?Jt(zt.explode(De),we.nodeName.toLowerCase()):De)})(n,f)&&e1(_,f)&&_.isEmpty(ie,void 0,{includeZwsp:!0})?Ie=_.split(f,ie):_.insertAfter(Ie,ie),fy(n,Ie),Ie};eo(_,T).each(Ie=>{T.setStart(Ie.startContainer,Ie.startOffset),T.setEnd(Ie.endContainer,Ie.endOffset)}),s=T.startContainer,d=T.startOffset;const J=!(!i||!i.shiftKey),te=!(!i||!i.ctrlKey);nn(s)&&s.hasChildNodes()&&!N&&(v=d>s.childNodes.length-1,s=s.childNodes[Math.min(d,s.childNodes.length-1)]||s,d=v&&Mt(s)?s.data.length:0);const re=gv(_,s);if(!re||((Ie,He)=>{const we=Ie.dom.getParent(He,"ol,ul,dl");return null!==we&&"false"===Ie.dom.getContentEditableParent(we)})(n,s))return;J||(s=((Ie,He,we,De,Be)=>{var et,Ye;const it=Ie.dom,yt=null!==(et=gv(it,De))&&void 0!==et?et:it.getRoot();let It=it.getParent(De,it.isBlock);if(!It||!e1(it,It)){if(It=It||yt,!It.hasChildNodes()){const en=it.create(He);return vy(Ie,en),It.appendChild(en),we.setStart(en,0),we.setEnd(en,0),en}let qt,Xt=De;for(;Xt&&Xt.parentNode!==It;)Xt=Xt.parentNode;for(;Xt&&!it.isBlock(Xt);)qt=Xt,Xt=Xt.previousSibling;const Dt=null===(Ye=qt?.parentElement)||void 0===Ye?void 0:Ye.nodeName;if(qt&&Dt&&Ie.schema.isValidChild(Dt,He.toLowerCase())){const en=qt.parentNode,qe=it.create(He);for(vy(Ie,qe),en.insertBefore(qe,qt),Xt=qt;Xt&&!it.isBlock(Xt);){const Je=Xt.nextSibling;qe.appendChild(Xt),Xt=Je}we.setStart(De,Be),we.setEnd(De,Be)}}return De})(n,M,T,s,d));let ie=_.getParent(s,_.isBlock)||_.getRoot();f=ae(ie?.parentNode)?_.getParent(ie.parentNode,_.isBlock):null,u=ie?ie.nodeName.toUpperCase():"";const he=f?f.nodeName.toUpperCase():"";if("LI"!==he||te||(ie=f,f=f.parentNode,u=he),nn(f)&&(Ie=n,we=ie,!J&&we.nodeName.toLowerCase()===aa(Ie)&&Ie.dom.isEmpty(we)&&((De,Be,et)=>{let Ye=Be;for(;Ye&&Ye!==De&&le(Ye.nextSibling);){const yt=Ye.parentElement;if(!yt||(it=yt,!Ln(Ie.schema.getTextBlockElements(),it.nodeName.toLowerCase())))return st(yt);Ye=yt}var it;return!1})(Ie.getBody(),we)))return((Ie,He,we)=>{var De,Be,et;const Ye=He(aa(Ie)),it=Ie.dom.getParent(we,st);it&&(Ie.dom.insertAfter(Ye,it),fy(Ie,Ye),(null!==(et=null===(Be=null===(De=we.parentElement)||void 0===De?void 0:De.childNodes)||void 0===Be?void 0:Be.length)&&void 0!==et?et:0)>1&&Ie.dom.remove(we))})(n,z,ie);var Ie,we;if(/^(LI|DT|DD)$/.test(u)&&nn(f)&&_.isEmpty(ie))return void((Ie,He,we,De,Be)=>{const et=Ie.dom,Ye=Ie.selection.getRng(),it=we.parentNode;if(we===Ie.getBody()||!it)return;var yt;WI(yt=we)&&WI(yt.parentNode)&&(Be="LI");const It=uS(De)?yy(De):void 0;let qt=uS(De)&&It?He(Be,{style:yy(De)}):He(Be);if(Qx(we,De,!0)&&Qx(we,De,!1))if(HI(we,"LI")){const Xt=us(we);et.insertAfter(qt,Xt),(null===(en=(Dt=we).parentNode)||void 0===en?void 0:en.firstChild)===Dt?et.remove(Xt):et.remove(we)}else et.replace(qt,we);else if(Qx(we,De,!0))HI(we,"LI")?(et.insertAfter(qt,us(we)),qt.appendChild(et.doc.createTextNode(" ")),qt.appendChild(we)):it.insertBefore(qt,we),et.remove(De);else if(Qx(we,De,!1))et.insertAfter(qt,us(we)),et.remove(De);else{we=us(we);const Xt=Ye.cloneRange();Xt.setStartAfter(De),Xt.setEndAfter(we);const Dt=Xt.extractContents();if("LI"===Be&&((en,qe)=>en.firstChild&&"LI"===en.firstChild.nodeName)(Dt)){const en=dn(hn(qt.children,Ze),_t(rs("br")));qt=Dt.firstChild,et.insertAfter(Dt,we),Qe(en,qe=>rl(Ze(qt),qe)),It&&qt.setAttribute("style",It)}else et.insertAfter(Dt,we),et.insertAfter(qt,we);et.remove(De)}var Dt,en;fy(Ie,qt)})(n,z,f,ie,M);if(!(N||ie!==n.getBody()&&e1(_,ie)))return;const fe=ie.parentNode;let ye;if(N)ye=z(M),O.fold(()=>{ge(I,Ze(ye))},Ie=>{ki(Ie,Ze(ye))}),n.selection.setCursorLocation(ye,0);else if(km(ie))ye=Uc(ie),_.isEmpty(ie)&&Jx(ie),vy(n,ye),fy(n,ye);else if(L(!1))ye=V();else if(L(!0)&&fe){const Ie=ut.fromRangeStart(T),He=V_(Ie),we=Ze(ie),De=Ck(we,Ie,n.schema)?yO(we,Ie,n.schema).bind(et=>ue.from(et.getNode())):ue.none();ye=fe.insertBefore(z(),ie);const Be=hS(ie,"HR")||He?ye:De.getOr(ie);fy(n,Be)}else{const Ie=(we=>{const De=we.cloneRange();return De.setStart(we.startContainer,t1(!0,we.startContainer,we.startOffset)),De.setEnd(we.endContainer,t1(!1,we.endContainer,we.endOffset)),De})(T).cloneRange();Ie.setEndAfter(ie);const He=Ie.extractContents();(we=>{Qe(zo(Ze(we),fa),De=>{const Be=De.dom;Be.nodeValue=Zi(Be.data)})})(He),(we=>{let De=we;do{Mt(De)&&(De.data=De.data.replace(/^[\r\n]+/,"")),De=De.firstChild}while(De)})(He),ye=He.firstChild,_.insertAfter(He,ie),((we,De,Be)=>{var et;const Ye=[];if(!Be)return;let it=Be;for(;it=it.firstChild;){if(we.isBlock(it))return;nn(it)&&!De[it.nodeName.toLowerCase()]&&Ye.push(it)}let yt=Ye.length;for(;yt--;)it=Ye[yt],(!it.hasChildNodes()||it.firstChild===it.lastChild&&""===(null===(et=it.firstChild)||void 0===et?void 0:et.nodeValue)||gE(we,it))&&we.remove(it)})(_,k,ye),((we,De)=>{De.normalize();const Be=De.lastChild;(!Be||nn(Be)&&/^(left|right)$/gi.test(we.getStyle(Be,"float",!0)))&&we.add(De,"br")})(_,ie),_.isEmpty(ie)&&Jx(ie),ye.normalize(),_.isEmpty(ye)?(_.remove(ye),V()):(vy(n,ye),fy(n,ye))}_.setAttrib(ye,"id",""),n.dispatch("NewBlock",{newBlock:ye})},fakeEventName:"insertParagraph"},gS=(n,i,s)=>{const d=n.dom.createRng();s?(d.setStartBefore(i),d.setEndBefore(i)):(d.setStartAfter(i),d.setEndAfter(i)),n.selection.setRng(d),Sp(n,d)},n1=(n,i)=>{const s=yr("br");ki(Ze(i),s),n.undoManager.add()},pE=(n,i)=>{mE(n.getBody(),i)||ya(Ze(i),yr("br"));const s=yr("br");ya(Ze(i),s),gS(n,s.dom,!1),n.undoManager.add()},mE=(n,i)=>{return s=ut.after(i),!!Bn(s.getNode())||xl(n,ut.after(i)).map(d=>Bn(d.getNode())).getOr(!1);var s},UI=n=>n&&"A"===n.nodeName&&"href"in n,GI=n=>n.fold(Bt,UI,UI,Bt),jI=(n,i)=>{i.fold(ve,We(n1,n),We(pE,n),ve)},pv={insert:(n,i)=>{const s=(d=>{const u=We(cf,d),f=ut.fromRangeStart(d.selection.getRng());return Wd(u,d.getBody(),f).filter(GI)})(n);s.isSome()?s.each(We(jI,n)):((d,u)=>{const v=d.dom,_=d.selection.getRng();let k,T=!1;eo(v,_).each(L=>{_.setStart(L.startContainer,L.startOffset),_.setEnd(L.endContainer,L.endOffset)});let M=_.startOffset,I=_.startContainer;if(nn(I)&&I.hasChildNodes()){const L=M>I.childNodes.length-1;I=I.childNodes[Math.min(M,I.childNodes.length-1)]||I,M=L&&Mt(I)?I.data.length:0}let O=v.getParent(I,v.isBlock);const R=O&&O.parentNode?v.getParent(O.parentNode,v.isBlock):null;"LI"!==(R?R.nodeName.toUpperCase():"")||!(!u||!u.ctrlKey)||(O=R),Mt(I)&&M>=I.data.length&&(((L,V,J)=>{const te=new io(V,J);let re;const ie=L.getNonEmptyElements();for(;re=te.next();)if(ie[re.nodeName.toLowerCase()]||Mt(re)&&re.length>0)return!0;return!1})(d.schema,I,O||v.getRoot())||(k=v.create("br"),_.insertNode(k),_.setStartAfter(k),_.setEndAfter(k),T=!0)),k=v.create("br"),vC(v,_,k),gS(d,k,T),d.undoManager.add()})(n,i)},fakeEventName:"insertLineBreak"},yM=(n,i)=>Kp(n).filter(s=>i.length>0&&va(Ze(s),i)).isSome(),Mc=$h([{br:[]},{block:[]},{none:[]}]),by=(n,i)=>{return yM(s=n,Vi(s));var s},Dg=n=>(i,s)=>Kp(i).filter(u=>np(Ze(u))).isSome()===n,xy=(n,i)=>(s,d)=>Kp(s).fold(ee(""),v=>v.nodeName.toUpperCase())===n.toUpperCase()===i,qI=n=>{const i=gv(n.dom,n.selection.getStart());return _e(i)},_y=n=>xy("pre",n),mv=n=>(i,s)=>CC(i)===n,uN=(n,i)=>{return yM(s=n,Ki(s));var s},pS=(n,i)=>i,$I=n=>{const i=aa(n),s=gv(n.dom,n.selection.getStart());return ae(s)&&n.schema.isValidChild(s.nodeName,i)},Ou=n=>{const i=n.selection.getRng(),s=Ze(i.startContainer),d=rc(s,i.startOffset).map(u=>Hu(u)&&!Ll(u));return i.collapsed&&d.getOr(!0)},jd=(n,i)=>(s,d)=>Oo(n,(u,f)=>u&&f(s,d),!0)?ue.some(i):ue.none(),fv=(n,i,s)=>{if(!i.mode.isReadOnly()){if(i.selection.isCollapsed()||i.execCommand("delete"),ae(s)&&ec(i,n.fakeEventName).isDefaultPrevented())return;n.insert(i,s),ae(s)&&Zp(i,n.fakeEventName)}},fE=(n,i)=>{if(n.mode.isReadOnly())return;const s=()=>fv(pv,n,i),d=()=>fv(vM,n,i),u=(f=n,v=i,Dx([jd([by],Mc.none()),jd([_y(!0),qI],Mc.none()),jd([xy("summary",!0)],Mc.br()),jd([_y(!0),mv(!1),pS],Mc.br()),jd([_y(!0),mv(!1)],Mc.block()),jd([_y(!0),mv(!0),pS],Mc.block()),jd([_y(!0),mv(!0)],Mc.br()),jd([Dg(!0),pS],Mc.br()),jd([Dg(!0)],Mc.block()),jd([uN],Mc.br()),jd([pS],Mc.br()),jd([$I],Mc.block()),jd([Ou],Mc.block())],[f,!(!v||!v.shiftKey)]).getOr(Mc.none()));var f,v;switch(ub(n)){case"linebreak":u.fold(s,s,ve);break;case"block":u.fold(d,d,ve);break;case"invert":u.fold(d,s,ve);break;default:u.fold(s,d,ve)}},o1=Dl(),YI=o1.os.isiOS()&&o1.browser.isSafari(),XI=(n,i)=>{var s;i.isDefaultPrevented()||(i.preventDefault(),(s=n.undoManager).typing&&(s.typing=!1,s.add()),n.undoManager.transact(()=>{fE(n,i)}))},vE=Dl(),mS=n=>n.stopImmediatePropagation(),ZI=n=>n.keyCode===Kt.PAGE_UP||n.keyCode===Kt.PAGE_DOWN,bM=(n,i,s)=>{s&&!n.get()?i.on("NodeChange",mS,!0):!s&&n.get()&&i.off("NodeChange",mS),n.set(s)},fS=(n,i)=>{const s=i.container(),d=i.offset();return Mt(s)?(s.insertData(d,n),ue.some(ut(s,d+n.length))):Sb(i).map(u=>{const f=Bc(n);return i.isAtEnd()?ya(u,f):ki(u,f),ut(f.dom,n.length)})},vS=We(fS,Bi),KI=We(fS," "),r1=n=>i=>{n.selection.setRng(i.toRange()),n.nodeChanged()},yE=n=>{const i=ut.fromRangeStart(n.selection.getRng()),s=Ze(n.getBody());if(n.selection.isCollapsed()){const d=We(cf,n),u=ut.fromRangeStart(n.selection.getRng());return Wd(d,n.getBody(),u).bind((f=s,v=>v.fold(_=>pc(f.dom,ut.before(_)),_=>Ws(_),_=>uu(_),_=>xl(f.dom,ut.after(_))))).map(f=>()=>{return(v=s,_=i,k=n.schema,T=>H_(v,T,k)?vS(_):KI(_))(f).each(r1(n));var v,_,k})}var f;return ue.none()},hN=n=>{return No(Yt.browser.isFirefox()&&n.selection.isEditable()&&(i=n.dom,s=n.selection.getRng().startContainer,i.isEditable(i.getParent(s,"summary"))),()=>{const d=Ze(n.getBody());var u,f,v;n.selection.isCollapsed()||n.getDoc().execCommand("Delete"),(u=d,f=ut.fromRangeStart(n.selection.getRng()),v=n.schema,H_(u,f,v)?vS(f):KI(f)).each(r1(n))});var i,s},yS=n=>Qi(n)?[{keyCode:Kt.TAB,action:Tn(nE,n,!0)},{keyCode:Kt.TAB,shiftKey:!0,action:Tn(nE,n,!1)}]:[],JI=n=>{if(n.addShortcut("Meta+P","","mcePrint"),sS(n),wc(n))return ur(null);{const i=(n=>{const i=ur(null),s=We(cf,n);return n.on("NodeChange",d=>{Pm(n)&&(((u,f,v)=>{const _=hn(jo(Ze(f.getRoot()),'*[data-mce-selected="inline-boundary"]'),M=>M.dom),k=dn(_,u),T=dn(v,u);Qe(on(k,T),We(wh,!1)),Qe(on(T,k),We(wh,!0))})(s,n.dom,d.parents),((u,f)=>{const v=f.get();if(u.selection.isCollapsed()&&!u.composing&&v){const _=ut.fromRangeStart(u.selection.getRng());ut.isTextPosition(_)&&!Xv(k=_)&&!Ya(k)&&(Sg(u,((n,i)=>{return ut.isTextPosition(i)?(d=i,LC(s=n)&&d.container()===s?((u,f)=>{const v=PC(u.data.substr(0,f.offset())),_=PC(u.data.substr(f.offset()));return(v.text+_.text).length>0?(BC(u),ut(u,f.offset()-v.count)):f})(s,d):c_(s,d)):((s,d)=>d.container()===s.parentNode?((u,f)=>{const v=f.container(),_=((k,T)=>{const M=to(k,T);return-1===M?ue.none():ue.some(M)})(Go(v.childNodes),u).map(k=>k<f.offset()?ut(v,f.offset()-1):f).getOr(f);return eg(u),_})(s,d):c_(s,d))(n,i);var s,d})(v,_)),f.set(null))}var k})(n,i),((u,f,v,_)=>{if(f.selection.isCollapsed()){const k=dn(_,u);Qe(k,T=>{const M=ut.fromRangeStart(f.selection.getRng());Wd(u,f.getBody(),M).bind(I=>Lx(f,v,I))})}})(s,n,i,d.parents))}),i})(n);return(s=n).on("beforeinput",d=>{s.selection.isEditable()&&!_n(d.getTargetRanges(),u=>!fk(s.dom,u))||d.preventDefault()}),(s=>{s.on("keyup compositionstart",We(Qf,s))})(n),((s,d)=>{s.on("keydown",u=>{u.isDefaultPrevented()||((f,v,_)=>{const k=Yt.os.isMacOS()||Yt.os.isiOS();Ql([{keyCode:Kt.RIGHT,action:Tn(Jw,f,!0)},{keyCode:Kt.LEFT,action:Tn(Jw,f,!1)},{keyCode:Kt.UP,action:Tn(ZT,f,!1)},{keyCode:Kt.DOWN,action:Tn(ZT,f,!0)},...k?[{keyCode:Kt.UP,action:Tn(Hx,f,!1),metaKey:!0,shiftKey:!0},{keyCode:Kt.DOWN,action:Tn(Hx,f,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Kt.RIGHT,action:Tn(QO,f,!0)},{keyCode:Kt.LEFT,action:Tn(QO,f,!1)},{keyCode:Kt.UP,action:Tn(rM,f,!1)},{keyCode:Kt.DOWN,action:Tn(rM,f,!0)},{keyCode:Kt.UP,action:Tn(rM,f,!1)},{keyCode:Kt.UP,action:Tn(fI,f,!1)},{keyCode:Kt.DOWN,action:Tn(fI,f,!0)},{keyCode:Kt.RIGHT,action:Tn(Wx,f,!0)},{keyCode:Kt.LEFT,action:Tn(Wx,f,!1)},{keyCode:Kt.UP,action:Tn(yI,f,!1)},{keyCode:Kt.DOWN,action:Tn(yI,f,!0)},{keyCode:Kt.RIGHT,action:Tn(VT,f,v,!0)},{keyCode:Kt.LEFT,action:Tn(VT,f,v,!1)},{keyCode:Kt.RIGHT,ctrlKey:!k,altKey:k,action:Tn(Sh,f,v)},{keyCode:Kt.LEFT,ctrlKey:!k,altKey:k,action:Tn(HT,f,v)},{keyCode:Kt.UP,action:Tn(JT,f,!1)},{keyCode:Kt.DOWN,action:Tn(JT,f,!0)}],_).each(T=>{_.preventDefault()})})(s,d,u)})})(n,i),((s,d)=>{let u=!1;s.on("keydown",f=>{u=f.keyCode===Kt.BACKSPACE,f.isDefaultPrevented()||((v,_,k)=>{const T=k.keyCode===Kt.BACKSPACE?"deleteContentBackward":"deleteContentForward",M=v.selection.isCollapsed(),I=M?"character":"selection",O=R=>M?R?"word":"line":"selection";vI([{keyCode:Kt.BACKSPACE,action:Tn(pI,v)},{keyCode:Kt.BACKSPACE,action:Tn(AT,v,!1)},{keyCode:Kt.DELETE,action:Tn(AT,v,!0)},{keyCode:Kt.BACKSPACE,action:Tn(Rw,v,!1)},{keyCode:Kt.DELETE,action:Tn(Rw,v,!0)},{keyCode:Kt.BACKSPACE,action:Tn(WT,v,_,!1)},{keyCode:Kt.DELETE,action:Tn(WT,v,_,!0)},{keyCode:Kt.BACKSPACE,action:Tn(D0,v,!1)},{keyCode:Kt.DELETE,action:Tn(D0,v,!0)},{keyCode:Kt.BACKSPACE,action:Tn(Du,v,!1,I)},{keyCode:Kt.DELETE,action:Tn(Du,v,!0,I)},...my?[{keyCode:Kt.BACKSPACE,altKey:!0,action:Tn(Du,v,!1,O(!0))},{keyCode:Kt.DELETE,altKey:!0,action:Tn(Du,v,!0,O(!0))},{keyCode:Kt.BACKSPACE,metaKey:!0,action:Tn(Du,v,!1,O(!1))}]:[{keyCode:Kt.BACKSPACE,ctrlKey:!0,action:Tn(Du,v,!1,O(!0))},{keyCode:Kt.DELETE,ctrlKey:!0,action:Tn(Du,v,!0,O(!0))}],{keyCode:Kt.BACKSPACE,action:Tn(jf,v,!1)},{keyCode:Kt.DELETE,action:Tn(jf,v,!0)},{keyCode:Kt.BACKSPACE,action:Tn(Kf,v,!1)},{keyCode:Kt.DELETE,action:Tn(Kf,v,!0)},{keyCode:Kt.BACKSPACE,action:Tn(Q0,v,!1)},{keyCode:Kt.DELETE,action:Tn(Q0,v,!0)},{keyCode:Kt.BACKSPACE,action:Tn(Tx,v,!1)},{keyCode:Kt.DELETE,action:Tn(Tx,v,!0)},{keyCode:Kt.BACKSPACE,action:Tn(Cg,v,!1)},{keyCode:Kt.DELETE,action:Tn(Cg,v,!0)},{keyCode:Kt.BACKSPACE,action:Tn(DT,v,!1)},{keyCode:Kt.DELETE,action:Tn(DT,v,!0)}],k).filter(R=>v.selection.isEditable()).each(R=>{k.preventDefault(),ec(v,T).isDefaultPrevented()||(R(),Zp(v,T))})})(s,d,f)}),s.on("keyup",f=>{var v,_,k;f.isDefaultPrevented()||(_=f,k=u,Ql([{keyCode:Kt.BACKSPACE,action:Tn(HO,v=s)},{keyCode:Kt.DELETE,action:Tn(HO,v)},...my?[{keyCode:Kt.BACKSPACE,altKey:!0,action:Tn(Ud,v)},{keyCode:Kt.DELETE,altKey:!0,action:Tn(Ud,v)},...k?[{keyCode:dS?224:91,action:Tn(Ud,v)}]:[]]:[{keyCode:Kt.BACKSPACE,ctrlKey:!0,action:Tn(Ud,v)},{keyCode:Kt.DELETE,ctrlKey:!0,action:Tn(Ud,v)}]],_)),u=!1})})(n,i),(s=>{let d=ue.none();s.on("keydown",u=>{var f;u.keyCode===Kt.ENTER&&(YI&&(f=>{if(!f.collapsed)return!1;const v=f.startContainer;if(Mt(v)){const _=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,k=v.data.charAt(f.startOffset-1);return _.test(k)}return!1})(s.selection.getRng())?(d=ue.some((f=s).selection.getBookmark()),f.undoManager.add()):XI(s,u))}),s.on("keyup",u=>{u.keyCode===Kt.ENTER&&d.each(()=>{return v=u,(f=s).undoManager.undo(),d.fold(ve,_=>f.selection.moveToBookmark(_)),XI(f,v),void(d=ue.none());var f,v})})})(n),(s=>{s.on("keydown",d=>{var u,f;d.isDefaultPrevented()||(f=d,vI([{keyCode:Kt.SPACEBAR,action:Tn(yE,u=s)},{keyCode:Kt.SPACEBAR,action:Tn(hN,u)}],f).each(v=>{f.preventDefault(),ec(u,"insertText",{data:" "}).isDefaultPrevented()||(v(),Zp(u,"insertText",{data:" "}))}))})})(n),(s=>{s.on("input",d=>{d.isComposing||(u=>{const f=Ze(u.getBody());u.selection.isCollapsed()&&((n,i,s)=>{const d=i.container();if(!Mt(d))return ue.none();if((u=>{const f=u.container();return Mt(f)&&Rt(f.data,Bi)})(i)){const u=G_(n,d,!1,s)||(f=>{const v=f.data,_=(k=>{const T=k.split("");return hn(T,(M,I)=>jm(M)&&I>0&&I<T.length-1&&ag(T[I-1])&&ag(T[I+1])?" ":M).join("")})(v);return _!==v&&(f.data=_,!0)})(d)||Jc(n,d,!1,s);return No(u,i)}if(W_(n,i,s)){const u=G_(n,d,!0,s)||Jc(n,d,!0,s);return No(u,i)}return ue.none()})(f,ut.fromRangeStart(u.selection.getRng()),u.schema).each(v=>{u.selection.setRng(v.toRange())})})(s)})})(n),(s=>{s.on("keydown",d=>{var f;d.isDefaultPrevented()||(f=d,Ql([...yS(s)],f).each(v=>{f.preventDefault()}))})})(n),((s,d)=>{s.on("keydown",u=>{u.isDefaultPrevented()||((f,v,_)=>{const k=Yt.os.isMacOS()||Yt.os.isiOS();Ql([{keyCode:Kt.END,action:Tn(Mu,f,!0)},{keyCode:Kt.HOME,action:Tn(Mu,f,!1)},...k?[]:[{keyCode:Kt.HOME,action:Tn(Hx,f,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Kt.END,action:Tn(Hx,f,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Kt.END,action:Tn(eM,f,!0)},{keyCode:Kt.HOME,action:Tn(eM,f,!1)},{keyCode:Kt.END,action:Tn(Px,f,!0,v)},{keyCode:Kt.HOME,action:Tn(Px,f,!1,v)}],_).each(T=>{_.preventDefault()})})(s,d,u)})})(n,i),((s,d)=>{if(vE.os.isMacOS())return;const u=ur(!1);s.on("keydown",f=>{ZI(f)&&bM(u,s,!0)}),s.on("keyup",f=>{var v,_,k;f.isDefaultPrevented()||(k=f,Ql([{keyCode:Kt.PAGE_UP,action:Tn(Px,v=s,!1,_=d)},{keyCode:Kt.PAGE_DOWN,action:Tn(Px,v,!0,_)}],k)),ZI(f)&&u.get()&&(bM(u,s,!1),s.nodeChanged())})})(n,i),i}var s};class bE{constructor(i){let s;this.lastPath=[],this.editor=i;const d=this;"onselectionchange"in i.getDoc()||i.on("NodeChange click mouseup keyup focus",u=>{const f=i.selection.getRng(),v={startContainer:f.startContainer,startOffset:f.startOffset,endContainer:f.endContainer,endOffset:f.endOffset};"nodechange"!==u.type&&Do(v,s)||i.dispatch("SelectionChange"),s=v}),i.on("contextmenu",()=>{Cp(i),i.dispatch("SelectionChange")}),i.on("SelectionChange",()=>{const u=i.selection.getStart(!0);u&&g0(i)&&!d.isSameElementPath(u)&&i.dom.isChildOf(u,i.getBody())&&i.nodeChanged({selectionChange:!0})}),i.on("mouseup",u=>{!u.isDefaultPrevented()&&g0(i)&&("IMG"===i.selection.getNode().nodeName?js.setEditorTimeout(i,()=>{i.nodeChanged()}):i.nodeChanged())})}nodeChanged(i={}){const s=this.editor,d=s.selection;let u;if(s.initialized&&d&&!Qh(s)){const f=s.getBody();u=d.getStart(!0)||f,u.ownerDocument===s.getDoc()&&s.dom.isChildOf(u,f)||(u=f);const v=[];s.dom.getParent(u,_=>_===f||(v.push(_),!1)),s.dispatch("NodeChange",{...i,element:u,parents:v})}}isSameElementPath(i){let s;const d=this.editor,u=tn(d.dom.getParents(i,Wt,d.getBody()));if(u.length===this.lastPath.length){for(s=u.length;s>=0&&u[s]===this.lastPath[s];s--);if(-1===s)return this.lastPath=u,!0}return this.lastPath=u,!1}}const xE=ob("image"),Ri=ob("event"),bS=n=>i=>{i[Ri]=n},xM=bS(0),QI=bS(2),xS=bS(1),gd=ob("mode"),wy=n=>i=>{i[gd]=n},_S=(n,i)=>wy(i)(n),i1=wy(0),a1=wy(2),_M=wy(1),tD=n=>i=>ue.from(i[gd]).exists(d=>d===n),Og=tD(0),s1=tD(1),wS=["none","copy","link","move"],l1=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],pd=()=>{const n=new window.DataTransfer;let i="move",s="all";const d={get dropEffect(){return i},set dropEffect(u){Jt(wS,u)&&(i=u)},get effectAllowed(){return s},set effectAllowed(u){(n=>ue.from(n[Ri]).exists(s=>0===s))(d)&&Jt(l1,u)&&(s=u)},get items(){return u=d,f=n.items,{...f,get length(){return f.length},add:(v,_)=>{if(Og(u)){if(!Y(v))return f.add(v);if(!pe(_))return f.add(v,_)}return null},remove:v=>{Og(u)&&f.remove(v)},clear:()=>{Og(u)&&f.clear()}};var u,f},get files(){return s1(d)?Object.freeze({length:0,item:u=>null}):n.files},get types(){return n.types},setDragImage:(u,f,v)=>{Og(d)&&(d[xE]={image:u,x:f,y:v},n.setDragImage(u,f,v))},getData:u=>s1(d)?"":n.getData(u),setData:(u,f)=>{Og(d)&&n.setData(u,f)},clearData:u=>{Og(d)&&n.clearData(u)}};return i1(d),d},Sy=(n,i)=>n.setData("text/html",i),SS="x-tinymce/html",CS=ee(SS),kS="\x3c!-- "+SS+" --\x3e",TS=n=>kS+n,nD=n=>-1!==n.indexOf(kS),vv="%MCEPASTEBIN%",yv=n=>n.dom.get("mcepastebin"),wM=n=>ae(n)&&"mcepastebin"===n.id,_E=n=>n===vv,Jp=(n,i)=>(zt.each(i,s=>{n=X(s,RegExp)?n.replace(s,""):n.replace(s[0],s[1])}),n),SM=n=>Jp(n,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(i,s,d)=>s||d?Bi:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),CM=(n,i)=>({content:n,cancelled:i}),kM=(n,i)=>(n.insertContent(i,{merge:xb(n),paste:!0}),!0),TM=n=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(n),wE=(n,i,s)=>{return!(n.selection.isCollapsed()||!TM(i)||(d=n,u=i,f=s,d.undoManager.extra(()=>{f(d,u)},()=>{d.execCommand("mceInsertLink",!1,u)}),0));var d,u,f},oD=(n,i,s)=>{return d=n,!(!TM(u=i)||!_n(Yc(d),f=>En(u.toLowerCase(),`.${f.toLowerCase()}`)))&&((d,u,f)=>(d.undoManager.extra(()=>{f(d,u)},()=>{d.insertContent('<img src="'+u+'">')}),!0))(n,i,s);var d,u},MM=(n=>{let i=0;return()=>"mceclip"+i++})(),AM=n=>{const i=pd();return Sy(i,n),a1(i),i},IM=(n,i,s,d,u)=>{const f=((T,M,I)=>{const O=T.dispatch("PastePreProcess",{content:M,internal:I}),R=((N,z)=>{const L=q0({sanitize:a0(N),sandbox_iframes:NC(N),sandbox_iframes_exclusions:PA(N),convert_unsafe_embeds:RC(N)},N.schema);L.addNodeFilter("meta",J=>{zt.each(J,te=>{te.remove()})});const V=L.parse(z,{forced_root_block:!1,isRootContent:!0});return bn({validate:!0},N.schema).serialize(V)})(T,O.content);return T.hasEventListeners("PastePostProcess")&&!O.isDefaultPrevented()?((N,z,L)=>{const V=N.dom.create("div",{style:"display:none"},z),J=N.dispatch("PastePostProcess",{node:V,internal:L});return CM(J.node.innerHTML,J.isDefaultPrevented())})(T,R,I):CM(R,O.isDefaultPrevented())})(n,i,s);if(!f.cancelled){const v=f.content,_=()=>{return k=n,T=v,void(d||!zm(k)?kM(k,T):(I=k,O=T,zt.each([wE,oD,kM],R=>!R(I,O,kM))));var k,T,I,O};u?ec(n,"insertFromPaste",{dataTransfer:AM(v)}).isDefaultPrevented()||(_(),Zp(n,"insertFromPaste")):_()}},Cy=(n,i,s,d)=>{const u=s||nD(i);IM(n,i.replace(kS,""),u,!1,d)},c1=(n,i,s)=>{const d=n.dom.encode(i).replace(/\r\n/g,"\n"),u=((f,v,_)=>{const k=f.split(/\n\n/),T=((O,R)=>{let N="<"+O;const z=Ml(R,(L,V)=>V+'="'+bm.encodeAllRaw(L)+'"');return z.length&&(N+=" "+z.join(" ")),N+">"})(v,_),M="</"+v+">",I=hn(k,O=>O.split(/\n/).join("<br />"));return 1===I.length?I[0]:hn(I,O=>T+O+M).join("")})(aC(d,s_(n)),aa(n),t0(n));IM(n,u,!1,!0,s)},MS=n=>{const i={};if(n&&n.types)for(let s=0;s<n.types.length;s++){const d=n.types[s];try{i[d]=n.getData(d)}catch{i[d]=""}}return i},qd=(n,i)=>i in n&&n[i].length>0,DM=n=>qd(n,"text/html")||qd(n,"text/plain"),ky=(n,i,s)=>{const d="paste"===i.type?i.clipboardData:i.dataTransfer;var u;if(bb(n)&&d){const f=((v,_)=>{const k=_.items?Tt(Go(_.items),M=>"file"===M.kind?[M.getAsFile()]:[]):[],T=_.files?Go(_.files):[];return dn(k.length>0?k:T,(M=>{const I=Yc(M);return O=>gn(O.type,"image/")&&_n(I,R=>(N=>{const z=N.toLowerCase(),L={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return zt.hasOwn(L,z)?"image/"+L[z]:"image/"+z})(R)===O.type)})(v))})(n,d);if(f.length>0)return i.preventDefault(),(u=f,Promise.all(hn(u,v=>rT(v).then(_=>({file:v,uri:_}))))).then(v=>{s&&n.selection.setRng(s),Qe(v,_=>{var k,T;k=n,ox((T=_).uri).each(({data:M,type:I,base64Encoded:O})=>{const R=O?M:btoa(M),N=T.file,z=k.editorUpload.blobCache,V=z.getByData(R,I)??((J,te,re,ie)=>{const he=MM(),fe=Ji(J)&&ae(re.name),ye=fe?((we,De)=>{const Be=De.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ae(Be)?we.dom.encode(Be[1]):void 0})(J,re.name):he,He=te.create(he,re,ie,ye,fe?re.name:void 0);return te.add(He),He})(k,z,N,R);Cy(k,`<img src="${V.blobUri()}">`,!1,!0)})})}),!0}return!1},OM=(n,i,s,d,u)=>{let f=SM(s);const v=qd(i,CS())||nD(s),_=!v&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(f),k=TM(f);(_E(f)||!f.length||_&&!k)&&(d=!0),(d||k)&&(f=qd(i,"text/plain")&&_?i["text/plain"]:(T=>{const M=Vl(),I=q0({},M);let O="";const R=M.getVoidElements(),N=zt.makeMap("script noscript style textarea video audio iframe object"," "),z=M.getBlockElements(),L=V=>{const J=V.name,te=V;if("br"!==J){if("wbr"!==J)if(R[J]&&(O+=" "),N[J])O+=" ";else{if(3===V.type&&(O+=V.value),!(V.name in M.getVoidElements())){let re=V.firstChild;if(re)do{L(re)}while(re=re.next)}z[J]&&te.next&&(O+="\n","p"===J&&(O+="\n"))}}else O+="\n"};return T=Jp(T,[/<!\[[^\]]+\]>/g]),L(I.parse(T)),O})(f)),_E(f)||(d?c1(n,f,u):Cy(n,f,v,u))},AS=(n,i,s,d)=>{((u,f,v)=>{if(!u)return!1;try{return u.clearData(),u.setData("text/html",f),u.setData("text/plain",v),u.setData(CS(),f),!0}catch{return!1}})(n.clipboardData,i.html,i.text)?(n.preventDefault(),d()):s(i.html,d)},iD=n=>(i,s)=>{const{dom:d,selection:u}=n,f=d.create("div",{contenteditable:"false","data-mce-bogus":"all"}),v=d.create("div",{contenteditable:"true"},i);d.setStyles(f,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),f.appendChild(v),d.add(n.getBody(),f);const _=u.getRng();v.focus();const k=d.createRng();k.selectNodeContents(v),u.setRng(k),js.setEditorTimeout(n,()=>{u.setRng(_),d.remove(f),s()},0)},SE=n=>({html:TS(n.selection.getContent({contextual:!0})),text:n.selection.getContent({format:"text"})}),d1=n=>{return!n.selection.isCollapsed()||!!(i=n).dom.getParent(i.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",i.getBody());var i},EM=(n,i)=>{var s,d;return Rd.getCaretRangeFromPoint(null!==(s=i.clientX)&&void 0!==s?s:0,null!==(d=i.clientY)&&void 0!==d?d:0,n.getDoc())},CE=(n,i)=>{n.focus(),i&&n.selection.setRng(i)},NM=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,aD=n=>zt.trim(n).replace(NM,_m).toLowerCase(),u1=(n,i,s)=>{const d=OA(n);if(s||"all"===d||!yl(n))return i;const u=d?d.split(/[, ]/):[];if(u&&"none"!==d){const f=n.dom,v=n.selection.getNode();i=i.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(_,k,T,M)=>{const I=f.parseStyle(f.decode(T)),O={};for(let N=0;N<u.length;N++){const z=I[u[N]];let L=z,V=f.getStyle(v,u[N],!0);/color/.test(u[N])&&(L=aD(L),V=aD(V)),V!==L&&(O[u[N]]=z)}const R=f.serializeStyle(O,"span");return R?k+' style="'+R+'"'+M:k+M})}else i=i.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return i.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(f,v,_,k)=>v+' style="'+_+'"'+k)},gN=Bn,sD=Mt,lD=n=>fo(n.dom),h1=n=>i=>To(Ze(n),i),cD=(n,i)=>ol(Ze(n),lD,h1(i)),RM=(n,i,s)=>{const d=new io(n,i),u=s?d.next.bind(d):d.prev.bind(d);let f=n;for(let v=s?n:u();v&&!gN(v);v=u())jc(v)&&(f=v);return f};var kh;!function(n){n.Before="before",n.After="after"}(kh||(kh={}));const TE=(n,i)=>Math.abs(n.left-i),IS=(n,i)=>Math.abs(n.right-i),LM=(n,i,s)=>i>n.left&&i<n.right?0:Math.min(Math.abs(n.left-i),Math.abs(n.right-i)),DS=(n,i,s,d)=>{const u=M=>jc(M.node)?ue.some(M):nn(M.node)?DS(Go(M.node.childNodes),i,s,!1):ue.none(),f=(M,I)=>{const O=no(M,(R,N)=>I(R,i,s)-I(N,i,s));return Si(O,u).map(R=>{return d&&!Mt(R.node)&&O.length>1?(N=R,z=O[1],L=I,u(z).filter(V=>Math.abs(L(N,i,s)-L(V,i,s))<2&&Mt(V.node))).getOr(R):R;var N,z,L})},[v,_]=((n,i)=>{return(s=dn(n,s=>{return(d=i)>=(u=s).top&&d<=u.bottom;var d,u}),Oo(s,(d,u)=>d.fold(()=>ue.some(u),f=>{const v=Math.min(u.left,f.left),_=Math.min(u.top,f.top),k=Math.max(u.right,f.right),T=Math.max(u.bottom,f.bottom);return ue.some({top:_,right:k,bottom:T,left:v,width:k-v,height:T-_})}),ue.none())).fold(()=>[[],n],s=>{const{pass:d,fail:u}=Yn(n,f=>((v,_)=>{const k=(T=v,M=_,Math.max(0,Math.min(T.bottom,M.bottom)-Math.max(T.top,M.top))/Math.min(v.height,_.height));var T,M;return((T,M)=>T.top<M.bottom&&T.bottom>M.top)(v,_)&&k>.5})(f,s));return[d,u]});var s})($f(n),s),{pass:k,fail:T}=Yn(_,M=>M.top<s);return f(v,LM).orThunk(()=>f(T,Qu)).orThunk(()=>f(k,Qu))},PM=(n,i,s)=>((d,u,f)=>{const v=Ze(d),k=((n,i,s)=>ue.from(n.dom.elementFromPoint(i,s)).map(Vg))(Fc(v),u,f).filter(T=>Es(v,T)).getOr(v);return((T,M,I,O)=>{const R=(N,z)=>{const L=dn(N.dom.childNodes,_t(V=>nn(V)&&V.classList.contains("mce-drag-container")));return z.fold(()=>DS(L,I,O,!0),V=>{const J=dn(L,te=>te!==V.dom);return DS(J,I,O,!0)}).orThunk(()=>(To(N,T)?ue.none():Wg(N)).bind(V=>R(V,ue.some(N))))};return R(M,ue.none())})(v,k,u,f)})(n,i,s).filter(d=>hp(d.node)).map(d=>{return{node:(u=d).node,position:TE(u,f=i)<IS(u,f)?kh.Before:kh.After};var u,f}),Wi=n=>{var i,s;const d=n.getBoundingClientRect(),u=n.ownerDocument,f=u.documentElement,v=u.defaultView;return{top:d.top+(null!==(i=v?.scrollY)&&void 0!==i?i:0)-f.clientTop,left:d.left+(null!==(s=v?.scrollX)&&void 0!==s?s:0)-f.clientLeft}},Eu=n=>({target:n,srcElement:n}),dD=fo,uD=((...n)=>i=>{for(let s=0;s<n.length;s++)if(n[s](i))return!0;return!1})(dD,ll),BM=(n,i,s,d)=>{const u=n.dom,f=i.cloneNode(!0);u.setStyles(f,{width:s,height:d}),u.setAttrib(f,"data-mce-selected",null);const v=u.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return u.setStyles(v,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:s,height:d}),u.setStyles(f,{margin:0,boxSizing:"border-box"}),v.appendChild(f),v},Th=(n,i)=>s=>()=>{s.scroll({[n]:("left"===n?s.scrollX:s.scrollY)+i,behavior:"smooth"})},OS=Th("left",-32),Zs=Th("left",32),zM=Th("top",-32),Eg=Th("top",32),ES=n=>{n&&n.parentNode&&n.parentNode.removeChild(n)},Ng=(n,i,s,d,u)=>{"dragstart"===i&&Sy(d,n.dom.getOuterHTML(s));const f=((n,i,s,d)=>{const u=((f,v)=>{const _=(k=>{const T=pd(),M=ue.from(k[gd]);return a1(k),xM(T),T.dropEffect=k.dropEffect,T.effectAllowed=k.effectAllowed,(I=k,ue.from(I[xE])).each(I=>T.setDragImage(I.image,I.x,I.y)),Qe(k.types,I=>{"Files"!==I&&T.setData(I,k.getData(I))}),Qe(k.files,I=>T.items.add(I)),(I=>ue.from(I[Ri]))(k).each(I=>{var O;O=T,bS(I)(O)}),M.each(I=>{_S(k,I),_S(T,I)}),T;var I})(f);return"dragstart"===v?(xM(_),i1(_)):"drop"===v?(QI(_),a1(_)):(xS(_),_M(_)),_})(s,n);return pe(d)?((f,v,_)=>{const k=rt("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:f,composedPath:k,initEvent:k,preventDefault:ve,stopImmediatePropagation:ve,stopPropagation:ve,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:k,initMouseEvent:k,getModifierState:k,dataTransfer:_,...Eu(v)}})(n,i,u):(f=n,v=d,_=i,k=u,{...v,dataTransfer:k,type:f,...Eu(_)});var f,v,_,k})(i,s,d,u);return n.dispatch(i,f)},FM=(n,i,s)=>{n.on(d=>{d.intervalId.clear(),d.dragging&&s.fold(()=>Ng(i,"dragend",d.element,d.dataTransfer),u=>Ng(i,"dragend",d.element,d.dataTransfer,u))}),$d(n)},$d=n=>{n.on(i=>{i.intervalId.clear(),ES(i.ghost)}),n.clear()},Ty=fo,NS=(n,i)=>Qc(n.getBody(),i),VM=n=>{const i=n.selection,s=n.dom,d=n.getBody(),u=((n,i,s,d)=>{const u=zl();let f,v;const _=aa(n),k=n.dom,T=()=>{(M=>{var I,O;const R=jo(Ze(M),"*[contentEditable=false],video,audio,embed,object");for(let N=0;N<R.length;N++){const z=R[N].dom;let L=z.previousSibling;if(ib(L)){const V=L.data;1===V.length?null===(I=L.parentNode)||void 0===I||I.removeChild(L):L.deleteData(V.length-1,1)}L=z.nextSibling,ml(L)&&(1===L.data.length?null===(O=L.parentNode)||void 0===O||O.removeChild(L):L.deleteData(0,1))}})(i),v&&(eg(v),v=null),u.on(M=>{k.remove(M.caret),u.clear()}),f&&(clearInterval(f),f=void 0)};return{show:(M,I)=>{let O;if(T(),zC(I))return null;if(!s(I))return v=((R,N)=>{var z;const L=(null!==(z=R.ownerDocument)&&void 0!==z?z:document).createTextNode(Sa),V=R.parentNode;if(N){const J=R.previousSibling;if(cu(J)){if(oa(J))return J;if(ib(J))return J.splitText(J.data.length-1)}V?.insertBefore(L,R)}else{const J=R.nextSibling;if(cu(J)){if(oa(J))return J;if(ml(J))return J.splitText(1),J}R.nextSibling?V?.insertBefore(L,R.nextSibling):V?.appendChild(L)}return L})(I,M),O=I.ownerDocument.createRange(),s0(v.nextSibling)?(O.setStart(v,0),O.setEnd(v,0)):(O.setStart(v,1),O.setEnd(v,1)),O;{const R=((L,V,J)=>{var te;const re=(null!==(te=V.ownerDocument)&&void 0!==te?te:document).createElement(L);re.setAttribute("data-mce-caret",J?"before":"after"),re.setAttribute("data-mce-bogus","all"),re.appendChild(op().dom);const ie=V.parentNode;return J?ie?.insertBefore(re,V):V.nextSibling?ie?.insertBefore(re,V.nextSibling):ie?.appendChild(re),re})(_,I,M),N=up(i,I,M);k.setStyle(R,"top",N.top),k.setStyle(R,"caret-color","transparent"),v=R;const z=k.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});k.setStyles(z,{...N}),k.add(i,z),u.set({caret:z,element:I,before:M}),M&&k.addClass(z,"mce-visual-caret-before"),f=setInterval(()=>{u.on(L=>{d()?k.toggleClass(L.caret,"mce-visual-caret-hidden"):k.addClass(L.caret,"mce-visual-caret-hidden")})},500),O=I.ownerDocument.createRange(),O.setStart(R,0),O.setEnd(R,0)}return O},hide:T,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{u.on(M=>{const I=up(i,M.element,M.before);k.setStyles(M.caret,{...I})})},destroy:()=>clearInterval(f)}})(n,d,s.isBlock,()=>tf(n)),f="sel-"+s.uniqueId(),v="data-mce-selected";let _;const k=L=>L!==d&&(Ty(L)||Sd(L))&&s.isChildOf(L,d)&&s.isEditable(L.parentNode),T=(L,V,J,te=!0)=>n.dispatch("ShowCaret",{target:V,direction:L,before:J}).isDefaultPrevented()?null:(te&&i.scrollIntoView(V,-1===L),u.show(J,V)),M=L=>oa(L)||ml(L)||ib(L),I=L=>M(L.startContainer)||M(L.endContainer),R=(L,V)=>{if(!L)return null;if(L.collapsed){if(!I(L)){const ie=V?1:-1,he=oh(ie,d,L),fe=he.getNode(!V);if(ae(fe)){if(hp(fe))return T(ie,fe,!!V&&!he.isAtEnd(),!1);if($a(fe)&&fo(fe.nextSibling)){const Ie=s.createRng();return Ie.setStart(fe,0),Ie.setEnd(fe,0),Ie}}const ye=he.getNode(V);if(ae(ye)){if(hp(ye))return T(ie,ye,!V&&!he.isAtEnd(),!1);if($a(ye)&&fo(ye.previousSibling)){const Ie=s.createRng();return Ie.setStart(ye,1),Ie.setEnd(ye,1),Ie}}}return null}let J=L.startContainer,te=L.startOffset;const re=L.endOffset;if(Mt(J)&&0===te&&Ty(J.parentNode)&&(J=J.parentNode,te=s.nodeIndex(J),J=J.parentNode),!nn(J))return null;if(re===te+1&&J===L.endContainer){const ie=J.childNodes[te];if(k(ie))return(he=>{const fe=he.cloneNode(!0),ye=n.dispatch("ObjectSelected",{target:he,targetClone:fe});if(ye.isDefaultPrevented())return null;const Ie=((we,De)=>{const Be=Ze(n.getBody()),et=n.getDoc(),Ye=kn(Be,"#"+f).getOrThunk(()=>{const It=Nl('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',et);return ta(It,"id",f),ge(Be,It),It}),it=s.createRng();Le(Ye),be(Ye,[Bc(Bi,et),Ze(De),Bc(Bi,et)]),it.setStart(Ye.dom.firstChild,1),it.setEnd(Ye.dom.lastChild,0),so(Ye,{top:s.getPos(we,n.getBody()).y+"px"}),KA(Ye);const yt=i.getSel();return yt&&(yt.removeAllRanges(),yt.addRange(it)),it})(he,ye.targetClone),He=Ze(he);return Qe(jo(Ze(n.getBody()),`*[${v}]`),we=>{To(He,we)||Gr(we,v)}),s.getAttrib(he,v)||he.setAttribute(v,"1"),_=he,z(),Ie})(ie)}return null},N=()=>{_&&_.removeAttribute(v),kn(Ze(n.getBody()),"#"+f).each(Ke),_=null},z=()=>{u.hide()};return wc(n)||(n.on("click",L=>{s.isEditable(L.target)||(L.preventDefault(),n.focus())}),n.on("blur NewBlock",N),n.on("ResizeWindow FullscreenStateChanged",u.reposition),n.on("tap",L=>{const V=L.target,J=NS(n,V);Ty(J)?(L.preventDefault(),Gf(n,J).each(R)):k(V)&&Gf(n,V).each(R)},!0),n.on("mousedown",L=>{const V=L.target;if(V!==d&&"HTML"!==V.nodeName&&!s.isChildOf(V,d)||!((te,re,ie)=>{const he=Ze(te.getBody()),fe=te.inline?he:Ze(Fc(he).dom.documentElement),ye=((Ie,He,we,De)=>{const Be=He.dom.getBoundingClientRect();return{x:we-(Ie?Be.left+He.dom.clientLeft+Bf(He):0),y:De-(Ie?Be.top+He.dom.clientTop+Aw(He):0)}})(te.inline,fe,re,ie);return((Ie,He,we)=>{const De=bx(Ie),Be=xx(Ie);return He>=0&&we>=0&&He<=De&&we<=Be})(fe,ye.x,ye.y)})(n,L.clientX,L.clientY))return;N(),z();const J=NS(n,V);Ty(J)?(L.preventDefault(),Gf(n,J).each(R)):PM(d,L.clientX,L.clientY).each(te=>{var re;L.preventDefault(),(re=T(1,te.node,te.position===kh.Before,!1))&&i.setRng(re),Ei(J)?J.focus():n.getBody().focus()})}),n.on("keypress",L=>{Kt.modifierPressed(L)||Ty(i.getNode())&&L.preventDefault()}),n.on("GetSelectionRange",L=>{let V=L.range;if(_){if(!_.parentNode)return void(_=null);V=V.cloneRange(),V.selectNode(_),L.range=V}}),n.on("SetSelectionRange",L=>{L.range=(L=>{const V=n.schema.getVoidElements(),J=s.createRng(),te=L.startContainer,re=L.startOffset,ie=L.endContainer,he=L.endOffset;return Ln(V,te.nodeName.toLowerCase())?0===re?J.setStartBefore(te):J.setStartAfter(te):J.setStart(te,re),Ln(V,ie.nodeName.toLowerCase())?0===he?J.setEndBefore(ie):J.setEndAfter(ie):J.setEnd(ie,he),J})(L.range);const V=R(L.range,L.forward);V&&(L.range=V)}),n.on("AfterSetSelectionRange",L=>{const V=L.range,J=V.startContainer.parentElement;var te,re;I(V)||nn(te=J)&&"mcepastebin"===te.id||z(),ae(re=J)&&s.hasClass(re,"mce-offscreen-selection")||N()}),(n=>{const i=zl(),s=Mr.DOM,d=document,u=(k=i,T=n,M=>{if(0===M.button){const I=Qo(T.dom.getParents(M.target),uD).getOr(null);if(ae(I)&&(O=T.dom,R=T.getBody(),dD(N=I)&&N!==R&&O.isEditable(N.parentElement))){const O=T.dom.getPos(I),R=T.getBody(),N=T.getDoc().documentElement;k.set({element:I,dataTransfer:pd(),dragging:!1,screenX:M.screenX,screenY:M.screenY,maxX:(T.inline?R.scrollWidth:N.offsetWidth)-2,maxY:(T.inline?R.scrollHeight:N.offsetHeight)-2,relX:M.pageX-O.x,relY:M.pageY-O.y,width:I.offsetWidth,height:I.offsetHeight,ghost:BM(T,I,I.offsetWidth,I.offsetHeight),intervalId:Yg(100)})}}var O,R,N}),f=((n,i)=>{const s=ws((u,f)=>{return _=u,k=f,(v=i)._selectionOverrides.hideFakeCaret(),void PM(v.getBody(),_,k).fold(()=>v.selection.placeCaretAt(_,k),T=>{const M=v._selectionOverrides.showCaret(1,T.node,T.position===kh.Before,!1);M?v.selection.setRng(M):v.selection.placeCaretAt(_,k)});var v,_,k},0);i.on("remove",s.cancel);const d=n;return u=>n.on(f=>{const v=Math.max(Math.abs(u.screenX-f.screenX),Math.abs(u.screenY-f.screenY));if(!f.dragging&&v>10){const T=Ng(i,"dragstart",f.element,f.dataTransfer,u);if(ae(T.dataTransfer)&&(f.dataTransfer=T.dataTransfer),T.isDefaultPrevented())return;f.dragging=!0,i.focus()}if(f.dragging){const T=u.currentTarget===i.getDoc().documentElement,M=((I,O)=>({pageX:O.pageX-I.relX,pageY:O.pageY+5}))(f,(O=u,R=(L=I=i).inline?Wi(L.getBody()):{left:0,top:0},N=(L=>{const V=L.getBody();return L.inline?{left:V.scrollLeft,top:V.scrollTop}:{left:0,top:0}})(I),z=((L,V)=>{if(V.target.ownerDocument!==L.getDoc()){const J=Wi(L.getContentAreaContainer()),te=(re=>{const ie=re.getBody(),he=re.getDoc().documentElement;return re.inline?{left:ie.scrollLeft,top:ie.scrollTop}:{left:ie.scrollLeft||he.scrollLeft,top:ie.scrollTop||he.scrollTop}})(L);return{left:V.pageX-J.left+te.left,top:V.pageY-J.top+te.top}}return{left:V.pageX,top:V.pageY}})(I,O),{pageX:z.left-R.left+N.left,pageY:z.top-R.top+N.top}));_=f.ghost,k=i.getBody(),_.parentNode!==k&&k.appendChild(_),((I,O,R,N,z,L,V,J,te,re,ie,he)=>{let fe=0,ye=0;I.style.left=O.pageX+"px",I.style.top=O.pageY+"px",O.pageX+R>z&&(fe=O.pageX+R-z),O.pageY+N>L&&(ye=O.pageY+N-L),I.style.width=R-fe+"px",I.style.height=N-ye+"px";const Ie=te.clientHeight,He=te.clientWidth,we=V+te.getBoundingClientRect().top,De=J+te.getBoundingClientRect().left;ie.on(Be=>{Be.intervalId.clear(),Be.dragging&&he&&(V+8>=Ie?Be.intervalId.set(Eg(re)):V-8<=0?Be.intervalId.set(zM(re)):J+8>=He?Be.intervalId.set(Zs(re)):J-8<=0?Be.intervalId.set(OS(re)):we+16>=window.innerHeight?Be.intervalId.set(Eg(window)):we-16<=0?Be.intervalId.set(zM(window)):De+16>=window.innerWidth?Be.intervalId.set(Zs(window)):De-16<=0&&Be.intervalId.set(OS(window)))})})(f.ghost,M,f.width,f.height,f.maxX,f.maxY,u.clientY,u.clientX,i.getContentAreaContainer(),i.getWin(),d,T),s.throttle(u.clientX,u.clientY)}var I,O,L,R,N,z,_,k})})(i,n),v=((k,T)=>M=>{k.on(I=>{var O,R,N,z;if(I.intervalId.clear(),I.dragging){if(R=T,N=(R=>{const N=R.getSel();if(ae(N)){const z=N.getRangeAt(0).startContainer;return Mt(z)?z.parentNode:z}return null})(T.selection),z=I.element,!_e(N)&&N!==z&&!R.dom.isChildOf(N,z)&&R.dom.isEditable(N)){const R=null!==(O=T.getDoc().elementFromPoint(M.clientX,M.clientY))&&void 0!==O?O:T.getBody();Ng(T,"drop",R,I.dataTransfer,M).isDefaultPrevented()||T.undoManager.transact(()=>{((N,z)=>{const L=N.getParent(z.parentNode,N.isBlock);ES(z),L&&L!==N.getRoot()&&N.isEmpty(L)&&rp(Ze(L))})(T.dom,I.element),(N=>{const z=N.getData("text/html");return""===z?ue.none():ue.some(z)})(I.dataTransfer).each(N=>T.insertContent(N)),T._selectionOverrides.hideFakeCaret()})}Ng(T,"dragend",T.getBody(),I.dataTransfer,M)}}),$d(k)})(i,n),_=((k,T)=>M=>FM(k,T,ue.some(M)))(i,n);var k,T;n.on("mousedown",u),n.on("mousemove",f),n.on("mouseup",v),s.bind(d,"mousemove",f),s.bind(d,"mouseup",_),n.on("remove",()=>{s.unbind(d,"mousemove",f),s.unbind(d,"mouseup",_)}),n.on("keydown",k=>{k.keyCode===Kt.ESC&&FM(i,n,ue.none())})})(L=n),$c(L)&&(V=>{const J=ie=>{if(!ie.isDefaultPrevented()){const he=ie.dataTransfer;he&&(Jt(he.types,"Files")||he.files.length>0)&&(ie.preventDefault(),"drop"===ie.type&&Sx(V,"Dropped file type is not supported"))}},te=ie=>{k0(V,ie.target)&&J(ie)},re=()=>{const ie=Mr.DOM,he=V.dom,fe=document,ye=V.inline?V.getBody():V.getDoc(),Ie=["drop","dragover"];Qe(Ie,He=>{ie.bind(fe,He,te),he.bind(ye,He,J)}),V.on("remove",()=>{Qe(Ie,He=>{ie.unbind(fe,He,te),he.unbind(ye,He,J)})})};V.on("init",()=>{js.setEditorTimeout(V,re,0)})})(L),(L=>{const V=ws(()=>{if(!L.removed&&L.getBody().contains(document.activeElement)){const J=L.selection.getRng();if(J.collapsed){const te=Ew(L,J,!1);L.selection.setRng(te)}}},0);L.on("focus",()=>{V.throttle()}),L.on("blur",()=>{V.cancel()})})(n),(L=>{L.on("init",()=>{L.on("focusin",V=>{const J=V.target;if(Sd(J)){const te=Qc(L.getBody(),J),re=fo(te)?te:J;L.selection.getNode()!==re&&Gf(L,re).each(ie=>L.selection.setRng(ie))}})})})(n)),{showCaret:T,showBlockCaretContainer:L=>{L.hasAttribute("data-mce-caret")&&(Uc(L),i.scrollIntoView(L))},hideFakeCaret:z,destroy:()=>{u.destroy(),_=null}};var L},gD=(n,i)=>{let s=i;for(let d=n.previousSibling;Mt(d);d=d.previousSibling)s+=d.data.length;return s},HM=(n,i,s,d,u)=>{if(Mt(s)&&(d<0||d>s.data.length))return[];const f=u&&Mt(s)?[gD(s,d)]:[d];let v=s;for(;v!==i&&v.parentNode;)f.push(n.nodeIndex(v,u)),v=v.parentNode;return v===i?f.reverse():[]},WM=(n,i,s,d,u,f,v=!1)=>({start:HM(n,i,s,d,v),end:HM(n,i,u,f,v)}),IE=(n,i)=>{const s=i.slice(),d=s.pop();return Re(d)?Oo(s,(u,f)=>u.bind(v=>ue.from(v.childNodes[f])),ue.some(n)).bind(u=>Mt(u)&&(d<0||d>u.data.length)?ue.none():ue.some({node:u,offset:d})):ue.none()},pD=(n,i)=>IE(n,i.start).bind(({node:s,offset:d})=>IE(n,i.end).map(({node:u,offset:f})=>{const v=document.createRange();return v.setStart(s,d),v.setEnd(u,f),v})),p1=(n,i,s)=>{if(i&&n.isEmpty(i)&&!s(i)){const d=i.parentNode;n.remove(i,Mt(i.firstChild)&&ru(i.firstChild.data)),p1(n,d,s)}},m1=(n,i,s,d=!0)=>{const u=i.startContainer.parentNode,f=i.endContainer.parentNode;i.deleteContents(),d&&!s(i.startContainer)&&(Mt(i.startContainer)&&0===i.startContainer.data.length&&n.remove(i.startContainer),Mt(i.endContainer)&&0===i.endContainer.data.length&&n.remove(i.endContainer),p1(n,u,s),u!==f&&p1(n,f,s))},f1=(n,i)=>ue.from(n.dom.getParent(i.startContainer,n.dom.isBlock)),RS=(n,i,s)=>{const d=n.dynamicPatternsLookup({text:s,block:i});return{...n,blockPatterns:cp(d).concat(n.blockPatterns),inlinePatterns:wC(d).concat(n.inlinePatterns)}},v1=(n,i,s,d)=>{const u=n.createRng();return u.setStart(i,0),u.setEnd(s,d),u.toString()},bv=(n,i)=>n.create("span",{"data-mce-type":"bookmark",id:i}),LS=(n,i)=>{const s=n.createRng();return s.setStartAfter(i.start),s.setEndBefore(i.end),s},mD=(n,i,s)=>{const d=pD(n.getRoot(),s).getOrDie("Unable to resolve path range"),u=d.startContainer,f=d.endContainer,v=0===d.endOffset?f:f.splitText(d.endOffset),_=0===d.startOffset?u:u.splitText(d.startOffset),k=_.parentNode;return{prefix:i,end:v.parentNode.insertBefore(bv(n,i+"-end"),v),start:k.insertBefore(bv(n,i+"-start"),_)}},UM=(n,i,s)=>{p1(n,n.get(i.prefix+"-end"),s),p1(n,n.get(i.prefix+"-start"),s)},es=n=>0===n.start.length,fD=(n,i,s,d)=>{const u=i.start;var f;return iM(n,d.container,d.offset,(f=u,(v,_)=>{const k=v.data.substring(0,_),T=k.lastIndexOf(f.charAt(f.length-1)),M=k.lastIndexOf(f);return-1!==M?M+f.length:-1!==T?T+1:-1}),s).bind(v=>{var _,k;const T=null!==(k=null===(_=s.textContent)||void 0===_?void 0:_.indexOf(u))&&void 0!==k?k:-1;if(-1!==T&&v.offset>=T+u.length){const M=n.createRng();return M.setStart(v.container,v.offset-u.length),M.setEnd(v.container,v.offset),ue.some(M)}return kI(v.container,v.offset-u.length,s).map(I=>{const O=n.createRng();return O.setStart(I.container,I.offset),O.setEnd(v.container,v.offset),O}).filter(I=>I.toString()===u).orThunk(()=>fD(n,i,s,ud(v.container,0)))})},mN=(n,i,s,d)=>{const u=n.dom,f=u.getRoot(),v=s.pattern,_=s.position.container,k=s.position.offset;return kI(_,k-s.pattern.end.length,i).bind(T=>{const M=WM(u,f,T.container,T.offset,_,k,d);if(es(v))return ue.some({matches:[{pattern:v,startRng:M,endRng:M}],position:T});{const I=GM(n,s.remainingPatterns,T.container,T.offset,i,d),O=I.getOr({matches:[],position:T}),R=O.position;return((z,L,V,J,te,re=!1)=>{if(0===L.start.length&&!re){const ie=z.createRng();return ie.setStart(V,J),ie.setEnd(V,J),ue.some(ie)}return nS(V,J,te).bind(ie=>fD(z,L,te,ie).bind(he=>{var fe;return re&&(he.endContainer===ie.container&&he.endOffset===ie.offset||0===ie.offset&&(null===(fe=he.endContainer.textContent)||void 0===fe?void 0:fe.length)===he.endOffset)?ue.none():ue.some(he)}))})(u,v,R.container,R.offset,i,I.isNone()).map(z=>{const L=((V,J,te,re=!1)=>WM(V,J,te.startContainer,te.startOffset,te.endContainer,te.endOffset,re))(u,f,z,d);return{matches:O.matches.concat([{pattern:v,startRng:L,endRng:M}]),position:ud(z.startContainer,z.startOffset)}})}})},GM=(n,i,s,d,u,f)=>{const v=n.dom;return nS(s,d,v.getRoot()).bind(_=>{const k=v1(v,u,s,d);for(let T=0;T<i.length;T++){const M=i[T];if(!En(k,M.end))continue;const I=i.slice();I.splice(T,1);const O=mN(n,u,{pattern:M,remainingPatterns:I,position:_},f);if(O.isNone()&&d>0)return GM(n,i,s,d-1,u,f);if(O.isSome())return O}return ue.none()})},jM=(n,i,s)=>{n.selection.setRng(s),"inline-format"===i.type?Qe(i.format,d=>{n.formatter.apply(d)}):n.execCommand(i.cmd,!1,i.value)},PS=(n,i,s,d,u,f)=>{var v;return((_,k)=>{const T=$t(_,M=>_n(k,I=>M.pattern.start===I.pattern.start&&M.pattern.end===I.pattern.end));return _.length===k.length?T?_:k:_.length>k.length?_:k})(GM(n,u.inlinePatterns,s,d,i,f).fold(()=>[],_=>_.matches),GM(n,(v=u.inlinePatterns,no(v,(_,k)=>k.end.length-_.end.length)),s,d,i,f).fold(()=>[],_=>_.matches))},DE=(n,i)=>{if(0===i.length)return;const s=n.dom,d=n.selection.getBookmark(),u=((f,v)=>{const _=ob("mce_textpattern"),k=Ao(v,(T,M)=>{const I=mD(f,_+`_end${T.length}`,M.endRng);return T.concat([{...M,endMarker:I}])},[]);return Ao(k,(T,M)=>{const I=k.length-T.length-1,O=es(M.pattern)?M.endMarker:mD(f,_+`_start${I}`,M.startRng);return T.concat([{...M,startMarker:O}])},[])})(s,i);Qe(u,f=>{const v=s.getParent(f.startMarker.start,s.isBlock),_=k=>k===v;es(f.pattern)?((k,T,M,I)=>{const O=LS(k.dom,M);m1(k.dom,O,I),jM(k,T,O)})(n,f.pattern,f.endMarker,_):((k,T,M,I,O)=>{const R=k.dom,N=LS(R,I),z=LS(R,M);m1(R,z,O),m1(R,N,O);const V=LS(R,{prefix:M.prefix,start:M.end,end:I.start});jM(k,T,V)})(n,f.pattern,f.startMarker,f.endMarker,_),UM(s,f.endMarker,_),UM(s,f.startMarker,_)}),n.selection.moveToBookmark(d)},My=(n,i,s)=>((d,u,f)=>{if(Mt(d)&&0>=d.length)return ue.some(ud(d,0));{const v=Ku(ly);return ue.from(v.forwards(d,0,Tg(d),f)).map(_=>ud(_.container,0))}})(i,0,i).map(d=>{const u=d.container;return TI(u,s.start.length,i).each(f=>{const v=n.createRng();v.setStart(u,0),v.setEnd(f.container,f.offset),m1(n,v,_=>_===i)}),u}),BS=n=>(i,s)=>{const u=s.pattern,f=pD(i.dom.getRoot(),s.range).getOrDie("Unable to resolve path range");return f1(i,f).each(v=>{"block-format"===u.type?((_,k)=>{const T=k.get(_);return K(T)&&Rn(T).exists(M=>Ln(M,"block"))})(u.format,i.formatter)&&i.undoManager.transact(()=>{n(i.dom,v,u),i.formatter.apply(u.format)}):"block-command"===u.type&&i.undoManager.transact(()=>{n(i.dom,v,u),i.execCommand(u.cmd,!1,u.value)})}),!0},vD=n=>(i,s)=>{const d=no(i,(v,_)=>_.start.length-v.start.length),u=s.replace(Bi," ");return Qo(d,f=>n(f,s,u))},yD=(n,i)=>(s,d,u,f,v)=>{var _;void 0===v&&(v=null!==(_=d.textContent)&&void 0!==_?_:"");const k=s.dom,T=aa(s);return k.is(d,T)?n(u.blockPatterns,v).map(M=>i&&zt.trim(v).length===M.start.length?[]:[{pattern:M,range:WM(k,k.getRoot(),d,0,d,0,f)}]).getOr([]):[]},Nu=BS((n,i,s)=>{My(n,i,s).each(d=>{const u=Ze(d),f=Yv(u);/^\s[^\s]/.test(f)&&uC(u,f.slice(1))})}),bD=vD((n,i,s)=>0===i.indexOf(n.start)||0===s.indexOf(n.start)),qM=yD(bD,!0),Mh=BS(My),OE=vD((n,i,s)=>i===n.start||s===n.start),Ay=yD(OE,!1),Iy=(n,i,s)=>{for(let d=0;d<n.length;d++)if(s(n[d],i))return!0;return!1},$M=Mr.DOM,NE=n=>n.inline?n.getElement().nodeName.toLowerCase():void 0,FS=n=>pa(n,i=>!1===pe(i)),RE=n=>{const i=n.options.get,s=n.editorUpload.blobCache;return FS({allow_conditional_comments:i("allow_conditional_comments"),allow_html_data_urls:i("allow_html_data_urls"),allow_svg_data_urls:i("allow_svg_data_urls"),allow_html_in_named_anchor:i("allow_html_in_named_anchor"),allow_script_urls:i("allow_script_urls"),allow_mathml_annotation_encodings:i("allow_mathml_annotation_encodings"),allow_unsafe_link_target:i("allow_unsafe_link_target"),convert_unsafe_embeds:i("convert_unsafe_embeds"),convert_fonts_to_spans:i("convert_fonts_to_spans"),fix_list_elements:i("fix_list_elements"),font_size_legacy_values:i("font_size_legacy_values"),forced_root_block:i("forced_root_block"),forced_root_block_attrs:i("forced_root_block_attrs"),preserve_cdata:i("preserve_cdata"),inline_styles:i("inline_styles"),root_name:NE(n),sandbox_iframes:i("sandbox_iframes"),sandbox_iframes_exclusions:PA(n),sanitize:i("xss_sanitization"),validate:!0,blob_cache:s,document:n.getDoc()})},xD=n=>{const i=n.options.get;return FS({custom_elements:i("custom_elements"),extended_valid_elements:i("extended_valid_elements"),invalid_elements:i("invalid_elements"),invalid_styles:i("invalid_styles"),schema:i("schema"),valid_children:i("valid_children"),valid_classes:i("valid_classes"),valid_elements:i("valid_elements"),valid_styles:i("valid_styles"),verify_html:i("verify_html"),padd_empty_block_inline_children:i("format_empty_lines")})},xv=n=>n.inline?n.ui.styleSheetLoader:n.dom.styleSheetLoader,VS=n=>{const i=xv(n),s=gc(n),d=n.contentCSS,u=()=>{i.unloadAll(d),n.inline||n.ui.styleSheetLoader.unloadAll(s)},f=()=>{n.removed?u():n.on("remove",u)};if(n.contentStyles.length>0){let k="";zt.each(n.contentStyles,T=>{k+=T+"\r\n"}),n.dom.addStyle(k)}const v=Promise.all(((k,T,M)=>{const{pass:I,fail:O}=Yn(T,z=>tinymce.Resource.has(Iw(z))),N=[...I.map(z=>{const L=tinymce.Resource.get(Iw(z));return Y(L)?Promise.resolve(xv(k).loadRawCss(z,L)):Promise.resolve()}),xv(k).loadAll(O)];return k.inline?N:N.concat([k.ui.styleSheetLoader.loadAll(M)])})(n,d,s)).then(f).catch(f),_=hb(n);return _&&((k,T)=>{const M=Ze(k.getBody()),I=Gg(Ns(M)),O=yr("style");ta(O,"type","text/css"),ge(O,Bc(T)),ge(I,O),k.on("remove",()=>{Ke(O)})})(n,_),v},y1=n=>{var i;!0!==n.removed&&(wc(i=n)||i.load({initial:!0,format:"html"}),i.startContent=i.getContent({format:"raw"}),(i=>{i.bindPendingEventDelegates(),i.initialized=!0,i.dispatch("Init"),i.focus(!0),(d=>{const u=d.dom.getRoot();d.inline||g0(d)&&d.selection.getStart(!0)!==u||Ws(u).each(f=>{const v=f.getNode(),_=Vc(v)?Ws(v).getOr(f):f;d.selection.setRng(_.toRange())})})(i),i.nodeChanged({initial:!0});const s=dp(i);Ge(s)&&s.call(i,i),(d=>{const u=AA(d);u&&js.setEditorTimeout(d,()=>{let f;f=!0===u?d:d.editorManager.get(u),f&&!f.destroyed&&(f.focus(),f.selection.scrollIntoView())},100)})(i)})(n))},YM=n=>{const i=n.getElement();let s=n.getDoc();n.inline&&($M.addClass(i,"mce-content-body"),n.contentDocument=s=document,n.contentWindow=window,n.bodyElement=i,n.contentAreaContainer=i);const d=n.getBody();var v,_;d.disabled=!0,n.readonly=i0(n),n._editableRoot=YD(n),n.hasEditableRoot()&&(n.inline&&"static"===$M.getStyle(d,"position",!0)&&(d.style.position="relative"),d.contentEditable="true"),d.disabled=!1,n.editorUpload=(n=>{const i=(()=>{let z=[];const L=te=>{if(!te.blob||!te.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const re=te.id||"blobid"+BO+++(()=>{const ye=()=>Math.round(4294967295*bA()).toString(36);return"s"+(new Date).getTime().toString(36)+ye()+ye()+ye()})(),ie=te.name||re,he=te.blob;var fe;return{id:ee(re),name:ee(ie),filename:ee(te.filename||ie+"."+(fe=he.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[fe.toLowerCase()]||"dat")),blob:ee(he),base64:ee(te.base64),blobUri:ee(te.blobUri||URL.createObjectURL(he)),uri:ee(te.uri)}},V=te=>Qo(z,te).getOrUndefined(),J=te=>V(re=>re.id()===te);return{create:(te,re,ie,he,fe)=>{if(Y(te))return L({id:te,name:he,filename:fe,blob:re,base64:ie});if(W(te))return L(te);throw new Error("Unknown input type")},add:te=>{J(te.id())||z.push(te)},get:J,getByUri:te=>V(re=>re.blobUri()===te),getByData:(te,re)=>V(ie=>ie.base64()===te&&ie.blob().type===re),findFirst:V,removeByUri:te=>{z=dn(z,re=>re.blobUri()!==te||(URL.revokeObjectURL(re.blobUri()),!1))},destroy:()=>{Qe(z,te=>{URL.revokeObjectURL(te.blobUri())}),z=[]}}})();let s,d;const u=Dw(),f=[],v=z=>L=>n.selection?z(L):[],_=(z,L,V)=>{let J=0;do{J=z.indexOf(L,J),-1!==J&&(z=z.substring(0,J)+V+z.substr(J+L.length),J+=V.length-L.length+1)}while(-1!==J);return z},k=(z,L,V)=>(z=_(z,`src="${L}"`,`src="${V}"${V===Yt.transparentSrc?' data-mce-placeholder="1"':""}`),_(z,'data-mce-src="'+L+'"','data-mce-src="'+V+'"')),T=(z,L)=>{Qe(n.undoManager.data,V=>{"fragmented"===V.type?V.fragments=hn(V.fragments,J=>k(J,z,L)):V.content=k(V.content,z,L)})},M=()=>(s||(s=vh(n,u)),R().then(v(z=>{const L=hn(z,V=>V.blobInfo);return s.upload(L,Va(n)).then(v(V=>{const J=[];let te=!1;const re=hn(V,(ie,he)=>{const{blobInfo:fe,image:ye}=z[he];let Ie=!1;return ie.status&&Zh(n)?(ie.url&&!Rt(ye.src,ie.url)&&(te=!0),i.removeByUri(ye.src),wc(n)||((He,we)=>{const De=n.convertURL(we,"src");var Be;T(He.src,we),nc(Ze(He),{src:Ji(n)?(Be=we,Be+(-1===Be.indexOf("?")?"?":"&")+(new Date).getTime()):we,"data-mce-src":De})})(ye,ie.url)):ie.error&&(ie.error.remove&&(T(ye.src,Yt.transparentSrc),J.push(ye),Ie=!0),Sx(n,ja.translate(["Failed to upload image: {0}",ie.error.message]))),{element:ye,status:ie.status,uploadUri:ie.url,blobInfo:fe,removed:Ie}});return J.length>0&&!wc(n)?n.undoManager.transact(()=>{Qe(At(J),ie=>{const he=pn(ie);var fe;Ke(ie),he.each((fe=n,ye=>{var Ie,He;(Ie=fe).dom.isEmpty((He=ye).dom)&&ae(Ie.schema.getTextBlockElements()[mo(He)])&&ge(ye,Nl('<br data-mce-bogus="1" />'))})),i.removeByUri(ie.dom.src)})}):te&&n.undoManager.dispatchChange(),re}))}))),I=()=>sa(n)?M():Promise.resolve([]),O=z=>$t(f,L=>L(z)),R=()=>(d||(d=((n,i)=>{const s={};return{findAll:(d,u=Wt)=>{const f=dn((_=d)?Go(_.getElementsByTagName("img")):[],_=>{const k=_.src;return!_.hasAttribute("data-mce-bogus")&&!_.hasAttribute("data-mce-placeholder")&&!(!k||k===Yt.transparentSrc)&&(gn(k,"blob:")?!n.isUploaded(k)&&u(_):!!gn(k,"data:")&&u(_))}),v=hn(f,_=>{const k=_.src;if(Ln(s,k))return s[k].then(T=>Y(T)?T:{image:_,blobInfo:T.blobInfo});{const T=((M,I)=>{const O=()=>Promise.reject("Invalid data URI");if(gn(I,"blob:")){const z=M.getByUri(I);return ae(z)?Promise.resolve(z):(R=I,gn(R,"blob:")?(L=R,fetch(L).then(V=>V.ok?V.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${L} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):gn(R,"data:")?(N=R,new Promise((L,V)=>{ox(N).bind(({type:J,data:te,base64Encoded:re})=>oT(J,te,re)).fold(()=>V("Invalid data URI"),L)})):Promise.reject("Unknown URI format")).then(L=>rT(L).then(V=>Zl(V,!1,J=>ue.some(C2(M,L,J))).getOrThunk(O)))}var L,R,N;return gn(I,"data:")?rx(M,I).fold(O,z=>Promise.resolve(z)):Promise.reject("Unknown image data format")})(i,k).then(M=>(delete s[k],{image:_,blobInfo:M})).catch(M=>(delete s[k],M));return s[k]=T,T}});var _;return Promise.all(v)}}})(u,i)),d.findAll(n.getBody(),O).then(v(z=>{const L=dn(z,V=>Y(V)?(Sx(n,V),!1):"blob"!==V.uriType);return wc(n)||Qe(L,V=>{T(V.image.src,V.blobInfo.blobUri()),V.image.src=V.blobInfo.blobUri(),V.image.removeAttribute("data-mce-src")}),L}))),N=z=>z.replace(/src="(blob:[^"]+)"/g,(L,V)=>{const J=u.getResultUri(V);if(J)return'src="'+J+'"';let te=i.getByUri(V);return te||(te=Oo(n.editorManager.get(),(re,ie)=>re||ie.editorUpload&&ie.editorUpload.blobCache.getByUri(V),void 0)),te?'src="data:'+te.blob().type+";base64,"+te.base64()+'"':L});return n.on("SetContent",()=>{sa(n)?I():R()}),n.on("RawSaveContent",z=>{z.content=N(z.content)}),n.on("GetContent",z=>{z.source_view||"raw"===z.format||"tree"===z.format||(z.content=N(z.content))}),n.on("PostRender",()=>{n.parser.addNodeFilter("img",z=>{Qe(z,L=>{const V=L.attr("src");if(!V||i.getByUri(V))return;const J=u.getResultUri(V);J&&L.attr("src",J)})})}),{blobCache:i,addFilter:z=>{f.push(z)},uploadImages:M,uploadImagesAuto:I,scanForImages:R,destroy:()=>{i.destroy(),u.destroy(),d=s=null}}})(n),n.schema=Vl(xD(n)),n.dom=Mr(s,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,update_styles:!0,root_element:n.inline?n.getBody():null,collect:n.inline,schema:n.schema,contentCssCors:kC(n),referrerPolicy:n_(n),onSetAttrib:v=>{n.dispatch("SetAttrib",v)}}),n.parser=(v=>{const _=q0(RE(v),v.schema);return _.addAttributeFilter("src,href,style,tabindex",(k,T)=>{const M=v.dom,I="data-mce-"+T;let O=k.length;for(;O--;){const R=k[O];let N=R.attr(T);if(N&&!R.attr(I)){if(0===N.indexOf("data:")||0===N.indexOf("blob:"))continue;"style"===T?(N=M.serializeStyle(M.parseStyle(N),R.name),N.length||(N=null),R.attr(I,N),R.attr(T,N)):"tabindex"===T?(R.attr(I,N),R.attr(T,null)):R.attr(I,v.convertURL(N,T,R.name))}}}),_.addNodeFilter("script",k=>{let T=k.length;for(;T--;){const M=k[T],I=M.attr("type")||"no/type";0!==I.indexOf("mce-")&&M.attr("type","mce-"+I)}}),EC(v)&&_.addNodeFilter("#cdata",k=>{var T;let M=k.length;for(;M--;){const I=k[M];I.type=8,I.name="#comment",I.value="[CDATA["+v.dom.encode(null!==(T=I.value)&&void 0!==T?T:"")+"]]"}}),_.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",k=>{let T=k.length;const M=v.schema.getNonEmptyElements();for(;T--;){const I=k[T];I.isEmpty(M)&&0===I.getAll("br").length&&I.append(new _l("br",1))}}),_})(n),n.serializer=ld((v=>{const _=v.options.get;return{...RE(v),...xD(v),...FS({remove_trailing_brs:_("remove_trailing_brs"),pad_empty_with_br:_("pad_empty_with_br"),url_converter:_("url_converter"),url_converter_scope:_("url_converter_scope"),element_format:_("element_format"),entities:_("entities"),entity_encoding:_("entity_encoding"),indent:_("indent"),indent_after:_("indent_after"),indent_before:_("indent_before")})}})(n),n),n.selection=V2(n.dom,n.getWin(),n.serializer,n),n.annotator=Ym(n),n.formatter=Ow(n),n.undoManager=bh(n),n._nodeChangeDispatcher=new bE(n),n._selectionOverrides=VM(n),(v=>{const _=zl(),k=ur(!1),T=dc(M=>{v.dispatch("longpress",{...M,type:"longpress"}),k.set(!0)},400);v.on("touchstart",M=>{Jf(M).each(I=>{T.cancel();const O={x:I.clientX,y:I.clientY,target:M.target};T.throttle(M),k.set(!1),_.set(O)})},!0),v.on("touchmove",M=>{T.cancel(),Jf(M).each(I=>{_.on(O=>{((R,N)=>{const z=Math.abs(R.clientX-N.x),L=Math.abs(R.clientY-N.y);return z>5||L>5})(I,O)&&(_.clear(),k.set(!1),v.dispatch("longpresscancel"))})})},!0),v.on("touchend touchcancel",M=>{T.cancel(),"touchcancel"!==M.type&&_.get().filter(I=>I.target.isEqualNode(M.target)).each(()=>{k.get()?M.preventDefault():v.dispatch("tap",{...M,type:"tap"})})},!0)})(n),(_=v=n).on("click",k=>{_.dom.getParent(k.target,"details")&&k.preventDefault()}),(_=>{_.parser.addNodeFilter("details",k=>{const T=LA(_);Qe(k,M=>{"expanded"===T?M.attr("open","open"):"collapsed"===T&&M.attr("open",null)})}),_.serializer.addNodeFilter("details",k=>{const T=YE(_);Qe(k,M=>{"expanded"===T?M.attr("open","open"):"collapsed"===T&&M.attr("open",null)})})})(v),(v=>{const _="contenteditable",k=" "+zt.trim(_b(v))+" ",T=" "+zt.trim(jl(v))+" ",M=$T(k),I=$T(T),O=RA(v);O.length>0&&v.on("BeforeSetContent",R=>{((N,z,L)=>{let V=z.length,J=L.content;if("raw"!==L.format){for(;V--;)J=J.replace(z[V],Kw(N,J,jl(N)));L.content=J}})(v,O,R)}),v.parser.addAttributeFilter("class",R=>{let N=R.length;for(;N--;){const z=R[N];M(z)?z.attr(_,"true"):I(z)&&z.attr(_,"false")}}),v.serializer.addAttributeFilter(_,R=>{let N=R.length;for(;N--;){const z=R[N];if(!M(z)&&!I(z))continue;const L=z.attr("data-mce-content");O.length>0&&L?YT(O,L)?(z.name="#text",z.type=3,z.raw=!0,z.value=L):z.remove():z.attr(_,null)}})})(n),wc(n)||((v=>{v.on("mousedown",_=>{_.detail>=3&&(_.preventDefault(),(n=>{const i=((s,d,u)=>{const f=ut.fromRangeStart(s).getNode(),v=(I=d,O=u,ol(Ze(f),R=>ll(R.dom)||O.isBlock(mo(R)),h1(I)).getOr(Ze(I)).dom),_=RM(f,v,!1),k=RM(f,v,!0),T=document.createRange();var I,O;return cD(_,v).fold(()=>{sD(_)?T.setStart(_,0):T.setStartBefore(_)},M=>T.setStartBefore(M.dom)),cD(k,v).fold(()=>{sD(k)?T.setEnd(k,k.data.length):T.setEndAfter(k)},M=>T.setEndAfter(M.dom)),T})(n.selection.getRng(),n.getBody(),n.schema);n.selection.setRng(Hk(i))})(v))})})(n),(v=>{(n=>{const i=[",",".",";",":","!","?"],s=[32],d=()=>{return v=NA(n).filter(k=>"inline-command"!==k.type&&"block-command"!==k.type||n.queryCommandSupported(k.cmd)),_=OC(n),{inlinePatterns:wC(v),blockPatterns:cp(v),dynamicPatternsLookup:_};var v,_},u=()=>n.options.isSet("text_patterns_lookup");n.on("keydown",v=>{if(13===v.keyCode&&!Kt.modifierPressed(v)&&n.selection.isCollapsed()&&n.selection.isEditable()){const _=Fo(d(),"enter");(_.inlinePatterns.length>0||_.blockPatterns.length>0||u())&&((M,I)=>{const O=M.selection.getRng();return f1(M,O).map(R=>{var N;const z=Math.max(0,O.startOffset),L=RS(I,R,null!==(N=R.textContent)&&void 0!==N?N:"");return{inlineMatches:PS(M,R,O.startContainer,z,L,!0),blockMatches:qM(M,R,L,!0)}}).filter(({inlineMatches:R,blockMatches:N})=>N.length>0||R.length>0)})(k=n,_).fold(Bt,({inlineMatches:M,blockMatches:I})=>(k.undoManager.add(),k.undoManager.extra(()=>{k.execCommand("mceInsertNewLine")},()=>{k.insertContent(Sa,{preserve_zwsp:!0}),DE(k,M),((N,z)=>{if(0===z.length)return;const L=N.selection.getBookmark();Qe(z,V=>Nu(N,V)),N.selection.moveToBookmark(L)})(k,I);const O=k.selection.getRng(),R=nS(O.startContainer,O.startOffset,k.dom.getRoot());k.execCommand("mceInsertNewLine"),R.each(N=>{const z=N.container;"\ufeff"===z.data.charAt(N.offset-1)&&(z.deleteData(N.offset-1,1),p1(k.dom,z.parentNode,L=>L===k.dom.getRoot()))})}),!0))&&v.preventDefault()}var k},!0),n.on("keydown",v=>{if(32===v.keyCode&&n.selection.isCollapsed()&&n.selection.isEditable()){const _=Fo(d(),"space");(_.blockPatterns.length>0||u())&&((M,I)=>{const O=M.selection.getRng();return f1(M,O).map(R=>{const N=Math.max(0,O.startOffset),z=v1(M.dom,R,O.startContainer,N),L=RS(I,R,z);return Ay(M,R,L,!1,z)}).filter(R=>R.length>0)})(k=n,_).fold(Bt,M=>(k.undoManager.transact(()=>{var I;I=k,Qe(M,R=>Mh(I,R))}),!0))&&v.preventDefault()}var k},!0);const f=()=>{if(n.selection.isCollapsed()&&n.selection.isEditable()){const v=Fo(d(),"space");(v.inlinePatterns.length>0||u())&&((_,k)=>{const T=_.selection.getRng();f1(_,T).map(M=>{const I=Math.max(0,T.startOffset-1),O=v1(_.dom,M,T.startContainer,I),R=RS(k,M,O),N=PS(_,M,T.startContainer,I,R,!1);N.length>0&&_.undoManager.transact(()=>{DE(_,N)})})})(n,v)}};n.on("keyup",v=>{Iy(s,v,(_,k)=>_===k.keyCode&&!Kt.modifierPressed(k))&&f()}),n.on("keypress",v=>{Iy(i,v,(_,k)=>_.charCodeAt(0)===k.charCode)&&js.setEditorTimeout(n,f)})})(v)})(n));const u=JI(n);((v,_)=>{v.addCommand("delete",()=>{var k;Xw(k=v,_,!1).fold(()=>{k.selection.isEditable()&&(df(k),ch(k))},nt)}),v.addCommand("forwardDelete",()=>{var k;Xw(k=v,_,!0).fold(()=>{k.selection.isEditable()&&I0(k)},nt)})})(n,u),(v=>{v.on("NodeChange",()=>(_=>{const k=_.dom,T=_.selection,M=_.schema,I=M.getBlockElements(),O=T.getStart(),R=_.getBody();let N,z,L=null;const V=aa(_);if(!O||!nn(O))return;const J=R.nodeName.toLowerCase();if(!M.isValidChild(J,V.toLowerCase())||(re=I,ie=R,_n(xk(Ze(O),Ze(ie)),fe=>Zw(re,fe.dom))))return;var re,ie;if(R.firstChild===R.lastChild&&Bn(R.firstChild))return N=Ch(_),N.appendChild(op().dom),R.replaceChild(N,R.firstChild),_.selection.setCursorLocation(N,0),void _.nodeChanged();let te=R.firstChild;for(;te;)if(nn(te)&&$y(M,te),mI(M,te)){if(Vx(I,te)){z=te,te=te.nextSibling,k.remove(z);continue}if(!N){if(!L&&_.hasFocus()&&(L=Ax(_.selection.getRng(),()=>document.createElement("span"))),!te.parentNode){te=null;break}N=Ch(_),R.insertBefore(N,te)}z=te,te=te.nextSibling,N.appendChild(z)}else N=null,te=te.nextSibling;L&&(_.selection.setRng(K2(L)),_.nodeChanged())})(v))})(n),(v=>{var _;const k=v.dom,T=aa(v),M=null!==(_=TC(v))&&void 0!==_?_:"",I=(O,R)=>{if((L=>{if(bg(L)){const V=L.keyCode;return!ST(L)&&(Kt.metaKeyPressed(L)||L.altKey||V>=112&&V<=123||Jt(yg,V))}return!1})(O))return;const N=v.getBody(),z=!(bg(L=O)&&!(ST(L)||"keyup"===L.type&&229===L.keyCode))&&((L,V,J)=>{if(L.isEmpty(V,void 0,{skipBogus:!1,includeZwsp:!0})){const te=V.firstElementChild;return!te||!L.getStyle(V.firstElementChild,"padding-left")&&!L.getStyle(V.firstElementChild,"padding-right")&&J===te.nodeName.toLowerCase()}return!1})(k,N,T);var L;(""!==k.getAttrib(N,Uf)!==z||R)&&(k.setAttrib(N,Uf,z?M:null),((L,V)=>{L.dispatch("PlaceholderToggle",{state:V})})(v,z),v.on(z?"keydown":"keyup",I),v.off(z?"keyup":"keydown",I))};Er(M)&&v.on("init",O=>{I(O,!0),v.on("change SetContent ExecCommand",I),v.on("paste",R=>js.setEditorTimeout(v,()=>I(R)))})})(n),(n=>{const i=ur(!1),s=ur(DC(n)?"text":"html"),d=(u=>{const f=ur(null);return{create:()=>((v,_)=>{const{dom:k,selection:T}=v,M=v.getBody();_.set(T.getRng());const I=k.add(v.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},vv);Yt.browser.isFirefox()&&k.setStyle(I,"left","rtl"===k.getStyle(M,"direction",!0)?65535:-65535),k.bind(I,"beforedeactivate focusin focusout",O=>{O.stopPropagation()}),I.focus(),T.select(I,!0)})(u,f),remove:()=>((v,_)=>{const k=v.dom;if(yv(v)){let T;const M=_.get();for(;T=yv(v);)k.remove(T),k.unbind(T);M&&v.selection.setRng(M)}_.set(null)})(u,f),getEl:()=>yv(u),getHtml:()=>(v=>{const _=v.dom,k=(O,R)=>{O.appendChild(R),_.remove(R,!0)},[T,...M]=dn(v.getBody().childNodes,wM);Qe(M,O=>{k(T,O)});const I=_.select("div[id=mcepastebin]",T);for(let O=I.length-1;O>=0;O--){const R=_.create("div");T.insertBefore(R,I[O]),k(R,I[O])}return T?T.innerHTML:""})(u),getLastRng:f.get}})(n);var u,f,v;u=n,(Yt.browser.isChromium()||Yt.browser.isSafari())&&(v=u1,(f=u).on("PastePreProcess",_=>{_.content=v(f,_.content,_.internal)})),((u,f)=>{u.addCommand("mceTogglePlainTextPaste",()=>{((v,_)=>{"text"===_.get()?(_.set("html"),ks(v,!1)):(_.set("text"),ks(v,!0)),v.focus()})(u,f)}),u.addCommand("mceInsertClipboardContent",(v,_)=>{_.html&&Cy(u,_.html,_.internal,!1),_.text&&c1(u,_.text,!1)})})(n,s),(u=>{const f=k=>T=>{k(u,T)},v=DA(u);Ge(v)&&u.on("PastePreProcess",f(v));const _=KD(u);Ge(_)&&u.on("PastePostProcess",f(_))})(n),n.addQueryStateHandler("mceTogglePlainTextPaste",()=>"text"===s.get()),n.on("PreInit",()=>{(u=>{u.on("cut",(f=>v=>{!v.isDefaultPrevented()&&d1(f)&&f.selection.isEditable()&&AS(v,SE(f),iD(f),()=>{if(Yt.browser.isChromium()||Yt.browser.isFirefox()){const _=f.selection.getRng();js.setEditorTimeout(f,()=>{f.selection.setRng(_),f.execCommand("Delete")},0)}else f.execCommand("Delete")})})(u)),u.on("copy",(f=>v=>{!v.isDefaultPrevented()&&d1(f)&&AS(v,SE(f),iD(f),ve)})(u))})(n),((u,f)=>{IA(u)&&u.on("dragend dragover draggesture dragdrop drop drag",v=>{v.preventDefault(),v.stopPropagation()}),bb(u)||u.on("drop",v=>{const _=v.dataTransfer;_&&_n(_.files,T=>/^image\//.test(T.type))&&v.preventDefault()}),u.on("drop",v=>{if(v.isDefaultPrevented())return;const _=EM(u,v);if(_e(_))return;const k=MS(v.dataTransfer),T=qd(k,CS());if((!DM(k)||(N=>{const z=N["text/plain"];return!!z&&0===z.indexOf("file://")})(k))&&ky(u,v,_))return;const M=k[CS()],I=M||k["text/html"]||k["text/plain"],O=((N,z,L,V)=>{const J=N.getParent(L,te=>dl(z,te));if(!le(N.getParent(L,"summary")))return!0;if(J&&Ln(V,"text/html")){const te=(new DOMParser).parseFromString(V["text/html"],"text/html").body;return!le(te.querySelector(J.nodeName.toLowerCase()))}return!1})(u.dom,u.schema,_.startContainer,k),R=f.get();R&&!O||I&&(v.preventDefault(),js.setEditorTimeout(u,()=>{u.undoManager.transact(()=>{(M||R&&O)&&u.execCommand("Delete"),CE(u,_);const N=SM(I);k["text/html"]?Cy(u,N,T,!0):c1(u,N,!0)})}))}),u.on("dragstart",v=>{f.set(!0)}),u.on("dragover dragend",v=>{bb(u)&&!f.get()&&(v.preventDefault(),CE(u,EM(u,v))),"dragend"===v.type&&f.set(!1)}),(v=>{v.on("input",_=>{const k=T=>le(T.querySelector("summary"));if("deleteByDrag"===_.inputType){const T=dn(v.dom.select("details"),k);Qe(T,M=>{Bn(M.firstChild)&&M.firstChild.remove();const I=v.dom.create("summary");I.appendChild(op().dom),M.prepend(I)})}})})(u)})(n,i),((n,i,s)=>{((d,u,f)=>{let v;d.on("keydown",_=>{var k;(Kt.metaKeyPressed(k=_)&&86===k.keyCode||k.shiftKey&&45===k.keyCode)&&!_.isDefaultPrevented()&&(v=_.shiftKey&&86===_.keyCode)}),d.on("paste",_=>{if(_.isDefaultPrevented()||(M=_,Yt.os.isAndroid()&&0===(null===(O=null===(I=M.clipboardData)||void 0===I?void 0:I.items)||void 0===O?void 0:O.length)))return;var M,I,O;const k="text"===f.get()||v;v=!1;const T=MS(_.clipboardData);!DM(T)&&ky(d,_,u.getLastRng()||d.selection.getRng())||(qd(T,"text/html")?(_.preventDefault(),OM(d,T,T["text/html"],k,!0)):qd(T,"text/plain")&&qd(T,"text/uri-list")?(_.preventDefault(),OM(d,T,T["text/plain"],k,!0)):(u.create(),js.setEditorTimeout(d,()=>{const M=u.getHtml();u.remove(),OM(d,T,M,k,!1)},0)))})})(n,i,s),(d=>{const u=v=>gn(v,"webkit-fake-url"),f=v=>gn(v,"data:");d.parser.addNodeFilter("img",(v,_,k)=>{if(!bb(d)&&!0===(null===(M=k.data)||void 0===M?void 0:M.paste))for(const T of v){const M=T.attr("src");Y(M)&&!T.attr("data-mce-object")&&M!==Yt.transparentSrc&&(u(M)||!EA(d)&&f(M))&&T.remove()}var M})})(n)})(n,d,s)})})(n);const f=(v=>{const _=v;return(k=v,go(k.plugins,"rtc").bind(T=>ue.from(T.setup))).fold(()=>(_.rtcInstance=X0(v),ue.none()),k=>(_.rtcInstance=(()=>{const T=ee(null),M=ee("");return{init:{bindEvents:ve},undoManager:{beforeChange:ve,add:T,undo:T,redo:T,clear:ve,reset:ve,hasUndo:Bt,hasRedo:Bt,transact:T,ignore:ve,extra:ve},formatter:{match:Bt,matchAll:ee([]),matchNode:ee(void 0),canApply:Bt,closest:M,apply:ve,remove:ve,toggle:ve,formatChanged:ee({unbind:ve})},editor:{getContent:M,setContent:ee({content:"",html:""}),insertContent:ee(""),addVisual:ve},selection:{getContent:M},autocompleter:{addDecoration:ve,removeDecoration:ve},raw:{getModel:ee(ue.none())}}})(),ue.some(()=>k().then(T=>(_.rtcInstance=(M=>{const I=te=>W(te)?te:{},{init:O,undoManager:R,formatter:N,editor:z,selection:L,autocompleter:V,raw:J}=M;return{init:{bindEvents:O.bindEvents},undoManager:{beforeChange:R.beforeChange,add:R.add,undo:R.undo,redo:R.redo,clear:R.clear,reset:R.reset,hasUndo:R.hasUndo,hasRedo:R.hasRedo,transact:(te,re,ie)=>R.transact(ie),ignore:(te,re)=>R.ignore(re),extra:(te,re,ie,he)=>R.extra(ie,he)},formatter:{match:(te,re,ie,he)=>N.match(te,I(re),he),matchAll:N.matchAll,matchNode:N.matchNode,canApply:te=>N.canApply(te),closest:te=>N.closest(te),apply:(te,re,ie)=>N.apply(te,I(re)),remove:(te,re,ie,he)=>N.remove(te,I(re)),toggle:(te,re,ie)=>N.toggle(te,I(re)),formatChanged:(te,re,ie,he,fe)=>N.formatChanged(re,ie,he,fe)},editor:{getContent:te=>z.getContent(te),setContent:(te,re)=>({content:z.setContent(te,re),html:""}),insertContent:(te,re)=>(z.insertContent(te),""),addVisual:z.addVisual},selection:{getContent:(te,re)=>L.getContent(re)},autocompleter:{addDecoration:V.addDecoration,removeDecoration:V.removeDecoration},raw:{getModel:()=>ue.some(J.getRawModel())}}})(T),T.rtc.isRemote)))));var k})(n);(v=>{const _=v.getDoc(),k=v.getBody();v.dispatch("PreInit"),ZD(v)||(_.body.spellcheck=!1,$M.setAttrib(k,"spellcheck","false")),v.quirks=(n=>{const i=zt.each,s=Kt.BACKSPACE,d=Kt.DELETE,u=n.dom,f=n.selection,v=n.parser,_=Yt.browser,k=_.isFirefox(),T=_.isChromium()||_.isSafari(),M=Yt.deviceType.isiPhone()||Yt.deviceType.isiPad(),I=Yt.os.isMacOS()||Yt.os.isiOS(),O=(we,De)=>{try{n.getDoc().execCommand(we,!1,String(De))}catch{}},R=we=>we.isDefaultPrevented(),N=()=>{n.shortcuts.add("meta+a",null,"SelectAll")},z=()=>{n.inline||u.bind(n.getDoc(),"mousedown mouseup",we=>{let De;if(we.target===n.getDoc().documentElement)if(De=f.getRng(),n.getBody().focus(),"mousedown"===we.type){if(oa(De.startContainer))return;f.placeCaretAt(we.clientX,we.clientY)}else f.setRng(De)})},L=()=>{Range.prototype.getClientRects||n.on("mousedown",we=>{if(!R(we)&&"HTML"===we.target.nodeName){const De=n.getBody();De.blur(),js.setEditorTimeout(n,()=>{De.focus()})}})},V=()=>{const we=th(n);n.on("click",De=>{const Be=De.target;/^(IMG|HR)$/.test(Be.nodeName)&&u.isEditable(Be)&&(De.preventDefault(),n.selection.select(Be),n.nodeChanged()),"A"===Be.nodeName&&u.hasClass(Be,we)&&0===Be.childNodes.length&&u.isEditable(Be.parentNode)&&(De.preventDefault(),f.select(Be))})},J=()=>{n.on("keydown",we=>{if(!R(we)&&we.keyCode===s&&f.isCollapsed()&&0===f.getRng().startOffset){const De=f.getNode().previousSibling;if(De&&De.nodeName&&"table"===De.nodeName.toLowerCase())return we.preventDefault(),!1}return!0})},te=()=>{i0(n)||n.on("BeforeExecCommand mousedown",()=>{O("StyleWithCSS",!1),O("enableInlineTableEditing",!1),o_(n)||O("enableObjectResizing",!1)})},re=()=>{n.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ie=()=>{n.inline||n.on("keydown",()=>{document.activeElement===document.body&&n.getWin().focus()})},he=()=>{n.inline||(n.contentStyles.push("body {min-height: 150px}"),n.on("click",we=>{let De;"HTML"===we.target.nodeName&&(De=n.selection.getRng(),n.getBody().focus(),n.selection.setRng(De),n.selection.normalize(),n.nodeChanged())}))},fe=()=>{I&&n.on("keydown",we=>{!Kt.metaKeyPressed(we)||we.shiftKey||37!==we.keyCode&&39!==we.keyCode||(we.preventDefault(),n.selection.getSel().modify("move",37===we.keyCode?"backward":"forward","lineboundary"))})},ye=()=>{n.on("click",we=>{let De=we.target;do{if("A"===De.tagName)return void we.preventDefault()}while(De=De.parentNode)}),n.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Ie=()=>{n.on("init",()=>{n.dom.bind(n.getBody(),"submit",we=>{we.preventDefault()})})},He=ve;return wc(n)?(T&&(z(),V(),Ie(),N(),M&&(ie(),he(),ye())),k&&(L(),te(),re(),fe())):(n.on("keydown",we=>{if(R(we)||we.keyCode!==Kt.BACKSPACE)return;let De=f.getRng();const Be=De.startContainer,et=De.startOffset,Ye=u.getRoot();let it=Be;if(De.collapsed&&0===et){for(;it.parentNode&&it.parentNode.firstChild===it&&it.parentNode!==Ye;)it=it.parentNode;"BLOCKQUOTE"===it.nodeName&&(n.formatter.toggle("blockquote",void 0,it),De=u.createRng(),De.setStart(Be,0),De.setEnd(Be,0),f.setRng(De))}}),(()=>{const we=De=>{const Be=u.create("body"),et=De.cloneContents();return Be.appendChild(et),f.serializer.serialize(Be,{format:"html"})};n.on("keydown",De=>{const Be=De.keyCode;if(!R(De)&&(Be===d||Be===s)&&n.selection.isEditable()){const et=n.selection.isCollapsed(),Ye=n.getBody();if(et&&!Tr(n.schema,Ye)||!et&&!(it=>{const yt=we(it),It=u.createRng();return It.selectNode(n.getBody()),yt===we(It)})(n.selection.getRng()))return;De.preventDefault(),n.setContent(""),Ye.firstChild&&u.isBlock(Ye.firstChild)?n.selection.setCursorLocation(Ye.firstChild,0):n.selection.setCursorLocation(Ye,0),n.nodeChanged()}})})(),Yt.windowsPhone||n.on("keyup focusin mouseup",we=>{Kt.modifierPressed(we)||(De=>{const Be=De.getBody(),et=De.selection.getRng();return et.startContainer===et.endContainer&&et.startContainer===Be&&0===et.startOffset&&et.endOffset===Be.childNodes.length})(n)||f.normalize()},!0),T&&(z(),V(),n.on("init",()=>{O("DefaultParagraphSeparator",aa(n))}),Ie(),J(),v.addNodeFilter("br",we=>{let De=we.length;for(;De--;)"Apple-interchange-newline"===we[De].attr("class")&&we[De].remove()}),M?(ie(),he(),ye()):N()),k&&(n.on("keydown",we=>{if(!R(we)&&we.keyCode===s){if(!n.getBody().getElementsByTagName("hr").length)return;if(f.isCollapsed()&&0===f.getRng().startOffset){const De=f.getNode(),Be=De.previousSibling;if("HR"===De.nodeName)return u.remove(De),void we.preventDefault();Be&&Be.nodeName&&"hr"===Be.nodeName.toLowerCase()&&(u.remove(Be),we.preventDefault())}}}),L(),(()=>{const we=()=>{const Be=u.getAttribs(f.getStart().cloneNode(!1));return()=>{const et=f.getStart();et!==n.getBody()&&(u.setAttrib(et,"style",null),i(Be,Ye=>{et.setAttributeNode(Ye.cloneNode(!0))}))}},De=()=>!f.isCollapsed()&&u.getParent(f.getStart(),u.isBlock)!==u.getParent(f.getEnd(),u.isBlock);n.on("keypress",Be=>{let et;return!(!(R(Be)||8!==Be.keyCode&&46!==Be.keyCode)&&De()&&(et=we(),n.getDoc().execCommand("delete",!1),et(),Be.preventDefault(),1))}),u.bind(n.getDoc(),"cut",Be=>{if(!R(Be)&&De()){const et=we();js.setEditorTimeout(n,()=>{et()})}})})(),te(),n.on("SetContent ExecCommand",we=>{"setcontent"!==we.type&&"mceInsertLink"!==we.command||i(u.select("a:not([data-mce-block])"),De=>{var Be;let et=De.parentNode;const Ye=u.getRoot();if(et?.lastChild===De){for(;et&&!u.isBlock(et);){if((null===(Be=et.parentNode)||void 0===Be?void 0:Be.lastChild)!==et||et===Ye)return;et=et.parentNode}u.add(et,"br",{"data-mce-bogus":1})}})}),re(),fe(),J())),{refreshContentEditable:He,isHidden:()=>{if(!k||n.removed)return!1;const we=n.selection.getSel();return!we||!we.rangeCount||0===we.rangeCount}}})(v),v.dispatch("PostRender");const T=vl(v);void 0!==T&&(k.dir=T);const M=IC(v);M&&v.on("BeforeSetContent",I=>{zt.each(M,O=>{I.content=I.content.replace(O,R=>"\x3c!--mce:protected "+escape(R)+"--\x3e")})}),v.on("SetContent",()=>{v.addVisual(v.getBody())}),v.on("compositionstart compositionend",I=>{v.composing="compositionstart"===I.type})})(n),(v=>{const _=BA(v);var T,k;Y(zA(v))||!pe(_)&&"INVALID"!=("gpl"===(k=_).toLowerCase()||(T=k).length>=64&&T.length<=255?"VALID":"INVALID")||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(n),f.fold(()=>{const v=(_=>{let k=!1;const T=setTimeout(()=>{k||_.setProgressState(!0)},500);return()=>{clearTimeout(T),k=!0,_.setProgressState(!1)}})(n);VS(n).then(()=>{y1(n),v()})},v=>{n.setProgressState(!0),VS(n).then(()=>{v().then(_=>{n.setProgressState(!1),y1(n),Mw(n)},_=>{n.notificationManager.open({type:"error",text:String(_)}),y1(n),Mw(n)})})})},hs=Wt,HS=Mr.DOM,_D=Mr.DOM,Ah=(n,i)=>({editorContainer:n,iframeContainer:i,api:{}}),Ar=n=>{const i=n.getElement();return n.inline?Ah(null):(s=>{const d=_D.create("div");return _D.insertAfter(d,s),Ah(d,d)})(i)},b1=async n=>{n.dispatch("ScriptsLoaded"),(s=>{const d=zt.trim(e_(s)),u=s.ui.registry.getAll().icons,f={...K0.get("default").icons,...K0.get(d).icons};ho(f,(v,_)=>{Ln(u,_)||s.ui.registry.addIcon(_,v)})})(n),(s=>{const d=Jh(s);if(Y(d)){const u=Ff.get(d);s.theme=u(s,Ff.urls[d])||{},Ge(s.theme.init)&&s.theme.init(s,Ff.urls[d]||s.documentBaseUrl.replace(/\/$/,""))}else s.theme={}})(n),(s=>{const d=Lm(s),u=Cu.get(d);s.model=u(s,Cu.urls[d])})(n),(s=>{const d=[];Qe(Gl(s),u=>{((f,v,_)=>{const k=J0.get(_),T=J0.urls[_]||f.documentBaseUrl.replace(/\/$/,"");if(_=zt.trim(_),k&&-1===zt.inArray(v,_)){if(f.plugins[_])return;try{const M=k(f,T)||{};f.plugins[_]=M,Ge(M.init)&&(M.init(f,T),v.push(_))}catch(M){((I,O,R)=>{const N=ja.translate(["Failed to initialize plugin: {0}",O]);Nn(I,"PluginLoadError",{message:N}),Cx(N,R),Sx(I,N)})(f,_,M)}}})(s,d,u.replace(/^\-/,""))})})(n);const i=await(s=>{const d=s.getElement();return s.orgDisplay=d.style.display,Y(Jh(s))?(u=>{const f=u.theme.renderUI;return f?f():Ar(u)})(s):Ge(Jh(s))?(u=>{const f=u.getElement(),v=Jh(u)(u,f);return v.editorContainer.nodeType&&(v.editorContainer.id=v.editorContainer.id||u.id+"_parent"),v.iframeContainer&&v.iframeContainer.nodeType&&(v.iframeContainer.id=v.iframeContainer.id||u.id+"_iframecontainer"),v.height=v.iframeHeight?v.iframeHeight:f.offsetHeight,v})(s):Ar(s)})(n);var s,d;((s,d)=>{const u={show:ue.from(d.show).getOr(ve),hide:ue.from(d.hide).getOr(ve),isEnabled:ue.from(d.isEnabled).getOr(Wt),setEnabled:f=>{f&&"readonly"===s.mode.get()||ue.from(d.setEnabled).each(v=>v(f))}};s.ui={...s.ui,...u}})(n,ue.from(i.api).getOr({})),n.editorContainer=i.editorContainer,(s=n).contentCSS=s.contentCSS.concat(U2(d=s,o0(d)),(d=>U2(d,gc(d)))(s)),n.inline?YM(n):((s,d)=>{((u,f)=>{const v=Yt.browser.isFirefox()?a_(u):"Rich Text Area",_=u.translate(v),k=Pc(Ze(u.getElement()),"tabindex").bind(li),T=((M,I,O,R)=>{const N=yr("iframe");return R.each(z=>ta(N,"tabindex",z)),nc(N,O),nc(N,{id:M+"_ifr",frameBorder:"0",allowTransparency:"true",title:I}),Uu(N,"tox-edit-area__iframe"),N})(u.id,_,Om(u),k).dom;T.onload=()=>{T.onload=null,u.dispatch("load")},u.contentAreaContainer=f.iframeContainer,u.iframeElement=T,u.iframeHTML=(M=>{let I=CA(M)+"<html><head>";ia(M)!==M.documentBaseUrl&&(I+='<base href="'+M.documentBaseURI.getURI()+'" />'),I+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const O=Xh(M),R=kA(M),N=M.translate(a_(M));return Q1(M)&&(I+='<meta http-equiv="Content-Security-Policy" content="'+Q1(M)+'" />'),I+=`</head><body id="${O}" class="mce-content-body ${R}" data-id="${M.id}" aria-label="${N}"><br></body></html>`,I})(u),HS.add(f.iframeContainer,T)})(s,d),d.editorContainer&&(d.editorContainer.style.display=s.orgDisplay,s.hidden=HS.isHidden(d.editorContainer)),s.getElement().style.display="none",HS.setAttrib(s.id,"aria-hidden","true"),s.getElement().style.visibility=s.orgVisibility,(u=>{const f=u.iframeElement,v=()=>{u.contentDocument=f.contentDocument,YM(u)};if(La(u)||Yt.browser.isFirefox()){const k=u.getDoc();k.open(),k.write(u.iframeHTML),k.close(),v()}else{const k=((n,i,s,d)=>((u,f,v,_,k)=>{const T=(M=v,I=_,O=>{M(O)&&I((R=>{const N=Ze(ou(R).getOr(R.target)),z=()=>R.stopPropagation(),L=()=>R.preventDefault(),V=Me(L,z);return{target:N,x:R.clientX,y:R.clientY,stop:z,prevent:L,kill:V,raw:R}})(O))});var M,I;return u.dom.addEventListener(f,T,!1),{unbind:We(ln,u,f,T,!1)}})(n,"load",s,()=>{k.unbind(),v()}))(Ze(f),0,hs);f.srcdoc=u.iframeHTML}})(s)})(n,{editorContainer:i.editorContainer,iframeContainer:i.iframeContainer})},_v=Mr.DOM,wD=n=>"-"===n.charAt(0),SD=(n,i,s)=>ue.from(i).filter(d=>Er(d)&&!K0.has(d)).map(d=>({url:`${n.editorManager.baseURL}/icons/${d}/icons${s}.js`,name:ue.some(d)})),ha=Dl().deviceType,x1=ha.isPhone(),gs=ha.isTablet(),ts=n=>{if(_e(n))return[];{const i=K(n)?n:n.split(/[ ,]/),s=hn(i,Xn);return dn(s,Er)}},US=(n,i)=>Ln(n.sections(),i),Rg=(n,i)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:go(n,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...i?{menubar:!1}:{}}),GS=(n,i)=>{var s;const d=null!==(s=i.external_plugins)&&void 0!==s?s:{};return n&&n.external_plugins?zt.extend({},n.external_plugins,d):d},kD=(n,i)=>{const s=n.selection,d=n.dom;return/^ | $/.test(i)?((u,f,v,_)=>{const k=Ze(u.getRoot());return v=Pd(k,ut.fromRangeStart(f),_)?v.replace(/^ /,"&nbsp;"):v.replace(/^&nbsp;/," "),A0(k,ut.fromRangeEnd(f),_)?v.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):v.replace(/&nbsp;(<br( \/)?>)?$/," ")})(d,s.getRng(),i,n.schema):i},Dy=(n,i)=>{if(n.selection.isEditable()){const{content:s,details:d}=(u=>{if("string"!=typeof u){const f=zt.extend({paste:u.paste,data:{paste:u.paste}},u);return{content:u.content,details:f}}return{content:u,details:{}}})(i);E2(n,{...d,content:kD(n,s),format:"html",set:!1,selection:!0}).each(u=>{const f=(_=u.content,k=d,sd(n).editor.insertContent(_,k));var _,k;$0(n,f,u),n.addVisual()})}},Yd={"font-size":"size","font-family":"face"},Oy=rs("font"),qS=n=>(i,s)=>ue.from(s).map(Ze).filter(ci).bind(d=>{return(u=n,f=i,v=d.dom,mf(Ze(v),_=>{return Ov(k=_,u).orThunk(()=>Oy(k)?go(Yd,u).bind(T=>Pc(k,T)):ue.none());var k},_=>To(Ze(f),_))).or(((u,f)=>ue.from(Mr.DOM.getStyle(f,u,!0)))(n,d.dom));var u,f,v}).getOr(""),ZM=qS("font-size"),TD=Me(n=>n.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),qS("font-family")),fN=n=>Ws(n.getBody()).bind(i=>{const s=i.container();return ue.from(Mt(s)?s.parentNode:s)}),Lg=(n,i)=>{return s=n,d=Pe(ue.some,i),(u=s,ue.from(u.selection.getRng()).bind(f=>{const v=u.getBody();return f.startContainer===v&&0===f.startOffset?ue.none():ue.from(u.selection.getStart(!0))})).orThunk(We(fN,s)).map(Ze).filter(ci).bind(d);var s,d,u},LE=(n,i)=>{if(/^[0-9.]+$/.test(i)){const s=parseInt(i,10);if(s>=1&&s<=7){const d=zt.explode(n.options.get("font_size_style_values")),u=zt.explode(n.options.get("font_size_classes"));return u.length>0?u[s-1]||i:d[s-1]||i}return i}return i},vN=n=>{const i=n.split(/\s*,\s*/);return hn(i,s=>-1===s.indexOf(" ")||gn(s,'"')||gn(s,"'")?s:`'${s}'`).join(",")},MD=(n,i)=>{if(n.mode.isReadOnly())return;const s=n.dom,d=n.selection.getRng(),u=i?n.selection.getStart():n.selection.getEnd(),f=i?d.startContainer:d.endContainer,v=gv(s,f);if(!v||!v.isContentEditable)return;const _=i?ki:ya,k=aa(n);((T,M,I,O)=>{const R=T.dom,N=L=>R.isBlock(L)&&L.parentElement===I,z=N(M)?M:R.getParent(O,N,I);return ue.from(z).map(Ze)})(n,u,v,f).each(T=>{const M=VI(n,f,T.dom,v,!1,k);_(T,Ze(M)),n.selection.setCursorLocation(M,0),n.dispatch("NewBlock",{newBlock:M}),Zp(n,"insertParagraph")})},_1=["toggleview"],KM=n=>Jt(_1,n.toLowerCase());class Ey{constructor(i){this.commands={state:{},exec:{},value:{}},this.editor=i}execCommand(i,s=!1,d,u){const f=this.editor,v=i.toLowerCase(),_=u?.skip_focus;if(f.removed||("mcefocus"!==v&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(v)||_?Ld(T=f).each(M=>T.selection.setRng(M)):f.focus()),f.dispatch("BeforeExecCommand",{command:i,ui:s,value:d}).isDefaultPrevented()))return!1;var T;const k=this.commands.exec[v];return!!Ge(k)&&(k(v,s,d),f.dispatch("ExecCommand",{command:i,ui:s,value:d}),!0)}queryCommandState(i){if(!KM(i)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const s=i.toLowerCase(),d=this.commands.state[s];return!!Ge(d)&&d(s)}queryCommandValue(i){if(!KM(i)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const s=i.toLowerCase(),d=this.commands.value[s];return Ge(d)?d(s):""}addCommands(i,s="exec"){const d=this.commands;ho(i,(u,f)=>{Qe(f.toLowerCase().split(","),v=>{d[s][v]=u})})}addCommand(i,s,d){const u=i.toLowerCase();this.commands.exec[u]=(f,v,_)=>s.call(d??this.editor,v,_)}queryCommandSupported(i){const s=i.toLowerCase();return!!this.commands.exec[s]}addQueryStateHandler(i,s,d){this.commands.state[i.toLowerCase()]=()=>s.call(d??this.editor)}addQueryValueHandler(i,s,d){this.commands.value[i.toLowerCase()]=()=>s.call(d??this.editor)}}const w1=(n,i,s)=>{try{n.getDoc().execCommand(i,!1,String(s))}catch{}},Ih=(n,i)=>{n.dom.contentEditable=i?"true":"false"},S1=n=>n.readonly,C1=["copy"],ID=zt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class JM{static isNative(i){return!!ID[i.toLowerCase()]}constructor(i){this.bindings={},this.settings=i||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Bt}fire(i,s){return this.dispatch(i,s)}dispatch(i,s){const d=i.toLowerCase(),u=di(d,s??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(u);const f=this.bindings[d];if(f)for(let v=0,_=f.length;v<_;v++){const k=f[v];if(!k.removed){if(k.once&&this.off(d,k.func),u.isImmediatePropagationStopped())return u;if(!1===k.func.call(this.scope,u))return u.preventDefault(),u}}return u}on(i,s,d,u){if(!1===s&&(s=Bt),s){const f={func:s,removed:!1};u&&zt.extend(f,u);const v=i.toLowerCase().split(" ");let _=v.length;for(;_--;){const k=v[_];let T=this.bindings[k];T||(T=[],this.toggleEvent(k,!0)),T=d?[f,...T]:[...T,f],this.bindings[k]=T}}return this}off(i,s){if(i){const d=i.toLowerCase().split(" ");let u=d.length;for(;u--;){const f=d[u];let v=this.bindings[f];if(!f)return ho(this.bindings,(_,k)=>{this.toggleEvent(k,!1),delete this.bindings[k]}),this;if(v){if(s){const _=Yn(v,k=>k.func===s);v=_.fail,this.bindings[f]=v,Qe(_.pass,k=>{k.removed=!0})}else v.length=0;v.length||(this.toggleEvent(i,!1),delete this.bindings[f])}}}else ho(this.bindings,(d,u)=>{this.toggleEvent(u,!1)}),this.bindings={};return this}once(i,s,d){return this.on(i,s,d,{once:!0})}has(i){i=i.toLowerCase();const s=this.bindings[i];return!(!s||0===s.length)}}const k1=n=>(n._eventDispatcher||(n._eventDispatcher=new JM({scope:n,toggleEvent:(i,s)=>{JM.isNative(i)&&n.toggleNativeEvent&&n.toggleNativeEvent(i,s)}})),n._eventDispatcher),rr={fire(n,i,s){return this.dispatch(n,i,s)},dispatch(n,i,s){const d=this;if(d.removed&&"remove"!==n&&"detach"!==n)return di(n.toLowerCase(),i??{},d);const u=k1(d).dispatch(n,i);if(!1!==s&&d.parent){let f=d.parent();for(;f&&!u.isPropagationStopped();)f.dispatch(n,u,!1),f=f.parent?f.parent():void 0}return u},on(n,i,s){return k1(this).on(n,i,s)},off(n,i){return k1(this).off(n,i)},once(n,i){return k1(this).once(n,i)},hasEventListeners(n){return k1(this).has(n)}},Ru=Mr.DOM;let Qp;const T1=(n,i)=>{if("selectionchange"===i)return n.getDoc();if(!n.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(i))return n.getDoc().documentElement;const s=Kh(n);return s?(n.eventRoot||(n.eventRoot=Ru.select(s)[0]),n.eventRoot):n.getBody()},Xd=(n,i,s)=>{n.hidden?S1(n)&&((d,u)=>{if("click"!==u.type||Kt.metaKeyPressed(u))Jt(C1,u.type)&&d.dispatch(u.type,u);else{const f=Ze(u.target);(v=d,_=f,ic(_,"a",k=>To(k,Ze(v.getBody()))).bind(k=>Pc(k,"href"))).each(v=>{if(u.preventDefault(),/^#/.test(v)){const _=d.dom.select(`${v},[name="${Ft(v,"#")}"]`);_.length&&d.selection.scrollIntoView(_[0],!0)}else window.open(v,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var v,_})(n,s):n.dispatch(i,s)},$S=(n,i)=>{if(n.delegates||(n.delegates={}),n.delegates[i]||n.removed)return;const s=T1(n,i);if(Kh(n)){if(Qp||(Qp={},n.editorManager.on("removeEditor",()=>{n.editorManager.activeEditor||Qp&&(ho(Qp,(u,f)=>{n.dom.unbind(T1(n,f))}),Qp=null)})),Qp[i])return;const d=u=>{const f=u.target,v=n.editorManager.get();let _=v.length;for(;_--;){const k=v[_].getBody();(k===f||Ru.isChildOf(f,k))&&Xd(v[_],i,u)}};Qp[i]=d,Ru.bind(s,i,d)}else{const d=u=>{Xd(n,i,u)};Ru.bind(s,i,d),n.delegates[i]=d}},QM={...rr,bindPendingEventDelegates(){const n=this;zt.each(n._pendingNativeEvents,i=>{$S(n,i)})},toggleNativeEvent(n,i){const s=this;"focus"!==n&&"blur"!==n&&(s.removed||(i?s.initialized?$S(s,n):s._pendingNativeEvents?s._pendingNativeEvents.push(n):s._pendingNativeEvents=[n]:s.initialized&&s.delegates&&(s.dom.unbind(T1(s,n),n,s.delegates[n]),delete s.delegates[n])))},unbindAllNativeEvents(){const n=this,i=n.getBody(),s=n.dom;n.delegates&&(ho(n.delegates,(d,u)=>{n.dom.unbind(T1(n,u),u,d)}),delete n.delegates),!n.inline&&i&&s&&(i.onload=null,s.unbind(n.getWin()),s.unbind(n.getDoc())),s&&(s.unbind(i),s.unbind(n.getContainer()))}},ga=n=>Y(n)?{value:n.split(/[ ,]/),valid:!0}:Ue(n,Y)?{value:n,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},eA=(n,i)=>n+(Kr(i.message)?"":`. ${i.message}`),M1=n=>n.valid,tA=(n,i,s="")=>{const d=i(n);return de(d)?d?{value:n,valid:!0}:{valid:!1,message:s}:d},em=["design","readonly"],nA=(n,i,s,d)=>{const u=s[i.get()],f=s[d];try{f.activate()}catch(v){return void console.error(`problem while activating editor mode ${d}:`,v)}var v;u.deactivate(),u.editorReadOnly!==f.editorReadOnly&&((n,i)=>{const s=Ze(n.getBody());var d,u,f;f=i,zh(d=s,u="mce-content-readonly")&&!f?Gu(d,u):f&&Uu(d,u),i?((d=>{d.readonly=!0,d.selection.controlSelection.hideResizeRect(),d._selectionOverrides.hideFakeCaret(),(u=>{ue.from(u.selection.getNode()).each(f=>{f.removeAttribute("data-mce-selected")})})(d)})(n),n.hasEditableRoot()&&Ih(s,!0)):((d,u)=>{d.readonly=!1,d.hasEditableRoot()&&Ih(u,!0),((f,v)=>{w1(f,"StyleWithCSS",v),w1(f,"enableInlineTableEditing",v),w1(f,"enableObjectResizing",v)})(d,!1),pk(d)&&d.focus(),(f=>{f.selection.setRng(f.selection.getRng())})(d),d.nodeChanged()})(n,s)})(n,f.editorReadOnly),i.set(d),(v=n).dispatch("SwitchMode",{mode:d})},Lu=zt.each,Ac=zt.explode,A1={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Ry=zt.makeMap("alt,ctrl,shift,meta,access"),DD=n=>{const i={},s=Yt.os.isMacOS()||Yt.os.isiOS();Lu(Ac(n.toLowerCase(),"+"),f=>{f in Ry?i[f]=!0:/^[0-9]{2,}$/.test(f)?i.keyCode=parseInt(f,10):(i.charCode=f.charCodeAt(0),i.keyCode=A1[f]||f.toUpperCase().charCodeAt(0))});const d=[i.keyCode];let u;for(u in Ry)i[u]?d.push(u):i[u]=!1;return i.id=d.join(","),i.access&&(i.alt=!0,s?i.ctrl=!0:i.shift=!0),i.meta&&(s?i.meta=!0:(i.ctrl=!0,i.meta=!1)),i};class YS{constructor(i){this.shortcuts={},this.pendingPatterns=[],this.editor=i;const s=this;i.on("keyup keypress keydown",d=>{!s.hasModifier(d)&&!s.isFunctionKey(d)||d.isDefaultPrevented()||(Lu(s.shortcuts,u=>{s.matchShortcut(d,u)&&(s.pendingPatterns=u.subpatterns.slice(0),"keydown"===d.type&&s.executeShortcutAction(u))}),s.matchShortcut(d,s.pendingPatterns[0])&&(1===s.pendingPatterns.length&&"keydown"===d.type&&s.executeShortcutAction(s.pendingPatterns[0]),s.pendingPatterns.shift()))})}add(i,s,d,u){const f=this,v=f.normalizeCommandFunc(d);return Lu(Ac(zt.trim(i)),_=>{const k=f.createShortcut(_,s,v,u);f.shortcuts[k.id]=k}),!0}remove(i){const s=this.createShortcut(i);return!!this.shortcuts[s.id]&&(delete this.shortcuts[s.id],!0)}normalizeCommandFunc(i){const s=this,d=i;return"string"==typeof d?()=>{s.editor.execCommand(d,!1,null)}:zt.isArray(d)?()=>{s.editor.execCommand(d[0],d[1],d[2])}:d}createShortcut(i,s,d,u){const f=zt.map(Ac(i,">"),DD);return f[f.length-1]=zt.extend(f[f.length-1],{func:d,scope:u||this.editor}),zt.extend(f[0],{desc:this.editor.translate(s),subpatterns:f.slice(1)})}hasModifier(i){return i.altKey||i.ctrlKey||i.metaKey}isFunctionKey(i){return"keydown"===i.type&&i.keyCode>=112&&i.keyCode<=123}matchShortcut(i,s){return!!s&&s.ctrl===i.ctrlKey&&s.meta===i.metaKey&&s.alt===i.altKey&&s.shift===i.shiftKey&&!!(i.keyCode===s.keyCode||i.charCode&&i.charCode===s.charCode)&&(i.preventDefault(),!0)}executeShortcutAction(i){return i.func?i.func.call(i.scope):null}}const oA=()=>{const n=(()=>{const i={},s={},d={},u={},f={},v={},_={},k={},T={},M=(I,O)=>(R,N)=>{I[R.toLowerCase()]={...N,type:O}};return{addButton:M(i,"button"),addGroupToolbarButton:M(i,"grouptoolbarbutton"),addToggleButton:M(i,"togglebutton"),addMenuButton:M(i,"menubutton"),addSplitButton:M(i,"splitbutton"),addMenuItem:M(s,"menuitem"),addNestedMenuItem:M(s,"nestedmenuitem"),addToggleMenuItem:M(s,"togglemenuitem"),addAutocompleter:M(d,"autocompleter"),addContextMenu:M(f,"contextmenu"),addContextToolbar:M(v,"contexttoolbar"),addContextForm:M(v,"contextform"),addSidebar:M(k,"sidebar"),addView:M(T,"views"),addIcon:(I,O)=>u[I.toLowerCase()]=O,addContext:(I,O)=>_[I.toLowerCase()]=O,getAll:()=>({buttons:i,menuItems:s,icons:u,popups:d,contextMenus:f,contextToolbars:v,sidebars:k,views:T,contexts:_})}})();return{addAutocompleter:n.addAutocompleter,addButton:n.addButton,addContextForm:n.addContextForm,addContextMenu:n.addContextMenu,addContextToolbar:n.addContextToolbar,addIcon:n.addIcon,addMenuButton:n.addMenuButton,addMenuItem:n.addMenuItem,addNestedMenuItem:n.addNestedMenuItem,addSidebar:n.addSidebar,addSplitButton:n.addSplitButton,addToggleButton:n.addToggleButton,addGroupToolbarButton:n.addGroupToolbarButton,addToggleMenuItem:n.addToggleMenuItem,addView:n.addView,addContext:n.addContext,getAll:n.getAll}},wv=Mr.DOM,OD=zt.extend,Ui=zt.each;class Pu{constructor(i,s,d){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=d,this.documentBaseUrl=d.documentBaseURL,OD(this,QM);const u=this;this.id=i,this.hidden=!1;const f=((R,N)=>{const z=sN(N);return((n,i,s,d,u)=>{var f;const v=n?{mobile:Rg(null!==(f=u.mobile)&&void 0!==f?f:{},i)}:{},_=((n,i)=>{const s=((f,v)=>{const _={},k={};return Ma(f,(T,M)=>Jt(n,M),Br(_),Br(k)),{t:_,f:k}})(i);return u=s.f,{sections:ee(s.t),options:ee(u)};var u})(["mobile"],MI(v,u)),k=zt.extend(s,d,_.options(),n&&US(_,"mobile")?((T,M,I={})=>{const O=T.sections(),R=go(O,M).getOr({});return zt.extend({},I,R)})(_,"mobile"):{},{external_plugins:GS(d,_.options())});return((T,M,I,O)=>{const R=ts(I.forced_plugins),N=ts(O.plugins),z=US(J=M,"mobile")?J.sections().mobile:{},L=((J,te,re,ie)=>J&&US(te,"mobile")?ie:re)(T,M,N,z.plugins?ts(z.plugins):N),V=((J,te)=>[...ts(J),...ts(te)])(R,L);var J;return zt.extend(O,{forced_plugins:R,plugins:V})})(n,_,d,k)})(x1||gs,x1,z,R,z)})(d.defaultOptions,s);this.options=((R,N,z=N)=>{const L={},V={},J=(re,ie,he)=>{const fe=tA(ie,he);return M1(fe)?(V[re]=fe.value,!0):(console.warn(eA(`Invalid value passed for the ${re} option`,fe)),!1)},te=re=>Ln(L,re);return{register:(re,ie)=>{const he=Y(ie.processor)?(ye=>{const Ie=(()=>{switch(ye){case"array":return K;case"boolean":return de;case"function":return Ge;case"number":return Re;case"object":return W;case"string":return Y;case"string[]":return ga;case"object[]":return He=>Ue(He,W);case"regexp":return He=>X(He,RegExp);default:return Wt}})();return He=>tA(He,Ie,`The value must be a ${ye}.`)})(ie.processor):ie.processor,fe=((ye,Ie,He)=>{if(!pe(Ie)){const we=tA(Ie,He);if(M1(we))return we.value;console.error(eA(`Invalid default value passed for the "${ye}" option`,we))}})(re,ie.default,he);L[re]={...ie,default:fe,processor:he},go(V,re).orThunk(()=>go(N,re)).each(ye=>J(re,ye,he))},isRegistered:te,get:re=>go(V,re).orThunk(()=>go(L,re).map(ie=>ie.default)).getOrUndefined(),set:(re,ie)=>{if(te(re)){const he=L[re];return he.immutable?(console.error(`"${re}" is an immutable option and cannot be updated`),!1):J(re,ie,he.processor)}return console.warn(`"${re}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:re=>{const ie=te(re);return ie&&delete V[re],ie},isSet:re=>Ln(V,re),debug:()=>{try{console.log(JSON.parse(JSON.stringify(z,(re,ie)=>de(ie)||Re(ie)||Y(ie)||le(ie)||K(ie)||U(ie)?ie:Object.prototype.toString.call(ie))))}catch(re){console.error(re)}}}})(0,f,s),(R=>{const N=R.options.register;N("id",{processor:"string",default:R.id}),N("selector",{processor:"string"}),N("target",{processor:"object"}),N("suffix",{processor:"string"}),N("cache_suffix",{processor:"string"}),N("base_url",{processor:"string"}),N("referrer_policy",{processor:"string",default:""}),N("language_load",{processor:"boolean",default:!0}),N("inline",{processor:"boolean",default:!1}),N("iframe_attrs",{processor:"object",default:{}}),N("doctype",{processor:"string",default:"<!DOCTYPE html>"}),N("document_base_url",{processor:"string",default:R.documentBaseUrl}),N("body_id",{processor:Ea(R,"tinymce"),default:"tinymce"}),N("body_class",{processor:Ea(R),default:""}),N("content_security_policy",{processor:"string",default:""}),N("br_in_pre",{processor:"boolean",default:!0}),N("forced_root_block",{processor:z=>{const L=Y(z)&&Er(z);return L?{value:z,valid:L}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),N("forced_root_block_attrs",{processor:"object",default:{}}),N("newline_behavior",{processor:z=>{const L=Jt(["block","linebreak","invert","default"],z);return L?{value:z,valid:L}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),N("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),N("no_newline_selector",{processor:"string",default:""}),N("keep_styles",{processor:"boolean",default:!0}),N("end_container_on_empty_block",{processor:z=>de(z)||Y(z)?{valid:!0,value:z}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),N("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),N("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),N("font_size_classes",{processor:"string",default:""}),N("automatic_uploads",{processor:"boolean",default:!0}),N("images_reuse_filename",{processor:"boolean",default:!1}),N("images_replace_blob_uris",{processor:"boolean",default:!0}),N("icons",{processor:"string",default:""}),N("icons_url",{processor:"string",default:""}),N("images_upload_url",{processor:"string",default:""}),N("images_upload_base_path",{processor:"string",default:""}),N("images_upload_credentials",{processor:"boolean",default:!1}),N("images_upload_handler",{processor:"function"}),N("language",{processor:"string",default:"en"}),N("language_url",{processor:"string",default:""}),N("entity_encoding",{processor:"string",default:"named"}),N("indent",{processor:"boolean",default:!0}),N("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),N("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),N("indent_use_margin",{processor:"boolean",default:!1}),N("indentation",{processor:"string",default:"40px"}),N("content_css",{processor:z=>{const L=!1===z||Y(z)||Ue(z,Y);return L?Y(z)?{value:hn(z.split(","),Xn),valid:L}:K(z)?{value:z,valid:L}:!1===z?{value:[],valid:L}:{value:z,valid:L}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:r_(R)?[]:["default"]}),N("content_style",{processor:"string"}),N("content_css_cors",{processor:"boolean",default:!1}),N("font_css",{processor:z=>{const L=Y(z)||Ue(z,Y);return L?{value:K(z)?z:hn(z.split(","),Xn),valid:L}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),N("inline_boundaries",{processor:"boolean",default:!0}),N("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),N("object_resizing",{processor:z=>{const L=de(z)||Y(z);return L?!1===z||du.isiPhone()||du.isiPad()?{value:"",valid:L}:{value:!0===z?"table,img,figure.image,div,video,iframe":z,valid:L}:{valid:!1,message:"Must be boolean or a string"}},default:!SC}),N("resize_img_proportional",{processor:"boolean",default:!0}),N("event_root",{processor:"string"}),N("service_message",{processor:"string"}),N("theme",{processor:z=>!1===z||Y(z)||Ge(z),default:"silver"}),N("theme_url",{processor:"string"}),N("formats",{processor:"object"}),N("format_empty_lines",{processor:"boolean",default:!1}),N("format_noneditable_selector",{processor:"string",default:""}),N("preview_styles",{processor:z=>{const L=!1===z||Y(z);return L?{value:!1===z?"":z,valid:L}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),N("custom_ui_selector",{processor:"string",default:""}),N("hidden_input",{processor:"boolean",default:!0}),N("submit_patch",{processor:"boolean",default:!0}),N("encoding",{processor:"string"}),N("add_form_submit_trigger",{processor:"boolean",default:!0}),N("add_unload_trigger",{processor:"boolean",default:!0}),N("custom_undo_redo_levels",{processor:"number",default:0}),N("disable_nodechange",{processor:"boolean",default:!1}),N("readonly",{processor:"boolean",default:!1}),N("editable_root",{processor:"boolean",default:!0}),N("plugins",{processor:"string[]",default:[]}),N("external_plugins",{processor:"object"}),N("forced_plugins",{processor:"string[]"}),N("model",{processor:"string",default:R.hasPlugin("rtc")?"plugin":"dom"}),N("model_url",{processor:"string"}),N("block_unsupported_drop",{processor:"boolean",default:!0}),N("visual",{processor:"boolean",default:!0}),N("visual_table_class",{processor:"string",default:"mce-item-table"}),N("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),N("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),N("setup",{processor:"function"}),N("init_instance_callback",{processor:"function"}),N("url_converter",{processor:"function",default:R.convertURL}),N("url_converter_scope",{processor:"object",default:R}),N("urlconverter_callback",{processor:"function"}),N("allow_conditional_comments",{processor:"boolean",default:!1}),N("allow_html_data_urls",{processor:"boolean",default:!1}),N("allow_svg_data_urls",{processor:"boolean"}),N("allow_html_in_named_anchor",{processor:"boolean",default:!1}),N("allow_script_urls",{processor:"boolean",default:!1}),N("allow_unsafe_link_target",{processor:"boolean",default:!1}),N("allow_mathml_annotation_encodings",{processor:z=>{const L=Ue(z,Y);return L?{value:z,valid:L}:{valid:!1,message:"Must be an array of strings."}},default:[]}),N("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),N("fix_list_elements",{processor:"boolean",default:!1}),N("preserve_cdata",{processor:"boolean",default:!1}),N("remove_trailing_brs",{processor:"boolean",default:!0}),N("pad_empty_with_br",{processor:"boolean",default:!1}),N("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),N("element_format",{processor:"string",default:"html"}),N("entities",{processor:"string"}),N("schema",{processor:"string",default:"html5"}),N("convert_urls",{processor:"boolean",default:!0}),N("relative_urls",{processor:"boolean",default:!0}),N("remove_script_host",{processor:"boolean",default:!0}),N("custom_elements",{processor:rn}),N("extended_valid_elements",{processor:"string"}),N("invalid_elements",{processor:"string"}),N("invalid_styles",{processor:rn}),N("valid_children",{processor:"string"}),N("valid_classes",{processor:rn}),N("valid_elements",{processor:"string"}),N("valid_styles",{processor:rn}),N("verify_html",{processor:"boolean",default:!0}),N("auto_focus",{processor:z=>Y(z)||!0===z}),N("browser_spellcheck",{processor:"boolean",default:!1}),N("protect",{processor:"array"}),N("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),N("deprecation_warnings",{processor:"boolean",default:!0}),N("a11y_advanced_options",{processor:"boolean",default:!1}),N("api_key",{processor:"string"}),N("license_key",{processor:"string"}),N("paste_block_drop",{processor:"boolean",default:!1}),N("paste_data_images",{processor:"boolean",default:!0}),N("paste_preprocess",{processor:"function"}),N("paste_postprocess",{processor:"function"}),N("paste_webkit_styles",{processor:"string",default:"none"}),N("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),N("paste_merge_formats",{processor:"boolean",default:!0}),N("smart_paste",{processor:"boolean",default:!0}),N("paste_as_text",{processor:"boolean",default:!1}),N("paste_tab_spaces",{processor:"number",default:4}),N("text_patterns",{processor:z=>Ue(z,W)||!1===z?{value:Oa(!1===z?[]:z),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),N("text_patterns_lookup",{processor:z=>{return Ge(z)?{value:(L=z,V=>{const J=L(V);return Oa(J)}),valid:!0}:{valid:!1,message:"Must be a single function"};var L},default:z=>[]}),N("noneditable_class",{processor:"string",default:"mceNonEditable"}),N("editable_class",{processor:"string",default:"mceEditable"}),N("noneditable_regexp",{processor:z=>Ue(z,J1)?{value:z,valid:!0}:J1(z)?{value:[z],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),N("table_tab_navigation",{processor:"boolean",default:!0}),N("highlight_on_focus",{processor:"boolean",default:!0}),N("xss_sanitization",{processor:"boolean",default:!0}),N("details_initial_state",{processor:z=>{const L=Jt(["inherited","collapsed","expanded"],z);return L?{value:z,valid:L}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),N("details_serialized_state",{processor:z=>{const L=Jt(["inherited","collapsed","expanded"],z);return L?{value:z,valid:L}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),N("init_content_sync",{processor:"boolean",default:!1}),N("newdocument_content",{processor:"string",default:""}),N("sandbox_iframes",{processor:"boolean",default:!0}),N("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),N("convert_unsafe_embeds",{processor:"boolean",default:!0}),R.on("ScriptsLoaded",()=>{N("directionality",{processor:"string",default:ja.isRtl()?"rtl":void 0}),N("placeholder",{processor:"string",default:e0.getAttrib(R.getElement(),"placeholder")})})})(u);const v=this.options.get;var R,N;v("deprecation_warnings")&&(((z,L)=>{const V=(n=>{const i=mx(n,Bp),s=n.forced_root_block;return!1!==s&&""!==s||i.push("forced_root_block (false only)"),no(i)})(z),J=(n=>Lf(n,W2))(L),te=J.length>0,re=V.length>0,ie="mobile"===L.theme;if(te||re||ie){const he="\n- ",fe=ie?`\n\nThemes:${he}mobile`:"",ye=te?`\n\nPlugins:${he}${J.join(he)}`:"",Ie=re?`\n\nOptions:${he}${V.join(he)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+fe+ye+Ie)}})(R=s,N=f),((z,L)=>{const V=(n=>mx(n,H2))(z),J=(n=>Lf(n,pT.map(i=>i.name)))(L),te=J.length>0,re=V.length>0;if(te||re){const ie="\n- ",he=te?`\n\nPlugins:${ie}${J.map(vT).join(ie)}`:"",fe=re?`\n\nOptions:${ie}${V.join(ie)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+he+fe)}})(R,N));const _=v("suffix");_&&(d.suffix=_),this.suffix=d.suffix;const k=v("base_url");k&&d._setBaseUrl(k),this.baseUri=d.baseURI;const T=n_(u);T&&(Td.ScriptLoader._setReferrerPolicy(T),Mr.DOM.styleSheetLoader._setReferrerPolicy(T));const M=i_(u);ae(M)&&Mr.DOM.styleSheetLoader._setContentCssCors(M),_s.languageLoad=v("language_load"),_s.baseURL=d.baseURL,this.setDirty(!1),this.documentBaseURI=new ad(ia(u),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=r_(u),this.hasVisual=Hs(u),this.shortcuts=new YS(this),this.editorCommands=new Ey(this),(n=>{var i;(n=>{(i=>{const s=d=>()=>{Qe("left,center,right,justify".split(","),u=>{d!==u&&i.formatter.remove("align"+u)}),"none"!==d&&(i.formatter.toggle("align"+d,void 0),i.nodeChanged())};i.editorCommands.addCommands({JustifyLeft:s("left"),JustifyCenter:s("center"),JustifyRight:s("right"),JustifyFull:s("justify"),JustifyNone:s("none")})})(n),(i=>{const s=d=>()=>{const u=i.selection,f=u.isCollapsed()?[i.dom.getParent(u.getNode(),i.dom.isBlock)]:u.getSelectedBlocks();return _n(f,v=>ae(i.formatter.matchNode(v,d)))};i.editorCommands.addCommands({JustifyLeft:s("alignleft"),JustifyCenter:s("aligncenter"),JustifyRight:s("alignright"),JustifyFull:s("alignjustify")},"state")})(n)})(n),(i=n).editorCommands.addCommands({"Cut,Copy,Paste":s=>{const d=i.getDoc();let u;try{d.execCommand(s)}catch{u=!0}if("paste"!==s||d.queryCommandEnabled(s)||(u=!0),u||!d.queryCommandSupported(s)){let f=i.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Yt.os.isMacOS()||Yt.os.isiOS())&&(f=f.replace(/Ctrl\+/g,"\u2318+")),i.notificationManager.open({text:f,type:"error"})}}}),(i=>{i.editorCommands.addCommands({mceAddUndoLevel:()=>{i.undoManager.add()},mceEndUndoLevel:()=>{i.undoManager.add()},Undo:()=>{i.undoManager.undo()},Redo:()=>{i.undoManager.redo()}})})(n),(i=>{i.editorCommands.addCommands({mceSelectNodeDepth:(s,d,u)=>{let f=0;i.dom.getParent(i.selection.getNode(),v=>!nn(v)||f++!==u||(i.selection.select(v),!1),i.getBody())},mceSelectNode:(s,d,u)=>{i.selection.select(u)},selectAll:()=>{const s=i.dom.getParent(i.selection.getStart(),ll);if(s){const d=i.dom.createRng();d.selectNodeContents(s),i.selection.setRng(d)}}})})(n),(i=>{i.editorCommands.addCommands({mceCleanup:()=>{const s=i.selection.getBookmark();i.setContent(i.getContent()),i.selection.moveToBookmark(s)},insertImage:(s,d,u)=>{Dy(i,i.dom.createHTML("img",{src:u}))},insertHorizontalRule:()=>{i.execCommand("mceInsertContent",!1,"<hr>")},insertText:(s,d,u)=>{Dy(i,i.dom.encode(u))},insertHTML:(s,d,u)=>{Dy(i,u)},mceInsertContent:(s,d,u)=>{Dy(i,u)},mceSetContent:(s,d,u)=>{i.setContent(u)},mceReplaceContent:(s,d,u)=>{i.execCommand("mceInsertContent",!1,u.replace(/\{\$selection\}/g,i.selection.getContent({format:"text"})))},mceNewDocument:()=>{i.setContent(JD(i))}})})(n),(i=>{const s=(d,u,f)=>{if(i.mode.isReadOnly())return;const v=Y(f)?{href:f}:f,_=i.dom.getParent(i.selection.getNode(),"a");W(v)&&Y(v.href)&&(v.href=v.href.replace(/ /g,"%20"),_&&v.href||i.formatter.remove("link"),v.href&&i.formatter.apply("link",v,_))};i.editorCommands.addCommands({unlink:()=>{if(i.selection.isEditable()){if(i.selection.isCollapsed()){const d=i.dom.getParent(i.selection.getStart(),"a");return void(d&&i.dom.remove(d,!0))}i.formatter.remove("link")}},mceInsertLink:s,createLink:s})})(n),(i=>{i.editorCommands.addCommands({Indent:()=>{Yw(i,"indent")},Outdent:()=>{jT(i)}}),i.editorCommands.addCommands({Outdent:()=>zx(i)},"state")})(n),(i=>{i.editorCommands.addCommands({InsertNewBlockBefore:()=>{MD(i,!0)},InsertNewBlockAfter:()=>{MD(i,!1)}})})(n),(i=>{i.editorCommands.addCommands({insertParagraph:()=>{fv(vM,i)},mceInsertNewLine:(s,d,u)=>{fE(i,u)},InsertLineBreak:(s,d,u)=>{fv(pv,i)}})})(n),(i=>{(s=>{const d=(u,f)=>{s.formatter.toggle(u,f),s.nodeChanged()};s.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":u=>{d(u)},"ForeColor,HiliteColor":(u,f,v)=>{d(u,{value:v})},BackColor:(u,f,v)=>{d("hilitecolor",{value:v})},FontName:(u,f,v)=>{((_,k)=>{const T=LE(_,k);_.formatter.toggle("fontname",{value:vN(T)}),_.nodeChanged()})(s,v)},FontSize:(u,f,v)=>{var _;(_=s).formatter.toggle("fontsize",{value:LE(_,v)}),_.nodeChanged()},LineHeight:(u,f,v)=>{var _;(_=s).formatter.toggle("lineheight",{value:String(v)}),_.nodeChanged()},Lang:(u,f,v)=>{var _;d(u,{value:v.code,customValue:null!==(_=v.customCode)&&void 0!==_?_:null})},RemoveFormat:u=>{s.formatter.remove(u)},mceBlockQuote:()=>{d("blockquote")},FormatBlock:(u,f,v)=>{d(Y(v)?v:"p")},mceToggleFormat:(u,f,v)=>{d(v)}})})(i),(s=>{const d=u=>s.formatter.match(u);s.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":u=>d(u),mceBlockQuote:()=>d("blockquote")},"state"),s.editorCommands.addQueryValueHandler("FontName",()=>{return Lg(u=s,f=>TD(u.getBody(),f.dom)).getOr("");var u}),s.editorCommands.addQueryValueHandler("FontSize",()=>{return Lg(u=s,f=>ZM(u.getBody(),f.dom)).getOr("");var u}),s.editorCommands.addQueryValueHandler("LineHeight",()=>{return Lg(u=s,f=>{const v=Ze(u.getBody());return mf(f,k=>Ov(k,"line-height"),We(To,v)).getOrThunk(()=>{const k=parseFloat(Ci(f,"line-height")),T=parseFloat(Ci(f,"font-size"));return String(k/T)})}).getOr("");var u})})(i)})(n),(i=>{i.editorCommands.addCommands({mceRemoveNode:(s,d,u)=>{const f=u??i.selection.getNode();if(f!==i.getBody()){const v=i.selection.getBookmark();i.dom.remove(f,!0),i.selection.moveToBookmark(v)}},mcePrint:()=>{i.getWin().print()},mceFocus:(s,d,u)=>{var f;(f=i).removed||(!0===u?mk(f):(_=>{const k=_.selection,T=_.getBody();let M=k.getRng();_.quirks.refreshContentEditable();const I=R=>{Ld(R).each(N=>{R.selection.setRng(N),M=N})};!tf(_)&&_.hasEditableRoot()&&I(_);const O=(R=_,N=k.getNode(),R.dom.getParent(N,z=>"true"===R.dom.getContentEditable(z)));var R,N;if(O&&_.dom.isChildOf(O,T))return((R,N)=>null!==R.dom.getParent(N,z=>"false"===R.dom.getContentEditable(z)))(_,O)||ef(T),ef(O),_.hasEditableRoot()||I(_),lO(_,M),void mk(_);_.inline||(Yt.browser.isOpera()||ef(T),_.getWin().focus()),(Yt.browser.isFirefox()||_.inline)&&(ef(T),lO(_,M)),mk(_)})(f))},mceToggleVisualAid:()=>{i.hasVisual=!i.hasVisual,i.addVisual()}})})(n)})(this);const I=v("cache_suffix");I&&(Yt.cacheSuffix=I.replace(/^[\?\&]+/,"")),this.ui={registry:oA(),styleSheetLoader:void 0,show:ve,hide:ve,setEnabled:ve,isEnabled:Wt},this.mode=(R=>{const N=ur("design"),z=ur({design:{activate:ve,deactivate:ve,editorReadOnly:!1},readonly:{activate:ve,deactivate:ve,editorReadOnly:!0}});return(L=R).on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",V=>{S1(L)&&V.preventDefault()}),L.on("BeforeExecCommand",V=>{"Undo"!==V.command&&"Redo"!==V.command||!S1(L)||V.preventDefault()}),L.on("input",V=>{if(!V.isComposing&&S1(L)){const J=L.undoManager.add();ae(J)&&L.undoManager.undo()}}),L.on("compositionend",()=>{if(S1(L)){const V=L.undoManager.add();ae(V)&&L.undoManager.undo()}}),{isReadOnly:()=>S1(R),set:L=>((V,J,te,re)=>{if(re!==te.get()){if(!Ln(J,re))throw new Error(`Editor mode '${re}' is invalid`);V.initialized?nA(V,te,J,re):V.on("init",()=>nA(V,te,J,re))}})(R,z.get(),N,L),get:()=>N.get(),register:(L,V)=>{z.set(((J,te,re)=>{if(Jt(em,te))throw new Error(`Cannot override default mode ${te}`);return{...J,[te]:{...re,deactivate:()=>{try{re.deactivate()}catch(ie){console.error(`problem while deactivating editor mode ${te}:`,ie)}}}}})(z.get(),L,V))}};var L})(u),d.dispatch("SetupEditor",{editor:this});const O=XD(u);Ge(O)&&O.call(u,u)}render(){(i=>{const s=i.id;ja.setCode(TA(i));const d=()=>{_v.unbind(window,"ready",d),i.render()};if(!Hl.Event.domLoaded)return void _v.bind(window,"ready",d);if(!i.getElement())return;const u=Ze(i.getElement()),f=Mv(u);var k;i.on("remove",()=>{uo(u.dom.attributes,_=>Gr(u,_.name)),nc(u,f)}),i.ui.styleSheetLoader=fm.forElement(u,{contentCssCors:i_(k=i),referrerPolicy:n_(k)}),r_(i)?i.inline=!0:(i.orgVisibility=i.getElement().style.visibility,i.getElement().style.visibility="hidden");const v=i.getElement().form||_v.getParent(s,"form");v&&(i.formElement=v,$D(i)&&!Ls(i.getElement())&&(_v.insertAfter(_v.create("input",{type:"hidden",name:s}),s),i.hasHiddenInput=!0),i.formEventDelegate=_=>{i.dispatch(_.type,_)},_v.bind(v,"submit reset",i.formEventDelegate),i.on("reset",()=>{i.resetContent()}),!pb(i)||v.submit.nodeType||v.submit.length||v._mceOldSubmit||(v._mceOldSubmit=v.submit,v.submit=()=>(i.editorManager.triggerSave(),i.setDirty(!1),v._mceOldSubmit(v)))),i.windowManager=Fp(i),i.notificationManager=zf(i),"xml"===i.options.get("encoding")&&i.on("GetContent",_=>{_.save&&(_.content=_v.encode(_.content))}),MA(i)&&i.on("submit",()=>{i.initialized&&i.save()}),Bm(i)&&(i._beforeUnload=()=>{!i.initialized||i.destroyed||i.isHidden()||i.save({format:"raw",no_events:!0,set_dirty:!1})},i.editorManager.on("BeforeUnload",i._beforeUnload)),i.editorManager.add(i),((n,i)=>{const s=Td.ScriptLoader,d=()=>{!n.removed&&(u=>{const f=Jh(u);return!Y(f)||ae(Ff.get(f))})(n)&&(u=>{const f=Lm(u);return ae(Cu.get(f))})(n)&&b1(n)};((u,f)=>{const v=Jh(u);if(Y(v)&&!wD(v)&&!Ln(Ff.urls,v)){const _=Rm(u),k=_?u.documentBaseURI.toAbsolute(_):`themes/${v}/theme${f}.js`;Ff.load(v,k).catch(()=>{Vp(u,"ThemeLoadError",fh("theme",k,v))})}})(n,i),((u,f)=>{const v=Lm(u);if("plugin"!==v&&!Ln(Cu.urls,v)){const _=MC(u),k=Y(_)?u.documentBaseURI.toAbsolute(_):`models/${v}/model${f}.js`;Cu.load(v,k).catch(()=>{Vp(u,"ModelLoadError",fh("model",k,v))})}})(n,i),((u,f)=>{const v=TA(f),_=Vs(f);if(!ja.hasCode(v)&&"en"!==v){const k=Er(_)?_:`${f.editorManager.baseURL}/langs/${v}.js`;u.add(k).catch(()=>{Vp(f,"LanguageLoadError",fh("language",k,v))})}})(s,n),((u,f,v)=>{const _=SD(f,"default",v),k=(T=f,ue.from(Em(T)).filter(Er).map(M=>({url:M,name:ue.none()}))).orThunk(()=>SD(f,e_(f),""));var T;Qe((T=>{const M=[],I=O=>{M.push(O)};for(let O=0;O<T.length;O++)T[O].each(I);return M})([_,k]),T=>{u.add(T.url).catch(()=>{var M,I,O;M=f,I=T.url,O=T.name.getOrUndefined(),Vp(M,"IconsLoadError",fh("icons",I,O))})})})(s,n,i),((u,f)=>{const v=(_,k)=>{J0.load(_,k).catch(()=>{Vp(u,"PluginLoadError",fh("plugin",k,_))})};ho(fb(u),(_,k)=>{v(k,_),u.options.set("plugins",Gl(u).concat(k))}),Qe(Gl(u),_=>{!(_=zt.trim(_))||J0.urls[_]||wD(_)||v(_,`plugins/${_}/plugin${f}.js`)})})(n,i),s.loadQueue().then(d,d)})(i,i.suffix)})(this)}focus(i){this.execCommand("mceFocus",!1,i)}hasFocus(){return tf(this)}translate(i){return ja.translate(i)}getParam(i,s,d){const u=this.options;return u.isRegistered(i)||(ae(d)?u.register(i,{processor:d,default:s}):u.register(i,{processor:Wt,default:s})),u.isSet(i)||pe(s)?u.get(i):s}hasPlugin(i,s){return!(!Jt(Gl(this),i)||s&&void 0===J0.get(i))}nodeChanged(i){this._nodeChangeDispatcher.nodeChanged(i)}addCommand(i,s,d){this.editorCommands.addCommand(i,s,d)}addQueryStateHandler(i,s,d){this.editorCommands.addQueryStateHandler(i,s,d)}addQueryValueHandler(i,s,d){this.editorCommands.addQueryValueHandler(i,s,d)}addShortcut(i,s,d,u){this.shortcuts.add(i,s,d,u)}execCommand(i,s,d,u){return this.editorCommands.execCommand(i,s,d,u)}queryCommandState(i){return this.editorCommands.queryCommandState(i)}queryCommandValue(i){return this.editorCommands.queryCommandValue(i)}queryCommandSupported(i){return this.editorCommands.queryCommandSupported(i)}show(){const i=this;i.hidden&&(i.hidden=!1,i.inline?i.getBody().contentEditable="true":(wv.show(i.getContainer()),wv.hide(i.id)),i.load(),i.dispatch("show"))}hide(){const i=this;i.hidden||(i.save(),i.inline?(i.getBody().contentEditable="false",i===i.editorManager.focusedEditor&&(i.editorManager.focusedEditor=null)):(wv.hide(i.getContainer()),wv.setStyle(i.id,"display",i.orgDisplay)),i.hidden=!0,i.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(i,s){this.dispatch("ProgressState",{state:i,time:s})}load(i={}){const s=this,d=s.getElement();if(s.removed)return"";if(d){const u={...i,load:!0},f=Ls(d)?d.value:d.innerHTML,v=s.setContent(f,u);return u.no_events||s.dispatch("LoadContent",{...u,element:d}),v}return""}save(i={}){const s=this;let d=s.getElement();if(!d||!s.initialized||s.removed)return"";const u={...i,save:!0,element:d};let f=s.getContent(u);const v={...u,content:f};if(v.no_events||s.dispatch("SaveContent",v),"raw"===v.format&&s.dispatch("RawSaveContent",v),f=v.content,Ls(d))d.value=f;else{!i.is_removing&&s.inline||(d.innerHTML=f);const _=wv.getParent(s.id,"form");_&&Ui(_.elements,k=>k.name!==s.id||(k.value=f,!1))}return v.element=u.element=d=null,!1!==v.set_dirty&&s.setDirty(!1),f}setContent(i,s){return Rf(this,i,s)}getContent(i){return((s,d={})=>{const u=(f=d,v=d.format?d.format:"html",{...f,format:v,get:!0,getInner:!0});var f,v;return O2(s,u).fold(Se,f=>{const v=(k=f,sd(s).editor.getContent(k));var k;return _w(s,v,f)})})(this,i)}insertContent(i,s){s&&(i=OD({content:i},s)),this.execCommand("mceInsertContent",!1,i)}resetContent(i){void 0===i?Rf(this,this.startContent,{format:"raw"}):Rf(this,i),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(i){const s=!this.isNotDirty;this.isNotDirty=!i,i&&i!==s&&this.dispatch("dirty")}getContainer(){const i=this;return i.container||(i.container=i.editorContainer||wv.get(i.id+"_parent")),i.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=wv.get(this.id)),this.targetElm}getWin(){const i=this;if(!i.contentWindow){const s=i.iframeElement;s&&(i.contentWindow=s.contentWindow)}return i.contentWindow}getDoc(){const i=this;if(!i.contentDocument){const s=i.getWin();s&&(i.contentDocument=s.document)}return i.contentDocument}getBody(){var i,s;const d=this.getDoc();return null!==(s=null!==(i=this.bodyElement)&&void 0!==i?i:d?.body)&&void 0!==s?s:null}convertURL(i,s,d){const u=this,f=u.options.get,v=yb(u);if(Ge(v))return v.call(u,i,d,!0,s);if(!f("convert_urls")||"link"===d||W(d)&&"LINK"===d.nodeName||0===i.indexOf("file:")||0===i.length)return i;const _=new ad(i);return"http"!==_.protocol&&"https"!==_.protocol&&""!==_.protocol?i:f("relative_urls")?u.documentBaseURI.toRelative(i):i=u.documentBaseURI.toAbsolute(i,f("remove_script_host"))}addVisual(i){((s,d)=>{var f;f=d,ni(this).editor.addVisual(f)})(0,i)}setEditableRoot(i){var s,d;(s=this)._editableRoot!==(d=i)&&(s._editableRoot=d,s.getBody().contentEditable=String(s.hasEditableRoot()),s.nodeChanged(),s.dispatch("EditableRootStateChange",{state:d}))}hasEditableRoot(){return this._editableRoot}remove(){(i=>{if(!i.removed){const{_selectionOverrides:s,editorUpload:d}=i,u=i.getBody(),f=i.getElement();u&&i.save({is_removing:!0}),i.removed=!0,i.unbindAllNativeEvents(),i.hasHiddenInput&&ae(f?.nextSibling)&&vx.remove(f.nextSibling),i.dispatch("remove"),i.editorManager.remove(i),!i.inline&&u&&vx.setStyle((v=i).id,"display",v.orgDisplay),(v=>{v.dispatch("detach")})(i),vx.remove(i.getContainer()),yx(s),yx(d),i.destroy()}var v})(this)}destroy(i){((s,d)=>{const{selection:u,dom:f}=s;s.destroyed||(d||s.removed?(d||(s.editorManager.off("beforeunload",s._beforeUnload),s.theme&&s.theme.destroy&&s.theme.destroy(),yx(u),yx(f)),(v=>{const _=v.formElement;_&&(_._mceOldSubmit&&(_.submit=_._mceOldSubmit,delete _._mceOldSubmit),vx.unbind(_,"submit reset",v.formEventDelegate))})(s),(v=>{const _=v;_.contentAreaContainer=_.formElement=_.container=_.editorContainer=null,_.bodyElement=_.contentDocument=_.contentWindow=null,_.iframeElement=_.targetElm=null;const k=v.selection;k&&(_.selection=k.win=k.dom=k.dom.doc=null)})(s),s.destroyed=!0):s.remove())})(this,i)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Dh=Mr.DOM,Bu=zt.each;let Ly,XS=!1,Ks=[];const tm=n=>{const i=n.type;Bu(Ic.get(),s=>{switch(i){case"scroll":s.dispatch("ScrollWindow",n);break;case"resize":s.dispatch("ResizeWindow",n)}})},rA=n=>{if(n!==XS){const i=Mr.DOM;n?(i.bind(window,"resize",tm),i.bind(window,"scroll",tm)):(i.unbind(window,"resize",tm),i.unbind(window,"scroll",tm)),XS=n}},ED=n=>{const i=Ks;return Ks=dn(Ks,s=>n!==s),Ic.activeEditor===n&&(Ic.activeEditor=Ks.length>0?Ks[0]:null),Ic.focusedEditor===n&&(Ic.focusedEditor=null),i.length!==Ks.length},ZS="CSS1Compat"!==document.compatMode,Ic={...rr,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"4.1",releaseDate:"TBD",i18n:ja,activeEditor:null,focusedEditor:null,setup(){const n=this;let i="",s="",d=ad.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(d)&&(d=d.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(d)||(d+="/"));const u=window.tinymce||window.tinyMCEPreInit;if(u)i=u.base||u.baseURL,s=u.suffix;else{const v=document.getElementsByTagName("script");for(let _=0;_<v.length;_++){const k=v[_].src||"";if(""===k)continue;const T=k.substring(k.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(k)){-1!==T.indexOf(".min")&&(s=".min"),i=k.substring(0,k.lastIndexOf("/"));break}}if(!i&&document.currentScript){const _=document.currentScript.src;-1!==_.indexOf(".min")&&(s=".min"),i=_.substring(0,_.lastIndexOf("/"))}}var f;n.baseURL=new ad(d).toAbsolute(i),n.documentBaseURL=d,n.baseURI=new ad(n.baseURL),n.suffix=s,(f=n).on("AddEditor",We(e2,f)),f.on("RemoveEditor",We(sO,f))},overrideDefaults(n){const i=n.base_url;i&&this._setBaseUrl(i);const s=n.suffix;s&&(this.suffix=s),this.defaultOptions=n;const d=n.plugin_base_urls;void 0!==d&&ho(d,(u,f)=>{_s.PluginManager.urls[f]=u})},init(n){const i=this;let s;const d=zt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let u=v=>{s=v};const f=()=>{let v=0;const _=[];let k;var T;Dh.unbind(window,"ready",f),(T=>{const M=n.onpageload;M&&M.apply(i,[])})(),k=Ds((T=n,Yt.browser.isIE()||Yt.browser.isEdge()?(Cx("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):ZS?(Cx("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Y(T.selector)?Dh.select(T.selector):ae(T.target)?[T.target]:[])),zt.each(k,T=>{var M;(M=i.get(T.id))&&M.initialized&&!(M.getContainer()||M.getBody()).parentNode&&(ED(M),M.unbindAllNativeEvents(),M.destroy(!0),M.removed=!0)}),k=zt.grep(k,T=>!i.get(T.id)),0===k.length?u([]):Bu(k,T=>{n.inline&&T.tagName.toLowerCase()in d?Cx("Could not initialize inline editor on invalid inline target element",T):((M,I,O)=>{const R=new Pu(M,I,i);_.push(R),R.on("init",()=>{++v===k.length&&u(_)}),R.targetElm=R.targetElm||O,R.render()})((M=>{let I=M.id;return I||(I=go(M,"name").filter(O=>!Dh.get(O)).getOrThunk(Dh.uniqueId),M.setAttribute("id",I)),I})(T),n,T)})};return Dh.bind(window,"ready",f),new Promise(v=>{s?v(s):u=_=>{v(_)}})},get(n){return 0===arguments.length?Ks.slice(0):Y(n)?Qo(Ks,i=>i.id===n).getOr(null):Re(n)&&Ks[n]?Ks[n]:null},add(n){const i=this,s=i.get(n.id);return s===n||(null===s&&Ks.push(n),rA(!0),i.activeEditor=n,i.dispatch("AddEditor",{editor:n}),Ly||(Ly=d=>{const u=i.dispatch("BeforeUnload");if(u.returnValue)return d.preventDefault(),d.returnValue=u.returnValue,u.returnValue},window.addEventListener("beforeunload",Ly))),n},createEditor(n,i){return this.add(new Pu(n,i,this))},remove(n){const i=this;let s;if(n){if(!Y(n))return s=n,le(i.get(s.id))?null:(ED(s)&&i.dispatch("RemoveEditor",{editor:s}),0===Ks.length&&window.removeEventListener("beforeunload",Ly),s.remove(),rA(Ks.length>0),s);Bu(Dh.select(n),d=>{s=i.get(d.id),s&&i.remove(s)})}else for(let d=Ks.length-1;d>=0;d--)i.remove(Ks[d])},execCommand(n,i,s){var d;const u=this,f=W(s)?null!==(d=s.id)&&void 0!==d?d:s.index:s;switch(n){case"mceAddEditor":return u.get(f)||new Pu(f,s.options,u).render(),!0;case"mceRemoveEditor":{const v=u.get(f);return v&&v.remove(),!0}case"mceToggleEditor":{const v=u.get(f);return v?(v.isHidden()?v.show():v.hide(),!0):(u.execCommand("mceAddEditor",!1,s),!0)}}return!!u.activeEditor&&u.activeEditor.execCommand(n,i,s)},triggerSave:()=>{Bu(Ks,n=>{n.save()})},addI18n:(n,i)=>{ja.add(n,i)},translate:n=>ja.translate(n),setActive(n){const i=this.activeEditor;this.activeEditor!==n&&(i&&i.dispatch("deactivate",{relatedTarget:n}),n.dispatch("activate",{relatedTarget:i})),this.activeEditor=n},_setBaseUrl(n){this.baseURL=new ad(this.documentBaseURL).toAbsolute(n.replace(/\/+$/,"")),this.baseURI=new ad(this.baseURL)}};Ic.setup();const KS=(()=>{const n=zl();return{FakeClipboardItem:i=>({items:i,types:Ur(i),getType:s=>go(i,s).getOrUndefined()}),write:i=>{n.set(i)},read:()=>n.get().getOrUndefined(),clear:n.clear}})(),e=Math.min,t=Math.max,o=Math.round,a=(n,i,s)=>{let d=i.x,u=i.y;const f=n.w,v=n.h,_=i.w,k=i.h,T=(s||"").split("");return"b"===T[0]&&(u+=k),"r"===T[1]&&(d+=_),"c"===T[0]&&(u+=o(k/2)),"c"===T[1]&&(d+=o(_/2)),"b"===T[3]&&(u-=v),"r"===T[4]&&(d-=f),"c"===T[3]&&(u-=o(v/2)),"c"===T[4]&&(d-=o(f/2)),c(d,u,f,v)},c=(n,i,s,d)=>({x:n,y:i,w:s,h:d}),h={inflate:(n,i,s)=>c(n.x-i,n.y-s,n.w+2*i,n.h+2*s),relativePosition:a,findBestRelativePosition:(n,i,s,d)=>{for(let u=0;u<d.length;u++){const f=a(n,i,d[u]);if(f.x>=s.x&&f.x+f.w<=s.w+s.x&&f.y>=s.y&&f.y+f.h<=s.h+s.y)return d[u]}return null},intersect:(n,i)=>{const s=t(n.x,i.x),d=t(n.y,i.y),u=e(n.x+n.w,i.x+i.w),f=e(n.y+n.h,i.y+i.h);return u-s<0||f-d<0?null:c(s,d,u-s,f-d)},clamp:(n,i,s)=>{let d=n.x,u=n.y,f=n.x+n.w,v=n.y+n.h;const _=i.x+i.w,k=i.y+i.h,T=t(0,i.x-d),M=t(0,i.y-u),I=t(0,f-_),O=t(0,v-k);return d+=T,u+=M,s&&(f+=T,v+=M,d-=I,u-=O),f-=I,v-=O,c(d,u,f-d,v-u)},create:c,fromClientRect:n=>c(n.left,n.top,n.width,n.height)},p=(()=>{const n={},i={},s={};return{load:(d,u)=>{const f=`Script at URL "${u}" failed to load`,v=`Script at URL "${u}" did not call \`tinymce.Resource.add('${d}', data)\` within 1 second`;if(void 0!==n[d])return n[d];{const _=new Promise((k,T)=>{const M=((I,O,R=1e3)=>{let N=!1,z=null;const L=te=>(...re)=>{N||(N=!0,null!==z&&(clearTimeout(z),z=null),te.apply(null,re))},V=L(I),J=L(O);return{start:(...te)=>{N||null!==z||(z=setTimeout(()=>J.apply(null,te),R))},resolve:V,reject:J}})(k,T);i[d]=M.resolve,Td.ScriptLoader.loadScript(u).then(()=>M.start(v),()=>M.reject(f))});return n[d]=_,_}},add:(d,u)=>{void 0!==i[d]&&(i[d](u),delete i[d]),n[d]=Promise.resolve(u),s[d]=u},has:d=>d in s,get:d=>s[d],unload:d=>{delete n[d],delete s[d]}}})();let y;try{const n="__storage_test__";y=window.localStorage,y.setItem(n,n),y.removeItem(n)}catch{y=(()=>{let i={},s=[];const d={getItem:u=>i[u]||null,setItem:(u,f)=>{s.push(u),i[u]=String(f)},key:u=>s[u],removeItem:u=>{s=s.filter(f=>f===u),delete i[u]},clear:()=>{s=[],i={}},length:0};return Object.defineProperty(d,"length",{get:()=>s.length,configurable:!1,enumerable:!1}),d})()}const w={geom:{Rect:h},util:{Delay:js,Tools:zt,VK:Kt,URI:ad,EventDispatcher:JM,Observable:rr,I18n:ja,LocalStorage:y,ImageUploader:n=>{const i=Dw(),s=vh(n,i);return{upload:(d,u=!0)=>s.upload(d,u?Va(n):void 0)}}},dom:{EventUtils:Hl,TreeWalker:io,TextSeeker:Ku,DOMUtils:Mr,ScriptLoader:Td,RangeUtils:Rd,Serializer:ld,StyleSheetLoader:mm,ControlSelection:gu,BookmarkManager:Xm,Selection:V2,Event:Hl.Event},html:{Styles:Uv,Entities:bm,Node:_l,Schema:Vl,DomParser:q0,Writer:mO,Serializer:bn},Env:Yt,AddOnManager:_s,Annotator:Ym,Formatter:Ow,UndoManager:bh,EditorCommands:Ey,WindowManager:Fp,NotificationManager:zf,EditorObservable:QM,Shortcuts:YS,Editor:Pu,FocusManager:N_,EditorManager:Ic,DOM:Mr.DOM,ScriptLoader:Td.ScriptLoader,PluginManager:J0,ThemeManager:Ff,ModelManager:Cu,IconManager:K0,Resource:p,FakeClipboard:KS,trim:zt.trim,isArray:zt.isArray,is:zt.is,toArray:zt.toArray,makeMap:zt.makeMap,each:zt.each,map:zt.map,grep:zt.grep,inArray:zt.inArray,extend:zt.extend,walk:zt.walk,resolve:zt.resolve,explode:zt.explode,_addCacheSuffix:zt._addCacheSuffix},C=zt.extend(Ic,w);(n=>{window.tinymce=n,window.tinyMCE=n})(C),(n=>{if("object"==typeof module)try{module.exports=n}catch{}})(C)}(),function(){"use strict";const Xe=Object.getPrototypeOf,St=(l,m,x)=>{var S;return!!x(l,m.prototype)||(null===(S=l.constructor)||void 0===S?void 0:S.name)===m.name},wn=l=>m=>(x=>{const S=typeof x;return null===x?"null":"object"===S&&Array.isArray(x)?"array":"object"===S&&St(x,String,(A,D)=>D.isPrototypeOf(A))?"string":S})(m)===l,Oe=l=>m=>typeof m===l,Ve=l=>m=>l===m,Q=wn("string"),se=wn("object"),q=l=>{return m=l,x=Object,se(m)&&St(m,x,(S,A)=>Xe(S)===A);var m,x},j=wn("array"),ne=Ve(null),$=Oe("boolean"),X=Ve(void 0),Y=l=>null==l,W=l=>!Y(l),U=Oe("function"),K=Oe("number"),le=(l,m)=>{if(j(l)){for(let x=0,S=l.length;x<S;++x)if(!m(l[x]))return!1;return!0}return!1},de=()=>{},pe=l=>()=>l(),_e=(l,m)=>(...x)=>l(m.apply(null,x)),ae=l=>()=>l,Ge=l=>l,Re=(l,m)=>l===m;function Ue(l,...m){return(...x)=>{const S=m.concat(x);return l.apply(null,S)}}const ve=l=>m=>!l(m),Me=l=>()=>{throw new Error(l)},Pe=l=>l(),ee=ae(!1),Se=ae(!0);class F{constructor(m,x){this.tag=m,this.value=x}static some(m){return new F(!0,m)}static none(){return F.singletonNone}fold(m,x){return this.tag?x(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?F.some(m(this.value)):F.none()}bind(m){return this.tag?m(this.value):F.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:F.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return W(m)?F.some(m):F.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}F.singletonNone=new F(!1);const We=Array.prototype.slice,_t=Array.prototype.indexOf,rt=Array.prototype.push,wt=(l,m)=>_t.call(l,m),nt=(l,m)=>wt(l,m)>-1,Bt=(l,m)=>{for(let x=0,S=l.length;x<S;x++)if(m(l[x],x))return!0;return!1},Wt=(l,m)=>{const x=[];for(let S=0;S<l;S++)x.push(m(S));return x},ue=(l,m)=>{const x=[];for(let S=0;S<l.length;S+=m){const A=We.call(l,S,S+m);x.push(A)}return x},Ct=(l,m)=>{const x=l.length,S=new Array(x);for(let A=0;A<x;A++)S[A]=m(l[A],A);return S},Gt=(l,m)=>{for(let x=0,S=l.length;x<S;x++)m(l[x],x)},xi=(l,m)=>{const x=[],S=[];for(let A=0,D=l.length;A<D;A++){const E=l[A];(m(E,A)?x:S).push(E)}return{pass:x,fail:S}},to=(l,m)=>{const x=[];for(let S=0,A=l.length;S<A;S++){const D=l[S];m(D,S)&&x.push(D)}return x},Jt=(l,m,x)=>(((S,A)=>{for(let D=S.length-1;D>=0;D--)A(S[D],D)})(l,(S,A)=>{x=m(x,S,A)}),x),_n=(l,m,x)=>(Gt(l,(S,A)=>{x=m(x,S,A)}),x),hn=(l,m)=>((x,S,A)=>{for(let D=0,E=x.length;D<E;D++){const P=x[D];if(S(P,D))return F.some(P);if(A(P,D))break}return F.none()})(l,m,ee),Qe=(l,m)=>{for(let x=0,S=l.length;x<S;x++)if(m(l[x],x))return F.some(x);return F.none()},uo=l=>{const m=[];for(let x=0,S=l.length;x<S;++x){if(!j(l[x]))throw new Error("Arr.flatten item "+x+" was not an array, input: "+l);rt.apply(m,l[x])}return m},Yn=(l,m)=>uo(Ct(l,m)),dn=(l,m)=>{for(let x=0,S=l.length;x<S;++x)if(!0!==m(l[x],x))return!1;return!0},Ao=l=>{const m=We.call(l,0);return m.reverse(),m},Oo=(l,m)=>to(l,x=>!nt(m,x)),_i=(l,m)=>{const x={};for(let S=0,A=l.length;S<A;S++){const D=l[S];x[String(D)]=m(D,S)}return x},Qo=l=>[l],ft=(l,m)=>{const x=We.call(l,0);return x.sort(m),x},pt=(l,m)=>m>=0&&m<l.length?F.some(l[m]):F.none(),Tt=l=>pt(l,0),$t=l=>pt(l,l.length-1),tn=U(Array.from)?Array.from:l=>We.call(l),on=(l,m)=>{for(let x=0;x<l.length;x++){const S=m(l[x],x);if(S.isSome())return S}return F.none()},Sn=Object.keys,no=Object.hasOwnProperty,ao=(l,m)=>{const x=Sn(l);for(let S=0,A=x.length;S<A;S++){const D=x[S];m(l[D],D)}},Rn=(l,m)=>wi(l,(x,S)=>({k:S,v:m(x,S)})),wi=(l,m)=>{const x={};return ao(l,(S,A)=>{const D=m(S,A);x[D.k]=D.v}),x},Go=l=>(m,x)=>{l[x]=m},Si=(l,m,x,S)=>{ao(l,(A,D)=>{(m(A,D)?x:S)(A,D)})},Ds=(l,m)=>{const x={};return Si(l,m,Go(x),de),x},Ur=(l,m)=>{const x=[];return ao(l,(S,A)=>{x.push(m(S,A))}),x},vs=(l,m)=>{const x=Sn(l);for(let S=0,A=x.length;S<A;S++){const D=x[S],E=l[D];if(m(E,D,l))return F.some(E)}return F.none()},ho=l=>Ur(l,Ge),vn=(l,m)=>bo(l,m)?F.from(l[m]):F.none(),bo=(l,m)=>no.call(l,m),Br=(l,m)=>bo(l,m)&&null!=l[m],Ma=(l,m,x=Re)=>l.exists(S=>x(S,m)),pa=l=>{const m=[],x=S=>{m.push(S)};for(let S=0;S<l.length;S++)l[S].each(x);return m},Ml=(l,m,x)=>l.isSome()&&m.isSome()?F.some(x(l.getOrDie(),m.getOrDie())):F.none(),ir=(l,m)=>null!=l?F.some(m(l)):F.none(),go=(l,m)=>l?F.some(m):F.none(),Ln=(l,m,x)=>""===m||l.length>=m.length&&l.substr(x,x+m.length)===m,Jd=(l,m)=>fd(l,m)?l.substring(m.length):l,ji=(l,m,x=0,S)=>{const A=l.indexOf(m,x);return-1!==A&&(!!X(S)||A+m.length<=S)},fd=(l,m)=>Ln(l,m,0),Ec=(l,m)=>Ln(l,m,l.length-m.length),si=(Fc=/^\s+|\s+$/g,l=>l.replace(Fc,"")),vd=l=>l.length>0,Al=l=>!vd(l),el=l=>void 0!==l.style&&U(l.style.getPropertyValue),Fu=l=>{if(null==l)throw new Error("Node cannot be null or undefined");return{dom:l}},ma=(l,m)=>{const x=(m||document).createElement(l);return Fu(x)},dt=(l,m)=>{const x=(m||document).createTextNode(l);return Fu(x)},je=Fu,lt=typeof window<"u"?window:Function("return this;")(),Nt=(l,m)=>((x,S)=>{let A=S??lt;for(let D=0;D<x.length&&null!=A;++D)A=A[x[D]];return A})(l.split("."),m),yn=Object.getPrototypeOf,Rt=l=>l.dom.nodeName.toLowerCase(),gn=l=>m=>m.dom.nodeType===l,En=l=>$n(l)&&(l=>{const m=Nt("ownerDocument.defaultView",l);return se(l)&&((x=m,((S,A)=>{const D=Nt(S,A);if(null==D)throw new Error(S+" not available on this browser");return D})("HTMLElement",x)).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(yn(l).constructor.name));var x})(l.dom),$n=gn(1),Xn=gn(3),Zo=gn(9),_o=gn(11),Er=l=>m=>$n(m)&&Rt(m)===l,Kr=(l,m)=>{const x=l.dom;if(1!==x.nodeType)return!1;{const S=x;if(void 0!==S.matches)return S.matches(m);if(void 0!==S.msMatchesSelector)return S.msMatchesSelector(m);if(void 0!==S.webkitMatchesSelector)return S.webkitMatchesSelector(m);if(void 0!==S.mozMatchesSelector)return S.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},li=l=>1!==l.nodeType&&9!==l.nodeType&&11!==l.nodeType||0===l.childElementCount,Nc=(l,m)=>{const x=void 0===m?document:m.dom;return li(x)?F.none():F.from(x.querySelector(l)).map(je)},po=(l,m)=>l.dom===m.dom,ys=(l,m)=>{const x=l.dom,S=m.dom;return x!==S&&x.contains(S)},bs=l=>je(l.dom.ownerDocument),Qd=l=>Zo(l)?l:bs(l),Tv=l=>je(Qd(l).dom.documentElement),am=l=>je(Qd(l).dom.defaultView),Ii=l=>F.from(l.dom.parentNode).map(je),tl=l=>F.from(l.dom.parentElement).map(je),Nh=l=>F.from(l.dom.offsetParent).map(je),Aa=l=>Ct(l.dom.childNodes,je),zr=(l,m)=>F.from(l.dom.childNodes[m]).map(je),Rc=l=>zr(l,0),Rh=(l,m)=>({element:l,offset:m}),Lh=(l,m)=>{const x=Aa(l);return x.length>0&&m<x.length?Rh(x[m],0):Rh(l,m)},Bg=l=>_o(l)&&W(l.dom.host),Ia=l=>je(l.dom.getRootNode()),Il=l=>Bg(l)?l:je(Qd(l).dom.body),eu=l=>{const m=Ia(l);return Bg(m)?F.some(m):F.none()},tc=l=>je(l.dom.host),Jr=l=>{const m=Xn(l)?l.dom.parentNode:l.dom;if(null==m||null===m.ownerDocument)return!1;const x=m.ownerDocument;return eu(je(m)).fold(()=>x.body.contains(m),(S=Jr,A=tc,D=>S(A(D))));var S,A},Os=()=>sm(je(document)),sm=l=>{const m=l.dom.body;if(null==m)throw new Error("Body is not available yet");return je(m)},lm=(l,m,x)=>{if(!(Q(x)||$(x)||K(x)))throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",x,":: Element ",l),new Error("Attribute value was not simple");l.setAttribute(m,x+"")},Pn=(l,m,x)=>{lm(l.dom,m,x)},Dl=(l,m)=>{const x=l.dom;ao(m,(S,A)=>{lm(x,A,S)})},qi=(l,m)=>{const x=l.dom.getAttribute(m);return null===x?void 0:x},mi=(l,m)=>F.from(qi(l,m)),Ol=(l,m)=>{const x=l.dom;return!(!x||!x.hasAttribute)&&x.hasAttribute(m)},tr=(l,m)=>{l.dom.removeAttribute(m)},Lc=(l,m,x)=>{if(!Q(x))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",x,":: Element ",l),new Error("CSS value must be a string: "+x);el(l)&&l.style.setProperty(m,x)},L1=(l,m)=>{el(l)&&l.style.removeProperty(m)},Yt=(l,m,x)=>{Lc(l.dom,m,x)},yd=(l,m)=>{const x=l.dom;ao(m,(S,A)=>{Lc(x,A,S)})},Vu=(l,m)=>{const x=l.dom;ao(m,(S,A)=>{S.fold(()=>{L1(x,A)},D=>{Lc(x,A,D)})})},Di=(l,m)=>{const x=l.dom,S=window.getComputedStyle(x).getPropertyValue(m);return""!==S||Jr(l)?S:zt(x,m)},zt=(l,m)=>el(l)?l.style.getPropertyValue(m):"",kr=(l,m)=>{const S=zt(l.dom,m);return F.from(S).filter(A=>A.length>0)},El=l=>{const m={},x=l.dom;if(el(x))for(let S=0;S<x.style.length;S++){const A=x.style.item(S);m[A]=x.style[A]}return m},ea=(l,m,x)=>{const S=ma(l);return Yt(S,m,x),kr(S,m).isSome()},No=(l,m)=>{L1(l.dom,m),Ma(mi(l,"style").map(si),"")&&tr(l,"style")},Ph=l=>l.dom.offsetWidth,Bh=(l,m)=>{const x=A=>{const D=m(A);if(D<=0||null===D){const E=Di(A,l);return parseFloat(E)||0}return D},S=(A,D)=>_n(D,(E,P)=>{const B=Di(A,P),H=void 0===B?0:parseInt(B,10);return isNaN(H)?E:E+H},0);return{set:(A,D)=>{if(!K(D)&&!D.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+D);const E=A.dom;el(E)&&(E.style[l]=D+"px")},get:x,getOuter:x,aggregate:S,max:(A,D,E)=>{const P=S(A,E);return D>P?D-P:0}}},nl=Bh("height",l=>{const m=l.dom;return Jr(l)?m.getBoundingClientRect().height:m.offsetHeight}),Pi=l=>nl.get(l),mo=l=>nl.getOuter(l),zg=(l,m)=>({left:l,top:m,translate:(x,S)=>zg(l+x,m+S)}),nr=zg,Hu=(l,m)=>void 0!==l?l:void 0!==m?m:0,ci=l=>{const m=l.dom.ownerDocument,x=m.body,S=m.defaultView,A=m.documentElement;if(x===l.dom)return nr(x.offsetLeft,x.offsetTop);const D=Hu(S?.pageYOffset,A.scrollTop),E=Hu(S?.pageXOffset,A.scrollLeft),P=Hu(A.clientTop,x.clientTop),B=Hu(A.clientLeft,x.clientLeft);return fa(l).translate(E-B,D-P)},fa=l=>{const m=l.dom,x=m.ownerDocument.body;return x===m?nr(x.offsetLeft,x.offsetTop):Jr(l)?(S=>{const A=S.getBoundingClientRect();return nr(A.left,A.top)})(m):nr(0,0)},tu=Bh("width",l=>l.dom.offsetWidth),Ua=l=>tu.get(l),rs=l=>tu.getOuter(l),bd=l=>{let m,x=!1;return(...S)=>(x||(x=!0,m=l.apply(null,S)),m)},ta=()=>nc(0,0),nc=(l,m)=>({major:l,minor:m}),is={nu:nc,detect:(l,m)=>{const x=String(m).toLowerCase();return 0===l.length?ta():((S,A)=>{const D=((P,B)=>{for(let H=0;H<P.length;H++){const Z=P[H];if(Z.test(B))return Z}})(S,A);if(!D)return{major:0,minor:0};const E=P=>Number(A.replace(D,"$"+P));return nc(E(1),E(2))})(l,x)},unknown:ta},Pc=(l,m)=>{const x=String(m).toLowerCase();return hn(l,S=>S.search(x))},Wu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Gr=l=>m=>ji(m,l),Mv=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>ji(l,"edge/")&&ji(l,"chrome")&&ji(l,"safari")&&ji(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Wu],search:l=>ji(l,"chrome")&&!ji(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>ji(l,"msie")||ji(l,"trident")},{name:"Opera",versionRegexes:[Wu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Gr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Gr("firefox")},{name:"Safari",versionRegexes:[Wu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(ji(l,"safari")||ji(l,"mobile/"))&&ji(l,"applewebkit")}],P1=[{name:"Windows",search:Gr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>ji(l,"iphone")||ji(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Gr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Gr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Gr("linux"),versionRegexes:[]},{name:"Solaris",search:Gr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Gr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Gr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Fg={browsers:ae(Mv),oses:ae(P1)},Wy="Chromium",Uu="Firefox",Gu=l=>{const m=l.current,S=A=>()=>m===A;return{current:m,version:l.version,isEdge:S("Edge"),isChromium:S(Wy),isIE:S("IE"),isOpera:S("Opera"),isFirefox:S(Uu),isSafari:S("Safari")}},zh=()=>Gu({current:void 0,version:is.unknown()}),Vg=Gu,Nl=(ae("Edge"),ae(Wy),ae("IE"),ae("Opera"),ae(Uu),ae("Safari"),"Windows"),yr="Android",oc="Solaris",zc="FreeBSD",va="ChromeOS",xd=l=>{const m=l.current,S=A=>()=>m===A;return{current:m,version:l.version,isWindows:S(Nl),isiOS:S("iOS"),isAndroid:S(yr),isMacOS:S("macOS"),isLinux:S("Linux"),isSolaris:S(oc),isFreeBSD:S(zc),isChromeOS:S(va)}},To=()=>xd({current:void 0,version:is.unknown()}),Es=xd,Hg=(ae(Nl),ae("iOS"),ae(yr),ae("Linux"),ae("macOS"),ae(oc),ae(zc),ae(va),l=>window.matchMedia(l).matches);var Fc;let Ro=bd(()=>((l,m,x)=>{const S=Fg.browsers(),A=Fg.oses(),D=m.bind(B=>{return H=S,on(B.brands,G=>{const oe=G.brand.toLowerCase();return hn(H,ce=>{var me;return oe===(null===(me=ce.brand)||void 0===me?void 0:me.toLowerCase())}).map(ce=>({current:ce.name,version:is.nu(parseInt(G.version,10),0)}))});var H}).orThunk(()=>{return Pc(S,H=l).map(Z=>{const G=is.detect(Z.versionRegexes,H);return{current:Z.name,version:G}});var H}).fold(zh,Vg),E=(B=A,H=l,Pc(B,H).map(Z=>{const G=is.detect(Z.versionRegexes,H);return{current:Z.name,version:G}})).fold(To,Es),P=((B,H,Z,G)=>{const oe=B.isiOS()&&!0===/ipad/i.test(Z),ce=B.isiOS()&&!oe,me=B.isiOS()||B.isAndroid(),Te=me||G("(pointer:coarse)"),Ae=oe||!ce&&me&&G("(min-device-width:768px)"),ze=ce||me&&!Ae,ke=H.isSafari()&&B.isiOS()&&!1===/safari/i.test(Z),Ce=!ze&&!Ae&&!ke;return{isiPad:ae(oe),isiPhone:ae(ce),isTablet:ae(Ae),isPhone:ae(ze),isTouch:ae(Te),isAndroid:B.isAndroid,isiOS:B.isiOS,isWebView:ae(ke),isDesktop:ae(Ce)}})(E,D,l,x);var B,H;return{browser:D,os:E,deviceType:P}})(window.navigator.userAgent,F.from(window.navigator.userAgentData),Hg));const pn=()=>Ro(),Wg=l=>{const m=je((D=>{if(W(D.target)){const E=je(D.target);if($n(E)&&W(E.dom.shadowRoot)&&D.composed&&D.composedPath){const P=D.composedPath();if(P)return Tt(P)}}return F.from(D.target)})(l).getOr(l.target)),x=()=>l.stopPropagation(),S=()=>l.preventDefault(),A=_e(S,x);return{target:m,x:l.clientX,y:l.clientY,stop:x,prevent:S,kill:A,raw:l}},Ug=(l,m,x,S,A)=>{const D=(E=x,P=S,B=>{E(B)&&P(Wg(B))});var E,P;return l.dom.addEventListener(m,D,A),{unbind:Ue(nu,l,m,D,A)}},nu=(l,m,x,S)=>{l.dom.removeEventListener(m,x,S)},_d=(l,m)=>{Ii(l).each(x=>{x.dom.insertBefore(m.dom,l.dom)})},Uy=(l,m)=>{var S;(S=l,F.from(S.dom.nextSibling).map(je)).fold(()=>{Ii(l).each(S=>{Qr(S,m)})},S=>{_d(S,m)})},Gy=(l,m)=>{Rc(l).fold(()=>{Qr(l,m)},x=>{l.dom.insertBefore(m.dom,x.dom)})},Qr=(l,m)=>{l.dom.appendChild(m.dom)},rc=(l,m)=>{Gt(m,x=>{Qr(l,x)})},Fh=l=>{l.dom.textContent="",Gt(Aa(l),m=>{Rl(m)})},Rl=l=>{const m=l.dom;null!==m.parentNode&&m.parentNode.removeChild(m)},xs=l=>{const m=void 0!==l?l.dom:document;return nr(m.body.scrollLeft||m.documentElement.scrollLeft,m.body.scrollTop||m.documentElement.scrollTop)},ju=(l,m,x)=>{const S=(void 0!==x?x.dom:document).defaultView;S&&S.scrollTo(l,m)},Ns=(l,m,x,S)=>({x:l,y:m,width:x,height:S,right:l+x,bottom:m+S}),Gg=l=>{const m=void 0===l?window:l,S=xs(je(m.document));return(A=>{const D=void 0===A?window:A;return pn().browser.isFirefox()?F.none():F.from(D.visualViewport)})(m).fold(()=>{const A=m.document.documentElement;return Ns(S.left,S.top,A.clientWidth,A.clientHeight)},A=>Ns(Math.max(A.pageLeft,S.left),Math.max(A.pageTop,S.top),A.width,A.height))},jg=()=>je(document),ou=(l,m)=>l.view(m).fold(ae([]),x=>{const S=l.owner(x),A=ou(l,S);return[x].concat(A)});var gA=Object.freeze({__proto__:null,view:l=>{var m;return(l.dom===document?F.none():F.from(null===(m=l.dom.defaultView)||void 0===m?void 0:m.frameElement)).map(je)},owner:l=>bs(l)});const Vh=l=>{const m=jg(),x=xs(m);return((A,D)=>{const E=D.owner(A),P=ou(D,E);return F.some(P)})(l,gA).fold(Ue(ci,l),A=>{const D=fa(l),E=Jt(A,(P,B)=>{const H=fa(B);return{left:P.left+H.left,top:P.top+H.top}},{left:0,top:0});return nr(E.left+D.left+x.left,E.top+D.top+x.top)})},Oi=(l,m,x,S)=>({x:l,y:m,width:x,height:S,right:l+x,bottom:m+S}),Fr=l=>{const m=ci(l),x=rs(l),S=mo(l);return Oi(m.left,m.top,x,S)},ol=l=>{const m=Vh(l),x=rs(l),S=mo(l);return Oi(m.left,m.top,x,S)},qg=(l,m)=>{const x=Math.max(l.x,m.x),S=Math.max(l.y,m.y),A=Math.min(l.right,m.right),D=Math.min(l.bottom,m.bottom);return Oi(x,S,A-x,D-S)},$i=()=>Gg(window),kn=l=>{let m=l;return{get:()=>m,set:x=>{m=x}}},ic=l=>{const m=kn(F.none()),x=()=>m.get().each(l);return{clear:()=>{x(),m.set(F.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:S=>{x(),m.set(F.some(S))}}},Ll=()=>ic(l=>l.unbind()),ar=()=>{const l=ic(de);return{...l,on:m=>l.get().each(m)}};var Dv=tinymce.util.Tools.resolve("tinymce.ThemeManager");const jy=l=>{const m=D=>D(l),x=ae(l),S=()=>A,A={tag:!0,inner:l,fold:(D,E)=>E(l),isValue:Se,isError:ee,map:D=>so.value(D(l)),mapError:S,bind:m,exists:m,forall:m,getOr:x,or:S,getOrThunk:x,orThunk:S,getOrDie:x,each:D=>{D(l)},toOptional:()=>F.some(l)};return A},B1=l=>{const m=()=>x,x={tag:!1,inner:l,fold:(S,A)=>S(l),isValue:ee,isError:Se,map:m,mapError:S=>so.error(S(l)),bind:m,exists:ee,forall:Se,getOr:Ge,or:Ge,getOrThunk:Pe,orThunk:Pe,getOrDie:Me(String(l)),each:de,toOptional:F.none};return x},so={value:jy,error:B1,fromOption:(l,m)=>l.fold(()=>B1(m),jy)};var Ci,l;(l=Ci||(Ci={}))[l.Error=0]="Error",l[l.Value=1]="Value";const dm=(l,m,x)=>l.stype===Ci.Error?m(l.serror):x(l.svalue),Ov=l=>({stype:Ci.Value,svalue:l}),$g=l=>({stype:Ci.Error,serror:l}),Pl=Ov,ki=$g,ya=dm,rl=(l,m,x,S)=>({tag:"field",key:l,newKey:m,presence:x,prop:S}),ge=(l,m,x)=>{switch(l.tag){case"field":return m(l.key,l.newKey,l.presence,l.prop);case"custom":return x(l.newKey,l.instantiator)}},xe=l=>(...m)=>{if(0===m.length)throw new Error("Can't merge zero objects");const x={};for(let S=0;S<m.length;S++){const A=m[S];for(const D in A)bo(A,D)&&(x[D]=l(x[D],A[D]))}return x},be=xe((l,m)=>q(l)&&q(m)?be(l,m):m),Le=xe((l,m)=>m),Ke=l=>({tag:"defaultedThunk",process:l}),tt=l=>Ke(ae(l)),At=l=>({tag:"mergeWithThunk",process:l}),jt=l=>{const m=(S=>{const A=[],D=[];return Gt(S,E=>{dm(E,P=>D.push(P),P=>A.push(P))}),{values:A,errors:D}})(l);return m.errors.length>0?(x=m.errors,_e(ki,uo)(x)):Pl(m.values);var x},Lt=l=>se(l)&&Sn(l).length>100?" removed due to size":JSON.stringify(l,null,2),Vt=(l,m)=>ki([{path:l,getErrorInfo:m}]),ln=l=>({extract:(m,x)=>{return(S=l(x)).stype===Ci.Error?(S=>Vt(m,ae(S)))(S.serror):S;var S},toString:ae("val")}),xn=ln(Pl),Po=(l,m,x,S)=>S(vn(l,m).getOrThunk(()=>x(l))),Vn=(l,m,x,S,A)=>{const D=P=>A.extract(m.concat([S]),P),E=P=>P.fold(()=>Pl(F.none()),B=>{return(H=A.extract(m.concat([S]),B)).stype===Ci.Value?{stype:Ci.Value,svalue:(0,F.some)(H.svalue)}:H;var H});switch(l.tag){case"required":return P=m,Z=D,vn(B=x,H=S).fold(()=>{return oe=H,ce=B,Vt(P,()=>'Could not find valid *required* value for "'+oe+'" in '+Lt(ce));var oe,ce},Z);case"defaultedThunk":return Po(x,S,l.process,D);case"option":return((P,B,H)=>H(vn(P,B)))(x,S,E);case"defaultedOptionThunk":return((P,B,H,Z)=>Z(vn(P,B).map(G=>!0===G?H(P):G)))(x,S,l.process,E);case"mergeWithThunk":return Po(x,S,ae({}),P=>{const B=be(l.process(x),P);return D(B)})}var P,B,H,Z},oo=l=>({extract:(m,x)=>l().extract(m,x),toString:()=>l().toString()}),fn=l=>{const m=Et(l),x=Jt(l,(S,A)=>ge(A,D=>be(S,{[D]:!0}),ae(S)),{});return{extract:(S,A)=>{const D=$(A)?[]:(l=>Sn(Ds(l,W)))(A),E=to(D,P=>!Br(x,P));return 0===E.length?m.extract(S,A):(B=E,Vt(S,()=>"There are unsupported fields: ["+B.join(", ")+"] specified"));var B},toString:m.toString}},Et=l=>({extract:(m,x)=>((S,A,D)=>{const E={},P=[];for(const B of D)ge(B,(H,Z,G,oe)=>{const ce=Vn(G,S,A,H,oe);ya(ce,me=>{P.push(...me)},me=>{E[Z]=me})},(H,Z)=>{E[H]=Z(A)});return P.length>0?ki(P):Pl(E)})(m,x,l),toString:()=>"obj{\n"+Ct(l,m=>ge(m,(x,S,A,D)=>x+" -> "+D.toString(),(x,S)=>"state("+x+")")).join("\n")+"}"}),lo=l=>({extract:(m,x)=>{const S=Ct(x,(A,D)=>l.extract(m.concat(["["+D+"]"]),A));return jt(S)},toString:()=>"array("+l.toString()+")"}),xo=(l,m)=>{const x=void 0!==m?m:Ge;return{extract:(S,A)=>{const D=[];for(const E of l){const P=E.extract(S,A);if(P.stype===Ci.Value)return{stype:Ci.Value,svalue:x(P.svalue)};D.push(P)}return jt(D)},toString:()=>"oneOf("+Ct(l,S=>S.toString()).join(", ")+")"}},jo=_e(lo,Et),dr=ae(xn),ba=(l,m)=>ln(x=>{const S=typeof x;return l(x)?Pl(x):ki(`Expected type: ${m} but got: ${S}`)}),Ga=ba(K,"number"),io=ba(Q,"string"),ac=ba($,"boolean"),Bi=ba(U,"function"),as=l=>{if(Object(l)!==l)return!0;switch({}.toString.call(l).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(l).every(m=>as(l[m]));default:return!1}},pA=ln(l=>as(l)?Pl(l):ki("Expected value to be acceptable for sending via postMessage")),ru=(l,m)=>({extract:(x,S)=>vn(S,l).fold(()=>{return D=l,Vt(x,()=>'Choice schema did not contain choice key: "'+D+'"');var D},A=>{return D=x,E=S,vn(P=m,B=A).fold(()=>{return Z=P,G=B,Vt(D,()=>'The chosen schema: "'+G+'" did not exist in branches: '+Lt(Z));var Z,G},H=>H.extract(D.concat(["branch: "+B]),E));var D,E,P,B}),toString:()=>"chooseOn("+l+"). Possible values: "+Sn(m)}),um=l=>ln(m=>l(m).fold(ki,Pl)),aC=(l,m)=>((l,m)=>({extract:(x,S)=>{const A=Sn(S);var E,P;return((E,P)=>E.stype===Ci.Value?(E=>{const P=Ct(E,B=>rl(B,B,{tag:"required",process:{}},m));return Et(P).extract(x,S)})(E.svalue):E)((E=x,P=A,lo(ln(l)).extract(E,P)))},toString:()=>"setOf("+m.toString()+")"}))(x=>l(x).fold($g,Ov),m),br=(l,m,x)=>{return S=(P=m.extract([l],E=x)).stype===Ci.Error?{stype:Ci.Error,serror:(P=>({input:E,errors:P}))(P.serror)}:P,dm(S,so.error,so.value);var E,P,S},il=l=>l.fold(m=>{throw new Error(Ei(m))},Ge),nn=(l,m,x)=>il(br(l,m,x)),Ei=l=>"Errors: \n"+(m=>{const x=m.length>10?m.slice(0,10).concat([{path:[],getErrorInfo:ae("... (only showing first ten failures)")}]):m;return Ct(x,S=>"Failed path: ("+S.path.join(" > ")+")\n"+S.getErrorInfo())})(l.errors).join("\n")+"\n\nInput object: "+Lt(l.input),xr=(l,m)=>ru(l,Rn(m,Et)),Rs=(l,m)=>((x,S)=>{const A=bd(S);return{extract:(D,E)=>A().extract(D,E),toString:()=>A().toString()}})(0,m),zi=rl,Yi=(l,m)=>({tag:"custom",newKey:l,instantiator:m}),Vc=l=>um(m=>nt(l,m)?so.value(m):so.error(`Unsupported value: "${m}", choose one of "${l.join(", ")}".`)),kt=l=>zi(l,l,{tag:"required",process:{}},dr()),Ls=(l,m)=>zi(l,l,{tag:"required",process:{}},m),Mt=l=>Ls(l,io),Hh=(l,m)=>zi(l,l,{tag:"required",process:{}},Vc(m)),Hc=l=>Ls(l,Bi),al=(l,m)=>zi(l,l,{tag:"required",process:{}},Et(m)),Ev=(l,m)=>zi(l,l,{tag:"required",process:{}},jo(m)),sl=(l,m)=>zi(l,l,{tag:"required",process:{}},lo(m)),Bn=l=>zi(l,l,{tag:"option",process:{}},dr()),wd=(l,m)=>zi(l,l,{tag:"option",process:{}},m),ll=l=>wd(l,Ga),fo=l=>wd(l,io),Nv=(l,m)=>wd(l,Vc(m)),Ps=l=>wd(l,Bi),Sd=(l,m)=>wd(l,lo(m)),Wc=(l,m)=>wd(l,Et(m)),st=(l,m)=>zi(l,l,tt(m),dr()),Bl=(l,m,x)=>zi(l,l,tt(m),x),qy=(l,m)=>Bl(l,m,Ga),Ti=(l,m)=>Bl(l,m,io),qu=(l,m,x)=>Bl(l,m,Vc(x)),xa=(l,m)=>Bl(l,m,ac),Tr=(l,m)=>Bl(l,m,Bi),na=(l,m,x)=>Bl(l,m,lo(x)),Rv=(l,m,x)=>Bl(l,m,Et(x)),ur=l=>{if(!j(l))throw new Error("cases must be an array");if(0===l.length)throw new Error("there must be at least one case");const m=[],x={};return Gt(l,(S,A)=>{const D=Sn(S);if(1!==D.length)throw new Error("one and only one name per case");const E=D[0],P=S[E];if(void 0!==x[E])throw new Error("duplicate key detected:"+E);if("cata"===E)throw new Error("cannot have a case named cata (sorry)");if(!j(P))throw new Error("case arguments must be an array");m.push(E),x[E]=(...B)=>{const H=B.length;if(H!==P.length)throw new Error("Wrong number of arguments to case "+E+". Expected "+P.length+" ("+P+"), got "+H);return{fold:(...Z)=>{if(Z.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Z.length);return Z[A].apply(null,B)},match:Z=>{const G=Sn(Z);if(m.length!==G.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+"\nActual: "+G.join(","));if(!dn(m,oe=>nt(G,oe)))throw new Error("Not all branches were specified when using match. Specified: "+G.join(", ")+"\nRequired: "+m.join(", "));return Z[E].apply(null,B)},log:Z=>{console.log(Z,{constructors:m,constructor:E,params:B})}}}}),x};ur([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Yg=(l,m)=>({[l]:m}),zl=l=>(m=>{const x={};return Gt(m,S=>{x[S.key]=S.value}),x})(l),z1=l=>U(l)?l:ee,hm=(l,m,x)=>{let S=l.dom;const A=z1(x);for(;S.parentNode;){S=S.parentNode;const D=je(S),E=m(D);if(E.isSome())return E;if(A(D))break}return F.none()},$u=(l,m,x)=>{const S=m(l),A=z1(x);return S.orThunk(()=>A(l)?F.none():hm(l,m,A))},gm=(l,m)=>po(l.element,m.event.target),$E={can:Se,abort:ee,run:de},Wh=l=>{if(!Br(l,"can")&&!Br(l,"abort")&&!Br(l,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(l,null,2)+" does not have can, abort, or run!");return{...$E,...l}},hr=ae,Fl=hr("touchstart"),Lv=hr("touchmove"),iu=hr("touchend"),sC=hr("touchcancel"),cl=hr("mousedown"),$y=hr("mousemove"),Xg=hr("mouseout"),pm=hr("mouseup"),Xi=hr("mouseover"),dl=hr("focusin"),F1=hr("focusout"),sc=hr("keydown"),zD=hr("keyup"),Zg=hr("input"),Kg=hr("change"),mm=hr("click"),fm=hr("transitioncancel"),Cd=hr("transitionend"),Yy=hr("transitionstart"),mA=hr("selectstart"),fi=l=>ae("alloy."+l),lC={tap:fi("tap")},Yu=fi("focus"),vm=fi("blur.post"),ym=fi("paste.post"),Pv=fi("receive"),ss=fi("execute"),V1=fi("focus.item"),Xy=lC.tap,Zy=fi("longpress"),au=fi("sandbox.close"),Bv=fi("typeahead.cancel"),zv=fi("system.init"),bm=fi("system.touchmove"),Da=fi("system.touchend"),kd=fi("system.scroll"),ul=fi("system.resize"),hl=fi("system.attached"),Bs=fi("system.detached"),xm=fi("system.dismissRequested"),gl=fi("system.repositionRequested"),Fv=fi("focusmanager.shifted"),Vv=fi("slotcontainer.visibility"),Hv=fi("system.external.element.scroll"),Ni=fi("change.tab"),H1=fi("dismiss.tab"),W1=fi("highlight"),Ky=fi("dehighlight"),Zn=(l,m)=>{Jg(l,l.element,m,{})},mn=(l,m,x)=>{Jg(l,l.element,m,x)},Vl=l=>{Zn(l,ss())},Wv=(l,m,x)=>{Jg(l,m,x,{})},Jg=(l,m,x,S)=>{const A={target:m,...S};l.getSystem().triggerEvent(x,m,A)},Jy=(l,m,x,S)=>{l.getSystem().triggerEvent(x,m,S.event)},gr=l=>zl(l),Qy=(l,m)=>({key:l,value:Wh({abort:m})}),eb=l=>({key:l,value:Wh({run:(m,x)=>{x.event.prevent()}})}),xt=(l,m)=>({key:l,value:Wh({run:m})}),_m=(l,m,x)=>({key:l,value:Wh({run:(S,A)=>{m.apply(void 0,[S,A].concat(x))}})}),Uv=l=>m=>({key:l,value:Wh({run:(x,S)=>{gm(x,S)&&m(x,S)}})}),tb=(l,m,x)=>{return A=m.partUids[x],xt(S=l,(D,E)=>{D.getSystem().getByUid(A).each(P=>{Jy(P,P.element,S,E)})});var S,A},cC=(l,m)=>xt(l,(x,S)=>{const A=S.event,D=x.getSystem().getByDom(A.target).getOrThunk(()=>$u(A.target,E=>x.getSystem().getByDom(E).toOptional(),ee).getOr(x));m(x,D,S)}),di=l=>xt(l,(m,x)=>{x.cut()}),Uh=l=>xt(l,(m,x)=>{x.stop()}),lc=(l,m)=>Uv(l)(m),qo=Uv(hl()),_a=Uv(Bs()),fA=Uv(zv()),Hl=(Sa=ss(),l=>xt(Sa,l)),Qg=l=>Ct(l,m=>Ec(m,"/*")?m.substring(0,m.length-2):m),Gv=(l,m)=>{const x=l.toString(),S=x.indexOf(")")+1,A=x.indexOf("("),D=x.substring(A+1,S-1).split(/,\s*/);return l.toFunctionAnnotation=()=>({name:m,parameters:Qg(D)}),l},Wl=l=>({classes:X(l.classes)?[]:l.classes,attributes:X(l.attributes)?{}:l.attributes,styles:X(l.styles)?{}:l.styles}),wm=(l,m,x)=>fA((S,A)=>{x(S,l,m)}),jv=l=>({key:l,value:void 0}),Ul=(l,m,x,S,A,D,E)=>{const P=Z=>Br(Z,x)?Z[x]():F.none(),B=Rn(A,(Z,G)=>{return oe=x,((Te,Ae,ze)=>{const ke=ze.toString(),Ce=ke.indexOf(")")+1,Ee=ke.indexOf("("),Ne=ke.substring(Ee+1,Ce-1).split(/,\s*/);return Te.toFunctionAnnotation=()=>({name:Ae,parameters:Qg(Ne.slice(0,1).concat(Ne.slice(3)))}),Te})((Te,...Ae)=>{const ze=[Te].concat(Ae);return Te.config({name:ae(oe)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+oe+". Using API: "+me)},ke=>{const Ce=Array.prototype.slice.call(ze,1);return ce.apply(void 0,[Te,ke.config,ke.state].concat(Ce))})},me=G,ce=Z);var oe,ce,me}),H={...Rn(D,(Z,G)=>Gv(Z,G)),...B,revoke:Ue(jv,x),config:Z=>{const G=nn(x+"-config",l,Z);return{key:x,value:{config:G,me:H,configAsRaw:bd(()=>nn(x+"-config",l,Z)),initialConfig:Z,state:E}}},schema:ae(m),exhibit:(Z,G)=>Ml(P(Z),vn(S,"exhibit"),(oe,ce)=>ce(G,oe.config,oe.state)).getOrThunk(()=>Wl({})),name:ae(x),handlers:Z=>P(Z).map(G=>vn(S,"events").getOr(()=>({}))(G.config,G.state)).getOr({})};return H},wa={init:()=>cc({readState:ae("No State required")})},cc=l=>l,Pt=l=>zl(l),Mr=fn([kt("fields"),kt("name"),st("active",{}),st("apis",{}),st("state",wa),st("extra",{})]),Mi=l=>{const m=nn("Creating behaviour: "+l.name,Mr,l);return((x,S,A,D,E,P)=>{const B=fn(x),H=Wc(S,[(Z=x,wd("config",fn(Z)))]);var Z;return Ul(B,H,S,A,D,E,P)})(m.fields,m.name,m.active,m.apis,m.extra,m.state)},Td=fn([kt("branchKey"),kt("branches"),kt("name"),st("active",{}),st("apis",{}),st("state",wa),st("extra",{})]),nb=l=>{const m=nn("Creating behaviour: "+l.name,Td,l);return((x,S,A,D,E,P)=>{const B=x,H=Wc(S,[wd("config",x)]);return Ul(B,H,S,A,D,E,P)})(xr(m.branchKey,m.branches),m.name,m.active,m.apis,m.extra,m.state)},Xu=ae(void 0),Zu=(l,m)=>{const x=qi(l,m);return void 0===x||""===x?[]:x.split(" ")},ja=l=>void 0!==l.dom.classList,_s=l=>Zu(l,"class"),ws=(l,m)=>((x,S,A)=>{const D=Zu(x,S).concat([A]);return Pn(x,S,D.join(" ")),!0})(l,"class",m),dc=(l,m)=>((x,S,A)=>{const D=to(Zu(x,S),E=>E!==A);return D.length>0?Pn(x,S,D.join(" ")):tr(x,S),!1})(l,"class",m),ui=(l,m)=>{ja(l)?l.dom.classList.add(m):ws(l,m)},Sm=l=>{0===(ja(l)?l.dom.classList:_s(l)).length&&tr(l,"class")},Vr=(l,m)=>{ja(l)?l.dom.classList.remove(m):dc(l,m),Sm(l)},qa=(l,m)=>ja(l)&&l.dom.classList.contains(m),su=(l,m)=>{Gt(m,x=>{ui(l,x)})},zs=(l,m)=>{Gt(m,x=>{Vr(l,x)})},vA=l=>ja(l)?(m=>{const x=m.dom.classList,S=new Array(x.length);for(let A=0;A<x.length;A++){const D=x.item(A);null!==D&&(S[A]=D)}return S})(l):_s(l),Mo=(l,m,x,S,A)=>{const D=E=>E+"px";return{position:l,left:m.map(D),top:x.map(D),right:S.map(D),bottom:A.map(D)}},dC=(l,m)=>{var x;Vu(l,(x=m,{...x,position:F.some(x.position)}))},ep=l=>(Ma(kr(l,"position"),"fixed")?F.none():Nh(l)).orThunk(()=>{const m=ma("span");return Ii(l).bind(x=>{Qr(x,m);const S=Nh(m);return Rl(m),S})}),yA=l=>ep(l).map(ci).getOrThunk(()=>nr(0,0)),bA=(l,m)=>{const x=l.element;ui(x,m.transitionClass),Vr(x,m.fadeOutClass),ui(x,m.fadeInClass),m.onShow(l)},FD=(l,m)=>{const x=l.element;ui(x,m.transitionClass),Vr(x,m.fadeInClass),ui(x,m.fadeOutClass),m.onHide(l)},ob=(l,m)=>l.y>=m.y,U1=(l,m)=>l.bottom<=m.bottom,lu=(l,m,x)=>({location:"top",leftX:m,topY:x.bounds.y-l.y}),qv=(l,m,x)=>({location:"bottom",leftX:m,bottomY:l.bottom-x.bounds.bottom}),$v=l=>l.box.x-l.win.x,Ku=(l,m,x)=>x.getInitialPos().map(S=>{const A=((D,E)=>{const P=E.optScrollEnv.fold(ae(D.bounds.y),B=>B.scrollElmTop+(D.bounds.y-B.currentScrollTop));return nr(D.bounds.x,P)})(S,m);return{box:Oi(A.left,A.top,Ua(l),Pi(l)),location:S.location}}),G1=(l,m,x,S,A)=>{const D=((P,B)=>{const H=B.optScrollEnv.fold(ae(P.y),Z=>P.y+Z.currentScrollTop-Z.scrollElmTop);return nr(P.x,H)})(m,x),E=Oi(D.left,D.top,m.width,m.height);S.setInitialPos({style:El(l),position:Di(l,"position")||"static",bounds:E,location:A.location})},Yv=(l,m,x)=>x.getInitialPos().bind(S=>{var A;switch(x.clearInitialPos(),S.position){case"static":return F.some({morph:"static"});case"absolute":const D=ep(l).getOr(Os()),E=Fr(D),P=null!==(A=D.dom.scrollTop)&&void 0!==A?A:0;return F.some({morph:"absolute",positionCss:Mo("absolute",vn(S.style,"left").map(B=>m.x-E.x),vn(S.style,"top").map(B=>m.y-E.y+P),vn(S.style,"right").map(B=>E.right-m.right),vn(S.style,"bottom").map(B=>E.bottom-m.bottom))});default:return F.none()}}),uC=l=>{switch(l.location){case"top":return F.some({morph:"fixed",positionCss:Mo("fixed",F.some(l.leftX),F.some(l.topY),F.none(),F.none())});case"bottom":return F.some({morph:"fixed",positionCss:Mo("fixed",F.some(l.leftX),F.none(),F.none(),F.some(l.bottomY))});default:return F.none()}},tp=(l,m,x)=>{x.setDocked(!1),Gt(["left","right","top","bottom","position"],S=>No(l.element,S)),m.onUndocked(l)},j1=(l,m,x,S)=>{const A="fixed"===S.position;x.setDocked(A),dC(l.element,S),(A?m.onDocked:m.onUndocked)(l)},Yo=(l,m,x,S,A=!1)=>{m.contextual.each(D=>{D.lazyContext(l).each(E=>{const P=(B=E).y<(H=S.bounds).bottom&&B.bottom>H.y;var B,H;P!==x.isVisible()&&(x.setVisible(P),A&&!P?(su(l.element,[D.fadeOutClass]),D.onHide(l)):(P?bA:FD)(l,D))})})},np=(l,m,x,S,A)=>{Yo(l,m,x,S,!0),j1(l,m,x,A.positionCss)},Md=(l,m,x)=>{l.getSystem().isConnected()&&((S,A,D)=>{const E=A.lazyViewport(S);Yo(S,A,D,E),((l,m,x)=>{const S=l.element;return Ma(kr(S,"position"),"fixed")?(P=A=S,B=D=m,H=E=x,Ku(P,B,H).filter(({box:Z})=>{return G=H.getModes(),oe=Z,ce=B,dn(G,me=>{switch(me){case"bottom":return U1(oe,ce.bounds);case"top":return ob(oe,ce.bounds)}});var G,oe,ce}).bind(({box:Z})=>Yv(P,Z,H))).orThunk(()=>D.optScrollEnv.bind(P=>Ku(A,D,E)).bind(({box:P,location:B})=>{const H=$i(),Z=$v({win:H,box:P}),G="top"===B?lu(H,Z,D):qv(H,Z,D);return uC(G)})):((A,D,E)=>{const P=Fr(A),B=$i(),H=((Z,G,oe)=>{const ce=G.win,me=G.box,Te=$v(G);return on(Z,Ae=>{switch(Ae){case"bottom":return U1(me,oe.bounds)?F.none():F.some(qv(ce,Te,oe));case"top":return ob(me,oe.bounds)?F.none():F.some(lu(ce,Te,oe));default:return F.none()}}).getOr({location:"no-dock"})})(E.getModes(),{win:B,box:P},D);return"top"===H.location||"bottom"===H.location?(G1(A,P,D,E,H),uC(H)):F.none()})(S,m,x);var A,D,E,P,B,H})(S,E,D).each(P=>{((B,H,Z,G,oe)=>{switch(oe.morph){case"static":return tp(B,H,Z);case"absolute":return j1(B,H,Z,oe.positionCss);case"fixed":np(B,H,Z,G,oe)}})(S,A,D,E,P)})})(l,m,x)},Ad=(l,m,x)=>{x.isDocked()&&((S,A,D)=>{const E=S.element;D.setDocked(!1);const P=A.lazyViewport(S);((B,H,Z)=>{const G=B.element;return Ku(G,H,Z).bind(({box:oe})=>Yv(G,oe,Z))})(S,P,D).each(B=>{switch(B.morph){case"static":tp(S,A,D);break;case"absolute":j1(S,A,D,B.positionCss)}}),D.setVisible(!0),A.contextual.each(B=>{zs(E,[B.fadeInClass,B.fadeOutClass,B.transitionClass]),B.onShow(S)}),Md(S,A,D)})(l,m,x)},uc=l=>(m,x,S)=>{const A=x.lazyViewport(m);((D,E,P,B)=>{const H=Fr(D),Z=$i(),G=B(Z,$v({win:Z,box:H}),E);return"bottom"===G.location||"top"===G.location?(oe=D,ce=H,me=E,Ae=G,(Te=P).getInitialPos().fold(()=>G1(oe,ce,me,Te,Ae),()=>de),uC(G)):F.none();var oe,ce,me,Te,Ae})(m.element,A,S,l).each(D=>{np(m,x,S,A,D)})},op=uc(lu),rp=uc(qv);var Sa,pl=Object.freeze({__proto__:null,refresh:Md,reset:Ad,isDocked:(l,m,x)=>x.isDocked(),getModes:(l,m,x)=>x.getModes(),setModes:(l,m,x,S)=>x.setModes(S),forceDockToTop:op,forceDockToBottom:rp}),Zi=Object.freeze({__proto__:null,events:(l,m)=>gr([lc(Cd(),(x,S)=>{l.contextual.each(A=>{qa(x.element,A.transitionClass)&&(zs(x.element,[A.transitionClass,A.fadeInClass]),(m.isVisible()?A.onShown:A.onHidden)(x)),S.stop()})}),xt(kd(),(x,S)=>{Md(x,l,m)}),xt(Hv(),(x,S)=>{Md(x,l,m)}),xt(ul(),(x,S)=>{Ad(x,l,m)})])});const Cm=l=>l.dom.innerHTML,cu=(l,m)=>{const x=bs(l).dom,S=je(x.createDocumentFragment()),A=((D,E)=>{const P=(E||document).createElement("div");return P.innerHTML=D,Aa(je(P))})(m,x);rc(S,A),Fh(l),Qr(l,S)},km=(l,m)=>je(l.dom.cloneNode(m)),$a=l=>{return Bg(m=l)?"#shadow-root":(S=>{const A=ma("div"),D=je(S.dom.cloneNode(!0));return Qr(A,D),Cm(A)})(km(m,!1));var m};var oa;!function(l){l[l.STOP=0]="STOP",l[l.NORMAL=1]="NORMAL",l[l.LOGGING=2]="LOGGING"}(oa||(oa={}));const sr=kn({}),Xv=["alloy/data/Fields","alloy/debugging/Debugging"],Ya=(l,m,x)=>((S,A,D)=>{switch(vn(sr.get(),S).orThunk(()=>{const E=Sn(sr.get());return on(E,P=>S.indexOf(P)>-1?F.some(sr.get()[P]):F.none())}).getOr(oa.NORMAL)){case oa.NORMAL:return D(ml());case oa.LOGGING:{const E=((B,H)=>{const Z=[],G=(new Date).getTime();return{logEventCut:(oe,ce,me)=>{Z.push({outcome:"cut",target:ce,purpose:me})},logEventStopped:(oe,ce,me)=>{Z.push({outcome:"stopped",target:ce,purpose:me})},logNoParent:(oe,ce,me)=>{Z.push({outcome:"no-parent",target:ce,purpose:me})},logEventNoHandlers:(oe,ce)=>{Z.push({outcome:"no-handlers-left",target:ce})},logEventResponse:(oe,ce,me)=>{Z.push({outcome:"response",purpose:me,target:ce})},write:()=>{const oe=(new Date).getTime();nt(["mousemove","mouseover","mouseout",zv()],B)||console.log(B,{event:B,time:oe-G,target:H.dom,sequence:Ct(Z,ce=>nt(["cut","stopped","response"],ce.outcome)?"{"+ce.purpose+"} "+ce.outcome+" at ("+$a(ce.target)+")":ce.outcome)})}}})(S,A),P=D(E);return E.write(),P}case oa.STOP:return!0}})(l,m,x),ml=ae({logEventCut:de,logEventStopped:de,logNoParent:de,logEventNoHandlers:de,logEventResponse:de,write:de}),ib=ae([kt("menu"),kt("selectedMenu")]),Uc=ae([kt("item"),kt("selectedItem")]);ae(Et(Uc().concat(ib())));const q1=ae(Et(Uc())),Tm=al("initSize",[kt("numColumns"),kt("numRows")]),Ju=()=>al("markers",[kt("backgroundMenu")].concat(ib()).concat(Uc())),Gc=l=>al("markers",Ct(l,kt)),Mm=(l,m,x)=>((()=>{const S=new Error;if(void 0!==S.stack){const A=S.stack.split("\n");hn(A,D=>D.indexOf("alloy")>0&&!Bt(Xv,E=>D.indexOf(E)>-1)).getOr("unknown")}})(),zi(m,m,x,um(S=>so.value((...A)=>S.apply(void 0,A))))),Kn=l=>Mm(0,l,tt(de)),Ss=l=>Mm(0,l,tt(F.none)),Qu=l=>Mm(0,l,{tag:"required",process:{}}),ip=l=>Mm(0,l,{tag:"required",process:{}}),Ko=(l,m)=>Yi(l,ae(m)),ab=l=>Yi(l,Ge),hC=ae(Tm);var xA=[Wc("contextual",[Mt("fadeInClass"),Mt("fadeOutClass"),Mt("transitionClass"),Hc("lazyContext"),Kn("onShow"),Kn("onShown"),Kn("onHide"),Kn("onHidden")]),Tr("lazyViewport",()=>({bounds:$i(),optScrollEnv:F.none()})),na("modes",["top","bottom"],io),Kn("onDocked"),Kn("onUndocked")];const jr=Mi({fields:xA,name:"docking",active:Zi,apis:pl,state:Object.freeze({__proto__:null,init:l=>{const m=kn(!1),x=kn(!0),S=ar(),A=kn(l.modes);return cc({isDocked:m.get,setDocked:m.set,getInitialPos:S.get,setInitialPos:S.set,clearInitialPos:S.clear,isVisible:x.get,setVisible:x.set,getModes:A.get,setModes:A.set,readState:()=>`docked:  ${m.get()}, visible: ${x.get()}, modes: ${A.get().join(",")}`})}})}),VD=gr([((l,m)=>({key:l,value:Wh({can:(x,S)=>{const A=S.event,D=A.originator,E=A.target;return H=E,!(po(B=D,x.element)&&!po(B,H)&&(console.warn(Yu()+" did not get interpreted by the desired target. \nOriginator: "+$a(D)+"\nTarget: "+$a(E)+"\nCheck the "+Yu()+" event handlers"),1));var B,H}})}))(Yu())]);var HD=Object.freeze({__proto__:null,events:VD});const Am=(l,m,x,S)=>{const A=l+m;return A>S?x:A<x?S:A},ra=(l,m,x)=>Math.min(Math.max(l,m),x);let eh=0;const cn=l=>{const m=(new Date).getTime(),x=Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295*1e9);return eh++,l+"_"+x+eh+String(m)},jc=ae("alloy-id-"),gC=ae("data-alloy-id"),_A=jc(),qc=gC(),pC=(l,m)=>{Object.defineProperty(l.dom,qc,{value:m,writable:!0})},ap=l=>{const m=$n(l)?l.dom[qc]:null;return F.from(m)},Zv=l=>cn(l),sb=Ge,$1=l=>{const m=A=>`The component must be in a context to execute: ${A}`+(l?"\n"+$a(l().element)+" is not in context.":""),x=A=>()=>{throw new Error(m(A))},S=A=>()=>{console.warn(m(A))};return{debugInfo:ae("fake"),triggerEvent:S("triggerEvent"),triggerFocus:S("triggerFocus"),triggerEscape:S("triggerEscape"),broadcast:S("broadcast"),broadcastOn:S("broadcastOn"),broadcastEvent:S("broadcastEvent"),build:x("build"),buildOrPatch:x("buildOrPatch"),addToWorld:x("addToWorld"),removeFromWorld:x("removeFromWorld"),addToGui:x("addToGui"),removeFromGui:x("removeFromGui"),getByUid:x("getByUid"),getByDom:x("getByDom"),isConnected:ee}},Kv=$1(),Jv=cn("alloy-premade"),Y1=l=>(Object.defineProperty(l.element.dom,Jv,{value:l.uid,writable:!0}),Yg(Jv,l)),sp=l=>vn(l,Jv),Gh=l=>((m,x)=>{const S=x.toString(),A=S.indexOf(")")+1,D=S.indexOf("("),E=S.substring(D+1,A-1).split(/,\s*/);return m.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Qg(E.slice(1))}),m})((m,...x)=>l(m.getApis(),m,...x),l),mC=(l,m)=>{const x={};return ao(l,(S,A)=>{ao(S,(D,E)=>{const P=vn(x,E).getOr([]);x[E]=P.concat([m(A,D)])})}),x},fC=l=>l.cHandler,wA=(l,m)=>({name:l,handler:m}),WD=(l,m)=>{const x={};return Gt(l,S=>{x[S.name()]=S.handlers(m)}),x},ut="alloy.base.behaviour",Qv=Et([zi("dom","dom",{tag:"required",process:{}},Et([kt("tag"),st("styles",{}),st("classes",[]),st("attributes",{}),Bn("value"),Bn("innerHtml")])),kt("components"),kt("uid"),st("events",{}),st("apis",{}),zi("eventOrder","eventOrder",(db={[ss()]:["disabling",ut,"toggling","typeaheadevents"],[Yu()]:[ut,"focusing","keying"],[zv()]:[ut,"disabling","toggling","representing","tooltipping"],[Zg()]:[ut,"representing","streaming","invalidating"],[Bs()]:[ut,"representing","item-events","toolbar-button-events","tooltipping"],[cl()]:["focusing",ut,"item-type-events"],[Fl()]:["focusing",ut,"item-type-events"],[Xi()]:["item-type-events","tooltipping"],[Pv()]:["receiving","reflecting","tooltipping"]},At(ae(db))),dr()),Bn("domModification")]),vC=l=>l.events,ei=l=>l.dom.value,jh=(l,m)=>{if(void 0===m)throw new Error("Value.set was undefined");l.dom.value=m},Fi=(l,m,x)=>{x.fold(()=>Qr(l,m),S=>{po(S,m)||(_d(S,m),Rl(S))})},yC=(l,m,x)=>{const S=Ct(m,x),A=Aa(l);return Gt(A.slice(S.length),Rl),S},X1=(l,m,x,S)=>{const A=zr(l,m),D=S(x,A),E=(H=A,zr(l,m).map(Z=>{if(H.exists(G=>!po(G,Z))){const G=H.map(Rt).getOr("span"),oe=ma(G);return _d(Z,oe),oe}return Z}));var H;return Fi(l,D.element,E),D},lb=(l,m)=>{const x=Sn(l),S=Sn(m);return{toRemove:Oo(S,x),toSet:((E,P)=>{const B={},H={};return Si(E,(Z,G)=>!bo(m,G)||Z!==m[G],Go(B),Go(H)),{t:B,f:H}})(l).t}},bC=(l,m)=>{const x=()=>oe,S=kn(Kv),A=il(br("custom.definition",Qv,l)),D=(l=>{const m=(x=>{const S=vn(x,"behaviours").getOr({});return Yn(Sn(S),A=>{const D=S[A];return W(D)?[D.me]:[]})})(l);return((A,D)=>{const E=Ct(D,B=>Wc(B.name(),[kt("config"),st("state",wa)])),P=br("component.behaviours",Et(E),A.behaviours).fold(B=>{throw new Error(Ei(B)+"\nComplete spec:\n"+JSON.stringify(A,null,2))},Ge);return{list:D,data:Rn(P,B=>{const H=B.map(Z=>({config:Z.config,state:Z.state.init(Z.config)}));return ae(H)})}})(l,m)})(l),E=D.list,P=(ce=>ce.data)(D),B=((ce,me,Te)=>{const Ae={...(ze=ce).dom,uid:ze.uid,domChildren:Ct(ze.components,$e=>$e.element)};var ze;const ke=ce.domModification.fold(()=>Wl({}),Wl);var Ne,Fe;return Ne=Ae,Fe=me.length>0?(($e,ot,bt,mt)=>{const vt={...ot};Gt(bt,ko=>{vt[ko.name()]=ko.exhibit($e,mt)});const Ot=mC(vt,(ko,ri)=>({name:ko,modification:ri})),an=ko=>Jt(ko,(ri,ii)=>({...ii.modification,...ri}),{}),Cn=Jt(Ot.classes,(ko,ri)=>ri.modification.concat(ko),[]),An=an(Ot.attributes),Gn=an(Ot.styles);return Wl({classes:Cn,attributes:An,styles:Gn})})(Te,{"alloy.base.modification":ke},me,Ae):ke,{...Ne,attributes:{...Ne.attributes,...Fe.attributes},styles:{...Ne.styles,...Fe.styles},classes:Ne.classes.concat(Fe.classes)}})(A,E,P),H=((l,m)=>{const x=m.filter(S=>{return!(Rt(S)!==l.tag||(A=l,A.innerHtml.isSome()&&A.domChildren.length>0)||(A=>bo(A.dom,Jv))(S));var A}).bind(S=>((A,D)=>{try{const E=((P,B)=>{const{class:H,style:Z,...G}=_n(B.dom.attributes,(Ne,Fe)=>(Ne[Fe.name]=Fe.value,Ne),{}),{toSet:oe,toRemove:ce}=lb(P.attributes,G),me=El(B),{toSet:Te,toRemove:Ae}=lb(P.styles,me),ze=vA(B),ke=Oo(ze,P.classes),Ce=Oo(P.classes,ze);return Gt(ce,Ee=>tr(B,Ee)),Dl(B,oe),su(B,Ce),zs(B,ke),Gt(Ae,Ee=>No(B,Ee)),yd(B,Te),P.innerHtml.fold(()=>{var Ne;yC(Ne=B,P.domChildren,($e,ot)=>{const bt=zr(Ne,ot);return Fi(Ne,$e,bt),$e})},Ee=>{cu(B,Ee)}),(()=>{const Ee=B,Ne=P.value.getOrUndefined();Ne!==ei(Ee)&&jh(Ee,Ne??"")})(),B})(A,D);return F.some(E)}catch{return F.none()}})(l,S)).getOrThunk(()=>(S=>{const A=ma(S.tag);return Dl(A,S.attributes),su(A,S.classes),yd(A,S.styles),S.innerHtml.each(E=>cu(A,E)),rc(A,S.domChildren),S.value.each(E=>{jh(A,E)}),A})(l));return pC(x,l.uid),x})(B,m),Z=((ce,me,Te)=>{const Ae={"alloy.base.behaviour":vC(ce)};return(ze=Te,ke=ce.eventOrder,Ce=me,Ee=Ae,((l,m)=>((x,S)=>{const A=(E=>{const P=[],B=[];return Gt(E,H=>{H.fold(Z=>{P.push(Z)},Z=>{B.push(Z)})}),{errors:P,values:B}})(x);return A.errors.length>0?so.error(uo(A.errors)):(P={},so.value(0===(E=A.values).length?P:be(P,Le.apply(void 0,E))));var E,P})(Ur(l,(x,S)=>(1===x.length?so.value(x[0].handler):((l,m,x)=>{const S=m[x];return S?((A,D,E,P)=>{try{const B=ft(E,(H,Z)=>{const G=H[D],oe=Z[D],ce=P.indexOf(G),me=P.indexOf(oe);if(-1===ce)throw new Error("The ordering for "+A+" does not have an entry for "+G+".\nOrder specified: "+JSON.stringify(P,null,2));if(-1===me)throw new Error("The ordering for "+A+" does not have an entry for "+oe+".\nOrder specified: "+JSON.stringify(P,null,2));return ce<me?-1:me<ce?1:0});return so.value(B)}catch(B){return so.error([B])}})("Event: "+x,"name",l,S).map(A=>(D=>{const E=(B=D,(...Z)=>_n(B,(G,oe)=>{return G&&(ce=oe,ce.can).apply(void 0,Z);var ce},!0)),P=((B,H)=>(...Z)=>_n(B,(G,oe)=>{return G||(ce=oe,ce.abort).apply(void 0,Z);var ce},!1))(D);var B;return{can:E,abort:P,run:(...B)=>{Gt(D,H=>{H.run.apply(void 0,B)})}}})(Ct(A,D=>D.handler))):so.error(["The event ("+x+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(Ct(l,E=>E.name),null,2)])})(x,m,S)).map(A=>{const D=(P=>{const B=U(H=P)?{can:Se,abort:ee,run:H}:H;var H;return(H,Z,...G)=>{const oe=[H,Z].concat(G);B.abort.apply(void 0,oe)?Z.stop():B.can.apply(void 0,oe)&&B.run.apply(void 0,oe)}})(A),E=x.length>1?to(m[S],P=>Bt(x,B=>B.name===P)).join(" > "):x[0].name;return Yg(S,{handler:D,purpose:E})}))))(((Fe,$e,ot)=>{const bt={...ot,...WD($e,Fe)};return mC(bt,wA)})(ze,Ce,Ee),ke)).getOrDie();var ze,ke,Ce,Ee})(A,E,P),G=kn(A.components),oe={uid:l.uid,getSystem:S.get,config:ce=>{const me=P;return(U(me[ce.name()])?me[ce.name()]:()=>{throw new Error("Could not find "+ce.name()+" in "+JSON.stringify(l,null,2))})()},hasConfigured:ce=>U(P[ce.name()]),spec:l,readState:ce=>P[ce]().map(me=>me.state.readState()).getOr("not enabled"),getApis:()=>A.apis,connect:ce=>{S.set(ce)},disconnect:()=>{S.set($1(x))},element:H,syncComponents:()=>{const ce=Aa(H),me=Yn(ce,Te=>S.get().getByDom(Te).fold(()=>[],Qo));G.set(me)},components:G.get,events:Z};return oe},Hr=l=>{const m=dt(l);return Eo({element:m})},Eo=l=>{const m=nn("external.component",fn([kt("element"),Bn("uid")]),l),x=kn($1()),S=m.uid.getOrThunk(()=>Zv("external"));pC(m.element,S);const A={uid:S,getSystem:x.get,config:F.none,hasConfigured:ee,connect:D=>{x.set(D)},disconnect:()=>{x.set($1(()=>A))},getApis:()=>({}),element:m.element,spec:l,readState:ae("No state"),syncComponents:de,components:ae([]),events:{}};return Y1(A)},Fs=Zv,qh=(l,m)=>sp(l).getOrThunk(()=>{return((x,S)=>{const{events:A,...D}=sb(x),E=((B,H)=>{const Z=vn(B,"components").getOr([]);return H.fold(()=>Ct(Z,vi),G=>Ct(Z,(oe,ce)=>qh(oe,zr(G,ce))))})(D,S),P={...D,events:{...HD,...A},components:E};return so.value(bC(P,S))})((x=l,bo(x,"uid")?l:{uid:Fs(""),...l}),m).getOrDie();var x}),vi=l=>qh(l,F.none()),fl=Y1;var db,xC=(l,m,x,S,A)=>l(x,S)?F.some(x):U(A)&&A(x)?F.none():m(x,S,A);const Im=(l,m,x)=>{let S=l.dom;const A=U(x)?x:ee;for(;S.parentNode;){S=S.parentNode;const D=je(S);if(m(D))return F.some(D);if(A(D))break}return F.none()},Dm=(l,m,x)=>xC((S,A)=>A(S),Im,l,m,x),_C=(l,m)=>hn(l.dom.childNodes,x=>m(je(x))).map(je),K1=(l,m,x)=>Dm(l,m,x).isSome(),ti=(l,m,x)=>Im(l,S=>Kr(S,m),x),SA=(l,m)=>_C(l,x=>Kr(x,m)),$r=(l,m)=>Nc(m,l),Yh=(l,m,x)=>xC((S,A)=>Kr(S,A),ti,l,m,x),cp="aria-controls",wC=()=>{const l=cn(cp);return{id:l,link:m=>{Pn(m,cp,l)},unlink:m=>{tr(m,cp)}}},Fo=(l,m)=>{return K1(m,x=>po(x,l.element),ee)||(x=l,(A=m,Dm(A,D=>{if(!$n(D))return!1;const E=qi(D,"id");return void 0!==E&&E.indexOf(cp)>-1}).bind(D=>{const E=qi(D,"id"),P=Ia(D);return $r(P,`[${cp}="${E}"]`)})).exists(A=>Fo(x,A)));var x,A},Oa=(l,m,x,S,A,D,E,P=!1)=>({x:l,y:m,bubble:x,direction:S,placement:A,restriction:D,label:`${E}-${A}`,alwaysFit:P}),du=ur([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),SC=du.southeast,e0=du.southwest,J1=du.northeast,Ht=du.northwest,rn=du.south,Ea=du.north,Om=du.east,CA=du.west,ia=(l,m)=>_i(["left","right","top","bottom"],x=>vn(m,x).map(S=>((A,D)=>{switch(D){case 1:return A.x;case 0:return A.x+A.width;case 2:return A.y;case 3:return A.y+A.height}})(l,S))),Xh="layout",kA=l=>l.x,Q1=(l,m)=>l.x+l.width/2-m.width/2,CC=(l,m)=>l.x+l.width-m.width,aa=(l,m)=>l.y-m.height,t0=l=>l.y+l.height,ub=(l,m)=>l.y+l.height/2-m.height/2,Ki=(l,m,x)=>Oa(kA(l),t0(l),x.southeast(),SC(),"southeast",ia(l,{left:1,top:3}),Xh),Vi=(l,m,x)=>Oa(CC(l,m),t0(l),x.southwest(),e0(),"southwest",ia(l,{right:0,top:3}),Xh),Na=(l,m,x)=>Oa(kA(l),aa(l,m),x.northeast(),J1(),"northeast",ia(l,{left:1,bottom:2}),Xh),Ra=(l,m,x)=>Oa(CC(l,m),aa(l,m),x.northwest(),Ht(),"northwest",ia(l,{right:0,bottom:2}),Xh),sa=(l,m,x)=>Oa(Q1(l,m),aa(l,m),x.north(),Ea(),"north",ia(l,{bottom:2}),Xh),Ji=(l,m,x)=>Oa(Q1(l,m),t0(l),x.south(),rn(),"south",ia(l,{top:3}),Xh),Zh=(l,m,x)=>{return Oa((S=l).x+S.width,ub(l,m),x.east(),Om(),"east",ia(l,{left:0}),Xh);var S},e_=(l,m,x)=>Oa(l.x-m.width,ub(l,m),x.west(),CA(),"west",ia(l,{right:1}),Xh),Em=()=>[Ki,Vi,Na,Ra,Ji,sa,Zh,e_],UD=()=>[Vi,Ki,Ra,Na,Ji,sa,Zh,e_],GD=()=>[Na,Ra,Ki,Vi,sa,Ji],Hi=()=>[Ra,Na,Vi,Ki,sa,Ji],t_=()=>[Ki,Vi,Na,Ra,Ji,sa],kC=()=>[Vi,Ki,Ra,Na,Ji,sa];var n_=Object.freeze({__proto__:null,events:l=>gr([xt(Pv(),(m,x)=>{const S=l.channels,A=Sn(S),D=x,E=(P=A,(B=D).universal?P:to(P,H=>nt(B.channels,H)));var P,B;Gt(E,P=>{const B=S[P],H=B.schema,Z=nn("channel["+P+"] data\nReceiver: "+$a(m.element),H,D.data);B.onReceive(m,Z)})})])}),TA=[Ls("channels",aC(so.value,fn([Qu("onReceive"),st("schema",dr())])))];const Vs=Mi({fields:TA,name:"receiving",active:n_});var n0=Object.freeze({__proto__:null,exhibit:(l,m)=>Wl({classes:[],styles:m.useFixed()?{}:{position:"relative"}})});const hc=(l,m=!1)=>l.dom.focus({preventScroll:m}),o0=l=>l.dom.blur(),hb=l=>{const m=Ia(l).dom;return l.dom===m.activeElement},gc=(l=jg())=>F.from(l.dom.activeElement).map(je),vl=l=>gc(Ia(l)).filter(m=>l.dom.contains(m.dom)),gb=(l,m)=>{const x=Ia(m),S=gc(x).bind(D=>{const E=P=>po(D,P);return E(m)?F.some(m):((P,B)=>{const H=Z=>{for(let G=0;G<Z.childNodes.length;G++){const oe=je(Z.childNodes[G]);if(B(oe))return F.some(oe);const ce=H(Z.childNodes[G]);if(ce.isSome())return ce}return F.none()};return H(P.dom)})(m,E)}),A=l(m);return S.each(D=>{gc(x).filter(E=>po(E,D)).fold(()=>{hc(D)},de)}),A},o_=ur([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Nm=(l,m,x,S,A,D)=>{const E=m.rect,P=E.x-x,B=E.y-S,H=A-(P+E.width),Z=D-(B+E.height),G=F.some(P),oe=F.some(B),ce=F.some(H),me=F.some(Z),Te=F.none();return m.direction.fold(()=>Mo(l,G,oe,Te,Te),()=>Mo(l,Te,oe,ce,Te),()=>Mo(l,G,Te,Te,me),()=>Mo(l,Te,Te,ce,me),()=>Mo(l,G,oe,Te,Te),()=>Mo(l,G,Te,Te,me),()=>Mo(l,G,oe,Te,Te),()=>Mo(l,Te,oe,ce,Te))},TC=(l,m)=>l.fold(()=>{const x=m.rect;return Mo("absolute",F.some(x.x),F.some(x.y),F.none(),F.none())},(x,S,A,D)=>Nm("absolute",m,x,S,A,D),(x,S,A,D)=>Nm("fixed",m,x,S,A,D)),Kh=(l,m)=>{const x=Ue(Vh,m),S=l.fold(x,x,()=>{const E=xs();return Vh(m).translate(-E.left,-E.top)}),A=rs(m),D=mo(m);return Oi(S.left,S.top,A,D)},Xa=(l,m)=>m.fold(()=>l.fold($i,$i,Oi),x=>l.fold(ae(x),ae(x),()=>{const S=Jh(l,x.x,x.y);return Oi(S.left,S.top,x.width,x.height)})),Jh=(l,m,x)=>{const S=nr(m,x);return l.fold(ae(S),ae(S),()=>{const A=xs();return S.translate(-A.left,-A.top)})},Rm=o_.relative,Lm=o_.fixed,MC="data-alloy-placement",Pm=l=>mi(l,MC),r0=ur([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),qD=Se,wo=(l,m,x)=>Ug(l,m,qD,x,!1),AC=(l,m,x)=>Ug(l,m,qD,x,!0),r_=Wg,$D=["top","bottom","right","left"],pb="data-alloy-transition-timer",Bm=(l,m)=>{((x,S)=>{const A=nl.max(x,S,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Yt(x,"max-height",A+"px")})(l,Math.floor(m))},mb=ae((l,m)=>{Bm(l,m),yd(l,{"overflow-x":"hidden","overflow-y":"auto"})}),Qh=ae((l,m)=>{Bm(l,m)}),i0=(l,m,x)=>void 0===l[m]?x:l[m],i_=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Gl=(l,m,x,S=1)=>{const A=l*S,D=m*S,E=B=>vn(x,B).getOr([]),P=(B,H,Z)=>{const G=Oo(i_,Z);return{offset:nr(B,H),classesOn:Yn(Z,E),classesOff:Yn(G,E)}};return{southeast:()=>P(-l,m,["top","alignLeft"]),southwest:()=>P(l,m,["top","alignRight"]),south:()=>P(-l/2,m,["top","alignCentre"]),northeast:()=>P(-l,-m,["bottom","alignLeft"]),northwest:()=>P(l,-m,["bottom","alignRight"]),north:()=>P(-l/2,-m,["bottom","alignCentre"]),east:()=>P(l,-m/2,["valignCentre","left"]),west:()=>P(-l,-m/2,["valignCentre","right"]),insetNortheast:()=>P(A,D,["top","alignLeft","inset"]),insetNorthwest:()=>P(-A,D,["top","alignRight","inset"]),insetNorth:()=>P(-A/2,D,["top","alignCentre","inset"]),insetSoutheast:()=>P(A,-D,["bottom","alignLeft","inset"]),insetSouthwest:()=>P(-A,-D,["bottom","alignRight","inset"]),insetSouth:()=>P(-A/2,-D,["bottom","alignCentre","inset"]),insetEast:()=>P(-A,-D/2,["valignCentre","right","inset"]),insetWest:()=>P(A,-D/2,["valignCentre","left","inset"])}},fb=()=>Gl(0,0,{}),$c=Ge,Hs=(l,m)=>x=>"rtl"===vb(x)?m:l,vb=l=>"rtl"===Di(l,"direction")?"rtl":"ltr";var th;!function(l){l.TopToBottom="toptobottom",l.BottomToTop="bottomtotop"}(th||(th={}));const a_="data-alloy-vertical-dir",XD=l=>K1(l,m=>$n(m)&&qi(m,"data-alloy-vertical-dir")===th.BottomToTop),dp=()=>Wc("layouts",[kt("onLtr"),kt("onRtl"),Bn("onBottomLtr"),Bn("onBottomRtl")]),yb=(l,m,x,S,A,D,E)=>{const P=E.map(XD).getOr(!1),B=m.layouts.map(oe=>oe.onLtr(l)),H=m.layouts.map(oe=>oe.onRtl(l)),Z=P?m.layouts.bind(oe=>oe.onBottomLtr.map(ce=>ce(l))).or(B).getOr(A):B.getOr(x),G=P?m.layouts.bind(oe=>oe.onBottomRtl.map(ce=>ce(l))).or(H).getOr(D):H.getOr(S);return Hs(Z,G)(l)};var AA=[kt("hotspot"),Bn("bubble"),st("overrides",{}),dp(),Ko("placement",(l,m,x)=>{const A=Kh(x,m.hotspot.element),D=yb(l.element,m,t_(),kC(),GD(),Hi(),F.some(m.hotspot.element));return F.some($c({anchorBox:A,bubble:m.bubble.getOr(fb()),overrides:m.overrides,layouts:D}))})],ZD=[kt("x"),kt("y"),st("height",0),st("width",0),st("bubble",fb()),st("overrides",{}),dp(),Ko("placement",(l,m,x)=>{const S=Jh(x,m.x,m.y),A=Oi(S.left,S.top,m.width,m.height),D=yb(l.element,m,Em(),UD(),Em(),UD(),F.none());return F.some($c({anchorBox:A,bubble:m.bubble,overrides:m.overrides,layouts:D}))})];const IC=ur([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),IA=l=>l.fold(Ge,(m,x,S)=>m.translate(-x,-S)),bb=l=>l.fold(Ge,Ge),DA=l=>_n(l,(m,x)=>m.translate(x.left,x.top),nr(0,0)),KD=l=>{const m=Ct(l,bb);return DA(m)},JD=IC.screen,OA=IC.absolute,yl=(l,m,x)=>{const S=bs(l.element),A=xs(S),D=((E,P,B)=>{const H=am(B.root).dom;return F.from(H.frameElement).map(je).filter(Z=>{const G=bs(Z),oe=bs(E.element);return po(G,oe)}).map(ci)})(l,0,x).getOr(A);return OA(D,A.left,A.top)},xb=(l,m,x,S)=>{const A=JD(nr(l,m));return F.some({point:A,width:x,height:S})},zm=(l,m,x,S,A)=>l.map(D=>{const E=[m,D.point],P=S.fold(()=>KD(E),()=>KD(E),()=>(Ce=>{const Ee=Ct(Ce,IA);return DA(Ee)})(E)),G={x:P.left,y:P.top,width:D.width,height:D.height},oe=x.showAbove?GD():t_(),ce=x.showAbove?Hi():kC(),me=yb(A,x,oe,ce,oe,ce,F.none());return $c({anchorBox:G,bubble:x.bubble.getOr(fb()),overrides:x.overrides,layouts:me})});var DC=[kt("node"),kt("root"),Bn("bubble"),dp(),st("overrides",{}),st("showAbove",!1),Ko("placement",(l,m,x)=>{const S=yl(l,0,m);return m.node.filter(Jr).bind(A=>{const D=A.dom.getBoundingClientRect(),E=xb(D.left,D.top,D.width,D.height),P=m.node.getOr(l.element);return zm(E,S,m,x,P)})})];const s_=(l,m,x,S)=>({start:l,soffset:m,finish:x,foffset:S}),NA=(ur([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),l=>l.fold(Ge,Ge,Ge)),OC=ur([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),jl={domRange:OC.domRange,relative:OC.relative,exact:OC.exact,exactFromRange:l=>OC.exact(l.start,l.soffset,l.finish,l.foffset),getWin:l=>{const m=l.match({domRange:S=>je(S.startContainer),relative:(S,A)=>NA(S),exact:(S,A,D,E)=>S});return am(m)},range:s_},_b=(l,m,x)=>{const S=l.document.createRange();var A,D;return A=S,m.fold(D=>{A.setStartBefore(D.dom)},(D,E)=>{A.setStart(D.dom,E)},D=>{A.setStartAfter(D.dom)}),D=S,x.fold(P=>{D.setEndBefore(P.dom)},(P,B)=>{D.setEnd(P.dom,B)},P=>{D.setEndAfter(P.dom)}),S},RA=(l,m,x,S,A)=>{const D=l.document.createRange();return D.setStart(m.dom,x),D.setEnd(S.dom,A),D},EC=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),ls=ur([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),a0=(l,m,x)=>m(je(x.startContainer),x.startOffset,je(x.endContainer),x.endOffset),La=(l,m)=>{return(x=l,S=m,((D,E)=>{const P=E.ltr();return P.collapsed?E.rtl().filter(B=>!1===B.collapsed).map(B=>ls.rtl(je(B.endContainer),B.endOffset,je(B.startContainer),B.startOffset)).getOrThunk(()=>a0(0,ls.ltr,P)):a0(0,ls.ltr,P)})(0,(D=x,S.match({domRange:P=>({ltr:ae(P),rtl:F.none}),relative:(P,B)=>({ltr:bd(()=>_b(D,P,B)),rtl:bd(()=>F.some(_b(D,B,P)))}),exact:(P,B,H,Z)=>({ltr:bd(()=>RA(D,P,B,H,Z)),rtl:bd(()=>F.some(RA(D,H,Z,P,B)))})})))).match({ltr:(x,S,A,D)=>{const E=l.document.createRange();return E.setStart(x.dom,S),E.setEnd(A.dom,D),E},rtl:(x,S,A,D)=>{const E=l.document.createRange();return E.setStart(A.dom,D),E.setEnd(x.dom,S),E}});var x,S,D},Yc=(l,m,x)=>to(((S,A)=>{const D=U(A)?A:ee;let E=S.dom;const P=[];for(;null!=E.parentNode;){const B=E.parentNode,H=je(B);if(P.push(H),!0===D(H))break;E=B}return P})(l,x),m),Qi=(l,m)=>((x,S)=>{const A=void 0===S?document:S.dom;return li(A)?[]:Ct(A.querySelectorAll(x),je)})(m,l),LA=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),x=l.getRangeAt(l.rangeCount-1);return F.some(s_(je(m.startContainer),m.startOffset,je(x.endContainer),x.endOffset))}return F.none()},YE=l=>{if(null===l.anchorNode||null===l.focusNode)return LA(l);{const m=je(l.anchorNode),x=je(l.focusNode);return((S,A,D,E)=>{const P=((H,Z,G,oe)=>{const ce=bs(H).dom.createRange();return ce.setStart(H.dom,Z),ce.setEnd(G.dom,oe),ce})(S,A,D,E),B=po(S,D)&&A===E;return P.collapsed&&!B})(m,l.anchorOffset,x,l.focusOffset)?F.some(s_(m,l.anchorOffset,x,l.focusOffset)):LA(l)}},NC=(l,m)=>(x=>{const S=x.getClientRects(),A=S.length>0?S[0]:x.getBoundingClientRect();return A.width>0||A.height>0?F.some(A).map(EC):F.none()})(La(l,m)),PA=((l,m)=>{const x=S=>l(S)?F.from(S.dom.nodeValue):F.none();return{get:S=>{if(!l(S))throw new Error("Can only get text value of a text node");return x(S).getOr("")},getOption:x,set:(S,A)=>{if(!l(S))throw new Error("Can only set raw text value of a text node");S.dom.nodeValue=A}}})(Xn),RC=(l,m)=>({element:l,offset:m}),BA=(l,m)=>Xn(l)?RC(l,m):((x,S)=>{const A=Aa(x);if(0===A.length)return RC(x,S);if(S<A.length)return RC(A[S],0);{const D=A[A.length-1],E=Xn(D)?(P=D,PA.get(P)).length:Aa(D).length;return RC(D,E)}var P})(l,m),zA=l=>void 0!==l.foffset,FA=(l,m)=>m.getSelection.getOrThunk(()=>()=>{return(S=l,F.from(S.getSelection())).filter(S=>S.rangeCount>0).bind(YE);var S})().map(x=>{if(zA(x)){const S=BA(x.start,x.soffset),A=BA(x.finish,x.foffset);return jl.range(S.element,S.offset,A.element,A.offset)}return x});var LC=[Bn("getSelection"),kt("root"),Bn("bubble"),dp(),st("overrides",{}),st("showAbove",!1),Ko("placement",(l,m,x)=>{const S=am(m.root).dom,A=yl(l,0,m),D=FA(S,m).bind(P=>{if(zA(P))return(H=S,Z=jl.exactFromRange(P),(G=>{const oe=G.getBoundingClientRect();return oe.width>0||oe.height>0?F.some(oe).map(EC):F.none()})(La(H,Z))).orThunk(()=>{const H=dt("\ufeff");_d(P.start,H);const Z=NC(S,jl.exact(H,0,H,1));return Rl(H),Z}).bind(H=>xb(H.left,H.top,H.width,H.height));var H,Z;{const B=Rn(P,Z=>Z.dom.getBoundingClientRect()),H={left:Math.min(B.firstCell.left,B.lastCell.left),right:Math.max(B.firstCell.right,B.lastCell.right),top:Math.min(B.firstCell.top,B.lastCell.top),bottom:Math.max(B.firstCell.bottom,B.lastCell.bottom)};return xb(H.left,H.top,H.right-H.left,H.bottom-H.top)}}),E=FA(S,m).bind(P=>zA(P)?$n(P.start)?F.some(P.start):tl(P.start):F.some(P.firstCell)).getOr(l.element);return zm(D,A,m,x,E)})];const l_="link-layout",PC=l=>l.x+l.width,BC=(l,m)=>l.x-m.width,c_=(l,m)=>l.y-m.height+l.height,QD=l=>l.y,eg=(l,m,x)=>Oa(PC(l),QD(l),x.southeast(),SC(),"southeast",ia(l,{left:0,top:2}),l_),VA=(l,m,x)=>Oa(BC(l,m),QD(l),x.southwest(),e0(),"southwest",ia(l,{right:1,top:2}),l_),HA=(l,m,x)=>Oa(PC(l),c_(l,m),x.northeast(),J1(),"northeast",ia(l,{left:0,bottom:3}),l_),zC=(l,m,x)=>Oa(BC(l,m),c_(l,m),x.northwest(),Ht(),"northwest",ia(l,{right:1,bottom:3}),l_),up=()=>[eg,VA,HA,zC],WA=()=>[VA,eg,zC,HA];var eO=[kt("item"),dp(),st("overrides",{}),Ko("placement",(l,m,x)=>{const S=Kh(x,m.item.element),A=yb(l.element,m,up(),WA(),up(),WA(),F.none());return F.some($c({anchorBox:S,bubble:fb(),overrides:m.overrides,layouts:A}))})],s0=xr("type",{selection:LC,node:DC,hotspot:AA,submenu:eO,makeshift:ZD});const hp=[sl("classes",io),qu("mode","all",["all","layout","placement"])],tO=[st("useFixed",ee),Bn("getBounds")],tg=[Ls("anchor",s0),Wc("transition",hp)],FC=(l,m,x,S,A,D)=>{const E=nn("placement.info",Et(tg),A),P=E.anchor,B=S.element,H=x.get(S.uid);gb(()=>{Yt(B,"position","fixed");const Z=kr(B,"visibility");Yt(B,"visibility","hidden");const G=m.useFixed()?(()=>{const oe=document.documentElement;return Lm(0,0,oe.clientWidth,oe.clientHeight)})():(oe=>{const ce=ci(oe.element),me=oe.element.dom.getBoundingClientRect();return Rm(ce.left,ce.top,me.width,me.height)})(l);P.placement(l,P,G).each(oe=>{const ce=D.orThunk(()=>m.getBounds.map(Pe)),me=((Ne,Fe,$e,ot,bt,mt,vt,Ot)=>{const an=i0(vt,"maxHeightFunction",mb()),Cn=i0(vt,"maxWidthFunction",de),Gn=Ne.origin;return((l,m,x,S)=>{const A=((D,E,P,B)=>{No(E,"max-height"),No(E,"max-width");const H={width:rs(Z=E),height:mo(Z)};var Z;return((G,oe,ce,me,Te,Ae)=>{const ze=me.width,ke=me.height,Ce=(Ee,Ne,Fe,$e,ot)=>{const mt=((l,m,x,S)=>{const A=l.bubble,D=A.offset,E=((Ee,Ne,Fe)=>{const $e=(Ot,an)=>Ne[Ot].map(Cn=>{const An="top"===Ot||"bottom"===Ot,Gn=An?Fe.top:Fe.left,ko=("left"===Ot||"top"===Ot?Math.max:Math.min)(Cn,an)+Gn;return An?ra(ko,Ee.y,Ee.bottom):ra(ko,Ee.x,Ee.right)}).getOr(an),ot=$e("left",Ee.x),bt=$e("top",Ee.y),mt=$e("right",Ee.right),vt=$e("bottom",Ee.bottom);return Oi(ot,bt,mt-ot,vt-bt)})(S,l.restriction,D),B=l.y+D.top,H=Oi(l.x+D.left,B,m,x),{originInBounds:Z,sizeInBounds:G,visibleW:oe,visibleH:ce}=((Ee,Ne)=>{const{x:Fe,y:$e,right:ot,bottom:bt}=Ne,{x:mt,y:vt,right:Ot,bottom:an,width:Cn,height:An}=Ee;return{originInBounds:mt>=Fe&&mt<=ot&&vt>=$e&&vt<=bt,sizeInBounds:Ot<=ot&&Ot>=Fe&&an<=bt&&an>=$e,visibleW:Math.min(Cn,mt>=Fe?ot-mt:Ot-Fe),visibleH:Math.min(An,vt>=$e?bt-vt:an-$e)}})(H,E),me=Z&&G,Te=me?H:((Ee,Ne)=>{const{x:Fe,y:$e,right:ot,bottom:bt}=Ne,{x:mt,y:vt,width:Ot,height:an}=Ee,Cn=Math.max(Fe,ot-Ot),An=Math.max($e,bt-an),Gn=ra(mt,Fe,Cn),ko=ra(vt,$e,An),ri=Math.min(Gn+Ot,ot)-Gn,ii=Math.min(ko+an,bt)-ko;return Oi(Gn,ko,ri,ii)})(H,E),Ae=Te.width>0&&Te.height>0,{maxWidth:ze,maxHeight:ke}=((Ee,Ne,Fe)=>{const $e=ae(Ne.bottom-Fe.y),ot=ae(Fe.bottom-Ne.y),bt=Ee.fold(Cn=ot,Cn,Gn=$e,Gn,Cn,Gn,An=ot,An),mt=ae(Ne.right-Fe.x),vt=ae(Fe.right-Ne.x);var Cn,An,Gn;return{maxWidth:((an,Cn,An,Gn)=>an.fold(Cn,Gn,Cn,Gn,An,An,Cn,Gn))(Ee,vt,vt,mt),maxHeight:bt}})(l.direction,Te,S),Ce={rect:Te,maxHeight:ke,maxWidth:ze,direction:l.direction,placement:l.placement,classes:{on:A.classesOn,off:A.classesOff},layout:l.label,testY:B};return me||l.alwaysFit?r0.fit(Ce):r0.nofit(Ce,oe,ce,Ae)})(Ee(ce,me,Te,G,Ae),ze,ke,Ae);return mt.fold(ae(mt),(vt,Ot,an,Cn)=>(ot===Cn?an>$e||Ot>Fe:!ot&&Cn)?mt:r0.nofit(Ne,Fe,$e,ot))};return _n(oe,(Ee,Ne)=>{const Fe=Ue(Ce,Ne);return Ee.fold(ae(Ee),Fe)},r0.nofit({rect:ce,maxHeight:me.height,maxWidth:me.width,direction:SC(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:ce.y},-1,-1,!1)).fold(Ge,Ge)})(E,B.preference,D,H,P,B.bounds)})(l,m,x,S);return((D,E,P)=>{const B=TC(P.origin,E);P.transition.each(H=>{((l,m,x,S,A,D)=>{const E=(P=S,B=A,D.exists(Z=>{const G=P.mode;return"all"===G||Z[G]!==B[G]}));var P,B,Z,G;if(E||((P,B)=>((H,Z)=>dn(Z,G=>qa(H,G)))(P,B.classes))(l,S)){Yt(l,"position",x.position);const P=Kh(m,l),B=TC(m,{...A,rect:P}),H=_i($D,Z=>B[Z]);((Z,G)=>{const oe=ce=>parseFloat(ce).toFixed(3);return vs(G,(ce,me)=>!((Te,Ae,ze=Re)=>Ml(Te,Ae,ze).getOr(Te.isNone()&&Ae.isNone()))(Z[me].map(oe),ce.map(oe))).isSome()})(x,H)&&(Vu(l,H),E&&(su(Z=l,(G=S).classes),mi(Z,pb).each(oe=>{clearTimeout(parseInt(oe,10)),tr(Z,pb)}),((oe,ce)=>{const me=Ll(),Te=Ll();let Ae;const ze=Ne=>{var Fe;const $e=null!==(Fe=Ne.raw.pseudoElement)&&void 0!==Fe?Fe:"";return po(Ne.target,oe)&&Al($e)&&nt($D,Ne.raw.propertyName)},ke=Ne=>{if(Y(Ne)||ze(Ne)){me.clear(),Te.clear();const Fe=Ne?.raw.type;(Y(Fe)||Fe===Cd())&&(clearTimeout(Ae),tr(oe,pb),zs(oe,ce.classes))}},Ce=wo(oe,Yy(),Ne=>{ze(Ne)&&(Ce.unbind(),me.set(wo(oe,Cd(),ke)),Te.set(wo(oe,fm(),ke)))}),Ee=(Ne=>{const Fe=mt=>{const vt=Di(Ne,mt).split(/\s*,\s*/);return to(vt,vd)},$e=mt=>{if(Q(mt)&&/^[\d.]+/.test(mt)){const vt=parseFloat(mt);return Ec(mt,"ms")?vt:1e3*vt}return 0},ot=Fe("transition-delay"),bt=Fe("transition-duration");return _n(bt,(mt,vt,Ot)=>{const an=$e(ot[Ot])+$e(vt);return Math.max(mt,an)},0)})(oe);requestAnimationFrame(()=>{Ae=setTimeout(ke,Ee+17),Pn(oe,pb,Ae)})})(Z,G)),Ph(l))}else zs(l,S.classes)})(D,P.origin,B,H,E,P.lastPlacement)}),dC(D,B)})(m,A,S),Pn(m,MC,A.placement),((D,E)=>{const P=E.classes;zs(D,P.off),su(D,P.on)})(m,A),(0,S.maxHeightFunction)(m,A.maxHeight),((D,E,P)=>{(0,P.maxWidthFunction)(D,E.maxWidth)})(m,A,S),{layout:A.layout,placement:A.placement}})(Ne.anchorBox,Fe,$e,{bounds:Xa(Gn,mt),origin:Gn,preference:ot,maxHeightFunction:an,maxWidthFunction:Cn,lastPlacement:bt,transition:Ot})})({anchorBox:(Ae=oe).anchorBox,origin:G},S.element,Ae.bubble,Ae.layouts,H,ce,Ae.overrides,E.transition);var Ae;x.set(S.uid,me)}),Z.fold(()=>{No(B,"visibility")},oe=>{Yt(B,"visibility",oe)}),kr(B,"left").isNone()&&kr(B,"top").isNone()&&kr(B,"right").isNone()&&kr(B,"bottom").isNone()&&Ma(kr(B,"position"),"fixed")&&No(B,"position")},B)};var gp=Object.freeze({__proto__:null,position:(l,m,x,S,A)=>{const D=F.none();FC(l,m,x,S,A,D)},positionWithinBounds:FC,getMode:(l,m,x)=>m.useFixed()?"fixed":"absolute",reset:(l,m,x,S)=>{const A=S.element;Gt(["position","left","right","top","bottom"],D=>No(A,D)),tr(A,MC),x.clear(S.uid)}});const Ca=Mi({fields:tO,name:"positioning",active:n0,apis:gp,state:Object.freeze({__proto__:null,init:()=>{let l={};return cc({readState:()=>l,clear:m=>{W(m)?delete l[m]:l={}},set:(m,x)=>{l[m]=x},get:m=>vn(l,m)})}})}),l0=l=>l.getSystem().isConnected(),c0=l=>{Zn(l,Bs());const m=l.components();Gt(m,c0)},wb=l=>{const m=l.components();Gt(m,wb),Zn(l,hl())},UA=(l,m)=>{l.getSystem().addToWorld(m),Jr(l.element)&&wb(m)},Fm=l=>{c0(l),l.getSystem().removeFromWorld(l)},Vm=(l,m)=>{Qr(l.element,m.element)},nh=(l,m)=>{ng(l,m,Qr)},ng=(l,m,x)=>{l.getSystem().addToWorld(m),x(l.element,m.element),Jr(l.element)&&wb(m),l.syncComponents()},Yr=l=>{c0(l),Rl(l.element),l.getSystem().removeFromWorld(l)},Cs=l=>{const m=Ii(l.element).bind(x=>l.getSystem().getByDom(x).toOptional());Yr(l),m.each(x=>{x.syncComponents()})},VC=l=>{const m=l.components();Gt(m,Yr),Fh(l.element),l.syncComponents()},HC=(l,m)=>{UC(l,m,Qr)},WC=(l,m)=>{UC(l,m,Uy)},UC=(l,m,x)=>{x(l,m.element);const S=Aa(m.element);Gt(S,A=>{m.getByDom(A).each(wb)})},d_=l=>{const m=Aa(l.element);Gt(m,x=>{l.getByDom(x).each(c0)}),Rl(l.element)},Hm=(l,m,x,S)=>{x.get().each(E=>{VC(l)});const A=m.getAttachPoint(l);nh(A,l);const D=l.getSystem().build(S);return nh(l,D),x.set(D),D},Id=(l,m,x,S)=>{const A=Hm(l,m,x,S);return m.onOpen(l,A),A},u_=(l,m,x)=>{x.get().each(S=>{VC(l),Cs(l),m.onClose(l,S),x.clear()})},oh=(l,m,x)=>x.isOpen(),Sb=(l,m,x)=>{const S=m.getAttachPoint(l);var A,E;Yt(l.element,"position",Ca.getMode(S)),E=m.cloakVisibilityAttr,kr((A=l).element,"visibility").fold(()=>{tr(A.element,E)},B=>{Pn(A.element,E,B)}),Yt(A.element,"visibility","hidden")},GC=(l,m,x)=>{var S;S=l.element,Bt(["top","left","right","bottom"],A=>kr(S,A).isSome())||No(l.element,"position"),((S,A,D)=>{mi(S.element,D).fold(()=>No(S.element,A),E=>Yt(S.element,A,E))})(l,"visibility",m.cloakVisibilityAttr)};var Za=Object.freeze({__proto__:null,cloak:Sb,decloak:GC,open:Id,openWhileCloaked:(l,m,x,S,A)=>{Sb(l,m),Id(l,m,x,S),A(),GC(l,m)},close:u_,isOpen:oh,isPartOf:(l,m,x,S)=>oh(0,0,x)&&x.get().exists(A=>m.isPartOf(l,A,S)),getState:(l,m,x)=>x.get(),setContent:(l,m,x,S)=>x.get().map(()=>Hm(l,m,x,S))}),ka=Object.freeze({__proto__:null,events:(l,m)=>gr([xt(au(),(x,S)=>{u_(x,l,m)})])}),GA=[Kn("onOpen"),Kn("onClose"),kt("isPartOf"),kt("getAttachPoint"),st("cloakVisibilityAttr","data-precloak-visibility")],rh=Object.freeze({__proto__:null,init:()=>{const l=ar(),m=ae("not-implemented");return cc({readState:m,isOpen:l.isSet,clear:l.clear,set:l.set,get:l.get})}});const Io=Mi({fields:GA,name:"sandboxing",active:ka,apis:Za,state:rh}),og=ae("dismiss.popups"),ih=ae("reposition.popups"),d0=ae("mouse.released"),h_=fn([st("isExtraPart",ee),Wc("fireEventInstead",[st("event",xm())])]),g_=l=>{const m=nn("Dismissal",h_,l);return{[og()]:{schema:fn([kt("target")]),onReceive:(x,S)=>{Io.isOpen(x)&&(Io.isPartOf(x,S.target)||m.isExtraPart(x,S.target)||m.fireEventInstead.fold(()=>Io.close(x),A=>Zn(x,A.event)))}}}},p_=fn([Wc("fireEventInstead",[st("event",gl())]),Hc("doReposition")]),pp=l=>{const m=nn("Reposition",p_,l);return{[ih()]:{onReceive:x=>{Io.isOpen(x)&&m.fireEventInstead.fold(()=>m.doReposition(x),S=>Zn(x,S.event))}}}},Dd=(l,m,x)=>{m.store.manager.onLoad(l,m,x)},jA=(l,m,x)=>{m.store.manager.onUnload(l,m,x)};var rg=Object.freeze({__proto__:null,onLoad:Dd,onUnload:jA,setValue:(l,m,x,S)=>{m.store.manager.setValue(l,m,x,S)},getValue:(l,m,x)=>m.store.manager.getValue(l,m,x),getState:(l,m,x)=>x}),nO=Object.freeze({__proto__:null,events:(l,m)=>{const x=l.resetOnDom?[qo((S,A)=>{Dd(S,l,m)}),_a((S,A)=>{jA(S,l,m)})]:[wm(l,m,Dd)];return gr(x)}});const bl=()=>{const l=kn(null);return cc({set:l.set,get:l.get,isNotSet:()=>null===l.get(),clear:()=>{l.set(null)},readState:()=>({mode:"memory",value:l.get()})})},ig=()=>{const l=kn({}),m=kn({});return cc({readState:()=>({mode:"dataset",dataByValue:l.get(),dataByText:m.get()}),lookup:x=>vn(l.get(),x).orThunk(()=>vn(m.get(),x)),update:x=>{const S=l.get(),A=m.get(),D={},E={};Gt(x,P=>{D[P.value]=P,vn(P,"meta").each(B=>{vn(B,"text").each(H=>{E[H]=P})})}),l.set({...S,...D}),m.set({...A,...E})},clear:()=>{l.set({}),m.set({})}})};var Od=Object.freeze({__proto__:null,memory:bl,dataset:ig,manual:()=>cc({readState:de}),init:l=>l.store.manager.state(l)});const Wm=(l,m,x,S)=>{const A=m.store;x.update([S]),A.setValue(l,S),m.onSetValue(l,S)};var xl=[Bn("initialValue"),kt("getFallbackEntry"),kt("getDataKey"),kt("setValue"),Ko("manager",{setValue:Wm,getValue:(l,m,x)=>{const S=m.store,A=S.getDataKey(l);return x.lookup(A).getOrThunk(()=>S.getFallbackEntry(A))},onLoad:(l,m,x)=>{m.store.initialValue.each(S=>{Wm(l,m,x,S)})},onUnload:(l,m,x)=>{x.clear()},state:ig})],pc=[kt("getValue"),st("setValue",de),Bn("initialValue"),Ko("manager",{setValue:(l,m,x,S)=>{m.store.setValue(l,S),m.onSetValue(l,S)},getValue:(l,m,x)=>m.store.getValue(l),onLoad:(l,m,x)=>{m.store.initialValue.each(S=>{m.store.setValue(l,S)})},onUnload:de,state:wa.init})],Ws=[Bn("initialValue"),Ko("manager",{setValue:(l,m,x,S)=>{x.set(S),m.onSetValue(l,S)},getValue:(l,m,x)=>x.get(),onLoad:(l,m,x)=>{m.store.initialValue.each(S=>{x.isNotSet()&&x.set(S)})},onUnload:(l,m,x)=>{x.clear()},state:bl})],uu=[Bl("store",{mode:"memory"},xr("mode",{memory:Ws,manual:pc,dataset:xl})),Kn("onSetValue"),st("resetOnDom",!1)];const Qt=Mi({fields:uu,name:"representing",active:nO,apis:rg,extra:{setValueFrom:(l,m)=>{const x=Qt.getValue(m);Qt.setValue(l,x)}},state:Od}),Nr=(l,m)=>Rv(l,{},Ct(m,x=>{return S=x.name(),A="Cannot configure "+x.name()+" for "+l,zi(S,S,{tag:"option",process:{}},ln(D=>ki("The field: "+S+" is forbidden. "+A)));var S,A}).concat([Yi("dump",Ge)])),mp=l=>l.dump,Pa=(l,m)=>({...Pt(m),...l.dump}),Um=Nr,fp=Pa,Cb="placeholder",u0=ur([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Gm=l=>bo(l,"uiType"),jC=(l,m,x,S)=>{return(A=l,E=x,P=S,Gm(E)&&E.uiType===Cb?(Z=E,G=P,(B=A).exists(oe=>oe!==Z.owner)?u0.single(!0,ae(Z)):vn(G,Z.name).fold(()=>{throw new Error("Unknown placeholder component: "+Z.name+"\nKnown: ["+Sn(G)+"]\nNamespace: "+B.getOr("none")+"\nSpec: "+JSON.stringify(Z,null,2))},oe=>oe.replace())):u0.single(!1,ae(E))).fold((A,D)=>{const E=Gm(x)?D(m,x.config,x.validated):D(m),P=vn(E,"components").getOr([]),B=Yn(P,H=>jC(l,m,H,S));return[{...E,components:B}]},(A,D)=>{if(Gm(x)){const E=D(m,x.config,x.validated);return x.validated.preprocess.getOr(Ge)(E)}return D(m)});var A,E,P,B,Z,G},m_=u0.single,f_=u0.multiple,qA=ae(Cb),qC=ur([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Xr=st("factory",{sketch:Ge}),jm=st("schema",[]),kb=kt("name"),vp=zi("pname","pname",Ke(l=>"<alloy."+cn(l.name)+">"),dr()),ag=Yi("schema",()=>[Bn("preprocess")]),h0=st("defaults",ae({})),qm=st("overrides",ae({})),Tb=Et([Xr,jm,kb,vp,h0,qm]),v_=Et([Xr,jm,kb,h0,qm]),Ed=Et([Xr,jm,kb,vp,h0,qm]),$C=Et([Xr,ag,kb,kt("unit"),vp,h0,qm]),yp=l=>l.fold(F.some,F.none,F.some,F.some),ql=l=>{const m=x=>x.name;return l.fold(m,m,m,m)},g0=(l,m)=>x=>{const S=nn("Converting part type",m,x);return l(S)},Ba=g0(qC.required,Tb),Nd=g0(qC.external,v_),Us=g0(qC.optional,Ed),p0=g0(qC.group,$C),y_=ae("entirety");var YC=Object.freeze({__proto__:null,required:Ba,external:Nd,optional:Us,group:p0,asNamedPart:yp,name:ql,asCommon:l=>l.fold(Ge,Ge,Ge,Ge),original:y_});const XC=(l,m,x,S)=>be(m.defaults(l,x,S),x,{uid:l.partUids[m.name]},m.overrides(l,x,S)),b_=(l,m)=>{const x={};return Gt(m,S=>{yp(S).each(A=>{const D=la(l,A.pname);x[A.name]=E=>{const P=nn("Part: "+A.name+" in "+l,Et(A.schema),E);return{...D,config:E,validated:P}}})}),x},la=(l,m)=>({uiType:qA(),owner:l,name:m}),x_=(l,m,x)=>({uiType:qA(),owner:l,name:m,config:x,validated:{}}),m0=l=>Yn(l,m=>m.fold(F.none,F.some,F.none,F.none).map(x=>al(x.name,x.schema.concat([ab(y_())]))).toArray()),ah=l=>Ct(l,ql),Xc=(l,m,x)=>((S,A,D)=>{const E={},P={};return Gt(D,B=>{B.fold(H=>{E[H.pname]=m_(!0,(Z,G,oe)=>H.factory.sketch(XC(Z,H,G,oe)))},H=>{const Z=A.parts[H.name];P[H.name]=ae(H.factory.sketch(XC(A,H,Z[y_()]),Z))},H=>{E[H.pname]=m_(!1,(Z,G,oe)=>H.factory.sketch(XC(Z,H,G,oe)))},H=>{E[H.pname]=f_(!0,(Z,G,oe)=>Ct(Z[H.name],me=>H.factory.sketch(be(H.defaults(Z,me,oe),me,H.overrides(Z,me)))))})}),{internals:ae(E),externals:ae(P)}})(0,m,x),Zc=(l,m,x)=>((S,A,D,E)=>{const P=Rn(E,(H,Z)=>((G,oe)=>{let ce=!1;return{name:ae(G),required:()=>oe.fold((me,Te)=>me,(me,Te)=>me),used:()=>ce,replace:()=>{if(ce)throw new Error("Trying to use the same placeholder more than once: "+G);return ce=!0,oe}}})(Z,H)),B=(H=S,Z=A,oe=P,Yn(D,ce=>jC(H,Z,ce,oe)));var H,Z,oe;return ao(P,H=>{if(!1===H.used()&&H.required())throw new Error("Placeholder: "+H.name()+" was not found in components list\nNamespace: "+S.getOr("none")+"\nComponents: "+JSON.stringify(A.components,null,2))}),B})(F.some(l),m,m.components,x),Vo=(l,m,x)=>{const S=m.partUids[x];return l.getSystem().getByUid(S).toOptional()},sg=(l,m,x)=>Vo(l,m,x).getOrDie("Could not find part: "+x),lg=(l,m,x)=>{const S={},A=m.partUids,D=l.getSystem();return Gt(x,E=>{S[E]=ae(D.getByUid(A[E]))}),S},$m=(l,m)=>{const x=l.getSystem();return Rn(m.partUids,(S,A)=>ae(x.getByUid(S)))},mc=l=>Sn(l.partUids),Ho=(l,m,x)=>{const S={},A=m.partUids,D=l.getSystem();return Gt(x,E=>{S[E]=ae(D.getByUid(A[E]).getOrDie())}),S},ca=(l,m)=>{const x=ah(m);return zl(Ct(x,S=>({key:S,value:l+"-"+S})))},hu=l=>zi("partUids","partUids",At(m=>ca(m.uid,l)),dr());var Mb=Object.freeze({__proto__:null,generate:b_,generateOne:x_,schemas:m0,names:ah,substitutes:Xc,components:Zc,defaultUids:ca,defaultUidsSchema:hu,getAllParts:$m,getAllPartNames:mc,getPart:Vo,getPartOrDie:sg,getParts:lg,getPartsOrDie:Ho});const __=(l,m,x,S,A)=>{const D=(P=A,((E=S).length>0?[al("parts",E)]:[]).concat([kt("uid"),st("dom",{}),st("components",[]),ab("originalSpec"),st("debug.sketcher",{})]).concat(P));var E,P;return nn(l+" [SpecSchema]",fn(D.concat(m)),x)},bp=(l,m,x,S,A)=>{const D=ZC(A),E=m0(x),P=hu(x),B=__(l,m,D,E,[P]),H=Xc(0,B,x);return S(B,Zc(l,B,H.internals()),D,H.externals())},ZC=l=>bo(l,"uid")?l:{...l,uid:Zv("uid")},w_=fn([kt("name"),kt("factory"),kt("configFields"),st("apis",{}),st("extraApis",{})]),KC=fn([kt("name"),kt("factory"),kt("configFields"),kt("partFields"),st("apis",{}),st("extraApis",{})]),$l=l=>{const m=nn("Sketcher for "+l.name,w_,l),x=Rn(m.apis,Gh),S=Rn(m.extraApis,(A,D)=>Gv(A,D));return{name:m.name,configFields:m.configFields,sketch:A=>((D,E,P,B)=>{const H=ZC(B);return P(__(D,E,H,[],[]),H)})(m.name,m.configFields,m.factory,A),...x,...S}},Ka=l=>{const m=nn("Sketcher for "+l.name,KC,l),x=b_(m.name,m.partFields),S=Rn(m.apis,Gh),A=Rn(m.extraApis,(D,E)=>Gv(D,E));return{name:m.name,partFields:m.partFields,configFields:m.configFields,sketch:D=>bp(m.name,m.configFields,m.partFields,m.factory,D),parts:x,...S,...A}},f0=l=>Er("input")(l)&&"radio"!==qi(l,"type")||Er("textarea")(l);var $A=Object.freeze({__proto__:null,getCurrent:(l,m,x)=>m.find(l)});const JC=[kt("find")],So=Mi({fields:JC,name:"composing",apis:$A}),YA=["input","button","textarea","select"],S_=(l,m,x)=>{(m.disabled()?v0:k_)(l,m)},xp=(l,m)=>!0===m.useNative&&nt(YA,Rt(l.element)),C_=l=>{Pn(l.element,"disabled","disabled")},_p=l=>{tr(l.element,"disabled")},Ab=l=>{Pn(l.element,"aria-disabled","true")},oO=l=>{Pn(l.element,"aria-disabled","false")},v0=(l,m,x)=>{m.disableClass.each(S=>{ui(l.element,S)}),(xp(l,m)?C_:Ab)(l),m.onDisabled(l)},k_=(l,m,x)=>{m.disableClass.each(S=>{Vr(l.element,S)}),(xp(l,m)?_p:oO)(l),m.onEnabled(l)},QC=(l,m)=>xp(l,m)?Ol(l.element,"disabled"):"true"===qi(l.element,"aria-disabled");var Ym=Object.freeze({__proto__:null,enable:k_,disable:v0,isDisabled:QC,onLoad:S_,set:(l,m,x,S)=>{(S?v0:k_)(l,m)}}),Xm=Object.freeze({__proto__:null,exhibit:(l,m)=>Wl({classes:m.disabled()?m.disableClass.toArray():[]}),events:(l,m)=>gr([Qy(ss(),(x,S)=>QC(x,l)),wm(l,m,S_)])}),rO=[Tr("disabled",ee),st("useNative",!0),Bn("disableClass"),Kn("onDisabled"),Kn("onEnabled")];const Nn=Mi({fields:rO,name:"disabling",active:Xm,apis:Ym}),T_=(l,m,x,S)=>{const A=Qi(l.element,"."+m.highlightClass);Gt(A,D=>{Bt(S,E=>po(E.element,D))||(Vr(D,m.highlightClass),l.getSystem().getByDom(D).each(E=>{m.onDehighlight(l,E),Zn(E,Ky())}))})},y0=(l,m,x,S)=>{T_(l,m,0,[S]),ek(l,m,x,S)||(ui(S.element,m.highlightClass),m.onHighlight(l,S),Zn(S,W1()))},ek=(l,m,x,S)=>qa(S.element,m.highlightClass),M_=(l,m,x)=>$r(l.element,"."+m.itemClass).bind(S=>l.getSystem().getByDom(S).toOptional()),Ib=(l,m,x)=>{const S=Qi(l.element,"."+m.itemClass);return(S.length>0?F.some(S[S.length-1]):F.none()).bind(A=>l.getSystem().getByDom(A).toOptional())},ks=(l,m,x,S)=>{const A=Qi(l.element,"."+m.itemClass);return Qe(A,D=>qa(D,m.highlightClass)).bind(D=>{const E=Am(D,S,0,A.length-1);return l.getSystem().getByDom(A[E]).toOptional()})},Kt=(l,m,x)=>{const S=Qi(l.element,"."+m.itemClass);return pa(Ct(S,A=>l.getSystem().getByDom(A).toOptional()))};var Xo=Object.freeze({__proto__:null,dehighlightAll:(l,m,x)=>T_(l,m,0,[]),dehighlight:(l,m,x,S)=>{ek(l,m,x,S)&&(Vr(S.element,m.highlightClass),m.onDehighlight(l,S),Zn(S,Ky()))},highlight:y0,highlightFirst:(l,m,x)=>{M_(l,m).each(S=>{y0(l,m,x,S)})},highlightLast:(l,m,x)=>{Ib(l,m).each(S=>{y0(l,m,x,S)})},highlightAt:(l,m,x,S)=>{((A,D,E,P)=>{const B=Qi(A.element,"."+D.itemClass);return F.from(B[P]).fold(()=>so.error(new Error("No element found with index "+P)),A.getSystem().getByDom)})(l,m,0,S).fold(A=>{throw A},A=>{y0(l,m,x,A)})},highlightBy:(l,m,x,S)=>{const A=Kt(l,m);hn(A,S).each(D=>{y0(l,m,x,D)})},isHighlighted:ek,getHighlighted:(l,m,x)=>$r(l.element,"."+m.highlightClass).bind(S=>l.getSystem().getByDom(S).toOptional()),getFirst:M_,getLast:Ib,getPrevious:(l,m,x)=>ks(l,m,0,-1),getNext:(l,m,x)=>ks(l,m,0,1),getCandidates:Kt}),tk=[kt("highlightClass"),kt("itemClass"),Kn("onHighlight"),Kn("onDehighlight")];const Wn=Mi({fields:tk,name:"highlighting",apis:Xo}),yi=[8],gu=[9],pu=[13],Gs=[27],fr=[32],Zm=[37],Ts=[38],b0=[39],za=[40],A_=(l,m,x)=>{const S=Ao(l.slice(0,m)),A=Ao(l.slice(m+1));return hn(S.concat(A),x)},x0=(l,m,x)=>{const S=Ao(l.slice(0,m));return hn(S,x)},Db=(l,m,x)=>{const S=l.slice(0,m),A=l.slice(m+1);return hn(A.concat(S),x)},nk=(l,m,x)=>{const S=l.slice(m+1);return hn(S,x)},vo=l=>m=>nt(l,m.raw.which),Yl=l=>m=>dn(l,x=>x(m)),sh=l=>!0===l.raw.shiftKey,XE=l=>!0===l.raw.ctrlKey,Ob=ve(sh),Do=(l,m)=>({matches:l,classification:m}),XA=(l,m,x)=>{m.exists(S=>x.exists(A=>po(A,S)))||mn(l,Fv(),{prevFocus:m,newFocus:x})},Eb=()=>{const l=m=>vl(m.element);return{get:l,set:(m,x)=>{const S=l(m);m.getSystem().triggerFocus(x,m.element);const A=l(m);XA(m,S,A)}}},ZE=()=>{const l=m=>Wn.getHighlighted(m).map(x=>x.element);return{get:l,set:(m,x)=>{const S=l(m);m.getSystem().getByDom(x).fold(de,D=>{Wn.highlight(m,D)});const A=l(m);XA(m,S,A)}}};var Km;!function(l){l.OnFocusMode="onFocus",l.OnEnterOrSpaceMode="onEnterOrSpace",l.OnApiMode="onApi"}(Km||(Km={}));const cg=(l,m,x,S,A)=>{const D=(P,B,H,Z,G)=>{return(oe=H(P,B,Z,G),ce=B.event,hn(oe,me=>me.matches(ce)).map(me=>me.classification)).bind(me=>me(P,B,Z,G));var oe,ce},E={schema:()=>l.concat([st("focusManager",Eb()),Bl("focusInside","onFocus",um(P=>nt(["onFocus","onEnterOrSpace","onApi"],P)?so.value(P):so.error("Invalid value for focusInside"))),Ko("handler",E),Ko("state",m),Ko("sendFocusIn",A)]),processKey:D,toEvents:(P,B)=>{const H=P.focusInside!==Km.OnFocusMode?F.none():A(P).map(G=>xt(Yu(),(oe,ce)=>{G(oe,P,B),ce.stop()})),Z=[xt(sc(),(G,oe)=>{D(G,oe,x,P,B).fold(()=>{((ce,me)=>{const Te=vo(fr.concat(pu))(me.event);P.focusInside===Km.OnEnterOrSpaceMode&&Te&&gm(ce,me)&&A(P).each(Ae=>{Ae(ce,P,B),me.stop()})})(G,oe)},ce=>{oe.stop()})}),xt(zD(),(G,oe)=>{D(G,oe,S,P,B).each(ce=>{oe.stop()})})];return gr(H.toArray().concat(Z))}};return E},Ja=l=>{const m=[Bn("onEscape"),Bn("onEnter"),st("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),st("firstTabstop",0),st("useTabstopAt",Se),Bn("visibilitySelector")].concat([l]),x=(Z,G)=>{const oe=Z.visibilitySelector.bind(ce=>Yh(G,ce)).getOr(G);return Pi(oe)>0},S=(Z,G)=>G.focusManager.get(Z).bind(oe=>Yh(oe,G.selector)),A=(Z,G,oe)=>{((ce,me)=>{const Te=Qi(ce.element,me.selector),Ae=to(Te,ze=>x(me,ze));return F.from(Ae[me.firstTabstop])})(Z,G).each(ce=>{G.focusManager.set(Z,ce)})},D=(Z,G,oe,ce)=>{const me=Qi(Z.element,oe.selector);return S(Z,oe).bind(Te=>Qe(me,Ue(po,Te)).bind(Ae=>{return ze=Z,Ee=oe,ce(me,Ae,Fe=>{return x($e=Ee,ot=Fe)&&$e.useTabstopAt(ot);var $e,ot}).fold(()=>Ee.cyclic?F.some(!0):F.none(),Fe=>(Ee.focusManager.set(ze,Fe),F.some(!0)));var ze,Ee}))},E=(Z,G,oe)=>D(Z,0,oe,oe.cyclic?A_:x0),P=(Z,G,oe)=>D(Z,0,oe,oe.cyclic?Db:nk),B=ae([Do(Yl([sh,vo(gu)]),E),Do(vo(gu),P),Do(Yl([Ob,vo(pu)]),(Z,G,oe)=>oe.onEnter.bind(ce=>ce(Z,G)))]),H=ae([Do(vo(Gs),(Z,G,oe)=>oe.onEscape.bind(ce=>ce(Z,G))),Do(vo(gu),(Z,G,oe)=>S(Z,oe).filter(ce=>!oe.useTabstopAt(ce)).bind(ce=>{return((Te=me=ce,Ii(Te)).bind(Rc).exists(Te=>po(Te,me))?E:P)(Z,G,oe);var me,Te}))]);return cg(m,wa.init,B,H,()=>F.some(A))};var eo=Ja(Yi("cyclic",ee)),I_=Ja(Yi("cyclic",Se));const wp=(l,m,x)=>f0(x)&&vo(fr)(m.event)?F.none():(Wv(l,x,ss()),F.some(!0)),Rd=(l,m)=>F.some(!0),D_=[st("execute",wp),st("useSpace",!1),st("useEnter",!0),st("useControlEnter",!1),st("useDown",!1)],_0=(l,m,x)=>x.execute(l,m,l.element);var ok=cg(D_,wa.init,(l,m,x,S)=>{const A=x.useSpace&&!f0(l.element)?fr:[],E=x.useDown?za:[],P=A.concat(x.useEnter?pu:[]).concat(E);return[Do(vo(P),_0)].concat(x.useControlEnter?[Do(Yl([XE,vo(pu)]),_0)]:[])},(l,m,x,S)=>x.useSpace&&!f0(l.element)?[Do(vo(fr),Rd)]:[],()=>F.none());const rk=()=>{const l=ar();return cc({readState:()=>l.get().map(m=>({numRows:String(m.numRows),numColumns:String(m.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(m,x)=>{l.set({numRows:m,numColumns:x})},getNumRows:()=>l.get().map(m=>m.numRows),getNumColumns:()=>l.get().map(m=>m.numColumns)})};var ik=Object.freeze({__proto__:null,flatgrid:rk,init:l=>l.state(l)});const ZA=l=>(m,x,S,A)=>{const D=l(m.element);return lk(D,m,x,S,A)},w0=(l,m)=>{const x=Hs(l,m);return ZA(x)},ak=(l,m)=>{const x=Hs(m,l);return ZA(x)},sk=l=>(m,x,S,A)=>lk(l,m,x,S,A),lk=(l,m,x,S,A)=>S.focusManager.get(m).bind(D=>l(m.element,D,S,A)).map(D=>(S.focusManager.set(m,D),!0)),S0=sk,ck=sk,O_=sk,Jm=l=>{return!((m=l.dom).offsetWidth<=0&&m.offsetHeight<=0);var m},dk=(l,m,x)=>{const S=Qi(l,x);return A=to(S,Jm),Qe(A,E=>po(E,m)).map(E=>({index:E,candidates:A}));var A},dg=(l,m)=>Qe(l,x=>po(m,x)),Nb=(l,m,x,S)=>S(Math.floor(m/x),m%x).bind(A=>{const D=A.row*x+A.column;return D>=0&&D<l.length?F.some(l[D]):F.none()}),ug=(l,m,x,S,A)=>Nb(l,m,S,(D,E)=>{const B=Am(E,A,0,(D===x-1?l.length-D*S:S)-1);return F.some({row:D,column:B})}),Fa=(l,m,x,S,A)=>Nb(l,m,S,(D,E)=>{const P=Am(D,A,0,x-1),H=ra(E,0,(P===x-1?l.length-P*S:S)-1);return F.some({row:P,column:H})}),Sp=[kt("selector"),st("execute",wp),Ss("onEscape"),st("captureTab",!1),hC()],KA=(l,m,x)=>{$r(l.element,m.selector).each(S=>{m.focusManager.set(l,S)})},Rb=l=>(m,x,S,A)=>dk(m,x,S.selector).bind(D=>l(D.candidates,D.index,A.getNumRows().getOr(S.initSize.numRows),A.getNumColumns().getOr(S.initSize.numColumns))),uk=(l,m,x)=>x.captureTab?F.some(!0):F.none(),E_=Rb((l,m,x,S)=>ug(l,m,x,S,-1)),hk=Rb((l,m,x,S)=>ug(l,m,x,S,1)),JA=Rb((l,m,x,S)=>Fa(l,m,x,S,-1)),QA=Rb((l,m,x,S)=>Fa(l,m,x,S,1)),iO=ae([Do(vo(Zm),w0(E_,hk)),Do(vo(b0),ak(E_,hk)),Do(vo(Ts),S0(JA)),Do(vo(za),ck(QA)),Do(Yl([sh,vo(gu)]),uk),Do(Yl([Ob,vo(gu)]),uk),Do(vo(fr.concat(pu)),(l,m,x,S)=>{return(A=l,D=x,D.focusManager.get(A).bind(E=>Yh(E,D.selector))).bind(A=>x.execute(l,m,A));var A,D})]),aO=ae([Do(vo(Gs),(l,m,x)=>x.onEscape(l,m)),Do(vo(fr),Rd)]);var Cp=cg(Sp,rk,iO,aO,()=>F.some(KA));const Ld=(l,m,x,S,A)=>{const D=(E,P,B)=>A(E,P,S,0,B.length-1,B[P],H=>{return"button"===Rt(Z=B[H])&&"disabled"===qi(Z,"disabled")?D(E,H,B):F.from(B[H]);var Z});return dk(l,x,m).bind(E=>{const P=E.index;return D(P,P,E.candidates)})},N_=(l,m,x,S)=>Ld(l,m,x,S,(A,D,E,P,B,H,Z)=>{const G=ra(D+E,P,B);return G===A?F.from(H):Z(G)}),js=(l,m,x,S)=>Ld(l,m,x,S,(A,D,E,P,B,H,Z)=>{const G=Am(D,E,P,B);return G===A?F.none():Z(G)}),Qm=[kt("selector"),st("getInitial",F.none),st("execute",wp),Ss("onEscape"),st("executeOnMove",!1),st("allowVertical",!0),st("allowHorizontal",!0),st("cycles",!0)],C0=(l,m,x)=>{return(S=l,A=x,A.focusManager.get(S).bind(D=>Yh(D,A.selector))).bind(S=>x.execute(l,m,S));var S,A},gk=(l,m,x)=>{m.getInitial(l).orThunk(()=>$r(l.element,m.selector)).each(S=>{m.focusManager.set(l,S)})},k0=(l,m,x)=>(x.cycles?js:N_)(l,x.selector,m,-1),R_=(l,m,x)=>(x.cycles?js:N_)(l,x.selector,m,1),e2=l=>(m,x,S,A)=>l(m,x,S,A).bind(()=>S.executeOnMove?C0(m,x,S):F.some(!0)),sO=ae([Do(vo(fr),Rd),Do(vo(Gs),(l,m,x)=>x.onEscape(l,m))]);var lO=cg(Qm,wa.init,(l,m,x,S)=>{const A=[...x.allowHorizontal?Zm:[]].concat(x.allowVertical?Ts:[]),D=[...x.allowHorizontal?b0:[]].concat(x.allowVertical?za:[]);return[Do(vo(A),e2(w0(k0,R_))),Do(vo(D),e2(ak(k0,R_))),Do(vo(pu),C0),Do(vo(fr),C0)]},sO,()=>F.some(gk));const ef=(l,m,x)=>F.from(l[m]).bind(S=>F.from(S[x]).map(A=>({rowIndex:m,columnIndex:x,cell:A}))),tf=(l,m,x,S)=>{const D=Am(x,S,0,l[m].length-1);return ef(l,m,D)},pk=(l,m,x,S)=>{const A=Am(x,S,0,l.length-1),E=ra(m,0,l[A].length-1);return ef(l,A,E)},mk=(l,m,x,S)=>{const D=ra(x+S,0,l[m].length-1);return ef(l,m,D)},fk=(l,m,x,S)=>{const A=ra(x+S,0,l.length-1),E=ra(m,0,l[A].length-1);return ef(l,A,E)},t2=[al("selectors",[kt("row"),kt("cell")]),st("cycles",!0),st("previousSelector",F.none),st("execute",wp)],n2=(l,m,x)=>{m.previousSelector(l).orThunk(()=>$r(l.element,m.selectors.cell)).each(S=>{m.focusManager.set(l,S)})},da=(l,m)=>(x,S,A)=>{const D=A.cycles?l:m;return Yh(S,A.selectors.row).bind(E=>{const P=Qi(E,A.selectors.cell);return dg(P,S).bind(B=>{const H=Qi(x,A.selectors.row);return dg(H,E).bind(Z=>{const G=(ce=A,Ct(H,me=>Qi(me,ce.selectors.cell)));var ce;return D(G,Z,B).map(oe=>oe.cell)})})})},L_=da((l,m,x)=>tf(l,m,x,-1),(l,m,x)=>mk(l,m,x,-1)),Lb=da((l,m,x)=>tf(l,m,x,1),(l,m,x)=>mk(l,m,x,1)),vk=da((l,m,x)=>pk(l,x,m,-1),(l,m,x)=>fk(l,x,m,-1)),nf=da((l,m,x)=>pk(l,x,m,1),(l,m,x)=>fk(l,x,m,1)),KE=ae([Do(vo(Zm),w0(L_,Lb)),Do(vo(b0),ak(L_,Lb)),Do(vo(Ts),S0(vk)),Do(vo(za),ck(nf)),Do(vo(fr.concat(pu)),(l,m,x)=>vl(l.element).bind(S=>x.execute(l,m,S)))]),cO=ae([Do(vo(fr),Rd)]);var _l=cg(t2,wa.init,KE,cO,()=>F.some(n2));const JE=[kt("selector"),st("execute",wp),st("moveOnTab",!1)],Pb=(l,m,x)=>x.focusManager.get(l).bind(S=>x.execute(l,m,S)),lh=(l,m,x)=>{$r(l.element,m.selector).each(S=>{m.focusManager.set(l,S)})},Bb=(l,m,x)=>js(l,x.selector,m,-1),zb=(l,m,x)=>js(l,x.selector,m,1),dO=ae([Do(vo(Ts),O_(Bb)),Do(vo(za),O_(zb)),Do(Yl([sh,vo(gu)]),(l,m,x,S)=>x.moveOnTab?O_(Bb)(l,m,x,S):F.none()),Do(Yl([Ob,vo(gu)]),(l,m,x,S)=>x.moveOnTab?O_(zb)(l,m,x,S):F.none()),Do(vo(pu),Pb),Do(vo(fr),Pb)]),of=ae([Do(vo(fr),Rd)]);var Fb=cg(JE,wa.init,dO,of,()=>F.some(lh));const P_=[Ss("onSpace"),Ss("onEnter"),Ss("onShiftEnter"),Ss("onLeft"),Ss("onRight"),Ss("onTab"),Ss("onShiftTab"),Ss("onUp"),Ss("onDown"),Ss("onEscape"),st("stopSpaceKeyup",!1),Bn("focusIn")];var yk=cg(P_,wa.init,(l,m,x)=>[Do(vo(fr),x.onSpace),Do(Yl([Ob,vo(pu)]),x.onEnter),Do(Yl([sh,vo(pu)]),x.onShiftEnter),Do(Yl([sh,vo(gu)]),x.onShiftTab),Do(Yl([Ob,vo(gu)]),x.onTab),Do(vo(Ts),x.onUp),Do(vo(za),x.onDown),Do(vo(Zm),x.onLeft),Do(vo(b0),x.onRight),Do(vo(fr),x.onSpace)],(l,m,x)=>[...x.stopSpaceKeyup?[Do(vo(fr),Rd)]:[],Do(vo(Gs),x.onEscape)],l=>l.focusIn);const o2=eo.schema(),uO=I_.schema(),rf=lO.schema(),hO=Cp.schema(),gO=_l.schema(),QE=ok.schema(),pO=Fb.schema(),mO=yk.schema(),bn=nb({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:o2,cyclic:uO,flow:rf,flatgrid:hO,matrix:gO,execution:QE,menu:pO,special:mO}),name:"keying",active:{events:(l,m)=>l.handler.toEvents(l,m)},apis:{focusIn:(l,m,x)=>{m.sendFocusIn(m).fold(()=>{l.getSystem().triggerFocus(l.element,l.element)},S=>{S(l,m,x)})},setGridSize:(l,m,x,S,A)=>{Br(x,"setGridSize")?x.setGridSize(S,A):console.error("Layout does not support setGridSize")}},state:ik}),r2=(l,m)=>{gb(()=>{((x,S,A)=>{const D=x.components();var B;Gt((B=x).components(),H=>Rl(H.element)),Fh(B.element),B.syncComponents();const E=Ct(m,l.getSystem().build),P=Oo(D,E);Gt(P,B=>{c0(B),x.getSystem().removeFromWorld(B)}),Gt(E,B=>{l0(B)?Vm(x,B):(x.getSystem().addToWorld(B),Vm(x,B),Jr(x.element)&&wb(B))}),x.syncComponents()})(l)},l.element)},i2=(l,m)=>{gb(()=>{((x,S,A)=>{const D=x.components(),E=Yn(S,H=>sp(H).toArray());Gt(D,H=>{nt(E,H)||Fm(H)});const P=(H=l.element,Z=m,G=l.getSystem().buildOrPatch,yC(H,Z,(oe,ce)=>X1(H,ce,oe,G))),B=Oo(D,P);var H,Z,G;Gt(B,H=>{l0(H)&&Fm(H)}),Gt(P,H=>{l0(H)||UA(x,H)}),x.syncComponents()})(l,m)},l.element)},Kc=(l,m,x,S)=>{Fm(m);const A=X1(l.element,x,S,l.getSystem().buildOrPatch);UA(l,A),l.syncComponents()},af=(l,m,x)=>{const S=l.getSystem().build(x);ng(l,S,m)},fO=(l,m,x,S)=>{Cs(m),af(l,(A,D)=>{return P=D,void zr(E=A,x).fold(()=>{Qr(E,P)},H=>{_d(H,P)});var E,P},S)},B_=(l,m)=>l.components(),z_=(l,m,x,S,A)=>{const D=B_(l);return F.from(D[S]).map(E=>(A.fold(()=>Cs(E),P=>{(m.reuseDom?Kc:fO)(l,E,S,P)}),E))};var kp=Object.freeze({__proto__:null,append:(l,m,x,S)=>{af(l,Qr,S)},prepend:(l,m,x,S)=>{af(l,Gy,S)},remove:(l,m,x,S)=>{const A=B_(l);hn(A,E=>po(S.element,E.element)).each(Cs)},replaceAt:z_,replaceBy:(l,m,x,S,A)=>{const D=B_(l);return Qe(D,S).bind(E=>z_(l,m,0,E,A))},set:(l,m,x,S)=>(m.reuseDom?i2:r2)(l,S),contents:B_});const zn=Mi({fields:[xa("reuseDom",!0)],name:"replacing",apis:kp}),Fn=(l,m)=>({key:l,value:{config:{},me:((S,A)=>{const D=gr(A);return Mi({fields:[kt("enabled")],name:S,active:{events:ae(D)}})})(l,m),configAsRaw:ae({}),initialConfig:{},state:wa}}),F_=(l,m)=>{m.ignore||(hc(l.element),m.onFocus(l))};var Vb=Object.freeze({__proto__:null,focus:F_,blur:(l,m)=>{m.ignore||o0(l.element)},isFocused:l=>hb(l.element)}),eN=Object.freeze({__proto__:null,exhibit:(l,m)=>Wl(m.ignore?{}:{attributes:{tabindex:"-1"}}),events:l=>gr([xt(Yu(),(m,x)=>{F_(m,l),x.stop()})].concat(l.stopMousedown?[xt(cl(),(m,x)=>{x.event.prevent()})]:[]))}),tN=[Kn("onFocus"),st("stopMousedown",!1),st("ignore",!1)];const Dn=Mi({fields:tN,name:"focusing",active:eN,apis:Vb}),hg=(l,m,x,S)=>{const A=x.get();var D,P;x.set(S),D=l,P=x,m.toggleClass.each(B=>{P.get()?ui(D.element,B):Vr(D.element,B)}),((D,E,P)=>{const B=E.aria;B.update(D,B,P.get())})(l,m,x),A!==S&&m.onToggled(l,S)},bk=(l,m,x)=>{hg(l,m,x,!x.get())},V_=(l,m,x)=>{hg(l,m,x,m.selected)};var Tp=Object.freeze({__proto__:null,onLoad:V_,toggle:bk,isOn:(l,m,x)=>x.get(),on:(l,m,x)=>{hg(l,m,x,!0)},off:(l,m,x)=>{hg(l,m,x,!1)},set:hg}),Mp=Object.freeze({__proto__:null,exhibit:()=>Wl({}),events:(l,m)=>{const x=(S=l,A=m,D=bk,Hl(P=>{D(P,S,A)}));var S,A,D;const E=wm(l,m,V_);return gr(uo([l.toggleOnExecute?[x]:[],[E]]))}});const xk=(l,m,x)=>{Pn(l.element,"aria-expanded",x)};var bi=[st("selected",!1),Bn("toggleClass"),st("toggleOnExecute",!0),Kn("onToggled"),Bl("aria",{mode:"none"},xr("mode",{pressed:[st("syncWithExpanded",!1),Ko("update",(l,m,x)=>{Pn(l.element,"aria-pressed",x),m.syncWithExpanded&&xk(l,0,x)})],checked:[Ko("update",(l,m,x)=>{Pn(l.element,"aria-checked",x)})],expanded:[Ko("update",xk)],selected:[Ko("update",(l,m,x)=>{Pn(l.element,"aria-selected",x)})],none:[Ko("update",de)]}))];const Qn=Mi({fields:bi,name:"toggling",active:Mp,apis:Tp,state:{init:()=>{const l=kn(!1);return{get:()=>l.get(),set:m=>l.set(m),clear:()=>l.set(!1),readState:()=>l.get()}}}}),a2=()=>{const l=(m,x)=>{x.stop(),Vl(m)};return[xt(mm(),l),xt(Xy(),l),di(Fl()),di(cl())]},Hb=l=>gr(uo([l.map(m=>Hl((x,S)=>{m(x),S.stop()})).toArray(),a2()])),_k="alloy.item-hover",T0="alloy.item-focus",gg="alloy.item-toggled",mu=l=>{(vl(l.element).isNone()||Dn.isFocused(l))&&(Dn.isFocused(l)||Dn.focus(l),mn(l,_k,{item:l}))},vO=l=>{mn(l,T0,{item:l})},wk=ae(_k),Sk=ae(T0),s2=ae(gg),Ck=l=>l.role.fold(()=>l.toggling.map(m=>m.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Ge),yO=[kt("data"),kt("components"),kt("dom"),st("hasSubmenu",!1),Bn("toggling"),Bn("role"),Um("itemBehaviours",[Qn,Dn,bn,Qt]),st("ignoreFocus",!1),st("domModification",{}),Ko("builder",l=>({dom:l.dom,domModification:{...l.domModification,attributes:{role:Ck(l),...l.domModification.attributes,"aria-haspopup":l.hasSubmenu,...l.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:fp(l.itemBehaviours,[l.toggling.fold(Qn.revoke,m=>{return Qn.config((x=m,S=l.role.exists(x=>"option"===x),{aria:{mode:S?"selected":"checked"},...Ds(x,(A,D)=>"exclusive"!==D),onToggled:(A,D)=>{var E;U(x.onToggled)&&x.onToggled(A,D),mn(E=A,gg,{item:E,state:D})}}));var x,S}),Dn.config({ignore:l.ignoreFocus,stopMousedown:l.ignoreFocus,onFocus:m=>{vO(m)}}),bn.config({mode:"execution"}),Qt.config({store:{mode:"memory",initialValue:l.data}}),Fn("item-type-events",[...a2(),xt(Xi(),mu),xt(V1(),Dn.focus)])]),components:l.components,eventOrder:l.eventOrder})),st("eventOrder",{})],nN=[kt("dom"),kt("components"),Ko("builder",l=>({dom:l.dom,components:l.components,events:gr([Uh(V1())])}))],kk=ae("item-widget"),Ap=ae([Ba({name:"widget",overrides:l=>({behaviours:Pt([Qt.config({store:{mode:"manual",getValue:m=>l.data,setValue:de}})])})})]),M0=[kt("uid"),kt("data"),kt("components"),kt("dom"),st("autofocus",!1),st("ignoreFocus",!1),Um("widgetBehaviours",[Qt,Dn,bn]),st("domModification",{}),hu(Ap()),Ko("builder",l=>{const m=Xc(kk(),l,Ap()),x=Zc(kk(),l,m.internals()),S=D=>Vo(D,l,"widget").map(E=>(bn.focusIn(E),E)),A=(D,E)=>(f0(E.event.target)||l.autofocus&&E.setSource(D.element),F.none());return{dom:l.dom,components:x,domModification:l.domModification,events:gr([Hl((D,E)=>{S(D).each(P=>{E.stop()})}),xt(Xi(),mu),xt(V1(),(D,E)=>{l.autofocus?S(D):Dn.focus(D)})]),behaviours:fp(l.widgetBehaviours,[Qt.config({store:{mode:"memory",initialValue:l.data}}),Dn.config({ignore:l.ignoreFocus,onFocus:D=>{vO(D)}}),bn.config({mode:"special",focusIn:l.autofocus?D=>{S(D)}:Xu(),onLeft:A,onRight:A,onEscape:(D,E)=>Dn.isFocused(D)||l.autofocus?(l.autofocus&&E.setSource(D.element),F.none()):(Dn.focus(D),F.some(!0))})])}})],Tk=xr("type",{widget:M0,item:yO,separator:nN}),Mk=ae([p0({factory:{sketch:l=>{const m=nn("menu.spec item",Tk,l);return m.builder(m)}},name:"items",unit:"item",defaults:(l,m)=>bo(m,"uid")?m:{...m,uid:Zv("item")},overrides:(l,m)=>({type:m.type,ignoreFocus:l.fakeFocus,domModification:{classes:[l.markers.item]}})})]),l2=ae([fo("role"),kt("value"),kt("items"),kt("dom"),kt("components"),st("eventOrder",{}),Nr("menuBehaviours",[Wn,Qt,So,bn]),Bl("movement",{mode:"menu",moveOnTab:!0},xr("mode",{grid:[hC(),Ko("config",(l,m)=>({mode:"flatgrid",selector:"."+l.markers.item,initSize:{numColumns:m.initSize.numColumns,numRows:m.initSize.numRows},focusManager:l.focusManager}))],matrix:[Ko("config",(l,m)=>({mode:"matrix",selectors:{row:m.rowSelector,cell:"."+l.markers.item},previousSelector:m.previousSelector,focusManager:l.focusManager})),kt("rowSelector"),st("previousSelector",F.none)],menu:[st("moveOnTab",!0),Ko("config",(l,m)=>({mode:"menu",selector:"."+l.markers.item,moveOnTab:m.moveOnTab,focusManager:l.focusManager}))]})),Ls("markers",q1()),st("fakeFocus",!1),st("focusManager",Eb()),Kn("onHighlight"),Kn("onDehighlight"),st("showMenuRole",!0)]),H_=ae("alloy.menu-focus"),Pd=Ka({name:"Menu",configFields:l2(),partFields:Mk(),factory:(l,m,x,S)=>({uid:l.uid,dom:l.dom,markers:l.markers,behaviours:Pa(l.menuBehaviours,[Wn.config({highlightClass:l.markers.selectedItem,itemClass:l.markers.item,onHighlight:l.onHighlight,onDehighlight:l.onDehighlight}),Qt.config({store:{mode:"memory",initialValue:l.value}}),So.config({find:F.some}),bn.config(l.movement.config(l,l.movement))]),events:gr([xt(Sk(),(A,D)=>{const E=D.event;A.getSystem().getByDom(E.target).each(P=>{Wn.highlight(A,P),D.stop(),mn(A,H_(),{menu:A,item:P})})}),xt(wk(),(A,D)=>{Wn.highlight(A,D.event.item)}),xt(s2(),(A,D)=>{const{item:E,state:P}=D.event;P&&"menuitemradio"===qi(E.element,"role")&&((B,H)=>{const Z=Qi(B.element,'[role="menuitemradio"][aria-checked="true"]');Gt(Z,G=>{po(G,H.element)||B.getSystem().getByDom(G).each(oe=>{Qn.off(oe)})})})(A,E)})]),components:m,eventOrder:l.eventOrder,...l.showMenuRole?{domModification:{attributes:{role:l.role.getOr("menu")}}}:{}})}),A0=(l,m,x,S)=>vn(x,S).bind(A=>vn(l,A).bind(D=>{const E=A0(l,m,x,D);return F.some([D].concat(E))})).getOr([]),W_=l=>"prepared"===l.type?F.some(l.menu):F.none(),U_=W_,G_=cn("tiered-menu-item-highlight"),Jc=cn("tiered-menu-item-dehighlight");var Ai;!function(l){l[l.HighlightMenuAndItem=0]="HighlightMenuAndItem",l[l.HighlightJustMenu=1]="HighlightJustMenu",l[l.HighlightNone=2]="HighlightNone"}(Ai||(Ai={}));const pg=ae("collapse-item"),fu=$l({name:"TieredMenu",configFields:[ip("onExecute"),ip("onEscape"),Qu("onOpenMenu"),Qu("onOpenSubmenu"),Kn("onRepositionMenu"),Kn("onCollapseMenu"),st("highlightOnOpen",Ai.HighlightMenuAndItem),al("data",[kt("primary"),kt("menus"),kt("expansions")]),st("fakeFocus",!1),Kn("onHighlightItem"),Kn("onDehighlightItem"),Kn("onHover"),Ju(),kt("dom"),st("navigateOnHover",!0),st("stayInDom",!1),Nr("tmenuBehaviours",[bn,Wn,So,zn]),st("eventOrder",{})],apis:{collapseMenu:(l,m)=>{l.collapseMenu(m)},highlightPrimary:(l,m)=>{l.highlightPrimary(m)},repositionMenus:(l,m)=>{l.repositionMenus(m)}},factory:(l,m)=>{const x=ar(),S=(()=>{const l=kn({}),m=kn({}),x=kn({}),S=ar(),A=kn({}),D=B=>E(B).bind(W_),E=B=>vn(m.get(),B),P=B=>vn(l.get(),B);return{setMenuBuilt:(B,H)=>{m.set({...m.get(),[B]:{type:"prepared",menu:H}})},setContents:(B,H,Z,G)=>{S.set(B),l.set(Z),m.set(H),A.set(G);const oe=((ce,me)=>{const Te={};ao(ce,(Ce,Ee)=>{Gt(Ce,Ne=>{Te[Ne]=Ee})});const Ae=me,ze=wi(me,(Ce,Ee)=>({k:Ce,v:Ee})),ke=Rn(ze,(Ce,Ee)=>[Ee].concat(A0(Te,Ae,ze,Ee)));return Rn(Te,Ce=>vn(ke,Ce).getOr([Ce]))})(G,Z);x.set(oe)},expand:B=>vn(l.get(),B).map(H=>{const Z=vn(x.get(),B).getOr([]);return[H].concat(Z)}),refresh:B=>vn(x.get(),B),collapse:B=>vn(x.get(),B).bind(H=>H.length>1?F.some(H.slice(1)):F.none()),lookupMenu:E,lookupItem:P,otherMenus:B=>{const H=A.get();return Oo(Sn(H),B)},getPrimary:()=>S.get().bind(D),getMenus:()=>m.get(),clear:()=>{l.set({}),m.set({}),x.set({}),S.clear()},isClear:()=>S.get().isNone(),getTriggeringPath:(B,H)=>{const Z=to(P(B).toArray(),G=>D(G).isSome());return vn(x.get(),B).bind(G=>{const oe=Ao(Z.concat(G));return(ce=>{const me=[];for(let Te=0;Te<ce.length;Te++){const Ae=ce[Te];if(!Ae.isSome())return F.none();me.push(Ae.getOrDie())}return F.some(me)})(Yn(oe,(ce,me)=>{return(Te=ce,Ae=H,ze=oe.slice(0,me+1),D(Te).bind(ke=>{return(Ce=Te,vs(l.get(),(Ee,Ne)=>Ee===Ce)).bind(Ce=>Ae(Ce).map(Ee=>({triggeredMenu:ke,triggeringItem:Ee,triggeringPath:ze})));var Ce})).fold(()=>Ma(S.get(),ce)?[]:[F.none()],Te=>[F.some(Te)]);var Te,Ae,ze}))})}}})(),A=Ce=>Qt.getValue(Ce).value,E=Wn.highlight,P=(Ce,Ee)=>{E(Ce,Ee),Wn.getHighlighted(Ee).orThunk(()=>Wn.getFirst(Ee)).each(Ne=>{l.fakeFocus?Wn.highlight(Ee,Ne):Wv(Ce,Ne.element,V1())})},B=(Ce,Ee)=>pa(Ct(Ee,Ne=>Ce.lookupMenu(Ne).bind(Fe=>"prepared"===Fe.type?F.some(Fe.menu):F.none()))),H=(Ce,Ee,Ne)=>{const Fe=B(Ee,Ee.otherMenus(Ne));Gt(Fe,$e=>{zs($e.element,[l.markers.backgroundMenu]),l.stayInDom||zn.remove(Ce,$e)})},Z=(Ce,Ee)=>{const Ne=(Fe=Ce,x.get().getOrThunk(()=>{const $e={},ot=Qi(Fe.element,`.${l.markers.item}`),bt=to(ot,mt=>"true"===qi(mt,"aria-haspopup"));return Gt(bt,mt=>{Fe.getSystem().getByDom(mt).each(vt=>{const Ot=A(vt);$e[Ot]=vt})}),x.set($e),$e}));var Fe;ao(Ne,(Fe,$e)=>{const ot=nt(Ee,$e);Pn(Fe.element,"aria-expanded",ot)})},G=(Ce,Ee,Ne)=>F.from(Ne[0]).bind(Fe=>Ee.lookupMenu(Fe).bind($e=>{if("notbuilt"===$e.type)return F.none();{const ot=$e.menu,bt=B(Ee,Ne.slice(1));return Gt(bt,mt=>{ui(mt.element,l.markers.backgroundMenu)}),Jr(ot.element)||zn.append(Ce,fl(ot)),zs(ot.element,[l.markers.backgroundMenu]),P(Ce,ot),H(Ce,Ee,Ne),F.some(ot)}}));let oe;var Ce;(Ce=oe||(oe={}))[Ce.HighlightSubmenu=0]="HighlightSubmenu",Ce[Ce.HighlightParent=1]="HighlightParent";const ce=(Ce,Ee,Ne=oe.HighlightSubmenu)=>{if(Ee.hasConfigured(Nn)&&Nn.isDisabled(Ee))return F.some(Ee);{const Fe=A(Ee);return S.expand(Fe).bind($e=>(Z(Ce,$e),F.from($e[0]).bind(ot=>S.lookupMenu(ot).bind(bt=>{const mt=((vt,Ot,an)=>{if("notbuilt"===an.type){const Cn=vt.getSystem().build(an.nbMenu());return S.setMenuBuilt(Ot,Cn),Cn}return an.menu})(Ce,ot,bt);return Jr(mt.element)||zn.append(Ce,fl(mt)),l.onOpenSubmenu(Ce,Ee,mt,Ao($e)),Ne===oe.HighlightSubmenu?(Wn.highlightFirst(mt),G(Ce,S,$e)):(Wn.dehighlightAll(mt),F.some(Ee))}))))}},me=(Ce,Ee)=>{const Ne=A(Ee);return S.collapse(Ne).bind(Fe=>(Z(Ce,Fe),G(Ce,S,Fe).map($e=>(l.onCollapseMenu(Ce,Ee,$e),$e))))},Te=Ce=>(Ee,Ne)=>Yh(Ne.getSource(),`.${l.markers.item}`).bind(Fe=>Ee.getSystem().getByDom(Fe).toOptional().bind($e=>Ce(Ee,$e).map(Se))),Ae=gr([xt(H_(),(Ce,Ee)=>{S.lookupItem(A(Ee.event.item)).each(()=>{Wn.highlight(Ce,Ee.event.menu);const $e=A(Ee.event.item);S.refresh($e).each(ot=>H(Ce,S,ot))})}),Hl((Ce,Ee)=>{const Ne=Ee.event.target;Ce.getSystem().getByDom(Ne).each(Fe=>{0===A(Fe).indexOf("collapse-item")&&me(Ce,Fe),ce(Ce,Fe,oe.HighlightSubmenu).fold(()=>{l.onExecute(Ce,Fe)},de)})}),qo((Ce,Ee)=>{(Ne=>{const Fe=(ot=Ne,bt=l.data.primary,Rn(l.data.menus,(vt,Ot)=>{const an=()=>Pd.sketch({...vt,value:Ot,markers:l.markers,fakeFocus:l.fakeFocus,onHighlight:(Cn,An)=>{mn(Cn,G_,{menuComp:Cn,itemComp:An})},onDehighlight:(Cn,An)=>{mn(Cn,Jc,{menuComp:Cn,itemComp:An})},focusManager:l.fakeFocus?ZE():Eb()});return Ot===bt?{type:"prepared",menu:ot.getSystem().build(an())}:{type:"notbuilt",nbMenu:an}})),$e=Rn(l.data.menus,(Ee,Ne)=>Yn(Ee.items,Fe=>"separator"===Fe.type?[]:[Fe.data.value]));var ot,bt;return S.setContents(l.data.primary,Fe,l.data.expansions,$e),S.getPrimary()})(Ce).each(Ne=>{zn.append(Ce,fl(Ne)),l.onOpenMenu(Ce,Ne),l.highlightOnOpen===Ai.HighlightMenuAndItem?P(Ce,Ne):l.highlightOnOpen===Ai.HighlightJustMenu&&E(Ce,Ne)})}),xt(G_,(Ce,Ee)=>{l.onHighlightItem(Ce,Ee.event.menuComp,Ee.event.itemComp)}),xt(Jc,(Ce,Ee)=>{l.onDehighlightItem(Ce,Ee.event.menuComp,Ee.event.itemComp)}),...l.navigateOnHover?[xt(wk(),(Ce,Ee)=>{const Ne=Ee.event.item;((Fe,$e)=>{const ot=A($e);S.refresh(ot).bind(bt=>(Z(Fe,bt),G(Fe,S,bt)))})(Ce,Ne),ce(Ce,Ne,oe.HighlightParent),l.onHover(Ce,Ne)})]:[]]),ze=Ce=>Wn.getHighlighted(Ce).bind(Wn.getHighlighted),ke={collapseMenu:Ce=>{ze(Ce).each(Ee=>{me(Ce,Ee)})},highlightPrimary:Ce=>{S.getPrimary().each(Ee=>{P(Ce,Ee)})},repositionMenus:Ce=>{S.getPrimary().bind(Ne=>ze(Ce).bind(Fe=>{const $e=A(Fe),ot=ho(S.getMenus()),bt=pa(Ct(ot,U_));return S.getTriggeringPath($e,mt=>{return an=mt,on(bt,Cn=>{if(!Cn.getSystem().isConnected())return F.none();const An=Wn.getCandidates(Cn);return hn(An,Gn=>A(Gn)===an)});var an})}).map(Fe=>({primary:Ne,triggeringPath:Fe}))).fold(()=>{var Ne;(Ne=Ce,F.from(Ne.components()[0]).filter(Fe=>"menu"===qi(Fe.element,"role"))).each(Ne=>{l.onRepositionMenu(Ce,Ne,[])})},({primary:Ne,triggeringPath:Fe})=>{l.onRepositionMenu(Ce,Ne,Fe)})}};return{uid:l.uid,dom:l.dom,markers:l.markers,behaviours:Pa(l.tmenuBehaviours,[bn.config({mode:"special",onRight:Te((Ce,Ee)=>f0(Ee.element)?F.none():ce(Ce,Ee,oe.HighlightSubmenu)),onLeft:Te((Ce,Ee)=>f0(Ee.element)?F.none():me(Ce,Ee)),onEscape:Te((Ce,Ee)=>me(Ce,Ee).orThunk(()=>l.onEscape(Ce,Ee).map(()=>Ce))),focusIn:(Ce,Ee)=>{S.getPrimary().each(Ne=>{Wv(Ce,Ne.element,V1())})}}),Wn.config({highlightClass:l.markers.selectedMenu,itemClass:l.markers.menu}),So.config({find:Ce=>Wn.getHighlighted(Ce)}),zn.config({})]),eventOrder:l.eventOrder,apis:ke,events:Ae}},extraApis:{tieredData:(l,m,x)=>({primary:l,menus:m,expansions:x}),singleData:(l,m)=>({primary:l,menus:Yg(l,m),expansions:{}}),collapseItem:l=>({value:cn(pg()),meta:{text:l}})}}),_r=$l({name:"InlineView",configFields:[kt("lazySink"),Kn("onShow"),Kn("onHide"),Ps("onEscape"),Nr("inlineBehaviours",[Io,Qt,Vs]),Wc("fireDismissalEventInstead",[st("event",xm())]),Wc("fireRepositionEventInstead",[st("event",gl())]),st("getRelated",F.none),st("isExtraPart",ee),st("eventOrder",F.none)],factory:(l,m)=>{const x=(E,P,B,H)=>{const Z=l.lazySink(E).getOrDie();Io.openWhileCloaked(E,P,()=>Ca.positionWithinBounds(Z,E,B,H())),Qt.setValue(E,F.some({mode:"position",config:B,getBounds:H}))},S=(E,P,B,H)=>{const Z=((G,oe,ce,me,Te)=>{const Ae=()=>G.lazySink(oe),ze="horizontal"===me.type?{layouts:{onLtr:()=>t_(),onRtl:()=>kC()}}:{},ke=Ce=>2===Ce.length?ze:{};return fu.sketch({dom:{tag:"div"},data:me.data,markers:me.menu.markers,highlightOnOpen:me.menu.highlightOnOpen,fakeFocus:me.menu.fakeFocus,onEscape:()=>(Io.close(oe),G.onEscape.map(Ce=>Ce(oe)),F.some(!0)),onExecute:()=>F.some(!0),onOpenMenu:(Ce,Ee)=>{Ca.positionWithinBounds(Ae().getOrDie(),Ee,ce,Te())},onOpenSubmenu:(Ce,Ee,Ne,Fe)=>{const $e=Ae().getOrDie();Ca.position($e,Ne,{anchor:{type:"submenu",item:Ee,...ke(Fe)}})},onRepositionMenu:(Ce,Ee,Ne)=>{const Fe=Ae().getOrDie();Ca.positionWithinBounds(Fe,Ee,ce,Te()),Gt(Ne,$e=>{const ot=ke($e.triggeringPath);Ca.position(Fe,$e.triggeredMenu,{anchor:{type:"submenu",item:$e.triggeringItem,...ot}})})}})})(l,E,P,B,H);Io.open(E,Z),Qt.setValue(E,F.some({mode:"menu",menu:Z}))},A=E=>{Io.isOpen(E)&&Qt.getValue(E).each(P=>{switch(P.mode){case"menu":Io.getState(E).each(fu.repositionMenus);break;case"position":const B=l.lazySink(E).getOrDie();Ca.positionWithinBounds(B,E,P.config,P.getBounds())}})},D={setContent:(E,P)=>{Io.setContent(E,P)},showAt:(E,P,B)=>{x(E,P,B,F.none)},showWithinBounds:x,showMenuAt:(E,P,B)=>{S(E,P,B,F.none)},showMenuWithinBounds:S,hide:E=>{Io.isOpen(E)&&(Qt.setValue(E,F.none()),Io.close(E))},getContent:E=>Io.getState(E),reposition:A,isOpen:Io.isOpen};return{uid:l.uid,dom:l.dom,behaviours:Pa(l.inlineBehaviours,[Io.config({isPartOf:(E,P,B)=>{return Fo(P,B)||(Z=B,l.getRelated(E).exists(G=>Fo(G,Z)));var Z},getAttachPoint:E=>l.lazySink(E).getOrDie(),onOpen:E=>{l.onShow(E)},onClose:E=>{l.onHide(E)}}),Qt.config({store:{mode:"memory",initialValue:F.none()}}),Vs.config({channels:{...g_({isExtraPart:m.isExtraPart,...l.fireDismissalEventInstead.map(E=>({fireEventInstead:{event:E.event}})).getOr({})}),...pp({...l.fireRepositionEventInstead.map(E=>({fireEventInstead:{event:E.event}})).getOr({}),doReposition:A})}})]),eventOrder:l.eventOrder,apis:D}},apis:{showAt:(l,m,x,S)=>{l.showAt(m,x,S)},showWithinBounds:(l,m,x,S,A)=>{l.showWithinBounds(m,x,S,A)},showMenuAt:(l,m,x,S)=>{l.showMenuAt(m,x,S)},showMenuWithinBounds:(l,m,x,S,A)=>{l.showMenuWithinBounds(m,x,S,A)},hide:(l,m)=>{l.hide(m)},isOpen:(l,m)=>l.isOpen(m),getContent:(l,m)=>l.getContent(m),setContent:(l,m,x)=>{l.setContent(m,x)},reposition:(l,m)=>{l.reposition(m)}}});var fc,Wb,Ub=tinymce.util.Tools.resolve("tinymce.util.Delay"),sf=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ak=tinymce.util.Tools.resolve("tinymce.EditorManager"),lf=tinymce.util.Tools.resolve("tinymce.Env");(function(l){l.default="wrap",l.floating="floating",l.sliding="sliding",l.scrolling="scrolling"})(fc||(fc={})),function(l){l.auto="auto",l.top="top",l.bottom="bottom"}(Wb||(Wb={}));const lr=l=>m=>m.options.get(l),vu=l=>m=>F.from(l(m)),Ip=l=>{const m=lf.deviceType.isPhone(),x=lf.deviceType.isTablet()||m,S=l.options.register,A=E=>Q(E)||!1===E,D=E=>Q(E)||K(E);S("skin",{processor:E=>Q(E)||!1===E,default:"oxide"}),S("skin_url",{processor:"string"}),S("height",{processor:D,default:Math.max(l.getElement().offsetHeight,400)}),S("width",{processor:D,default:sf.DOM.getStyle(l.getElement(),"width")}),S("min_height",{processor:"number",default:100}),S("min_width",{processor:"number"}),S("max_height",{processor:"number"}),S("max_width",{processor:"number"}),S("style_formats",{processor:"object[]"}),S("style_formats_merge",{processor:"boolean",default:!1}),S("style_formats_autohide",{processor:"boolean",default:!1}),S("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),S("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),S("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),S("font_size_input_default_unit",{processor:"string",default:"pt"}),S("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),S("content_langs",{processor:"object[]"}),S("removed_menuitems",{processor:"string",default:""}),S("menubar",{processor:E=>Q(E)||$(E),default:!m}),S("menu",{processor:"object",default:{}}),S("toolbar",{processor:E=>$(E)||Q(E)||j(E)?{value:E,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Wt(9,E=>{S("toolbar"+(E+1),{processor:"string"})}),S("toolbar_mode",{processor:"string",default:x?"scrolling":"floating"}),S("toolbar_groups",{processor:"object",default:{}}),S("toolbar_location",{processor:"string",default:Wb.auto}),S("toolbar_persist",{processor:"boolean",default:!1}),S("toolbar_sticky",{processor:"boolean",default:l.inline}),S("toolbar_sticky_offset",{processor:"number",default:0}),S("fixed_toolbar_container",{processor:"string",default:""}),S("fixed_toolbar_container_target",{processor:"object"}),S("ui_mode",{processor:"string",default:"combined"}),S("file_picker_callback",{processor:"function"}),S("file_picker_validator_handler",{processor:"function"}),S("file_picker_types",{processor:"string"}),S("typeahead_urls",{processor:"boolean",default:!0}),S("anchor_top",{processor:A,default:"#top"}),S("anchor_bottom",{processor:A,default:"#bottom"}),S("draggable_modal",{processor:"boolean",default:!1}),S("statusbar",{processor:"boolean",default:!0}),S("elementpath",{processor:"boolean",default:!0}),S("branding",{processor:"boolean",default:!0}),S("promotion",{processor:"boolean",default:!0}),S("resize",{processor:E=>"both"===E||$(E),default:!lf.deviceType.isTouch()}),S("sidebar_show",{processor:"string"}),S("help_accessibility",{processor:"boolean",default:l.hasPlugin("help")}),S("default_font_stack",{processor:"string[]",default:[]})},cf=lr("readonly"),j_=lr("height"),Xl=lr("width"),Ms=vu(lr("min_width")),Ik=vu(lr("min_height")),q_=vu(lr("max_width")),Dk=vu(lr("max_height")),df=vu(lr("style_formats")),I0=lr("style_formats_merge"),$_=lr("style_formats_autohide"),Gb=lr("content_langs"),ch=lr("removed_menuitems"),yu=lr("toolbar_mode"),d2=lr("toolbar_groups"),Dp=lr("toolbar_location"),Ok=lr("fixed_toolbar_container"),u2=lr("fixed_toolbar_container_target"),jb=lr("toolbar_persist"),dh=lr("toolbar_sticky_offset"),cs=lr("menubar"),qb=lr("toolbar"),Ek=lr("file_picker_callback"),Nk=lr("file_picker_validator_handler"),Rk=lr("font_size_input_default_unit"),Lk=lr("file_picker_types"),wl=lr("typeahead_urls"),mg=lr("anchor_top"),h2=lr("anchor_bottom"),Pk=lr("draggable_modal"),Y_=lr("statusbar"),Bk=lr("elementpath"),vc=lr("branding"),g2=lr("resize"),X_=lr("paste_as_text"),p2=lr("sidebar_show"),uf=lr("promotion"),$b=lr("help_accessibility"),Z_=lr("default_font_stack"),Yb=l=>!1===l.options.get("skin"),Xb=l=>!1!==l.options.get("menubar"),D0=l=>{const m=l.options.get("skin_url");if(Yb(l))return m;if(m)return l.documentBaseURI.toAbsolute(m);{const x=l.options.get("skin");return Ak.baseURL+"/skins/ui/"+x}},Qc=l=>F.from(l.options.get("skin_url")),ed=l=>l.options.get("line_height_formats").split(" "),K_=l=>{const m=qb(l),x=Q(m),S=j(m)&&m.length>0;return!O0(l)&&(S||x||!0===m)},Zb=l=>{const m=Wt(9,S=>l.options.get("toolbar"+(S+1))),x=to(m,Q);return go(x.length>0,x)},O0=l=>Zb(l).fold(()=>{const m=qb(l);return le(m,Q)&&m.length>0},Se),Kb=l=>Dp(l)===Wb.bottom,zk=l=>{var m;if(!l.inline)return F.none();const x=null!==(m=Ok(l))&&void 0!==m?m:"";if(x.length>0)return $r(Os(),x);const S=u2(l);return W(S)?F.some(je(S)):F.none()},hf=l=>l.inline&&zk(l).isSome(),J_=l=>zk(l).getOrThunk(()=>Il(Ia(je(l.getElement())))),Fk=l=>l.inline&&!Xb(l)&&!K_(l)&&!O0(l),bu=l=>(l.options.get("toolbar_sticky")||l.inline)&&!hf(l)&&!Fk(l),Op=l=>!hf(l)&&"split"===l.options.get("ui_mode"),Q_=l=>{const m=l.options.get("menu");return Rn(m,x=>({...x,items:x.items}))};var Vk=Object.freeze({__proto__:null,get ToolbarMode(){return fc},get ToolbarLocation(){return Wb},register:Ip,getSkinUrl:D0,getSkinUrlOption:Qc,isReadOnly:cf,isSkinDisabled:Yb,getHeightOption:j_,getWidthOption:Xl,getMinWidthOption:Ms,getMinHeightOption:Ik,getMaxWidthOption:q_,getMaxHeightOption:Dk,getUserStyleFormats:df,shouldMergeStyleFormats:I0,shouldAutoHideStyleFormats:$_,getLineHeightFormats:ed,getContentLanguages:Gb,getRemovedMenuItems:ch,isMenubarEnabled:Xb,isMultipleToolbars:O0,isToolbarEnabled:K_,isToolbarPersist:jb,getMultipleToolbarsOption:Zb,getUiContainer:J_,useFixedContainer:hf,isSplitUiMode:Op,getToolbarMode:yu,isDraggableModal:Pk,isDistractionFree:Fk,isStickyToolbar:bu,getStickyToolbarOffset:dh,getToolbarLocation:Dp,isToolbarLocationBottom:Kb,getToolbarGroups:d2,getMenus:Q_,getMenubar:cs,getToolbar:qb,getFilePickerCallback:Ek,getFilePickerTypes:Lk,useTypeaheadUrls:wl,getAnchorTop:mg,getAnchorBottom:h2,getFilePickerValidatorHandler:Nk,getFontSizeInputDefaultUnit:Rk,useStatusBar:Y_,useElementPath:Bk,promotionEnabled:uf,useBranding:vc,getResize:g2,getPasteAsText:X_,getSidebarShow:p2,useHelpAccessibility:$b,getDefaultFontStack:Z_});const m2=["visible","hidden","clip"],Hk=l=>si(l).length>0&&!nt(m2,l),bO=l=>{if(En(l)){const m=Di(l,"overflow-x"),x=Di(l,"overflow-y");return Hk(m)||Hk(x)}return!1},gf=(l,m)=>Op(l)?((x,S)=>{const A=Yc(S,bO),D=0===A.length?eu(S).map(tc).map(E=>Yc(E,bO)).getOr([]):A;return Tt(D).map(E=>({element:E,others:D.slice(1),isFullscreen:()=>{return(P=x).plugins.fullscreen&&P.plugins.fullscreen.isFullscreen();var P}}))})(l,m):F.none(),xu=l=>{const m=[...Ct(l.others,Fr),$i()];return l.isFullscreen()?$i():(x=Fr(l.element),_n(m,(A,D)=>qg(A,D),x));var x},ua=$l({name:"Button",factory:l=>{const m=Hb(l.action),x=l.dom.tag,S=A=>vn(l.dom,"attributes").bind(D=>vn(D,A));return{uid:l.uid,dom:l.dom,components:l.components,events:m,behaviours:fp(l.buttonBehaviours,[Dn.config({}),bn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:"button"===x?{type:S("type").getOr("button"),...S("role").map(A=>({role:A})).getOr({})}:{role:l.role.getOr(S("role").getOr("button"))}},eventOrder:l.eventOrder}},configFields:[st("uid",void 0),kt("dom"),st("components",[]),Um("buttonBehaviours",[Dn,bn]),Bn("action"),Bn("role"),st("eventOrder",{})]}),uh=l=>{const m=((l,m)=>{const x=document.createElement("div");if(x.innerHTML=l,!x.hasChildNodes()||x.childNodes.length>1){const S="HTML does not have a single root node";throw console.error(S,l),new Error(S)}return Fu(x.childNodes[0])})(l),x=Aa(m),S=_n(void 0!==(E=m).dom.attributes?E.dom.attributes:[],(B,H)=>"class"===H.name?B:{...B,[H.name]:H.value},{}),A=(E=>Array.prototype.slice.call(E.dom.classList,0))(m),D=0===x.length?{}:{innerHtml:Cm(m)};var E;return{tag:Rt(m),classes:A,attributes:S,...D}},Wo=l=>{const m=void 0!==l.uid&&Br(l,"uid")?l.uid:Zv("memento");return{get:x=>x.getSystem().getByUid(m).getOrDie(),getOpt:x=>x.getSystem().getByUid(m).toOptional(),asSpec:()=>({...l,uid:m})}};var Wk=Object.freeze({__proto__:null,exhibit:(l,m)=>Wl({attributes:zl([{key:m.tabAttr,value:"true"}])})}),xO=[st("tabAttr","data-alloy-tabstop")];const cr=Mi({fields:xO,name:"tabstopping",active:Wk}),E0=cn("tooltip.exclusive"),pf=cn("tooltip.show"),mf=cn("tooltip.hide"),ff=cn("tooltip.immediateHide"),N0=cn("tooltip.immediateShow"),ew=(l,m,x)=>{l.getSystem().broadcastOn([E0],{})};var tw=Object.freeze({__proto__:null,hideAllExclusive:ew,immediateOpenClose:(l,m,x,S)=>Zn(l,S?N0:ff),isEnabled:(l,m,x)=>x.isEnabled(),setComponents:(l,m,x,S)=>{x.getTooltip().each(A=>{A.getSystem().isConnected()&&zn.set(A,S)})},setEnabled:(l,m,x,S)=>x.setEnabled(S)}),R0=Object.freeze({__proto__:null,events:(l,m)=>{const x=D=>{m.getTooltip().each(E=>{E.getSystem().isConnected()&&(Cs(E),l.onHide(D,E),m.clearTooltip())}),m.clearTimer()},S=D=>{if(!m.isShowing()&&m.isEnabled()){ew(D);const E=l.lazySink(D).getOrDie(),P=D.getSystem().build({dom:l.tooltipDom,components:l.tooltipComponents,events:gr("normal"===l.mode?[xt(Xi(),B=>{Zn(D,pf)}),xt(Xg(),B=>{Zn(D,mf)})]:[]),behaviours:Pt([zn.config({})])});m.setTooltip(P),nh(E,P),l.onShow(D,P),Ca.position(E,P,{anchor:l.anchor(D)})}},A=D=>{m.getTooltip().each(E=>{const P=l.lazySink(D).getOrDie();Ca.position(P,E,{anchor:l.anchor(D)})})};return gr(uo([[fA(D=>{l.onSetup(D)}),xt(pf,D=>{m.resetTimer(()=>{S(D)},l.delayForShow())}),xt(mf,D=>{m.resetTimer(()=>{x(D)},l.delayForHide())}),xt(N0,D=>{m.resetTimer(()=>{S(D)},0)}),xt(ff,D=>{m.resetTimer(()=>{x(D)},0)}),xt(Pv(),(D,E)=>{E.universal||nt(E.channels,E0)&&x(D)}),_a(D=>{x(D)})],(()=>{switch(l.mode){case"normal":return[xt(dl(),D=>{Zn(D,N0)}),xt(vm(),D=>{Zn(D,ff)}),xt(Xi(),D=>{Zn(D,pf)}),xt(Xg(),D=>{Zn(D,mf)})];case"follow-highlight":return[xt(W1(),(D,E)=>{Zn(D,pf)}),xt(Ky(),D=>{Zn(D,mf)})];case"children-normal":return[xt(dl(),(D,E)=>{vl(D.element).each(P=>{Kr(E.event.target,"[data-mce-tooltip]")&&m.getTooltip().fold(()=>{Zn(D,N0)},B=>{m.isShowing()&&(l.onShow(D,B),A(D))})})}),xt(vm(),D=>{vl(D.element).fold(()=>{Zn(D,ff)},de)}),xt(Xi(),D=>{$r(D.element,"[data-mce-tooltip]:hover").each(E=>{m.getTooltip().fold(()=>{Zn(D,pf)},P=>{m.isShowing()&&(l.onShow(D,P),A(D))})})}),xt(Xg(),D=>{$r(D.element,"[data-mce-tooltip]:hover").fold(()=>{Zn(D,mf)},de)})];default:return[xt(dl(),(D,E)=>{vl(D.element).each(P=>{Kr(E.event.target,"[data-mce-tooltip]")&&m.getTooltip().fold(()=>{Zn(D,N0)},B=>{m.isShowing()&&(l.onShow(D,B),A(D))})})}),xt(vm(),D=>{vl(D.element).fold(()=>{Zn(D,ff)},de)})]}})()]))}}),_u=[kt("lazySink"),kt("tooltipDom"),st("exclusive",!0),st("tooltipComponents",[]),Tr("delayForShow",ae(300)),Tr("delayForHide",ae(300)),Tr("onSetup",de),qu("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),st("anchor",l=>({type:"hotspot",hotspot:l,layouts:{onLtr:ae([Ji,sa,Ki,Na,Vi,Ra]),onRtl:ae([Ji,sa,Ki,Na,Vi,Ra])},bubble:Gl(0,-2,{})})),Kn("onHide"),Kn("onShow")],L0=Object.freeze({__proto__:null,init:()=>{const l=kn(!0),m=ar(),x=ar(),S=()=>{m.on(clearTimeout)},A=ae("not-implemented");return cc({getTooltip:x.get,isShowing:x.isSet,setTooltip:x.set,clearTooltip:x.clear,clearTimer:S,resetTimer:(D,E)=>{S(),m.set(setTimeout(D,E))},readState:A,isEnabled:()=>l.get(),setEnabled:D=>l.set(D)})}});const vr=Mi({fields:_u,name:"tooltipping",active:R0,state:L0,apis:tw}),{entries:f2,setPrototypeOf:nw,isFrozen:ow,getPrototypeOf:Uk,getOwnPropertyDescriptor:v2}=Object;let{freeze:As,seal:Bd,create:Gk}=Object,{apply:jk,construct:qk}=typeof Reflect<"u"&&Reflect;As||(As=function(l){return l}),Bd||(Bd=function(l){return l}),jk||(jk=function(l,m,x){return l.apply(m,x)}),qk||(qk=function(l,m){return new l(...m)});const vf=bc(Array.prototype.forEach),$k=bc(Array.prototype.pop),zd=bc(Array.prototype.push),P0=bc(String.prototype.toLowerCase),rw=bc(String.prototype.toString),fg=bc(String.prototype.match),B0=bc(String.prototype.replace),hh=bc(String.prototype.indexOf),Jb=bc(String.prototype.trim),yc=bc(Object.prototype.hasOwnProperty),Sl=bc(RegExp.prototype.test),z0=(Yk=TypeError,function(){for(var l=arguments.length,m=new Array(l),x=0;x<l;x++)m[x]=arguments[x];return qk(Yk,m)});var Yk;function bc(l){return function(m){for(var x=arguments.length,S=new Array(x>1?x-1:0),A=1;A<x;A++)S[A-1]=arguments[A];return jk(l,m,S)}}function or(l,m){let x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P0;nw&&nw(l,null);let S=m.length;for(;S--;){let A=m[S];if("string"==typeof A){const D=x(A);D!==A&&(ow(m)||(m[S]=D),A=D)}l[A]=!0}return l}function Ep(l){for(let m=0;m<l.length;m++)yc(l,m)||(l[m]=null);return l}function td(l){const m=Gk(null);for(const[x,S]of f2(l))yc(l,x)&&(m[x]=Array.isArray(S)?Ep(S):S&&"object"==typeof S&&S.constructor===Object?td(S):S);return m}function gh(l,m){for(;null!==l;){const x=v2(l,m);if(x){if(x.get)return bc(x.get);if("function"==typeof x.value)return bc(x.value)}l=Uk(l)}return function(){return null}}const yf=As(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),y2=As(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),iw=As(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),aw=As(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Xk=As(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),F0=As(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Zk=As(["#text"]),sw=As(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),bf=As(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Kk=As(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Qb=As(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),b2=Bd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),x2=Bd(/<%[\w\W]*|[\w\W]*%>/gm),Jk=Bd(/\${[\w\W]*}/gm),ex=Bd(/^data-[\-\w.\u00B7-\uFFFF]/),_O=Bd(/^aria-[\-\w]+$/),tx=Bd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),wO=Bd(/^(?:\w+script|data):/i),Qk=Bd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_2=Bd(/^html$/i),w2=Bd(/^[a-z][.\w]*(-[.\w]+)+$/i);var eT=Object.freeze({__proto__:null,MUSTACHE_EXPR:b2,ERB_EXPR:x2,TMPLIT_EXPR:Jk,DATA_ATTR:ex,ARIA_ATTR:_O,IS_ALLOWED_URI:tx,IS_SCRIPT_OR_DATA:wO,ATTR_WHITESPACE:Qk,DOCTYPE_NAME:_2,CUSTOM_ELEMENT:w2});const lw=function(){return typeof window>"u"?null:window};var tT=function l(){let m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lw();const x=ct=>l(ct);if(x.version="3.1.7",x.removed=[],!m||!m.document||9!==m.document.nodeType)return x.isSupported=!1,x;let{document:S}=m;const A=S,D=A.currentScript,{DocumentFragment:E,HTMLTemplateElement:P,Node:B,Element:H,NodeFilter:Z,NamedNodeMap:G=m.NamedNodeMap||m.MozNamedAttrMap,HTMLFormElement:oe,DOMParser:ce,trustedTypes:me}=m,Te=H.prototype,Ae=gh(Te,"cloneNode"),ze=gh(Te,"remove"),ke=gh(Te,"nextSibling"),Ce=gh(Te,"childNodes"),Ee=gh(Te,"parentNode");if("function"==typeof P){const ct=S.createElement("template");ct.content&&ct.content.ownerDocument&&(S=ct.content.ownerDocument)}let Ne,Fe="";const{implementation:$e,createNodeIterator:ot,createDocumentFragment:bt,getElementsByTagName:mt}=S,{importNode:vt}=A;let Ot={};x.isSupported="function"==typeof f2&&"function"==typeof Ee&&$e&&void 0!==$e.createHTMLDocument;const{MUSTACHE_EXPR:an,ERB_EXPR:Cn,TMPLIT_EXPR:An,DATA_ATTR:Gn,ARIA_ATTR:ko,IS_SCRIPT_OR_DATA:ri,ATTR_WHITESPACE:ii,CUSTOM_ELEMENT:Jo}=eT;let{IS_ALLOWED_URI:Lo}=eT,On=null;const Dr=or({},[...yf,...y2,...iw,...Xk,...Zk]);let mr=null;const Tl=or({},[...sw,...bf,...Kk,...Qb]);let Or=Object.seal(Gk(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Wa=null,ns=null,lA=!0,BD=!0,LN=!1,PN=!0,cA=!1,dA=!0,E1=!1,VE=!1,HE=!1,tC=!1,WE=!1,UE=!1,SN=!0,CN=!1,GE=!0,uA=!1,nC={},Uo=null;const hA=or({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Hy=null;const ZR=or({},["audio","video","img","source","image","track"]);let QN=null;const KR=or({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),BN="http://www.w3.org/1998/Math/MathML",zN="http://www.w3.org/2000/svg",oC="http://www.w3.org/1999/xhtml";let jE=oC,eR=!1,tR=null;const hB=or({},[BN,zN,oC],rw);let kN=null;const gB=["application/xhtml+xml","text/html"];let md=null,qE=null;const pB=S.createElement("form"),JR=function(ct){return ct instanceof RegExp||ct instanceof Function},nR=function(){let ct=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!qE||qE!==ct){if(ct&&"object"==typeof ct||(ct={}),ct=td(ct),kN=-1===gB.indexOf(ct.PARSER_MEDIA_TYPE)?"text/html":ct.PARSER_MEDIA_TYPE,md="application/xhtml+xml"===kN?rw:P0,On=yc(ct,"ALLOWED_TAGS")?or({},ct.ALLOWED_TAGS,md):Dr,mr=yc(ct,"ALLOWED_ATTR")?or({},ct.ALLOWED_ATTR,md):Tl,tR=yc(ct,"ALLOWED_NAMESPACES")?or({},ct.ALLOWED_NAMESPACES,rw):hB,QN=yc(ct,"ADD_URI_SAFE_ATTR")?or(td(KR),ct.ADD_URI_SAFE_ATTR,md):KR,Hy=yc(ct,"ADD_DATA_URI_TAGS")?or(td(ZR),ct.ADD_DATA_URI_TAGS,md):ZR,Uo=yc(ct,"FORBID_CONTENTS")?or({},ct.FORBID_CONTENTS,md):hA,Wa=yc(ct,"FORBID_TAGS")?or({},ct.FORBID_TAGS,md):{},ns=yc(ct,"FORBID_ATTR")?or({},ct.FORBID_ATTR,md):{},nC=!!yc(ct,"USE_PROFILES")&&ct.USE_PROFILES,lA=!1!==ct.ALLOW_ARIA_ATTR,BD=!1!==ct.ALLOW_DATA_ATTR,LN=ct.ALLOW_UNKNOWN_PROTOCOLS||!1,PN=!1!==ct.ALLOW_SELF_CLOSE_IN_ATTR,cA=ct.SAFE_FOR_TEMPLATES||!1,dA=!1!==ct.SAFE_FOR_XML,E1=ct.WHOLE_DOCUMENT||!1,tC=ct.RETURN_DOM||!1,WE=ct.RETURN_DOM_FRAGMENT||!1,UE=ct.RETURN_TRUSTED_TYPE||!1,HE=ct.FORCE_BODY||!1,SN=!1!==ct.SANITIZE_DOM,CN=ct.SANITIZE_NAMED_PROPS||!1,GE=!1!==ct.KEEP_CONTENT,uA=ct.IN_PLACE||!1,Lo=ct.ALLOWED_URI_REGEXP||tx,jE=ct.NAMESPACE||oC,Or=ct.CUSTOM_ELEMENT_HANDLING||{},ct.CUSTOM_ELEMENT_HANDLING&&JR(ct.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Or.tagNameCheck=ct.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ct.CUSTOM_ELEMENT_HANDLING&&JR(ct.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Or.attributeNameCheck=ct.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ct.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof ct.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Or.allowCustomizedBuiltInElements=ct.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),cA&&(BD=!1),WE&&(tC=!0),nC&&(On=or({},Zk),mr=[],!0===nC.html&&(or(On,yf),or(mr,sw)),!0===nC.svg&&(or(On,y2),or(mr,bf),or(mr,Qb)),!0===nC.svgFilters&&(or(On,iw),or(mr,bf),or(mr,Qb)),!0===nC.mathMl&&(or(On,Xk),or(mr,Kk),or(mr,Qb))),ct.ADD_TAGS&&(On===Dr&&(On=td(On)),or(On,ct.ADD_TAGS,md)),ct.ADD_ATTR&&(mr===Tl&&(mr=td(mr)),or(mr,ct.ADD_ATTR,md)),ct.ADD_URI_SAFE_ATTR&&or(QN,ct.ADD_URI_SAFE_ATTR,md),ct.FORBID_CONTENTS&&(Uo===hA&&(Uo=td(Uo)),or(Uo,ct.FORBID_CONTENTS,md)),GE&&(On["#text"]=!0),E1&&or(On,["html","head","body"]),On.table&&(or(On,["tbody"]),delete Wa.tbody),ct.TRUSTED_TYPES_POLICY){if("function"!=typeof ct.TRUSTED_TYPES_POLICY.createHTML)throw z0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof ct.TRUSTED_TYPES_POLICY.createScriptURL)throw z0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ne=ct.TRUSTED_TYPES_POLICY,Fe=Ne.createHTML("")}else void 0===Ne&&(Ne=function(yo,jn){if("object"!=typeof yo||"function"!=typeof yo.createPolicy)return null;let ai=null;const Li="data-tt-policy-suffix";jn&&jn.hasAttribute(Li)&&(ai=jn.getAttribute(Li));const Pr="dompurify"+(ai?"#"+ai:"");try{return yo.createPolicy(Pr,{createHTML:Oc=>Oc,createScriptURL:Oc=>Oc})}catch{return console.warn("TrustedTypes policy "+Pr+" could not be created."),null}}(me,D)),null!==Ne&&"string"==typeof Fe&&(Fe=Ne.createHTML(""));As&&As(ct),qE=ct}},QR=or({},["mi","mo","mn","ms","mtext"]),eL=or({},["annotation-xml"]),mB=or({},["title","style","font","a","script"]),tL=or({},[...y2,...iw,...aw]),nL=or({},[...Xk,...F0]),N1=function(ct){zd(x.removed,{element:ct});try{Ee(ct).removeChild(ct)}catch{ze(ct)}},TN=function(ct,yo){try{zd(x.removed,{attribute:yo.getAttributeNode(ct),from:yo})}catch{zd(x.removed,{attribute:null,from:yo})}if(yo.removeAttribute(ct),"is"===ct&&!mr[ct])if(tC||WE)try{N1(yo)}catch{}else try{yo.setAttribute(ct,"")}catch{}},oL=function(ct){let yo=null,jn=null;if(HE)ct="<remove></remove>"+ct;else{const Pr=fg(ct,/^[\r\n\t ]+/);jn=Pr&&Pr[0]}"application/xhtml+xml"===kN&&jE===oC&&(ct='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ct+"</body></html>");const ai=Ne?Ne.createHTML(ct):ct;if(jE===oC)try{yo=(new ce).parseFromString(ai,kN)}catch{}if(!yo||!yo.documentElement){yo=$e.createDocument(jE,"template",null);try{yo.documentElement.innerHTML=eR?Fe:ai}catch{}}const Li=yo.body||yo.documentElement;return ct&&jn&&Li.insertBefore(S.createTextNode(jn),Li.childNodes[0]||null),jE===oC?mt.call(yo,E1?"html":"body")[0]:E1?yo.documentElement:Li},rL=function(ct){return ot.call(ct.ownerDocument||ct,ct,Z.SHOW_ELEMENT|Z.SHOW_COMMENT|Z.SHOW_TEXT|Z.SHOW_PROCESSING_INSTRUCTION|Z.SHOW_CDATA_SECTION,null)},iL=function(ct){return ct instanceof oe&&("string"!=typeof ct.nodeName||"string"!=typeof ct.textContent||"function"!=typeof ct.removeChild||!(ct.attributes instanceof G)||"function"!=typeof ct.removeAttribute||"function"!=typeof ct.setAttribute||"string"!=typeof ct.namespaceURI||"function"!=typeof ct.insertBefore||"function"!=typeof ct.hasChildNodes)},aL=function(ct){return"function"==typeof B&&ct instanceof B},rC=function(ct,yo,jn){Ot[ct]&&vf(Ot[ct],ai=>{ai.call(x,yo,jn,qE)})},sL=function(ct){let yo=null;if(rC("beforeSanitizeElements",ct,null),iL(ct))return N1(ct),!0;const jn=md(ct.nodeName);if(rC("uponSanitizeElement",ct,{tagName:jn,allowedTags:On}),ct.hasChildNodes()&&!aL(ct.firstElementChild)&&Sl(/<[/\w]/g,ct.innerHTML)&&Sl(/<[/\w]/g,ct.textContent)||7===ct.nodeType||dA&&8===ct.nodeType&&Sl(/<[/\w]/g,ct.data))return N1(ct),!0;if(!On[jn]||Wa[jn]){if(!Wa[jn]&&cL(jn)&&(Or.tagNameCheck instanceof RegExp&&Sl(Or.tagNameCheck,jn)||Or.tagNameCheck instanceof Function&&Or.tagNameCheck(jn)))return!1;if(GE&&!Uo[jn]){const ai=Ee(ct)||ct.parentNode,Li=Ce(ct)||ct.childNodes;if(Li&&ai)for(let Pr=Li.length-1;Pr>=0;--Pr){const Oc=Ae(Li[Pr],!0);Oc.__removalCount=(ct.__removalCount||0)+1,ai.insertBefore(Oc,ke(ct))}}return N1(ct),!0}return ct instanceof H&&!function(ai){let Li=Ee(ai);Li&&Li.tagName||(Li={namespaceURI:jE,tagName:"template"});const Pr=P0(ai.tagName),Oc=P0(Li.tagName);return!!tR[ai.namespaceURI]&&(ai.namespaceURI===zN?Li.namespaceURI===oC?"svg"===Pr:Li.namespaceURI===BN?"svg"===Pr&&("annotation-xml"===Oc||QR[Oc]):Boolean(tL[Pr]):ai.namespaceURI===BN?Li.namespaceURI===oC?"math"===Pr:Li.namespaceURI===zN?"math"===Pr&&eL[Oc]:Boolean(nL[Pr]):ai.namespaceURI===oC?!(Li.namespaceURI===zN&&!eL[Oc])&&!(Li.namespaceURI===BN&&!QR[Oc])&&!nL[Pr]&&(mB[Pr]||!tL[Pr]):!("application/xhtml+xml"!==kN||!tR[ai.namespaceURI]))}(ct)?(N1(ct),!0):"noscript"!==jn&&"noembed"!==jn&&"noframes"!==jn||!Sl(/<\/no(script|embed|frames)/i,ct.innerHTML)?(cA&&3===ct.nodeType&&(yo=ct.textContent,vf([an,Cn,An],ai=>{yo=B0(yo,ai," ")}),ct.textContent!==yo&&(zd(x.removed,{element:ct.cloneNode()}),ct.textContent=yo)),rC("afterSanitizeElements",ct,null),!1):(N1(ct),!0)},lL=function(ct,yo,jn){if(SN&&("id"===yo||"name"===yo)&&(jn in S||jn in pB))return!1;if((!BD||ns[yo]||!Sl(Gn,yo))&&(!lA||!Sl(ko,yo)))if(!mr[yo]||ns[yo]){if(!(cL(ct)&&(Or.tagNameCheck instanceof RegExp&&Sl(Or.tagNameCheck,ct)||Or.tagNameCheck instanceof Function&&Or.tagNameCheck(ct))&&(Or.attributeNameCheck instanceof RegExp&&Sl(Or.attributeNameCheck,yo)||Or.attributeNameCheck instanceof Function&&Or.attributeNameCheck(yo))||"is"===yo&&Or.allowCustomizedBuiltInElements&&(Or.tagNameCheck instanceof RegExp&&Sl(Or.tagNameCheck,jn)||Or.tagNameCheck instanceof Function&&Or.tagNameCheck(jn))))return!1}else if(!QN[yo]&&!Sl(Lo,B0(jn,ii,""))&&("src"!==yo&&"xlink:href"!==yo&&"href"!==yo||"script"===ct||0!==hh(jn,"data:")||!Hy[ct])&&(!LN||Sl(ri,B0(jn,ii,"")))&&jn)return!1;return!0},cL=function(ct){return"annotation-xml"!==ct&&fg(ct,Jo)},dL=function(ct){rC("beforeSanitizeAttributes",ct,null);const{attributes:yo}=ct;if(!yo)return;const jn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:mr};let ai=yo.length;for(;ai--;){const Li=yo[ai],{name:Pr,namespaceURI:Oc,value:iC}=Li,R1=md(Pr);let Kd="value"===Pr?iC:Jb(iC);const vB=Kd;if(jn.attrName=R1,jn.attrValue=Kd,jn.keepAttr=!0,jn.forceKeepAttr=void 0,rC("uponSanitizeAttribute",ct,jn),Kd=jn.attrValue,jn.forceKeepAttr)continue;if(!jn.keepAttr){TN(Pr,ct);continue}if(!PN&&Sl(/\/>/i,Kd)){TN(Pr,ct);continue}cA&&vf([an,Cn,An],hL=>{Kd=B0(Kd,hL," ")});const uL=md(ct.nodeName);if(lL(uL,R1,Kd))if(!CN||"id"!==R1&&"name"!==R1||(TN(Pr,ct),Kd="user-content-"+Kd),dA&&Sl(/((--!?|])>)|<\/(style|title)/i,Kd))TN(Pr,ct);else{if(Ne&&"object"==typeof me&&"function"==typeof me.getAttributeType&&!Oc)switch(me.getAttributeType(uL,R1)){case"TrustedHTML":Kd=Ne.createHTML(Kd);break;case"TrustedScriptURL":Kd=Ne.createScriptURL(Kd)}if(Kd!==vB)try{Oc?ct.setAttributeNS(Oc,Pr,Kd):ct.setAttribute(Pr,Kd),iL(ct)?N1(ct):$k(x.removed)}catch{}}else TN(Pr,ct)}rC("afterSanitizeAttributes",ct,null)},fB=function ct(yo){let jn=null;const ai=rL(yo);for(rC("beforeSanitizeShadowDOM",yo,null);jn=ai.nextNode();)rC("uponSanitizeShadowNode",jn,null),sL(jn)||(jn.content instanceof E&&ct(jn.content),dL(jn));rC("afterSanitizeShadowDOM",yo,null)};return x.sanitize=function(ct){let yo=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},jn=null,ai=null,Li=null,Pr=null;if(eR=!ct,eR&&(ct="\x3c!--\x3e"),"string"!=typeof ct&&!aL(ct)){if("function"!=typeof ct.toString)throw z0("toString is not a function");if("string"!=typeof(ct=ct.toString()))throw z0("dirty is not a string, aborting")}if(!x.isSupported)return ct;if(VE||nR(yo),x.removed=[],"string"==typeof ct&&(uA=!1),uA){if(ct.nodeName){const R1=md(ct.nodeName);if(!On[R1]||Wa[R1])throw z0("root node is forbidden and cannot be sanitized in-place")}}else if(ct instanceof B)jn=oL("\x3c!----\x3e"),ai=jn.ownerDocument.importNode(ct,!0),1===ai.nodeType&&"BODY"===ai.nodeName||"HTML"===ai.nodeName?jn=ai:jn.appendChild(ai);else{if(!tC&&!cA&&!E1&&-1===ct.indexOf("<"))return Ne&&UE?Ne.createHTML(ct):ct;if(jn=oL(ct),!jn)return tC?null:UE?Fe:""}jn&&HE&&N1(jn.firstChild);const Oc=rL(uA?ct:jn);for(;Li=Oc.nextNode();)sL(Li)||(Li.content instanceof E&&fB(Li.content),dL(Li));if(uA)return ct;if(tC){if(WE)for(Pr=bt.call(jn.ownerDocument);jn.firstChild;)Pr.appendChild(jn.firstChild);else Pr=jn;return(mr.shadowroot||mr.shadowrootmode)&&(Pr=vt.call(A,Pr,!0)),Pr}let iC=E1?jn.outerHTML:jn.innerHTML;return E1&&On["!doctype"]&&jn.ownerDocument&&jn.ownerDocument.doctype&&jn.ownerDocument.doctype.name&&Sl(_2,jn.ownerDocument.doctype.name)&&(iC="<!DOCTYPE "+jn.ownerDocument.doctype.name+">\n"+iC),cA&&vf([an,Cn,An],R1=>{iC=B0(iC,R1," ")}),Ne&&UE?Ne.createHTML(iC):iC},x.setConfig=function(){nR(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),VE=!0},x.clearConfig=function(){qE=null,VE=!1},x.isValidAttribute=function(ct,yo,jn){qE||nR({});const ai=md(ct),Li=md(yo);return lL(ai,Li,jn)},x.addHook=function(ct,yo){"function"==typeof yo&&(Ot[ct]=Ot[ct]||[],zd(Ot[ct],yo))},x.removeHook=function(ct){if(Ot[ct])return $k(Ot[ct])},x.removeHooks=function(ct){Ot[ct]&&(Ot[ct]=[])},x.removeAllHooks=function(){Ot={}},x}();const cw=l=>tT().sanitize(l);var nd=tinymce.util.Tools.resolve("tinymce.util.I18n");const dw={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},nT="temporary-placeholder",uw=l=>()=>vn(l,nT).getOr("!not found!"),nx=(l,m)=>{const x=l.toLowerCase();if(nd.isRtl()){const S=Ec(A=x,"-rtl")?A:A+"-rtl";return bo(m,S)?S:x}var A;return x},ox=(l,m)=>vn(m,nx(l,m)),oT=(l,m)=>{const x=m();return ox(l,x).getOrThunk(uw(x))},rT=()=>Fn("add-focusable",[qo(l=>{SA(l.element,"svg").each(m=>Pn(m,"focusable","false"))})]),S2=(l,m,x,S)=>{var A,D;const E=(B=m,nd.isRtl()&&bo(dw,B)?["tox-icon--flip"]:[]),P=vn(x,nx(m,x)).or(S).getOrThunk(uw(x));var B;return{dom:{tag:l.tag,attributes:null!==(A=l.attributes)&&void 0!==A?A:{},classes:l.classes.concat(E),innerHtml:P},behaviours:Pt([...null!==(D=l.behaviours)&&void 0!==D?D:[],rT()])}},Zl=(l,m,x,S=F.none())=>S2(m,l,x(),S),C2={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},rx=$l({name:"Notification",factory:l=>{const m=cn("notification-text"),x=Wo({dom:uh(`<p id=${m}>${cw(l.backstageProvider.translate(l.text))}</p>`),behaviours:Pt([zn.config({})])}),S=G=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${G}%`}}}),A=G=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${G}%`}}),D=Wo({dom:{tag:"div",classes:l.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[S(0)]},A(0)],behaviours:Pt([zn.config({})])}),E={updateProgress:(G,oe)=>{G.getSystem().isConnected()&&D.getOpt(G).each(ce=>{zn.set(ce,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[S(oe)]},A(oe)])})},updateText:(G,oe)=>{if(G.getSystem().isConnected()){const ce=x.get(G);zn.set(ce,[Hr(oe)])}}},P=uo([l.icon.toArray(),l.level.toArray(),l.level.bind(G=>F.from(C2[G])).toArray()]),B=Wo(ua.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":l.backstageProvider.translate("Close")}},components:[Zl("close",{tag:"span",classes:["tox-icon"]},l.iconProvider)],buttonBehaviours:Pt([cr.config({}),vr.config({...l.backstageProvider.tooltips.getConfig({tooltipText:l.backstageProvider.translate("Close")})})]),action:G=>{l.onAction(G)}})),Z=[((G,oe,ce)=>{const me=ce(),Te=hn(G,Ae=>bo(me,nx(Ae,me)));return S2({tag:"div",classes:["tox-notification__icon"]},Te.getOr(nT),me,F.none())})(P,0,l.iconProvider),{dom:{tag:"div",classes:["tox-notification__body"]},components:[x.asSpec()],behaviours:Pt([zn.config({})])}];return{uid:l.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":m},classes:l.level.map(G=>["tox-notification","tox-notification--in",`tox-notification--${G}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Pt([cr.config({}),Dn.config({}),bn.config({mode:"special",onEscape:G=>(l.onAction(G),F.some(!0))})]),components:Z.concat(l.progress?[D.asSpec()]:[]).concat([B.asSpec()]),apis:E}},configFields:[Bn("level"),kt("progress"),Bn("icon"),kt("onAction"),kt("text"),kt("iconProvider"),kt("backstageProvider")],apis:{updateProgress:(l,m,x)=>{l.updateProgress(m,x)},updateText:(l,m,x)=>{l.updateText(m,x)}}});var iT;!function(l){l[l.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",l[l.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(iT||(iT={}));var Cl=iT;const ix="tox-menu-nav__js",ax="tox-collection__item",aT="tox-swatch",SO={normal:ix,color:aT},sx="tox-collection__item--enabled",lx="tox-collection__item-icon",ds="tox-collection__item-label",_f="tox-collection__item--active",sT="tox-collection__item-container",lT="tox-collection__item-container--row",hw=l=>vn(SO,l).getOr(ix),k2=l=>"color"===l?"tox-swatches":"tox-menu",Np=l=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:k2(l),tieredMenu:"tox-tiered-menu"}),wu=l=>{const m=Np(l);return{backgroundMenu:m.backgroundMenu,selectedMenu:m.selectedMenu,menu:m.menu,selectedItem:m.selectedItem,item:hw(l)}},Rp=(l,m,x)=>{const S=Np(x);return{tag:"div",classes:uo([[S.menu,`tox-menu-${m}-column`],l?[S.hasIcons]:[]])}},CO=[Pd.parts.items({})],wf=(l,m,x)=>{const S=Np(x);return{dom:{tag:"div",classes:uo([[S.tieredMenu]])},markers:wu(x)}},kO=ae([Bn("data"),st("inputAttributes",{}),st("inputStyles",{}),st("tag","input"),st("inputClasses",[]),Kn("onSetValue"),st("styles",{}),st("eventOrder",{}),Nr("inputBehaviours",[Qt,Dn]),st("selectOnFocus",!0)]),T2=l=>Pt([Dn.config({onFocus:l.selectOnFocus?m=>{const x=m.element,S=ei(x);x.dom.setSelectionRange(0,S.length)}:de})]),xc=l=>({...T2(l),...Pa(l.inputBehaviours,[Qt.config({store:{mode:"manual",...l.data.map(m=>({initialValue:m})).getOr({}),getValue:m=>ei(m.element),setValue:(m,x)=>{ei(m.element)!==x&&jh(m.element,x)}},onSetValue:l.onSetValue})])}),qs=l=>({tag:l.tag,attributes:{type:"text",...l.inputAttributes},styles:l.inputStyles,classes:l.inputClasses}),Fd=$l({name:"Input",configFields:kO(),factory:(l,m)=>({uid:l.uid,dom:qs(l),components:[],behaviours:xc(l),eventOrder:l.eventOrder})}),M2=cn("refetch-trigger-event"),rd=cn("redirect-menu-item-interaction"),pr="tox-menu__searcher",gw=l=>$r(l.element,`.${pr}`).bind(m=>l.getSystem().getByDom(m).toOptional()),Lp=gw,V0=l=>({fetchPattern:Qt.getValue(l),selectionStart:l.element.dom.selectionStart,selectionEnd:l.element.dom.selectionEnd}),A2=l=>{const m=(A,D)=>(D.cut(),F.none()),x=(A,D)=>(mn(A,rd,{interactionEvent:D.event,eventType:D.event.raw.type}),F.some(!0)),S="searcher-events";return{dom:{tag:"div",classes:[ax]},components:[Fd.sketch({inputClasses:[pr,"tox-textfield"],inputAttributes:{...l.placeholder.map(A=>({placeholder:l.i18n(A)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Pt([Fn(S,[xt(Zg(),A=>{Zn(A,M2)}),xt(sc(),(A,D)=>{"Escape"===D.event.raw.key&&D.stop()})]),bn.config({mode:"special",onLeft:m,onRight:m,onSpace:m,onEnter:x,onEscape:x,onUp:x,onDown:x})]),eventOrder:{keydown:[S,bn.name()]}})]}},Sf="tox-collection--results__js",Cf=l=>{var m;return l.dom?{...l,dom:{...l.dom,attributes:{...null!==(m=l.dom.attributes)&&void 0!==m?m:{},id:cn("aria-item-search-result-id"),"aria-selected":"false"}}}:l},H0=(l,m)=>x=>{const S=ue(x,m);return Ct(S,A=>({dom:l,components:A}))},pw=(l,m)=>{const x=[];let S=[];return Gt(l,(A,D)=>{m(A,D)?(S.length>0&&x.push(S),S=[],(bo(A.dom,"innerHtml")||A.components&&A.components.length>0)&&S.push(A)):S.push(A)}),S.length>0&&x.push(S),Ct(x,A=>({dom:{tag:"div",classes:["tox-collection__group"]},components:A}))},mw=(l,m,x)=>Pd.parts.items({preprocess:S=>{const A=Ct(S,x);return"auto"!==l&&l>1?H0({tag:"div",classes:["tox-collection__group"]},l)(A):pw(A,(D,E)=>"separator"===m[E].type)}}),fw=(l,m,x=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===l?["tox-collection--list"]:["tox-collection--grid"])},components:[mw(l,m,Ge)]}),W0=l=>Bt(l,m=>"icon"in m&&void 0!==m.icon),Vd=l=>(console.error(Ei(l)),console.log(l),F.none()),TO=(l,m,x,S,A)=>{const D=(E=x,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Pd.parts.items({preprocess:P=>pw(P,(B,H)=>"separator"===E[H].type)})]});var E;return{value:l,dom:D.dom,components:D.components,items:x}},U0=(l,m,x,S,A)=>{if("color"===A.menuType){const D={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Pd.parts.items({preprocess:"auto"!==(E=S)?H0({tag:"div",classes:["tox-swatches__row"]},E):Ge})]}]};return{value:l,dom:D.dom,components:D.components,items:x}}var E;if("normal"===A.menuType&&"auto"===S){const D=fw(S,x);return{value:l,dom:D.dom,components:D.components,items:x}}if("normal"===A.menuType||"searchable"===A.menuType){const D="searchable"!==A.menuType?fw(S,x):"search-with-field"===A.searchMode.searchMode?((E,P,B)=>{const H=cn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===E?["tox-collection--list"]:["tox-collection--grid"])},components:[A2({i18n:nd.translate,placeholder:B.placeholder}),{dom:{tag:"div",classes:[...1===E?["tox-collection--list"]:["tox-collection--grid"],Sf],attributes:{id:H}},components:[mw(E,P,Cf)]}]}})(S,x,A.searchMode):((E,P,B=!0)=>{const H=cn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Sf].concat(1===E?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:H}},components:[mw(E,P,Cf)]}})(S,x);return{value:l,dom:D.dom,components:D.components,items:x}}if("listpreview"===A.menuType&&"auto"!==S){const D=(E=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Pd.parts.items({preprocess:H0({tag:"div",classes:["tox-collection__group"]},E)})]}))(S);return{value:l,dom:D.dom,components:D.components,items:x}}return{value:l,dom:Rp(m,S,A.menuType),components:CO,items:x}},hi=Mt("type"),cT=Mt("name"),dT=Mt("label"),$s=Mt("text"),MO=Mt("title"),I2=Mt("icon"),vw=Mt("value"),oN=Hc("fetch"),AO=Hc("getSubmenuItems"),kf=Hc("onAction"),IO=Hc("onItemAction"),G0=Tr("onSetup",()=>de),uT=fo("name"),ph=fo("text"),yw=fo("role"),id=fo("icon"),Tf=fo("tooltip"),Rr=fo("label"),Mf=fo("shortcut"),ad=Ps("select"),j0=xa("active",!1),hT=xa("borderless",!1),Kl=xa("enabled",!0),Af=xa("primary",!1),Pp=l=>st("columns",l),cx=st("meta",{}),dx=Tr("onAction",de),If=l=>Ti("type",l),D2=l=>zi("name","name",Ke(()=>cn(`${l}-name`)),io),bw=Et([hi,ph]),DO=Et([If("autocompleteitem"),j0,Kl,cx,vw,ph,id]),ux=[Kl,Tf,id,ph,G0,Ti("context","mode:design")],OO=Et([hi,kf,Mf].concat(ux)),q0=l=>br("toolbarbutton",OO,l),xw=[j0].concat(ux),gT=Et(xw.concat([hi,kf,Mf])),O2=l=>br("ToggleButton",gT,l),_w=[Tr("predicate",ee),qu("scope","node",["node","editor"]),qu("position","selection",["node","selection","line"])],E2=ux.concat([If("contextformbutton"),Af,kf,Yi("original",Ge)]),$0=xw.concat([If("contextformbutton"),Af,kf,Yi("original",Ge)]),hx=ux.concat([If("contextformbutton")]),N2=xw.concat([If("contextformtogglebutton")]),R2=xr("type",{contextformbutton:E2,contextformtogglebutton:$0}),L2=Et([If("contextform"),Tr("initValue",ae("")),Rr,sl("commands",R2),wd("launch",xr("type",{contextformbutton:hx,contextformtogglebutton:N2}))].concat(_w)),rN=Et([If("contexttoolbar"),Mt("items")].concat(_w)),EO=[hi,Mt("src"),fo("alt"),na("classes",[],io)],NO=Et(EO),RO=[hi,$s,uT,na("classes",["tox-collection__item-label"],io)],iN=Et(RO),LO=oo(()=>ru("type",{cardimage:NO,cardtext:iN,cardcontainer:P2})),P2=Et([hi,Ti("direction","horizontal"),Ti("align","left"),Ti("valign","middle"),sl("items",LO)]),Y0=[Kl,ph,yw,Mf,zi("value","value",Ke(()=>cn("menuitem-value")),dr()),cx,Ti("context","mode:design")],gx=Et([hi,Rr,sl("items",LO),G0,dx].concat(Y0)),Df=Et([hi,j0,id].concat(Y0)),_c=[hi,Mt("fancytype"),dx],Su=[st("initData",{})].concat(_c),ww=[Ps("select"),Rv("initData",{},[xa("allowCustomColors",!0),Ti("storageKey","default"),Sd("colors",dr())])].concat(_c),PO=xr("fancytype",{inserttable:Su,colorswatch:ww}),Sw=Et([hi,G0,dx,id].concat(Y0)),Cw=Et([hi,AO,G0,id].concat(Y0)),px=Et([hi,id,j0,G0,kf].concat(Y0)),kw=(l,m,x)=>{const S=Qi(l.element,"."+x);if(S.length>0){const A=Qe(S,D=>{const E=D.dom.getBoundingClientRect().top,P=S[0].dom.getBoundingClientRect().top;return Math.abs(E-P)>m}).getOr(S.length);return F.some({numColumns:A,numRows:Math.ceil(S.length/A)})}return F.none()},mh=l=>{return m=cn("unnamed-events"),Pt([Fn(m,l)]);var m},Tw=l=>Nn.config({disabled:l,disableClass:"tox-collection__item--state-disabled"}),Of=l=>Nn.config({disabled:l}),B2=l=>Nn.config({disabled:l,disableClass:"tox-tbtn--disabled"}),X0=l=>Nn.config({disabled:l,disableClass:"tox-tbtn--disabled",useNative:!1}),wc=(l,m)=>{const x=l.getApi(m);return S=>{S(x)}},sd=(l,m)=>qo(x=>{wc(l,x)(S=>{const A=l.onSetup(S);U(A)&&m.set(A)})}),ni=(l,m)=>_a(x=>wc(l,x)(m.get())),Mw="silver.uistate",Ef=(l,m)=>{const x=l.mainUi.outerContainer.element,S=[l.mainUi.mothership,...l.uiMotherships];"setDisabled"===m&&Gt(S,A=>{A.broadcastOn([og()],{target:x})}),Gt(S,A=>{A.broadcastOn([Mw],m)})},z2=(l,m)=>{l.on("init SwitchMode",x=>{Ef(m,x.type)}),l.on("NodeChange",x=>{l.ui.isEnabled()?Ef(m,x.type):Ef(m,"setDisabled")}),cf(l)&&l.mode.set("readonly")},gi=l=>Vs.config({channels:{[Mw]:{onReceive:(m,x)=>{if("setDisabled"===x||"setEnabled"===x)return void Nn.set(m,"setDisabled"===x);const{contextType:S,shouldDisable:A}=l();("mode"!==S||nt(["switchmode","init"],x))&&Nn.set(m,A)}}}}),F2=(l,m)=>Hl((x,S)=>{wc(l,x)(l.onAction),l.triggersSubmenu||m!==Cl.CLOSE_ON_EXECUTE||(x.getSystem().isConnected()&&Zn(x,au()),S.stop())}),V2={[ss()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Nf=pa,vg=(l,m,x,S)=>{const A=kn(de);return{type:"item",dom:m.dom,components:Nf(m.optComponents),data:l.data,eventOrder:V2,hasSubmenu:l.triggersSubmenu,itemBehaviours:Pt([Fn("item-events",[F2(l,x),sd(l,A),ni(l,A)]),Tw(()=>!l.enabled||S.checkUiComponentContext(l.context).shouldDisable),gi(()=>S.checkUiComponentContext(l.context)),zn.config({})].concat(l.itemBehaviours))}},ld=l=>({value:l.value,meta:{text:l.text.getOr(""),...l.meta}}),Rf=l=>{const m=lf.os.isMacOS()||lf.os.isiOS(),x=m?{alt:"\u2325",ctrl:"\u2303",shift:"\u21e7",meta:"\u2318",access:"\u2303\u2325"}:{meta:"Ctrl",access:"Shift+Alt"},S=l.split("+");return Ct(S,D=>{const E=D.toLowerCase().trim();return bo(x,E)?x[E]:D}).join(m?"":"+")},Bp=(l,m,x=[lx])=>Zl(l,{tag:"div",classes:x},m),H2=l=>({dom:{tag:"div",classes:[ds]},components:[Hr(nd.translate(l))]}),W2=(l,m)=>({dom:{tag:"div",classes:m,innerHtml:l}}),pT=(l,m)=>({dom:{tag:"div",classes:[ds]},components:[{dom:{tag:l.tag,styles:l.styles},components:[Hr(nd.translate(m))]}]}),mx=l=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[Hr(Rf(l))]}),fx=l=>Bp("checkmark",l,["tox-collection__item-checkmark"]),mT=l=>{const m=l.map(x=>({attributes:{id:cn("menu-item"),"aria-label":nd.translate(x)}})).getOr({});return{tag:"div",classes:[ix,ax],...m}},Lf=(l,m,x,S=F.none())=>"color"===l.presets?((A,D,E)=>{const P=A.value,B=A.iconContent.map(Z=>((G,oe,ce)=>{const me=oe();return ox(G,me).or(ce).getOrThunk(uw(me))})(Z,D.icons,E)),H=A.ariaLabel.map(Z=>({"aria-label":D.translate(Z),"data-mce-name":Z})).getOr({});return{dom:(()=>{const Z=aT,G=B.getOr(""),oe={tag:"div",attributes:H,classes:[Z]};return"custom"===P?{...oe,tag:"button",classes:[...oe.classes,"tox-swatches__picker-btn"],innerHtml:G}:"remove"===P?{...oe,classes:[...oe.classes,"tox-swatch--remove"],innerHtml:G}:W(P)?{...oe,attributes:{...oe.attributes,"data-mce-color":P},styles:{"background-color":P},innerHtml:G}:oe})(),optComponents:[]}})(l,m,S):((A,D,E,P)=>{const B={tag:"div",classes:[lx]},H=E?A.iconContent.map(ce=>Zl(ce,B,D.icons,P)).orThunk(()=>F.some({dom:B})):F.none(),Z=A.checkMark,G=F.from(A.meta).fold(()=>H2,ce=>bo(ce,"style")?Ue(pT,ce.style):H2),oe=A.htmlContent.fold(()=>A.textContent.map(G),ce=>F.some(W2(ce,[ds])));return{dom:mT(A.ariaLabel),optComponents:[H,oe,A.shortcutContent.map(mx),Z,A.caret]}})(l,m,x,S),fT=(l,m,x)=>vn(l,"tooltipWorker").map(S=>[vr.config({lazySink:m.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:A=>({type:"submenu",item:A,overrides:{maxHeightFunction:Qh}}),mode:"follow-highlight",onShow:(A,D)=>{S(E=>{vr.setComponents(A,[Eo({element:je(E)})])})}})]).getOrThunk(()=>x.map(S=>[vr.config({...m.providers.tooltips.getConfig({tooltipText:S}),mode:"follow-highlight"})]).getOr([])),Z0=(l,m)=>{const x=(S=nd.translate(l),sf.DOM.encode(S));var S;if(m.length>0){const S=new RegExp(m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return x.replace(S,A=>`<span class="tox-autocompleter-highlight">${A}</span>`)}return x},vT=(l,m)=>Ct(l,x=>{switch(x.type){case"cardcontainer":return D=x,E=vT(x.items,m),{dom:{tag:"div",classes:[sT,"vertical"===D.direction?"tox-collection__item-container--column":lT,"left"===D.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",(()=>{switch(D.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:E};case"cardimage":return((D,E,P)=>({dom:{tag:"img",classes:E,attributes:{src:D,alt:P.getOr("")}}}))(x.src,x.classes,x.alt);case"cardtext":const S=x.name.exists(D=>nt(m.cardText.highlightOn,D)),A=S?F.from(m.cardText.matchText).getOr(""):"";return W2(Z0(x.text,A),x.classes)}var D,E}),vx=b_(kk(),Ap()),yx=l=>({value:zp(l)}),K0=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Cu=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Pf=l=>K0.test(l)||Cu.test(l),zp=l=>Jd(l,"#").toUpperCase(),bx=l=>{const m=l.toString(16);return(1===m.length?"0"+m:m).toUpperCase()},xx=l=>{const m=bx(l.red)+bx(l.green)+bx(l.blue);return yx(m)},Aw=Math.min,Bf=Math.max,zf=Math.round,J0=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Ff=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Fp=(l,m,x,S)=>({red:l,green:m,blue:x,alpha:S}),_x=l=>{const m=parseInt(l,10);return m.toString()===l&&m>=0&&m<=255},Sx=l=>{let m,x,S;const A=(l.hue||0)%360;let D=l.saturation/100,E=l.value/100;if(D=Bf(0,Aw(D,1)),E=Bf(0,Aw(E,1)),0===D)return m=x=S=zf(255*E),Fp(m,x,S,1);const P=A/60,B=E*D,H=B*(1-Math.abs(P%2-1)),Z=E-B;switch(Math.floor(P)){case 0:m=B,x=H,S=0;break;case 1:m=H,x=B,S=0;break;case 2:m=0,x=B,S=H;break;case 3:m=0,x=H,S=B;break;case 4:m=H,x=0,S=B;break;case 5:m=B,x=0,S=H;break;default:m=x=S=0}return m=zf(255*(m+Z)),x=zf(255*(x+Z)),S=zf(255*(S+Z)),Fp(m,x,S,1)},Vp=l=>{const m=(D=>{const E={value:D.value.replace(K0,(Z,G,oe,ce)=>G+G+oe+oe+ce+ce)},P=Cu.exec(E.value);return null===P?["FFFFFF","FF","FF","FF"]:P})(l),x=parseInt(m[1],16),S=parseInt(m[2],16),A=parseInt(m[3],16);return Fp(x,S,A,1)},fh=(l,m,x,S)=>{const A=parseInt(l,10),D=parseInt(m,10),E=parseInt(x,10),P=parseFloat(S);return Fp(A,D,E,P)},Cx=l=>{const m=J0.exec(l);if(null!==m)return F.some(fh(m[1],m[2],m[3],"1"));const x=Ff.exec(l);return null!==x?F.some(fh(x[1],x[2],x[3],x[4])):F.none()},Iw=l=>`rgba(${l.red},${l.green},${l.blue},${l.alpha})`,U2=Fp(255,0,0,1),yT=(l,m)=>{l.dispatch("ResizeContent",m)},Dw=(l,m)=>{l.dispatch("TextColorChange",m)},BO=(l,m)=>l.dispatch("ResolveName",{name:m.nodeName.toLowerCase(),target:m}),bT=(l,m)=>()=>{l(),m()},Va=l=>Hp(l,"NodeChange",m=>{m.setEnabled(l.selection.isEditable())}),vh=(l,m)=>x=>{const S=Va(l)(x),A=(D=l,E=m,P=>{const B=Ll(),H=()=>{P.setActive(D.formatter.match(E));const Z=D.formatter.formatChanged(E,P.setActive);B.set(Z)};return D.initialized?H():D.once("init",H),()=>{D.off("init",H),B.clear()}})(x);var D,E;return()=>{S(),A()}},Hp=(l,m,x)=>S=>{const A=()=>x(S),D=()=>{x(S),l.on(m,A)};return l.initialized?D():l.once("init",D),()=>{l.off("init",D),l.off(m,A)}},Vf=l=>m=>()=>{l.undoManager.transact(()=>{l.focus(),l.execCommand("mceToggleFormat",!1,m.format)})},Ha=(l,m)=>()=>l.execCommand(m);var Hf=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const G2={},kx=l=>vn(G2,l).getOrThunk(()=>{const m=`tinymce-custom-colors-${l}`,x=Hf.getItem(m);if(Y(x)){const A=Hf.getItem("tinymce-custom-colors");Hf.setItem(m,W(A)?A:"[]")}const S=((A,D=10)=>{const E=Hf.getItem(A),P=Q(E)?JSON.parse(E):[],B=D-(H=P).length<0?H.slice(0,D):H;var H;const Z=G=>{B.splice(G,1)};return{add:G=>{((oe,ce)=>{const me=wt(oe,ce);return-1===me?F.none():F.some(me)})(B,G).each(Z),B.unshift(G),B.length>D&&B.pop(),Hf.setItem(A,JSON.stringify(B))},state:()=>B.slice(0)}})(m,10);return G2[l]=S,S}),cd=(l,m)=>{kx(l).add(m)},Wf=(l,m,x)=>({hue:l,saturation:m,value:x}),xT=l=>{let m=0,x=0,S=0;const A=l.red/255,D=l.green/255,E=l.blue/255,P=Math.min(A,Math.min(D,E)),B=Math.max(A,Math.max(D,E));return P===B?(S=P,Wf(0,0,100*S)):(m=A===P?3:E===P?1:5,m=60*(m-(A===P?D-E:E===P?A-D:E-A)/(B-P)),x=(B-P)/B,S=B,Wf(Math.round(m),Math.round(100*x),Math.round(100*S)))},_T=l=>xx(Sx(l)),wT=l=>{return(m=l,Pf(m)?F.some({value:zp(m)}):F.none()).orThunk(()=>Cx(l).map(xx)).getOrThunk(()=>{const x=document.createElement("canvas");x.height=1,x.width=1;const S=x.getContext("2d");S.clearRect(0,0,x.width,x.height),S.fillStyle="#FFFFFF",S.fillStyle=l,S.fillRect(0,0,1,1);const A=S.getImageData(0,0,1,1).data;return xx(Fp(A[0],A[1],A[2],A[3]))});var m},Ow="forecolor",yh="hilitecolor",bh=l=>{const m=[];for(let x=0;x<l.length;x+=2)m.push({text:l[x+1],value:"#"+wT(l[x]).value,icon:"checkmark",type:"choiceitem"});return m},yg=l=>m=>m.options.get(l),Uf="#000000",bg=(l,m)=>m===Ow&&l.options.isSet("color_map_foreground")?yg("color_map_foreground")(l):m===yh&&l.options.isSet("color_map_background")?yg("color_map_background")(l):yg("color_map")(l),ST=(l,m="default")=>Math.max(5,Math.ceil(Math.sqrt(bg(l,m).length))),zO=(l,m)=>{const x=yg("color_cols")(l),S=ST(l,m);return x===ST(l)?S:x},CT=(l,m="default")=>Math.round(m===Ow?yg("color_cols_foreground")(l):m===yh?yg("color_cols_background")(l):yg("color_cols")(l)),j2=yg("custom_colors"),q2=yg("color_default_foreground"),FO=yg("color_default_background"),VO=(l,m)=>{const x=je(l.selection.getStart()),S="hilitecolor"===m?$u(x,A=>{if($n(A)){const D=Di(A,"background-color");return go(Cx(D).exists(E=>0!==E.alpha),D)}return F.none()}).getOr("rgba(0, 0, 0, 0)"):Di(x,"color");return Cx(S).map(A=>"#"+xx(A).value)},$2=l=>{const m="choiceitem",x={type:m,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return l?[x,{type:m,text:"Custom color",icon:"color-picker",value:"custom"}]:[x]},kT=(l,m,x,S)=>{"custom"===x?Ew(l)(A=>{A.each(D=>{cd(m,D),l.execCommand("mceApplyTextcolor",m,D),S(D)})},VO(l,m).getOr(Uf)):"remove"===x?(S(""),l.execCommand("mceRemoveTextcolor",m)):(S(x),l.execCommand("mceApplyTextcolor",m,x))},Wp=(l,m,x)=>{return l.concat((S=m,Ct(kx(S).state(),A=>({type:"choiceitem",text:A,icon:"checkmark",value:A}))).concat($2(x)));var S},TT=(l,m,x)=>S=>{S(Wp(l,m,x))},Tx=(l,m,x)=>{l.setIconFill("forecolor"===m?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",x)},MT=(l,m)=>{l.setTooltip(m)},Y2=(l,m)=>x=>{const S=VO(l,m);return Ma(S,x.toUpperCase())},Q0=(l,m,x)=>{if(Al(x))return"forecolor"===m?"Text color":"Background color";const S="forecolor"===m?"Text color {0}":"Background color {0}",A=Wp(bg(l,m),m,!1),D=hn(A,E=>E.value===x).getOr({text:""}).text;return l.translate([S,l.translate(D)])},ku=(l,m,x,S)=>{l.ui.registry.addSplitButton(m,{tooltip:Q0(l,x,S.get()),presets:"color",icon:"forecolor"===m?"text-color":"highlight-bg-color",select:Y2(l,x),columns:CT(l,x),fetch:TT(bg(l,x),x,j2(l)),onAction:A=>{kT(l,x,S.get(),de)},onItemAction:(A,D)=>{kT(l,x,D,E=>{S.set(E),Dw(l,{name:m,color:E})})},onSetup:A=>{Tx(A,m,S.get());const D=E=>{E.name===m&&(Tx(A,E.name,E.color),MT(A,Q0(l,x,E.color)))};return l.on("TextColorChange",D),bT(Va(l)(A),()=>{l.off("TextColorChange",D)})}})},Gf=(l,m,x,S,A)=>{l.ui.registry.addNestedMenuItem(m,{text:S,icon:"forecolor"===m?"text-color":"highlight-bg-color",onSetup:D=>(MT(D,Q0(l,x,A.get())),Tx(D,m,A.get()),Va(l)(D)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:Y2(l,x),initData:{storageKey:x},onAction:D=>{kT(l,x,D.value,E=>{A.set(E),Dw(l,{name:m,color:E})})}}]})},Ew=l=>(m,x)=>{let S=!1;l.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:x},onAction:(D,E)=>{"hex-valid"===E.name&&(S=E.value)},onSubmit:D=>{const E=D.getData().colorpicker;S?(m(F.from(E)),D.close()):l.windowManager.alert(l.translate(["Invalid hex color code: {0}",E]))},onClose:de,onCancel:()=>{m(F.none())}})},Nw=(l,m,x,S,A,D,E,P)=>{const B=W0(m),H=ey(m,x,S,"color"!==A?"normal":"color",D,E,P);return U0(l,B,H,S,{menuType:A})},ey=(l,m,x,S,A,D,E)=>pa(Ct(l,P=>{return"choiceitem"===P.type?(B=P,br("choicemenuitem",Df,B)).fold(Vd,H=>F.some(((Z,G,oe,ce,me,Te,Ae,ze=!0)=>{const ke=Lf({presets:oe,textContent:G?Z.text:F.none(),htmlContent:F.none(),ariaLabel:Z.text,iconContent:Z.icon,shortcutContent:G?Z.shortcut:F.none(),checkMark:G?F.some(fx(Ae.icons)):F.none(),caret:F.none(),value:Z.value},Ae,ze),Ce=Z.text.filter(ae(!G)).map(Ee=>vr.config(Ae.tooltips.getConfig({tooltipText:Ae.translate(Ee)})));return be(vg({context:Z.context,data:ld(Z),enabled:Z.enabled,getApi:Ee=>({setActive:Ne=>{Qn.set(Ee,Ne)},isActive:()=>Qn.isOn(Ee),isEnabled:()=>!Nn.isDisabled(Ee),setEnabled:Ne=>Nn.set(Ee,!Ne)}),onAction:Ee=>ce(Z.value),onSetup:Ee=>(Ee.setActive(me),de),triggersSubmenu:!1,itemBehaviours:[...Ce.toArray()]},ke,Te,Ae),{toggling:{toggleClass:sx,toggleOnExecute:!1,selected:Z.active,exclusive:!0}})})(H,1===x,S,m,D(H.value),A,E,W0(l)))):F.none();var B})),Mx=(l,m)=>{const x=wu(m);return 1===l?{mode:"menu",moveOnTab:!0}:"auto"===l?{mode:"grid",selector:"."+x.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===m?"tox-swatches__row":"tox-collection__group"),previousSelector:S=>"color"===m?$r(S.element,"[aria-checked=true]"):F.none()}},Rw=cn("cell-over"),Lw=cn("cell-execute"),Pw=(l,m,x)=>{const S=D=>mn(D,Lw,{row:l,col:m}),A=(D,E)=>{E.stop(),S(D)};return vi({dom:{tag:"div",attributes:{role:"button","aria-label":x}},behaviours:Pt([Fn("insert-table-picker-cell",[xt(Xi(),Dn.focus),xt(ss(),S),xt(mm(),A),xt(Xy(),A)]),Qn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Dn.config({onFocus:D=>mn(D,Rw,{row:l,col:m})})])})},Qa=l=>Yn(l,m=>Ct(m,fl)),Bw=(l,m)=>Hr(`${m}x${l}`),X2={inserttable:(l,m)=>{const S=((E,P,B)=>{const H=[];for(let Z=0;Z<10;Z++){const G=[];for(let oe=0;oe<10;oe++){const ce=E(Z+1,oe+1);G.push(Pw(Z,oe,ce))}H.push(G)}return H})((E=m,(P,B)=>E.shared.providers.translate(["{0} columns, {1} rows",B,P]))),A=Bw(0,0),D=Wo({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[A],behaviours:Pt([zn.config({})])});var E;return{type:"widget",data:{value:cn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[vx.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Qa(S).concat(D.asSpec()),behaviours:Pt([Fn("insert-table-picker",[qo(E=>{zn.set(D.get(E),[A])}),cC(Rw,(E,P,B)=>{const{row:H,col:Z}=B.event;((G,oe,ce,me,Te)=>{for(let Ae=0;Ae<10;Ae++)for(let ze=0;ze<10;ze++)Qn.set(G[Ae][ze],Ae<=oe&&ze<=ce)})(S,H,Z),zn.set(D.get(E),[Bw(H+1,Z+1)])}),cC(Lw,(E,P,B)=>{const{row:H,col:Z}=B.event;Zn(E,au()),l.onAction({numRows:H+1,numColumns:Z+1})})]),bn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(l,m)=>{const x=((E,P)=>{const B=E.initData.allowCustomColors&&P.colorinput.hasCustomColors();return E.initData.colors.fold(()=>Wp(P.colorinput.getColors(E.initData.storageKey),E.initData.storageKey,B),H=>H.concat($2(B)))})(l,m),S=m.colorinput.getColorCols(l.initData.storageKey),A="color",D={...Nw(cn("menu-value"),x,E=>{l.onAction({value:E})},S,A,Cl.CLOSE_ON_EXECUTE,l.select.getOr(ee),m.shared.providers),markers:wu(A),movement:Mx(S,A),showMenuRole:!1};return{type:"widget",data:{value:cn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[vx.widget(Pd.sketch(D))]}}},Z2=l=>({type:"separator",dom:{tag:"div",classes:[ax,"tox-collection__group-heading"]},components:l.text.map(Hr).toArray()});var HO=Object.freeze({__proto__:null,getCoupled:(l,m,x,S)=>x.getOrCreate(l,m,S),getExistingCoupled:(l,m,x,S)=>x.getExisting(l,m,S)}),AT=[Ls("others",aC(so.value,dr()))],IT=Object.freeze({__proto__:null,init:()=>{const l={},m=(S,A)=>{if(0===Sn(S.others).length)throw new Error("Cannot find any known coupled components");return vn(l,A)},x=ae({});return cc({readState:x,getExisting:(S,A,D)=>m(A,D).orThunk(()=>(vn(A.others,D).getOrDie("No information found for coupled component: "+D),F.none())),getOrCreate:(S,A,D)=>m(A,D).getOrThunk(()=>{const E=vn(A.others,D).getOrDie("No information found for coupled component: "+D)(S),P=S.getSystem().build(E);return l[D]=P,P})})}});const Zr=Mi({fields:AT,name:"coupling",apis:HO,state:IT}),Ax=l=>{let m=F.none(),x=[];const S=E=>{A()?D(E):x.push(E)},A=()=>m.isSome(),D=E=>{m.each(P=>{setTimeout(()=>{E(P)},0)})};return l(E=>{A()||(m=F.some(E),Gt(x,D),x=[])}),{get:S,map:E=>Ax(P=>{S(B=>{P(E(B))})}),isReady:A}},K2={nu:Ax,pure:l=>Ax(m=>{m(l)})},DT=l=>{setTimeout(()=>{throw l},0)},jf=l=>{const m=x=>{l().then(x,DT)};return{map:x=>jf(()=>l().then(x)),bind:x=>jf(()=>l().then(S=>x(S).toPromise())),anonBind:x=>jf(()=>l().then(()=>x.toPromise())),toLazy:()=>K2.nu(m),toCached:()=>{let x=null;return jf(()=>(null===x&&(x=l()),x))},toPromise:l,get:m}},dd=l=>jf(()=>new Promise(l)),Hd=l=>jf(()=>Promise.resolve(l)),OT=ae("sink"),ET=ae(Us({name:OT(),overrides:ae({dom:{tag:"div"},behaviours:Pt([Ca.config({useFixed:Se})]),events:gr([di(sc()),di(cl()),di(mm())])})})),Ix=(l,m)=>{const x=l.getHotspot(m).getOr(m),S="hotspot",A=l.getAnchorOverrides();return l.layouts.fold(()=>({type:S,hotspot:x,overrides:A}),D=>({type:S,hotspot:x,overrides:A,layouts:D}))},zw=(l,m,x,S,A,D,E)=>((B,H,Z,G,oe,ce,me)=>{const Te=(ke=H,(0,B.fetch)(G).map(ke)),Ae=Q2(G,B);var ke;return Te.map(ze=>ze.bind(ke=>(F.from(ke.menus[ke.primary]).each(Ee=>{B.listRole.each(Ne=>{Ee.role=Ne})}),F.from(fu.sketch({...ce.menu(),uid:Zv(""),data:ke,highlightOnOpen:me,onOpenMenu:(Ee,Ne)=>{const Fe=Ae().getOrDie();Ca.position(Fe,Ne,{anchor:Z}),Io.decloak(oe)},onOpenSubmenu:(Ee,Ne,Fe)=>{const $e=Ae().getOrDie();Ca.position($e,Fe,{anchor:{type:"submenu",item:Ne}}),Io.decloak(oe)},onRepositionMenu:(Ee,Ne,Fe)=>{const $e=Ae().getOrDie();Ca.position($e,Ne,{anchor:Z}),Gt(Fe,ot=>{Ca.position($e,ot.triggeredMenu,{anchor:{type:"submenu",item:ot.triggeringItem}})})},onEscape:()=>(Dn.focus(G),Io.close(oe),F.some(!0))})))))})(l,m,Ix(l,x),x,S,A,E).map(B=>(B.fold(()=>{Io.isOpen(S)&&Io.close(S)},H=>{Io.cloak(S),Io.open(S,H),D(S)}),S)),J2=(l,m,x,S,A,D,E)=>(Io.close(S),Hd(S)),NT=(l,m,x,S,A,D)=>{const E=Zr.getCoupled(x,"sandbox");return(Io.isOpen(E)?J2:zw)(l,m,x,E,S,A,D)},Q2=(l,m)=>l.getSystem().getByUid(m.uid+"-"+OT()).map(x=>()=>so.value(x)).getOrThunk(()=>m.lazySink.fold(()=>()=>so.error(new Error("No internal sink is specified, nor could an external sink be found")),x=>()=>x(l))),RT=l=>{Io.getState(l).each(m=>{fu.repositionMenus(m)})},Dx=(l,m,x)=>{const S=wC(),A=Q2(m,l);return{dom:{tag:"div",classes:l.sandboxClasses,attributes:{id:S.id}},behaviours:fp(l.sandboxBehaviours,[Qt.config({store:{mode:"memory",initialValue:m}}),Io.config({onOpen:(D,E)=>{const P=Ix(l,m);S.link(m.element),l.matchWidth&&((B,H,Z)=>{const G=So.getCurrent(H).getOr(H),oe=Ua(B.element);Z?Yt(G.element,"min-width",oe+"px"):tu.set(G.element,oe)})(P.hotspot,E,l.useMinWidth),l.onOpen(P,D,E),void 0!==x&&void 0!==x.onOpen&&x.onOpen(D,E)},onClose:(D,E)=>{S.unlink(m.element),A().getOr(E).element.dom.dispatchEvent(new window.FocusEvent("focusout")),void 0!==x&&void 0!==x.onClose&&x.onClose(D,E)},isPartOf:(D,E,P)=>Fo(E,P)||Fo(m,P),getAttachPoint:()=>A().getOrDie()}),So.config({find:D=>Io.getState(D).bind(E=>So.getCurrent(E))}),Vs.config({channels:{...g_({isExtraPart:ee}),...pp({doReposition:RT})}})])}},Is=l=>{const m=Zr.getCoupled(l,"sandbox");RT(m)},Fw=()=>[st("sandboxClasses",[]),Um("sandboxBehaviours",[So,Vs,Io,Qt])],WO=ae([kt("dom"),kt("fetch"),Kn("onOpen"),Ss("onExecute"),st("getHotspot",F.some),st("getAnchorOverrides",ae({})),dp(),Nr("dropdownBehaviours",[Qn,Zr,bn,Dn]),kt("toggleClass"),st("eventOrder",{}),Bn("lazySink"),st("matchWidth",!1),st("useMinWidth",!1),Bn("role"),Bn("listRole")].concat(Fw())),eI=ae([Nd({schema:[Ju(),st("fakeFocus",!1)],name:"menu",defaults:l=>({onExecute:l.onExecute})}),ET()]),Sc=Ka({name:"Dropdown",configFields:WO(),partFields:eI(),factory:(l,m,x,S)=>{const A=B=>{Io.getState(B).each(H=>{fu.highlightPrimary(H)})},D=(B,H,Z)=>NT(l,Ge,B,S,H,Z),E={expand:B=>{Qn.isOn(B)||D(B,de,Ai.HighlightNone).get(de)},open:B=>{Qn.isOn(B)||D(B,de,Ai.HighlightMenuAndItem).get(de)},refetch:B=>Zr.getExistingCoupled(B,"sandbox").fold(()=>D(B,de,Ai.HighlightMenuAndItem).map(de),H=>zw(l,Ge,B,H,S,de,Ai.HighlightMenuAndItem).map(de)),isOpen:Qn.isOn,close:B=>{Qn.isOn(B)&&D(B,de,Ai.HighlightMenuAndItem).get(de)},repositionMenus:B=>{Qn.isOn(B)&&Is(B)}},P=(B,H)=>(Vl(B),F.some(!0));return{uid:l.uid,dom:l.dom,components:m,behaviours:Pa(l.dropdownBehaviours,[Qn.config({toggleClass:l.toggleClass,aria:{mode:"expanded"}}),Zr.config({others:{sandbox:B=>Dx(l,B,{onOpen:()=>Qn.on(B),onClose:()=>Qn.off(B)})}}),bn.config({mode:"special",onSpace:P,onEnter:P,onDown:(B,H)=>{if(Sc.isOpen(B)){const Z=Zr.getCoupled(B,"sandbox");A(Z)}else Sc.open(B);return F.some(!0)},onEscape:(B,H)=>Sc.isOpen(B)?(Sc.close(B),F.some(!0)):F.none()}),Dn.config({})]),events:Hb(F.some(B=>{D(B,A,Ai.HighlightMenuAndItem).get(de)})),eventOrder:{...l.eventOrder,[ss()]:["disabling","toggling","alloy.base.behaviour"]},apis:E,domModification:{attributes:{"aria-haspopup":l.listRole.getOr("true"),...l.role.fold(()=>({}),B=>({role:B})),..."button"===l.dom.tag?{type:vn(l.dom,"attributes").bind(B=>vn(B,"type")).getOr("button")}:{}}}}},apis:{open:(l,m)=>l.open(m),refetch:(l,m)=>l.refetch(m),expand:(l,m)=>l.expand(m),close:(l,m)=>l.close(m),isOpen:(l,m)=>l.isOpen(m),repositionMenus:(l,m)=>l.repositionMenus(m)}}),tI=(l,m,x)=>{Lp(l).each(S=>{var A,D;D=S,mi(x.element,"id").each(P=>Pn(D.element,"aria-activedescendant",P)),(qa((A=m).element,Sf)?F.some(A.element):$r(A.element,"."+Sf)).each(D=>{mi(D,"id").each(E=>Pn(S.element,"aria-controls",E))})}),Pn(x.element,"aria-selected","true")},UO=(l,m,x)=>{Pn(x.element,"aria-selected","false")},ty=l=>Zr.getExistingCoupled(l,"sandbox").bind(gw).map(V0).map(m=>m.fetchPattern).getOr("");var Ox;!function(l){l[l.ContentFocus=0]="ContentFocus",l[l.UiFocus=1]="UiFocus"}(Ox||(Ox={}));const Ex=(l,m,x,S,A,D)=>{const E=W0(m),P=pa(Ct(m,H=>{const Z=G=>((l,m,x,S,A)=>{const D=x.shared.providers,E=B=>A?{...B,shortcut:F.none(),icon:B.text.isSome()?F.none():B.icon}:B;switch(l.type){case"menuitem":return(P=l,br("menuitem",Sw,P)).fold(Vd,B=>F.some(((H,Z,G,oe=!0)=>{const ce=Lf({presets:"normal",iconContent:H.icon,textContent:H.text,htmlContent:F.none(),ariaLabel:H.text,caret:F.none(),checkMark:F.none(),shortcutContent:H.shortcut},G,oe);return vg({context:H.context,data:ld(H),getApi:me=>({isEnabled:()=>!Nn.isDisabled(me),setEnabled:Te=>Nn.set(me,!Te)}),enabled:H.enabled,onAction:H.onAction,onSetup:H.onSetup,triggersSubmenu:!1,itemBehaviours:[]},ce,Z,G)})(E(B),m,D,S)));case"nestedmenuitem":return(B=l,br("nestedmenuitem",Cw,B)).fold(Vd,B=>F.some(((H,Z,G,oe=!0,ce=!1)=>{const me=Bp(ce?"chevron-down":"chevron-right",G.icons,["tox-collection__item-caret"]),Ae=Lf({presets:"normal",iconContent:H.icon,textContent:H.text,htmlContent:F.none(),ariaLabel:H.text,caret:F.some(me),checkMark:F.none(),shortcutContent:H.shortcut},G,oe);return vg({context:H.context,data:ld(H),getApi:ze=>({isEnabled:()=>!Nn.isDisabled(ze),setEnabled:ke=>Nn.set(ze,!ke),setIconFill:(ke,Ce)=>{$r(ze.element,`svg path[class="${ke}"], rect[class="${ke}"]`).each(Ee=>{Pn(Ee,"fill",Ce)})},setTooltip:ke=>{const Ce=G.translate(ke);Pn(ze.element,"aria-label",Ce)}}),enabled:H.enabled,onAction:de,onSetup:H.onSetup,triggersSubmenu:!0,itemBehaviours:[]},Ae,Z,G)})(E(B),m,D,S,A)));case"togglemenuitem":return(B=>br("togglemenuitem",px,B))(l).fold(Vd,B=>F.some(((H,Z,G,oe=!0)=>{const ce=Lf({iconContent:H.icon,textContent:H.text,htmlContent:F.none(),ariaLabel:H.text,checkMark:F.some(fx(G.icons)),caret:F.none(),shortcutContent:H.shortcut,presets:"normal",meta:H.meta},G,oe);return be(vg({context:H.context,data:ld(H),enabled:H.enabled,getApi:me=>({setActive:Te=>{Qn.set(me,Te)},isActive:()=>Qn.isOn(me),isEnabled:()=>!Nn.isDisabled(me),setEnabled:Te=>Nn.set(me,!Te)}),onAction:H.onAction,onSetup:H.onSetup,triggersSubmenu:!1,itemBehaviours:[]},ce,Z,G),{toggling:{toggleClass:sx,toggleOnExecute:!1,selected:H.active},role:H.role.getOrUndefined()})})(E(B),m,D,S)));case"separator":return(B=>br("separatormenuitem",bw,B))(l).fold(Vd,B=>F.some(Z2(B)));case"fancymenuitem":return(B=>br("fancymenuitem",PO,B))(l).fold(Vd,B=>{return Z=x,vn(X2,(H=B).fancytype).map(G=>G(H,Z));var H,Z});default:return console.error("Unknown item in general menu",l),F.none()}var B,P})(G,x,S,A?!bo(G,"text"):E,A);return"nestedmenuitem"===H.type&&H.getSubmenuItems().length<=0?Z({...H,enabled:!1}):Z(H)})),B="no-search"===(H=D).searchMode?{menuType:"normal"}:{menuType:"searchable",searchMode:H};var H;return(A?TO:U0)(l,E,P,1,B)},Jl=l=>fu.singleData(l.value,l),nI=l=>s_(je(l.startContainer),l.startOffset,je(l.endContainer),l.endOffset),ny=(l,m,x)=>Yh(l,m,x).isSome(),jO=(l,m)=>{let x=null;return{cancel:()=>{null!==x&&(clearTimeout(x),x=null)},schedule:(...S)=>{x=setTimeout(()=>{l.apply(null,S),x=null},m)}}},oI=l=>{const m=l.raw;return void 0===m.touches||1!==m.touches.length?F.none():F.some(m.touches[0])},Vw=(l,m)=>{const x=vn(l,"target").getOr(m);return kn(x)},Hw=ur([{stopped:[]},{resume:["element"]},{complete:[]}]),Up=(l,m,x,S,A,D)=>{const E=l(m,S),P=((B,H)=>{const Z=kn(!1),G=kn(!1);return{stop:()=>{Z.set(!0)},cut:()=>{G.set(!0)},isStopped:Z.get,isCut:G.get,event:B,setSource:H.set,getSource:H.get}})(x,A);return E.fold(()=>(D.logEventNoHandlers(m,S),Hw.complete()),B=>{const H=B.descHandler;return fC(H)(P),P.isStopped()?(D.logEventStopped(m,B.element,H.purpose),Hw.stopped()):P.isCut()?(D.logEventCut(m,B.element,H.purpose),Hw.complete()):Ii(B.element).fold(()=>(D.logNoParent(m,B.element,H.purpose),Hw.complete()),Z=>(D.logEventResponse(m,B.element,H.purpose),Hw.resume(Z)))})},Nx=(l,m,x,S,A,D)=>Up(l,m,x,S,A,D).fold(Se,E=>Nx(l,m,x,E,A,D),ee),_g=(l,m,x,S,A)=>{const D=Vw(x,S);return Nx(l,m,x,S,D,A)},Cc=$l({name:"Container",factory:l=>{const{attributes:m,...x}=l.dom;return{uid:l.uid,dom:{tag:"div",attributes:{role:"presentation",...m},...x},components:l.components,behaviours:mp(l.containerBehaviours),events:l.events,domModification:l.domModification,eventOrder:l.eventOrder}},configFields:[st("components",[]),Nr("containerBehaviours",[]),st("events",{}),st("domModification",{}),st("eventOrder",{})]}),oy=l=>{const m=Ae=>Ii(l.element).fold(Se,ze=>po(Ae,ze)),x=(()=>{const l=(()=>{const S={};return{registerId:(A,D,E)=>{ao(E,(P,B)=>{const H=void 0!==S[B]?S[B]:{};var Z;H[D]={cHandler:Ue.apply(void 0,[(Z=P).handler].concat(A)),purpose:Z.purpose},S[B]=H})},unregisterId:A=>{ao(S,(D,E)=>{bo(D,A)&&delete D[A]})},filterByType:A=>vn(S,A).map(D=>Ur(D,(E,P)=>({id:P,descHandler:E}))).getOr([]),find:(A,D,E)=>vn(S,D).bind(P=>$u(E,B=>{return H=P,ap(Z=B).bind(G=>vn(H,G)).map(G=>({element:Z,descHandler:G}));var H,Z},A))}})(),m={},x=S=>{ap(S.element).each(A=>{delete m[A],l.unregisterId(A)})};return{find:(S,A,D)=>l.find(S,A,D),filter:S=>l.filterByType(S),register:S=>{const A=ap((E=S).element).getOrThunk(()=>((B,H)=>{const Z=cn(_A+"uid-");return pC(H,Z),Z})(0,E.element));var E;Br(m,A)&&((E,P)=>{const B=m[P];if(B!==E)throw new Error('The tagId "'+P+'" is already used by: '+$a(B.element)+"\nCannot use it for: "+$a(E.element)+"\nThe conflicting element is"+(Jr(B.element)?" ":" not ")+"already in the DOM");x(E)})(S,A),l.registerId([S],A,S.events),m[A]=S},unregister:x,getById:S=>vn(m,S)}})(),S=(Ae,ze)=>x.find(m,Ae,ze),A=((l,m)=>{const x={stopBackspace:!0,...m},S=(G=>{const oe=ar(),ce=kn(!1),me=jO(Ae=>{G.triggerEvent(Zy(),Ae),ce.set(!0)},400),Te=zl([{key:Fl(),value:Ae=>(oI(Ae).each(ze=>{me.cancel();const ke={x:ze.clientX,y:ze.clientY,target:Ae.target};me.schedule(Ae),ce.set(!1),oe.set(ke)}),F.none())},{key:Lv(),value:Ae=>(me.cancel(),oI(Ae).each(ze=>{oe.on(ke=>{((Ce,Ee)=>{const Ne=Math.abs(Ce.clientX-Ee.x),Fe=Math.abs(Ce.clientY-Ee.y);return Ne>5||Fe>5})(ze,ke)&&oe.clear()})}),F.none())},{key:iu(),value:Ae=>(me.cancel(),oe.get().filter(ze=>po(ze.target,Ae.target)).map(ze=>ce.get()?(Ae.prevent(),!1):G.triggerEvent(Xy(),Ae)))}]);return{fireIfReady:(Ae,ze)=>vn(Te,ze).bind(ke=>ke(Ae))}})(x),A=Ct(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),G=>wo(l,G,oe=>{S.fireIfReady(oe,G).each(ce=>{ce&&oe.kill()}),x.triggerEvent(G,oe)&&oe.kill()})),D=ar(),E=wo(l,"paste",G=>{S.fireIfReady(G,"paste").each(oe=>{oe&&G.kill()}),x.triggerEvent("paste",G)&&G.kill(),D.set(setTimeout(()=>{x.triggerEvent(ym(),G)},0))}),P=wo(l,"keydown",G=>{var oe;x.triggerEvent("keydown",G)?G.kill():x.stopBackspace&&(oe=G).raw.which===yi[0]&&!nt(["input","textarea"],Rt(oe.target))&&!ny(oe.target,'[contenteditable="true"]')&&G.prevent()}),B=wo(l,"focusin",G=>{x.triggerEvent("focusin",G)&&G.kill()}),H=ar(),Z=wo(l,"focusout",G=>{x.triggerEvent("focusout",G)&&G.kill(),H.set(setTimeout(()=>{x.triggerEvent(vm(),G)},0))});return{unbind:()=>{Gt(A,G=>{G.unbind()}),P.unbind(),B.unbind(),Z.unbind(),E.unbind(),D.on(clearTimeout),H.on(clearTimeout)}}})(l.element,{triggerEvent:(Ae,ze)=>Ya(Ae,ze.target,ke=>{return _g(S,Ae,Ne=ze,Ne.target,ke);var Ne})}),D={debugInfo:ae("real"),triggerEvent:(Ae,ze,ke)=>{Ya(Ae,ze,Ce=>_g(S,Ae,ke,ze,Ce))},triggerFocus:(Ae,ze)=>{ap(Ae).fold(()=>{hc(Ae)},ke=>{Ya(Yu(),Ae,Ce=>(((Ee,Ne,Fe,$e,ot)=>{const bt=Vw(Fe,$e);Up(Ee,Ne,Fe,$e,bt,ot)})(S,Yu(),{originator:ze,kill:de,prevent:de,target:Ae},Ae,Ce),!1))})},triggerEscape:(Ae,ze)=>{D.triggerEvent("keydown",Ae.element,ze.event)},getByUid:Ae=>me(Ae),getByDom:Ae=>Te(Ae),build:vi,buildOrPatch:qh,addToGui:Ae=>{B(Ae)},removeFromGui:Ae=>{H(Ae)},addToWorld:Ae=>{E(Ae)},removeFromWorld:Ae=>{P(Ae)},broadcast:Ae=>{G(Ae)},broadcastOn:(Ae,ze)=>{oe(Ae,ze)},broadcastEvent:(Ae,ze)=>{ce(Ae,ze)},isConnected:Se},E=Ae=>{Ae.connect(D),Xn(Ae.element)||(x.register(Ae),Gt(Ae.components(),E),D.triggerEvent(zv(),Ae.element,{target:Ae.element}))},P=Ae=>{Xn(Ae.element)||(Gt(Ae.components(),P),x.unregister(Ae)),Ae.disconnect()},B=Ae=>{nh(l,Ae)},H=Ae=>{Cs(Ae)},Z=Ae=>{const ze=x.filter(Pv());Gt(ze,ke=>{fC(ke.descHandler)(Ae)})},G=Ae=>{Z({universal:!0,data:Ae})},oe=(Ae,ze)=>{Z({universal:!1,channels:Ae,data:ze})},ce=(Ae,ze)=>((ke,Ce,Ee)=>{const Ne=(Fe=>{const $e=kn(!1);return{stop:()=>{$e.set(!0)},cut:de,isStopped:$e.get,isCut:ee,event:Fe,setSource:Me("Cannot set source of a broadcasted event"),getSource:Me("Cannot get source of a broadcasted event")}})(Ce);return Gt(ke,Fe=>{fC(Fe.descHandler)(Ne)}),Ne.isStopped()})(x.filter(Ae),ze),me=Ae=>x.getById(Ae).fold(()=>so.error(new Error('Could not find component with uid: "'+Ae+'" in system.')),so.value),Te=Ae=>{const ze=ap(Ae).getOr("not found");return me(ze)};return E(l),{root:l,element:l.element,destroy:()=>{A.unbind(),Rl(l.element)},add:B,remove:H,getByUid:me,getByDom:Te,addToWorld:E,removeFromWorld:P,broadcast:G,broadcastOn:oe,broadcastEvent:ce}},Ww=ae([st("prefix","form-field"),Nr("fieldBehaviours",[So,Qt])]),qO=ae([Us({schema:[kt("dom")],name:"label"}),Us({factory:{sketch:l=>({uid:l.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:l.text}})},schema:[kt("text")],name:"aria-descriptor"}),Ba({factory:{sketch:l=>{const m=((x,S)=>{const A={};return ao(x,(D,E)=>{nt(S,E)||(A[E]=D)}),A})(l,["factory"]);return l.factory.sketch(m)}},schema:[kt("factory")],name:"field"})]),$o=Ka({name:"FormField",configFields:Ww(),partFields:qO(),factory:(l,m,x,S)=>{const A=Pa(l.fieldBehaviours,[So.config({find:P=>Vo(P,l,"field")}),Qt.config({store:{mode:"manual",getValue:P=>So.getCurrent(P).bind(Qt.getValue),setValue:(P,B)=>{So.getCurrent(P).each(H=>{Qt.setValue(H,B)})}}})]),D=gr([qo((P,B)=>{const H=lg(P,l,["label","field","aria-descriptor"]);H.field().each(Z=>{const G=cn(l.prefix);H.label().each(oe=>{Pn(oe.element,"for",G),Pn(Z.element,"id",G)}),H["aria-descriptor"]().each(oe=>{const ce=cn(l.prefix);Pn(oe.element,"id",ce),Pn(Z.element,"aria-describedby",ce)})})})]);return{uid:l.uid,dom:l.dom,components:m,behaviours:A,events:D,apis:{getField:P=>Vo(P,l,"field"),getLabel:P=>Vo(P,l,"label")}}},apis:{getField:(l,m)=>l.getField(m),getLabel:(l,m)=>l.getLabel(m)}});var iI=tinymce.util.Tools.resolve("tinymce.html.Entities");const ry=(l,m,x,S)=>{const A=Uw(l,m,x,S);return $o.sketch(A)},Uw=(l,m,x,S)=>({dom:aI(x),components:l.toArray().concat([m]),fieldBehaviours:Pt(S)}),aI=l=>({tag:"div",classes:["tox-form__group"].concat(l)}),qf=(l,m)=>$o.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Hr(m.translate(l))]}),Ys=cn("form-component-change"),Rx=cn("form-close"),xh=cn("form-cancel"),_h=cn("form-action"),$f=cn("form-submit"),Yf=cn("form-block"),Gw=cn("form-unblock"),sI=cn("form-tabchange"),$O=cn("form-resize"),XO=["input","textarea"],PT=l=>{const m=Rt(l);return nt(XO,m)},wg=(l,m)=>{const x=m.getRoot(l).getOr(l.element);Vr(x,m.invalidClass),m.notify.each(S=>{PT(l.element)&&Pn(l.element,"aria-invalid",!1),S.getContainer(l).each(A=>{cu(A,S.validHtml)}),S.onValid(l)})},BT=(l,m,x,S)=>{const A=m.getRoot(l).getOr(l.element);ui(A,m.invalidClass),m.notify.each(D=>{PT(l.element)&&Pn(l.element,"aria-invalid",!0),D.getContainer(l).each(E=>{cu(E,S)}),D.onInvalid(l,S)})},lI=(l,m,x)=>m.validator.fold(()=>Hd(so.value(!0)),S=>S.validate(l)),jw=(l,m,x)=>(m.notify.each(S=>{S.onValidate(l)}),lI(l,m).map(S=>l.getSystem().isConnected()?S.fold(A=>(BT(l,m,0,A),so.error(A)),A=>(wg(l,m),so.value(A))):so.error("No longer in system")));var zT=Object.freeze({__proto__:null,markValid:wg,markInvalid:BT,query:lI,run:jw,isInvalid:(l,m)=>{const x=m.getRoot(l).getOr(l.element);return qa(x,m.invalidClass)}}),FT=Object.freeze({__proto__:null,events:(l,m)=>l.validator.map(x=>gr([xt(x.onEvent,S=>{jw(S,l).get(Ge)})].concat(x.validateOnLoad?[qo(S=>{jw(S,l).get(de)})]:[]))).getOr({})}),Sg=[kt("invalidClass"),st("getRoot",F.none),Wc("notify",[st("aria","alert"),st("getContainer",F.none),st("validHtml",""),Kn("onValid"),Kn("onInvalid"),Kn("onValidate")]),Wc("validator",[kt("validate"),st("onEvent","input"),st("validateOnLoad",!0)])];const wh=Mi({fields:Sg,name:"invalidating",active:FT,apis:zT,extra:{validation:l=>m=>{const x=Qt.getValue(m);return Hd(l(x))}}}),Lx=Mi({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>gr([Qy(mA(),Se)]),exhibit:()=>Wl({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),cI=cn("color-input-change"),VT=cn("color-swatch-change"),iy=cn("color-picker-cancel"),Xf=Us({schema:[kt("dom")],name:"label"}),Sh=l=>Us({name:l+"-edge",overrides:m=>m.model.manager.edgeActions[l].fold(()=>({}),x=>({events:gr([_m(Fl(),(S,A,D)=>x(S,D),[m]),_m(cl(),(S,A,D)=>x(S,D),[m]),_m($y(),(S,A,D)=>{D.mouseIsDown.get()&&x(S,D)},[m])])}))}),HT=Sh("top-left"),Px=Sh("top"),qw=Sh("top-right"),dI=Sh("right"),WT=Sh("bottom-right"),Zf=Sh("bottom"),ZO=Sh("bottom-left"),$w=Sh("left"),uI=Ba({name:"thumb",defaults:ae({dom:{styles:{position:"absolute"}}}),overrides:l=>({events:gr([tb(Fl(),l,"spectrum"),tb(Lv(),l,"spectrum"),tb(iu(),l,"spectrum"),tb(cl(),l,"spectrum"),tb($y(),l,"spectrum"),tb(pm(),l,"spectrum")])})}),UT=l=>sh(l.event);var hI=[Xf,$w,dI,Px,Zf,HT,qw,ZO,WT,uI,Ba({schema:[Yi("mouseIsDown",()=>kn(!1))],name:"spectrum",overrides:l=>{const m=l.model.manager,x=(S,A)=>m.getValueFromEvent(A).map(D=>m.setValueFrom(S,l,D));return{behaviours:Pt([bn.config({mode:"special",onLeft:(S,A)=>m.onLeft(S,l,UT(A)),onRight:(S,A)=>m.onRight(S,l,UT(A)),onUp:(S,A)=>m.onUp(S,l,UT(A)),onDown:(S,A)=>m.onDown(S,l,UT(A))}),cr.config({}),Dn.config({})]),events:gr([xt(Fl(),x),xt(Lv(),x),xt(cl(),x),xt($y(),(S,A)=>{l.mouseIsDown.get()&&x(S,A)})])}}})];const Bx=ae("slider.change.value"),gI=l=>{const m=l.event.raw;return-1!==m.type.indexOf("touch")?void 0!==m.touches&&1===m.touches.length?F.some(m.touches[0]).map(S=>nr(S.clientX,S.clientY)):F.none():void 0!==m.clientX?F.some(m).map(S=>nr(S.clientX,S.clientY)):F.none()},Cg=l=>l.model.minX,Ud=l=>l.model.minY,ay=l=>l.model.minX-1,Kf=l=>l.model.minY-1,kg=l=>l.model.maxX,Gp=l=>l.model.maxY,zx=l=>l.model.maxX+1,Fx=l=>l.model.maxY+1,GT=(l,m,x)=>m(l)-x(l),Yw=l=>GT(l,kg,Cg),jT=l=>GT(l,Gp,Ud),pI=l=>Yw(l)/2,Xw=l=>jT(l)/2,Jf=(l,m)=>m?l.stepSize*l.speedMultiplier:l.stepSize,Zw=l=>l.snapToGrid,mI=l=>l.snapStart,Vx=l=>l.rounded,Ch=(l,m)=>void 0!==l[m+"-edge"],qT=l=>Ch(l,"left"),$T=l=>Ch(l,"right"),Kw=l=>Ch(l,"top"),YT=l=>Ch(l,"bottom"),Tu=l=>l.model.value.get(),Qf=(l,m)=>({x:l,y:m}),Gd=(l,m)=>{mn(l,Bx(),{value:m})},XT=(l,m,x,S)=>l<m?l:l>x?x:l===m?m-1:Math.max(m,l-S),Jw=(l,m,x,S)=>l>x?l:l<m?m:l===x?x+1:Math.min(x,l+S),ZT=(l,m,x)=>Math.max(m,Math.min(x,l)),Mu=l=>{const{min:m,max:x,range:S,value:A,step:D,snap:E,snapStart:P,rounded:B,hasMinEdge:H,hasMaxEdge:Z,minBound:G,maxBound:oe,screenRange:ce}=l,me=H?m-1:m,Te=Z?x+1:x;if(A<G)return me;if(A>oe)return Te;{const Ae=(Ce=G,Math.min(oe,Math.max(A,Ce))-Ce),ze=ZT(Ae/ce*S+m,me,Te);return E&&ze>=m&&ze<=x?((ke,Ce,Ee,Ne,Fe)=>Fe.fold(()=>{const ot=Math.round((ke-Ce)/Ne)*Ne;return ZT(Ce+ot,Ce-1,Ee+1)},$e=>{const bt=Math.round((ke-$e)%Ne/Ne),mt=Math.floor((ke-$e)/Ne),vt=Math.floor((Ee-$e)/Ne),Ot=$e+Math.min(vt,mt+bt)*Ne;return Math.max($e,Ot)}))(ze,m,x,D,P):B?Math.round(ze):ze}var Ce},Hx=l=>{const{min:m,max:x,range:S,value:A,hasMinEdge:D,hasMaxEdge:E,maxBound:P,maxOffset:B,centerMinEdge:H,centerMaxEdge:Z}=l;return A<m?D?0:H:A>x?E?P:Z:(A-m)/S*B},QT="left",Au=l=>l.element.dom.getBoundingClientRect(),Tn=(l,m)=>l[m],Ql=l=>{const m=Au(l);return Tn(m,QT)},vI=l=>{const m=Au(l);return Tn(m,"right")},Wx=l=>{const m=Au(l);return Tn(m,"top")},yI=l=>{const m=Au(l);return Tn(m,"bottom")},eM=l=>{const m=Au(l);return Tn(m,"width")},Qw=l=>{const m=Au(l);return Tn(m,"height")},sy=(l,m,x)=>(l+m)/2-x,jp=(l,m)=>{const x=Au(l),S=Au(m),A=Tn(x,QT),D=Tn(x,"right"),E=Tn(S,QT);return sy(A,D,E)},tM=(l,m)=>{const x=Au(l),S=Au(m),A=Tn(x,"top"),D=Tn(x,"bottom"),E=Tn(S,"top");return sy(A,D,E)},ev=(l,m)=>{mn(l,Bx(),{value:m})},tv=(l,m,x)=>{const S={min:Cg(m),max:kg(m),range:Yw(m),value:x,step:Jf(m),snap:Zw(m),snapStart:mI(m),rounded:Vx(m),hasMinEdge:qT(m),hasMaxEdge:$T(m),minBound:Ql(l),maxBound:vI(l),screenRange:eM(l)};return Mu(S)},bI=l=>(m,x,S)=>((A,D,E,P)=>{const B=(A>0?Jw:XT)(Tu(E),Cg(E),kg(E),Jf(E,P));return ev(D,B),F.some(B)})(l,m,x,S).map(Se),nM=(l,m,x,S,A,D)=>{const E=((P,B,H,Z,G)=>{const oe=eM(P),ce=Z.bind(Ae=>F.some(jp(Ae,P))).getOr(0),me=G.bind(Ae=>F.some(jp(Ae,P))).getOr(oe),Te={min:Cg(B),max:kg(B),range:Yw(B),value:H,hasMinEdge:qT(B),hasMaxEdge:$T(B),minBound:Ql(P),minOffset:0,maxBound:vI(P),maxOffset:oe,centerMinEdge:ce,centerMaxEdge:me};return Hx(Te)})(m,D,x,S,A);return Ql(m)-Ql(l)+E},oM=bI(-1),KO=bI(1),xI=F.none,_I=F.none,JO={"top-left":F.none(),top:F.none(),"top-right":F.none(),right:F.some((l,m)=>{Gd(l,zx(m))}),"bottom-right":F.none(),bottom:F.none(),"bottom-left":F.none(),left:F.some((l,m)=>{Gd(l,ay(m))})};var wI=Object.freeze({__proto__:null,setValueFrom:(l,m,x)=>{const S=tv(l,m,x);return ev(l,S),S},setToMin:(l,m)=>{const x=Cg(m);ev(l,x)},setToMax:(l,m)=>{const x=kg(m);ev(l,x)},findValueOfOffset:tv,getValueFromEvent:l=>gI(l).map(m=>m.left),findPositionOfValue:nM,setPositionFromValue:(l,m,x,S)=>{const A=Tu(x),D=nM(l,S.getSpectrum(l),A,S.getLeftEdge(l),S.getRightEdge(l),x),E=Ua(m.element)/2;Yt(m.element,"left",D-E+"px")},onLeft:oM,onRight:KO,onUp:xI,onDown:_I,edgeActions:JO});const eS=(l,m)=>{mn(l,Bx(),{value:m})},Ux=(l,m,x)=>{const S={min:Ud(m),max:Gp(m),range:jT(m),value:x,step:Jf(m),snap:Zw(m),snapStart:mI(m),rounded:Vx(m),hasMinEdge:Kw(m),hasMaxEdge:YT(m),minBound:Wx(l),maxBound:yI(l),screenRange:Qw(l)};return Mu(S)},SI=l=>(m,x,S)=>((A,D,E,P)=>{const B=(A>0?Jw:XT)(Tu(E),Ud(E),Gp(E),Jf(E,P));return eS(D,B),F.some(B)})(l,m,x,S).map(Se),tS=(l,m,x,S,A,D)=>{const E=((P,B,H,Z,G)=>{const oe=Qw(P),ce=Z.bind(Ae=>F.some(tM(Ae,P))).getOr(0),me=G.bind(Ae=>F.some(tM(Ae,P))).getOr(oe),Te={min:Ud(B),max:Gp(B),range:jT(B),value:H,hasMinEdge:Kw(B),hasMaxEdge:YT(B),minBound:Wx(P),minOffset:0,maxBound:yI(P),maxOffset:oe,centerMinEdge:ce,centerMaxEdge:me};return Hx(Te)})(m,D,x,S,A);return Wx(m)-Wx(l)+E},QO=F.none,rM=F.none,eE=SI(-1),CI=SI(1),tE={"top-left":F.none(),top:F.some((l,m)=>{Gd(l,Kf(m))}),"top-right":F.none(),right:F.none(),"bottom-right":F.none(),bottom:F.some((l,m)=>{Gd(l,Fx(m))}),"bottom-left":F.none(),left:F.none()};var nE=Object.freeze({__proto__:null,setValueFrom:(l,m,x)=>{const S=Ux(l,m,x);return eS(l,S),S},setToMin:(l,m)=>{const x=Ud(m);eS(l,x)},setToMax:(l,m)=>{const x=Gp(m);eS(l,x)},findValueOfOffset:Ux,getValueFromEvent:l=>gI(l).map(m=>m.top),findPositionOfValue:tS,setPositionFromValue:(l,m,x,S)=>{const A=Tu(x),D=tS(l,S.getSpectrum(l),A,S.getTopEdge(l),S.getBottomEdge(l),x),E=Pi(m.element)/2;Yt(m.element,"top",D-E+"px")},onLeft:QO,onRight:rM,onUp:eE,onDown:CI,edgeActions:tE});const ud=(l,m)=>{mn(l,Bx(),{value:m})},ly=(l,m)=>({x:l,y:m}),Tg=(l,m)=>(x,S,A)=>((D,E,P,B,H)=>{const Z=D>0?Jw:XT,G=E?Tu(B).x:Z(Tu(B).x,Cg(B),kg(B),Jf(B,H)),oe=E?Z(Tu(B).y,Ud(B),Gp(B),Jf(B,H)):Tu(B).y;return ud(P,ly(G,oe)),F.some(G)})(l,m,x,S,A).map(Se),nS=Tg(-1,!1),kI=Tg(1,!1),TI=Tg(-1,!0),iM=Tg(1,!0),oE={"top-left":F.some((l,m)=>{Gd(l,Qf(ay(m),Kf(m)))}),top:F.some((l,m)=>{Gd(l,Qf(pI(m),Kf(m)))}),"top-right":F.some((l,m)=>{Gd(l,Qf(zx(m),Kf(m)))}),right:F.some((l,m)=>{Gd(l,Qf(zx(m),Xw(m)))}),"bottom-right":F.some((l,m)=>{Gd(l,Qf(zx(m),Fx(m)))}),bottom:F.some((l,m)=>{Gd(l,Qf(pI(m),Fx(m)))}),"bottom-left":F.some((l,m)=>{Gd(l,Qf(ay(m),Fx(m)))}),left:F.some((l,m)=>{Gd(l,Qf(ay(m),Xw(m)))})};var aN=Object.freeze({__proto__:null,setValueFrom:(l,m,x)=>{const S=tv(l,m,x.left),A=Ux(l,m,x.top),D=ly(S,A);return ud(l,D),D},setToMin:(l,m)=>{const x=Cg(m),S=Ud(m);ud(l,ly(x,S))},setToMax:(l,m)=>{const x=kg(m),S=Gp(m);ud(l,ly(x,S))},getValueFromEvent:l=>gI(l),setPositionFromValue:(l,m,x,S)=>{const A=Tu(x),D=nM(l,S.getSpectrum(l),A.x,S.getLeftEdge(l),S.getRightEdge(l),x),E=tS(l,S.getSpectrum(l),A.y,S.getTopEdge(l),S.getBottomEdge(l),x),P=Ua(m.element)/2,B=Pi(m.element)/2;Yt(m.element,"left",D-P+"px"),Yt(m.element,"top",E-B+"px")},onLeft:nS,onRight:kI,onUp:TI,onDown:iM,edgeActions:oE});const hd=Ka({name:"Slider",configFields:[st("stepSize",1),st("speedMultiplier",10),st("onChange",de),st("onChoose",de),st("onInit",de),st("onDragStart",de),st("onDragEnd",de),st("snapToGrid",!1),st("rounded",!0),Bn("snapStart"),Ls("model",xr("mode",{x:[st("minX",0),st("maxX",100),Yi("value",l=>kn(l.mode.minX)),kt("getInitialValue"),Ko("manager",wI)],y:[st("minY",0),st("maxY",100),Yi("value",l=>kn(l.mode.minY)),kt("getInitialValue"),Ko("manager",nE)],xy:[st("minX",0),st("maxX",100),st("minY",0),st("maxY",100),Yi("value",l=>kn({x:l.mode.minX,y:l.mode.minY})),kt("getInitialValue"),Ko("manager",aN)]})),Nr("sliderBehaviours",[bn,Qt]),Yi("mouseIsDown",()=>kn(!1))],partFields:hI,factory:(l,m,x,S)=>{const A=ke=>sg(ke,l,"thumb"),D=ke=>sg(ke,l,"spectrum"),E=ke=>Vo(ke,l,"left-edge"),P=ke=>Vo(ke,l,"right-edge"),B=ke=>Vo(ke,l,"top-edge"),H=ke=>Vo(ke,l,"bottom-edge"),Z=l.model,G=Z.manager,oe=(ke,Ce)=>{G.setPositionFromValue(ke,Ce,l,{getLeftEdge:E,getRightEdge:P,getTopEdge:B,getBottomEdge:H,getSpectrum:D})},ce=(ke,Ce)=>{Z.value.set(Ce);const Ee=A(ke);oe(ke,Ee)},me=ke=>{const Ce=l.mouseIsDown.get();l.mouseIsDown.set(!1),Ce&&Vo(ke,l,"thumb").each(Ee=>{const Ne=Z.value.get();l.onChoose(ke,Ee,Ne)})},Te=(ke,Ce)=>{Ce.stop(),l.mouseIsDown.set(!0),l.onDragStart(ke,A(ke))},Ae=(ke,Ce)=>{Ce.stop(),l.onDragEnd(ke,A(ke)),me(ke)},ze=ke=>{Vo(ke,l,"spectrum").map(bn.focusIn)};return{uid:l.uid,dom:l.dom,components:m,behaviours:Pa(l.sliderBehaviours,[bn.config({mode:"special",focusIn:ze}),Qt.config({store:{mode:"manual",getValue:ke=>Z.value.get(),setValue:ce}}),Vs.config({channels:{[d0()]:{onReceive:me}}})]),events:gr([xt(Bx(),(ke,Ce)=>{((Ee,Ne)=>{ce(Ee,Ne);const Fe=A(Ee);l.onChange(Ee,Fe,Ne),F.some(!0)})(ke,Ce.event.value)}),qo((ke,Ce)=>{const Ee=Z.getInitialValue();Z.value.set(Ee);const Ne=A(ke);oe(ke,Ne);const Fe=D(ke);l.onInit(ke,Ne,Fe,Z.value.get())}),xt(Fl(),Te),xt(iu(),Ae),xt(cl(),(ke,Ce)=>{ze(ke),Te(ke,Ce)}),xt(pm(),Ae)]),apis:{resetToMin:ke=>{G.setToMin(ke,l)},resetToMax:ke=>{G.setToMax(ke,l)},setValue:ce,refresh:oe},domModification:{styles:{position:"relative"}}}},apis:{setValue:(l,m,x)=>{l.setValue(m,x)},resetToMin:(l,m)=>{l.resetToMin(m)},resetToMax:(l,m)=>{l.resetToMax(m)},refresh:(l,m)=>{l.refresh(m)}}}),aM=cn("rgb-hex-update"),Gx=cn("slider-update"),qp=cn("palette-update"),sM=[Nr("formBehaviours",[Qt])],nv=l=>"<alloy.field."+l+">",oS=(l,m)=>({uid:l.uid,dom:l.dom,components:m,behaviours:Pa(l.formBehaviours,[Qt.config({store:{mode:"manual",getValue:x=>{const S=$m(x,l);return Rn(S,(A,D)=>A().bind(E=>{return P=So.getCurrent(E),B=new Error(`Cannot find a current component to extract the value from for form part '${D}': `+$a(E.element)),P.fold(()=>so.error(B),so.value);var P,B}).map(Qt.getValue))},setValue:(x,S)=>{ao(S,(A,D)=>{Vo(x,l,D).each(E=>{So.getCurrent(E).each(P=>{Qt.setValue(P,A)})})})}}})]),apis:{getField:(x,S)=>Vo(x,l,S).bind(So.getCurrent)}}),jx={getField:Gh((l,m,x)=>l.getField(m,x)),sketch:l=>{const m=(()=>{const D=[];return{field:(E,P)=>(D.push(E),x_("form",nv(E),P)),record:ae(D)}})(),x=l(m),S=m.record(),A=Ct(S,D=>Ba({name:D,pname:nv(D)}));return bp("form",sM,A,oS,x)}},lM=cn("valid-input"),rS=cn("invalid-input"),rE=cn("validating-input"),iS="colorcustom.rgb.",MI={isEnabled:Se,setEnabled:de,immediatelyShow:de,immediatelyHide:de},ov=()=>So.config({find:F.some}),cM=l=>So.config({find:m=>zr(m.element,l).bind(x=>m.getSystem().getByDom(x).toOptional())}),AI=Et([st("preprocess",Ge),st("postprocess",Ge)]),aE=(l,m)=>{const x=nn("RepresentingConfigs.memento processors",AI,m);return Qt.config({store:{mode:"manual",getValue:S=>{const A=l.get(S),D=Qt.getValue(A);return x.postprocess(D)},setValue:(S,A)=>{const D=x.preprocess(A),E=l.get(S);Qt.setValue(E,D)}}})},$p=(l,m,x)=>Qt.config({store:{mode:"manual",...l.map(S=>({initialValue:S})).getOr({}),getValue:m,setValue:x}}),dM=(l,m,x)=>$p(l,S=>m(S.element),(S,A)=>x(S.element,A)),rv=l=>Qt.config({store:{mode:"memory",initialValue:l}}),II={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"};var sE=tinymce.util.Tools.resolve("tinymce.Resource");const uM=l=>bo(l,"init");var Mg=tinymce.util.Tools.resolve("tinymce.util.Tools");const qx=cn("browse.files.event"),cy=(l,m)=>{let x=null;const S=()=>{ne(x)||(clearTimeout(x),x=null)};return{cancel:S,throttle:(...A)=>{S(),x=setTimeout(()=>{x=null,l.apply(null,A)},m)}}},hM=cn("alloy-fake-before-tabstop"),$x=cn("alloy-fake-after-tabstop"),Yp=l=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:l},behaviours:Pt([Dn.config({ignore:!0}),cr.config({})])}),DI=(l,m)=>({dom:{tag:"div",classes:["tox-navobj",...l.getOr([])]},components:[Yp([hM]),m,Yp([$x])],behaviours:Pt([cM(1)])}),Yx=(l,m)=>{mn(l,sc(),{raw:{which:9,shiftKey:m}})},aS=(l,m)=>{const x=m.element;qa(x,hM)?Yx(l,!0):qa(x,$x)&&Yx(l,!1)},iv=l=>ny(l,["."+hM,"."+$x].join(","),ee),Xx=cn("update-dialog"),Zx=cn("update-title"),dy=cn("update-body"),gM=cn("update-footer"),OI=cn("body-send-message"),av=cn("dialog-focus-shifted"),sv=pn().browser,lv=sv.isSafari(),lN=sv.isFirefox(),cE=lv||lN,EI=sv.isChromium(),cN=({scrollTop:l,scrollHeight:m,clientHeight:x})=>Math.ceil(l)+x>=m,pM=(l,m)=>l.scrollTo(0,"bottom"===m?99999999:m),Ag=(l,m,x)=>{const S=l.dom;F.from(S.contentDocument).fold(x,A=>{let D=0;const E=((B,H)=>{const Z=B.body;return F.from(!/^<!DOCTYPE (html|HTML)/.test(H)&&(!EI&&!lv||W(Z)&&(0!==Z.scrollTop||Math.abs(Z.scrollHeight-Z.clientHeight)>1))?Z:B.documentElement)})(A,m).map(B=>(D=B.scrollTop,B)).forall(cN),P=()=>{const B=S.contentWindow;W(B)&&(E?pM(B,"bottom"):!E&&cE&&0!==D&&pM(B,D))};lv&&S.addEventListener("load",P,{once:!0}),A.open(),A.write(m),A.close(),lv||P()})},dE=go(cE,lv?500:200).map(l=>((m,x)=>{let S=null,A=null;return{cancel:()=>{ne(S)||(clearTimeout(S),S=null,A=null)},throttle:(...D)=>{A=D,ne(S)&&(S=setTimeout(()=>{const E=A;S=null,A=null,m.apply(null,E)},x))}}})(Ag,l)),NI=cn("toolbar.button.execute"),cv=cn("common-button-display-events"),uE={[ss()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[hl()]:["toolbar-button-events",cv],[Bs()]:["toolbar-button-events","dropdown-events","tooltipping"],[cl()]:["focusing","alloy.base.behaviour",cv]},mM=l=>Yt(l.element,"width",Di(l.element,"width")),uy=(l,m,x)=>Zl(l,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:x},m),RI=(l,m)=>uy(l,m,[]),Ig=(l,m)=>uy(l,m,[zn.config({})]),hy=(l,m,x)=>({dom:{tag:"span",classes:[`${m}__select-label`]},components:[Hr(x.translate(l))],behaviours:Pt([zn.config({})])}),kc=cn("update-menu-text"),dv=cn("update-menu-icon"),uv=(l,m,x,S)=>{const A=kn(de),D=l.text.map(Te=>Wo(hy(Te,m,x.providers))),E=l.icon.map(Te=>Wo(Ig(Te,x.providers.icons))),P=(Te,Ae)=>{const ze=Qt.getValue(Te);return Dn.focus(ze),mn(ze,"keydown",{raw:Ae.event.raw}),Sc.close(ze),F.some(!0)},B=l.role.fold(()=>({}),Te=>({role:Te})),H=F.from(l.listRole).map(Te=>({listRole:Te})).getOr({}),Z=l.ariaLabel.fold(()=>({}),Te=>({"aria-label":x.providers.translate(Te)})),G=Zl("chevron-down",{tag:"div",classes:[`${m}__select-chevron`]},x.providers.icons),oe=cn("common-button-display-events"),ce="dropdown-events";return Wo(Sc.sketch({...l.uid?{uid:l.uid}:{},...B,...H,dom:{tag:"button",classes:[m,`${m}--select`].concat(Ct(l.classes,Te=>`${m}--${Te}`)),attributes:{...Z,...W(S)?{"data-mce-name":S}:{}}},components:Nf([E.map(Te=>Te.asSpec()),D.map(Te=>Te.asSpec()),F.some(G)]),matchWidth:!0,useMinWidth:!0,onOpen:(Te,Ae,ze)=>{l.searchable&&Lp(ze).each(Ce=>Dn.focus(Ce))},dropdownBehaviours:Pt([...l.dropdownBehaviours,Of(()=>l.disabled||x.providers.checkUiComponentContext(l.context).shouldDisable),gi(()=>x.providers.checkUiComponentContext(l.context)),Lx.config({}),zn.config({}),...l.tooltip.map(Te=>vr.config(x.providers.tooltips.getConfig({tooltipText:x.providers.translate(Te)}))).toArray(),Fn(ce,[sd(l,A),ni(l,A)]),Fn(oe,[qo((Te,Ae)=>{"listbox"!==l.listRole&&mM(Te)})]),Fn("update-dropdown-width-variable",[xt(ul(),(Te,Ae)=>Sc.close(Te))]),Fn("menubutton-update-display-text",[xt(kc,(Te,Ae)=>{D.bind(ze=>ze.getOpt(Te)).each(ze=>{zn.set(ze,[Hr(x.providers.translate(Ae.event.text))])})}),xt(dv,(Te,Ae)=>{E.bind(ze=>ze.getOpt(Te)).each(ze=>{zn.set(ze,[Ig(Ae.event.icon,x.providers.icons)])})})])]),eventOrder:be(uE,{[cl()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[hl()]:["toolbar-button-events",vr.name(),ce,oe]}),sandboxBehaviours:Pt([bn.config({mode:"special",onLeft:P,onRight:P}),Fn("dropdown-sandbox-events",[xt(M2,(Te,Ae)=>{(ze=>{const ke=Qt.getValue(ze),Ce=gw(ze).map(V0);Sc.refetch(ke).get(()=>{const Ee=Zr.getCoupled(ke,"sandbox");Ce.each(Ne=>gw(Ee).each(Fe=>{return Qt.setValue($e=Fe,(ot=Ne).fetchPattern),$e.element.dom.selectionStart=ot.selectionStart,void($e.element.dom.selectionEnd=ot.selectionEnd);var $e,ot}))})})(Te),Ae.stop()}),xt(rd,(Te,Ae)=>{var ze,ke,Ce;ke=Ae,(Ce=ze=Te,Io.getState(Ce).bind(Wn.getHighlighted).bind(Wn.getHighlighted)).each(Ce=>{((Ee,Ne,Fe,$e)=>{const ot={...$e,target:Ne};Ee.getSystem().triggerEvent(Fe,Ne,ot)})(ze,Ce.element,ke.event.eventType,ke.event.interactionEvent)}),Ae.stop()})])]),lazySink:x.getSink,toggleClass:`${m}--active`,parts:{menu:{...wf(0,0,l.presets),fakeFocus:l.searchable,..."listbox"===l.listRole?{}:{onHighlightItem:tI,onCollapseMenu:(Te,Ae,ze)=>{Wn.getHighlighted(ze).each(ke=>{tI(Te,ze,ke)})},onDehighlightItem:UO}}},getAnchorOverrides:()=>({maxHeightFunction:(Te,Ae)=>{mb()(Te,Ae-10)}}),fetch:Te=>dd(Ue(l.fetch,Te))})).asSpec()},LI=l=>"separator"===l.type,dN={type:"separator"},PI=(l,m)=>{const x=((S,A)=>{const D=_n(S,(E,P)=>Q(P)?""===P?E:"|"===P?E.length>0&&!LI(E[E.length-1])?E.concat([dN]):E:bo(A,P.toLowerCase())?E.concat([A[P.toLowerCase()]]):E:E.concat([P]),[]);return D.length>0&&LI(D[D.length-1])&&D.pop(),D})(Q(l)?l.split(" "):l,m);return Jt(x,(S,A)=>{if(bo(A,"getSubmenuItems")){const E=((P,B)=>{const H=P.getSubmenuItems(),Z=PI(H,B);return{item:P,menus:be(Z.menus,{[P.value]:Z.items}),expansions:be(Z.expansions,{[P.value]:P.value})}})((P=>{const B=vn(P,"value").getOrThunk(()=>cn("generated-menu-item"));return be({value:B},P)})(A),m);return{menus:be(S.menus,E.menus),items:[E.item,...S.items],expansions:be(S.expansions,E.expansions)}}return{...S,items:[A,...S.items]}},{menus:{},expansions:{},items:[]})},gy=(l,m,x,S)=>{const A=cn("primary-menu"),D=PI(l,x.shared.providers.menuItems());if(0===D.items.length)return F.none();const E=S.search.fold(()=>({searchMode:"no-search"}),oe=>({searchMode:"search-with-field",placeholder:oe.placeholder})),P=Ex(A,D.items,m,x,S.isHorizontalMenu,E),B=S.search.fold(()=>({searchMode:"no-search"}),oe=>({searchMode:"search-with-results"})),H=Rn(D.menus,(G,oe)=>Ex(oe,G,m,x,!1,B)),Z=be(H,Yg(A,P));return F.from(fu.tieredData(A,Z,D.expansions))},py=l=>!bo(l,"items"),sS="data-value",fM=(l,m,x,S,A)=>Ct(x,D=>py(D)?{type:"togglemenuitem",...A?{}:{role:"option"},text:D.text,value:D.value,active:D.value===S,onAction:()=>{Qt.setValue(l,D.value),mn(l,Ys,{name:m}),Dn.focus(l)}}:{type:"nestedmenuitem",text:D.text,getSubmenuItems:()=>fM(l,m,D.items,S,A)}),Kx=(l,m)=>on(l,x=>py(x)?go(x.value===m,x):Kx(x.items,m)),BI=$l({name:"HtmlSelect",configFields:[kt("options"),Nr("selectBehaviours",[Dn,Qt]),st("selectClasses",[]),st("selectAttributes",{}),Bn("data")],factory:(l,m)=>{const x=Ct(l.options,A=>({dom:{tag:"option",value:A.value,innerHtml:A.text}})),S=l.data.map(A=>Yg("initialValue",A)).getOr({});return{uid:l.uid,dom:{tag:"select",classes:l.selectClasses,attributes:l.selectAttributes},components:x,behaviours:Pa(l.selectBehaviours,[Dn.config({}),Qt.config({store:{mode:"manual",getValue:A=>ei(A.element),setValue:(A,D)=>{const E=Tt(l.options);hn(l.options,P=>P.value===D).isSome()?jh(A.element,D):-1===A.element.dom.selectedIndex&&""===D&&E.each(P=>jh(A.element,P.value))},...S}})])}}}),lS=ae([st("field1Name","field1"),st("field2Name","field2"),Qu("onLockedChange"),Gc(["lockClass"]),st("locked",!1),Um("coupledFieldBehaviours",[So,Qt])]),zI=(l,m)=>Ba({factory:$o,name:l,overrides:x=>({fieldBehaviours:Pt([Fn("coupled-input-behaviour",[xt(Zg(),S=>{var A,D,E;(A=S,D=x,E=m,Vo(A,D,E).bind(So.getCurrent)).each(A=>{Vo(S,x,"lock").each(D=>{Qn.isOn(D)&&x.onLockedChange(S,A,D)})})})])])})}),FI=ae([zI("field1","field2"),zI("field2","field1"),Ba({factory:ua,schema:[kt("dom")],name:"lock",overrides:l=>({buttonBehaviours:Pt([Qn.config({selected:l.locked,toggleClass:l.markers.lockClass,aria:{mode:"pressed"}})])})})]),Xs=Ka({name:"FormCoupledInputs",configFields:lS(),partFields:FI(),factory:(l,m,x,S)=>({uid:l.uid,dom:l.dom,components:m,behaviours:fp(l.coupledFieldBehaviours,[So.config({find:F.some}),Qt.config({store:{mode:"manual",getValue:A=>{const D=Ho(A,l,["field1","field2"]);return{[l.field1Name]:Qt.getValue(D.field1()),[l.field2Name]:Qt.getValue(D.field2())}},setValue:(A,D)=>{const E=Ho(A,l,["field1","field2"]);Br(D,l.field1Name)&&Qt.setValue(E.field1(),D[l.field1Name]),Br(D,l.field2Name)&&Qt.setValue(E.field2(),D[l.field2Name])}}})]),apis:{getField1:A=>Vo(A,l,"field1"),getField2:A=>Vo(A,l,"field2"),getLock:A=>Vo(A,l,"lock")}}),apis:{getField1:(l,m)=>l.getField1(m),getField2:(l,m)=>l.getField2(m),getLock:(l,m)=>l.getLock(m)}}),Xp=l=>{const m=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(l);if(null!==m){const x=parseFloat(m[1]);return so.value({value:x,unit:m[2]})}return so.error(l)},hE=(l,m)=>{const x={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},S=A=>bo(x,A);return l.unit===m?F.some(l.value):S(l.unit)&&S(m)?F.some(x[l.unit]===x[m]?l.value:l.value/x[l.unit]*x[m]):F.none()},Du=l=>F.none(),cS=(l,m)=>{const x=l.label.map(Z=>qf(Z,m)),S=[Nn.config({disabled:()=>l.disabled||m.checkUiComponentContext(l.context).shouldDisable}),gi(()=>m.checkUiComponentContext(l.context)),bn.config({mode:"execution",useEnter:!0!==l.multiline,useControlEnter:!0===l.multiline,execute:Z=>(Zn(Z,$f),F.some(!0))}),Fn("textfield-change",[xt(Zg(),(Z,G)=>{mn(Z,Ys,{name:l.name})}),xt(ym(),(Z,G)=>{mn(Z,Ys,{name:l.name})})]),cr.config({})],A=l.validation.map(Z=>wh.config({getRoot:G=>tl(G.element),invalidClass:"tox-invalid",validator:{validate:G=>{const oe=Qt.getValue(G),ce=Z.validator(oe);return Hd(!0===ce?so.value(oe):so.error(ce))},validateOnLoad:Z.validateOnLoad}})).toArray(),D={...l.placeholder.fold(ae({}),Z=>({placeholder:m.translate(Z)})),...l.inputMode.fold(ae({}),Z=>({inputmode:Z})),"data-mce-name":l.name},E=$o.parts.field({tag:!0===l.multiline?"textarea":"input",...l.data.map(Z=>({data:Z})).getOr({}),inputAttributes:D,inputClasses:[l.classname],inputBehaviours:Pt(uo([S,A])),selectOnFocus:!1,factory:Fd}),P=l.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[E]}:E,B=(l.flex?["tox-form__group--stretched"]:[]).concat(l.maximized?["tox-form-group--maximize"]:[]),H=[Nn.config({disabled:()=>l.disabled||m.checkUiComponentContext(l.context).shouldDisable,onDisabled:Z=>{$o.getField(Z).each(Nn.disable)},onEnabled:Z=>{$o.getField(Z).each(Nn.enable)}}),gi(()=>m.checkUiComponentContext(l.context))];return ry(x,P,B,H)},Zp=(l,m)=>m.getAnimationRoot.fold(()=>l.element,x=>x(l)),ec=l=>l.dimension.property,Tc=(l,m)=>l.dimension.getDimension(m),hv=(l,m)=>{const x=Zp(l,m);zs(x,[m.shrinkingClass,m.growingClass])},my=(l,m)=>{Vr(l.element,m.openClass),ui(l.element,m.closedClass),Yt(l.element,ec(m),"0px"),Ph(l.element)},dS=(l,m)=>{Vr(l.element,m.closedClass),ui(l.element,m.openClass),No(l.element,ec(m))},fy=(l,m,x,S)=>{x.setCollapsed(),Yt(l.element,ec(m),Tc(m,l.element)),hv(l,m),my(l,m),m.onStartShrink(l),m.onShrunk(l)},gv=(l,m,x,S)=>{const A=S.getOrThunk(()=>Tc(m,l.element));x.setCollapsed(),Yt(l.element,ec(m),A),Ph(l.element);const D=Zp(l,m);Vr(D,m.growingClass),ui(D,m.shrinkingClass),my(l,m),m.onStartShrink(l)},Kp=(l,m,x)=>{const S=Tc(m,l.element);("0px"===S?fy:gv)(l,m,x,F.some(S))},Jx=(l,m,x)=>{const S=Zp(l,m),A=qa(S,m.shrinkingClass),D=Tc(m,l.element);dS(l,m);const E=Tc(m,l.element);(A?()=>{Yt(l.element,ec(m),D),Ph(l.element)}:()=>{my(l,m)})(),Vr(S,m.shrinkingClass),ui(S,m.growingClass),dS(l,m),Yt(l.element,ec(m),E),x.setExpanded(),m.onStartGrow(l)},vy=(l,m,x)=>{const S=Zp(l,m);return!0===qa(S,m.growingClass)},VI=(l,m,x)=>{const S=Zp(l,m);return!0===qa(S,m.shrinkingClass)};var HI=Object.freeze({__proto__:null,refresh:(l,m,x)=>{if(x.isExpanded()){No(l.element,ec(m));const S=Tc(m,l.element);Yt(l.element,ec(m),S)}},grow:(l,m,x)=>{x.isExpanded()||Jx(l,m,x)},shrink:(l,m,x)=>{x.isExpanded()&&Kp(l,m,x)},immediateShrink:(l,m,x)=>{x.isExpanded()&&fy(l,m,x)},hasGrown:(l,m,x)=>x.isExpanded(),hasShrunk:(l,m,x)=>x.isCollapsed(),isGrowing:vy,isShrinking:VI,isTransitioning:(l,m,x)=>vy(l,m)||VI(l,m),toggleGrow:(l,m,x)=>{(x.isExpanded()?Kp:Jx)(l,m,x)},disableTransitions:hv,immediateGrow:(l,m,x)=>{x.isExpanded()||(dS(l,m),Yt(l.element,ec(m),Tc(m,l.element)),hv(l,m),x.setExpanded(),m.onStartGrow(l),m.onGrown(l))}}),WI=Object.freeze({__proto__:null,exhibit:(l,m,x)=>Wl(m.expanded?{classes:[m.openClass],styles:{}}:{classes:[m.closedClass],styles:Yg(m.dimension.property,"0px")}),events:(l,m)=>gr([lc(Cd(),(x,S)=>{S.event.raw.propertyName===l.dimension.property&&(hv(x,l),m.isExpanded()&&No(x.element,l.dimension.property),(m.isExpanded()?l.onGrown:l.onShrunk)(x))})])}),uS=[kt("closedClass"),kt("openClass"),kt("shrinkingClass"),kt("growingClass"),Bn("getAnimationRoot"),Kn("onShrunk"),Kn("onStartShrink"),Kn("onGrown"),Kn("onStartGrow"),st("expanded",!1),Ls("dimension",xr("property",{width:[Ko("property","width"),Ko("getDimension",l=>Ua(l)+"px")],height:[Ko("property","height"),Ko("getDimension",l=>Pi(l)+"px")]}))];const us=Mi({fields:uS,name:"sliding",active:WI,apis:HI,state:Object.freeze({__proto__:null,init:l=>{const m=kn(l.expanded);return cc({isExpanded:()=>!0===m.get(),isCollapsed:()=>!1===m.get(),setCollapsed:Ue(m.set,!1),setExpanded:Ue(m.set,!0),readState:()=>"expanded: "+m.get()})}})}),Qx=l=>({isEnabled:()=>!Nn.isDisabled(l),setEnabled:m=>Nn.set(l,!m),setActive:m=>{const x=l.element;m?(ui(x,"tox-tbtn--enabled"),Pn(x,"aria-pressed",!0)):(Vr(x,"tox-tbtn--enabled"),tr(x,"aria-pressed"))},isActive:()=>qa(l.element,"tox-tbtn--enabled"),setText:m=>{mn(l,kc,{text:m})},setIcon:m=>mn(l,dv,{icon:m})}),yy=(l,m,x,S,A=!0,D)=>uv({text:l.text,icon:l.icon,tooltip:l.tooltip,ariaLabel:l.tooltip,searchable:l.search.isSome(),role:S,fetch:(E,P)=>{const B={pattern:l.search.isSome()?ty(E):""};l.fetch(H=>{P(gy(H,Cl.CLOSE_ON_EXECUTE,x,{isHorizontalMenu:!1,search:l.search}))},B,Qx(E))},onSetup:l.onSetup,getApi:Qx,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...A?[cr.config({})]:[]],context:l.context},m,x.shared,D),gE=(l,m,x)=>{const S=D=>E=>{const P=!E.isActive();E.setActive(P),D.storage.set(P),x.shared.getSink().each(B=>{m().getOpt(B).each(H=>{hc(H.element),mn(H,_h,{name:D.name,value:D.storage.get()})})})},A=D=>E=>{E.setActive(D.storage.get())};return D=>{D(Ct(l,E=>{const P=E.text.fold(()=>({}),B=>({text:B}));return{type:E.type,active:!1,...P,context:E.context,onAction:S(E),onSetup:A(E)}}))}},hS=l=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":l}},components:[Hr(l)]}),e1=(l,m,x)=>{l.customStateIcon.each(S=>m.push(gS(S,x.shared.providers.icons,l.customStateIconTooltip.fold(()=>[],A=>[vr.config(x.shared.providers.tooltips.getConfig({tooltipText:A}))]),["tox-icon-custom-state"],l.customStateIconTooltip.fold(()=>({}),A=>({title:A})))))},t1=cn("leaf-label-event-id"),vM=({leaf:l,onLeafAction:m,visible:x,treeId:S,selectedId:A,backstage:D})=>{const E=l.menu.map(B=>yy(B,"tox-mbtn",D,F.none(),x)),P=[hS(l.title)];return e1(l,P,D),E.each(B=>P.push(B)),ua.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(x?["tox-tree--leaf__label--visible"]:[])},components:P,role:"treeitem",action:B=>{m(l.id),B.getSystem().broadcastOn([`update-active-item-${S}`],{value:l.id})},eventOrder:{[sc()]:[t1,"keying"]},buttonBehaviours:Pt([...x?[cr.config({})]:[],Qn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Vs.config({channels:{[`update-active-item-${S}`]:{onReceive:(B,H)=>{(H.value===l.id?Qn.on:Qn.off)(B)}}}}),Fn(t1,[qo((B,H)=>{A.each(Z=>{(Z===l.id?Qn.on:Qn.off)(B)})}),xt(sc(),(B,H)=>{const G="ArrowRight"===H.event.raw.code;"ArrowLeft"===H.event.raw.code?(ti(B.element,".tox-tree--directory").each(oe=>{B.getSystem().getByDom(oe).each(ce=>{SA(oe,".tox-tree--directory__label").each(me=>{ce.getSystem().getByDom(me).each(Dn.focus)})})}),H.stop()):G&&H.stop()})])])})},gS=(l,m,x,S,A)=>Zl(l,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(S||[]),behaviours:x,attributes:A},m),n1=cn("directory-label-event-id"),pE=({directory:l,visible:m,noChildren:x,backstage:S})=>{const A=l.menu.map(B=>yy(B,"tox-mbtn",S,F.none())),D=[{dom:{tag:"div",classes:["tox-chevron"]},components:[(E=S.shared.providers.icons,gS("chevron-right",E,[]))]},hS(l.title)];var E;e1(l,D,S),A.each(B=>{D.push(B)});const P=B=>{ti(B.element,".tox-tree--directory").each(H=>{B.getSystem().getByDom(H).each(Z=>{const G=!Qn.isOn(Z);Qn.toggle(Z),mn(B,"expand-tree-node",{expanded:G,node:l.id})})})};return ua.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(m?["tox-tree--directory__label--visible"]:[])},components:D,action:P,eventOrder:{[sc()]:[n1,"keying"]},buttonBehaviours:Pt([...m?[cr.config({})]:[],Fn(n1,[xt(sc(),(B,H)=>{const Z="ArrowRight"===H.event.raw.code,G="ArrowLeft"===H.event.raw.code;Z&&x&&H.stop(),(Z||G)&&ti(B.element,".tox-tree--directory").each(oe=>{B.getSystem().getByDom(oe).each(ce=>{!Qn.isOn(ce)&&Z||Qn.isOn(ce)&&G?(P(B),H.stop()):G&&!Qn.isOn(ce)&&(ti(ce.element,".tox-tree--directory").each(me=>{SA(me,".tox-tree--directory__label").each(Te=>{ce.getSystem().getByDom(Te).each(Dn.focus)})}),H.stop())})})})])])})},mE=({children:l,onLeafAction:m,visible:x,treeId:S,expandedIds:A,selectedId:D,backstage:E})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:l.map(P=>"leaf"===P.type?vM({leaf:P,selectedId:D,onLeafAction:m,visible:x,treeId:S,backstage:E}):GI({directory:P,expandedIds:A,selectedId:D,onLeafAction:m,labelTabstopping:x,treeId:S,backstage:E})),behaviours:Pt([us.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:x}),zn.config({})])}),UI=cn("directory-event-id"),GI=({directory:l,onLeafAction:m,labelTabstopping:x,treeId:S,backstage:A,expandedIds:D,selectedId:E})=>{const{children:P}=l,B=kn(D),H=D.includes(l.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[pE({directory:l,visible:x,noChildren:0===l.children.length,backstage:A}),mE({children:P,expandedIds:D,selectedId:E,onLeafAction:m,visible:H,treeId:S,backstage:A})],behaviours:Pt([Fn(UI,[qo((Z,G)=>{Qn.set(Z,H)}),xt("expand-tree-node",(Z,G)=>{const{expanded:oe,node:ce}=G.event;B.set(oe?[...B.get(),ce]:B.get().filter(me=>me!==ce))})]),Qn.config({...l.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(Z,G)=>{const oe=Z.components()[1],ce=(me=G,P.map(Te=>"leaf"===Te.type?vM({leaf:Te,selectedId:E,onLeafAction:m,visible:me,treeId:S,backstage:A}):GI({directory:Te,expandedIds:B.get(),selectedId:E,onLeafAction:m,labelTabstopping:me,treeId:S,backstage:A})));var me;G?us.grow(oe):us.shrink(oe),zn.set(oe,ce)}})])}},jI=cn("tree-event-id");var pv=Object.freeze({__proto__:null,events:(l,m)=>{const x=l.stream.streams.setup(l,m);return gr([xt(l.event,x),_a(()=>m.cancel())].concat(l.cancelEvent.map(S=>[xt(S,()=>m.cancel())]).getOr([])))}});const yM=l=>{const m=kn(null);return cc({readState:()=>({timer:null!==m.get()?"set":"unset"}),setTimer:x=>{m.set(x)},cancel:()=>{const x=m.get();null!==x&&x.cancel()}})};var Mc=Object.freeze({__proto__:null,throttle:yM,init:l=>l.stream.streams.state(l)}),by=[Ls("stream",xr("mode",{throttle:[kt("delay"),st("stopEvent",!0),Ko("streams",{setup:(l,m)=>{const x=l.stream,S=cy(l.onStream,x.delay);return m.setTimer(S),(A,D)=>{S.throttle(A,D),x.stopEvent&&D.stop()}},state:yM})]})),st("event","input"),Bn("cancelEvent"),Qu("onStream")];const Dg=Mi({fields:by,name:"streaming",active:pv,state:Mc}),xy=(l,m,x)=>{const S=Qt.getValue(x);Qt.setValue(m,S),_y(m)},qI=(l,m)=>{const x=l.element,S=ei(x),A=x.dom;"number"!==qi(x,"type")&&m(A,S)},_y=l=>{qI(l,(m,x)=>m.setSelectionRange(x.length,x.length))},mv=ae("alloy.typeahead.itemexecute"),uN=ae([Bn("lazySink"),kt("fetch"),st("minChars",5),st("responseTime",1e3),Kn("onOpen"),st("getHotspot",F.some),st("getAnchorOverrides",ae({})),st("layouts",F.none()),st("eventOrder",{}),Rv("model",{},[st("getDisplayText",l=>void 0!==l.meta&&void 0!==l.meta.text?l.meta.text:l.value),st("selectsOver",!0),st("populateFromBrowse",!0)]),Kn("onSetValue"),Ss("onExecute"),Kn("onItemExecute"),st("inputClasses",[]),st("inputAttributes",{}),st("inputStyles",{}),st("matchWidth",!0),st("useMinWidth",!1),st("dismissOnBlur",!0),Gc(["openClass"]),Bn("initialData"),Bn("listRole"),Nr("typeaheadBehaviours",[Dn,Qt,Dg,bn,Qn,Zr]),Yi("lazyTypeaheadComp",()=>kn(F.none)),Yi("previewing",()=>kn(!0))].concat(kO()).concat(Fw())),pS=ae([Nd({schema:[Ju()],name:"menu",overrides:l=>({fakeFocus:!0,onHighlightItem:(m,x,S)=>{l.previewing.get()?l.lazyTypeaheadComp.get().each(A=>{((D,E,P)=>{if(D.selectsOver){const B=Qt.getValue(E),H=D.getDisplayText(B),Z=Qt.getValue(P);return 0===D.getDisplayText(Z).indexOf(H)?F.some(()=>{var oe;xy(0,E,P),oe=H.length,qI(E,(ce,me)=>ce.setSelectionRange(oe,me.length))}):F.none()}return F.none()})(l.model,A,S).fold(()=>{l.model.selectsOver?(Wn.dehighlight(x,S),l.previewing.set(!0)):l.previewing.set(!1)},D=>{D(),l.previewing.set(!1)})}):l.lazyTypeaheadComp.get().each(A=>{l.model.populateFromBrowse&&xy(0,A,S),mi(S.element,"id").each(D=>Pn(A.element,"aria-activedescendant",D))})},onExecute:(m,x)=>l.lazyTypeaheadComp.get().map(S=>(mn(S,mv(),{item:x}),!0)),onHover:(m,x)=>{l.previewing.set(!1),l.lazyTypeaheadComp.get().each(S=>{l.model.populateFromBrowse&&xy(0,S,x)})}})})]),$I=Ka({name:"Typeahead",configFields:uN(),partFields:pS(),factory:(l,m,x,S)=>{const A=(G,oe,ce)=>{l.previewing.set(!1);const me=Zr.getCoupled(G,"sandbox");if(Io.isOpen(me))So.getCurrent(me).each(Te=>{Wn.getHighlighted(Te).fold(()=>{ce(Te)},()=>{Jy(me,Te.element,"keydown",oe)})});else{const Te=Ae=>{So.getCurrent(Ae).each(ce)};zw(l,E(G),G,me,S,Te,Ai.HighlightMenuAndItem).get(de)}},D=T2(l),E=G=>oe=>oe.map(ce=>{const me=ho(ce.menus),Te=Yn(me,Ae=>to(Ae.items,ze=>"item"===ze.type));return Qt.getState(G).update(Ct(Te,Ae=>Ae.data)),ce}),P=G=>So.getCurrent(G),B="typeaheadevents",H=[Dn.config({}),Qt.config({onSetValue:l.onSetValue,store:{mode:"dataset",getDataKey:G=>ei(G.element),getFallbackEntry:G=>({value:G,meta:{}}),setValue:(G,oe)=>{jh(G.element,l.model.getDisplayText(oe))},...l.initialData.map(G=>Yg("initialValue",G)).getOr({})}}),Dg.config({stream:{mode:"throttle",delay:l.responseTime,stopEvent:!1},onStream:(G,oe)=>{const ce=Zr.getCoupled(G,"sandbox");if(Dn.isFocused(G)&&ei(G.element).length>=l.minChars){const me=P(ce).bind(Ae=>Wn.getHighlighted(Ae).map(Qt.getValue));l.previewing.set(!0);const Te=Ae=>{P(ce).each(ze=>{me.fold(()=>{l.model.selectsOver&&Wn.highlightFirst(ze)},ke=>{Wn.highlightBy(ze,Ce=>Qt.getValue(Ce).value===ke.value),Wn.getHighlighted(ze).orThunk(()=>(Wn.highlightFirst(ze),F.none()))})})};zw(l,E(G),G,ce,S,Te,Ai.HighlightJustMenu).get(de)}},cancelEvent:Bv()}),bn.config({mode:"special",onDown:(G,oe)=>(A(G,oe,Wn.highlightFirst),F.some(!0)),onEscape:G=>{const oe=Zr.getCoupled(G,"sandbox");return Io.isOpen(oe)?(Io.close(oe),F.some(!0)):F.none()},onUp:(G,oe)=>(A(G,oe,Wn.highlightLast),F.some(!0)),onEnter:G=>{const oe=Zr.getCoupled(G,"sandbox"),ce=Io.isOpen(oe);if(ce&&!l.previewing.get())return P(oe).bind(me=>Wn.getHighlighted(me)).map(me=>(mn(G,mv(),{item:me}),!0));{const me=Qt.getValue(G);return Zn(G,Bv()),l.onExecute(oe,G,me),ce&&Io.close(oe),F.some(!0)}}}),Qn.config({toggleClass:l.markers.openClass,aria:{mode:"expanded"}}),Zr.config({others:{sandbox:G=>Dx(l,G,{onOpen:()=>Qn.on(G),onClose:()=>{l.lazyTypeaheadComp.get().each(oe=>tr(oe.element,"aria-activedescendant")),Qn.off(G)}})}}),Fn(B,[qo(G=>{l.lazyTypeaheadComp.set(F.some(G))}),_a(G=>{l.lazyTypeaheadComp.set(F.none())}),Hl(G=>{const oe=de;NT(l,E(G),G,S,oe,Ai.HighlightMenuAndItem).get(de)}),xt(mv(),(G,oe)=>{const ce=Zr.getCoupled(G,"sandbox");xy(0,G,oe.event.item),Zn(G,Bv()),l.onItemExecute(G,ce,oe.event.item,Qt.getValue(G)),Io.close(ce),_y(G)})].concat(l.dismissOnBlur?[xt(vm(),G=>{const oe=Zr.getCoupled(G,"sandbox");vl(oe.element).isNone()&&Io.close(oe)})]:[]))],Z={[Bs()]:[Qt.name(),Dg.name(),B],...l.eventOrder};return{uid:l.uid,dom:qs(be(l,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...D,...Pa(l.typeaheadBehaviours,H)},eventOrder:Z}}}),Ou=l=>({...l,toCached:()=>Ou(l.toCached()),bindFuture:m=>Ou(l.bind(x=>x.fold(S=>Hd(so.error(S)),S=>m(S)))),bindResult:m=>Ou(l.map(x=>x.bind(m))),mapResult:m=>Ou(l.map(x=>x.map(m))),mapError:m=>Ou(l.map(x=>x.mapError(m))),foldResult:(m,x)=>l.map(S=>S.fold(m,x)),withTimeout:(m,x)=>Ou(dd(S=>{let A=!1;const D=setTimeout(()=>{A=!0,S(so.error(x()))},m);l.get(E=>{A||(clearTimeout(D),S(E))})}))}),fv=(l,m,x=[],S,A,D,E)=>{const P=m.fold(()=>({}),Z=>({action:Z})),B={buttonBehaviours:Pt([Tw(()=>!l.enabled||E.checkUiComponentContext(l.context).shouldDisable),gi(()=>E.checkUiComponentContext(l.context)),cr.config({}),...D.map(Z=>vr.config(E.tooltips.getConfig({tooltipText:E.translate(Z)}))).toArray(),Fn("button press",[eb("click")])].concat(x)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...P},H=be(B,{dom:S});return be(H,{components:A})},fE=(l,m,x,S=[],A)=>{const D={tag:"button",classes:["tox-tbtn"],attributes:{...l.tooltip.map(B=>({"aria-label":x.translate(B)})).getOr({}),"data-mce-name":A}},E=l.icon.map(B=>RI(B,x.icons)),P=Nf([E]);return fv(l,m,S,D,P,l.tooltip,x)},o1=l=>{switch(l){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}},YI=(l,m,x,S=[],A=[])=>{const D=x.translate(l.text),E=l.icon.map(G=>RI(G,x.icons)),P=[E.getOrThunk(()=>Hr(D))],B=l.buttonType.getOr(l.primary||l.borderless?"primary":"secondary"),H={tag:"button",classes:[...o1(B),...E.isSome()?["tox-button--icon"]:[],...l.borderless?["tox-button--naked"]:[],...A],attributes:{"aria-label":D,"data-mce-name":l.text}},Z=l.icon.map(ae(D));return fv(l,m,S,H,P,Z,x)},XI=(l,m,x,S=[],A=[])=>{const D=YI(l,F.some(m),x,S,A);return ua.sketch(D)},vE=(l,m)=>x=>{"custom"===m?mn(x,_h,{name:l,value:{}}):"submit"===m?Zn(x,$f):"cancel"===m?Zn(x,xh):console.error("Unknown button type: ",m)},mS=(l,m,x)=>{if("menu"===m){const S=()=>E,A=l,D={...l,type:"menubutton",search:F.none(),onSetup:P=>(P.setEnabled(l.enabled),de),fetch:gE(A.items,S,x)},E=Wo(yy(D,"tox-tbtn",x,F.none(),!0,l.text.or(l.tooltip).getOrUndefined()));return E.asSpec()}if("custom"===(A=m)||"cancel"===A||"submit"===A){const S=vE(l.name,m),A={...l,context:"cancel"===m?"any":l.context,borderless:!1};return XI(A,S,x.shared.providers,[])}var A;if(((S,A)=>"togglebutton"===A)(0,m))return((S,A,D)=>{var E,P;const B=S.icon.map(Ce=>Ig(Ce,A.icons)).map(Wo),H=S.buttonType.getOr(S.primary?"primary":"secondary"),Z={...S,name:null!==(E=S.name)&&void 0!==E?E:"",primary:"primary"===H,tooltip:S.tooltip,enabled:null!==(P=S.enabled)&&void 0!==P&&P,borderless:!1},G=Z.tooltip.or(S.text).map(Ce=>({"aria-label":A.translate(Ce)})).getOr({}),oe=o1(H??"secondary"),ce=S.icon.isSome()&&S.text.isSome(),me={tag:"button",classes:[...oe.concat(S.icon.isSome()?["tox-button--icon"]:[]),...S.active?["tox-button--enabled"]:[],...ce?["tox-button--icon-and-text"]:[]],attributes:{...G,...W(D)?{"data-mce-name":D}:{}}},Te=A.translate(S.text.getOr("")),Ae=Hr(Te),ze=[...Nf([B.map(Ce=>Ce.asSpec())]),...S.text.isSome()?[Ae]:[]],ke=fv(Z,F.some(Ce=>{mn(Ce,_h,{name:S.name,value:{setIcon:Ee=>{B.map(Ne=>Ne.getOpt(Ce).each(Fe=>{zn.set(Fe,[Ig(Ee,A.icons)])}))}}})}),[],me,ze,S.tooltip,A);return ua.sketch(ke)})(l,x.shared.providers,l.text.or(l.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",m),new Error("Unknown footer button type")},ZI={type:"separator"},bM=l=>({type:"menuitem",value:l.url,text:l.title,meta:{attach:l.attach},onAction:de}),fS=(l,m)=>({type:"menuitem",value:m,text:l,meta:{attach:void 0},onAction:de}),vS=(l,m)=>{return(x=>Ct(x,bM))((x=l,to(m,A=>A.type===x)));var x},KI=l=>vS("header",l.targets),r1=l=>vS("anchor",l.targets),yE=l=>F.from(l.anchorTop).map(m=>fS("<top>",m)).toArray(),hN=l=>F.from(l.anchorBottom).map(m=>fS("<bottom>",m)).toArray(),yS=(l,m)=>{const x=l.toLowerCase();return to(m,S=>{var A;const E=null!==(A=S.value)&&void 0!==A?A:"";return ji((void 0!==S.meta&&void 0!==S.meta.text?S.meta.text:S.text).toLowerCase(),x)||ji(E.toLowerCase(),x)})},JI=cn("aria-invalid"),bE=(l,m)=>{l.dom.checked=m},xE=l=>l.dom.checked,Ri=l=>(m,x,S,A,D)=>vn(x,"name").fold(()=>l(x,A,F.none(),D),E=>m.field(E,l(x,A,vn(S,E),D))),bS={bar:Ri((l,m)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ct(l.items,m.shared.interpreter)})),collection:Ri((l,m,x)=>((l,m,x)=>{const S=l.label.map(G=>qf(G,m)),A=m.icons(),D=G=>(oe,ce)=>{Yh(ce.event.target,"[data-collection-item-value]").each(me=>{G(oe,ce,me,qi(me,"data-collection-item-value"))})},E=D((G,oe,ce,me)=>{oe.stop(),m.checkUiComponentContext("mode:design").shouldDisable||m.isDisabled()||mn(G,_h,{name:l.name,value:me})}),P=[xt(Xi(),D((G,oe,ce)=>{hc(ce,!0)})),xt(mm(),E),xt(Xy(),E),xt(dl(),D((G,oe,ce)=>{$r(G.element,"."+_f).each(me=>{Vr(me,_f)}),ui(ce,_f)})),xt(F1(),D(G=>{$r(G.element,"."+_f).each(oe=>{Vr(oe,_f),o0(oe)})})),Hl(D((G,oe,ce,me)=>{mn(G,_h,{name:l.name,value:me})}))],B=(G,oe)=>Ct(Qi(G.element,".tox-collection__item"),oe),H=$o.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==l.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Ge},behaviours:Pt([Nn.config({disabled:()=>m.checkUiComponentContext(l.context).shouldDisable,onDisabled:G=>{B(G,oe=>{ui(oe,"tox-collection__item--state-disabled"),Pn(oe,"aria-disabled",!0)})},onEnabled:G=>{B(G,oe=>{Vr(oe,"tox-collection__item--state-disabled"),tr(oe,"aria-disabled")})}}),gi(()=>m.checkUiComponentContext(l.context)),zn.config({}),vr.config({...m.tooltips.getConfig({tooltipText:"",onShow:G=>{$r(G.element,"."+_f+"[data-mce-tooltip]").each(oe=>{mi(oe,"data-mce-tooltip").each(ce=>{vr.setComponents(G,m.tooltips.getComponents({tooltipText:ce}))})})}}),mode:"children-keyboard-focus",anchor:G=>({type:"node",node:$r(G.element,"."+_f).orThunk(()=>Nc(".tox-collection__item")),root:G.element,layouts:{onLtr:ae([Ji,sa,Ki,Na,Vi,Ra]),onRtl:ae([Ji,sa,Ki,Na,Vi,Ra])},bubble:Gl(0,-2,{})})}),Qt.config({store:{mode:"memory",initialValue:x.getOr([])},onSetValue:(G,oe)=>{((ce,me)=>{const Te=m.checkUiComponentContext("mode:design").shouldDisable||m.isDisabled()?" tox-collection__item--state-disabled":"",Ae=Ct(me,Ce=>{const Ee=nd.translate(Ce.text),Ne=1===l.columns?`<div class="tox-collection__item-label">${Ee}</div>`:"",Fe=`<div class="tox-collection__item-icon">${bt=Ce.icon,null!==(mt=A[bt])&&void 0!==mt?mt:bt}</div>`,$e={_:" "," - ":" ","-":" "},ot=Ee.replace(/\_| \- |\-/g,bt=>$e[bt]);var bt,mt;return`<div data-mce-tooltip="${ot}" class="tox-collection__item${Te}" tabindex="-1" data-collection-item-value="${iI.encodeAllRaw(Ce.value)}" aria-label="${ot}">${Fe}${Ne}</div>`}),ze="auto"!==l.columns&&l.columns>1?ue(Ae,l.columns):[Ae],ke=Ct(ze,Ce=>`<div class="tox-collection__group">${Ce.join("")}</div>`);cu(ce.element,ke.join(""))})(G,oe),"auto"===l.columns&&kw(G,5,"tox-collection__item").each(({numRows:ce,numColumns:me})=>{bn.setGridSize(G,ce,me)}),Zn(G,$O)}}),cr.config({}),bn.config((Z=l.columns,1===Z?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===Z?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:`.${ax}`}})),Fn("collection-events",P)]),eventOrder:{[ss()]:["disabling","alloy.base.behaviour","collection-events"],[dl()]:["collection-events","tooltipping"]}});var Z;return ry(S,H,["tox-form__group--collection"],[])})(l,m.shared.providers,x)),alertbanner:Ri((l,m)=>((x,S)=>{const A=oT(x.icon,S.icons);return Cc.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${x.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:x.url?void 0:A},components:x.url?[ua.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:A,attributes:{title:S.translate(x.iconTooltip)}},action:D=>mn(D,_h,{name:"alert-banner",value:x.url}),buttonBehaviours:Pt([rT()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:S.translate(x.text)}}]})})(l,m.shared.providers)),input:Ri((l,m,x)=>{return A=m.shared.providers,D=x,cS({name:(S=l).name,multiline:!1,label:S.label,inputMode:S.inputMode,placeholder:S.placeholder,flex:!1,disabled:!S.enabled,classname:"tox-textfield",validation:F.none(),maximized:S.maximized,data:D,context:S.context},A);var S,A,D}),textarea:Ri((l,m,x)=>{return A=m.shared.providers,D=x,cS({name:(S=l).name,multiline:!0,label:S.label,inputMode:F.none(),placeholder:S.placeholder,flex:!0,disabled:!S.enabled,classname:"tox-textarea",validation:F.none(),maximized:S.maximized,data:D,context:S.context},A);var S,A,D}),label:Ri((l,m,x,S)=>((A,D,E)=>{const P="tox-label",Z=Wo({dom:{tag:"label",classes:[P,..."center"===A.align?[`${P}--center`]:[],..."end"===A.align?[`${P}--end`]:[]]},components:[Hr(D.providers.translate(A.label))]}),G=Ct(A.items,D.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[Z.asSpec(),...G],behaviours:Pt([ov(),zn.config({}),(oe=F.none(),dM(oe,Cm,cu)),bn.config({mode:"acyclic"}),Fn("label",[qo(ce=>{A.for.each(me=>{E(me).each(Te=>{Z.getOpt(ce).each(Ae=>{var ze;const ke=null!==(ze=qi(Te.element,"id"))&&void 0!==ze?ze:cn("form-field");Pn(Te.element,"id",ke),Pn(Ae.element,"for",ke)})})})})])])};var oe})(l,m.shared,S)),iframe:(Ng=(l,m,x)=>((S,A,D)=>{const E="tox-dialog__iframe",P=S.transparent?[]:[`${E}--opaque`],B=S.border?["tox-navobj-bordered"]:[],H={...S.label.map(ce=>({title:ce})).getOr({}),...D.map(ce=>({srcdoc:ce})).getOr({}),...S.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},Z=((ce,me)=>{const Te=kn(ce.getOr(""));return{getValue:Ae=>Te.get(),setValue:(Ae,ze)=>{if(Te.get()!==ze){const ke=Ae.element,Ce=()=>Pn(ke,"srcdoc",ze);me?dE.fold(ae(Ag),Ee=>Ee.throttle)(ke,ze,Ce):Ce()}Te.set(ze)}}})(D,S.streamContent),G=S.label.map(ce=>qf(ce,A)),oe=$o.parts.field({factory:{sketch:ce=>DI(F.from(B),{uid:ce.uid,dom:{tag:"iframe",attributes:H,classes:[E,...P]},behaviours:Pt([cr.config({}),Dn.config({}),$p(D,Z.getValue,Z.setValue),Vs.config({channels:{[av]:{onReceive:(me,Te)=>{Te.newFocus.each(Ae=>{tl(me.element).each(ze=>{(po(me.element,Ae)?ui:Vr)(ze,"tox-navobj-bordered-focus")})})}}}})])})}});return ry(G,oe,["tox-form__group--stretched"],[])})(l,m.shared.providers,x),(l,m,x,S,A)=>{const D=be(m,{source:"dynamic"});return Ri(Ng)(l,D,x,S,A)}),button:Ri((l,m)=>((x,S)=>{const A=vE(x.name,"custom");return D=F.none(),E=$o.parts.field({factory:ua,...YI(x,F.some(A),S,[rv(""),ov()])}),ry(D,E,[],[]);var D,E})(l,m.shared.providers)),checkbox:Ri((l,m,x)=>((S,A,D)=>{const E=G=>(G.element.dom.click(),F.some(!0)),P=$o.parts.field({factory:{sketch:Ge},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Pt([ov(),Nn.config({disabled:()=>!S.enabled||A.checkUiComponentContext(S.context).shouldDisable,onDisabled:G=>{tl(G.element).each(oe=>ui(oe,"tox-checkbox--disabled"))},onEnabled:G=>{tl(G.element).each(oe=>Vr(oe,"tox-checkbox--disabled"))}}),cr.config({}),Dn.config({}),dM(D,xE,bE),bn.config({mode:"special",onEnter:E,onSpace:E,stopSpaceKeyup:!0}),Fn("checkbox-events",[xt(Kg(),(G,oe)=>{mn(G,Ys,{name:S.name})})])])}),B=$o.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Hr(A.translate(S.label))],behaviours:Pt([Lx.config({})])}),H=G=>Zl("checked"===G?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+G]},A.icons),Z=Wo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[H("checked"),H("unchecked")]});return $o.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[P,Z.asSpec(),B],fieldBehaviours:Pt([Nn.config({disabled:()=>!S.enabled||A.checkUiComponentContext(S.context).shouldDisable}),gi(()=>A.checkUiComponentContext(S.context))])})})(l,m.shared.providers,x)),colorinput:Ri((l,m,x)=>((S,A,D,E)=>{const P=$o.parts.field({factory:Fd,inputClasses:["tox-textfield"],data:E,onSetValue:G=>wh.run(G).get(de),inputBehaviours:Pt([Nn.config({disabled:()=>A.providers.isDisabled()||A.providers.checkUiComponentContext(S.context).shouldDisable}),gi(()=>A.providers.checkUiComponentContext(S.context)),cr.config({}),wh.config({invalidClass:"tox-textbox-field-invalid",getRoot:G=>tl(G.element),notify:{onValid:G=>{const oe=Qt.getValue(G);mn(G,cI,{color:oe})}},validator:{validateOnLoad:!1,validate:G=>{const oe=Qt.getValue(G);if(0===oe.length)return Hd(so.value(!0));{const ce=ma("span");Yt(ce,"background-color",oe);const me=kr(ce,"background-color").fold(()=>so.error("blah"),Te=>so.value(oe));return Hd(me)}}}})]),selectOnFocus:!1}),B=S.label.map(G=>qf(G,A.providers)),H=(G,oe)=>{mn(G,VT,{value:oe})},Z=Wo((G={dom:{tag:"span",attributes:{"aria-label":A.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Vi,Ki,Ji],onLtr:()=>[Ki,Vi,Ji]},components:[],fetch:TT(D.getColors(S.storageKey),S.storageKey,D.hasCustomColors()),columns:D.getColorCols(S.storageKey),presets:"color",onItemAction:(G,oe)=>{Z.getOpt(G).each(ce=>{"custom"===oe?D.colorPicker(me=>{me.fold(()=>Zn(ce,iy),Te=>{H(ce,Te),cd(S.storageKey,Te)})},"#ffffff"):H(ce,"remove"===oe?"":oe)})},context:S.context},oe=A,Sc.sketch({dom:G.dom,components:G.components,toggleClass:"mce-active",dropdownBehaviours:Pt([Of(()=>oe.providers.isDisabled()||oe.providers.checkUiComponentContext(G.context).shouldDisable),gi(()=>oe.providers.checkUiComponentContext(G.context)),Lx.config({}),cr.config({})]),layouts:G.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:oe.getSink,fetch:ce=>dd(me=>G.fetch(me)).map(me=>F.from(Jl(be(Nw(cn("menu-value"),me,Te=>{G.onItemAction(ce,Te)},G.columns,G.presets,Cl.CLOSE_ON_EXECUTE,ee,oe.providers),{movement:Mx(G.columns,G.presets)})))),parts:{menu:wf(0,0,G.presets)}})));var G,oe;return $o.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:B.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[P,Z.asSpec()]}]),fieldBehaviours:Pt([Fn("form-field-events",[xt(cI,(G,oe)=>{Z.getOpt(G).each(ce=>{Yt(ce.element,"background-color",oe.event.color)}),mn(G,Ys,{name:S.name})}),xt(VT,(G,oe)=>{$o.getField(G).each(ce=>{Qt.setValue(ce,oe.event.value),So.getCurrent(G).each(Dn.focus)})}),xt(iy,(G,oe)=>{$o.getField(G).each(ce=>{So.getCurrent(G).each(Dn.focus)})})])])})})(l,m.shared,m.colorinput,x)),colorpicker:Ri((l,m,x)=>((S,A,D)=>{const E=H=>"tox-"+H,P=((l,m,x,S)=>$l({name:"ColourPicker",configFields:[kt("dom"),st("onValidHex",de),st("onInvalidHex",de)],factory:D=>{const E=((l,m,x,S,A,D)=>{const E=(ce,me)=>{const Te=me.get();ce!==Te.isEnabled()&&(Te.setEnabled(ce),ce?Te.immediatelyShow():Te.immediatelyHide())},P=(ce,me,Te)=>wh.config({invalidClass:m("invalid"),notify:{onValidate:Ae=>{mn(Ae,rE,{type:ce})},onValid:Ae=>{E(!1,Te),mn(Ae,lM,{type:ce,value:Qt.getValue(Ae)})},onInvalid:Ae=>{E(!0,Te),mn(Ae,rS,{type:ce,value:Qt.getValue(Ae)})}},validator:{validate:Ae=>{const ze=Qt.getValue(Ae),ke=me(ze)?so.value(!0):so.error(l("aria.input.invalid"));return Hd(ke)},validateOnLoad:!1}}),B=(ce,me,Te,Ae,ze)=>{const ke=kn(MI),Ce=l(iS+"range"),Ee=$o.parts.label({dom:{tag:"label",attributes:{"aria-label":Ae}},components:[Hr(Te)]}),Ne=$o.parts.field({data:ze,factory:Fd,inputAttributes:{type:"text",..."hex"===me?{"aria-live":"polite"}:{}},inputClasses:[m("textfield")],inputBehaviours:Pt([P(me,ce,ke),cr.config({}),vr.config({...A({tooltipText:"",onSetup:vt=>{ke.set({isEnabled:()=>vr.isEnabled(vt),setEnabled:Ot=>vr.setEnabled(vt,Ot),immediatelyShow:()=>vr.immediateOpenClose(vt,!0),immediatelyHide:()=>vr.immediateOpenClose(vt,!1)}),vr.setEnabled(vt,!1)},onShow:(vt,Ot)=>{vr.setComponents(vt,[{dom:{tag:"p",classes:[m("rgb-warning-note")]},components:[Hr(l("hex"===me?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:vt=>{wh.isInvalid(vt)&&wh.run(vt).get(de)}}),Fe=cn("aria-invalid"),$e=Wo(D("invalid",F.some(Fe),"warning")),ot=[Ee,Ne,Wo({dom:{tag:"div",classes:[m("invalid-icon")]},components:[$e.asSpec()]}).asSpec()],bt="hex"!==me?[$o.parts["aria-descriptor"]({text:Ce})]:[],mt=ot.concat(bt);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[m("rgb-container")]},components:mt}},H=(ce,me)=>{Qt.setValue(ce,{red:me.red,green:me.green,blue:me.blue})},Z=Wo({dom:{tag:"div",classes:[m("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),G=(ce,me)=>{Z.getOpt(ce).each(Te=>{Yt(Te.element,"background-color","#"+me.value)})};return $l({factory:()=>{const ce={red:kn(F.some(255)),green:kn(F.some(255)),blue:kn(F.some(255)),hex:kn(F.some("ffffff"))},me=ot=>ce[ot].get(),Te=(ot,bt)=>{ce[ot].set(bt)},Ae=ot=>{const mt=ot.green,vt=ot.blue;Te("red",F.some(ot.red)),Te("green",F.some(mt)),Te("blue",F.some(vt))},ze=(ot,bt)=>{const mt=bt.event;"hex"!==mt.type?Te(mt.type,F.none()):S(ot)},ke=(ot,bt)=>{const mt=bt.event;"hex"===mt.type?((vt,Ot)=>{x(vt);const an=yx(Ot);Te("hex",F.some(an.value));const Cn=Vp(an);H(vt,Cn),Ae(Cn),mn(vt,aM,{hex:an}),G(vt,an)})(ot,mt.value):((vt,Ot,an)=>{const Cn=parseInt(an,10);Te(Ot,F.some(Cn)),me("red").bind(An=>me("green").bind(Gn=>me("blue").map(ko=>Fp(An,Gn,ko,1)))).each(An=>{const Gn=((ko,ri)=>{const ii=xx(ri);return jx.getField(ko,"hex").each(Jo=>{Dn.isFocused(Jo)||Qt.setValue(ko,{hex:ii.value})}),ii})(vt,An);mn(vt,aM,{hex:Gn}),G(vt,Gn)})})(ot,mt.type,mt.value)},Ce=ot=>({label:l(iS+ot+".label"),description:l(iS+ot+".description")}),Ee=Ce("red"),Ne=Ce("green"),Fe=Ce("blue"),$e=Ce("hex");return be(jx.sketch(ot=>({dom:{tag:"form",classes:[m("rgb-form")],attributes:{"aria-label":l("aria.color.picker")}},components:[ot.field("red",$o.sketch(B(_x,"red",Ee.label,Ee.description,255))),ot.field("green",$o.sketch(B(_x,"green",Ne.label,Ne.description,255))),ot.field("blue",$o.sketch(B(_x,"blue",Fe.label,Fe.description,255))),ot.field("hex",$o.sketch(B(Pf,"hex",$e.label,$e.description,"ffffff"))),Z.asSpec()],formBehaviours:Pt([wh.config({invalidClass:m("form-invalid")}),Fn("rgb-form-events",[xt(lM,ke),xt(rS,ze),xt(rE,ze)])])})),{apis:{updateHex:(ot,bt)=>{Qt.setValue(ot,{hex:bt.value}),((mt,vt)=>{const Ot=Vp(vt);H(mt,Ot),Ae(Ot)})(ot,bt),G(ot,bt)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(ce,me,Te)=>{ce.updateHex(me,Te)}},extraApis:{}})})(l,m,D.onValidHex,D.onInvalidHex,x,S),P=((ze,ke)=>{const Ce=hd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[ke("sv-palette-spectrum")]}}),Ee=hd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[ke("sv-palette-thumb")],innerHtml:`<div class=${ke("sv-palette-inner-thumb")} role="presentation"></div>`}}),Ne=(Fe,$e)=>{const{width:ot,height:bt}=Fe,mt=Fe.getContext("2d");if(null===mt)return;mt.fillStyle=$e,mt.fillRect(0,0,ot,bt);const vt=mt.createLinearGradient(0,0,ot,0);vt.addColorStop(0,"rgba(255,255,255,1)"),vt.addColorStop(1,"rgba(255,255,255,0)"),mt.fillStyle=vt,mt.fillRect(0,0,ot,bt);const Ot=mt.createLinearGradient(0,0,0,bt);Ot.addColorStop(0,"rgba(0,0,0,0)"),Ot.addColorStop(1,"rgba(0,0,0,1)"),mt.fillStyle=Ot,mt.fillRect(0,0,ot,bt)};return $l({factory:Fe=>{const $e=ae({x:0,y:0}),ot=Pt([So.config({find:F.some}),Dn.config({})]);return hd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":ze(["Saturation {0}%, Brightness {1}%",0,0])},classes:[ke("sv-palette")]},model:{mode:"xy",getInitialValue:$e},rounded:!1,components:[Ce,Ee],onChange:(bt,mt,vt)=>{K(vt)||Pn(bt.element,"aria-valuetext",ze(["Saturation {0}%, Brightness {1}%",Math.floor(vt.x),Math.floor(100-vt.y)])),mn(bt,qp,{value:vt})},onInit:(bt,mt,vt,Ot)=>{Ne(vt.element.dom,Iw(U2))},sliderBehaviours:ot})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(Fe,$e,ot)=>{((bt,mt)=>{const vt=bt.components()[0].element.dom,Ot=Wf(mt,100,100),an=Sx(Ot);Ne(vt,Iw(an))})($e,ot)},setThumb:(Fe,$e,ot)=>{((bt,mt)=>{const vt=xT(Vp(mt));hd.setValue(bt,{x:vt.saturation,y:100-vt.value}),Pn(bt.element,"aria-valuetext",ze(["Saturation {0}%, Brightness {1}%",vt.saturation,vt.value]))})($e,ot)}},extraApis:{}})})(l,m),B={paletteRgba:kn(U2),paletteHue:kn(0)},H=Wo(((ze,ke)=>{const Ce=hd.parts.spectrum({dom:{tag:"div",classes:[ke("hue-slider-spectrum")],attributes:{role:"presentation"}}}),Ee=hd.parts.thumb({dom:{tag:"div",classes:[ke("hue-slider-thumb")],attributes:{role:"presentation"}}});return hd.sketch({dom:{tag:"div",classes:[ke("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ae(0)},components:[Ce,Ee],sliderBehaviours:Pt([Dn.config({})]),onChange:(Ne,Fe,$e)=>{Pn(Ne.element,"aria-valuenow",Math.floor(360-3.6*$e)),mn(Ne,Gx,{value:$e})}})})(0,m)),Z=Wo(P.sketch({})),G=Wo(E.sketch({})),oe=(ze,ke,Ce)=>{Z.getOpt(ze).each(Ee=>{P.setHue(Ee,Ce)})},ce=(ze,ke)=>{G.getOpt(ze).each(Ce=>{E.updateHex(Ce,ke)})},me=(ze,ke,Ce)=>{H.getOpt(ze).each(Ee=>{hd.setValue(Ee,100-Ce/360*100)})},Te=(ze,ke)=>{Z.getOpt(ze).each(Ce=>{P.setThumb(Ce,ke)})},Ae=(ze,ke,Ce,Ee)=>{((Ne,Fe)=>{const $e=Vp(Ne);B.paletteRgba.set($e),B.paletteHue.set(Fe)})(ke,Ce),Gt(Ee,Ne=>{Ne(ze,ke,Ce)})};return{uid:D.uid,dom:D.dom,components:[Z.asSpec(),H.asSpec(),G.asSpec()],behaviours:Pt([Fn("colour-picker-events",[xt(aM,(()=>{const ze=[oe,me,Te];return(ke,Ce)=>{const Ee=Ce.event.hex,Ne=xT(Vp(Ee));Ae(ke,Ee,Ne.hue,ze)}})()),xt(qp,(()=>{const ze=[ce];return(ke,Ce)=>{const Ee=Ce.event.value,Ne=B.paletteHue.get(),Fe=Wf(Ne,Ee.x,100-Ee.y),$e=_T(Fe);Ae(ke,$e,Ne,ze)}})()),xt(Gx,(()=>{const ze=[oe,ce];return(ke,Ce)=>{const Ee=(100-Ce.event.value)/100*360,Ne=B.paletteRgba.get(),Fe=xT(Ne),$e=Wf(Ee,Fe.saturation,Fe.value),ot=_T($e);Ae(ke,ot,Ee,ze)}})())]),So.config({find:ze=>G.getOpt(ze)}),bn.config({mode:"acyclic"})])}}}))((H=A,Z=>Q(Z)?H.translate(II[Z]):H.translate(Z)),E,A.tooltips.getConfig,(H,Z,G=H,oe=H)=>Zl(G,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+H],attributes:{title:A.translate(oe),"aria-live":"polite",...Z.fold(()=>({}),ce=>({id:ce}))}},A.icons)),B=Wo(P.sketch({dom:{tag:"div",classes:[E("color-picker-container")],attributes:{role:"presentation"}},onValidHex:H=>{mn(H,_h,{name:"hex-valid",value:!0})},onInvalidHex:H=>{mn(H,_h,{name:"hex-valid",value:!1})}}));var H;return{dom:{tag:"div"},components:[B.asSpec()],behaviours:Pt([$p(D,H=>{const Z=B.get(H);return So.getCurrent(Z).bind(G=>Qt.getValue(G).hex).map(G=>"#"+Jd(G,"#")).getOr("")},(H,Z)=>{const G=F.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(Z)).bind(ce=>pt(ce,1)),oe=B.get(H);So.getCurrent(oe).fold(()=>{console.log("Can not find form")},ce=>{Qt.setValue(ce,{hex:G.getOr("")}),jx.getField(ce,"hex").each(me=>{Zn(me,Zg())})})}),ov()])}})(0,m.shared.providers,x)),dropzone:Ri((l,m,x)=>((l,m,x)=>{const S=(H,Z)=>{Z.stop()},A=H=>(Z,G)=>{Gt(H,oe=>{oe(Z,G)})},D=Wo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Pt([Fn("input-file-events",[di(mm()),di(Xy())])])}),E=l.label.map(H=>qf(H,m)),P=$o.parts.field({factory:ua,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Hr(m.translate("Browse for an image")),D.asSpec()],action:H=>{D.get(H).element.dom.click()},buttonBehaviours:Pt([ov(),rv(x.getOr([])),cr.config({}),Of(()=>m.checkUiComponentContext(l.context).shouldDisable),gi(()=>m.checkUiComponentContext(l.context))])}),B={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Pt([Nn.config({disabled:()=>m.checkUiComponentContext(l.context).shouldDisable}),gi(()=>m.checkUiComponentContext(l.context)),Qn.config({toggleClass:"dragenter",toggleOnExecute:!1}),Fn("dropzone-events",[xt("dragenter",A([S,Qn.toggle])),xt("dragleave",A([S,Qn.toggle])),xt("dragover",S),xt("drop",A([S,(H,Z)=>{var G;Nn.isDisabled(H)||mn(H,qx,{files:null===(G=Z.event.raw.dataTransfer)||void 0===G?void 0:G.files})}])),xt(Kg(),(H,Z)=>{mn(H,qx,{files:Z.event.raw.target.files})})])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Hr(m.translate("Drop an image here"))]},P]}]};return ry(E,B,["tox-form__group--stretched"],[Fn("handle-files",[xt(qx,(H,Z)=>{$o.getField(H).each(G=>{var oe,ce;oe=G,(ce=Z.event.files)&&(Qt.setValue(oe,((me,Te)=>{const Ae=Mg.explode(Te.getOption("images_file_types"));return to(tn(me),ze=>Bt(Ae,ke=>Ec(ze.name.toLowerCase(),`.${ke.toLowerCase()}`)))})(ce,m)),mn(oe,Ys,{name:l.name}))})})])])})(l,m.shared.providers,x)),grid:Ri((l,m)=>{return{dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${(x=l).columns}col`]},components:Ct(x.items,m.shared.interpreter)};var x}),listbox:Ri((l,m,x)=>((S,A,D)=>{const E=Bt(S.items,oe=>!py(oe)),P=A.shared.providers,B=D.bind(oe=>Kx(S.items,oe)).orThunk(()=>Tt(S.items).filter(py)),H=S.label.map(oe=>qf(oe,P)),G={dom:{tag:"div",classes:["tox-listboxfield"]},components:[$o.parts.field({dom:{},factory:{sketch:oe=>uv({context:S.context,uid:oe.uid,text:B.map(ce=>ce.text),icon:F.none(),tooltip:F.none(),role:go(!E,"combobox"),...E?{}:{listRole:"listbox"},ariaLabel:S.label,fetch:(ce,me)=>{const Te=fM(ce,S.name,S.items,Qt.getValue(ce),E);me(gy(Te,Cl.CLOSE_ON_EXECUTE,A,{isHorizontalMenu:!1,search:F.none()}))},onSetup:ae(de),getApi:ae({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[cr.config({}),$p(B.map(ce=>ce.value),ce=>qi(ce.element,sS),(ce,me)=>{Kx(S.items,me).each(Te=>{Pn(ce.element,sS,Te.value),mn(ce,kc,{text:Te.text})})})]},"tox-listbox",A.shared)}})]};return $o.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:uo([H.toArray(),[G]]),fieldBehaviours:Pt([Nn.config({disabled:()=>!S.enabled||P.checkUiComponentContext(S.context).shouldDisable,onDisabled:oe=>{$o.getField(oe).each(Nn.disable)},onEnabled:oe=>{$o.getField(oe).each(Nn.enable)}})])})})(l,m,x)),selectbox:Ri((l,m,x)=>((S,A,D)=>{const E=Ct(S.items,G=>({text:A.translate(G.text),value:G.value})),P=S.label.map(G=>qf(G,A)),B=$o.parts.field({dom:{},...D.map(G=>({data:G})).getOr({}),selectAttributes:{size:S.size},options:E,factory:BI,selectBehaviours:Pt([Nn.config({disabled:()=>!S.enabled||A.checkUiComponentContext(S.context).shouldDisable}),cr.config({}),Fn("selectbox-change",[xt(Kg(),(G,oe)=>{mn(G,Ys,{name:S.name})})])])}),H=S.size>1?F.none():F.some(Zl("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},A.icons)),Z={dom:{tag:"div",classes:["tox-selectfield"]},components:uo([[B],H.toArray()])};return $o.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:uo([P.toArray(),[Z]]),fieldBehaviours:Pt([Nn.config({disabled:()=>!S.enabled||A.checkUiComponentContext(S.context).shouldDisable,onDisabled:G=>{$o.getField(G).each(Nn.disable)},onEnabled:G=>{$o.getField(G).each(Nn.enable)}}),gi(()=>A.checkUiComponentContext(S.context))])})})(l,m.shared.providers,x)),sizeinput:Ri((l,m)=>((x,S)=>{let A=Du;const D=cn("ratio-event"),E=Te=>Zl(Te,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Te]},S.icons),P=x.label.getOr("Constrain proportions"),B=S.translate(P),H=Xs.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":B,"data-mce-name":P}},components:[E("lock"),E("unlock")],buttonBehaviours:Pt([Nn.config({disabled:()=>!x.enabled||S.checkUiComponentContext(x.context).shouldDisable}),gi(()=>S.checkUiComponentContext(x.context)),cr.config({}),vr.config(S.tooltips.getConfig({tooltipText:B}))])}),Z=Te=>({dom:{tag:"div",classes:["tox-form__group"]},components:Te}),G=Te=>$o.parts.field({factory:Fd,inputClasses:["tox-textfield"],inputBehaviours:Pt([Nn.config({disabled:()=>!x.enabled||S.checkUiComponentContext(x.context).shouldDisable}),gi(()=>S.checkUiComponentContext(x.context)),cr.config({}),Fn("size-input-events",[xt(dl(),(Ae,ze)=>{mn(Ae,D,{isField1:Te})}),xt(Kg(),(Ae,ze)=>{mn(Ae,Ys,{name:x.name})})])]),selectOnFocus:!1}),oe=Te=>({dom:{tag:"label",classes:["tox-label"]},components:[Hr(S.translate(Te))]}),ce=Xs.parts.field1(Z([$o.parts.label(oe("Width")),G(!0)])),me=Xs.parts.field2(Z([$o.parts.label(oe("Height")),G(!1)]));return Xs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[ce,me,Z([oe("\xa0"),H])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Te,Ae,ze)=>{Xp(Qt.getValue(Te)).each(ke=>{A(ke).each(Ce=>{Qt.setValue(Ae,(Ee=>{const Ne={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};let Fe=Ee.value.toFixed(($e=Ee.unit)in Ne?Ne[$e]:1);var $e;return-1!==Fe.indexOf(".")&&(Fe=Fe.replace(/\.?0*$/,"")),Fe+Ee.unit})(Ce))})})},coupledFieldBehaviours:Pt([Nn.config({disabled:()=>!x.enabled||S.checkUiComponentContext(x.context).shouldDisable,onDisabled:Te=>{Xs.getField1(Te).bind($o.getField).each(Nn.disable),Xs.getField2(Te).bind($o.getField).each(Nn.disable),Xs.getLock(Te).each(Nn.disable)},onEnabled:Te=>{Xs.getField1(Te).bind($o.getField).each(Nn.enable),Xs.getField2(Te).bind($o.getField).each(Nn.enable),Xs.getLock(Te).each(Nn.enable)}}),gi(()=>S.checkUiComponentContext("mode:design")),Fn("size-input-events2",[xt(D,(Te,Ae)=>{const ze=Ae.event.isField1,ke=ze?Xs.getField1(Te):Xs.getField2(Te),Ce=ze?Xs.getField2(Te):Xs.getField1(Te),Ee=ke.map(Qt.getValue).getOr(""),Ne=Ce.map(Qt.getValue).getOr("");A=((Fe,$e)=>{const ot=Xp(Fe).toOptional(),bt=Xp($e).toOptional();return Ml(ot,bt,(mt,vt)=>hE(mt,vt.unit).map(Ot=>vt.value/Ot).map(Ot=>{return an=Ot,Cn=vt.unit,An=>hE(An,Cn).map(Gn=>({value:Gn*an,unit:Cn}));var an,Cn}).getOr(Du)).getOr(Du)})(Ee,Ne)})])])})})(l,m.shared.providers)),slider:Ri((l,m,x)=>((S,A,D)=>{const E=hd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Hr(A.translate(S.label))]}),P=hd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),B=hd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return hd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:S.min,maxX:S.max,getInitialValue:ae(D.getOrThunk(()=>(Math.abs(S.max)-Math.abs(S.min))/2))},components:[E,P,B],sliderBehaviours:Pt([ov(),Dn.config({})]),onChoose:(H,Z,G)=>{mn(H,Ys,{name:S.name,value:G})},onChange:(H,Z,G)=>{mn(H,Ys,{name:S.name,value:G})}})})(l,m.shared.providers,x)),urlinput:Ri((l,m,x)=>((S,A,D,E)=>{const P=A.shared.providers,B=ke=>{const Ce=Qt.getValue(ke);D.addToHistory(Ce.value,S.filetype)},H={...E.map(ke=>({initialData:ke})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":JI,type:"url"},minChars:0,responseTime:0,fetch:ke=>{const Ce=((Ne,Fe,$e)=>{var ot,bt;const mt=Qt.getValue(Fe),vt=null!==(bt=null===(ot=mt?.meta)||void 0===ot?void 0:ot.text)&&void 0!==bt?bt:mt.value;return $e.getLinkInformation().fold(()=>[],Ot=>{const an=yS(vt,(An=$e.getHistory(Ne),Ct(An,Gn=>fS(Gn,Gn))));var An,Cn;return"file"===Ne?(Cn=[an,yS(vt,KI(Ot)),yS(vt,uo([yE(Ot),r1(Ot),hN(Ot)]))],_n(Cn,(An,Gn)=>0===An.length||0===Gn.length?An.concat(Gn):An.concat(ZI,Gn),[])):an})})(S.filetype,ke,D),Ee=gy(Ce,Cl.BUBBLE_TO_SANDBOX,A,{isHorizontalMenu:!1,search:F.none()});return Hd(Ee)},getHotspot:ke=>Ae.getOpt(ke),onSetValue:(ke,Ce)=>{ke.hasConfigured(wh)&&wh.run(ke).get(de)},typeaheadBehaviours:Pt([...D.getValidationHandler().map(ke=>wh.config({getRoot:Ce=>tl(Ce.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Ce,Ee)=>{oe.getOpt(Ce).each(Ne=>{Pn(Ne.element,"title",P.translate(Ee))})}},validator:{validate:Ce=>{const Ee=Qt.getValue(Ce);return Ou(dd(Ne=>{ke({type:S.filetype,url:Ee.value},Fe=>{if("invalid"===Fe.status){const $e=so.error(Fe.message);Ne($e)}else{const $e=so.value(Fe.message);Ne($e)}})}))},validateOnLoad:!1}})).toArray(),Nn.config({disabled:()=>!S.enabled||P.checkUiComponentContext(S.context).shouldDisable}),cr.config({}),Fn("urlinput-events",[xt(Zg(),ke=>{const Ce=ei(ke.element),Ee=Ce.trim();Ee!==Ce&&jh(ke.element,Ee),"file"===S.filetype&&mn(ke,Ys,{name:S.name})}),xt(Kg(),ke=>{mn(ke,Ys,{name:S.name}),B(ke)}),xt(ym(),ke=>{mn(ke,Ys,{name:S.name}),B(ke)})])]),eventOrder:{[Zg()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ke=>ke.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:A.shared.getSink,parts:{menu:wf(0,0,"normal")},onExecute:(ke,Ce,Ee)=>{mn(Ce,$f,{})},onItemExecute:(ke,Ce,Ee,Ne)=>{B(ke),mn(ke,Ys,{name:S.name})}},Z=$o.parts.field({...H,factory:$I}),G=S.label.map(ke=>qf(ke,P)),oe=Wo(((ke,Ce,Ee=ke,Ne=ke)=>Zl(Ee,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ke],attributes:{title:P.translate(Ne),"aria-live":"polite",...Ce.fold(()=>({}),Fe=>({id:Fe}))}},P.icons))("invalid",F.some(JI),"warning")),ce=Wo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[oe.asSpec()]}),me=D.getUrlPicker(S.filetype),Te=cn("browser.url.event"),Ae=Wo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[Z,ce.asSpec()],behaviours:Pt([Nn.config({disabled:()=>!S.enabled||P.checkUiComponentContext(S.context).shouldDisable})])}),ze=Wo(XI({context:S.context,name:S.name,icon:F.some("browse"),text:S.picker_text.or(S.label).getOr(""),enabled:S.enabled,primary:!1,buttonType:F.none(),borderless:!0},ke=>Zn(ke,Te),P,[],["tox-browse-url"]));return $o.sketch({dom:aI([]),components:G.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:uo([[Ae.asSpec()],me.map(()=>ze.asSpec()).toArray()])}]),fieldBehaviours:Pt([Nn.config({disabled:()=>!S.enabled||P.checkUiComponentContext(S.context).shouldDisable,onDisabled:ke=>{$o.getField(ke).each(Nn.disable),ze.getOpt(ke).each(Nn.disable)},onEnabled:ke=>{$o.getField(ke).each(Nn.enable),ze.getOpt(ke).each(Nn.enable)}}),gi(()=>P.checkUiComponentContext(S.context)),Fn("url-input-events",[xt(Te,ke=>{So.getCurrent(ke).each(Ce=>{const Ee=Qt.getValue(Ce),Ne={fieldname:S.name,...Ee};me.each(Fe=>{Fe(Ne).get($e=>{Qt.setValue(Ce,$e),mn(ke,Ys,{name:S.name})})})})})])])})})(l,m,m.urlinput,x)),customeditor:Ri(l=>{const m=ar(),x=Wo({dom:{tag:l.tag}}),S=ar(),A=!uM(l)&&l.onFocus.isSome()?[Dn.config({onFocus:D=>{l.onFocus.each(E=>{E(D.element.dom)})}}),cr.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Pt([Fn("custom-editor-events",[qo(D=>{x.getOpt(D).each(E=>{(uM(l)?l.init(E.element.dom):sE.load(l.scriptId,l.scriptUrl).then(P=>P(E.element.dom,l.settings))).then(P=>{S.on(B=>{P.setValue(B)}),S.clear(),m.set(P)})})})]),$p(F.none(),()=>m.get().fold(()=>S.get().getOr(""),D=>D.getValue()),(D,E)=>{m.get().fold(()=>S.set(E),P=>P.setValue(E))}),ov()].concat(A)),components:[x.asSpec()]}}),htmlpanel:Ri((l,m)=>((x,S)=>{const A=["tox-form__group",...x.stretched?["tox-form__group--stretched"]:[]],D=Fn("htmlpanel",[qo(E=>{x.onInit(E.element.dom)})]);return Cc.sketch("presentation"===x.presets?{dom:{tag:"div",classes:A,innerHtml:x.html},containerBehaviours:Pt([vr.config({...S.tooltips.getConfig({tooltipText:"",onShow:E=>{$r(E.element,"[data-mce-tooltip]:hover").orThunk(()=>vl(E.element)).each(P=>{mi(P,"data-mce-tooltip").each(B=>{vr.setComponents(E,S.tooltips.getComponents({tooltipText:B}))})})}}),mode:"children-normal",anchor:E=>({type:"node",node:$r(E.element,"[data-mce-tooltip]:hover").orThunk(()=>vl(E.element).filter(P=>mi(P,"data-mce-tooltip").isSome())),root:E.element,layouts:{onLtr:ae([Ji,sa,Ki,Na,Vi,Ra]),onRtl:ae([Ji,sa,Ki,Na,Vi,Ra])},bubble:Gl(0,-2,{})})}),D])}:{dom:{tag:"div",classes:A,innerHtml:x.html,attributes:{role:"document"}},containerBehaviours:Pt([cr.config({}),Dn.config({}),D])})})(l,m.shared.providers)),imagepreview:Ri((l,m,x)=>((S,A)=>{const D=kn(A.getOr({url:""})),E=Wo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:A.map(Z=>({src:Z.url})).getOr({})}}),P=Wo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[E.asSpec()]}),B={};S.height.each(Z=>B.height=Z);const H=A.map(Z=>({url:Z.url,zoom:F.from(Z.zoom),cachedWidth:F.from(Z.cachedWidth),cachedHeight:F.from(Z.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:B,attributes:{role:"presentation"}},components:[P.asSpec()],behaviours:Pt([ov(),$p(H,()=>D.get(),(Z,G)=>{const oe={url:G.url};G.zoom.each(me=>oe.zoom=me),G.cachedWidth.each(me=>oe.cachedWidth=me),G.cachedHeight.each(me=>oe.cachedHeight=me),D.set(oe);const ce=()=>{const{cachedWidth:me,cachedHeight:Te,zoom:Ae}=oe;if(!X(me)&&!X(Te)){if(X(Ae)){const ke=((Ce,Ee,Ne)=>{const Fe=Ua(Ce),$e=Pi(Ce);return Math.min(Fe/Ee,$e/Ne,1)})(Z.element,me,Te);oe.zoom=ke}const ze=((ke,Ce,Ee,Ne,Fe)=>{const $e=Ee*Fe,ot=Ne*Fe,bt=Math.max(0,ke/2-$e/2),mt=Math.max(0,Ce/2-ot/2);return{left:bt.toString()+"px",top:mt.toString()+"px",width:$e.toString()+"px",height:ot.toString()+"px"}})(Ua(Z.element),Pi(Z.element),me,Te,oe.zoom);P.getOpt(Z).each(ke=>{yd(ke.element,ze)})}};E.getOpt(Z).each(me=>{const Te=me.element;var Ae;G.url!==qi(Te,"src")&&(Pn(Te,"src",G.url),Vr(Z.element,"tox-imagepreview__loaded")),ce(),(Ae=Te,new Promise((ze,ke)=>{const Ce=()=>{Ne(),ze(Ae)},Ee=[wo(Ae,"load",Ce),wo(Ae,"error",()=>{Ne(),ke("Unable to load data from image: "+Ae.dom.src)})],Ne=()=>Gt(Ee,Fe=>Fe.unbind());Ae.dom.complete&&Ce()})).then(ze=>{Z.getSystem().isConnected()&&(ui(Z.element,"tox-imagepreview__loaded"),oe.cachedWidth=ze.dom.naturalWidth,oe.cachedHeight=ze.dom.naturalHeight,ce())})})})])}})(l,x)),table:Ri((l,m)=>((x,S)=>{const A=P=>({dom:{tag:"td",innerHtml:S.translate(P)}});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(E=x.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ct(E,P=>({dom:{tag:"th",innerHtml:S.translate(P)}}))}]}),(D=x.cells,{dom:{tag:"tbody"},components:Ct(D,P=>({dom:{tag:"tr"},components:Ct(P,A)}))})],behaviours:Pt([cr.config({}),Dn.config({})])};var D,E})(l,m.shared.providers)),tree:Ri((l,m)=>((x,S)=>{const A=x.onLeafAction.getOr(de),D=x.onToggleExpand.getOr(de),P=kn(x.defaultExpandedIds),B=kn(x.defaultSelectedId),H=cn("tree-id"),Z=(G,oe)=>x.items.map(ce=>"leaf"===ce.type?vM({leaf:ce,selectedId:G,onLeafAction:A,visible:!0,treeId:H,backstage:S}):GI({directory:ce,selectedId:G,onLeafAction:A,expandedIds:oe,labelTabstopping:!0,treeId:H,backstage:S}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:Z(B.get(),P.get()),behaviours:Pt([bn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Fn(jI,[xt("expand-tree-node",(G,oe)=>{const{expanded:ce,node:me}=oe.event;P.set(ce?[...P.get(),me]:P.get().filter(Te=>Te!==me)),D(P.get(),{expanded:ce,node:me})})]),Vs.config({channels:{[`update-active-item-${H}`]:{onReceive:(G,oe)=>{B.set(F.some(oe.value)),zn.set(G,Z(F.some(oe.value),P.get()))}}}}),zn.config({})])}})(l,m)),panel:Ri((l,m)=>{return{dom:{tag:"div",classes:(x=l).classes},components:Ct(x.items,m.shared.interpreter)};var x})},xM={field:(l,m)=>m,record:ae([])},QI=(l,m,x,S,A)=>{const D=be(S,{shared:{interpreter:E=>xS(l,E,x,D,A)}});return xS(l,m,x,D,A)},xS=(l,m,x,S,A)=>vn(bS,m.type).fold(()=>(console.error(`Unknown factory type "${m.type}", defaulting to container: `,m),m),D=>D(l,m,x,S,A)),eD=(l,m,x,S)=>xS(xM,l,m,x,S),gd="layout-inset",wy=l=>l.x,_S=(l,m)=>l.x+l.width/2-m.width/2,i1=(l,m)=>l.x+l.width-m.width,a1=l=>l.y,_M=(l,m)=>l.y+l.height-m.height,tD=(l,m)=>l.y+l.height/2-m.height/2,Og=(l,m,x)=>Oa(i1(l,m),_M(l,m),x.insetSouthwest(),Ht(),"southwest",ia(l,{right:0,bottom:3}),gd),s1=(l,m,x)=>Oa(wy(l),_M(l,m),x.insetSoutheast(),J1(),"southeast",ia(l,{left:1,bottom:3}),gd),wS=(l,m,x)=>Oa(i1(l,m),a1(l),x.insetNorthwest(),e0(),"northwest",ia(l,{right:0,top:2}),gd),l1=(l,m,x)=>Oa(wy(l),a1(l),x.insetNortheast(),SC(),"northeast",ia(l,{left:1,top:2}),gd),pd=(l,m,x)=>Oa(_S(l,m),a1(l),x.insetNorth(),rn(),"north",ia(l,{top:2}),gd),Sy=(l,m,x)=>Oa(_S(l,m),_M(l,m),x.insetSouth(),Ea(),"south",ia(l,{bottom:3}),gd),SS=(l,m,x)=>Oa(i1(l,m),tD(l,m),x.insetEast(),CA(),"east",ia(l,{right:0}),gd),CS=(l,m,x)=>Oa(wy(l),tD(l,m),x.insetWest(),Om(),"west",ia(l,{left:1}),gd),kS=l=>{switch(l){case"north":return pd;case"northeast":return l1;case"northwest":return wS;case"south":return Sy;case"southeast":return s1;case"southwest":return Og;case"east":return SS;case"west":return CS}},TS=(l,m,x,S,A)=>Pm(S).map(kS).getOr(pd)(l,m,x,S,A),nD=l=>{switch(l){case"north":return Sy;case"northeast":return s1;case"northwest":return Og;case"south":return pd;case"southeast":return l1;case"southwest":return wS;case"east":return CS;case"west":return SS}},vv=(l,m,x,S,A)=>Pm(S).map(nD).getOr(pd)(l,m,x,S,A),yv={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},wM=(l,m,x)=>{const S={maxHeightFunction:Qh()};return()=>x()?{type:"node",root:Il(Ia(l())),node:F.from(l()),bubble:Gl(12,12,yv),layouts:{onRtl:()=>[l1],onLtr:()=>[wS]},overrides:S}:{type:"hotspot",hotspot:m(),bubble:Gl(-12,12,yv),layouts:{onRtl:()=>[Ki,Vi,Ji],onLtr:()=>[Vi,Ki,Ji]},overrides:S}},_E=(l,m,x,S)=>{const A={maxHeightFunction:Qh()};return()=>S()?{type:"node",root:Il(Ia(m())),node:F.from(m()),bubble:Gl(12,12,yv),layouts:{onRtl:()=>[pd],onLtr:()=>[pd]},overrides:A}:l?{type:"node",root:Il(Ia(m())),node:F.from(m()),bubble:Gl(0,-mo(m()),yv),layouts:{onRtl:()=>[sa],onLtr:()=>[sa]},overrides:A}:{type:"hotspot",hotspot:x(),bubble:Gl(0,0,yv),layouts:{onRtl:()=>[sa],onLtr:()=>[sa]},overrides:A}},Jp=(l,m,x)=>()=>x()?{type:"node",root:Il(Ia(l())),node:F.from(l()),layouts:{onRtl:()=>[pd],onLtr:()=>[pd]}}:{type:"hotspot",hotspot:m(),layouts:{onRtl:()=>[Ji],onLtr:()=>[Ji]}},SM=(l,m)=>()=>({type:"selection",root:m(),getSelection:()=>{const x=l.selection.getRng(),S=l.model.table.getSelectedCells();if(S.length>1){const D=S[S.length-1],E={firstCell:je(S[0]),lastCell:je(D)};return F.some(E)}return F.some(jl.range(je(x.startContainer),x.startOffset,je(x.endContainer),x.endOffset))}}),CM=l=>m=>({type:"node",root:l(),node:m}),kM=(l,m,x,S)=>{const A=hf(l),D=()=>je(l.getBody()),E=()=>je(l.getContentAreaContainer()),P=()=>A||!S();return{inlineDialog:wM(E,m,P),inlineBottomDialog:_E(l.inline,E,x,P),banner:Jp(E,m,P),cursor:SM(l,D),node:CM(D)}},TM=l=>(m,x)=>{Ew(l)(m,x)},wE=l=>()=>j2(l),oD=l=>m=>bg(l,m),MM=l=>m=>CT(l,m),AM=l=>()=>Pk(l),IM=l=>Br(l,"items"),Cy=l=>Br(l,"format"),c1=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],MS=l=>_n(l,(m,x)=>{if(bo(x,"items")){const S=MS(x.items);return{customFormats:m.customFormats.concat(S.customFormats),formats:m.formats.concat([{title:x.title,items:S.formats}])}}if(bo(x,"inline")||bo(x,"block")||bo(x,"selector")){const S=`custom-${Q(x.name)?x.name:x.title.toLowerCase()}`;return{customFormats:m.customFormats.concat([{name:S,format:x}]),formats:m.formats.concat([{title:x.title,format:S,icon:x.icon}])}}return{...m,formats:m.formats.concat(x)}},{customFormats:[],formats:[]}),qd=l=>df(l).map(m=>{const x=((S,A)=>{const D=MS(A),E=P=>{Gt(P,B=>{S.formatter.has(B.name)||S.formatter.register(B.name,B.format)})};return S.formatter?E(D.customFormats):S.on("init",()=>{E(D.customFormats)}),D.formats})(l,m);return I0(l)?c1.concat(x):x}).getOr(c1),DM=(l,m,x)=>({...l,type:"formatter",isSelected:m(l.format),getStylePreview:x(l.format)}),ky=(l,m,x,S)=>{const A=D=>Ct(D,E=>IM(E)?(P=>{const B=A(P.items);return{...P,type:"submenu",getStyleItems:ae(B)}})(E):Cy(E)?DM(E,x,S):(P=>{const B=Sn(P);return 1===B.length&&nt(B,"title")})(E)?{...E,type:"separator"}:(P=>{const B=Q(P.name)?P.name:cn(P.title),H=`custom-${B}`,Z={...P,type:"formatter",format:H,isSelected:x(H),getStylePreview:S(H)};return l.formatter.register(B,Z),Z})(E));return A(m)},OM=l=>{let m=0;const x=S=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Hr(S.tooltipText)]}];return{getConfig:S=>({delayForShow:()=>m>0?60:300,delayForHide:ae(300),exclusive:!0,lazySink:l,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:x(S),onShow:(A,D)=>{m++,S.onShow&&S.onShow(A,D)},onHide:(A,D)=>{m--,S.onHide&&S.onHide(A,D)},onSetup:S.onSetup}),getComponents:x}},rD=Mg.trim,AS=l=>m=>{return!(!W(x=m)||1!==x.nodeType||m.contentEditable!==l&&m.getAttribute("data-mce-contenteditable")!==l);var x},iD=AS("true"),SE=AS("false"),d1=(l,m,x,S,A)=>({type:l,title:m,url:x,level:S,attach:A}),EM=l=>l.innerText||l.textContent,CE=l=>{return(m=l)&&"A"===m.nodeName&&void 0!==(m.id||m.name)&&aD(l);var m},NM=l=>l&&/^(H[1-6])$/.test(l.nodeName),aD=l=>(m=>{let x=m;for(;x=x.parentNode;){const S=x.contentEditable;if(S&&"inherit"!==S)return iD(x)}return!1})(l)&&!SE(l),u1=l=>NM(l)&&aD(l),kE=l=>{var m;const x=(S=l).id?S.id:cn("h");var S;return d1("header",null!==(m=EM(l))&&void 0!==m?m:"","#"+x,(S=>NM(S)?parseInt(S.nodeName.substr(1),10):0)(l),()=>{l.id=x})},gN=l=>{const m=l.id||l.name,x=EM(l);return d1("anchor",x||"#"+m,"#"+m,0,de)},sD=l=>rD(l.title).length>0,lD=l=>{const m=Ct(Qi(je(l),"h1,h2,h3,h4,h5,h6,a:not([href])"),A=>A.dom);return to((x=m,Ct(to(x,u1),kE)).concat((x=>Ct(to(x,CE),gN))(m)),sD);var x},h1="tinymce-url-history",cD=l=>Q(l)&&/^https?/.test(l),RM=l=>se(l)&&vs(l,m=>{return!(j(x=m)&&x.length<=5&&dn(x,cD));var x}).isNone(),g1=()=>{const l=Hf.getItem(h1);if(null===l)return{};let m;try{m=JSON.parse(l)}catch(x){if(x instanceof SyntaxError)return console.log("Local storage "+h1+" was not valid JSON",x),{};throw x}return RM(m)?m:(console.log("Local storage "+h1+" was not valid format",m),{})},kh=l=>{const m=g1();return vn(m,l).getOr([])},TE=(l,m)=>{if(!cD(l))return;const x=g1(),S=vn(x,m).getOr([]),A=to(S,D=>D!==l);x[m]=[l].concat(A).slice(0,5),(D=>{if(!RM(D))throw new Error("Bad format for history:\n"+JSON.stringify(D));Hf.setItem(h1,JSON.stringify(D))})(x)},IS=l=>!!l,pN=l=>Rn(Mg.makeMap(l,/[, ]/),IS),LM=l=>F.from(Ek(l)),DS=l=>F.from(l).filter(Q).getOrUndefined(),Wi=Mb,Eu=YC,ME=ae([st("shell",!1),kt("makeItem"),st("setupItem",de),Um("listBehaviours",[zn])]),dD=Us({name:"items",overrides:()=>({behaviours:Pt([zn.config({})])})}),uD=ae([dD]),BM=Ka({name:ae("CustomList")(),configFields:ME(),partFields:uD(),factory:(l,m,x,S)=>{const A=l.shell?{behaviours:[zn.config({})],components:[]}:{behaviours:[],components:m};return{uid:l.uid,dom:l.dom,components:A.components,behaviours:Pa(l.listBehaviours,A.behaviours),apis:{setItems:(D,E)=>{var P;(P=D,l.shell?F.some(P):Vo(P,l,"items")).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},B=>{const H=zn.contents(B),Z=E.length,G=Z-H.length,oe=G>0?Wt(G,()=>l.makeItem()):[],ce=H.slice(Z);Gt(ce,Te=>zn.remove(B,Te)),Gt(oe,Te=>zn.append(B,Te));const me=zn.contents(B);Gt(me,(Te,Ae)=>{l.setupItem(D,Te,E[Ae],Ae)})})}}}},apis:{setItems:(l,m,x)=>{l.setItems(m,x)}}}),Th=ae([kt("dom"),st("shell",!0),Nr("toolbarBehaviours",[zn])]),OS=ae([Us({name:"groups",overrides:()=>({behaviours:Pt([zn.config({})])})})]),Zs=Ka({name:"Toolbar",configFields:Th(),partFields:OS(),factory:(l,m,x,S)=>{const A=l.shell?{behaviours:[zn.config({})],components:[]}:{behaviours:[],components:m};return{uid:l.uid,dom:l.dom,components:A.components,behaviours:Pa(l.toolbarBehaviours,A.behaviours),apis:{setGroups:(D,E)=>{var P;(P=D,l.shell?F.some(P):Vo(P,l,"groups")).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},B=>{zn.set(B,E)})},refresh:de},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(l,m,x)=>{l.setGroups(m,x)}}}),zM=de,Eg=ee,ES=ae([]);var Ng,AE=Object.freeze({__proto__:null,setup:zM,isDocked:Eg,getBehaviours:ES});const FM=ae(cn("toolbar-height-change")),$d={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},hD="tox-tinymce--toolbar-sticky-on",Ty="tox-tinymce--toolbar-sticky-off",NS=(l,m)=>nt(jr.getModes(l),m),VM=l=>{const m=l.element;tl(m).each(x=>{const S="padding-"+jr.getModes(l)[0];if(jr.isDocked(l)){const A=Ua(x);Yt(m,"width",A+"px"),Yt(x,S,mo(D=m)+(parseInt(Di(D,"margin-top"),10)||0)+(parseInt(Di(D,"margin-bottom"),10)||0)+"px")}else No(m,"width"),No(x,S);var D})},gD=(l,m)=>{m?(Vr(l,$d.fadeOutClass),su(l,[$d.transitionClass,$d.fadeInClass])):(Vr(l,$d.fadeInClass),su(l,[$d.fadeOutClass,$d.transitionClass]))},HM=(l,m)=>{const x=je(l.getContainer());m?(ui(x,hD),Vr(x,Ty)):(ui(x,Ty),Vr(x,hD))},WM=(l,m)=>{const x=ar(),S=m.getSink,A=P=>{S().each(B=>P(B.element))},D=P=>{l.inline||VM(P),HM(l,jr.isDocked(P)),P.getSystem().broadcastOn([ih()],{}),S().each(B=>B.getSystem().broadcastOn([ih()],{}))},E=l.inline?[]:[Vs.config({channels:{[FM()]:{onReceive:VM}}})];return[Dn.config({}),jr.config({contextual:{lazyContext:P=>{const B=mo(P.element),H=l.inline?l.getContentAreaContainer():l.getContainer();return F.from(H).map(Z=>{const G=Fr(je(Z));return gf(l,P.element).fold(()=>{const oe=G.height-B,ce=G.y+(NS(P,"top")?0:B);return Oi(G.x,ce,G.width,oe)},oe=>{const ce=qg(G,xu(oe)),me=NS(P,"top")?ce.y:ce.y+B;return Oi(ce.x,me,ce.width,ce.height-B)})})},onShow:()=>{A(P=>gD(P,!0))},onShown:P=>{A(B=>zs(B,[$d.transitionClass,$d.fadeInClass])),x.get().each(B=>{((H,Z)=>{const G=bs(Z);gc(G).filter(oe=>!po(Z,oe)).filter(oe=>po(oe,je(G.dom.body))||ys(H,oe)).each(()=>hc(Z))})(P.element,B),x.clear()})},onHide:P=>{var B,H;(B=P.element,H=S,vl(B).orThunk(()=>H().toOptional().bind(Z=>vl(Z.element)))).fold(x.clear,x.set),A(B=>gD(B,!1))},onHidden:()=>{A(P=>zs(P,[$d.transitionClass]))},...$d},lazyViewport:P=>gf(l,P.element).fold(()=>{const B=$i(),H=dh(l),Z=B.y+(NS(P,"top")?H:0),G=B.height-(NS(P,"bottom")?H:0);return{bounds:Oi(B.x,Z,B.width,G),optScrollEnv:F.none()}},B=>({bounds:xu(B),optScrollEnv:F.some({currentScrollTop:B.element.dom.scrollTop,scrollElmTop:ci(B.element).top})})),modes:[m.header.getDockingMode()],onDocked:D,onUndocked:D}),...E]};var IE=Object.freeze({__proto__:null,setup:(l,m,x)=>{l.inline||(m.header.isPositionedAtTop()||l.on("ResizeEditor",()=>{x().each(jr.reset)}),l.on("ResizeWindow ResizeEditor",()=>{x().each(VM)}),l.on("SkinLoaded",()=>{x().each(S=>{jr.isDocked(S)?jr.reset(S):jr.refresh(S)})}),l.on("FullscreenStateChanged",()=>{x().each(jr.reset)})),l.on("AfterScrollIntoView",S=>{x().each(A=>{jr.refresh(A);const D=A.element;Jm(D)&&((E,P)=>{const B=bs(P),H=am(P).dom.innerHeight,Z=xs(B),G=je(E.elm),oe=ol(G),ce=Pi(G),me=oe.y,Te=me+ce,Ae=ci(P),ze=Pi(P),ke=Ae.top,Ce=ke+ze,Ee=Math.abs(ke-Z.top)<2,Ne=Math.abs(Ce-(Z.top+H))<2;Ee&&me<Ce?ju(Z.left,me-ze,B):Ne&&Te>ke&&ju(Z.left,me-H+ce+ze,B)})(S,D)})}),l.on("PostRender",()=>{HM(l,!1)})},isDocked:l=>l().map(jr.isDocked).getOr(!1),getBehaviours:WM});const pD=Et([hi,Ls("items",xo([jo([cT,sl("items",io)]),io]))].concat(ux)),p1=[fo("text"),fo("tooltip"),fo("icon"),Bl("search",!1,xo([ac,Et([fo("placeholder")])],l=>$(l)?l?F.some({placeholder:F.none()}):F.none():F.some(l))),Hc("fetch"),Tr("onSetup",()=>de),Ti("context","mode:design")],m1=Et([hi,...p1]),f1=l=>br("menubutton",m1,l),RS=Et([hi,Tf,id,ph,ad,oN,G0,qu("presets","normal",["normal","color","listpreview"]),Pp(1),kf,IO,Ti("context","mode:design")]);var v1=$l({factory:(l,m)=>{const x={focus:bn.focusIn,setMenus:(S,A)=>{const D=Ct(A,E=>{const B=f1({type:"menubutton",text:E.text,fetch:H=>{H(E.getItems())},context:"any"}).mapError(H=>Ei(H)).getOrDie();return yy(B,"tox-mbtn",m.backstage,F.some("menuitem"))});zn.set(S,D)}};return{uid:l.uid,dom:l.dom,components:[],behaviours:Pt([zn.config({}),Fn("menubar-events",[qo(S=>{l.onSetup(S)}),xt(Xi(),(S,A)=>{$r(S.element,".tox-mbtn--active").each(D=>{Yh(A.event.target,".tox-mbtn").each(E=>{po(D,E)||S.getSystem().getByDom(D).each(P=>{S.getSystem().getByDom(E).each(B=>{Sc.expand(B),Sc.close(P),Dn.focus(B)})})})})}),xt(Fv(),(S,A)=>{A.event.prevFocus.bind(D=>S.getSystem().getByDom(D).toOptional()).each(D=>{A.event.newFocus.bind(E=>S.getSystem().getByDom(E).toOptional()).each(E=>{Sc.isOpen(D)&&(Sc.expand(E),Sc.close(D))})})})]),bn.config({mode:"flow",selector:".tox-mbtn",onEscape:S=>(l.onEscape(S),F.some(!0))}),cr.config({})]),apis:x,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[kt("dom"),kt("uid"),kt("onEscape"),kt("backstage"),st("onSetup",de)],apis:{focus:(l,m)=>{l.focus(m)},setMenus:(l,m,x)=>{l.setMenus(m,x)}}});const bv="container",LS=[Nr("slotBehaviours",[])],mD=l=>"<alloy.field."+l+">",UM=(l,m)=>{const x=Z=>mc(l),S=(Z,G)=>(oe,ce)=>Vo(oe,l,ce).map(me=>Z(me,ce)).getOr(G),A=(Z,G)=>"true"!==qi(Z.element,"aria-hidden"),D=S(A,!1),E=S((Z,G)=>{if(A(Z)){const oe=Z.element;Yt(oe,"display","none"),Pn(oe,"aria-hidden","true"),mn(Z,Vv(),{name:G,visible:!1})}}),P=(Z=E,(G,oe)=>{Gt(oe,ce=>Z(G,ce))}),B=S((Z,G)=>{if(!A(Z)){const oe=Z.element;No(oe,"display"),tr(oe,"aria-hidden"),mn(Z,Vv(),{name:G,visible:!0})}}),H={getSlotNames:x,getSlot:(Z,G)=>Vo(Z,l,G),isShowing:D,hideSlot:E,hideAllSlots:Z=>P(Z,x()),showSlot:B};var Z;return{uid:l.uid,dom:l.dom,components:m,behaviours:mp(l.slotBehaviours),apis:H}},es={...Rn({getSlotNames:(l,m)=>l.getSlotNames(m),getSlot:(l,m,x)=>l.getSlot(m,x),isShowing:(l,m,x)=>l.isShowing(m,x),hideSlot:(l,m,x)=>l.hideSlot(m,x),hideAllSlots:(l,m)=>l.hideAllSlots(m),showSlot:(l,m,x)=>l.showSlot(m,x)},l=>Gh(l)),sketch:l=>{const m=(()=>{const D=[];return{slot:(E,P)=>(D.push(E),x_(bv,mD(E),P)),record:ae(D)}})(),x=l(m),S=m.record(),A=Ct(S,D=>Ba({name:D,pname:mD(D)}));return bp(bv,LS,A,UM,x)}},fD=Et([id,Tf,Tr("onShow",de),Tr("onHide",de),G0]),mN=l=>({element:()=>l.element.dom}),GM=(l,m)=>{const x=Ct(Sn(m),S=>{const D=il(br("sidebar",fD,m[S]));return{name:S,getApi:mN,onSetup:D.onSetup,onShow:D.onShow,onHide:D.onHide}});return Ct(x,S=>{const A=kn(de);return l.slot(S.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:mh([sd(S,A),ni(S,A),xt(Vv(),(D,E)=>{const P=E.event;hn(x,H=>H.name===P.name).each(H=>{(P.visible?H.onShow:H.onHide)(H.getApi(D))})})])})})},jM=l=>es.sketch(m=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:GM(m,l),slotBehaviours:mh([qo(x=>es.hideAllSlots(x))])})),PS=(l,m)=>{Pn(l,"role",m)},DE=l=>So.getCurrent(l).bind(m=>us.isGrowing(m)||us.hasGrown(m)?So.getCurrent(m).bind(x=>hn(es.getSlotNames(x),S=>es.isShowing(x,S))):F.none()),My=cn("FixSizeEvent"),BS=cn("AutoSizeEvent");var vD=Object.freeze({__proto__:null,block:(l,m,x,S)=>{Pn(l.element,"aria-busy",!0);const A=m.getRoot(l).getOr(l),D=Pt([bn.config({mode:"special",onTab:()=>F.some(!0),onShiftTab:()=>F.some(!0)}),Dn.config({})]),E=S(A,D),P=A.getSystem().build(E);zn.append(A,fl(P)),P.hasConfigured(bn)&&m.focus&&bn.focusIn(P),x.isBlocked()||m.onBlock(l),x.blockWith(()=>zn.remove(A,P))},unblock:(l,m,x)=>{tr(l.element,"aria-busy"),x.isBlocked()&&m.onUnblock(l),x.clear()},isBlocked:(l,m,x)=>x.isBlocked()}),yD=[Tr("getRoot",F.none),xa("focus",!0),Kn("onBlock"),Kn("onUnblock")];const Nu=Mi({fields:yD,name:"blocking",apis:vD,state:Object.freeze({__proto__:null,init:()=>{const l=ic(m=>m.destroy());return cc({readState:l.isSet,blockWith:m=>{l.set({destroy:m})},clear:l.clear,isBlocked:l.isSet})}})}),bD=l=>So.getCurrent(l).each(m=>hc(m.element,!0)),Mh=(l,m,x)=>({within:l,extra:m,withinWidth:x}),OE=(l,m,x)=>{const S=_n(l,(E,P)=>((B,H)=>{const Z=x(B);return F.some({element:B,start:H,finish:H+Z,width:Z})})(P,E.len).fold(ae(E),B=>({len:B.finish,list:E.list.concat([B])})),{len:0,list:[]}).list,A=to(S,E=>E.finish<=m),D=Jt(A,(E,P)=>E+P.width,0);return{within:A,extra:S.slice(A.length),withinWidth:D}},Ay=l=>Ct(l,m=>m.element),Iy=(l,m)=>{const x=Ct(m,S=>fl(S));Zs.setGroups(l,x)},EE=(l,m,x)=>{const S=m.builtGroups.get();if(0===S.length)return;const A=sg(l,m,"primary"),D=Zr.getCoupled(l,"overflowGroup");Yt(A.element,"visibility","hidden");const E=S.concat([D]),P=on(E,H=>vl(H.element).bind(Z=>H.getSystem().getByDom(Z).toOptional()));x([]),Iy(A,E);const B=((H,Z,G,oe)=>{const ce=((ze,ke,Ce)=>{const Ee=OE(ke,ze,Ce);return 0===Ee.extra.length?F.some(Ee):F.none()})(H,Z,G).getOrThunk(()=>OE(Z,H-G(oe),G)),me=ce.within,Te=ce.extra,Ae=ce.withinWidth;return 1===Te.length&&Te[0].width<=G(oe)?((ze,ke,Ce)=>{const Ee=Ay(ze.concat(ke));return Mh(Ee,[],Ce)})(me,Te,Ae):Te.length>=1?((ze,ke,Ce,Ee)=>{const Ne=Ay(ze).concat([Ce]);return Mh(Ne,Ay(ke),Ee)})(me,Te,oe,Ae):(Ce=Ae,Mh(Ay(me),[],Ce));var Ce})(Ua(A.element),m.builtGroups.get(),H=>Math.ceil(H.element.dom.getBoundingClientRect().width),D);0===B.extra.length?(zn.remove(A,D),x([])):(Iy(A,B.within),x(B.extra)),No(A.element,"visibility"),Ph(A.element),P.each(Dn.focus)},zS=ae([Nr("splitToolbarBehaviours",[Zr]),Yi("builtGroups",()=>kn([]))]),$M=ae([Gc(["overflowToggledClass"]),Ps("getOverflowBounds"),kt("lazySink"),Yi("overflowGroups",()=>kn([])),Kn("onOpened"),Kn("onClosed")].concat(zS())),NE=ae([Ba({factory:Zs,schema:Th(),name:"primary"}),Nd({schema:Th(),name:"overflow"}),Nd({name:"overflow-button"}),Nd({name:"overflow-group"})]),FS=ae((l,m)=>{((x,S)=>{const A=tu.max(x,S,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);Yt(x,"max-width",A+"px")})(l,Math.floor(m))}),RE=ae([Gc(["toggledClass"]),kt("lazySink"),Hc("fetch"),Ps("getBounds"),Wc("fireDismissalEventInstead",[st("event",xm())]),dp(),Kn("onToggled")]),xD=ae([Nd({name:"button",overrides:l=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Pt([Qn.config({toggleClass:l.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:l.onToggled})])})}),Nd({factory:Zs,schema:Th(),name:"toolbar",overrides:l=>({toolbarBehaviours:Pt([bn.config({mode:"cyclic",onEscape:m=>(Vo(m,l,"button").each(Dn.focus),F.none())})])})})]),xv=ar(),VS=(l,m)=>{const x=Zr.getCoupled(l,"toolbarSandbox");Io.isOpen(x)?Io.close(x):Io.open(x,m.toolbar())},y1=(l,m,x,S)=>{const A=x.getBounds.map(E=>E()),D=x.lazySink(l).getOrDie();Ca.positionWithinBounds(D,m,{anchor:{type:"hotspot",hotspot:l,layouts:S,overrides:{maxWidthFunction:FS()}}},A)},YM=(l,m,x,S,A)=>{Zs.setGroups(m,A),y1(l,m,x,S),Qn.on(l)},hs=Ka({name:"FloatingToolbarButton",factory:(l,m,x,S)=>({...ua.sketch({...S.button(),action:A=>{VS(A,S)},buttonBehaviours:fp({dump:S.button().buttonBehaviours},[Zr.config({others:{toolbarSandbox:A=>((D,E,P)=>{const B=wC();return{dom:{tag:"div",attributes:{id:B.id}},behaviours:Pt([bn.config({mode:"special",onEscape:H=>(Io.close(H),F.some(!0))}),Io.config({onOpen:(H,Z)=>{const G=xv.get().getOr(!1);P.fetch().get(oe=>{YM(D,Z,P,E.layouts,oe),B.link(D.element),G||bn.focusIn(Z)})},onClose:()=>{Qn.off(D),xv.get().getOr(!1)||Dn.focus(D),B.unlink(D.element)},isPartOf:(H,Z,G)=>Fo(Z,G)||Fo(D,G),getAttachPoint:()=>P.lazySink(D).getOrDie()}),Vs.config({channels:{...g_({isExtraPart:ee,...P.fireDismissalEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({})}),...pp({doReposition:()=>{Io.getState(Zr.getCoupled(D,"toolbarSandbox")).each(H=>{y1(D,H,P,E.layouts)})}})}})])}})(A,x,l)}})])}),apis:{setGroups:(A,D)=>{Io.getState(Zr.getCoupled(A,"toolbarSandbox")).each(E=>{YM(A,E,l,x.layouts,D)})},reposition:A=>{Io.getState(Zr.getCoupled(A,"toolbarSandbox")).each(D=>{y1(A,D,l,x.layouts)})},toggle:A=>{VS(A,S)},toggleWithoutFocusing:A=>{var D,E;D=A,E=S,xv.set(!0),VS(D,E),xv.clear()},getToolbar:A=>Io.getState(Zr.getCoupled(A,"toolbarSandbox")),isOpen:A=>Io.isOpen(Zr.getCoupled(A,"toolbarSandbox"))}}),configFields:RE(),partFields:xD(),apis:{setGroups:(l,m,x)=>{l.setGroups(m,x)},reposition:(l,m)=>{l.reposition(m)},toggle:(l,m)=>{l.toggle(m)},toggleWithoutFocusing:(l,m)=>{l.toggleWithoutFocusing(m)},getToolbar:(l,m)=>l.getToolbar(m),isOpen:(l,m)=>l.isOpen(m)}}),HS=ae([kt("items"),Gc(["itemSelector"]),Nr("tgroupBehaviours",[bn])]),_D=ae([p0({name:"items",unit:"item"})]),Ah=Ka({name:"ToolbarGroup",configFields:HS(),partFields:_D(),factory:(l,m,x,S)=>({uid:l.uid,dom:l.dom,components:m,behaviours:Pa(l.tgroupBehaviours,[bn.config({mode:"flow",selector:l.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),Ar=l=>Ct(l,m=>fl(m)),b1=(l,m,x)=>{EE(l,x,S=>{x.overflowGroups.set(S),m.getOpt(l).each(A=>{hs.setGroups(A,Ar(S))})})},_v=Ka({name:"SplitFloatingToolbar",configFields:$M(),partFields:NE(),factory:(l,m,x,S)=>{const A=Wo(hs.sketch({fetch:()=>dd(D=>{D(Ar(l.overflowGroups.get()))}),layouts:{onLtr:()=>[Vi,Ki],onRtl:()=>[Ki,Vi],onBottomLtr:()=>[Ra,Na],onBottomRtl:()=>[Na,Ra]},getBounds:x.getOverflowBounds,lazySink:l.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:l.markers.overflowToggledClass},parts:{button:S["overflow-button"](),toolbar:S.overflow()},onToggled:(D,E)=>l[E?"onOpened":"onClosed"](D)}));return{uid:l.uid,dom:l.dom,components:m,behaviours:Pa(l.splitToolbarBehaviours,[Zr.config({others:{overflowGroup:()=>Ah.sketch({...S["overflow-group"](),items:[A.asSpec()]})}})]),apis:{setGroups:(D,E)=>{l.builtGroups.set(Ct(E,D.getSystem().build)),b1(D,A,l)},refresh:D=>b1(D,A,l),toggle:D=>{A.getOpt(D).each(E=>{hs.toggle(E)})},toggleWithoutFocusing:D=>{A.getOpt(D).each(hs.toggleWithoutFocusing)},isOpen:D=>A.getOpt(D).map(hs.isOpen).getOr(!1),reposition:D=>{A.getOpt(D).each(E=>{hs.reposition(E)})},getOverflow:D=>A.getOpt(D).bind(hs.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(l,m,x)=>{l.setGroups(m,x)},refresh:(l,m)=>{l.refresh(m)},reposition:(l,m)=>{l.reposition(m)},toggle:(l,m)=>{l.toggle(m)},toggleWithoutFocusing:(l,m)=>{l.toggle(m)},isOpen:(l,m)=>l.isOpen(m),getOverflow:(l,m)=>l.getOverflow(m)}}),wD=ae([Gc(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Kn("onOpened"),Kn("onClosed")].concat(zS())),SD=ae([Ba({factory:Zs,schema:Th(),name:"primary"}),Ba({factory:Zs,schema:Th(),name:"overflow",overrides:l=>({toolbarBehaviours:Pt([us.config({dimension:{property:"height"},closedClass:l.markers.closedClass,openClass:l.markers.openClass,shrinkingClass:l.markers.shrinkingClass,growingClass:l.markers.growingClass,onShrunk:m=>{Vo(m,l,"overflow-button").each(x=>{Qn.off(x)}),l.onClosed(m)},onGrown:m=>{l.onOpened(m)},onStartGrow:m=>{Vo(m,l,"overflow-button").each(Qn.on)}}),bn.config({mode:"acyclic",onEscape:m=>(Vo(m,l,"overflow-button").each(Dn.focus),F.some(!0))})])})}),Nd({name:"overflow-button",overrides:l=>({buttonBehaviours:Pt([Qn.config({toggleClass:l.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Nd({name:"overflow-group"})]),WS=(l,m,x)=>{Vo(l,m,"overflow-button").each(S=>{Vo(l,m,"overflow").each(A=>{if(ha(l,m),us.hasShrunk(A)){const D=m.onOpened;m.onOpened=E=>{x||bn.focusIn(A),D(E),m.onOpened=D}}else{const D=m.onClosed;m.onClosed=E=>{x||Dn.focus(S),D(E),m.onClosed=D}}us.toggleGrow(A)})})},ha=(l,m)=>{Vo(l,m,"overflow").each(x=>{EE(l,m,S=>{const A=Ct(S,D=>fl(D));Zs.setGroups(x,A)}),Vo(l,m,"overflow-button").each(S=>{us.hasGrown(x)&&Qn.on(S)}),us.refresh(x)})},x1=Ka({name:"SplitSlidingToolbar",configFields:wD(),partFields:SD(),factory:(l,m,x,S)=>{const A="alloy.toolbar.toggle";return{uid:l.uid,dom:l.dom,components:m,behaviours:Pa(l.splitToolbarBehaviours,[Zr.config({others:{overflowGroup:D=>Ah.sketch({...S["overflow-group"](),items:[ua.sketch({...S["overflow-button"](),action:E=>{Zn(D,A)}})]})}}),Fn("toolbar-toggle-events",[xt(A,D=>{WS(D,l,!1)})])]),apis:{setGroups:(D,E)=>{((P,B)=>{const H=Ct(B,P.getSystem().build);l.builtGroups.set(H)})(D,E),ha(D,l)},refresh:D=>ha(D,l),toggle:D=>{WS(D,l,!1)},toggleWithoutFocusing:D=>{WS(D,l,!0)},isOpen:D=>Vo(D,l,"overflow").map(us.hasGrown).getOr(!1)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(l,m,x)=>{l.setGroups(m,x)},refresh:(l,m)=>{l.refresh(m)},toggle:(l,m)=>{l.toggle(m)},isOpen:(l,m)=>l.isOpen(m)}}),gs=l=>({dom:{tag:"div",classes:["tox-toolbar__group"],...l.title.fold(()=>({}),x=>({attributes:{title:x}}))},components:[Ah.parts.items({})],items:l.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Pt([cr.config({}),Dn.config({})])}),ts=l=>Ah.sketch(gs(l)),XM=(l,m)=>{const x=qo(S=>{const A=Ct(l.initGroups,ts);Zs.setGroups(S,A)});return Pt([X0(()=>l.providers.checkUiComponentContext("any").shouldDisable),gi(()=>l.providers.checkUiComponentContext("any")),bn.config({mode:m,onEscape:l.onEscape,selector:".tox-toolbar__group"}),Fn("toolbar-events",[x])])},US=l=>{const m=l.cyclicKeying?"cyclic":"acyclic";return{uid:l.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":gs({title:F.none(),items:[]}),"overflow-button":fE({context:"any",name:"more",icon:F.some("more-drawer"),enabled:!0,tooltip:F.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:F.none(),borderless:!1},F.none(),l.providers,[],"overflow-button")},splitToolbarBehaviours:XM(l,m)}},Rg=l=>{const m=US(l),x=_v.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return _v.sketch({...m,lazySink:l.getSink,getOverflowBounds:()=>{const S=l.moreDrawerData.lazyHeader().element,A=ol(S),D=Tv(S),E=ol(D),P=Math.max(D.dom.scrollHeight,E.height);return Oi(A.x+4,E.y,A.width-8,P)},parts:{...m.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l.attributes}}},components:[x],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:S=>l.onToggled(S,!0),onClosed:S=>l.onToggled(S,!1)})},GS=l=>{const m=x1.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),x=x1.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),S=US(l);return x1.sketch({...S,components:[m,x],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:A=>{A.getSystem().broadcastOn([FM()],{type:"opened"}),l.onToggled(A,!0)},onClosed:A=>{A.getSystem().broadcastOn([FM()],{type:"closed"}),l.onToggled(A,!1)}})},jS=l=>{const m=l.cyclicKeying?"cyclic":"acyclic";return Zs.sketch({uid:l.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(l.type===fc.scrolling?["tox-toolbar--scrolling"]:[])},components:[Zs.parts.groups({})],toolbarBehaviours:XM(l,m)})},CD=[ph,id,fo("tooltip"),qu("buttonType","secondary",["primary","secondary"]),xa("borderless",!1),Hc("onAction"),Ti("context","mode:design")],kD={button:[...CD,$s,Hh("type",["button"])],togglebutton:[...CD,xa("active",!1),Hh("type",["togglebutton"])]},Dy=[Hh("type",["group"]),na("buttons",[],xr("type",kD))],Yd=xr("type",{...kD,group:Dy}),Oy=Et([na("buttons",[],Yd),Hc("onShow"),Hc("onHide")]),qS=(l,m)=>((x,S)=>{var A,D;const E="togglebutton"===x.type,P=x.icon.map(ke=>Ig(ke,S.icons)).map(Wo),B={...x,name:E?x.text.getOr(x.icon.getOr("")):null!==(A=x.text)&&void 0!==A?A:x.icon.getOr(""),primary:"primary"===x.buttonType,buttonType:F.from(x.buttonType),tooltip:x.tooltip,icon:x.icon,enabled:!0,borderless:x.borderless},H=o1(null!==(D=x.buttonType)&&void 0!==D?D:"secondary"),Z=E?x.text.map(S.translate):F.some(S.translate(x.text)),G=Z.map(Hr),oe=B.tooltip.or(Z).map(ke=>({"aria-label":S.translate(ke)})).getOr({}),ce=P.map(ke=>ke.asSpec()),me=Nf([ce,G]),Te=x.icon.isSome()&&G.isSome(),Ae={tag:"button",classes:H.concat(...x.icon.isSome()&&!Te?["tox-button--icon"]:[]).concat(...Te?["tox-button--icon-and-text"]:[]).concat(...x.borderless?["tox-button--naked"]:[]).concat(..."togglebutton"===x.type&&x.active?["tox-button--enabled"]:[]),attributes:oe},ze=fv(B,F.some(ke=>{const Ce=Ee=>{P.map(Ne=>Ne.getOpt(ke).each(Fe=>{zn.set(Fe,[Ig(Ee,S.icons)])}))};return E?x.onAction({setIcon:Ce,setActive:Ee=>{const Ne=ke.element;Ee?(ui(Ne,"tox-button--enabled"),Pn(Ne,"aria-pressed",!0)):(Vr(Ne,"tox-button--enabled"),tr(Ne,"aria-pressed"))},isActive:()=>qa(ke.element,"tox-button--enabled"),focus:()=>hc(ke.element)}):"button"===x.type?x.onAction({setIcon:Ce}):void 0}),[],Ae,me,x.tooltip,S);return ua.sketch(ze)})(l,m),ZM=pn().deviceType,TD=ZM.isPhone(),fN=ZM.isTablet();var Lg=Ka({name:"silver.View",configFields:[kt("viewConfig")],partFields:[Us({factory:{sketch:l=>{let m=!1;const x=Ct(l.buttons,S=>{return"group"===S.type?(m=!0,D=l.providers,{dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ct(S.buttons,E=>qS(E,D))}):qS(S,l.providers);var D});return{uid:l.uid,dom:{tag:"div",classes:[m?"tox-view__toolbar":"tox-view__header",...TD||fN?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Pt([Dn.config({}),bn.config({mode:"flow",selector:"button, .tox-button",focusInside:Km.OnEnterOrSpaceMode})]),components:m?x:[Cc.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Cc.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:x})]}}},schema:[kt("buttons"),kt("providers")],name:"header"}),Us({factory:{sketch:l=>({uid:l.uid,behaviours:Pt([Dn.config({}),cr.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}})},schema:[],name:"pane"})],factory:(l,m,x,S)=>{const A={getPane:D=>Wi.getPart(D,l,"pane"),getOnShow:D=>l.viewConfig.onShow,getOnHide:D=>l.viewConfig.onHide};return{uid:l.uid,dom:l.dom,components:m,behaviours:Pt([Dn.config({}),bn.config({mode:"cyclic",focusInside:Km.OnEnterOrSpaceMode})]),apis:A}},apis:{getPane:(l,m)=>l.getPane(m),getOnShow:(l,m)=>l.getOnShow(m),getOnHide:(l,m)=>l.getOnHide(m)}});const LE=(l,m,x)=>Ur(m,(S,A)=>{const D=il(br("view",Oy,S));return l.slot(A,Lg.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:D,components:[...D.buttons.length>0?[Lg.parts.header({buttons:D.buttons,providers:x})]:[],Lg.parts.pane({})]}))}),vN=(l,m)=>es.sketch(x=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:LE(x,l,m),slotBehaviours:mh([qo(S=>es.hideAllSlots(S))])})),MD=l=>hn(es.getSlotNames(l),m=>es.isShowing(l,m)),AD=(l,m,x)=>{es.getSlot(l,m).each(S=>{Lg.getPane(S).each(A=>{x(S)({getContainer:ae(A.element.dom)})})})};var _1=$l({factory:(l,m)=>{const x={setViews:(S,A)=>{zn.set(S,[vN(A,m.backstage.shared.providers)])},whichView:S=>So.getCurrent(S).bind(MD),toggleView:(S,A,D,E)=>So.getCurrent(S).exists(P=>{const B=MD(P),H=B.exists(G=>E===G),Z=es.getSlot(P,E).isSome();return Z&&(es.hideAllSlots(P),H?((G=>{const oe=G.element;Yt(oe,"display","none"),Pn(oe,"aria-hidden","true")})(S),A()):(D(),(G=>{const oe=G.element;No(oe,"display"),tr(oe,"aria-hidden")})(S),es.showSlot(P,E),AD(P,E,Lg.getOnShow)),B.each(G=>AD(P,G,Lg.getOnHide))),Z})};return{uid:l.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Pt([zn.config({}),So.config({find:S=>{const A=zn.contents(S);return Tt(A)}})]),apis:x}},name:"silver.ViewWrapper",configFields:[kt("backstage")],apis:{setViews:(l,m,x)=>l.setViews(m,x),toggleView:(l,m,x,S,A)=>l.toggleView(m,x,S,A),whichView:(l,m)=>l.whichView(m)}});const KM=Eu.optional({factory:v1,name:"menubar",schema:[kt("backstage")]}),Ey=Eu.optional({factory:{sketch:l=>BM.sketch({uid:l.uid,dom:l.dom,listBehaviours:Pt([bn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>jS({type:l.type,uid:cn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:l.providers,onEscape:()=>(l.onEscape(),F.some(!0))}),setupItem:(m,x,S,A)=>{Zs.setGroups(x,S)},shell:!0})},name:"multiple-toolbar",schema:[kt("dom"),kt("onEscape")]}),w1=Eu.optional({factory:{sketch:l=>{return((x=l).type===fc.sliding?GS:x.type===fc.floating?Rg:jS)({type:l.type,uid:l.uid,onEscape:()=>(l.onEscape(),F.some(!0)),onToggled:(x,S)=>l.onToolbarToggled(S),cyclicKeying:!1,initGroups:[],getSink:l.getSink,providers:l.providers,moreDrawerData:{lazyToolbar:l.lazyToolbar,lazyMoreButton:l.lazyMoreButton,lazyHeader:l.lazyHeader},attributes:l.attributes});var x}},name:"toolbar",schema:[kt("dom"),kt("onEscape"),kt("getSink")]}),Ih=Eu.optional({factory:{sketch:l=>({uid:l.uid,dom:l.dom,components:l.components,behaviours:Pt((l.sticky?WM:ES)(l.editor,l.sharedBackstage))})},name:"header",schema:[kt("dom")]}),Ny=Eu.optional({factory:{sketch:l=>({uid:l.uid,dom:l.dom,components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:"\u26a1\ufe0fUpgrade"}}]})},name:"promotion",schema:[kt("dom")]}),S1=Eu.optional({name:"socket",schema:[kt("dom")]}),C1=Eu.optional({factory:{sketch:l=>({uid:l.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Pt([cr.config({}),Dn.config({}),us.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:m=>{So.getCurrent(m).each(es.hideAllSlots),Zn(m,BS)},onGrown:m=>{Zn(m,BS)},onStartGrow:m=>{mn(m,My,{width:kr(m.element,"width").getOr("")})},onStartShrink:m=>{mn(m,My,{width:Ua(m.element)+"px"})}}),zn.config({}),So.config({find:m=>{const x=zn.contents(m);return Tt(x)}})])}],behaviours:Pt([cM(0),Fn("sidebar-sliding-events",[xt(My,(m,x)=>{Yt(m.element,"width",x.event.width)}),xt(BS,(m,x)=>{No(m.element,"width")})])])})},name:"sidebar",schema:[kt("dom")]}),ID=Eu.optional({factory:{sketch:l=>({uid:l.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Pt([zn.config({}),Nu.config({focus:!1}),So.config({find:m=>Tt(m.components())})]),components:[]})},name:"throbber",schema:[kt("dom")]}),JM=Eu.optional({factory:_1,name:"viewWrapper",schema:[kt("backstage")]}),k1=Eu.optional({factory:{sketch:l=>({uid:l.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:l.components})},name:"editorContainer",schema:[]});var rr=Ka({name:"OuterContainer",factory:(l,m,x)=>{let S=!1;const A=E=>{((l,m)=>((x,S)=>{const A=x.dom;return A.parentNode?_C(je(A.parentNode),D=>!po(x,D)&&Kr(D,".tox-statusbar")):F.none()})(l))(E).each(P=>{"none"===Di(P,"display")&&"true"===qi(P,"aria-hidden")?(No(P,"display"),tr(P,"aria-hidden")):(Yt(P,"display","none"),Pn(P,"aria-hidden","true"))})},D={getSocket:E=>Wi.getPart(E,l,"socket"),setSidebar:(E,P,B)=>{Wi.getPart(E,l,"sidebar").each(H=>{return G=P,oe=B,void So.getCurrent(Z=H).each(ce=>{zn.set(ce,[jM(G)]);const me=oe?.toLowerCase();Q(me)&&bo(G,me)&&So.getCurrent(ce).each(Te=>{es.showSlot(Te,me),us.immediateGrow(ce),No(ce.element,"width"),PS(Z.element,"region")})});var Z,G,oe})},toggleSidebar:(E,P)=>{Wi.getPart(E,l,"sidebar").each(B=>{return Z=P,void So.getCurrent(H=B).each(G=>{So.getCurrent(G).each(oe=>{us.hasGrown(G)?es.isShowing(oe,Z)?(us.shrink(G),PS(H.element,"presentation")):(es.hideAllSlots(oe),es.showSlot(oe,Z),PS(H.element,"region")):(es.hideAllSlots(oe),es.showSlot(oe,Z),us.grow(G),PS(H.element,"region"))})});var H,Z})},whichSidebar:E=>Wi.getPart(E,l,"sidebar").bind(DE).getOrNull(),getHeader:E=>Wi.getPart(E,l,"header"),getToolbar:E=>Wi.getPart(E,l,"toolbar"),setToolbar:(E,P)=>{Wi.getPart(E,l,"toolbar").each(B=>{const H=Ct(P,ts);B.getApis().setGroups(B,H)})},setToolbars:(E,P)=>{Wi.getPart(E,l,"multiple-toolbar").each(B=>{const H=Ct(P,Z=>Ct(Z,ts));BM.setItems(B,H)})},refreshToolbar:E=>{Wi.getPart(E,l,"toolbar").each(P=>P.getApis().refresh(P))},toggleToolbarDrawer:E=>{Wi.getPart(E,l,"toolbar").each(P=>{ir(P.getApis().toggle,B=>B(P))})},toggleToolbarDrawerWithoutFocusing:E=>{Wi.getPart(E,l,"toolbar").each(P=>{ir(P.getApis().toggleWithoutFocusing,B=>B(P))})},isToolbarDrawerToggled:E=>Wi.getPart(E,l,"toolbar").bind(P=>F.from(P.getApis().isOpen).map(B=>B(P))).getOr(!1),getThrobber:E=>Wi.getPart(E,l,"throbber"),focusToolbar:E=>{Wi.getPart(E,l,"toolbar").orThunk(()=>Wi.getPart(E,l,"multiple-toolbar")).each(P=>{bn.focusIn(P)})},setMenubar:(E,P)=>{Wi.getPart(E,l,"menubar").each(B=>{v1.setMenus(B,P)})},focusMenubar:E=>{Wi.getPart(E,l,"menubar").each(P=>{v1.focus(P)})},setViews:(E,P)=>{Wi.getPart(E,l,"viewWrapper").each(B=>{_1.setViews(B,P)})},toggleView:(E,P)=>Wi.getPart(E,l,"viewWrapper").exists(B=>_1.toggleView(B,()=>D.showMainView(E),()=>D.hideMainView(E),P)),whichView:E=>Wi.getPart(E,l,"viewWrapper").bind(_1.whichView).getOrNull(),hideMainView:E=>{S=D.isToolbarDrawerToggled(E),S&&D.toggleToolbarDrawer(E),Wi.getPart(E,l,"editorContainer").each(P=>{const B=P.element;A(B),Yt(B,"display","none"),Pn(B,"aria-hidden","true")})},showMainView:E=>{S&&D.toggleToolbarDrawer(E),Wi.getPart(E,l,"editorContainer").each(P=>{const B=P.element;A(B),No(B,"display"),tr(B,"aria-hidden")})}};return{uid:l.uid,dom:l.dom,components:m,apis:D,behaviours:l.behaviours}},configFields:[kt("dom"),kt("behaviours")],partFields:[Ih,KM,w1,Ey,S1,C1,Ny,ID,JM,k1],apis:{getSocket:(l,m)=>l.getSocket(m),setSidebar:(l,m,x,S)=>{l.setSidebar(m,x,S)},toggleSidebar:(l,m,x)=>{l.toggleSidebar(m,x)},whichSidebar:(l,m)=>l.whichSidebar(m),getHeader:(l,m)=>l.getHeader(m),getToolbar:(l,m)=>l.getToolbar(m),setToolbar:(l,m,x)=>{l.setToolbar(m,x)},setToolbars:(l,m,x)=>{l.setToolbars(m,x)},refreshToolbar:(l,m)=>l.refreshToolbar(m),toggleToolbarDrawer:(l,m)=>{l.toggleToolbarDrawer(m)},toggleToolbarDrawerWithoutFocusing:(l,m)=>{l.toggleToolbarDrawerWithoutFocusing(m)},isToolbarDrawerToggled:(l,m)=>l.isToolbarDrawerToggled(m),getThrobber:(l,m)=>l.getThrobber(m),setMenubar:(l,m,x)=>{l.setMenubar(m,x)},focusMenubar:(l,m)=>{l.focusMenubar(m)},focusToolbar:(l,m)=>{l.focusToolbar(m)},setViews:(l,m,x)=>{l.setViews(m,x)},toggleView:(l,m,x)=>l.toggleView(m,x),whichView:(l,m)=>l.whichView(m)}});const Ru={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},Qp=l=>l.split(" "),T1=(l,m)=>{const x={...Ru,...m.menus},S=Sn(m.menus).length>0,A=Qp(void 0===m.menubar||!0===m.menubar?"file edit view insert format tools table help":!1===m.menubar?"":m.menubar),D=to(A,P=>{const B=bo(Ru,P);return S?B||vn(m.menus,P).exists(H=>bo(H,"items")):B}),E=Ct(D,P=>{const B=x[P];return((H,Z,G)=>{const oe=ch(G).split(/[ ,]/);return{text:H.title,getItems:()=>Yn(H.items,ce=>{const me=ce.toLowerCase();return 0===me.trim().length||Bt(oe,Te=>Te===me)?[]:"separator"===me||"|"===me?[{type:"separator"}]:Z.menuItems[me]?[Z.menuItems[me]]:[]})}})({title:B.title,items:Qp(B.items)},m,l)});return to(E,P=>P.getItems().length>0&&Bt(P.getItems(),B=>Q(B)||"separator"!==B.type))},Xd=(l,m,x)=>(l.on("remove",()=>x.unload(m)),x.load(m)),$S=(l,m,x,S)=>(l.on("remove",()=>S.unloadRawCss(m)),S.loadRawCss(m,x)),QM=async(l,m)=>{const x="ui/"+Qc(l).getOr("default")+"/skin.css",S=tinymce.Resource.get(x);if(!Q(S))return Xd(l,m+`/skin${l.editorManager.suffix}.css`,l.ui.styleSheetLoader);$S(l,x,S,l.ui.styleSheetLoader)},ga=async(l,m)=>{var x;if(x=je(l.getElement()),eu(x).isSome()){const S="ui/"+Qc(l).getOr("default")+"/skin.shadowdom.css",A=tinymce.Resource.get(S);if(!Q(A))return Xd(l,m+`/skin.shadowdom${l.editorManager.suffix}.css`,sf.DOM.styleSheetLoader);$S(l,S,A,sf.DOM.styleSheetLoader)}},eA=(l,m)=>{return(async(x,S)=>{const A=()=>{const E=D0(S);E&&S.contentCSS.push(E+(x?"/content.inline":"/content")+`${S.editorManager.suffix}.css`)};Qc(S).fold(A,E=>{const P="ui/"+E+(x?"/content.inline":"/content")+".css",B=tinymce.Resource.get(P);Q(B)?$S(S,P,B,S.ui.styleSheetLoader):A()});const D=D0(S);if(!Yb(S)&&Q(D))return Promise.all([QM(S,D),ga(S,D)]).then()})(l,m).then((x=>{const S=()=>{x._skinLoaded=!0,x.dispatch("SkinLoaded")};return()=>{x.initialized?S():x.on("init",S)}})(m),(x=m,()=>{x.dispatch("SkinLoadError",{message:"Skin could not be loaded"})}));var x},M1=Ue(eA,!1),tA=Ue(eA,!0),em=(l,m,x)=>Al(x)?l.translate(m):l.translate([m,l.translate(x)]),nA=(l,m)=>{const x=(D,E,P,B)=>{const H=l.shared.providers.translate(D.title);if("separator"===D.type)return F.some({type:"separator",text:H});if("submenu"===D.type){const Z=Yn(D.getStyleItems(),G=>S(G,E,B));return 0===E&&Z.length<=0?F.none():F.some({type:"nestedmenuitem",text:H,enabled:Z.length>0,getSubmenuItems:()=>Yn(D.getStyleItems(),G=>S(G,E,B))})}return F.some({type:"togglemenuitem",text:H,icon:D.icon,active:D.isSelected(B),enabled:!P,onAction:m.onAction(D),...D.getStylePreview().fold(()=>({}),Z=>({meta:{style:Z}}))})},S=(D,E,P)=>{const B="formatter"===D.type&&m.isInvalid(D);return 0===E?B?[]:x(D,E,!1,P).toArray():x(D,E,B,P).toArray()},A=D=>{const E=m.getCurrentValue(),P=m.shouldHide?0:1;return Yn(D,B=>S(B,P,E))};return{validateItems:A,getFetch:(D,E)=>(P,B)=>{const H=E(),Z=A(H);B(gy(Z,Cl.CLOSE_ON_EXECUTE,D,{isHorizontalMenu:!1,search:F.none()}))}}},Lu=(l,m)=>{const x=m.dataset,S="basic"===x.type?()=>Ct(x.data,A=>DM(A,m.isSelectedFor,m.getPreviewFor)):x.getData;return{items:nA(l,m),getStyleItems:S}},Ac=(l,m,x,S,A,D)=>{const{items:E,getStyleItems:P}=Lu(m,x),B=kn(x.tooltip);return uv({context:"mode:design",text:x.icon.isSome()?F.none():x.text,icon:x.icon,ariaLabel:F.some(x.tooltip),tooltip:F.none(),role:F.none(),fetch:E.getFetch(m,P),onSetup:H=>{const Z=G=>H.setTooltip(em(l,S(G.value),G.value));return l.on(A,Z),bT(Hp(l,"NodeChange",G=>{const oe=G.getComponent();x.updateText(oe),Nn.set(G.getComponent(),!l.selection.isEditable())})(H),()=>l.off(A,Z))},getApi:H=>({getComponent:ae(H),setTooltip:Z=>{const G=m.shared.providers.translate(Z);Pn(H.element,"aria-label",G),B.set(Z)}}),columns:1,presets:"normal",classes:x.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[vr.config({...m.shared.providers.tooltips.getConfig({tooltipText:m.shared.providers.translate(x.tooltip),onShow:H=>{if(x.tooltip!==B.get()){const Z=m.shared.providers.translate(B.get());vr.setComponents(H,m.shared.providers.tooltips.getComponents({tooltipText:Z}))}}})})]},"tox-tbtn",m.shared,D)};var A1;!function(l){l[l.SemiColon=0]="SemiColon",l[l.Space=1]="Space"}(A1||(A1={}));const Ry=(l,m,x)=>{var D,A;return{type:"basic",data:(D=l.options.get(m),A=x===A1.SemiColon?D.replace(/;$/,"").split(";"):D.split(" "),Ct(A,D=>{let E=D,P=D;const B=D.split("=");return B.length>1&&(E=B[0],P=B[1]),{title:E,format:P}}))}},DD=ae("Alignment {0}"),oA=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],wv=l=>{const m={type:"basic",data:oA};return{tooltip:em(l,DD(),"left"),text:F.none(),icon:F.some("align-left"),isSelectedFor:x=>()=>l.formatter.match(x),getCurrentValue:F.none,getPreviewFor:x=>F.none,onAction:x=>()=>hn(oA,S=>S.format===x.format).each(S=>l.execCommand(S.command)),updateText:x=>{const S=hn(oA,A=>l.formatter.match(A.format)).fold(ae("left"),A=>A.title.toLowerCase());mn(x,dv,{icon:`align-${S}`}),l.dispatch("AlignTextUpdate",{value:S})},dataset:m,shouldHide:!1,isInvalid:x=>!l.formatter.canApply(x.format)}},OD=(l,m)=>{const x=m(),S=Ct(x,A=>A.format);return F.from(l.formatter.closest(S)).bind(A=>hn(x,D=>D.format===A))},Ui=ae("Block {0}"),Pu="Paragraph",Dh=l=>{const m=Ry(l,"block_formats",A1.SemiColon);return{tooltip:em(l,Ui(),Pu),text:F.some(Pu),icon:F.none(),isSelectedFor:x=>()=>l.formatter.match(x),getCurrentValue:F.none,getPreviewFor:x=>()=>{const S=l.formatter.get(x);return S?F.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:l.dom.parseStyle(l.formatter.getCssText(x))}):F.none()},onAction:Vf(l),updateText:x=>{const S=OD(l,()=>m.data).fold(ae(Pu),A=>A.title);mn(x,kc,{text:S}),l.dispatch("BlocksTextUpdate",{value:S})},dataset:m,shouldHide:!1,isInvalid:x=>!l.formatter.canApply(x.format)}},Bu=ae("Font {0}"),Ly="System Font",XS=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],Ks=l=>{const m=l.split(/\s*,\s*/);return Ct(m,x=>x.replace(/^['"]+|['"]+$/g,""))},tm=(l,m)=>m.length>0&&dn(m,x=>l.indexOf(x.toLowerCase())>-1),rA=l=>{const m=()=>{const S=H=>H?Ks(H)[0]:"",A=l.queryCommandValue("FontName"),D=x.data,E=A?A.toLowerCase():"",P=Z_(l);return{matchOpt:hn(D,H=>{const Z=H.format;return Z.toLowerCase()===E||S(Z).toLowerCase()===S(E).toLowerCase()}).orThunk(()=>go(((H,Z)=>{if(0===H.indexOf("-apple-system")||Z.length>0){const G=Ks(H.toLowerCase());return tm(G,XS)||tm(G,Z)}return!1})(E,P),{title:Ly,format:E})),font:A}},x=Ry(l,"font_family_formats",A1.SemiColon);return{tooltip:em(l,Bu(),Ly),text:F.some(Ly),icon:F.none(),isSelectedFor:S=>A=>A.exists(D=>D.format===S),getCurrentValue:()=>{const{matchOpt:S}=m();return S},getPreviewFor:S=>()=>F.some({tag:"div",styles:-1===S.indexOf("dings")?{"font-family":S}:{}}),onAction:S=>()=>{l.undoManager.transact(()=>{l.focus(),l.execCommand("FontName",!1,S.format)})},updateText:S=>{const{matchOpt:A,font:D}=m(),E=A.fold(ae(D),P=>P.title);mn(S,kc,{text:E}),l.dispatch("FontFamilyTextUpdate",{value:E})},dataset:x,shouldHide:!1,isInvalid:ee}},ED={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},ZS=(()=>{const l="[0-9]+",m="[eE][+-]?"+l,x=A=>`(?:${A})?`,S=["Infinity",l+"\\."+x(l)+x(m),"\\."+l+x(m),l+x(m)].join("|");return new RegExp(`^([+-]?(?:${S}))(.*)$`)})(),Ic=(l,m)=>F.from(ZS.exec(l)).bind(x=>{const S=Number(x[1]),A=x[2];return D=A,Bt(m,P=>Bt(ED[P],B=>D===B))?F.some({value:S,unit:A}):F.none();var D}),KS={tab:ae(9),escape:ae(27),enter:ae(13),backspace:ae(8),delete:ae(46),left:ae(37),up:ae(38),right:ae(39),down:ae(40),space:ae(32),home:ae(36),end:ae(35),pageUp:ae(33),pageDown:ae(34)},e=ae("Font size {0}"),t="12pt",o={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},a={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},c=(l,m)=>/[0-9.]+px$/.test(l)?((x,S)=>{const A=Math.pow(10,S);return Math.round(x*A)/A})(72*parseInt(l,10)/96,m||0)+"pt":vn(a,l).getOr(l),h=l=>vn(o,l).getOr(""),p=l=>{const m=()=>{let A=F.none();const D=S.data,E=l.queryCommandValue("FontSize");if(E)for(let P=3;A.isNone()&&P>=0;P--){const B=c(E,P),H=h(B);A=hn(D,Z=>Z.format===E||Z.format===B||Z.format===H)}return{matchOpt:A,size:E}},x=ae(F.none),S=Ry(l,"font_size_formats",A1.Space);return{tooltip:em(l,e(),t),text:F.some(t),icon:F.none(),isSelectedFor:A=>D=>D.exists(E=>E.format===A),getPreviewFor:x,getCurrentValue:()=>{const{matchOpt:A}=m();return A},onAction:A=>()=>{l.undoManager.transact(()=>{l.focus(),l.execCommand("FontSize",!1,A.format)})},updateText:A=>{const{matchOpt:D,size:E}=m(),P=D.fold(ae(E),B=>B.title);mn(A,kc,{text:P}),l.dispatch("FontSizeTextUpdate",{value:P})},dataset:S,shouldHide:!1,isInvalid:ee}},y=l=>Al(l)?"Formats":"Format {0}",w=(l,m)=>{const x="Formats";return{tooltip:em(l,y(""),""),text:F.some(x),icon:F.none(),isSelectedFor:S=>()=>l.formatter.match(S),getCurrentValue:F.none,getPreviewFor:S=>()=>{const A=l.formatter.get(S);return void 0!==A?F.some({tag:A.length>0&&(A[0].inline||A[0].block)||"div",styles:l.dom.parseStyle(l.formatter.getCssText(S))}):F.none()},onAction:Vf(l),updateText:S=>{const A=P=>IM(P)?Yn(P.items,A):Cy(P)?[{title:P.title,format:P.format}]:[],D=Yn(qd(l),A),E=OD(l,ae(D)).fold(ae({title:x,tooltipLabel:""}),P=>({title:P.title,tooltipLabel:P.title}));mn(S,kc,{text:E.title}),l.dispatch("StylesTextUpdate",{value:E.tooltipLabel})},shouldHide:$_(l),isInvalid:S=>!l.formatter.canApply(S.format),dataset:m}},C=ae([kt("toggleClass"),kt("fetch"),Qu("onExecute"),st("getHotspot",F.some),st("getAnchorOverrides",ae({})),dp(),Qu("onItemExecute"),Bn("lazySink"),kt("dom"),Kn("onOpen"),Nr("splitDropdownBehaviours",[Zr,bn,Dn]),st("matchWidth",!1),st("useMinWidth",!1),st("eventOrder",{}),Bn("role"),Bn("listRole")].concat(Fw())),n=Ba({factory:ua,schema:[kt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Pt([Dn.revoke()])}),overrides:l=>({dom:{tag:"span",attributes:{role:"presentation"}},action:m=>{m.getSystem().getByUid(l.uid).each(Vl)},buttonBehaviours:Pt([Qn.config({toggleOnExecute:!1,toggleClass:l.toggleClass})])})}),i=Ba({factory:ua,schema:[kt("dom")],name:"button",defaults:()=>({buttonBehaviours:Pt([Dn.revoke()])}),overrides:l=>({dom:{tag:"span",attributes:{role:"presentation"}},action:m=>{m.getSystem().getByUid(l.uid).each(x=>{l.onExecute(x,m)})}})}),s=ae([n,i,Us({factory:{sketch:l=>({uid:l.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:l.text}})},schema:[kt("text")],name:"aria-descriptor"}),Nd({schema:[Ju()],name:"menu",defaults:l=>({onExecute:(m,x)=>{m.getSystem().getByUid(l.uid).each(S=>{l.onItemExecute(S,m,x)})}})}),ET()]),d=Ka({name:"SplitDropdown",configFields:C(),partFields:s(),factory:(l,m,x,S)=>{const A=H=>{So.getCurrent(H).each(Z=>{Wn.highlightFirst(Z),bn.focusIn(Z)})},D=H=>{NT(l,Ge,H,S,A,Ai.HighlightMenuAndItem).get(de)},E=H=>{const Z=sg(H,l,"button");return Vl(Z),F.some(!0)},P={...gr([qo((H,Z)=>{Vo(H,l,"aria-descriptor").each(G=>{const oe=cn("aria");Pn(G.element,"id",oe),Pn(H.element,"aria-describedby",oe)})})]),...Hb(F.some(D))};return{uid:l.uid,dom:l.dom,components:m,apis:{repositionMenus:H=>{Qn.isOn(H)&&Is(H)}},eventOrder:{...l.eventOrder,[ss()]:["disabling","toggling","alloy.base.behaviour"]},events:P,behaviours:Pa(l.splitDropdownBehaviours,[Zr.config({others:{sandbox:H=>{const Z=sg(H,l,"arrow");return Dx(l,H,{onOpen:()=>{Qn.on(Z),Qn.on(H)},onClose:()=>{Qn.off(Z),Qn.off(H)}})}}}),bn.config({mode:"special",onSpace:E,onEnter:E,onDown:H=>(D(H),F.some(!0))}),Dn.config({}),Qn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:l.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(l,m)=>l.repositionMenus(m)}}),u=l=>({isEnabled:()=>!Nn.isDisabled(l),setEnabled:m=>Nn.set(l,!m),setText:m=>mn(l,kc,{text:m}),setIcon:m=>mn(l,dv,{icon:m})}),f=l=>({setActive:m=>{Qn.set(l,m)},isActive:()=>Qn.isOn(l),isEnabled:()=>!Nn.isDisabled(l),setEnabled:m=>Nn.set(l,!m),setText:m=>mn(l,kc,{text:m}),setIcon:m=>mn(l,dv,{icon:m})}),v=(l,m)=>l.map(x=>({"aria-label":m.translate(x)})).getOr({}),_=cn("focus-button"),k=(l,m,x,S,A,D,E)=>{const P=m.map(H=>Wo(hy(H,"tox-tbtn",A))),B=l.map(H=>Wo(Ig(H,A.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(m.isSome()?["tox-tbtn--select"]:[]),attributes:{...v(x,A),...W(E)?{"data-mce-name":E}:{}}},components:Nf([B.map(H=>H.asSpec()),P.map(H=>H.asSpec())]),eventOrder:{[cl()]:["focusing","alloy.base.behaviour",cv],[hl()]:[cv,"toolbar-group-button-events"]},buttonBehaviours:Pt([X0(()=>A.checkUiComponentContext(D).shouldDisable),gi(()=>A.checkUiComponentContext(D)),Fn(cv,[qo((H,Z)=>mM(H)),xt(kc,(H,Z)=>{P.bind(G=>G.getOpt(H)).each(G=>{zn.set(G,[Hr(A.translate(Z.event.text))])})}),xt(dv,(H,Z)=>{B.bind(G=>G.getOpt(H)).each(G=>{zn.set(G,[Ig(Z.event.icon,A.icons)])})}),xt(cl(),(H,Z)=>{Z.event.prevent(),Zn(H,_)})])].concat(S.getOr([])))}},T=(l,m,x,S)=>{var A;const D=kn(de),E=k(l.icon,l.text,l.tooltip,F.none(),x,l.context,S);return ua.sketch({dom:E.dom,components:E.components,eventOrder:uE,buttonBehaviours:{...Pt([Fn("toolbar-button-events",[(P={onAction:l.onAction,getApi:m.getApi},Hl((B,H)=>{wc(P,B)(Z=>{mn(B,NI,{buttonApi:Z}),P.onAction(Z)})})),sd(m,D),ni(m,D)]),...l.tooltip.map(B=>vr.config(x.tooltips.getConfig({tooltipText:x.translate(B)+l.shortcut.map(H=>` (${Rf(H)})`).getOr("")}))).toArray(),X0(()=>!l.enabled||x.checkUiComponentContext(l.context).shouldDisable),gi(()=>x.checkUiComponentContext(l.context))].concat(m.toolbarButtonBehaviours)),[cv]:null===(A=E.buttonBehaviours)||void 0===A?void 0:A[cv]}});var P},M=(l,m,x,S)=>T(l,{toolbarButtonBehaviours:x.length>0?[Fn("toolbarButtonWith",x)]:[],getApi:u,onSetup:l.onSetup},m,S),I=(l,m,x,S)=>T(l,{toolbarButtonBehaviours:[zn.config({}),Qn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(x.length>0?[Fn("toolbarToggleButtonWith",x)]:[]),getApi:f,onSetup:l.onSetup},m,S),O=(l,m,x)=>S=>dd(A=>m.fetch(A)).map(A=>F.from(Jl(be(Nw(cn("menu-value"),A,D=>{m.onItemAction(l(S),D)},m.columns,m.presets,Cl.CLOSE_ON_EXECUTE,m.select.getOr(ee),x),{movement:Mx(m.columns,m.presets),menuBehaviours:mh("auto"!==m.columns?[]:[qo((D,E)=>{kw(D,4,hw(m.presets)).each(({numRows:P,numColumns:B})=>{bn.setGridSize(D,P,B)})})])})))),R=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],N=(l,m)=>(x,S,A,D)=>{const E=l(x).mapError(P=>Ei(P)).getOrDie();return m(E,S,A,D)},z={button:N(q0,(l,m,x,S)=>M(l,m.shared.providers,[],S)),togglebutton:N(O2,(l,m,x,S)=>I(l,m.shared.providers,[],S)),menubutton:N(f1,(l,m,x,S)=>yy(l,"tox-tbtn",m,F.none(),!1,S)),splitbutton:N(l=>br("SplitButton",RS,l),(l,m,x,S)=>((A,D,E)=>{const P=kn(A.tooltip.getOr("")),B=G=>({isEnabled:()=>!Nn.isDisabled(G),setEnabled:oe=>Nn.set(G,!oe),setIconFill:(oe,ce)=>{$r(G.element,`svg path[class="${oe}"], rect[class="${oe}"]`).each(me=>{Pn(me,"fill",ce)})},setActive:oe=>{Pn(G.element,"aria-pressed",oe),$r(G.element,"span").each(ce=>{G.getSystem().getByDom(ce).each(me=>Qn.set(me,oe))})},isActive:()=>$r(G.element,"span").exists(oe=>G.getSystem().getByDom(oe).exists(Qn.isOn)),setText:oe=>$r(G.element,"span").each(ce=>G.getSystem().getByDom(ce).each(me=>mn(me,kc,{text:oe}))),setIcon:oe=>$r(G.element,"span").each(ce=>G.getSystem().getByDom(ce).each(me=>mn(me,dv,{icon:oe}))),setTooltip:oe=>{const ce=D.providers.translate(oe);Pn(G.element,"aria-label",ce),P.set(oe)}}),H=kn(de),Z={getApi:B,onSetup:A.onSetup};return d.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...v(A.tooltip,D.providers),...W(E)?{"data-mce-name":E}:{}}},onExecute:G=>{const oe=B(G);oe.isEnabled()&&A.onAction(oe)},onItemExecute:(G,oe,ce)=>{},splitDropdownBehaviours:Pt([Fn("split-dropdown-events",[qo((G,oe)=>mM(G)),xt(_,Dn.focus),sd(Z,H),ni(Z,H)]),B2(()=>D.providers.isDisabled()||D.providers.checkUiComponentContext(A.context).shouldDisable),gi(()=>D.providers.checkUiComponentContext(A.context)),Lx.config({}),...A.tooltip.map(G=>vr.config({...D.providers.tooltips.getConfig({tooltipText:D.providers.translate(G),onShow:oe=>{if(P.get()!==G){const ce=D.providers.translate(P.get());vr.setComponents(oe,D.providers.tooltips.getComponents({tooltipText:ce}))}}})})).toArray()]),eventOrder:{[hl()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Bs()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:D.getSink,fetch:O(B,A,D.providers),parts:{menu:wf(0,0,A.presets)},components:[d.parts.button(k(A.icon,A.text,F.none(),F.some([Qn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),X0(ee),gi(ae({contextType:"any",shouldDisable:!1}))]),D.providers,A.context)),d.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:oT("chevron-down",D.providers.icons)},buttonBehaviours:Pt([B2(ee),gi(ae({contextType:"any",shouldDisable:!1}))])}),d.parts["aria-descriptor"]({text:D.providers.translate("To open the popup, press Shift+Enter")})]})})(l,m.shared,S)),grouptoolbarbutton:N(l=>br("GroupToolbarButton",pD,l),(l,m,x,S)=>{const A=x.ui.registry.getAll().buttons,D={[a_]:m.shared.header.isPositionedAtTop()?th.TopToBottom:th.BottomToTop};if(yu(x)===fc.floating)return((E,P,B,H,Z)=>{const G=P.shared,oe=kn(de),ce={toolbarButtonBehaviours:[],getApi:u,onSetup:E.onSetup},me=[Fn("toolbar-group-button-events",[sd(ce,oe),ni(ce,oe)])];return hs.sketch({lazySink:G.getSink,fetch:()=>dd(Te=>{Te(Ct((E=>V(x,{buttons:A,toolbar:E,allowToolbarGroups:!1},m,F.none()))(E.items),ts))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:k(E.icon,E.text,E.tooltip,F.some(me),G.providers,E.context,Z),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:H}}}})})(l,m,0,D,S);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})},L={styles:(l,m)=>{const x={type:"advanced",...m.styles};return Ac(l,m,w(l,x),y,"StylesTextUpdate","styles")},fontsize:(l,m)=>Ac(l,m,p(l),e,"FontSizeTextUpdate","fontsize"),fontsizeinput:(l,m)=>((x,S,A,D)=>{let E=F.none();const P=Hp(x,"NodeChange SwitchMode",Ee=>{const Ne=Ee.getComponent();E=F.some(Ne),A.updateInputValue(Ne),Nn.set(Ne,!x.selection.isEditable())}),B=Ee=>({getComponent:ae(Ee)}),H=kn(de),Z=cn("custom-number-input-events"),G=(Ee,Ne,Fe)=>{const $e=E.map(Ot=>Qt.getValue(Ot)).getOr(""),ot=A.getNewValue($e,Ee),bt=$e.length-`${ot}`.length,mt=E.map(Ot=>Ot.element.dom.selectionStart-bt),vt=E.map(Ot=>Ot.element.dom.selectionEnd-bt);A.onAction(ot,Fe),E.each(Ot=>{Qt.setValue(Ot,ot),Ne&&(mt.each(an=>Ot.element.dom.selectionStart=an),vt.each(an=>Ot.element.dom.selectionEnd=an))})},oe=(Ee,Ne)=>G((Fe,$e)=>Fe-$e,Ee,Ne),ce=(Ee,Ne)=>G((Fe,$e)=>Fe+$e,Ee,Ne),me=Ee=>tl(Ee.element).fold(F.none,Ne=>(hc(Ne),F.some(!0))),Te=Ee=>hb(Ee.element)?(Rc(Ee.element).each(Ne=>hc(Ne)),F.some(!0)):F.none(),Ae=(Ee,Ne,Fe,$e)=>{const ot=kn(de),bt=S.shared.providers.translate(Fe),mt=cn("altExecuting"),vt=Hp(x,"NodeChange SwitchMode",an=>{Nn.set(an.getComponent(),!x.selection.isEditable())}),Ot=an=>{Nn.isDisabled(an)||Ee(!0)};return ua.sketch({dom:{tag:"button",attributes:{"aria-label":bt,"data-mce-name":Ne},classes:$e.concat(Ne)},components:[RI(Ne,S.shared.providers.icons)],buttonBehaviours:Pt([Nn.config({}),vr.config(S.shared.providers.tooltips.getConfig({tooltipText:bt})),Fn(mt,[sd({onSetup:vt,getApi:B},ot),ni({getApi:B},ot),xt(sc(),(an,Cn)=>{Cn.event.raw.keyCode!==KS.space()&&Cn.event.raw.keyCode!==KS.enter()||Nn.isDisabled(an)||Ee(!1)}),xt(mm(),Ot),xt(iu(),Ot)])]),eventOrder:{[sc()]:[mt,"keying"],[mm()]:[mt,"alloy.base.behaviour"],[iu()]:[mt,"alloy.base.behaviour"],[hl()]:["alloy.base.behaviour",mt,"tooltipping"],[Bs()]:[mt,"tooltipping"]}})},ze=Wo(Ae(Ee=>oe(!1,Ee),"minus","Decrease font size",[])),ke=Wo(Ae(Ee=>ce(!1,Ee),"plus","Increase font size",[])),Ce=Wo({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Fd.sketch({inputBehaviours:Pt([Nn.config({}),Fn(Z,[sd({onSetup:P,getApi:B},H),ni({getApi:B},H)]),Fn("input-update-display-text",[xt(kc,(Ee,Ne)=>{Qt.setValue(Ee,Ne.event.text)}),xt(F1(),Ee=>{A.onAction(Qt.getValue(Ee))}),xt(Kg(),Ee=>{A.onAction(Qt.getValue(Ee))})]),bn.config({mode:"special",onEnter:Ee=>(G(Ge,!0,!0),F.some(!0)),onEscape:me,onUp:Ee=>(ce(!0,!1),F.some(!0)),onDown:Ee=>(oe(!0,!1),F.some(!0)),onLeft:(Ee,Ne)=>(Ne.cut(),F.none()),onRight:(Ee,Ne)=>(Ne.cut(),F.none())})])})],behaviours:Pt([Dn.config({}),bn.config({mode:"special",onEnter:Te,onSpace:Te,onEscape:me}),Fn("input-wrapper-events",[xt(Xi(),Ee=>{Gt([ze,ke],Ne=>{const Fe=je(Ne.get(Ee).element.dom);hb(Fe)&&o0(Fe)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...W(D)?{"data-mce-name":D}:{}}},components:[ze.asSpec(),Ce.asSpec(),ke.asSpec()],behaviours:Pt([Dn.config({}),bn.config({mode:"flow",focusInside:Km.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Ee=>hb(Ee.element)?F.none():(hc(Ee.element),F.some(!0))})])}})(l,m,(x=>{const S=()=>x.queryCommandValue("FontSize");return{updateInputValue:A=>mn(A,kc,{text:S()}),onAction:(A,D)=>x.execCommand("FontSize",!1,A,{skip_focus:!D}),getNewValue:(A,D)=>{Ic(A,["unsupportedLength","empty"]);const E=S(),P=Ic(A,["unsupportedLength","empty"]).or(Ic(E,["unsupportedLength","empty"])),B=P.map(ce=>ce.value).getOr(16),H=Rk(x),Z=P.map(ce=>ce.unit).filter(ce=>""!==ce).getOr(H),G=D(B,(ce=Z,null!==(me={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[ce])&&void 0!==me?me:{step:1}).step),oe=`${(ce=>ce>=0)(G)?G:B}${Z}`;var ce,me;return oe!==E&&((ce,me)=>{ce.dispatch("FontSizeInputTextUpdate",me)})(x,{value:oe}),oe}}})(l),"fontsizeinput"),fontfamily:(l,m)=>Ac(l,m,rA(l),Bu,"FontFamilyTextUpdate","fontfamily"),blocks:(l,m)=>Ac(l,m,Dh(l),Ui,"BlocksTextUpdate","blocks"),align:(l,m)=>Ac(l,m,wv(l),DD,"AlignTextUpdate","align")},V=(l,m,x,S)=>{const A=(E=>{const P=E.toolbar;return!1===P?[]:void 0===P||!0===P?(H=>{const Z=Ct(R,G=>{const oe=to(G.items,ce=>bo(H,ce)||bo(L,ce));return{name:G.name,items:oe}});return to(Z,G=>G.items.length>0)})(E.buttons):Q(P)?(H=>{const Z=H.split("|");return Ct(Z,G=>({items:G.trim().split(" ")}))})(P):le(P,Z=>bo(Z,"name")&&bo(Z,"items"))?P:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])})(m),D=Ct(A,E=>{const P=Yn(E.items,B=>{return 0===B.trim().length?[]:(H=l,Z=m.buttons,G=B,oe=m.allowToolbarGroups,ce=x,me=S,vn(Z,G.toLowerCase()).orThunk(()=>me.bind(Te=>on(Te,Ae=>vn(Z,Ae+G.toLowerCase())))).fold(()=>vn(L,G.toLowerCase()).map(Te=>Te(H,ce)),Te=>{return"grouptoolbarbutton"!==Te.type||oe?(Ae=Te,ze=ce,ke=H,Ce=G.toLowerCase(),vn(z,Ae.type).fold(()=>(console.error("skipping button defined by",Ae),F.none()),Ee=>F.some(Ee(Ae,ze,ke,Ce)))):(console.warn(`Ignoring the '${G}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),F.none());var Ae,ze,ke,Ce})).toArray();var H,Z,G,oe,ce,me});return{title:F.from(l.translate(E.name)),items:P}});return to(D,E=>E.items.length>0)},J=(l,m,x,S)=>{const A=m.mainUi.outerContainer,D=x.toolbar,E=x.buttons;if(le(D,Q)){const P=D.map(B=>V(l,{toolbar:B,buttons:E,allowToolbarGroups:x.allowToolbarGroups},S,F.none()));rr.setToolbars(A,P)}else rr.setToolbar(A,V(l,x,S,F.none()))},te=pn(),re=te.os.isiOS()&&te.os.version.major<=12;var ie=Object.freeze({__proto__:null,render:(l,m,x,S,A)=>{const{mainUi:D,uiMotherships:E}=m,P=kn(0),B=D.outerContainer;M1(l);const H=je(A.targetNode),Z=Il(Ia(H));var Te,Ae;WC(H,D.mothership),Te=Z,Ae=m,Op(l)&&WC(Ae.mainUi.mothership.element,Ae.popupUi.mothership),HC(Te,Ae.dialogUi.mothership),l.on("PostRender",()=>{rr.setSidebar(B,x.sidebar,p2(l))}),l.on("SkinLoaded",()=>{J(l,m,x,S),P.set(l.getWin().innerWidth),rr.setMenubar(B,T1(l,x)),rr.setViews(B,x.views),((me,Te)=>{const{uiMotherships:Ae}=Te,ze=me.dom;let ke=me.getWin();const Ce=me.getDoc().documentElement,Ee=kn(nr(ke.innerWidth,ke.innerHeight)),Ne=kn(nr(Ce.offsetWidth,Ce.offsetHeight)),Fe=()=>{const mt=Ee.get();mt.left===ke.innerWidth&&mt.top===ke.innerHeight||(Ee.set(nr(ke.innerWidth,ke.innerHeight)),yT(me))},$e=()=>{const mt=me.getDoc().documentElement,vt=Ne.get();vt.left===mt.offsetWidth&&vt.top===mt.offsetHeight||(Ne.set(nr(mt.offsetWidth,mt.offsetHeight)),yT(me))},ot=mt=>{me.dispatch("ScrollContent",mt)};ze.bind(ke,"resize",Fe),ze.bind(ke,"scroll",ot);const bt=AC(je(me.getBody()),"load",$e);me.on("hide",()=>{Gt(Ae,mt=>{Yt(mt.element,"display","none")})}),me.on("show",()=>{Gt(Ae,mt=>{No(mt.element,"display")})}),me.on("NodeChange",$e),me.on("remove",()=>{bt.unbind(),ze.unbind(ke,"resize",Fe),ze.unbind(ke,"scroll",ot),ke=null})})(l,m)});const G=rr.getSocket(B).getOrDie("Could not find expected socket element");if(re){yd(G.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const me=((Ae,ze)=>{let ke=null;return{cancel:()=>{ne(ke)||(clearTimeout(ke),ke=null)},throttle:(...Ce)=>{ne(ke)&&(ke=setTimeout(()=>{ke=null,Ae.apply(null,Ce)},20))}}})(()=>{l.dispatch("ScrollContent")}),Te=wo(G.element,"scroll",me.throttle);l.on("remove",Te.unbind)}z2(l,m),l.addCommand("ToggleSidebar",(me,Te)=>{rr.toggleSidebar(B,Te),(Ae=>{Ae.dispatch("ToggleSidebar")})(l)}),l.addQueryValueHandler("ToggleSidebar",()=>{var me;return null!==(me=rr.whichSidebar(B))&&void 0!==me?me:""}),l.addCommand("ToggleView",(me,Te)=>{if(rr.toggleView(B,Te)){const Ae=B.element;D.mothership.broadcastOn([og()],{target:Ae}),Gt(E,ze=>{ze.broadcastOn([og()],{target:Ae})}),ne(rr.whichView(B))&&(l.focus(),l.nodeChanged(),rr.refreshToolbar(B)),l.dispatch("ToggleView")}}),l.addQueryValueHandler("ToggleView",()=>{var me;return null!==(me=rr.whichView(B))&&void 0!==me?me:""});const oe=yu(l);oe!==fc.sliding&&oe!==fc.floating||l.on("ResizeWindow ResizeEditor ResizeContent",()=>{const me=l.getWin().innerWidth;me!==P.get()&&(rr.refreshToolbar(m.mainUi.outerContainer),P.set(me))});return{iframeContainer:G.element.dom,editorContainer:B.element.dom,api:{setEnabled:me=>{Ef(m,me?"setEnabled":"setDisabled")},isEnabled:()=>!Nn.isDisabled(B)}}}});const he=l=>/^[0-9\.]+(|px)$/i.test(""+l)?F.some(parseInt(""+l,10)):F.none(),fe=l=>K(l)?l+"px":l,ye=(l,m,x)=>{const S=m.filter(D=>l<D),A=x.filter(D=>l>D);return S.or(A).getOr(l)},Ie=l=>{const m=Xl(l),x=Ms(l),S=q_(l);return he(m).map(A=>ye(A,x,S))},{ToolbarLocation:He,ToolbarMode:we}=Vk,Be=(l,m)=>{const x=Fr(l);return{pos:m?x.y:x.bottom,bounds:x}};var et=Object.freeze({__proto__:null,render:(l,m,x,S,A)=>{const{mainUi:D}=m,E=ar(),P=je(A.targetNode),B=((l,m,x,S,A)=>{const{mainUi:D,uiMotherships:E}=x,P=sf.DOM,B=hf(l),H=bu(l),Z=q_(l).or(Ie(l)),G=S.shared.header,oe=G.isPositionedAtTop,ce=yu(l),me=ce===we.sliding||ce===we.floating,Te=kn(!1),Ae=()=>Te.get()&&!l.removed,ze=Ne=>me?Ne.fold(ae(0),Fe=>Fe.components().length>1?Pi(Fe.components()[1].element):0):0,ke=()=>{Gt(E,Ne=>{Ne.broadcastOn([ih()],{})})},Ce=Ne=>{if(!Ae())return;B||A.on(ot=>{const bt=Z.getOrThunk(()=>Gg().width-fa(m).left-10);Yt(ot.element,"max-width",bt+"px")});const Fe=xs(),$e=!(B||B||!(ci(D.outerContainer.element).left+rs(D.outerContainer.element)>=window.innerWidth-40||kr(D.outerContainer.element,"width").isSome())||(Yt(D.outerContainer.element,"position","absolute"),Yt(D.outerContainer.element,"left","0px"),No(D.outerContainer.element,"width"),0));if(me&&rr.refreshToolbar(D.outerContainer),!B){const ot=xs(),bt=go(Fe.left!==ot.left,Fe);mt=$e,vt=bt,A.on(Ot=>{const an=rr.getToolbar(D.outerContainer),Cn=ze(an),An=Fr(m),Gn=(Lo=D.outerContainer.element,Op(l)?ep(Lo):F.none()),ko=Gn.fold(()=>An.x,Jo=>{const Lo=Fr(Jo);return po(Jo,Os())?An.x:An.x-Lo.x}),ri=go(mt,Math.ceil(D.outerContainer.element.dom.getBoundingClientRect().width)).filter(Jo=>Jo>150).map(Jo=>{const Lo=vt.getOr(xs()),On=window.innerWidth-(ko-Lo.left),Dr=Math.max(Math.min(Jo,On),150);return On<Jo&&Yt(D.outerContainer.element,"width",Dr+"px"),{width:Dr+"px"}}).getOr({width:"max-content"}),ii={position:"absolute",left:Math.round(ko)+"px",top:Gn.fold(()=>oe()?Math.max(An.y-Pi(Ot.element)+Cn,0):An.bottom,Jo=>{var Lo;const On=Fr(Jo),Dr=null!==(Lo=Jo.dom.scrollTop)&&void 0!==Lo?Lo:0,mr=po(Jo,Os())?Math.max(An.y-Pi(Ot.element)+Cn,0):An.y-On.y+Dr-Pi(Ot.element)+Cn;return oe()?mr:An.bottom})+"px"};var Lo;yd(D.outerContainer.element,{...ii,...ri})}),bt.each(mt=>{ju(mt.left,ot.top)})}var mt,vt;H&&A.on(Ne),ke()},Ee=()=>!(B||!H||!Ae())&&A.get().exists(Ne=>{const Fe=G.getDockingMode(),$e=(bt=>{switch(Dp(l)){case He.auto:const mt=rr.getToolbar(D.outerContainer),vt=ze(mt),Ot=Pi(bt.element)-vt,an=Fr(m);if(an.y>Ot)return"top";{const Cn=Tv(m),An=Math.max(Cn.dom.scrollHeight,Pi(Cn));return an.bottom<An-Ot||$i().bottom<an.bottom-Ot?"bottom":"top"}case He.bottom:return"bottom";default:return"top"}})(Ne);return $e!==Fe&&(ot=$e,A.on(bt=>{jr.setModes(bt,[ot]),G.setDockingMode(ot);const mt=oe()?th.TopToBottom:th.BottomToTop;Pn(bt.element,a_,mt)}),!0);var ot});return{isVisible:Ae,isPositionedAtTop:oe,show:()=>{Te.set(!0),Yt(D.outerContainer.element,"display","flex"),P.addClass(l.getBody(),"mce-edit-focus"),Gt(E,Ne=>{No(Ne.element,"display")}),Ee(),Op(l)?Ce(Ne=>jr.isDocked(Ne)?jr.reset(Ne):jr.refresh(Ne)):Ce(jr.refresh)},hide:()=>{Te.set(!1),Yt(D.outerContainer.element,"display","none"),P.removeClass(l.getBody(),"mce-edit-focus"),Gt(E,Ne=>{Yt(Ne.element,"display","none")})},update:Ce,updateMode:()=>{Ee()&&Ce(jr.reset)},repositionPopups:ke}})(l,P,m,S,E),H=jb(l);tA(l);const Z=()=>{if(E.isSet())return void B.show();E.set(rr.getHeader(D.outerContainer).getOrDie());const oe=J_(l);Op(l)?(WC(P,D.mothership),WC(P,m.popupUi.mothership)):HC(oe,D.mothership),HC(oe,m.dialogUi.mothership);const ce=()=>{J(l,m,x,S),rr.setMenubar(D.outerContainer,T1(l,x)),B.show(),((me,Te,Ae,ze)=>{const ke=kn(Be(Te,Ae.isPositionedAtTop())),Ce=$e=>{const{pos:ot,bounds:bt}=Be(Te,Ae.isPositionedAtTop()),{pos:mt,bounds:vt}=ke.get(),Ot=bt.height!==vt.height||bt.width!==vt.width;ke.set({pos:ot,bounds:bt}),Ot&&yT(me,$e),Ae.isVisible()&&(mt!==ot?Ae.update(jr.reset):Ot&&(Ae.updateMode(),Ae.repositionPopups()))};ze||(me.on("activate",Ae.show),me.on("deactivate",Ae.hide)),me.on("SkinLoaded ResizeWindow",()=>Ae.update(jr.reset)),me.on("NodeChange keydown",$e=>{requestAnimationFrame(()=>Ce($e))});let Ee=0;const Ne=cy(()=>Ae.update(jr.refresh),33);me.on("ScrollWindow",()=>{const $e=xs().left;$e!==Ee&&(Ee=$e,Ne.throttle()),Ae.updateMode()}),Op(me)&&me.on("ElementScroll",$e=>{Ae.update(jr.refresh)});const Fe=Ll();Fe.set(AC(je(me.getBody()),"load",$e=>Ce($e.raw))),me.on("remove",()=>{Fe.clear()})})(l,P,B,H),l.nodeChanged()};H?l.once("SkinLoaded",ce):ce()};return l.on("show",Z),l.on("hide",B.hide),H||(l.on("focus",Z),l.on("blur",B.hide)),l.on("init",()=>{(l.hasFocus()||H)&&Z()}),z2(l,m),{editorContainer:D.outerContainer.element.dom,api:{show:Z,hide:B.hide,setEnabled:oe=>{Ef(m,oe?"setEnabled":"setDisabled")},isEnabled:()=>!Nn.isDisabled(D.outerContainer)}}}});const Ye="contexttoolbar-hide",it=(l,m)=>xt(NI,(x,S)=>{const A=(D=l.get(x),{hide:()=>Zn(D,au()),getValue:()=>Qt.getValue(D)});var D;m.onAction(A,S.event.buttonApi)}),It=(l,m,x)=>m.bottom-l.y>=x&&l.bottom-m.y>=x,qt=l=>{const m=(x=>{const S=x.getBoundingClientRect();if(S.height<=0&&S.width<=0){const A=Lh(je(x.startContainer),x.startOffset).element;return(Xn(A)?Ii(A):F.some(A)).filter($n).map(D=>D.dom.getBoundingClientRect()).getOr(S)}return S})(l.selection.getRng());if(l.inline){const x=xs();return Oi(x.left+m.left,x.top+m.top,m.width,m.height)}{const x=ol(je(l.getBody()));return Oi(x.x+m.left,x.y+m.top,m.width,m.height)}},Xt=(l,m,x,S=0)=>{const A=Gg(window),D=Fr(je(l.getContentAreaContainer())),E=Xb(l)||K_(l)||O0(l),{x:P,width:B}=((H,Z,G)=>{const oe=Math.max(H.x+G,Z.x);return{x:oe,width:Math.min(H.right-G,Z.right)-oe}})(D,A,S);if(l.inline&&!E)return Oi(P,A.y,B,A.height);{const H=m.header.isPositionedAtTop(),{y:Z,bottom:G}=((oe,ce,me,Te,Ae,ze)=>{const ke=je(oe.getContainer()),Ce=$r(ke,".tox-editor-header").getOr(ke),Ee=Fr(Ce),Fe=Te&&!(Ee.y>=ce.bottom);if(oe.inline&&Fe)return{y:Math.max(Ee.bottom+ze,me.y),bottom:me.bottom};if(oe.inline&&!Fe)return{y:me.y,bottom:Math.min(Ee.y-ze,me.bottom)};const $e="line"===Ae?Fr(ke):ce;return Fe?{y:Math.max(Ee.bottom+ze,me.y),bottom:Math.min($e.bottom-ze,me.bottom)}:{y:Math.max($e.y+ze,me.y),bottom:Math.min(Ee.y-ze,me.bottom)}})(l,D,A,H,x,S);return Oi(P,Z,B,G-Z)}},Dt={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},en={maxHeightFunction:Qh(),maxWidthFunction:FS()},qe=l=>"node"===l,Je=(l,m,x,S,A)=>{const D=qt(l),E=S.lastElement().exists(P=>po(x,P));return((P,B)=>{const H=P.selection.getRng(),Z=Lh(je(H.startContainer),H.startOffset);return H.startContainer===H.endContainer&&H.startOffset===H.endOffset-1&&po(Z.element,B)})(l,x)?E?TS:pd:E?((P,B,H)=>{const Z=kr(P,"position");Yt(P,"position",B);const G=It(D,Fr(m),-20)&&!S.isReposition()?vv:TS;return Z.each(oe=>Yt(P,"position",oe)),G})(m,S.getMode()):("fixed"===S.getMode()?A.y+xs().top:A.y)+(Pi(m)+12)<=D.y?pd:Sy},gt=(l,m,x,S)=>{const A=E=>(P,B,H,Z,G)=>({...Je(l,Z,E,x,G)({...P,y:G.y,height:G.height},B,H,Z,G),alwaysFit:!0}),D=E=>qe(S)?[A(E)]:[];return m?{onLtr:E=>[Ji,Ki,Vi,Na,Ra,sa].concat(D(E)),onRtl:E=>[Ji,Vi,Ki,Ra,Na,sa].concat(D(E))}:{onLtr:E=>[sa,Ji,Na,Ki,Ra,Vi].concat(D(E)),onRtl:E=>[sa,Ji,Ra,Vi,Na,Ki].concat(D(E))}},ht=(l,m)=>{const x=to(m,D=>D.predicate(l.dom)),{pass:S,fail:A}=xi(x,D=>"contexttoolbar"===D.type);return{contextToolbars:S,contextForms:A}},Ut=cn("forward-slide"),Mn=cn("backward-slide"),In=cn("change-slide-event"),Jn="tox-pop--resizing",wr="tox-pop--transition",Zd=(l,m)=>{const x=()=>{const S=m.getOptions(l),A=m.getCurrent(l).map(m.hash),D=ar();return Ct(S,E=>({type:"togglemenuitem",text:m.display(E),onSetup:P=>{const B=Z=>{Z&&(D.on(G=>G.setActive(!1)),D.set(P)),P.setActive(Z)};B(Ma(A,m.hash(E)));const H=m.watcher(l,E,B);return()=>{D.clear(),H()}},onAction:()=>m.setCurrent(l,E)}))};l.ui.registry.addMenuButton(m.name,{tooltip:m.text,icon:m.icon,fetch:S=>S(x()),onSetup:m.onToolbarSetup}),l.ui.registry.addNestedMenuItem(m.name,{type:"nestedmenuitem",text:m.text,getSubmenuItems:x,onSetup:m.onMenuSetup})},ro=l=>Hp(l,"NodeChange",m=>{m.setEnabled(l.queryCommandState("outdent")&&l.selection.isEditable())}),Co=(l,m)=>x=>{x.setActive(m.get());const S=A=>{m.set(A.state),x.setActive(A.state)};return l.on("PastePlainTextToggle",S),bT(()=>l.off("PastePlainTextToggle",S),Va(l)(x))},qn=(l,m)=>()=>{l.execCommand("mceToggleFormat",!1,m)},Sr=(l,m)=>Hp(l,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",x=>{x.setEnabled(!l.mode.isReadOnly()&&l.undoManager[m]())}),sn=l=>Hp(l,"VisualAid",m=>{m.setActive(l.hasVisual)}),Lr=l=>Q(l)?l.split(/[ ,]/):l,Ir=l=>m=>m.options.get(l),Gi=Ir("contextmenu_never_use_native"),Js=Ir("contextmenu_avoid_overlap"),Pg=l=>{const m=l.ui.registry.getAll().contextMenus,x=l.options.get("contextmenu");return l.options.isSet("contextmenu")?x:to(x,S=>bo(m,S))},ps=(l,m)=>({type:"makeshift",x:l,y:m}),zu=l=>"longpress"===l.type||0===l.type.indexOf("touch"),I1=l=>({type:"selection",root:je(l.selection.getNode())}),Py=(l,m,x)=>{switch(x){case"node":return{type:"node",node:F.some(je((S=l).selection.getNode())),root:je(S.getBody())};case"point":return((l,m)=>"contextmenu"===m.type||"longpress"===m.type?l.inline?(x=>{if(zu(x)){const S=x.touches[0];return ps(S.pageX,S.pageY)}return ps(x.pageX,x.pageY)})(m):((x,S)=>{const A=sf.DOM.getPos(x);return ps((D=S).x+A.x,D.y+A.y);var D})(l.getContentAreaContainer(),(x=>{if(zu(x)){const S=x.touches[0];return ps(S.clientX,S.clientY)}return ps(x.clientX,x.clientY)})(m)):I1(l))(l,m);case"selection":return I1(l)}var S},Sv=(l,m,x,S,A,D)=>{const E=x(),P=Py(l,m,D);gy(E,Cl.CLOSE_ON_EXECUTE,S,{isHorizontalMenu:!1,search:F.none()}).map(B=>{m.preventDefault(),_r.showMenuAt(A,{anchor:P},{menu:{markers:wu("normal")},data:B})})},Oh={onLtr:()=>[Ji,Ki,Vi,Na,Ra,sa,pd,Sy,l1,s1,wS,Og],onRtl:()=>[Ji,Vi,Ki,Ra,Na,sa,pd,Sy,wS,Og,l1,s1]},D1={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},By=(l,m,x,S,A,D)=>{const E=pn(),P=E.os.isiOS(),B=E.os.isMacOS(),H=E.os.isAndroid(),Z=E.deviceType.isTouch(),G=()=>{const oe=x();((ce,me,Te,Ae,ze,ke,Ce)=>{const Ee=((Ne,Fe,$e)=>{const ot=Py(Ne,Fe,$e);return{bubble:Gl(0,"point"===$e?12:0,D1),layouts:Oh,overrides:{maxWidthFunction:FS(),maxHeightFunction:Qh()},...ot}})(ce,me,ke);gy(Te,Cl.CLOSE_ON_EXECUTE,Ae,{isHorizontalMenu:!0,search:F.none()}).map(Ne=>{me.preventDefault();const Fe=Ce?Ai.HighlightMenuAndItem:Ai.HighlightNone;_r.showMenuWithinBounds(ze,{anchor:Ee},{menu:{markers:wu("normal"),highlightOnOpen:Fe},data:Ne,type:"horizontal"},()=>F.some(Xt(ce,Ae.shared,"node"===ke?"node":"selection"))),ce.dispatch(Ye)})})(l,m,oe,S,A,D,!(H||P||B&&Z))};if((B||P)&&"node"!==D){const oe=()=>{(ce=>{const me=ce.selection.getRng(),Te=()=>{Ub.setEditorTimeout(ce,()=>{ce.selection.setRng(me)},10),ke()};ce.once("touchend",Te);const Ae=Ce=>{Ce.preventDefault(),Ce.stopImmediatePropagation()};ce.on("mousedown",Ae,!0);const ze=()=>ke();ce.once("longpresscancel",ze);const ke=()=>{ce.off("touchend",Te),ce.off("longpresscancel",ze),ce.off("mousedown",Ae)}})(l),G()};((ce,me)=>{const Te=ce.selection;if(Te.isCollapsed()||me.touches.length<1)return!1;{const Ae=me.touches[0],ze=Te.getRng();return NC(ce.getWin(),jl.domRange(ze)).exists(ke=>ke.left<=Ae.clientX&&ke.right>=Ae.clientX&&ke.top<=Ae.clientY&&ke.bottom>=Ae.clientY)}})(l,m)?oe():(l.once("selectionchange",oe),l.once("touchend",()=>l.off("selectionchange",oe)))}else G()},nm=l=>Q(l)?"|"===l:"separator"===l.type,iA={type:"separator"},Dc=l=>{const m=x=>({text:x.text,icon:x.icon,enabled:x.enabled,shortcut:x.shortcut});if(Q(l))return l;switch(l.type){case"separator":return iA;case"submenu":return{type:"nestedmenuitem",...m(l),getSubmenuItems:()=>{const S=l.getSubmenuItems();return Q(S)?S:Ct(S,Dc)}};default:const x=l;return{type:"menuitem",...m(x),onAction:pe(x.onAction)}}},JS=(l,m)=>{if(0===m.length)return l;const x=$t(l).filter(S=>!nm(S)).fold(()=>[],S=>[iA]);return l.concat(x).concat(m).concat([iA])},Ta=(l,m)=>{return!("longpress"===(x=m).type||bo(x,"touches")||2===m.button&&(m.target!==l.getBody()||""!==m.pointerType));var x},Cv=(l,m)=>Ta(l,m)?l.selection.getStart(!0):m.target,FN=(l,m,x)=>{const S=pn().deviceType.isTouch,A=vi(_r.sketch({dom:{tag:"div"},lazySink:m,onEscape:()=>l.focus(),onShow:()=>x.setContextMenuState(!0),onHide:()=>x.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Pt([Fn("dismissContextMenu",[xt(xm(),(P,B)=>{Io.close(P),l.focus()})])])})),D=()=>_r.hide(A),E=P=>{if(Gi(l)&&P.preventDefault(),P.ctrlKey&&!Gi(l)||(H=>0===Pg(H).length)(l))return;const B=((H,Z)=>{const G=Js(H),oe=Ta(H,Z)?"selection":"point";if(vd(G)){const ce=Cv(H,Z);return ny(je(ce),G)?"node":oe}return oe})(l,P);(S()?By:Sv)(l,P,()=>{const H=Cv(l,P),Z=l.ui.registry.getAll(),G=Pg(l);return((oe,ce,me)=>{const Te=_n(ce,(Ae,ze)=>vn(oe,ze.toLowerCase()).map(ke=>{const Ce=ke.update(me);if(Q(Ce)&&vd(si(Ce)))return JS(Ae,Ce.split(" "));if(j(Ce)&&Ce.length>0){const Ee=Ct(Ce,Dc);return JS(Ae,Ee)}return Ae}).getOrThunk(()=>Ae.concat([ze])),[]);return Te.length>0&&nm(Te[Te.length-1])&&Te.pop(),Te})(Z.contextMenus,G,H)},x,A,B)};l.on("init",()=>{const P="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(S()?"":" ResizeWindow");l.on(P,D),l.on("longpress contextmenu",E)})},PE=ur([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),aA=l=>m=>m.translate(-l.left,-l.top),ND=l=>m=>m.translate(l.left,l.top),kv=l=>(m,x)=>_n(l,(S,A)=>A(S),nr(m,x)),BE=(l,m,x)=>l.fold(kv([ND(x),aA(m)]),kv([aA(m)]),kv([])),QS=(l,m,x)=>l.fold(kv([ND(x)]),kv([]),kv([ND(m)])),yN=(l,m,x)=>l.fold(kv([]),kv([aA(x)]),kv([ND(m),aA(x)])),om=(l,m,x)=>{const S=l.fold((A,D)=>({position:F.some("absolute"),left:F.some(A+"px"),top:F.some(D+"px")}),(A,D)=>({position:F.some("absolute"),left:F.some(A-x.left+"px"),top:F.some(D-x.top+"px")}),(A,D)=>({position:F.some("fixed"),left:F.some(A+"px"),top:F.some(D+"px")}));return{right:F.none(),bottom:F.none(),...S}},eC=(l,m,x,S)=>{const A=(D,E)=>(P,B)=>{const H=D(m,x,S);return E(P.getOr(H.left),B.getOr(H.top))};return l.fold(A(yN,RD),A(QS,zy),A(BE,O1))},RD=PE.offset,zy=PE.absolute,O1=PE.fixed,bN=(l,m)=>{const x=qi(l,m);return X(x)?NaN:parseInt(x,10)},xN=(l,m,x,S)=>on(l,A=>((P,B,H,Z,G,oe)=>{const ce=QS(P,G,oe),me=QS(B,G,oe);return Math.abs(ce.left-me.left)<=H&&Math.abs(ce.top-me.top)<=Z})(m,A.sensor,A.range.left,A.range.top,x,S)?F.some({output:eC(A.output,m,x,S),extra:A.extra}):F.none());var IN=Object.freeze({__proto__:null,snapTo:(l,m,x,S)=>{const A=m.getTarget(l.element);if(m.repositionTarget){const D=bs(l.element),E=xs(D),P=yA(A),B={coord:eC((Z=S).output,Z.output,E,P),extra:Z.extra},H=om(B.coord,0,P);Vu(A,H)}var Z}});const _N="data-initial-z-index",at=(l,m)=>{var x;l.getSystem().addToGui(m),Ii((x=m).element).filter($n).each(S=>{kr(S,"z-index").each(A=>{Pn(S,_N,A)}),Yt(S,"z-index",Di(x.element,"z-index"))})},co=l=>{Ii(l.element).filter($n).each(x=>{mi(x,_N).fold(()=>No(x,"z-index"),S=>Yt(x,"z-index",S)),tr(x,_N)}),l.getSystem().removeFromGui(l)},Un=(l,m,x)=>l.getSystem().build(Cc.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[m]},events:x}));var Wr=Wc("snaps",[kt("getSnapPoints"),Kn("onSensor"),kt("leftAttr"),kt("topAttr"),st("lazyViewport",$i),st("mustSnap",!1)]);const oi=[st("useFixed",ee),kt("blockerClass"),st("getTarget",Ge),st("onDrag",de),st("repositionTarget",!0),st("onDrop",de),Tr("getBounds",$i),Wr],Qs=(l,m)=>({bounds:l.getBounds(),height:mo(m.element),width:rs(m.element)}),rm=(l,m,x,S,A)=>{const D=x.update(S,A),E=x.getStartData().getOrThunk(()=>Qs(m,l));D.each(P=>{((B,H,Z,G)=>{const oe=H.getTarget(B.element);if(H.repositionTarget){const ce=bs(B.element),me=xs(ce),Te=yA(oe),Ae=(l=>{return(m=kr(l,"left"),x=kr(l,"top"),S=kr(l,"position"),m.isSome()&&x.isSome()&&S.isSome()?F.some((A=m.getOrDie(),D=x.getOrDie(),E=S.getOrDie(),("fixed"===E?O1:RD)(parseInt(A,10),parseInt(D,10)))):F.none()).getOrThunk(()=>{const A=ci(l);return zy(A.left,A.top)});var A,D,E,m,x,S})(oe),ze=(Ce=B,Ne=Ae,Fe=me,$e=Te,ot=G,bt=Z,((mt,vt,Ot,an,Cn)=>{const An=Cn.bounds,Gn=QS(vt,Ot,an),ko=ra(Gn.left,An.x,An.x+An.width-Cn.width),ri=ra(Gn.top,An.y,An.y+An.height-Cn.height),ii=zy(ko,ri);return vt.fold(()=>{const Jo=yN(ii,Ot,an);return RD(Jo.left,Jo.top)},ae(ii),()=>{const Jo=BE(ii,Ot,an);return O1(Jo.left,Jo.top)})})(0,H.snaps.fold(()=>{const mt=(Ot=ot.left,an=ot.top,Ne.fold((An,Gn)=>RD(An+Ot,Gn+an),(An,Gn)=>zy(An+Ot,Gn+an),(An,Gn)=>O1(An+Ot,Gn+an)));var Ot,an;const Cn=BE(mt,Fe,$e);return O1(Cn.left,Cn.top)},mt=>{const vt=((l,m,x,S,A,D)=>{const E=(G=x,oe=S,((ce,me)=>{const Te=ce.element,Ae=bN(Te,me.leftAttr),ze=bN(Te,me.topAttr);return isNaN(Ae)||isNaN(ze)?F.none():F.some(nr(Ae,ze))})(l,m).fold(()=>G,ce=>O1(ce.left+oe.left,ce.top+oe.top))),P=m.mustSnap?((l,m,x,S,A)=>{const D=m.getSnapPoints(l);return xN(D,x,S,A).orThunk(()=>_n(D,(P,B)=>{const Z=((G,oe,ce,me,Te,Ae)=>{const ze=QS(G,Te,Ae),ke=QS(oe,Te,Ae),Ce=Math.abs(ze.left-ke.left),Ee=Math.abs(ze.top-ke.top);return nr(Ce,Ee)})(x,B.sensor,0,0,S,A);return P.deltas.fold(()=>({deltas:F.some(Z),snap:F.some(B)}),G=>(Z.left+Z.top)/2<=(G.left+G.top)/2?{deltas:F.some(Z),snap:F.some(B)}:P)},{deltas:F.none(),snap:F.none()}).snap.map(P=>({output:eC(P.output,x,S,A),extra:P.extra})))})(l,m,E,A,D):((l,m,x,S,A)=>{const D=m.getSnapPoints(l);return xN(D,x,S,A)})(l,m,E,A,D),B=BE(E,A,D);var G,oe;return((H,Z,G)=>{const oe=H.element;Pn(oe,Z.leftAttr,G.left+"px"),Pn(oe,Z.topAttr,G.top+"px")})(l,m,B),P.fold(()=>({coord:O1(B.left,B.top),extra:F.none()}),H=>({coord:H.output,extra:H.extra}))})(Ce,mt,Ne,ot,Fe,$e);return vt.extra.each(Ot=>{mt.onSensor(Ce,Ot)}),vt.coord}),Fe,$e,bt)),ke=om(ze,0,Te);Vu(oe,ke)}var Ce,Ne,Fe,$e,ot,bt;H.onDrag(B,oe,G)})(l,m,E,P)})},im=(l,m,x,S)=>{m.each(co),x.snaps.each(D=>{((B,H)=>{const Z=B.element;tr(Z,H.leftAttr),tr(Z,H.topAttr)})(l,D)});const A=x.getTarget(l.element);S.reset(),x.onDrop(l,A)},kl=l=>(m,x)=>{const S=A=>{x.setStartData(Qs(m,A))};return gr([xt(kd(),A=>{x.getStartData().each(()=>S(A))}),...l(m,x,S)])};var VN=Object.freeze({__proto__:null,getData:l=>F.from(nr(l.x,l.y)),getDelta:(l,m)=>nr(m.left-l.left,m.top-l.top)});const wN=(l,m,x)=>[xt(cl(),(S,A)=>{if(0!==A.event.raw.button)return;A.stop();const D=()=>im(S,F.some(B),l,m),E=jO(D,200),P={drop:D,delayDrop:E.schedule,forceDrop:D,move:H=>{E.cancel(),rm(S,l,m,VN,H)}},B=Un(S,l.blockerClass,(H=P,gr([xt(cl(),H.forceDrop),xt(pm(),H.drop),xt($y(),(Z,G)=>{H.move(G.event)}),xt(Xg(),H.delayDrop)])));var H;x(S),at(S,B)})],DN=[...oi,Ko("dragger",{handlers:kl(wN)})];var oR=Object.freeze({__proto__:null,getData:l=>{const m=l.raw.touches;return 1===m.length?(x=>{const S=x[0];return F.some(nr(S.clientX,S.clientY))})(m):F.none()},getDelta:(l,m)=>nr(m.left-l.left,m.top-l.top)});const rR=(l,m,x)=>{const S=ar(),A=D=>{im(D,S.get(),l,m),S.clear()};return[xt(Fl(),(D,E)=>{E.stop();const P=()=>A(D),B={drop:P,delayDrop:de,forceDrop:P,move:Z=>{rm(D,l,m,oR,Z)}},H=Un(D,l.blockerClass,(Z=B,gr([xt(Fl(),Z.forceDrop),xt(iu(),Z.drop),xt(sC(),Z.drop),xt(Lv(),(G,oe)=>{Z.move(oe.event)})])));var Z;S.set(H),x(D),at(D,H)}),xt(Lv(),(D,E)=>{E.stop(),rm(D,l,m,oR,E.event)}),xt(iu(),(D,E)=>{E.stop(),A(D)}),xt(sC(),A)]},gL=DN,pL=[...oi,Ko("dragger",{handlers:kl(rR)})],mL=[...oi,Ko("dragger",{handlers:kl((l,m,x)=>[...wN(l,m,x),...rR(l,m,x)])})];var fL=Object.freeze({__proto__:null,mouse:gL,touch:pL,mouseOrTouch:mL}),vL=Object.freeze({__proto__:null,init:()=>{let l=F.none(),m=F.none();const x=ae({});return cc({readState:x,reset:()=>{l=F.none(),m=F.none()},update:(S,A)=>S.getData(A).bind(D=>((E,P)=>{const B=l.map(H=>E.getDelta(H,P));return l=F.some(P),B})(S,D)),getStartData:()=>m,setStartData:S=>{m=F.some(S)}})}});const LD=nb({branchKey:"mode",branches:fL,name:"dragging",active:{events:(l,m)=>l.dragger.handlers(l,m)},extra:{snap:l=>({sensor:l.sensor,range:l.range,output:l.output,extra:F.from(l.extra)})},state:vL,apis:IN}),iR=(l,m,x,S,A,D)=>l.fold(()=>LD.snap({sensor:zy(x-20,S-20),range:nr(A,D),output:zy(F.some(x),F.some(S)),extra:{td:m}}),E=>{const P=x-20,B=S-20,H=E.element.dom.getBoundingClientRect();return LD.snap({sensor:zy(P,B),range:nr(40,40),output:zy(F.some(x-H.width/2),F.some(S-H.height/2)),extra:{td:m}})}),aR=(l,m,x)=>({getSnapPoints:l,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(S,A)=>{const D=A.td;var E,P;E=m.get(),P=D,E.exists(B=>po(B,P))||(m.set(D),x(D))},mustSnap:!0}),sR=l=>Wo(ua.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Pt([LD.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:l}),Lx.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}));var sA;!function(l){l[l.None=0]="None",l[l.Both=1]="Both",l[l.Vertical=2]="Vertical"}(sA||(sA={}));const lR=(l,m,x)=>{const S=je(l.getContainer()),A=((D,E,P,B,H)=>{const Z={height:ye(B+E.top,Ik(D),Dk(D))};return P===sA.Both&&(Z.width=ye(H+E.left,Ms(D),q_(D))),Z})(l,m,x,Pi(S),Ua(S));ao(A,(D,E)=>{K(D)&&Yt(S,E,fe(D))}),l.dispatch("ResizeEditor")},ON=(l,m,x,S)=>{const A=nr(20*x,20*S);return lR(l,A,m),F.some(!0)},xL=(l,m)=>({dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const S=(()=>{const S=[],A=$b(l),D=Bk(l),E=vc(l)||l.hasPlugin("wordcount");return D&&S.push(((l,m,x)=>{var S;const A=null!==(S={}.delimiter)&&void 0!==S?S:"\u203a";return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Pt([bn.config({mode:"flow",selector:"div[role=button]"}),Nn.config({disabled:x.isDisabled}),gi(()=>x.checkUiComponentContext("any")),cr.config({}),zn.config({}),Fn("elementPathEvents",[qo((D,E)=>{l.shortcuts.add("alt+F11","focus statusbar elementpath",()=>bn.focusIn(D)),l.on("NodeChange",P=>{const B=(Z=>{const G=[];let oe=Z.length;for(;oe-- >0;){const me=Z[oe];if(1===me.nodeType&&"BR"!==(ce=me).nodeName&&!ce.getAttribute("data-mce-bogus")&&"bookmark"!==ce.getAttribute("data-mce-type")){const Te=BO(l,me);if(Te.isDefaultPrevented()||G.push({name:Te.name,element:me}),Te.isPropagationStopped())break}}var ce;return G})(P.parents),H=B.length>0?_n(B,(Z,G,oe)=>{const ce=(Te=G.element,ua.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":oe}},components:[Hr(G.name)],action:ze=>{l.focus(),l.selection.select(Te),l.nodeChanged()},buttonBehaviours:Pt([vr.config({...x.tooltips.getConfig({tooltipText:x.translate(["Select the {0} element",Te.nodeName.toLowerCase()]),onShow:(ze,ke)=>{((Ce,Ee)=>{const Ne=F.from(qi(Ce,"id")).getOrThunk(()=>{const Fe=cn("aria");return Pn(Ee,"id",Fe),Fe});Pn(Ce,"aria-describedby",Ne)})(ze.element,ke.element)},onHide:ze=>{tr(ze.element,"aria-describedby")}})}),Of(x.isDisabled),gi(()=>x.checkUiComponentContext("any"))])}));var Te;return Z.concat(0===oe?[ce]:[{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Hr(` ${A} `)]},ce])},[]):[];zn.set(D,H)})})])]),components:[]}})(l,0,m)),A&&S.push((()=>{const P=Rf("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Hr(nd.translate(["Press {0} for help",P]))]}})()),E&&S.push((()=>{const P=[];return l.hasPlugin("wordcount")&&P.push(((B,H)=>{const Z=(G,oe,ce)=>zn.set(G,[Hr(H.translate(["{0} "+ce,oe[ce]]))]);return ua.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Pt([Of(H.isDisabled),gi(()=>H.checkUiComponentContext("any")),cr.config({}),zn.config({}),Qt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Fn("wordcount-events",[Hl(G=>{const oe=Qt.getValue(G),ce="words"===oe.mode?"characters":"words";Qt.setValue(G,{mode:ce,count:oe.count}),Z(G,oe.count,ce)}),qo(G=>{B.on("wordCountUpdate",oe=>{const{mode:ce}=Qt.getValue(G);Qt.setValue(G,{mode:ce,count:oe.wordCount}),Z(G,oe.wordCount,ce)})})])]),eventOrder:{[ss()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(l,m)),vc(l)&&P.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":l.translate(["Build with {0}","TinyMCE"])},innerHtml:l.translate(["Build with {0}",'<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>\n'.trim()])},behaviours:Pt([Dn.config({})])}]}),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:P}})()),S.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...(()=>{const P="tox-statusbar__text-container--flex-start",B="tox-statusbar__text-container--flex-end";if(A){const H="tox-statusbar__text-container-3-cols";return E||D?E&&!D?[H,B]:[H,P]:[H,"tox-statusbar__text-container--space-around"]}return[E&&!D?B:P]})()]},components:S}]:[]})(),A=((D,E)=>{const P=(H=>{const Z=g2(H);return!1===Z?sA.None:"both"===Z?sA.Both:sA.Vertical})(D);return P===sA.None?F.none():F.some(Zl("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":E.translate(P===sA.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor."),"data-mce-name":"resize-handle"},behaviours:[LD.config({mode:"mouse",repositionTarget:!1,onDrag:(H,Z,G)=>lR(D,G,P),blockerClass:"tox-blocker"}),bn.config({mode:"special",onLeft:()=>ON(D,P,-1,0),onRight:()=>ON(D,P,1,0),onUp:()=>ON(D,P,0,-1),onDown:()=>ON(D,P,0,1)}),cr.config({}),Dn.config({}),vr.config(E.tooltips.getConfig({tooltipText:E.translate("Resize")}))]},E.icons))})(l,m);return S.concat(A.toArray())})()}),cR=(l,m)=>m.get().getOrDie(`UI for ${l} has not been rendered`),_L=(l,m)=>{const x=l.inline,S=x?et:ie,A=bu(l)?IE:AE,D=(()=>{const Fe=ar(),$e=ar(),ot=ar();return{dialogUi:Fe,popupUi:$e,mainUi:ot,getUiMotherships:()=>{const bt=Fe.get().map(vt=>vt.mothership),mt=$e.get().map(vt=>vt.mothership);return bt.fold(()=>mt.toArray(),vt=>mt.fold(()=>[vt],Ot=>po(vt.element,Ot.element)?[vt]:[vt,Ot]))},lazyGetInOuterOrDie:(bt,mt)=>()=>ot.get().bind(vt=>mt(vt.outerContainer)).getOrDie(`Could not find ${bt} element in OuterContainer`)}})(),E=ar(),P=ar(),B=ar(),H=pn().deviceType.isTouch()?["tox-platform-touch"]:[],Z=Kb(l),G=yu(l),oe=Wo({dom:{tag:"div",classes:["tox-anchorbar"]}}),ce=Wo({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),me=()=>D.mainUi.get().map(Fe=>Fe.outerContainer).bind(rr.getHeader),Te=D.lazyGetInOuterOrDie("anchor bar",oe.getOpt),Ae=D.lazyGetInOuterOrDie("bottom anchor bar",ce.getOpt),ze=D.lazyGetInOuterOrDie("toolbar",rr.getToolbar),ke=D.lazyGetInOuterOrDie("throbber",rr.getThrobber),Ce=((Fe,$e,ot,bt)=>{const mt=kn(!1),vt=(Lo=>{const On=kn(Kb(Lo)?"bottom":"top");return{isPositionedAtTop:()=>"top"===On.get(),getDockingMode:On.get,setDockingMode:On.set}})($e),Ot={icons:()=>$e.ui.registry.getAll().icons,menuItems:()=>$e.ui.registry.getAll().menuItems,translate:nd.translate,isDisabled:()=>!$e.ui.isEnabled(),getOption:$e.options.get,tooltips:OM(Fe.dialog),checkUiComponentContext:Lo=>{const[On,Dr=""]=Lo.split(":"),mr=$e.ui.registry.getAll().contexts;return{contextType:On,shouldDisable:!vn(mr,On).fold(()=>vn(mr,"mode").map(Tl=>Tl("design")).getOr(!1),Tl=>"!"===Dr.charAt(0)?!Tl(Dr.slice(1)):Tl(Dr))}}},an=(l=>({getHistory:kh,addToHistory:TE,getLinkInformation:()=>{return wl(m=l)?F.some({targets:lD(m.getBody()),anchorTop:DS(mg(m)),anchorBottom:DS(h2(m))}):F.none();var m},getValidationHandler:()=>F.from(Nk(l)),getUrlPicker:m=>{return((A,D)=>{const E=(P=>{const B=F.from(Lk(P)).filter(IS).map(pN);return LM(P).fold(ee,H=>B.fold(Se,Z=>Sn(Z).length>0&&Z))})(A);return $(E)?E?LM(A):F.none():E[D]?LM(A):F.none()})(x=l,S=m).map(A=>D=>dd(E=>{const P={filetype:S,fieldname:D.fieldname,...F.from(D.meta).getOr({})};A.call(x,(B,H)=>{if(!Q(B))throw new Error("Expected value to be string");if(void 0!==H&&!se(H))throw new Error("Expected meta to be a object");E({value:B,meta:H})},D.value,P)}));var x,S}}))($e),Cn=(Lo=>{const On=Wa=>()=>Lo.formatter.match(Wa),Dr=Wa=>()=>{const ns=Lo.formatter.get(Wa);return void 0!==ns?F.some({tag:ns.length>0&&(ns[0].inline||ns[0].block)||"div",styles:Lo.dom.parseStyle(Lo.formatter.getCssText(Wa))}):F.none()},mr=kn([]),Tl=kn([]),Or=kn(!1);return Lo.on("PreInit",Wa=>{const ns=qd(Lo),lA=ky(Lo,ns,On,Dr);mr.set(lA)}),Lo.on("addStyleModifications",Wa=>{const ns=ky(Lo,Wa.items,On,Dr);Tl.set(ns),Or.set(Wa.replace)}),{getData:()=>{const Wa=Or.get()?[]:mr.get(),ns=Tl.get();return Wa.concat(ns)}}})($e),An={colorPicker:TM(Lo=$e),hasCustomColors:wE(Lo),getColors:oD(Lo),getColorCols:MM(Lo)},Gn=(Lo=>({isDraggableModal:AM(Lo)}))($e),ko={shared:{providers:Ot,anchors:kM($e,ot,bt,vt.isPositionedAtTop),header:vt},urlinput:an,styles:Cn,colorinput:An,dialog:Gn,isContextMenuOpen:()=>mt.get(),setContextMenuState:Lo=>mt.set(Lo)},ri=Lo=>F.none(),ii={...ko,shared:{...ko.shared,interpreter:Lo=>eD(Lo,{},ii,ri),getSink:Fe.popup}},Jo={...ko,shared:{...ko.shared,interpreter:Lo=>eD(Lo,{},Jo,ri),getSink:Fe.dialog}};var Lo;return{popup:ii,dialog:Jo}})({popup:()=>so.fromOption(D.popupUi.get().map(Fe=>Fe.sink),"(popup) UI has not been rendered"),dialog:()=>so.fromOption(D.dialogUi.get().map(Fe=>Fe.sink),"UI has not been rendered")},l,Te,Ae),Ne=Fe=>{const $e=fe((vt=>{const Ot=j_(vt),an=Ik(vt),Cn=Dk(vt);return he(Ot).map(An=>ye(An,an,Cn))})(bt=l).getOr(j_(bt))),ot=fe((bt=>Ie(bt).getOr(Xl(bt)))(l));var bt;return l.inline||(ea("div","width",ot)&&Yt(Fe.element,"width",ot),ea("div","height",$e)?Yt(Fe.element,"height",$e):Yt(Fe.element,"height","400px")),$e};return{popups:{backstage:Ce.popup,getMothership:()=>cR("popups",B)},dialogs:{backstage:Ce.dialog,getMothership:()=>cR("dialogs",P)},renderUI:()=>{const Fe=(()=>{const Fe=(()=>{const ko={attributes:{[a_]:Z?th.BottomToTop:th.TopToBottom}},ri=rr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Ce.popup,onEscape:()=>{l.focus()}}),ii=rr.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Ce.popup.shared.getSink,providers:Ce.popup.shared.providers,onEscape:()=>{l.focus()},onToolbarToggled:ns=>{l.dispatch("ToggleToolbarDrawer",{state:ns})},type:G,lazyToolbar:ze,lazyHeader:()=>me().getOrDie("Could not find header element"),...ko}),Jo=rr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Ce.popup.shared.providers,onEscape:()=>{l.focus()},type:G}),Lo=O0(l),On=K_(l),Dr=Xb(l),mr=uf(l),Tl=rr.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Wa=mr?[Tl,ri]:[ri];return rr.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Lo||On||Dr?[]:["tox-editor-header--empty"]),...ko},components:uo([Dr?Wa:[],Lo?[Jo]:On?[ii]:[],hf(l)?[]:[oe.asSpec()]]),sticky:bu(l),editor:l,sharedBackstage:Ce.popup.shared})})(),$e={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[rr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),rr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},ot=rr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Ce.popup}),bt=rr.parts.viewWrapper({backstage:Ce.popup}),mt=Y_(l)&&!x?F.some(xL(l,Ce.popup.shared.providers)):F.none(),vt=uo([Z?[]:[Fe],x?[]:[$e],Z?[Fe]:[]]),Ot=rr.parts.editorContainer({components:uo([vt,x?[]:[ce.asSpec()]])}),an=Fk(l),Cn={role:"application",...nd.isRtl()?{dir:"rtl"}:{},...an?{"aria-hidden":"true"}:{}},An=vi(rr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(x?["tox-tinymce-inline"]:[]).concat(Z?["tox-tinymce--toolbar-bottom"]:[]).concat(H),styles:{visibility:"hidden",...an?{opacity:"0",border:"0"}:{}},attributes:Cn},components:[Ot,...x?[]:[bt,...mt.toArray()],ot],behaviours:Pt([gi(()=>Ce.popup.shared.providers.checkUiComponentContext("any")),Nn.config({disableClass:"tox-tinymce--disabled"}),bn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Gn=oy(An);return E.set(Gn),{mothership:Gn,outerContainer:An}})(),$e=(()=>{const bt=J_(l),mt=po(Os(),bt)&&"grid"===Di(bt,"display"),vt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(H),attributes:{...nd.isRtl()?{dir:"rtl"}:{}}},behaviours:Pt([Ca.config({useFixed:()=>A.isDocked(me)})])},Ot={dom:{styles:{width:document.body.clientWidth+"px"}},events:gr([xt(ul(),An=>{Yt(An.element,"width",document.body.clientWidth+"px")})])},an=vi(be(vt,mt?Ot:{})),Cn=oy(an);return P.set(Cn),{sink:an,mothership:Cn}})(),ot=Op(l)?(()=>{const bt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(H),attributes:{...nd.isRtl()?{dir:"rtl"}:{}}},behaviours:Pt([Ca.config({useFixed:()=>A.isDocked(me),getBounds:()=>m.getPopupSinkBounds()})])},mt=vi(bt),vt=oy(mt);return B.set(vt),{sink:mt,mothership:vt}})():(B.set((bt=$e).mothership),bt);var bt;return D.dialogUi.set($e),D.popupUi.set(ot),D.mainUi.set(Fe),(bt=>{const{mainUi:mt,popupUi:vt,uiMotherships:Ot}=bt;Rn(d2(l),(On,Dr)=>{l.ui.registry.addGroupToolbarButton(Dr,On)});const{buttons:an,menuItems:Cn,contextToolbars:An,sidebars:Gn,views:ko}=l.ui.registry.getAll(),ri=Zb(l),ii={menuItems:Cn,menus:Q_(l),menubar:cs(l),toolbar:ri.getOrThunk(()=>qb(l)),allowToolbarGroups:G===fc.floating,buttons:an,sidebar:Gn,views:ko};var Jo;Jo=mt.outerContainer,l.addShortcut("alt+F9","focus menubar",()=>{rr.focusMenubar(Jo)}),l.addShortcut("alt+F10","focus toolbar",()=>{rr.focusToolbar(Jo)}),l.addCommand("ToggleToolbarDrawer",(On,Dr)=>{Dr?.skipFocus?rr.toggleToolbarDrawerWithoutFocusing(Jo):rr.toggleToolbarDrawer(Jo)}),l.addQueryStateHandler("ToggleToolbarDrawer",()=>rr.isToolbarDrawerToggled(Jo)),((On,Dr,mr)=>{const Tl=(Uo,hA)=>{Gt([Dr,...mr],Hy=>{Hy.broadcastEvent(Uo,hA)})},Or=(Uo,hA)=>{Gt([Dr,...mr],Hy=>{Hy.broadcastOn([Uo],hA)})},Wa=Uo=>Or(og(),{target:Uo.target}),ns=jg(),lA=wo(ns,"touchstart",Wa),BD=wo(ns,"touchmove",Uo=>Tl(bm(),Uo)),LN=wo(ns,"touchend",Uo=>Tl(Da(),Uo)),PN=wo(ns,"mousedown",Wa),cA=wo(ns,"mouseup",Uo=>{0===Uo.raw.button&&Or(d0(),{target:Uo.target})}),dA=Uo=>Or(og(),{target:je(Uo.target)}),E1=Uo=>{0===Uo.button&&Or(d0(),{target:je(Uo.target)})},VE=()=>{Gt(On.editorManager.get(),Uo=>{On!==Uo&&Uo.dispatch("DismissPopups",{relatedTarget:On})})},HE=Uo=>Tl(kd(),r_(Uo)),tC=Uo=>{Or(ih(),{}),Tl(ul(),r_(Uo))},WE=Ia(je(On.getElement())),UE=AC(WE,"scroll",Uo=>{requestAnimationFrame(()=>{if(null!=On.getContainer()){const hA=gf(On,Dr.element).map(Hy=>[Hy.element,...Hy.others]).getOr([]);Bt(hA,Hy=>po(Hy,Uo.target))&&(On.dispatch("ElementScroll",{target:Uo.target.dom}),Tl(Hv(),Uo))}})}),SN=()=>Or(ih(),{}),CN=Uo=>{Uo.state&&Or(og(),{target:je(On.getContainer())})},GE=Uo=>{Or(og(),{target:je(Uo.relatedTarget.getContainer())})},uA=Uo=>On.dispatch("focusin",Uo),nC=Uo=>On.dispatch("focusout",Uo);On.on("PostRender",()=>{On.on("click",dA),On.on("tap",dA),On.on("mouseup",E1),On.on("mousedown",VE),On.on("ScrollWindow",HE),On.on("ResizeWindow",tC),On.on("ResizeEditor",SN),On.on("AfterProgressState",CN),On.on("DismissPopups",GE),Gt([Dr,...mr],Uo=>{Uo.element.dom.addEventListener("focusin",uA),Uo.element.dom.addEventListener("focusout",nC)})}),On.on("remove",()=>{On.off("click",dA),On.off("tap",dA),On.off("mouseup",E1),On.off("mousedown",VE),On.off("ScrollWindow",HE),On.off("ResizeWindow",tC),On.off("ResizeEditor",SN),On.off("AfterProgressState",CN),On.off("DismissPopups",GE),Gt([Dr,...mr],Uo=>{Uo.element.dom.removeEventListener("focusin",uA),Uo.element.dom.removeEventListener("focusout",nC)}),PN.unbind(),lA.unbind(),BD.unbind(),LN.unbind(),cA.unbind(),UE.unbind()}),On.on("detach",()=>{Gt([Dr,...mr],d_),Gt([Dr,...mr],Uo=>Uo.destroy())})})(l,mt.mothership,Ot),A.setup(l,Ce.popup.shared,me),((l,m)=>{var x;x=l,Gt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],S=>{x.ui.registry.addToggleButton(S.name,{tooltip:S.text,icon:S.icon,onAction:Ha(x,S.cmd),onSetup:vh(x,S.name)})}),x.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Va(x),onAction:Ha(x,"JustifyNone")}),(l=>{var m,x;(x=>{Mg.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(S,A)=>{x.ui.registry.addToggleButton(S.name,{tooltip:S.text,icon:S.icon,onSetup:vh(x,S.name),onAction:qn(x,S.name),shortcut:S.shortcut})});for(let S=1;S<=6;S++){const A="h"+S,D=`Access+${S}`;x.ui.registry.addToggleButton(A,{text:A.toUpperCase(),tooltip:"Heading "+S,onSetup:vh(x,A),onAction:qn(x,A),shortcut:D})}})(m=l),x=m,Mg.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],S=>{x.ui.registry.addButton(S.name,{tooltip:S.text,icon:S.icon,onAction:Ha(x,S.action),shortcut:S.shortcut,context:S.context})}),Mg.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],S=>{x.ui.registry.addButton(S.name,{tooltip:S.text,icon:S.icon,onSetup:Va(x),onAction:Ha(x,S.action)})}),(x=>{Mg.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],S=>{x.ui.registry.addToggleButton(S.name,{tooltip:S.text,icon:S.icon,onAction:Ha(x,S.action),onSetup:vh(x,S.name)})})})(m),(m=>{Mg.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],x=>{m.ui.registry.addMenuItem(x.name,{text:x.text,icon:x.icon,shortcut:x.shortcut,onAction:Ha(m,x.action),context:x.context})}),Mg.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],x=>{m.ui.registry.addMenuItem(x.name,{text:x.text,icon:x.icon,shortcut:x.shortcut,onSetup:Va(m),onAction:Ha(m,x.action)})}),m.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Va(m),onAction:qn(m,"code")})})(l)})(l),((x,S)=>{((A,D)=>{const E=Lu(D,wv(A));A.ui.registry.addNestedMenuItem("align",{text:D.shared.providers.translate("Align"),onSetup:Va(A),getSubmenuItems:()=>E.items.validateItems(E.getStyleItems())})})(x,S),((A,D)=>{const E=Lu(D,rA(A));A.ui.registry.addNestedMenuItem("fontfamily",{text:D.shared.providers.translate("Fonts"),onSetup:Va(A),getSubmenuItems:()=>E.items.validateItems(E.getStyleItems())})})(x,S),((A,D)=>{const E={type:"advanced",...D.styles},P=Lu(D,w(A,E));A.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:Va(A),getSubmenuItems:()=>P.items.validateItems(P.getStyleItems())})})(x,S),((A,D)=>{const E=Lu(D,Dh(A));A.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:Va(A),getSubmenuItems:()=>E.items.validateItems(E.getStyleItems())})})(x,S),((A,D)=>{const E=Lu(D,p(A));A.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:Va(A),getSubmenuItems:()=>E.items.validateItems(E.getStyleItems())})})(x,S)})(l,m),(x=>{var S;(S=x).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:Sr(S,"hasUndo"),onAction:Ha(S,"undo")}),S.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:Sr(S,"hasRedo"),onAction:Ha(S,"redo")}),(S=>{S.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:Sr(S,"hasUndo"),onAction:Ha(S,"undo"),shortcut:"Meta+Z"}),S.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:Sr(S,"hasRedo"),onAction:Ha(S,"redo"),shortcut:"Meta+Y"})})(x)})(l),(x=>{var P;(P=x).addCommand("mceApplyTextcolor",(B,H)=>{var Z,G,oe;G=B,oe=H,(Z=P).undoManager.transact(()=>{Z.focus(),Z.formatter.apply(G,{value:oe}),Z.nodeChanged()})}),P.addCommand("mceRemoveTextcolor",B=>{var H,Z;Z=B,(H=P).undoManager.transact(()=>{H.focus(),H.formatter.remove(Z,{value:null},void 0,!0),H.nodeChanged()})});const S=q2(x),A=FO(x),D=kn(S),E=kn(A);ku(x,"forecolor","forecolor",D),ku(x,"backcolor","hilitecolor",E),Gf(x,"forecolor","forecolor","Text color",D),Gf(x,"backcolor","hilitecolor","Background color",E)})(l),(x=>{var S;(S=x).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Ha(S,"mceToggleVisualAid"),context:"any"}),(S=>{S.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:sn(S),onAction:Ha(S,"mceToggleVisualAid"),context:"any"})})(x)})(l),(x=>{var S;(S=x).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:ro(S),onAction:Ha(S,"outdent")}),S.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Va(S),onAction:Ha(S,"indent")})})(l),(l=>{var m;Zd(l,{name:"lineheight",text:"Line height",icon:"line-height",getOptions:ed,hash:x=>{return(S=x,Ic(S,["fixed","relative","empty"]).map(({value:D,unit:E})=>D+E)).getOr(x);var S},display:Ge,watcher:(x,S,A)=>x.formatter.formatChanged("lineheight",A,!1,{value:S}).unbind,getCurrent:x=>F.from(x.queryCommandValue("LineHeight")),setCurrent:(x,S)=>x.execCommand("LineHeight",!1,S),onToolbarSetup:Va(m=l),onMenuSetup:Va(m)}),(m=>F.from(Gb(m)).map(x=>({name:"language",text:"Language",icon:"language",getOptions:ae(x),hash:S=>X(S.customCode)?S.code:`${S.code}/${S.customCode}`,display:S=>S.title,watcher:(S,A,D)=>{var E;return S.formatter.formatChanged("lang",D,!1,{value:A.code,customValue:null!==(E=A.customCode)&&void 0!==E?E:null}).unbind},getCurrent:S=>{const A=je(S.selection.getNode());return $u(A,D=>F.some(D).filter($n).bind(E=>mi(E,"lang").map(P=>({code:P,customCode:mi(E,"data-mce-lang").getOrUndefined(),title:""}))))},setCurrent:(S,A)=>S.execCommand("Lang",!1,A),onToolbarSetup:S=>{const A=Ll();return S.setActive(m.formatter.match("lang",{},void 0,!0)),A.set(m.formatter.formatChanged("lang",S.setActive,!0)),bT(A.clear,Va(m)(S))},onMenuSetup:Va(m)})))(l).each(m=>Zd(l,m))})(l),(x=>{const S=kn(X_(x)),A=()=>x.execCommand("mceTogglePlainTextPaste");x.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:A,onSetup:Co(x,S)}),x.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:A,onSetup:Co(x,S)})})(l),(x=>{x.ui.registry.addContext("editable",()=>x.selection.isEditable()),x.ui.registry.addContext("mode",S=>x.mode.get()===S),x.ui.registry.addContext("any",Se),x.ui.registry.addContext("formatting",S=>x.formatter.canApply(S)),x.ui.registry.addContext("insert",S=>x.schema.isValidChild(x.selection.getNode().tagName,S))})(l)})(l,Ce.popup),FN(l,Ce.popup.shared.getSink,Ce.popup),(On=>{const{sidebars:Dr}=On.ui.registry.getAll();Gt(Sn(Dr),mr=>{const Tl=Dr[mr],Or=()=>Ma(F.from(On.queryCommandValue("ToggleSidebar")),mr);On.ui.registry.addToggleButton(mr,{icon:Tl.icon,tooltip:Tl.tooltip,onAction:Wa=>{On.execCommand("ToggleSidebar",!1,mr),Wa.setActive(Or())},onSetup:Wa=>{Wa.setActive(Or());const ns=()=>Wa.setActive(Or());return On.on("ToggleSidebar",ns),()=>{On.off("ToggleSidebar",ns)}},context:"any"})})})(l),((l,m,x)=>{const S=kn(!1),A=ar(),D=P=>{var B;S.get()&&("focusin"!==(B=P).type||!(B.composed?Tt(B.composedPath()):F.from(B.target)).map(je).filter($n).exists(H=>qa(H,"mce-pastebin")))&&(P.preventDefault(),bD(m()),l.editorManager.setActive(l))};l.inline||l.on("PreInit",()=>{l.dom.bind(l.getWin(),"focusin",D),l.on("BeforeExecCommand",P=>{"mcefocus"===P.command.toLowerCase()&&!0!==P.value&&D(P)})});const E=P=>{P!==S.get()&&(S.set(P),((B,H,Z,G)=>{const oe=H.element;if(((ce,me)=>{const Te="tabindex",Ae=`data-mce-${Te}`;F.from(ce.iframeElement).map(je).each(ze=>{me?(mi(ze,Te).each(ke=>Pn(ze,Ae,ke)),Pn(ze,Te,-1)):(tr(ze,Te),mi(ze,Ae).each(ke=>{Pn(ze,Te,ke),tr(ze,Ae)}))})})(B,Z),Z)Nu.block(H,(ce=G,(me,Te)=>({dom:{tag:"div",attributes:{"aria-label":ce.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:uh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))),No(oe,"display"),tr(oe,"aria-hidden"),B.hasFocus()&&bD(H);else{const ce=So.getCurrent(H).exists(me=>hb(me.element));Nu.unblock(H),Yt(oe,"display","none"),Pn(oe,"aria-hidden","true"),ce&&B.focus()}var ce})(l,m(),P,x.providers),l.dispatch("AfterProgressState",{state:P}))};l.on("ProgressState",P=>{if(A.on(clearTimeout),K(P.time)){const B=Ub.setEditorTimeout(l,()=>E(P.state),P.time);A.set(B)}else E(P.state),A.clear()})})(l,ke,Ce.popup.shared),((l,m,x,S)=>{const A=S.backstage,D=A.shared,E=pn().deviceType.isTouch,P=ar(),B=ar(),H=ar(),Z=vi((Fe=>{const $e=kn([]);return _r.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:ot=>{$e.set([]),_r.getContent(ot).each(bt=>{No(bt.element,"visibility")}),Vr(ot.element,Jn),No(ot.element,"width")},inlineBehaviours:Pt([Fn("context-toolbar-events",[lc(Cd(),(ot,bt)=>{"width"===bt.event.raw.propertyName&&(Vr(ot.element,Jn),No(ot.element,"width"))}),xt(In,(ot,bt)=>{const mt=ot.element;No(mt,"width");const vt=Ua(mt);_r.setContent(ot,bt.event.contents),ui(mt,Jn);const Ot=Ua(mt);Yt(mt,"width",vt+"px"),_r.getContent(ot).each(an=>{bt.event.focus.bind(Cn=>(hc(Cn),vl(mt))).orThunk(()=>(bn.focusIn(an),gc(Ia(mt))))}),setTimeout(()=>{Yt(ot.element,"width",Ot+"px")},0)}),xt(Ut,(ot,bt)=>{_r.getContent(ot).each(mt=>{$e.set($e.get().concat([{bar:mt,focus:gc(Ia(ot.element))}]))}),mn(ot,In,{contents:bt.event.forwardContents,focus:F.none()})}),xt(Mn,(ot,bt)=>{$t($e.get()).each(mt=>{$e.set($e.get().slice(0,$e.get().length-1)),mn(ot,In,{contents:fl(mt.bar),focus:mt.focus})})})]),bn.config({mode:"special",onEscape:ot=>$t($e.get()).fold(()=>Fe.onEscape(),bt=>(Zn(ot,Mn),F.some(!0)))})]),lazySink:()=>so.value(Fe.sink)})})({sink:x,onEscape:()=>(l.focus(),F.some(!0))})),G=()=>{const Fe=H.get().getOr("node"),$e=qe(Fe)?1:0;return Xt(l,D,Fe,$e)},oe=()=>!(l.removed||E()&&A.isContextMenuOpen()),ce=()=>{if(oe()){const Fe=G(),$e=Ma(H.get(),"node")?(ot=l,P.get().filter(mt=>Jr(mt)&&En(mt)).map(ol).getOrThunk(()=>qt(ot))):qt(l);return Fe.height<=0||!It($e,Fe,.01)}var ot;return!0},me=()=>{P.clear(),B.clear(),H.clear(),_r.hide(Z)},Te=()=>{if(_r.isOpen(Z)){const Fe=Z.element;No(Fe,"display"),ce()?Yt(Fe,"display","none"):(B.set(0),_r.reposition(Z))}},Ae=Fe=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Fe],behaviours:Pt([bn.config({mode:"acyclic"}),Fn("pop-dialog-wrap-events",[qo($e=>{l.shortcuts.add("ctrl+F9","focus statusbar",()=>bn.focusIn($e))}),_a($e=>{l.shortcuts.remove("ctrl+F9")})])])}),ze=bd(()=>((l,m)=>{const x={},S=[],A=[],D={},E={},P=Sn(l);return Gt(P,B=>{const H=l[B];var Z,G,oe;"contextform"===H.type?((Z,G)=>{const oe=il(br("ContextForm",L2,G));x[Z]=oe,oe.launch.map(ce=>{D["form:"+Z]={...G.launch,type:"contextformtogglebutton"===ce.type?"togglebutton":"button",onAction:()=>{m(oe)}}}),"editor"===oe.scope?A.push(oe):S.push(oe),E[Z]=oe})(B,H):"contexttoolbar"===H.type&&(Z=B,(oe=G=H,br("ContextToolbar",rN,oe)).each(ce=>{"editor"===G.scope?A.push(ce):S.push(ce),E[Z]=ce}))}),{forms:x,inNodeScope:S,inEditorScope:A,lookupTable:E,formNavigators:D}})(m,Fe=>{const $e=ke([Fe]);mn(Z,Ut,{forwardContents:Ae($e)})})),ke=Fe=>{const{buttons:$e}=l.ui.registry.getAll(),ot={...$e,...ze().formNavigators},bt=yu(l)===fc.scrolling?fc.scrolling:fc.default,mt=uo(Ct(Fe,vt=>"contexttoolbar"===vt.type?V(l,{buttons:ot,toolbar:vt.items,allowToolbarGroups:!1},S.backstage,F.some(["form:"])):((l,m)=>{const x=l.label.fold(()=>({}),D=>({"aria-label":D})),S=Wo(Fd.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:l.initValue(),inputAttributes:x,selectOnFocus:!0,inputBehaviours:Pt([Nn.config({disabled:()=>m.checkUiComponentContext("mode:design").shouldDisable}),gi(()=>m.checkUiComponentContext("mode:design")),bn.config({mode:"special",onEnter:D=>A.findPrimary(D).map(E=>(Vl(E),!0)),onLeft:(D,E)=>(E.cut(),F.none()),onRight:(D,E)=>(E.cut(),F.none())})])})),A=((D,E,P)=>{const B=Ct(E,H=>{return Wo((Z=D,oe=P,"contextformtogglebutton"===(G=H).type?((ce,me,Te)=>{const{primary:Ae,...ze}=me.original,ke=il(O2({...ze,type:"togglebutton",onAction:de}));return I(ke,Te,[it(ce,me)])})(Z,G,oe):((ce,me,Te)=>{const{primary:Ae,...ze}=me.original,ke=il(q0({...ze,type:"button",onAction:de}));return M(ke,Te,[it(ce,me)])})(Z,G,oe)));var Z,G,oe});return{asSpecs:()=>Ct(B,H=>H.asSpec()),findPrimary:H=>on(E,(Z,G)=>Z.primary?F.from(B[G]).bind(oe=>oe.getOpt(H)).filter(ve(Nn.isDisabled)):F.none())}})(S,l.commands,m);return[{title:F.none(),items:[S.asSpec()]},{title:F.none(),items:A.asSpecs()}]})(vt,D.providers)));return jS({type:bt,uid:cn("context-toolbar"),initGroups:mt,onEscape:F.none,cyclicKeying:!0,providers:D.providers})},Ce=(Fe,$e)=>{if(Ne.cancel(),!oe())return;const ot=ke(Fe),bt=Fe[0].position,mt=((Ot,an)=>{const Cn="node"===Ot?D.anchors.node(an):D.anchors.cursor(),An=(Gn=l,ko=Ot,ri=E(),ii={lastElement:P.get,isReposition:()=>Ma(B.get(),0),getMode:()=>Ca.getMode(x)},"line"===ko?{bubble:Gl(12,0,Dt),layouts:{onLtr:()=>[Zh],onRtl:()=>[e_]},overrides:en}:{bubble:Gl(0,12,Dt,1/12),layouts:gt(Gn,ri,ii,ko),overrides:en});var Gn,ko,ri,ii;return be(Cn,An)})(bt,$e);H.set(bt),B.set(1);const vt=Z.element;No(vt,"display"),Ma(Ml($e,P.get(),po),!0)||(Vr(vt,wr),Ca.reset(x,Z)),_r.showWithinBounds(Z,Ae(ot),{anchor:mt,transition:{classes:[wr],mode:"placement"}},()=>F.some(G())),$e.fold(P.clear,P.set),ce()&&Yt(vt,"display","none")};let Ee=!1;const Ne=cy(()=>{!l.hasFocus()||l.removed||Ee||(qa(Z.element,wr)?Ne.throttle():((Fe,$e)=>{const ot=je($e.getBody()),bt=vt=>po(vt,ot),mt=je($e.selection.getNode());return bt(vt=mt)||ys(ot,vt)?((vt,Ot,an)=>{const Cn=ht(vt,Ot);if(Cn.contextForms.length>0)return F.some({elem:vt,toolbars:[Cn.contextForms[0]]});{const An=ht(vt,an);if(An.contextForms.length>0)return F.some({elem:vt,toolbars:[An.contextForms[0]]});if(Cn.contextToolbars.length>0||An.contextToolbars.length>0){const Gn=(ko=>{if(ko.length<=1)return ko;{const ri=On=>Bt(ko,Dr=>Dr.position===On),ii=On=>to(ko,Dr=>Dr.position===On),Jo=ri("selection"),Lo=ri("node");if(Jo||Lo){if(Lo&&Jo){const On=ii("node"),Dr=Ct(ii("selection"),mr=>({...mr,position:"node"}));return On.concat(Dr)}return ii(Jo?"selection":"node")}return ii("line")}})(Cn.contextToolbars.concat(An.contextToolbars));return F.some({elem:vt,toolbars:Gn})}return F.none()}})(mt,Fe.inNodeScope,Fe.inEditorScope).orThunk(()=>((vt,Ot,an)=>vt(Ot)?F.none():hm(Ot,Cn=>{if($n(Cn)){const{contextToolbars:An,contextForms:Gn}=ht(Cn,an.inNodeScope),ko=Gn.length>0?Gn:(ri=>{if(ri.length<=1)return ri;{const ii=Jo=>hn(ri,Lo=>Lo.position===Jo);return ii("selection").orThunk(()=>ii("node")).orThunk(()=>ii("line")).map(Jo=>Jo.position).fold(()=>[],Jo=>to(ri,Lo=>Lo.position===Jo))}})(An);return ko.length>0?F.some({elem:Cn,toolbars:ko}):F.none()}return F.none()},vt))(bt,mt,Fe)):F.none();var vt})(ze(),l).fold(me,Fe=>{Ce(Fe.toolbars,F.some(Fe.elem))}))},17);l.on("init",()=>{l.on("remove",me),l.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Te),l.on("click keyup focus SetContent",Ne.throttle),l.on(Ye,me),l.on("contexttoolbar-show",Fe=>{const $e=ze();vn($e.lookupTable,Fe.toolbarKey).each(ot=>{Ce([ot],go(Fe.target!==l,Fe.target)),_r.getContent(Z).each(bn.focusIn)})}),l.on("focusout",Fe=>{Ub.setEditorTimeout(l,()=>{vl(x.element).isNone()&&vl(Z.element).isNone()&&me()},0)}),l.on("SwitchMode",()=>{l.mode.isReadOnly()&&me()}),l.on("ExecCommand",({command:Fe})=>{"toggleview"===Fe.toLowerCase()&&me()}),l.on("AfterProgressState",Fe=>{Fe.state?me():l.hasFocus()&&Ne.throttle()}),l.on("dragstart",()=>{Ee=!0}),l.on("dragend drop",()=>{Ee=!1}),l.on("NodeChange",Fe=>{vl(Z.element).fold(Ne.throttle,de)})})})(l,An,vt.sink,{backstage:Ce.popup}),((l,m)=>{const x=kn([]),S=kn([]),A=kn(!1),D=ar(),E=ar(),P=ke=>{const Ce=ol(ke);return iR(G.getOpt(m),ke,Ce.x,Ce.y,Ce.width,Ce.height)},B=ke=>{const Ce=ol(ke);return iR(oe.getOpt(m),ke,Ce.right,Ce.bottom,Ce.width,Ce.height)},H=aR(()=>Ct(x.get(),ke=>P(ke)),D,ke=>{E.get().each(Ce=>{l.dispatch("TableSelectorChange",{start:ke,finish:Ce})})}),Z=aR(()=>Ct(S.get(),ke=>B(ke)),E,ke=>{D.get().each(Ce=>{l.dispatch("TableSelectorChange",{start:Ce,finish:ke})})}),G=sR(H),oe=sR(Z),ce=vi(G.asSpec()),me=vi(oe.asSpec()),Te=(ke,Ce,Ee,Ne)=>{const Fe=Ee(Ce);LD.snapTo(ke,Fe),(($e,ot,bt,mt)=>{const vt=ot.dom.getBoundingClientRect();No($e.element,"display");const Ot=am(je(l.getBody())).dom.innerHeight;(vt[Ne]<0||vt[Ne]>Ot)&&Yt($e.element,"display","none")})(ke,Ce)},Ae=ke=>Te(ce,ke,P,"top"),ze=ke=>Te(me,ke,B,"bottom");if(pn().deviceType.isTouch()){const ke=Ce=>Ct(Ce,je);l.on("TableSelectionChange",Ce=>{A.get()||(nh(m,ce),nh(m,me),A.set(!0));const Ee=je(Ce.start),Ne=je(Ce.finish);D.set(Ee),E.set(Ne),F.from(Ce.otherCells).each(Fe=>{x.set(ke(Fe.upOrLeftCells)),S.set(ke(Fe.downOrRightCells)),Ae(Ee),ze(Ne)})}),l.on("ResizeEditor ResizeWindow ScrollContent",()=>{D.get().each(Ae),E.get().each(ze)}),l.on("TableSelectionClear",()=>{A.get()&&(Cs(ce),Cs(me),A.set(!1)),D.clear(),E.clear()})}})(l,vt.sink);const Lo={targetNode:l.getElement(),height:Ne(mt.outerContainer)};return S.render(l,bt,ii,Ce.popup,Lo)})({popupUi:ot,dialogUi:$e,mainUi:Fe,uiMotherships:D.getUiMotherships()})}}},wL=ae([kt("lazySink"),Bn("dragBlockClass"),Tr("getBounds",$i),st("useTabstopAt",Se),st("firstTabstop",0),st("eventOrder",{}),Nr("modalBehaviours",[bn]),Ss("onExecute"),ip("onEscape")]),HN={sketch:Ge},SL=ae([Us({name:"draghandle",overrides:(l,m)=>({behaviours:Pt([LD.config({mode:"mouse",getTarget:x=>ti(x,'[role="dialog"]').getOr(x),blockerClass:l.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(m,null,2)).message),getBounds:l.getDragBounds})])})}),Ba({schema:[kt("dom")],name:"title"}),Ba({factory:HN,schema:[kt("dom")],name:"close"}),Ba({factory:HN,schema:[kt("dom")],name:"body"}),Us({factory:HN,schema:[kt("dom")],name:"footer"}),Nd({factory:{sketch:(l,m)=>({...l,dom:m.dom,components:m.components})},schema:[st("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),st("components",[])],name:"blocker"})]),fs=Ka({name:"ModalDialog",configFields:wL(),partFields:SL(),factory:(l,m,x,S)=>{const A=ar(),D=cn("modal-events"),E={...l.eventOrder,[hl()]:[D].concat(l.eventOrder["alloy.system.attached"]||[])},P=pn();return{uid:l.uid,dom:l.dom,components:m,apis:{show:B=>{A.set(B);const H=l.lazySink(B).getOrDie(),Z=S.blocker(),G=H.getSystem().build({...Z,components:Z.components.concat([fl(B)]),behaviours:Pt([Dn.config({}),Fn("dialog-blocker-events",[lc(dl(),()=>{Nu.isBlocked(B)||bn.focusIn(B)})])])});nh(H,G),bn.focusIn(B)},hide:B=>{A.clear(),Ii(B.element).each(H=>{B.getSystem().getByDom(H).each(Z=>{Cs(Z)})})},getBody:B=>sg(B,l,"body"),getFooter:B=>Vo(B,l,"footer"),setIdle:B=>{Nu.unblock(B)},setBusy:(B,H)=>{Nu.block(B,H)}},eventOrder:E,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Pa(l.modalBehaviours,[zn.config({}),bn.config({mode:"cyclic",onEnter:l.onExecute,onEscape:l.onEscape,useTabstopAt:l.useTabstopAt,firstTabstop:l.firstTabstop}),Nu.config({getRoot:A.get}),Fn(D,[qo(B=>{const H=sg(B,l,"title").element,Z=H.dom.textContent;P.os.isMacOS()&&W(Z)?Pn(B.element,"aria-label",Z):((G,oe)=>{const ce=mi(G,"id").fold(()=>{const me=cn("dialog-label");return Pn(oe,"id",me),me},Ge);Pn(G,"aria-labelledby",ce)})(B.element,H)})])])}},apis:{show:(l,m)=>{l.show(m)},hide:(l,m)=>{l.hide(m)},getBody:(l,m)=>l.getBody(m),getFooter:(l,m)=>l.getFooter(m),setBusy:(l,m,x)=>{l.setBusy(m,x)},setIdle:(l,m)=>{l.setIdle(m)}}}),CL=Et([hi,cT].concat(Y0)),kL=ac,WN=[D2("button"),id,qu("align","end",["start","end"]),Af,Kl,Nv("buttonType",["primary","secondary"]),Ti("context","mode:design")],dR=[...WN,$s],UN=[Hh("type",["submit","cancel","custom"]),...dR],TL=[Hh("type",["menu"]),ph,Tf,id,sl("items",CL),...WN],ML=[...WN,Hh("type",["togglebutton"]),Tf,id,ph,xa("active",!1)],AL=xr("type",{submit:UN,cancel:UN,custom:UN,menu:TL,togglebutton:ML}),IL=[hi,$s,Hh("level",["info","warn","error","success"]),I2,st("url","")],DL=Et(IL),OL=[hi,$s,Kl,D2("button"),id,hT,Nv("buttonType",["primary","secondary","toolbar"]),Af,Ti("context","mode:design")],EL=Et(OL),zE=[hi,cT],Vy=zE.concat([Rr]),NL=zE.concat([dT,Kl,Ti("context","mode:design")]),RL=Et(NL),LL=ac,PL=Vy.concat([Pp("auto"),Ti("context","mode:design")]),BL=Et(PL),zL=jo([vw,$s,I2]),FL=Vy.concat([Ti("storageKey","default"),Ti("context","mode:design")]),VL=Et(FL),HL=io,WL=Et(Vy),UL=io,GL=zE.concat([Ti("tag","textarea"),Mt("scriptId"),Mt("scriptUrl"),Ps("onFocus"),Bl("settings",void 0,pA)]),jL=zE.concat([Ti("tag","textarea"),Hc("init")]),qL=um(l=>br("customeditor.old",fn(jL),l).orThunk(()=>br("customeditor.new",fn(GL),l))),$L=io,YL=Vy.concat([Ti("context","mode:design")]),XL=Et(YL),ZL=lo(xn),KL=l=>[hi,Ls("columns",Ga),l],JL=[hi,Mt("html"),qu("presets","presentation",["presentation","document"]),Tr("onInit",de),xa("stretched",!1)],QL=Et(JL),eP=Vy.concat([xa("border",!1),xa("sandboxed",!0),xa("streamContent",!1),xa("transparent",!0)]),tP=Et(eP),nP=io,oP=Et(zE.concat([fo("height")])),rP=Et([Mt("url"),ll("zoom"),ll("cachedWidth"),ll("cachedHeight")]),iP=Vy.concat([fo("inputMode"),fo("placeholder"),xa("maximized",!1),Kl,Ti("context","mode:design")]),aP=Et(iP),sP=io,lP=l=>[hi,dT,l,qu("align","start",["start","center","end"]),fo("for")],cP=[$s,vw],dP=[$s,sl("items",Rs(0,()=>uR))],uR=xo([Et(cP),Et(dP)]),uP=Vy.concat([sl("items",uR),Kl,Ti("context","mode:design")]),hP=Et(uP),gP=io,pP=Vy.concat([Ev("items",[$s,vw]),qy("size",1),Kl,Ti("context","mode:design")]),mP=Et(pP),fP=io,vP=Vy.concat([xa("constrain",!0),Kl,Ti("context","mode:design")]),yP=Et(vP),hR=Et([Mt("width"),Mt("height")]),bP=zE.concat([dT,qy("min",0),qy("max",0)]),xP=Et(bP),_P=Ga,wP=[hi,sl("header",io),sl("cells",lo(io))],SP=Et(wP),CP=Vy.concat([fo("placeholder"),xa("maximized",!1),Kl,Ti("context","mode:design")]),kP=Et(CP),TP=io,gR=[Hh("type",["directory","leaf"]),MO,Mt("id"),wd("menu",m1),fo("customStateIcon"),fo("customStateIconTooltip")],pR=Et(gR),MP=gR.concat([sl("children",Rs(0,()=>ru("type",{directory:mR,leaf:pR})))]),mR=Et(MP),AP=ru("type",{directory:mR,leaf:pR}),IP=[hi,sl("items",AP),Ps("onLeafAction"),Ps("onToggleExpand"),na("defaultExpandedIds",[],io),fo("defaultSelectedId")],DP=Et(IP),OP=Vy.concat([qu("filetype","file",["image","media","file"]),Kl,fo("picker_text"),Ti("context","mode:design")]),EP=Et(OP),NP=Et([vw,cx]),GN=l=>zi("items","items",{tag:"required",process:{}},lo(um(m=>br(`Checking item of ${l}`,jN,m).fold(x=>so.error(Ei(x)),x=>so.value(x))))),jN=oo(()=>{return ru("type",{alertbanner:DL,bar:Et((l=GN("bar"),[hi,l])),button:EL,checkbox:RL,colorinput:VL,colorpicker:WL,dropzone:XL,grid:Et(KL(GN("grid"))),iframe:tP,input:aP,listbox:hP,selectbox:mP,sizeinput:yP,slider:xP,textarea:kP,urlinput:EP,customeditor:qL,htmlpanel:QL,imagepreview:oP,collection:BL,label:Et(lP(GN("label"))),table:SP,tree:DP,panel:fR});var l}),RP=[hi,st("classes",[]),sl("items",jN)],fR=Et(RP),LP=[D2("tab"),MO,sl("items",jN)],PP=[hi,Ev("tabs",LP)],BP=Et(PP),zP=dR,FP=AL,VP=Et([Mt("title"),Ls("body",ru("type",{panel:fR,tabpanel:BP})),Ti("size","normal"),na("buttons",[],FP),st("initialData",{}),Tr("onAction",de),Tr("onChange",de),Tr("onSubmit",de),Tr("onClose",de),Tr("onCancel",de),Tr("onTabChange",de)]),HP=Et([Hh("type",["cancel","custom"]),...zP]),WP=Et([Mt("title"),Mt("url"),ll("height"),ll("width"),Sd("buttons",HP),Tr("onAction",de),Tr("onCancel",de),Tr("onClose",de),Tr("onMessage",de)]),qN=l=>se(l)?[l].concat(Yn(ho(l),qN)):j(l)?Yn(l,qN):[],UP=l=>Q(l.type)&&Q(l.name),GP={checkbox:LL,colorinput:HL,colorpicker:UL,dropzone:ZL,input:sP,iframe:nP,imagepreview:rP,selectbox:fP,sizeinput:hR,slider:_P,listbox:gP,size:hR,textarea:TP,urlinput:NP,customeditor:$L,collection:zL,togglemenuitem:kL},jP=l=>{const m=to(qN(l),UP),x=Yn(m,S=>{return(A=S,F.from(GP[A.type])).fold(()=>[],A=>[Ls(S.name,A)]);var A});return Et(x)},vR=l=>{var m;return{internalDialog:il(br("dialog",VP,l)),dataValidator:jP(l),initialData:null!==(m=l.initialData)&&void 0!==m?m:{}}},PD={open:(l,m)=>{const x=vR(m);return l(x.internalDialog,x.initialData,x.dataValidator)},openUrl:(l,m)=>l(il(br("dialog",WP,m))),redial:l=>vR(l)};var qP=Object.freeze({__proto__:null,events:(l,m)=>{const x=(S,A)=>{l.updateState.each(D=>{const E=D(S,A);m.set(E)}),l.renderComponents.each(D=>{const E=D(A,m.get());(l.reuseDom?i2:r2)(S,E)})};return gr([xt(Pv(),(S,A)=>{const D=A;D.universal||nt(D.channels,l.channel)&&x(S,D.data)}),qo((S,A)=>{l.initialData.each(D=>{x(S,D)})})])}}),$P=Object.freeze({__proto__:null,getState:(l,m,x)=>x}),YP=[kt("channel"),Bn("renderComponents"),Bn("updateState"),Bn("initialData"),xa("reuseDom",!0)];const Eh=Mi({fields:YP,name:"reflecting",active:qP,apis:$P,state:Object.freeze({__proto__:null,init:()=>{const l=kn(F.none());return{readState:()=>l.get().getOr("none"),get:l.get,set:l.set,clear:()=>l.set(F.none())}}})}),yR=l=>{const m=[],x={};return ao(l,(S,A)=>{S.fold(()=>{m.push(A)},D=>{x[A]=D})}),m.length>0?so.error(m):so.value(x)},XP=(l,m,x,S)=>{const A=Wo(jx.sketch(E=>({dom:{tag:"div",classes:["tox-form"].concat(l.classes)},components:Ct(l.items,P=>QI(E,P,m,x,S))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[A.asSpec()]}],behaviours:Pt([bn.config({mode:"acyclic",useTabstopAt:ve(iv)}),(D=A,So.config({find:D.getOpt})),aE(A,{postprocess:E=>yR(E).fold(P=>(console.error(P),{}),Ge)}),Fn("dialog-body-panel",[xt(dl(),(E,P)=>{E.getSystem().broadcastOn([av],{newFocus:F.some(P.event.target)})})])])};var D},ZP=$l({name:"TabButton",configFields:[st("uid",void 0),kt("value"),zi("dom","dom",At(()=>({attributes:{role:"tab",id:cn("aria"),"aria-selected":"false"}})),dr()),Bn("action"),st("domModification",{}),Nr("tabButtonBehaviours",[Dn,bn,Qt]),kt("view")],factory:(l,m)=>({uid:l.uid,dom:l.dom,components:l.components,events:Hb(l.action),behaviours:Pa(l.tabButtonBehaviours,[Dn.config({}),bn.config({mode:"execution",useSpace:!0,useEnter:!0}),Qt.config({store:{mode:"memory",initialValue:l.value}})]),domModification:l.domModification})}),KP=ae([kt("tabs"),kt("dom"),st("clickToDismiss",!1),Nr("tabbarBehaviours",[Wn,bn]),Gc(["tabClass","selectedClass"])]),JP=p0({factory:ZP,name:"tabs",unit:"tab",overrides:l=>{const m=(S,A)=>{Wn.dehighlight(S,A),mn(S,H1(),{tabbar:S,button:A})},x=(S,A)=>{Wn.highlight(S,A),mn(S,Ni(),{tabbar:S,button:A})};return{action:S=>{const A=S.getSystem().getByUid(l.uid).getOrDie(),D=Wn.isHighlighted(A,S);(D&&l.clickToDismiss?m:D?de:x)(A,S)},domModification:{classes:[l.markers.tabClass]}}}}),QP=ae([JP]),bR=Ka({name:"Tabbar",configFields:KP(),partFields:QP(),factory:(l,m,x,S)=>({uid:l.uid,dom:l.dom,components:m,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Pa(l.tabbarBehaviours,[Wn.config({highlightClass:l.markers.selectedClass,itemClass:l.markers.tabClass,onHighlight:(A,D)=>{Pn(D.element,"aria-selected","true")},onDehighlight:(A,D)=>{Pn(D.element,"aria-selected","false")}}),bn.config({mode:"flow",getInitial:A=>Wn.getHighlighted(A).map(D=>D.element),selector:"."+l.markers.tabClass,executeOnMove:!0})])})}),eB=$l({name:"Tabview",configFields:[Nr("tabviewBehaviours",[zn])],factory:(l,m)=>({uid:l.uid,dom:l.dom,behaviours:Pa(l.tabviewBehaviours,[zn.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),tB=ae([st("selectFirst",!0),Kn("onChangeTab"),Kn("onDismissTab"),st("tabs",[]),Nr("tabSectionBehaviours",[])]),nB=Ba({factory:bR,schema:[kt("dom"),al("markers",[kt("tabClass"),kt("selectedClass")])],name:"tabbar",defaults:l=>({tabs:l.tabs})}),oB=Ba({factory:eB,name:"tabview"}),rB=ae([nB,oB]),FE=Ka({name:"TabSection",configFields:tB(),partFields:rB(),factory:(l,m,x,S)=>{const A=(D,E)=>{Vo(D,l,"tabbar").each(P=>{E(P).each(Vl)})};return{uid:l.uid,dom:l.dom,components:m,behaviours:mp(l.tabSectionBehaviours),events:gr(uo([l.selectFirst?[qo((D,E)=>{A(D,Wn.getFirst)})]:[],[xt(Ni(),(D,E)=>{(P=>{const B=Qt.getValue(P);Vo(P,l,"tabview").each(H=>{hn(l.tabs,Z=>Z.value===B).each(Z=>{const G=Z.view();mi(P.element,"id").each(oe=>{Pn(H.element,"aria-labelledby",oe)}),zn.set(H,G),l.onChangeTab(H,P,G)})})})(E.event.button)}),xt(H1(),(D,E)=>{l.onDismissTab(D,E.event.button)})]])),apis:{getViewItems:D=>Vo(D,l,"tabview").map(E=>zn.contents(E)).getOr([]),showTab:(D,E)=>{A(D,P=>{const B=Wn.getCandidates(P);return hn(B,H=>Qt.getValue(H)===E).filter(H=>!Wn.isHighlighted(P,H))})}}}},apis:{getViewItems:(l,m)=>l.getViewItems(m),showTab:(l,m,x)=>{l.showTab(m,x)}}}),xR=(l,m)=>{Yt(l,"height",m+"px"),Yt(l,"flex-basis",m+"px")},EN=(l,m,x)=>{ti(l,'[role="dialog"]').each(S=>{$r(S,'[role="tablist"]').each(A=>{x.get().map(D=>(Yt(m,"height","0"),Yt(m,"flex-basis","0"),Math.min(D,((E,P,B)=>{const H=Tv(E).dom,Z=ti(E,".tox-dialog-wrap").getOr(E);let G;G="fixed"===Di(Z,"position")?Math.max(H.clientHeight,window.innerHeight):Math.max(H.offsetHeight,H.scrollHeight);const oe=Pi(P),ce=P.dom.offsetLeft>=B.dom.offsetLeft+Ua(B)?Math.max(Pi(B),oe):oe,me=parseInt(Di(E,"margin-top"),10)||0,Te=parseInt(Di(E,"margin-bottom"),10)||0;return G-(Pi(E)+me+Te-ce)})(S,m,A)))).each(D=>{xR(m,D)})})})},$N=l=>$r(l,'[role="tabpanel"]'),_R="send-data-to-section",wR="send-data-to-view",iB=(l,m,x,S)=>{const A=kn({}),D=Z=>{const G=Qt.getValue(Z),oe=yR(G).getOr({}),ce=A.get(),me=be(ce,oe);A.set(me)},E=Z=>{const G=A.get();Qt.setValue(Z,G)},P=kn(null),B=Ct(l.tabs,Z=>({value:Z.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Hr(x.shared.providers.translate(Z.title))],view:()=>[jx.sketch(G=>({dom:{tag:"div",classes:["tox-form"]},components:Ct(Z.items,oe=>QI(G,oe,m,x,S)),formBehaviours:Pt([bn.config({mode:"acyclic",useTabstopAt:ve(iv)}),Fn("TabView.form.events",[qo(E),_a(D)]),Vs.config({channels:zl([{key:_R,value:{onReceive:D}},{key:wR,value:{onReceive:E}}])})])}))]})),H=(Z=>{const G=ar();return{extraEvents:[qo(ce=>{const me=ce.element;$N(me).each(Te=>{var ze;Yt(Te,"visibility","hidden"),ce.getSystem().getByDom(Te).toOptional().each(Ae=>{var Ce,Ee,Ne;(Ce=>Tt(ft(Ce,(Ee,Ne)=>Ee>Ne?-1:Ee<Ne?1:0)))((Ee=Te,Ne=Ae,Ct(Ce=Z,(Fe,$e)=>{zn.set(Ne,Ce[$e].view());const ot=Ee.dom.getBoundingClientRect();return zn.set(Ne,[]),ot.height}))).fold(G.clear,G.set)}),EN(me,Te,G),No(Te,"visibility"),ze=ce,Tt(Z).each(ke=>FE.showTab(ze,ke.value)),requestAnimationFrame(()=>{EN(me,Te,G)})})}),xt(ul(),ce=>{const me=ce.element;$N(me).each(Te=>{EN(me,Te,G)})}),xt($O,(ce,me)=>{const Te=ce.element;$N(Te).each(Ae=>{const ze=gc(Ia(Ae));Yt(Ae,"visibility","hidden");const ke=kr(Ae,"height").map(Ee=>parseInt(Ee,10));No(Ae,"height"),No(Ae,"flex-basis");const Ce=Ae.dom.getBoundingClientRect().height;ke.forall(Ee=>Ce>Ee)?(G.set(Ce),EN(Te,Ae,G)):ke.each(Ee=>{xR(Ae,Ee)}),No(Ae,"visibility"),ze.each(hc)})})],selectFirst:!1}})(B);return FE.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(Z,G,oe)=>{const ce=Qt.getValue(G);mn(Z,sI,{name:ce,oldName:P.get()}),P.set(ce)},tabs:B,components:[FE.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[bR.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Pt([cr.config({})])}),FE.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:H.selectFirst,tabSectionBehaviours:Pt([Fn("tabpanel",H.extraEvents),bn.config({mode:"acyclic"}),So.config({find:Z=>Tt(FE.getViewItems(Z))}),$p(F.none(),Z=>(Z.getSystem().broadcastOn([_R],{}),A.get()),(Z,G)=>{A.set(G),Z.getSystem().broadcastOn([wR],{})})])})},SR=(l,m,x,S,A,D)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...x.map(E=>({id:E})).getOr({}),...A?{"aria-live":"polite"}:{}}},components:[],behaviours:Pt([cM(0),Eh.config({channel:`${dy}-${m}`,updateState:(E,P)=>F.some({isTabPanel:()=>"tabpanel"===P.body.type}),renderComponents:E=>{const P=E.body;return"tabpanel"===P.type?[iB(P,E.initialData,S,D)]:[XP(P,E.initialData,S,D)]},initialData:l})])}),aB=lf.deviceType.isTouch(),CR=(l,m)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[l,m]}),kR=(l,m)=>fs.parts.close(ua.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":m.translate("Close")}},action:l,buttonBehaviours:Pt([cr.config({})])})),TR=()=>fs.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),MR=(l,m)=>fs.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:uh(`<p>${cw(m.translate(l))}</p>`)}]}]}),AR=l=>fs.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:l}),IR=(l,m)=>[Cc.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:l}),Cc.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:m})],YN=l=>{const m="tox-dialog",x=m+"-wrap",S=x+"__backdrop",A=m+"__disable-scroll";return fs.sketch({lazySink:l.lazySink,onEscape:D=>(l.onEscape(D),F.some(!0)),useTabstopAt:D=>!iv(D),firstTabstop:l.firstTabstop,dom:{tag:"div",classes:[m].concat(l.extraClasses),styles:{position:"relative",...l.extraStyles}},components:[l.header,l.body,...l.footer.toArray()],parts:{blocker:{dom:uh(`<div class="${x}"></div>`),components:[{dom:{tag:"div",classes:aB?[S,S+"--opaque"]:[S]}}]}},dragBlockClass:x,modalBehaviours:Pt([Dn.config({}),Fn("dialog-events",l.dialogEvents.concat([lc(dl(),(D,E)=>{Nu.isBlocked(D)||bn.focusIn(D)}),xt(Fv(),(D,E)=>{D.getSystem().broadcastOn([av],{newFocus:E.event.newFocus})})])),Fn("scroll-lock",[qo(()=>{ui(Os(),A)}),_a(()=>{Vr(Os(),A)})]),...l.extraBehaviours]),eventOrder:{[ss()]:["dialog-events"],[hl()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Bs()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...l.eventOrder}})},DR=l=>ua.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":l.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Pt([cr.config({}),vr.config(l.tooltips.getConfig({tooltipText:l.translate("Close")}))]),components:[Zl("close",{tag:"span",classes:["tox-icon"]},l.icons)],action:m=>{Zn(m,xh)}}),OR=(l,m,x,S)=>({dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...x.map(A=>({id:A})).getOr({})}},components:[],behaviours:Pt([Eh.config({channel:`${Zx}-${m}`,initialData:l,renderComponents:A=>[Hr(S.translate(A.title))]})])}),ER=()=>({dom:uh('<div class="tox-dialog__draghandle"></div>')}),NR=(l,m,x)=>((S,A,D)=>{const E=fs.parts.title(OR(S,A,F.none(),D)),P=fs.parts.draghandle(ER()),B=fs.parts.close(DR(D)),H=[E].concat(S.draggable?[P]:[]).concat([B]);return Cc.sketch({dom:uh('<div class="tox-dialog__header"></div>'),components:H})})({title:x.shared.providers.translate(l),draggable:x.dialog.isDraggableModal()},m,x.shared.providers),RR=(l,m,x,S)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":x.translate(l)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${S.getOr(0)}px`,position:"absolute"}},behaviours:m,components:[{dom:uh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),LR=(l,m,x)=>({onClose:()=>x.closeWindow(),onBlock:S=>{const A=$r(l().element,".tox-dialog__header").map(D=>Pi(D));fs.setBusy(l(),(D,E)=>RR(S.message,E,m,A))},onUnblock:()=>{fs.setIdle(l())}}),PR="tox-dialog--fullscreen",XN="tox-dialog--width-lg",ZN="tox-dialog--width-md",NN=l=>{switch(l){case"large":return F.some(XN);case"medium":return F.some(ZN);default:return F.none()}},BR=(l,m)=>{const x=je(m.element.dom);qa(x,PR)||(zs(x,[XN,ZN]),NN(l).each(S=>ui(x,S)))},zR=(l,m)=>{const x=je(l.element.dom),S=vA(x),A=hn(S,D=>D===XN||D===ZN).or(NN(m));var D,E;D=x,E=[PR,...A.toArray()],Gt(E,P=>{var B,H,G,oe;H=P,ja(B=D)?B.dom.classList.toggle(H):(oe=H,nt(_s(G=B),oe)?dc(G,oe):ws(G,oe)),Sm(B)})},FR=(l,m,x)=>vi(YN({...l,firstTabstop:1,lazySink:x.shared.getSink,extraBehaviours:[rv({}),...l.extraBehaviours],onEscape:S=>{Zn(S,xh)},dialogEvents:m,eventOrder:{[Pv()]:[Eh.name(),Vs.name()],[hl()]:["scroll-lock",Eh.name(),"messages","dialog-events","alloy.base.behaviour"],[Bs()]:["alloy.base.behaviour","dialog-events","messages",Eh.name(),"scroll-lock"]}})),KN=(l,m={})=>Ct(l,x=>"menu"===x.type?(S=>{const A=Ct(S.items,D=>{const E=vn(m,D.name).getOr(kn(!1));return{...D,storage:E}});return{...S,items:A}})(x):x),VR=l=>_n(l,(m,x)=>"menu"===x.type?_n(x.items,(S,A)=>(S[A.name]=A.storage,S),m):m,{}),HR=(l,m)=>[cC(dl(),aS),l(Rx,(x,S,A,D)=>{gc(Ia(D.element)).fold(de,o0),m.onClose(),S.onClose()}),l(xh,(x,S,A,D)=>{S.onCancel(x),Zn(D,Rx)}),xt(Gw,(x,S)=>m.onUnblock()),xt(Yf,(x,S)=>m.onBlock(S.event))],WR=(l,m,x)=>{const S=(D,E)=>xt(D,(P,B)=>{A(P,(H,Z)=>{E(l(),H,B.event,P)})}),A=(D,E)=>{Eh.getState(D).get().each(P=>{E(P.internalDialog,D)})};return[...HR(S,m),S($f,(D,E)=>E.onSubmit(D)),S(Ys,(D,E,P)=>{E.onChange(D,{name:P.name})}),S(_h,(D,E,P,B)=>{const H=()=>B.getSystem().isConnected()?bn.focusIn(B):void 0,Z=ce=>Ol(ce,"disabled")||mi(ce,"aria-disabled").exists(me=>"true"===me),G=Ia(B.element),oe=gc(G);E.onAction(D,{name:P.name,value:P.value}),gc(G).fold(H,ce=>{Z(ce)||oe.exists(me=>ys(ce,me)&&Z(me))?H():x().toOptional().filter(me=>!ys(me.element,ce)).each(H)})}),S(sI,(D,E,P)=>{E.onTabChange(D,{newTabName:P.name,oldTabName:P.oldName})}),_a(D=>{const E=l();Qt.setValue(D,E.getData())})]},sB=(l,m)=>{const x=m.map(D=>D.footerButtons).getOr([]),S=xi(x,D=>"start"===D.align),A=(D,E)=>Cc.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${D}`]},components:Ct(E,P=>P.memento.asSpec())});return[A("start",S.pass),A("end",S.fail)]},UR=(l,m,x)=>({dom:uh('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Pt([Eh.config({channel:`${gM}-${m}`,initialData:l,updateState:(S,A)=>{const D=Ct(A.buttons,E=>{const P=Wo(mS(B=E,B.type,x));var B;return{name:E.name,align:E.align,memento:P}});return F.some({lookupByName:E=>{return P=S,H=E,hn(D,Z=>Z.name===H).bind(Z=>Z.memento.getOpt(P));var P,H},footerButtons:D})},renderComponents:sB})])}),GR=(l,m,x)=>fs.parts.footer(UR(l,m,x)),RN=(l,m)=>{if(l.getRoot().getSystem().isConnected()){const x=So.getCurrent(l.getFormWrapper()).getOr(l.getFormWrapper());return jx.getField(x,m).orThunk(()=>l.getFooter().bind(A=>Eh.getState(A).get()).bind(A=>A.lookupByName(m)))}return F.none()},jR=(l,m,x)=>{const S=D=>{const E=l.getRoot();E.getSystem().isConnected()&&D(E)},A={getData:()=>{const D=l.getRoot(),E=D.getSystem().isConnected()?l.getFormWrapper():D;return{...Qt.getValue(E),...Rn(x,P=>P.get())}},setData:D=>{S(E=>{const P=A.getData(),B=be(P,D),H=((G,oe)=>{const ce=G.getRoot();return Eh.getState(ce).get().map(me=>il(br("data",me.dataValidator,oe))).getOr(oe)})(l,B),Z=l.getFormWrapper();Qt.setValue(Z,H),ao(x,(G,oe)=>{bo(B,oe)&&G.set(B[oe])})})},setEnabled:(D,E)=>{RN(l,D).each(E?Nn.enable:Nn.disable)},focus:D=>{RN(l,D).each(Dn.focus)},block:D=>{if(!Q(D))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");S(E=>{mn(E,Yf,{message:D})})},unblock:()=>{S(D=>{Zn(D,Gw)})},showTab:D=>{S(E=>{const P=l.getBody();Eh.getState(P).get().exists(B=>B.isTabPanel())&&So.getCurrent(P).each(B=>{FE.showTab(B,D)})})},redial:D=>{S(E=>{const P=l.getId(),B=m(D),H=KN(B.internalDialog.buttons,x);E.getSystem().broadcastOn([`${Xx}-${P}`],B),E.getSystem().broadcastOn([`${Zx}-${P}`],B.internalDialog),E.getSystem().broadcastOn([`${dy}-${P}`],B.internalDialog),E.getSystem().broadcastOn([`${gM}-${P}`],{...B.internalDialog,buttons:H}),A.setData(B.initialData)})},close:()=>{S(D=>{Zn(D,Rx)})},toggleFullscreen:l.toggleFullscreen};return A},qR=(l,m,x,S=!1,A)=>{const D=cn("dialog"),E=cn("dialog-label"),P=cn("dialog-content"),B=l.internalDialog,H=kn(B.size),Z=NN(H.get()).toArray(),G=Wo((Ne={title:B.title,draggable:!0},Fe=D,$e=E,ot=x.shared.providers,Cc.sketch({dom:uh('<div class="tox-dialog__header"></div>'),components:[OR(Ne,Fe,F.some($e),ot),ER(),DR(ot)],containerBehaviours:Pt([LD.config({mode:"mouse",blockerClass:"blocker",getTarget:bt=>Yh(bt,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),oe=Wo(((Ne,Fe,$e,ot,bt,mt)=>SR(Ne,Fe,F.some($e),ot,bt,Ne=>RN(Ce,Ne)))({body:B.body,initialData:B.initialData},D,P,x,S)),ce=KN(B.buttons),me=VR(ce),Te=go(0!==ce.length,Wo(((Ne,Fe,$e)=>UR(Ne,Fe,$e))({buttons:ce},D,x))),Ae=WR(()=>Ee,{onBlock:Ne=>{Nu.block(ke,(Fe,$e)=>{const ot=G.getOpt(ke).map(bt=>Pi(bt.element));return RR(Ne.message,$e,x.shared.providers,ot)})},onUnblock:()=>{Nu.unblock(ke)},onClose:()=>m.closeWindow()},x.shared.getSink),ze=pn().os,ke=vi({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...Z],attributes:{role:"dialog",...ze.isMacOS()?{"aria-label":B.title}:{"aria-labelledby":E}}},eventOrder:{[Pv()]:[Eh.name(),Vs.name()],[ss()]:["execute-on-form"],[hl()]:["reflecting","execute-on-form"]},behaviours:Pt([bn.config({mode:"cyclic",onEscape:Ne=>(Zn(Ne,Rx),F.some(!0)),useTabstopAt:Ne=>!iv(Ne)&&("button"!==Rt(Ne)||"disabled"!==qi(Ne,"disabled")),firstTabstop:1}),Eh.config({channel:`${Xx}-${D}`,updateState:(Ne,Fe)=>(H.set(Fe.internalDialog.size),BR(Fe.internalDialog.size,Ne),A(),F.some(Fe)),initialData:l}),Dn.config({}),Fn("execute-on-form",Ae.concat([lc(dl(),(Ne,Fe)=>{bn.focusIn(Ne)}),xt(Fv(),(Ne,Fe)=>{Ne.getSystem().broadcastOn([av],{newFocus:Fe.event.newFocus})})])),Nu.config({getRoot:()=>F.some(ke)}),zn.config({}),rv({})]),components:[G.asSpec(),oe.asSpec(),...Te.map(Ne=>Ne.asSpec()).toArray()]}),Ce={getId:ae(D),getRoot:ae(ke),getFooter:()=>Te.map(Ne=>Ne.get(ke)),getBody:()=>oe.get(ke),getFormWrapper:()=>{const Ne=oe.get(ke);return So.getCurrent(Ne).getOr(Ne)},toggleFullscreen:()=>{zR(ke,H.get())}},Ee=jR(Ce,m.redial,me);var Ne,Fe,$e,ot;return{dialog:ke,instanceApi:Ee}};var JN=tinymce.util.Tools.resolve("tinymce.util.URI");const lB=["insertContent","setContent","execCommand","close","block","unblock"],$R=l=>se(l)&&-1!==lB.indexOf(l.mceAction),YR=(l,m)=>il(br("data",m,l)),XR=l=>ny(l,".tox-alert-dialog")||ny(l,".tox-confirm-dialog"),dB=(l,m,x)=>m&&x?[]:[jr.config({contextual:{lazyContext:()=>F.some(Fr(je(l.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:S=>gf(l,S.element).map(A=>({bounds:xu(A),optScrollEnv:F.some({currentScrollTop:A.element.dom.scrollTop,scrollElmTop:ci(A.element).top})})).getOrThunk(()=>({bounds:$i(),optScrollEnv:F.none()}))})],uB=l=>{const m=l.editor,x=bu(m),S=(B=>{const H=B.shared;return{open:(Z,G)=>{const oe=()=>{fs.hide(Ae),G()},ce=Wo(mS({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:F.some("primary"),align:"end",enabled:!0,icon:F.none()},"cancel",B)),me=TR(),Te=kR(oe,H.providers),Ae=vi(YN({lazySink:()=>H.getSink(),header:CR(me,Te),body:MR(Z,H.providers),footer:F.some(AR(IR([],[ce.asSpec()]))),onEscape:oe,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[xt(xh,oe)],eventOrder:{}}));fs.show(Ae);const ze=ce.get(Ae);Dn.focus(ze)}}})(l.backstages.dialog),A=(B=>{const H=B.shared;return{open:(Z,G)=>{const oe=Ce=>{fs.hide(ze),G(Ce)},ce=Wo(mS({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:F.some("primary"),align:"end",enabled:!0,icon:F.none()},"submit",B)),me=mS({context:"any",name:"no",text:"No",primary:!1,buttonType:F.some("secondary"),align:"end",enabled:!0,icon:F.none()},"cancel",B),Te=TR(),Ae=kR(()=>oe(!1),H.providers),ze=vi(YN({lazySink:()=>H.getSink(),header:CR(Te,Ae),body:MR(Z,H.providers),footer:F.some(AR(IR([],[me,ce.asSpec()]))),onEscape:()=>oe(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[xt(xh,()=>oe(!1)),xt($f,()=>oe(!0))],eventOrder:{}}));fs.show(ze);const ke=ce.get(ze);Dn.focus(ke)}}})(l.backstages.dialog),E=(B,H,Z,G)=>PD.open((oe,ce,me)=>{const Te=YR(ce,me),Ae=ar(),ze=l.backstages.popup.shared.header.isPositionedAtTop(),ke=()=>Ae.on(Ne=>{_r.reposition(Ne),x&&ze||jr.refresh(Ne)}),Ce=qR({dataValidator:me,initialData:Te,internalDialog:oe},{redial:PD.redial,closeWindow:()=>{Ae.on(_r.hide),m.off("ResizeEditor",ke),Ae.clear(),Z(Ce.instanceApi)}},l.backstages.popup,G.ariaAttrs,ke),Ee=vi(_r.sketch({lazySink:l.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:G.persistent?{event:"doNotDismissYet"}:{},...ze?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Pt([Fn("window-manager-inline-events",[xt(xm(),(Ne,Fe)=>{Zn(Ce.dialog,xh)})]),...dB(m,x,ze)]),isExtraPart:(Ne,Fe)=>XR(Fe)}));return Ae.set(Ee),_r.showWithinBounds(Ee,fl(Ce.dialog),{anchor:H},()=>{const Ne=m.inline?Os():je(m.getContainer()),Fe=Fr(Ne);return F.some(Fe)}),x&&ze||(jr.refresh(Ee),m.on("ResizeEditor",ke)),Ce.instanceApi.setData(Te),bn.focusIn(Ce.dialog),Ce.instanceApi},B);return{open:(B,H,Z)=>{if(!X(H)){if("toolbar"===H.inline)return E(B,l.backstages.popup.shared.anchors.inlineDialog(),Z,H);if("bottom"===H.inline)return((B,H,Z,G)=>PD.open((oe,ce,me)=>{const Te=YR(ce,me),Ae=ar(),ze=l.backstages.popup.shared.header.isPositionedAtTop(),ke=()=>Ae.on(Ne=>{_r.reposition(Ne),jr.refresh(Ne)}),Ce=qR({dataValidator:me,initialData:Te,internalDialog:oe},{redial:PD.redial,closeWindow:()=>{Ae.on(_r.hide),m.off("ResizeEditor ScrollWindow ElementScroll",ke),Ae.clear(),Z(Ce.instanceApi)}},l.backstages.popup,G.ariaAttrs,ke),Ee=vi(_r.sketch({lazySink:l.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:G.persistent?{event:"doNotDismissYet"}:{},...ze?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Pt([Fn("window-manager-inline-events",[xt(xm(),(Ne,Fe)=>{Zn(Ce.dialog,xh)})]),jr.config({contextual:{lazyContext:()=>F.some(Fr(je(m.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Ne=>gf(m,Ne.element).map(Fe=>({bounds:xu(Fe),optScrollEnv:F.some({currentScrollTop:Fe.element.dom.scrollTop,scrollElmTop:ci(Fe.element).top})})).getOrThunk(()=>({bounds:$i(),optScrollEnv:F.none()}))})]),isExtraPart:(Ne,Fe)=>XR(Fe)}));return Ae.set(Ee),_r.showWithinBounds(Ee,fl(Ce.dialog),{anchor:H},()=>l.backstages.popup.shared.getSink().toOptional().bind(Ne=>{const Fe=gf(m,Ne.element).map(bt=>xu(bt)).getOr($i()),$e=Fr(je(m.getContentAreaContainer())),ot=qg($e,Fe);return F.some(Oi(ot.x,ot.y,ot.width,ot.height-15))})),jr.refresh(Ee),m.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",ke),Ce.instanceApi.setData(Te),bn.focusIn(Ce.dialog),Ce.instanceApi},B))(B,l.backstages.popup.shared.anchors.inlineBottomDialog(),Z,H);if("cursor"===H.inline)return E(B,l.backstages.popup.shared.anchors.cursor(),Z,H)}return((B,H)=>PD.open((Z,G,oe)=>{const ce=G,me=((Te,Ae,ze)=>{const ke=cn("dialog"),Ce=Te.internalDialog,Ee=NR(Ce.title,ke,ze),Ne=kn(Ce.size),Fe=NN(Ne.get()).toArray(),$e=((Gn,ko,ri,ii)=>{const Jo=SR(Gn,ko,F.none(),ri,!1,Gn=>RN(Cn,Gn));return fs.parts.body(Jo)})({body:Ce.body,initialData:Ce.initialData},ke,ze),ot=KN(Ce.buttons),bt=VR(ot),mt=go(0!==ot.length,GR({buttons:ot},ke,ze)),vt=WR(()=>An,LR(()=>an,ze.shared.providers,Ae),ze.shared.getSink),Ot={id:ke,header:Ee,body:$e,footer:mt,extraClasses:Fe,extraBehaviours:[Eh.config({channel:`${Xx}-${ke}`,updateState:(Gn,ko)=>(Ne.set(ko.internalDialog.size),BR(ko.internalDialog.size,Gn),F.some(ko)),initialData:Te})],extraStyles:{}},an=FR(Ot,vt,ze),Cn={getId:ae(ke),getRoot:ae(an),getBody:()=>fs.getBody(an),getFooter:()=>fs.getFooter(an),getFormWrapper:()=>{const Gn=fs.getBody(an);return So.getCurrent(Gn).getOr(Gn)},toggleFullscreen:()=>{zR(an,Ne.get())}},An=jR(Cn,Ae.redial,bt);return{dialog:an,instanceApi:An}})({dataValidator:oe,initialData:ce,internalDialog:Z},{redial:PD.redial,closeWindow:()=>{fs.hide(me.dialog),H(me.instanceApi)}},l.backstages.dialog);return fs.show(me.dialog),me.instanceApi.setData(ce),me.instanceApi},B))(B,Z)},openUrl:(B,H)=>{return G=H,PD.openUrl(oe=>{const ce=((l,m,x,S)=>{const A=cn("dialog"),D=NR(l.title,A,S),E=(ze=>{const ke={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[DI(F.none(),{dom:{tag:"iframe",attributes:{src:ze.url}},behaviours:Pt([cr.config({}),Dn.config({})])})]}],behaviours:Pt([bn.config({mode:"acyclic",useTabstopAt:ve(iv)})])};return fs.parts.body(ke)})(l),P=l.buttons.bind(ze=>0===ze.length?F.none():F.some(GR({buttons:ze},A,S))),B=((ze,ke)=>{const Ce=(Ne,Fe)=>xt(Ne,($e,ot)=>{Ee($e,(bt,mt)=>{Fe(Ae,bt,ot.event,$e)})}),Ee=(Ne,Fe)=>{Eh.getState(Ne).get().each($e=>{Fe($e,Ne)})};return[...HR(Ce,ke),Ce(_h,(Ne,Fe,$e)=>{Fe.onAction(Ne,{name:$e.name})})]})(0,LR(()=>Te,S.shared.providers,m)),H={...l.height.fold(()=>({}),ze=>({height:ze+"px","max-height":ze+"px"})),...l.width.fold(()=>({}),ze=>({width:ze+"px","max-width":ze+"px"}))},Z=l.width.isNone()&&l.height.isNone()?["tox-dialog--width-lg"]:[],G=new JN(l.url,{base_uri:new JN(window.location.href)}),oe=`${G.protocol}://${G.host}${G.port?":"+G.port:""}`,ce=Ll(),me=[Eh.config({channel:`${Xx}-${A}`,updateState:(ze,ke)=>F.some(ke),initialData:l}),Fn("messages",[qo(()=>{const ze=wo(je(window),"message",ke=>{if(G.isSameOrigin(new JN(ke.raw.origin))){const Ce=ke.raw.data;$R(Ce)?((Ee,Ne,Fe)=>{switch(Fe.mceAction){case"insertContent":Ee.insertContent(Fe.content);break;case"setContent":Ee.setContent(Fe.content);break;case"execCommand":const $e=!!$(Fe.ui)&&Fe.ui;Ee.execCommand(Fe.cmd,$e,Fe.value);break;case"close":Ne.close();break;case"block":Ne.block(Fe.message);break;case"unblock":Ne.unblock()}})(x,Ae,Ce):!$R(Ee=Ce)&&se(Ee)&&bo(Ee,"mceAction")&&l.onMessage(Ae,Ce)}var Ee});ce.set(ze)}),_a(ce.clear)]),Vs.config({channels:{[OI]:{onReceive:(ze,ke)=>{$r(ze.element,"iframe").each(Ce=>{const Ee=Ce.dom.contentWindow;W(Ee)&&Ee.postMessage(ke,oe)})}}}})],Te=FR({id:A,header:D,body:E,footer:P,extraClasses:Z,extraBehaviours:me,extraStyles:H},B,S),Ae=(ze=>{const ke=Ce=>{ze.getSystem().isConnected()&&Ce(ze)};return{block:Ce=>{if(!Q(Ce))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");ke(Ee=>{mn(Ee,Yf,{message:Ce})})},unblock:()=>{ke(Ce=>{Zn(Ce,Gw)})},close:()=>{ke(Ce=>{Zn(Ce,Rx)})},sendMessage:Ce=>{ke(Ee=>{Ee.getSystem().broadcastOn([OI],Ce)})}}})(Te);return{dialog:Te,instanceApi:Ae}})(oe,{closeWindow:()=>{fs.hide(ce.dialog),G(ce.instanceApi)}},m,l.backstages.dialog);return fs.show(ce.dialog),ce.instanceApi},B);var G},alert:(B,H)=>{S.open(B,H)},close:B=>{B.close()},confirm:(B,H)=>{A.open(B,H)}}};Dv.add("silver",l=>{var P;Ip(P=l),(B=>{const H=B.options.register,Z=oe=>le(oe,Q)?{value:bh(oe),valid:!0}:{valid:!1,message:"Must be an array of strings."},G=oe=>K(oe)&&oe>0?{value:oe,valid:!0}:{valid:!1,message:"Must be a positive number."};H("color_map",{processor:Z,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),H("color_map_background",{processor:Z}),H("color_map_foreground",{processor:Z}),H("color_cols",{processor:G,default:ST(B)}),H("color_cols_foreground",{processor:G,default:zO(B,Ow)}),H("color_cols_background",{processor:G,default:zO(B,yh)}),H("custom_colors",{processor:"boolean",default:!0}),H("color_default_foreground",{processor:"string",default:Uf}),H("color_default_background",{processor:"string",default:Uf})})(P),(B=>{const H=B.options.register;H("contextmenu_avoid_overlap",{processor:"string",default:""}),H("contextmenu_never_use_native",{processor:"boolean",default:!1}),H("contextmenu",{processor:Z=>!1===Z?{value:[],valid:!0}:Q(Z)||le(Z,Q)?{value:Lr(Z),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(P);let m=()=>$i();const{dialogs:x,popups:S,renderUI:A}=_L(l,{getPopupSinkBounds:()=>m()});((l,m)=>{const x=cn("autocompleter"),S=kn(!1),A=kn(!1),D=ar(),E=vi(_r.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:x}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Pt([Fn("dismissAutocompleter",[xt(xm(),()=>G()),xt(W1(),(me,Te)=>{mi(Te.event.target,"id").each(Ae=>Pn(je(l.getBody()),"aria-activedescendant",Ae))})])]),lazySink:m.getSink})),P=()=>_r.isOpen(E),B=A.get,H=()=>{if(P()){_r.hide(E),l.dom.remove(x,!1);const me=je(l.getBody());mi(me,"aria-owns").filter(Te=>Te===x).each(()=>{tr(me,"aria-owns"),tr(me,"aria-activedescendant")})}},Z=()=>_r.getContent(E).bind(me=>pt(me.components(),0)),G=()=>l.execCommand("mceAutocompleterClose"),oe=me=>{const Te=(Ae=>{const ze=on(Ae,ke=>F.from(ke.columns)).getOr(1);return Yn(Ae,ke=>((l,m,x,S,A,D,E)=>{const P=1===S,B=!P||W0(l);return pa(Ct(l,H=>{switch(H.type){case"separator":return(Z=H,br("Autocompleter.Separator",bw,Z)).fold(Vd,G=>F.some(Z2(G)));case"cardmenuitem":return(G=H,br("cardmenuitem",gx,G)).fold(Vd,G=>F.some(((oe,ce,me,Te)=>{const Ae={dom:mT(oe.label),optComponents:[F.some({dom:{tag:"div",classes:[sT,lT]},components:vT(oe.items,Te)})]};return vg({context:"mode:design",data:ld({text:F.none(),...oe}),enabled:oe.enabled,getApi:ze=>({isEnabled:()=>!Nn.isDisabled(ze),setEnabled:ke=>{Nn.set(ze,!ke),Gt(Qi(ze.element,"*"),Ce=>{ze.getSystem().getByDom(Ce).each(Ee=>{Ee.hasConfigured(Nn)&&Nn.set(Ee,!ke)})})}}),onAction:oe.onAction,onSetup:oe.onSetup,triggersSubmenu:!1,itemBehaviours:F.from(Te.itemBehaviours).getOr([])},Ae,ce,me.providers)})({...G,onAction:oe=>{G.onAction(oe),x(G.value,G.meta)}},A,D,{itemBehaviours:fT(G.meta,D,F.none()),cardText:{matchText:m,highlightOn:E}})));default:return(G=>br("Autocompleter.Item",DO,G))(H).fold(Vd,G=>F.some(((oe,ce,me,Te,Ae,ze,ke,Ce=!0)=>{const Ee=Lf({presets:"normal",textContent:F.none(),htmlContent:me?oe.text.map(Fe=>Z0(Fe,ce)):F.none(),ariaLabel:oe.text,iconContent:oe.icon,shortcutContent:F.none(),checkMark:F.none(),caret:F.none(),value:oe.value},ke.providers,Ce,oe.icon),Ne=oe.text.filter(Fe=>!me&&""!==Fe);return vg({context:"mode:design",data:ld(oe),enabled:oe.enabled,getApi:ae({}),onAction:Fe=>Ae(oe.value,oe.meta),onSetup:ae(de),triggersSubmenu:!1,itemBehaviours:fT(oe,ke,Ne)},Ee,ze,ke.providers)})(G,m,P,0,x,A,D,B)))}var G,Z}))})(ke.items,ke.matchText,(Ee,Ne)=>{const Fe={hide:()=>G(),reload:$e=>{H(),l.execCommand("mceAutocompleterReload",!1,{fetchOptions:$e})}};l.execCommand("mceAutocompleterRefreshActiveRange"),D.get().each($e=>{S.set(!0),ke.onAction(Fe,$e,Ee,Ne),S.set(!1)})},ze,Cl.BUBBLE_TO_SANDBOX,m,ke.highlightOn))})(me);Te.length>0?(((Ae,ze)=>{const ke=on(Ae,Ce=>F.from(Ce.columns)).getOr(1);_r.showMenuAt(E,{anchor:{type:"selection",getSelection:()=>D.get().map(nI),root:je(l.getBody())}},((Ce,Ee,Ne,Fe)=>{const $e=Mx(Ee,Fe),ot=wu(Fe);return{data:Jl({...Ce,movement:$e,menuBehaviours:mh("auto"!==Ee?[]:[qo((bt,mt)=>{kw(bt,4,ot.item).each(({numColumns:vt,numRows:Ot})=>{bn.setGridSize(bt,Ot,vt)})})])}),menu:{markers:wu(Fe),fakeFocus:Ne===Ox.ContentFocus}}})(U0("autocompleter-value",!0,ze,ke,{menuType:"normal"}),ke,Ox.ContentFocus,"normal")),Z().each(Wn.highlightFirst)})(me,Te),Pn(je(l.getBody()),"aria-owns",x),l.inline||ce()):H()},ce=()=>{l.dom.get(x)&&l.dom.remove(x,!1);const me=l.getDoc().documentElement,Te=l.selection.getNode(),Ae=km(E.element,!0);yd(Ae,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Te.offsetTop}px`,left:`${Te.offsetLeft}px`}),l.dom.add(me,Ae.dom),$r(Ae,'[role="menu"]').each(ze=>{No(ze,"position"),No(ze,"max-height")})};l.on("AutocompleterStart",({lookupData:me})=>{A.set(!0),S.set(!1),oe(me)}),l.on("AutocompleterUpdate",({lookupData:me})=>oe(me)),l.on("AutocompleterUpdateActiveRange",({range:me})=>D.set(me)),l.on("AutocompleterEnd",()=>{H(),A.set(!1),S.set(!1),D.clear()}),((me,Te)=>{const Ae=(ke,Ce)=>{mn(ke,sc(),{raw:Ce})},ze=()=>me.getMenu().bind(Wn.getHighlighted);Te.on("keydown",ke=>{const Ce=ke.which;me.isActive()&&(me.isMenuOpen()?13===Ce?(ze().each(Vl),ke.preventDefault()):40===Ce?(ze().fold(()=>{me.getMenu().each(Wn.highlightFirst)},Ee=>{Ae(Ee,ke)}),ke.preventDefault(),ke.stopImmediatePropagation()):37!==Ce&&38!==Ce&&39!==Ce||ze().each(Ee=>{Ae(Ee,ke),ke.preventDefault(),ke.stopImmediatePropagation()}):13!==Ce&&38!==Ce&&40!==Ce||me.cancelIfNecessary())}),Te.on("NodeChange",()=>{!me.isActive()||me.isProcessingAction()||Te.queryCommandState("mceAutoCompleterInRange")||me.cancelIfNecessary()})})({cancelIfNecessary:G,isMenuOpen:P,isActive:B,isProcessingAction:S.get,getMenu:Z},l)})(l,S.backstage.shared);const D=uB({editor:l,backstages:{popup:S.backstage,dialog:x.backstage}}),E=ar();return{renderUI:()=>{const P=A();return gf(l,S.getMothership().element).each(B=>{m=()=>xu(B)}),P},getWindowManagerImpl:ae(D),getNotificationManagerImpl:()=>((l,m,x,S)=>{const A=m.backstage.shared,D=()=>je(""===l.queryCommandValue("ToggleView")?l.getContentAreaContainer():l.getContainer()),E=()=>{const B=Fr(D());return F.some(B)},P=B=>{E().each(H=>{Gt(B,Z=>{No(Z.element,"width"),Ua(Z.element)>H.width&&Yt(Z.element,"width",H.width+"px")})})};return{open:(B,H,Z)=>{const G=()=>{S.on(me=>{H();const Te=Z();var Ae,ze,Ce;zn.remove(me,oe),ce(),ze=Te,0===Aa((Ae=me).element).length?(Ce=ze,_r.hide(Ae),S.clear(),Ce&&l.focus()):((ke,Ce)=>{Ce&&bn.focusIn(ke)})(Ae,ze)})},oe=vi(rx.sketch({text:B.text,level:nt(["success","error","warning","warn","info"],B.type)?B.type:void 0,progress:!0===B.progressBar,icon:B.icon,onAction:G,iconProvider:A.providers.icons,backstageProvider:A.providers}));if(S.isSet()){const me=fl(oe);S.on(Te=>{zn.append(Te,me),_r.reposition(Te),jr.refresh(Te),P(Te.components())})}else{const me=vi(_r.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:A.getSink,fireDismissalEventInstead:{},...A.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Pt([bn.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),zn.config({}),...bu(l)&&!A.header.isPositionedAtTop()?[]:[jr.config({contextual:{lazyContext:()=>F.some(Fr(D())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:ke=>gf(l,ke.element).map(Ce=>({bounds:xu(Ce),optScrollEnv:F.some({currentScrollTop:Ce.element.dom.scrollTop,scrollElmTop:ci(Ce.element).top})})).getOrThunk(()=>({bounds:$i(),optScrollEnv:F.none()}))})]])})),Te=fl(oe),Ae={maxHeightFunction:Qh()},ze={...A.anchors.banner(),overrides:Ae};S.set(me),x.add(me),_r.showWithinBounds(me,Te,{anchor:ze},E)}K(B.timeout)&&B.timeout>0&&Ub.setEditorTimeout(l,()=>{G()},B.timeout);const ce=()=>{S.on(me=>{_r.reposition(me),jr.refresh(me),P(me.components())})};return{close:G,reposition:ce,text:me=>{rx.updateText(oe,me)},settings:B,getEl:()=>oe.element.dom,progressBar:{value:me=>{rx.updateProgress(oe,me)}}}},close:B=>{B.close()},getArgs:B=>B.settings}})(l,{backstage:S.backstage},S.getMothership(),E)}})}(),function(){"use strict";var Xe=tinymce.util.Tools.resolve("tinymce.PluginManager");const St=dt=>je=>(lt=>{const Nt=typeof lt;return null===lt?"null":"object"===Nt&&Array.isArray(lt)?"array":"object"===Nt&&(yn=Ft=lt,(Rt=String).prototype.isPrototypeOf(yn)||(null===(gn=Ft.constructor)||void 0===gn?void 0:gn.name)===Rt.name)?"string":Nt;var yn,Ft,Rt,gn})(je)===dt,wn=dt=>je=>typeof je===dt,Oe=St("string"),Ve=St("object"),Q=St("array"),q=wn("boolean"),j=dt=>!(null==dt),ne=wn("function"),$=(dt,je)=>{if(Q(dt)){for(let lt=0,Nt=dt.length;lt<Nt;++lt)if(!je(dt[lt]))return!1;return!0}return!1},X=()=>{},Y=(dt,je)=>dt===je;class W{constructor(je,lt){this.tag=je,this.value=lt}static some(je){return new W(!0,je)}static none(){return W.singletonNone}fold(je,lt){return this.tag?lt(this.value):je()}isSome(){return this.tag}isNone(){return!this.tag}map(je){return this.tag?W.some(je(this.value)):W.none()}bind(je){return this.tag?je(this.value):W.none()}exists(je){return this.tag&&je(this.value)}forall(je){return!this.tag||je(this.value)}filter(je){return!this.tag||je(this.value)?this:W.none()}getOr(je){return this.tag?this.value:je}or(je){return this.tag?this:je}getOrThunk(je){return this.tag?this.value:je()}orThunk(je){return this.tag?this:je()}getOrDie(je){if(this.tag)return this.value;throw new Error(je??"Called getOrDie on None")}static from(je){return j(je)?W.some(je):W.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(je){this.tag&&je(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}W.singletonNone=new W(!1);const U=Array.prototype.indexOf,K=Array.prototype.push,le=dt=>{const je=[];for(let lt=0,Nt=dt.length;lt<Nt;++lt){if(!Q(dt[lt]))throw new Error("Arr.flatten item "+lt+" was not an array, input: "+dt);K.apply(je,dt[lt])}return je},de=(dt,je)=>{for(let lt=0;lt<dt.length;lt++){const Nt=je(dt[lt],lt);if(Nt.isSome())return Nt}return W.none()},pe=(dt,je,lt=Y)=>dt.exists(Nt=>lt(Nt,je)),_e=dt=>{const je=[],lt=Nt=>{je.push(Nt)};for(let Nt=0;Nt<dt.length;Nt++)dt[Nt].each(lt);return je},ae=(dt,je)=>dt?W.some(je):W.none(),Ge=dt=>je=>je.options.get(dt),Re=Ge("link_assume_external_targets"),Ue=Ge("link_context_toolbar"),ve=Ge("link_list"),Me=Ge("link_default_target"),Pe=Ge("link_default_protocol"),ee=Ge("link_target_list"),Se=Ge("link_rel_list"),F=Ge("link_class_list"),We=Ge("link_title"),_t=Ge("allow_unsafe_link_target"),rt=Ge("link_quicklink"),wt=Object.keys,nt=Object.hasOwnProperty,Bt=(dt,je)=>nt.call(dt,je);var Wt=tinymce.util.Tools.resolve("tinymce.util.URI"),ue=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ct=tinymce.util.Tools.resolve("tinymce.util.Tools");const Gt=dt=>j(dt)&&"a"===dt.nodeName.toLowerCase(),xi=dt=>Gt(dt)&&!!_n(dt),to=(dt,je)=>{if(dt.collapsed)return[];{const lt=dt.cloneContents(),Nt=lt.firstChild,yn=new ue(Nt,lt),Ft=[];let Rt=Nt;do{je(Rt)&&Ft.push(Rt)}while(Rt=yn.next());return Ft}},Jt=dt=>/^\w+:/i.test(dt),_n=dt=>{var je,lt;return null!==(lt=null!==(je=dt.getAttribute("data-mce-href"))&&void 0!==je?je:dt.getAttribute("href"))&&void 0!==lt?lt:""},hn=(dt,je)=>{const lt=["noopener"],Nt=dt?dt.split(/\s+/):[],yn=Rt=>Rt.filter(gn=>-1===Ct.inArray(lt,gn)),Ft=je?(Rt=yn(Rt=Nt)).length>0?Rt.concat(lt):lt:yn(Nt);var Rt;return Ft.length>0?(Rt=>Ct.trim(Rt.sort().join(" ")))(Ft):""},Qe=(dt,je)=>(je=je||dn(dt.selection.getRng())[0]||dt.selection.getNode(),Qo(je)?W.from(dt.dom.select("a[href]",je)[0]):W.from(dt.dom.getParent(je,"a[href]"))),uo=(dt,je)=>Qe(dt,je).isSome(),Yn=(dt,je)=>je.fold(()=>dt.getContent({format:"text"}),lt=>lt.innerText||lt.textContent||"").replace(/\uFEFF/g,""),dn=dt=>to(dt,xi),Ao=dt=>Ct.grep(dt,xi),Oo=dt=>Ao(dt).length>0,_i=dt=>{const je=dt.schema.getTextInlineElements();if(Qe(dt).exists(Nt=>Nt.hasAttribute("data-mce-block")))return!1;const lt=dt.selection.getRng();return!!lt.collapsed||0===to(lt,Nt=>1===Nt.nodeType&&!Gt(Nt)&&!Bt(je,Nt.nodeName.toLowerCase())).length},Qo=dt=>j(dt)&&"FIGURE"===dt.nodeName&&/\bimage\b/i.test(dt.className),Tt=(dt,je,lt)=>{const Nt=((yn,Ft)=>{const Rt=yn.options.get,gn={allow_html_data_urls:Rt("allow_html_data_urls"),allow_script_urls:Rt("allow_script_urls"),allow_svg_data_urls:Rt("allow_svg_data_urls")},En=Ft.href;return{...Ft,href:Wt.isDomSafe(En,"a",gn)?En:""}})(dt,lt);dt.hasPlugin("rtc",!0)?dt.execCommand("createlink",!1,(dt=>{const{class:je,href:lt,rel:Nt,target:yn,text:Ft,title:Rt}=dt;return((gn,En)=>{const $n={};var Xn,Er,Kr;return Xn=$n,Er=(Zo,_o)=>{Xn[_o]=Zo},Kr=X,((li,Nc)=>{const po=wt(li);for(let ys=0,bs=po.length;ys<bs;ys++){const Qd=po[ys];Nc(li[Qd],Qd)}})(gn,(li,Nc)=>{(!1===(dt=>null===dt)(li)?Er:Kr)(li,Nc)}),$n})({class:je.getOrNull(),href:lt,rel:Nt.getOrNull(),target:yn.getOrNull(),text:Ft.getOrNull(),title:Rt.getOrNull()})})(Nt)):((dt,je,lt)=>{const Nt=dt.selection.getNode(),yn=Qe(dt,Nt),Ft=((Rt,gn)=>{const En={...gn};if(0===Se(Rt).length&&!_t(Rt)){const $n=hn(En.rel,"_blank"===En.target);En.rel=$n||null}return W.from(En.target).isNone()&&!1===ee(Rt)&&(En.target=Me(Rt)),En.href=($n=En.href,"http"!==(Xn=Re(Rt))&&"https"!==Xn||Jt($n)?$n:Xn+"://"+$n),En;var $n,Xn})(dt,(En=(Xn,Zo)=>(Rt[Zo].each(_o=>{Xn[Zo]=_o.length>0?_o:null}),Xn),$n={href:(Rt=lt).href},((Xn,Zo)=>{for(let _o=0,Er=Xn.length;_o<Er;_o++)Zo(Xn[_o])})(["title","rel","class","target"],(Xn,Zo)=>{$n=En($n,Xn)}),$n));var Rt,En,$n;dt.undoManager.transact(()=>{lt.href===je.href&&je.attach(),yn.fold(()=>{((Rt,gn,En,$n)=>{const Xn=Rt.dom;Qo(gn)?on(Xn,gn,$n):En.fold(()=>{Rt.execCommand("mceInsertLink",!1,$n)},Zo=>{Rt.insertContent(Xn.createHTML("a",$n,Xn.encode(Zo)))})})(dt,Nt,lt.text,Ft)},Rt=>{dt.focus(),((gn,En,$n,Xn)=>{$n.each(Zo=>{Bt(En,"innerText")?En.innerText=Zo:En.textContent=Zo}),gn.dom.setAttribs(En,Xn),gn.selection.select(En)})(dt,Rt,lt.text,Ft)})})})(dt,je,Nt)},$t=dt=>{var je;dt.hasPlugin("rtc",!0)?dt.execCommand("unlink"):(je=dt).undoManager.transact(()=>{const lt=je.selection.getNode();Qo(lt)?tn(je,lt):(Nt=>{const yn=Nt.dom,Ft=Nt.selection,Rt=Ft.getBookmark(),gn=Ft.getRng().cloneRange(),En=yn.getParent(gn.startContainer,"a[href]",Nt.getBody()),$n=yn.getParent(gn.endContainer,"a[href]",Nt.getBody());En&&gn.setStartBefore(En),$n&&gn.setEndAfter($n),Ft.setRng(gn),Nt.execCommand("unlink"),Ft.moveToBookmark(Rt)})(je),je.focus()})},tn=(dt,je)=>{var lt;const Nt=dt.dom.select("img",je)[0];if(Nt){const yn=dt.dom.getParents(Nt,"a[href]",je)[0];yn&&(null===(lt=yn.parentNode)||void 0===lt||lt.insertBefore(Nt,yn),dt.dom.remove(yn))}},on=(dt,je,lt)=>{var Nt;const yn=dt.select("img",je)[0];if(yn){const Ft=dt.create("a",lt);null===(Nt=yn.parentNode)||void 0===Nt||Nt.insertBefore(Ft,yn),Ft.appendChild(yn)}},Sn=dt=>Oe(dt.value)?dt.value:"",no=(dt,je)=>{const lt=[];return Ct.each(dt,Nt=>{const yn=Oe((Ft=Nt).text)?Ft.text:Oe(Ft.title)?Ft.title:"";var Ft;if(void 0!==Nt.menu){const Ft=no(Nt.menu,je);lt.push({text:yn,items:Ft})}else{const Ft=je(Nt);lt.push({text:yn,value:Ft})}}),lt},ao=(dt=Sn)=>je=>W.from(je).map(lt=>no(lt,dt)),Rn=dt=>ao(Sn)(dt),wi=ao,Go=(dt,je)=>lt=>({name:dt,type:"listbox",label:je,items:lt}),Si=Sn,Ds=(dt,je)=>de(je,lt=>{return Bt(yn=lt,"items")&&null!=yn.items?Ds(dt,lt.items):ae(lt.value===dt,lt);var yn});var vs=tinymce.util.Tools.resolve("tinymce.util.Delay");const ho=dt=>{const je=dt.href;return je.indexOf("@")>0&&-1===je.indexOf("/")&&-1===je.indexOf("mailto:")?W.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:lt=>({...lt,href:"mailto:"+je})}):W.none()},vn=(dt,je)=>lt=>{const Nt=lt.href;return 1===dt&&!Jt(Nt)||0===dt&&/^\s*www(\.|\d\.)/i.test(Nt)?W.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${je}:// prefix?`,preprocess:yn=>({...yn,href:je+"://"+Nt})}):W.none()},bo=dt=>{const je=dt.dom.select("a:not([href])"),lt=le(((Nt,yn)=>{const Ft=Nt.length,Rt=new Array(Ft);for(let gn=0;gn<Ft;gn++)Rt[gn]=yn(Nt[gn]);return Rt})(je,Nt=>{const yn=Nt.name||Nt.id;return yn?[{text:yn,value:"#"+yn}]:[]}));return lt.length>0?W.some([{text:"None",value:""}].concat(lt)):W.none()},Br=dt=>{const je=F(dt);return je.length>0?Rn(je):W.none()},Ma=dt=>{try{return W.some(JSON.parse(dt))}catch{return W.none()}},pa=(dt,je)=>{const lt=Se(dt);if(lt.length>0){const Nt=pe(je,"_blank"),yn=Ft=>hn(Si(Ft),Nt);return(!1===_t(dt)?wi(yn):Rn)(lt)}return W.none()},Ml=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],ir=dt=>{const je=ee(dt);return Q(je)?Rn(je).orThunk(()=>W.some(Ml)):!1===je?W.none():W.some(Ml)},go=(dt,je,lt)=>{const Nt=dt.getAttrib(je,lt);return null!==Nt&&Nt.length>0?W.some(Nt):W.none()},Jd=dt=>{var lt;(lt=dt,((dt,je)=>(lt=>{const Nt=Ft=>lt.convertURL(Ft.value||Ft.url||"","href"),yn=ve(lt);return new Promise(Ft=>{Oe(yn)?fetch(yn).then(Rt=>Rt.ok?Rt.text().then(Ma):Promise.reject()).then(Ft,()=>Ft(W.none())):ne(yn)?yn(Rt=>Ft(W.some(Rt))):Ft(W.from(yn))}).then(Ft=>Ft.bind(wi(Nt)).map(Rt=>Rt.length>0?[{text:"None",value:""}].concat(Rt):Rt))})(dt).then(lt=>{const Nt=((yn,Ft)=>{const Rt=yn.dom,gn=_i(yn)?W.some(Yn(yn.selection,Ft)):W.none(),En=Ft.bind(_o=>W.from(Rt.getAttrib(_o,"href"))),$n=Ft.bind(_o=>W.from(Rt.getAttrib(_o,"target"))),Xn=Ft.bind(_o=>go(Rt,_o,"rel")),Zo=Ft.bind(_o=>go(Rt,_o,"class"));return{url:En,text:gn,title:Ft.bind(_o=>go(Rt,_o,"title")),target:$n,rel:Xn,linkClass:Zo}})(dt,je);return{anchor:Nt,catalogs:{targets:ir(dt),rels:pa(dt,Nt.target),classes:Br(dt),anchor:bo(dt),link:lt},optNode:je,flags:{titleEnabled:We(dt)}}}))(lt,Qe(lt))).then(lt=>{var yn,Ft;return((yn,Ft,Rt)=>{const gn=yn.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),En=yn.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],$n=((_o,Er)=>{const Kr=_o.anchor,li=Kr.url.getOr("");return{url:{value:li,meta:{original:{value:li}}},text:Kr.text.getOr(""),title:Kr.title.getOr(""),anchor:li,link:li,rel:Kr.rel.getOr(""),target:Kr.target.or(Er).getOr(""),linkClass:Kr.linkClass.getOr("")}})(yn,W.from(Me(Rt))),Xn=yn.catalogs,Zo=((dt,je)=>{const lt={text:dt.text,title:dt.title};return{onChange:(yn,Ft)=>{const Rt=Ft.name;return"url"===Rt?(gn=>{const En=ae(lt.text.length<=0,W.from(null===(Xn=($n=gn.url).meta)||void 0===Xn?void 0:Xn.text).getOr($n.value));var $n,Xn;const Zo=ae(lt.title.length<=0,W.from(null===(Er=gn.url.meta)||void 0===Er?void 0:Er.title).getOr(""));var Er;return En.isSome()||Zo.isSome()?W.some({...En.map(_o=>({text:_o})).getOr({}),...Zo.map(_o=>({title:_o})).getOr({})}):W.none()})(yn()):U.call(["anchor","link"],Rt)>-1?((yn,Ft)=>{const Rt=(gn=je,En=Ft,"link"===En?gn.link:"anchor"===En?gn.anchor:W.none()).getOr([]);var gn,En;return(($n,Xn,Zo,_o)=>{const Er=_o[Xn],Kr=$n.length>0;return void 0!==Er?Ds(Er,Zo).map(li=>({url:{value:li.value,meta:{text:Kr?$n:li.text,attach:X}},text:Kr?$n:li.text})):W.none()})(lt.text,Ft,Rt,yn)})(yn(),Rt):(("text"===Rt||"title"===Rt)&&(lt[Rt]=yn()[Rt]),W.none())}}})($n,Xn);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:le([[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],gn,En,_e([Xn.anchor.map(Go("anchor","Anchors")),Xn.rels.map(Go("rel","Rel")),Xn.targets.map(Go("target","Open link in...")),Xn.link.map(Go("link","Link list")),Xn.classes.map(Go("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:$n,onChange:(_o,{name:Er})=>{Zo.onChange(_o.getData,{name:Er}).each(Kr=>{_o.setData(Kr)})},onSubmit:Ft}})(lt,(yn=dt,Ft=lt,Rt=>{const gn=Rt.getData();if(!gn.url.value)return $t(yn),void Rt.close();const En=Zo=>W.from(gn[Zo]).filter(_o=>!pe(Ft.anchor[Zo],_o)),$n={href:gn.url.value,text:En("text"),target:En("target"),rel:En("rel"),class:En("linkClass"),title:En("title")},Xn={href:gn.url.value,attach:void 0!==gn.url.meta&&gn.url.meta.attach?gn.url.meta.attach:X};var Zo,_o;(Zo=yn,_o=$n,de([ho,vn(Re(Zo),Pe(Zo))],Er=>Er(_o)).fold(()=>Promise.resolve(_o),Er=>new Promise(Kr=>{((li,Nc,po)=>{const ys=li.selection.getRng();vs.setEditorTimeout(li,()=>{li.windowManager.confirm(Nc,bs=>{li.selection.setRng(ys),(li=>{Kr(li?Er.preprocess(_o):_o)})(bs)})})})(Zo,Er.message)}))).then(Zo=>{Tt(yn,Xn,Zo)}),Rt.close()}),dt)}).then(lt=>{dt.windowManager.open(lt)})};var ji=tinymce.util.Tools.resolve("tinymce.util.VK");const fd=(dt,je)=>{if(je){const Nt=_n(je);if(/^#/.test(Nt)){const yn=dt.dom.select(`${Nt},[name="${lt=Nt,Ft=lt,(gn=Ft).length>="#".length&&"#"===gn.substr(0,0+"#".length)?((Ft,Rt)=>Ft.substring(1))(lt):lt}"]`);yn.length&&dt.selection.scrollIntoView(yn[0],!0)}else(yn=>{const Ft=document.createElement("a");Ft.target="_blank",Ft.href=yn,Ft.rel="noreferrer noopener";const Rt=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(Rt),((gn,En)=>{document.body.appendChild(gn),gn.dispatchEvent(En),document.body.removeChild(gn)})(Ft,Rt)})(je.href)}var Ft,gn,lt},Ec=(dt,je)=>{const lt=Ao(dt.dom.getParents(je));return ae(1===lt.length,lt[0])},si=dt=>dt.selection.isCollapsed()||(je=>{const lt=je.selection.getRng(),Nt=lt.startContainer;return xi(Nt)&&lt.startContainer===lt.endContainer&&1===je.dom.select("img",Nt).length})(dt)?Ec(dt,dt.selection.getStart()):(je=>{const lt=dn(je.selection.getRng());return ae(lt.length>0,lt[0]).or(Ec(je,je.selection.getNode()))})(dt),vd=dt=>()=>{dt.execCommand("mceLink",!1,{dialog:!0})},Al=(dt,je)=>(dt.on("NodeChange",je),()=>dt.off("NodeChange",je)),el=dt=>je=>{const lt=()=>{je.setActive(!dt.mode.isReadOnly()&&uo(dt,dt.selection.getNode())),je.setEnabled(dt.selection.isEditable())};return lt(),Al(dt,lt)},Fu=dt=>je=>{const lt=()=>{je.setEnabled(dt.selection.isEditable())};return lt(),Al(dt,lt)},os=dt=>je=>{const lt=dt.dom.getParents(dt.selection.getStart()),Nt=yn=>{var Rt;je.setEnabled((Oo(yn)||(Rt=dt.selection.getRng(),dn(Rt).length>0))&&dt.selection.isEditable())};return Nt(lt),Al(dt,yn=>Nt(yn.parents))};Xe.add("link",dt=>{var je;(je=>{const lt=je.options.register;lt("link_assume_external_targets",{processor:Nt=>{const yn=Oe(Nt)||q(Nt);return yn?!0===Nt?{value:1,valid:yn}:"http"===Nt||"https"===Nt?{value:Nt,valid:yn}:{value:0,valid:yn}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),lt("link_context_toolbar",{processor:"boolean",default:!1}),lt("link_list",{processor:Nt=>Oe(Nt)||ne(Nt)||$(Nt,Ve)}),lt("link_default_target",{processor:"string"}),lt("link_default_protocol",{processor:"string",default:"https"}),lt("link_target_list",{processor:Nt=>q(Nt)||$(Nt,Ve),default:!0}),lt("link_rel_list",{processor:"object[]",default:[]}),lt("link_class_list",{processor:"object[]",default:[]}),lt("link_title",{processor:"boolean",default:!0}),lt("allow_unsafe_link_target",{processor:"boolean",default:!1}),lt("link_quicklink",{processor:"boolean",default:!1})})(dt),(je=dt).addCommand("mceLink",(lt,Nt)=>{!0!==Nt?.dialog&&rt(je)?je.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):Jd(je)}),(dt=>{const je=(lt=>{const Nt=(()=>{const Ft=(Rt=>{const gn=($n=>{let Xn=$n;return{get:()=>Xn,set:Zo=>{Xn=Zo}}})(W.none()),En=()=>gn.get().each(Rt);return{clear:()=>{En(),gn.set(W.none())},isSet:()=>gn.get().isSome(),get:()=>gn.get(),set:$n=>{En(),gn.set(W.some($n))}}})(X);return{...Ft,on:Rt=>Ft.get().each(Rt)}})(),yn=()=>Nt.get().or(si(lt));return lt.on("contextmenu",Ft=>{Ec(lt,Ft.target).each(Nt.set)}),lt.on("SelectionChange",()=>{Nt.isSet()||si(lt).each(Nt.set)}),lt.on("click",Ft=>{Nt.clear();const Rt=Ao(lt.dom.getParents(Ft.target));1===Rt.length&&ji.metaKeyPressed(Ft)&&(Ft.preventDefault(),fd(lt,Rt[0]))}),lt.on("keydown",Ft=>{var Rt;Nt.clear(),!Ft.isDefaultPrevented()&&13===Ft.keyCode&&!0===(Rt=Ft).altKey&&!1===Rt.shiftKey&&!1===Rt.ctrlKey&&!1===Rt.metaKey&&yn().each(Rt=>{Ft.preventDefault(),fd(lt,Rt)})}),{gotoSelectedLink:()=>yn().each(Ft=>fd(lt,Ft))}})(dt);var lt,Nt;Nt=je,(lt=dt).ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:vd(lt),onSetup:el(lt)}),lt.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Nt.gotoSelectedLink,onSetup:os(lt)}),lt.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>$t(lt),onSetup:os(lt)}),((lt,Nt)=>{lt.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Nt.gotoSelectedLink,onSetup:os(lt)}),lt.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:vd(lt),onSetup:Fu(lt)}),lt.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>$t(lt),onSetup:os(lt)})})(dt,je),(lt=>{lt.ui.registry.addContextMenu("link",{update:Nt=>lt.dom.isEditable(Nt)?Oo(lt.dom.getParents(Nt,"a"))?"link unlink openlink":"link":""})})(dt),((lt,Nt)=>{const yn=Ft=>{const Rt=lt.selection.getNode();return Ft.setEnabled(uo(lt,Rt)&&lt.selection.isEditable()),X};lt.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:el(lt)},label:"Link",predicate:Ft=>Ue(lt)&&uo(lt,Ft),initValue:()=>Qe(lt).fold(()=>"",_n),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Ft=>{const Rt=lt.selection.getNode();return Ft.setActive(uo(lt,Rt)),el(lt)(Ft)},onAction:Ft=>{const Rt=Ft.getValue(),gn=(En=>{const $n=Qe(lt),Xn=_i(lt);if($n.isNone()&&Xn){const Zo=Yn(lt.selection,$n);return ae(0===Zo.length,En)}return W.none()})(Rt);Tt(lt,{href:Rt,attach:X},{href:Rt,text:gn,title:W.none(),rel:W.none(),target:W.from(Me(lt)),class:W.none()}),lt.selection.collapse(!1),Ft.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:yn,onAction:Ft=>{$t(lt),Ft.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:yn,onAction:Ft=>{Nt.gotoSelectedLink(),Ft.hide()}}]})})(dt,je)})(dt),(je=>{je.addShortcut("Meta+K","",()=>{je.execCommand("mceLink")})})(dt)})}(),function(){"use strict";var Xe=tinymce.util.Tools.resolve("tinymce.PluginManager");const St=ge=>xe=>(be=>{const Le=typeof be;return null===be?"null":"object"===Le&&Array.isArray(be)?"array":"object"===Le&&(Ke=tt=be,(At=String).prototype.isPrototypeOf(Ke)||(null===(jt=tt.constructor)||void 0===jt?void 0:jt.name)===At.name)?"string":Le;var Ke,tt,At,jt})(xe)===ge,wn=ge=>xe=>typeof xe===ge,Oe=St("string"),Ve=St("array"),Q=wn("boolean"),se=ge=>void 0===ge,q=ge=>!(null==ge),j=wn("function"),ne=wn("number"),$=()=>{},X=ge=>()=>ge,Y=ge=>ge,W=(ge,xe)=>ge===xe;function U(ge,...xe){return(...be)=>{const Le=xe.concat(be);return ge.apply(null,Le)}}const K=ge=>{ge()},le=X(!1),de=X(!0);class pe{constructor(xe,be){this.tag=xe,this.value=be}static some(xe){return new pe(!0,xe)}static none(){return pe.singletonNone}fold(xe,be){return this.tag?be(this.value):xe()}isSome(){return this.tag}isNone(){return!this.tag}map(xe){return this.tag?pe.some(xe(this.value)):pe.none()}bind(xe){return this.tag?xe(this.value):pe.none()}exists(xe){return this.tag&&xe(this.value)}forall(xe){return!this.tag||xe(this.value)}filter(xe){return!this.tag||xe(this.value)?this:pe.none()}getOr(xe){return this.tag?this.value:xe}or(xe){return this.tag?this:xe}getOrThunk(xe){return this.tag?this.value:xe()}orThunk(xe){return this.tag?this:xe()}getOrDie(xe){if(this.tag)return this.value;throw new Error(xe??"Called getOrDie on None")}static from(xe){return q(xe)?pe.some(xe):pe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(xe){this.tag&&xe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}pe.singletonNone=new pe(!1);const _e=Object.keys,ae=Object.hasOwnProperty,Ge=(ge,xe)=>{const be=_e(ge);for(let Le=0,Ke=be.length;Le<Ke;Le++){const tt=be[Le];xe(ge[tt],tt)}},Re=(ge,xe)=>{const be={};var Le,tt,At,jt;return tt=xe,Le=be,At=(Ke,tt)=>{Le[tt]=Ke},jt=$,Ge(ge,(Lt,Vt)=>{(tt(Lt,Vt)?At:jt)(Lt,Vt)}),be},Ue=ge=>_e(ge).length,ve=(ge,xe)=>Me(ge,xe)?pe.from(ge[xe]):pe.none(),Me=(ge,xe)=>ae.call(ge,xe),Pe=(ge,xe)=>Me(ge,xe)&&null!=ge[xe],ee=Array.prototype.indexOf,Se=Array.prototype.push,F=(ge,xe)=>ee.call(ge,xe)>-1,We=(ge,xe)=>{for(let be=0,Le=ge.length;be<Le;be++)if(xe(ge[be],be))return!0;return!1},_t=(ge,xe)=>{const be=[];for(let Le=0;Le<ge;Le++)be.push(xe(Le));return be},rt=(ge,xe)=>{const be=ge.length,Le=new Array(be);for(let Ke=0;Ke<be;Ke++)Le[Ke]=xe(ge[Ke],Ke);return Le},wt=(ge,xe)=>{for(let be=0,Le=ge.length;be<Le;be++)xe(ge[be],be)},nt=(ge,xe)=>{const be=[];for(let Le=0,Ke=ge.length;Le<Ke;Le++){const tt=ge[Le];xe(tt,Le)&&be.push(tt)}return be},Bt=(ge,xe,be)=>(wt(ge,(Le,Ke)=>{be=xe(be,Le,Ke)}),be),Wt=(ge,xe)=>((be,Le,Ke)=>{for(let tt=0,At=be.length;tt<At;tt++){const jt=be[tt];if(Le(jt,tt))return pe.some(jt);if(Ke(jt,tt))break}return pe.none()})(ge,xe,le),ue=(ge,xe)=>(be=>{const Le=[];for(let Ke=0,tt=be.length;Ke<tt;++Ke){if(!Ve(be[Ke]))throw new Error("Arr.flatten item "+Ke+" was not an array, input: "+be);Se.apply(Le,be[Ke])}return Le})(rt(ge,xe)),Ct=(ge,xe)=>{for(let be=0,Le=ge.length;be<Le;++be)if(!0!==xe(ge[be],be))return!1;return!0},Gt=(ge,xe)=>xe>=0&&xe<ge.length?pe.some(ge[xe]):pe.none(),xi=(ge,xe)=>{for(let be=0;be<ge.length;be++){const Le=xe(ge[be],be);if(Le.isSome())return Le}return pe.none()},to=ge=>{if(null==ge)throw new Error("Node cannot be null or undefined");return{dom:ge}},Jt={fromHtml:(ge,xe)=>{const be=(xe||document).createElement("div");if(be.innerHTML=ge,!be.hasChildNodes()||be.childNodes.length>1){const Le="HTML does not have a single root node";throw console.error(Le,ge),new Error(Le)}return to(be.childNodes[0])},fromTag:(ge,xe)=>{const be=(xe||document).createElement(ge);return to(be)},fromText:(ge,xe)=>{const be=(xe||document).createTextNode(ge);return to(be)},fromDom:to,fromPoint:(ge,xe,be)=>pe.from(ge.dom.elementFromPoint(xe,be)).map(to)},_n=(ge,xe)=>{const be=ge.dom;if(1!==be.nodeType)return!1;{const Le=be;if(void 0!==Le.matches)return Le.matches(xe);if(void 0!==Le.msMatchesSelector)return Le.msMatchesSelector(xe);if(void 0!==Le.webkitMatchesSelector)return Le.webkitMatchesSelector(xe);if(void 0!==Le.mozMatchesSelector)return Le.mozMatchesSelector(xe);throw new Error("Browser lacks native selectors")}},hn=ge=>1!==ge.nodeType&&9!==ge.nodeType&&11!==ge.nodeType||0===ge.childElementCount,Qe=(ge,xe)=>ge.dom===xe.dom,uo=_n;typeof window<"u"||Function("return this;")();const Yn=ge=>ge.dom.nodeName.toLowerCase(),dn=ge=>ge.dom.nodeType,Ao=ge=>xe=>dn(xe)===ge,Oo=Ao(1),_i=Ao(3),Qo=Ao(9),ft=Ao(11),pt=ge=>xe=>Oo(xe)&&Yn(xe)===ge,Tt=ge=>pe.from(ge.dom.parentNode).map(Jt.fromDom),$t=ge=>pe.from(ge.dom.nextSibling).map(Jt.fromDom),tn=ge=>rt(ge.dom.childNodes,Jt.fromDom),on=ge=>Jt.fromDom(ge.dom.host),Sn=ge=>{const xe=_i(ge)?ge.dom.parentNode:ge.dom;if(null==xe||null===xe.ownerDocument)return!1;const be=xe.ownerDocument;return(tt=>{const At=Jt.fromDom(tt.dom.getRootNode());var jt;return ft(jt=At)&&q(jt.dom.host)?pe.some(At):pe.none()})(Jt.fromDom(xe)).fold(()=>be.body.contains(xe),(Le=Sn,Ke=on,tt=>Le(Ke(tt))));var Le,Ke};var no=(ge,xe,be,Le,Ke)=>ge(be,Le)?pe.some(be):j(Ke)&&Ke(be)?pe.none():xe(be,Le,Ke);const ao=(ge,xe,be)=>{let Le=ge.dom;const Ke=j(be)?be:le;for(;Le.parentNode;){Le=Le.parentNode;const tt=Jt.fromDom(Le);if(xe(tt))return pe.some(tt);if(Ke(tt))break}return pe.none()},Rn=(ge,xe,be)=>ao(ge,Le=>_n(Le,xe),be),Go=(ge,xe)=>((be,Le)=>{const Ke=void 0===Le?document:Le.dom;return hn(Ke)?pe.none():pe.from(Ke.querySelector(be)).map(Jt.fromDom)})(xe,ge),Si=(ge,xe,be)=>no((Le,Ke)=>_n(Le,Ke),Rn,ge,xe,be),Ds=(ge,xe=!1)=>{return Sn(ge)?ge.dom.isContentEditable:(be=ge,Si(be,"[contenteditable]")).fold(X(xe),Le=>"true"===Ur(Le));var be},Ur=ge=>ge.dom.contentEditable,vs=ge=>xe=>Qe(xe,Jt.fromDom(ge.getBody())),ho=ge=>/^\d+(\.\d+)?$/.test(ge)?ge+"px":ge,vn=ge=>Jt.fromDom(ge.selection.getStart()),bo=(ge,xe)=>{let be=[];return wt(tn(ge),Le=>{xe(Le)&&(be=be.concat([Le])),be=be.concat(bo(Le,xe))}),be},Br=(ge,xe)=>nt(tn(ge),Ke=>_n(Ke,xe)),Ma=(ge,xe)=>((be,Le)=>{const Ke=void 0===Le?document:Le.dom;return hn(Ke)?[]:rt(Ke.querySelectorAll(be),Jt.fromDom)})(xe,ge),pa=(ge,xe,be)=>{if(!(Oe(be)||Q(be)||ne(be)))throw console.error("Invalid call to Attribute.set. Key ",xe,":: Value ",be,":: Element ",ge),new Error("Attribute value was not simple");ge.setAttribute(xe,be+"")},Ml=(ge,xe)=>{const be=ge.dom.getAttribute(xe);return null===be?void 0:be},ir=(ge,xe)=>pe.from(Ml(ge,xe)),go=(ge,xe)=>{ge.dom.removeAttribute(xe)},Ln=(ge,xe,be=W)=>ge.exists(Le=>be(Le,xe)),Jd=(ge,xe,be)=>ge.isSome()&&xe.isSome()?pe.some(be(ge.getOrDie(),xe.getOrDie())):pe.none(),ji=(ge,xe)=>{return be=ge,""===(Le=xe)||be.length>=Le.length&&be.substr(0,0+Le.length)===Le;var be,Le},fd=(Ec=/^\s+|\s+$/g,ge=>ge.replace(Ec,""));var Ec;const si=ge=>ge.length>0,vd=(ge,xe=10)=>{const be=parseInt(ge,xe);return isNaN(be)?pe.none():pe.some(be)},Al=ge=>void 0!==ge.style&&j(ge.style.getPropertyValue),el=(ge,xe)=>{const be=ge.dom,Le=window.getComputedStyle(be).getPropertyValue(xe);return""!==Le||Sn(ge)?Le:Fu(be,xe)},Fu=(ge,xe)=>Al(ge)?ge.style.getPropertyValue(xe):"",os=(ge,xe)=>{const Le=Fu(ge.dom,xe);return pe.from(Le).filter(Ke=>Ke.length>0)},ma=(ge,xe,be=0)=>ir(ge,xe).map(Le=>parseInt(Le,10)).getOr(be),dt=(ge,xe)=>je(ge,xe,de),je=(ge,xe,be)=>ue(tn(ge),Le=>_n(Le,xe)?be(Le)?[Le]:[]:je(Le,xe,be)),lt=["tfoot","thead","tbody","colgroup"],Nt=(ge,xe,be)=>({element:ge,rowspan:xe,colspan:be}),yn=(ge,xe,be)=>({element:ge,cells:xe,section:be}),Ft=(ge,xe)=>Si(ge,"table",xe),Rt=ge=>dt(ge,"tr"),gn=ge=>Ft(ge).fold(X([]),xe=>Br(xe,"colgroup")),En=ge=>Tt(ge).map(xe=>{const be=Yn(xe);return F(lt,be)?be:"tbody"}).getOr("tbody"),$n=ge=>ir(ge,"data-snooker-locked-cols").bind(xe=>pe.from(xe.match(/\d+/g))).map(xe=>((be,Le)=>{const Ke={};for(let tt=0,At=be.length;tt<At;tt++){const jt=be[tt];Ke[String(jt)]=Le(jt,tt)}return Ke})(xe,de)),Xn=(ge,xe)=>ge+","+xe,_o=ge=>(ge=>{const xe={},be=[];var Le;const Ke=(Le=ge,Gt(Le,0)).map(Vn=>Vn.element).bind(Ft).bind($n).getOr({});let tt=0,At=0,jt=0;const{pass:Lt,fail:Vt}=((Vn,oo)=>{const Bo=[],fn=[];for(let lo=0,xo=Vn.length;lo<xo;lo++){const zo=Vn[lo];(Et=zo,"colgroup"===Et.section?Bo:fn).push(zo)}var Et;return{pass:Bo,fail:fn}})(ge);wt(Vt,Vn=>{const oo=[];wt(Vn.cells,Bo=>{let fn=0;for(;void 0!==xe[Xn(jt,fn)];)fn++;const Et=Pe(Ke,fn.toString()),lo={element:Bo.element,rowspan:Bo.rowspan,colspan:Bo.colspan,row:jt,column:fn,isLocked:Et};for(let xo=0;xo<Bo.colspan;xo++)for(let zo=0;zo<Bo.rowspan;zo++){const jo=fn+xo,dr=Xn(jt+zo,jo);xe[dr]=lo,At=Math.max(At,jo+1)}oo.push(lo)}),tt++,be.push(yn(Vn.element,oo,Vn.section)),jt++});const{columns:ln,colgroups:xn}=(Vn=Lt,Gt(Vn,Vn.length-1)).map(Vn=>{const oo=(fn=>{const Et={};let lo=0;return wt(fn.cells,xo=>{const zo=xo.colspan;_t(zo,jo=>{const dr=lo+jo;Et[dr]={element:xo.element,colspan:zo,column:dr}}),lo+=zo}),Et})(Vn);return{colgroups:[(fn=Vn.element,Et=((fn,Et)=>{const lo=[];return Ge(fn,(xo,zo)=>{lo.push(Et(xo,zo))}),lo})(oo,Y),{element:fn,columns:Et})],columns:oo};var fn,Et}).getOrThunk(()=>({colgroups:[],columns:{}}));var Vn;return{grid:((Vn,oo)=>({rows:Vn,columns:oo}))(tt,At),access:xe,all:be,columns:ln,colgroups:xn}})((be=>{const Le=Rt(be);return Ke=[...gn(be),...Le],tt=En,rt(Ke,At=>{if("colgroup"===Yn(At)){const jt=rt(_n(Lt=At,"colgroup")?Br(Lt,"col"):ue(gn(Lt),Vt=>Br(Vt,"col")),Lt=>{const Vt=ma(Lt,"span",1);return Nt(Lt,1,Vt)});return yn(At,jt,"colgroup")}var Lt;{const jt=rt((Lt=>dt(Lt,"th,td"))(At),Lt=>{const Vt=ma(Lt,"rowspan",1),ln=ma(Lt,"colspan",1);return Nt(Lt,Vt,ln)});return yn(At,jt,tt(At))}});var Ke,tt})(ge)),Er=(ge,xe,be)=>pe.from(ge.access[Xn(xe,be)]),Kr=(ge,xe,be)=>{const Le=((Ke,tt)=>{const At=ue(Ke.all,jt=>jt.cells);return nt(At,Ke=>be(xe,Ke.element))})(ge);return Le.length>0?pe.some(Le[0]):pe.none()},li=(ge,xe)=>pe.from(ge.columns[xe]);var Nc=tinymce.util.Tools.resolve("tinymce.util.Tools");const po=(ge,xe,be)=>{const Le=ge.select("td,th",xe);let Ke;for(let tt=0;tt<Le.length;tt++){const At=ge.getStyle(Le[tt],be);if(se(Ke)&&(Ke=At),Ke!==At)return""}return Ke},ys=(ge,xe,be)=>{Nc.each("left center right".split(" "),Le=>{Le!==be&&ge.formatter.remove("align"+Le,{},xe)}),be&&ge.formatter.apply("align"+be,{},xe)},bs=(ge,xe,be)=>{ge.dispatch("TableModified",{...be,table:xe})},Qd=(ge,xe,be)=>{return Ke=be,(tt=>{const At=parseFloat(tt);return isNaN(At)?pe.none():pe.some(At)})(el(ge,xe)).getOr(Ke);var Ke};var am=tinymce.util.Tools.resolve("tinymce.Env");const Ii=_t(5,ge=>{const xe=`${ge+1}px`;return{title:xe,value:xe}}),tl=rt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],ge=>({title:ge,value:ge.toLowerCase()})),Aa=ge=>{var xe;const be=ge.dom,Le=null!==(xe=be.getParent(ge.selection.getStart(),be.isBlock))&&void 0!==xe?xe:ge.getBody();return(ge=>((xe,be)=>{const Le=xe.dom;return(Le.getBoundingClientRect().width||Le.offsetWidth)-Qd(tt=xe,"padding-left",0)-Qd(tt,"padding-right",0)-Qd(tt,"border-left-width",0)-Qd(tt,"border-right-width",0);var tt})(ge))(Jt.fromDom(Le))+"px"},zr=ge=>xe=>xe.options.get(ge),Rc=zr("table_sizing_mode"),Rh=zr("table_border_widths"),Lh=zr("table_border_styles"),Bg=zr("table_cell_advtab"),Ia=zr("table_row_advtab"),Il=zr("table_advtab"),eu=zr("table_appearance_options"),tc=zr("table_grid"),Jr=zr("table_style_by_css"),Os=zr("table_cell_class_list"),sm=zr("table_row_class_list"),lm=zr("table_class_list"),Pn=zr("table_toolbar"),Dl=zr("table_background_color_map"),qi=zr("table_border_color_map"),mi=ge=>"fixed"===Rc(ge),Ol=ge=>"responsive"===Rc(ge),tr=ge=>{const xe=ge.options,be=xe.get("table_default_styles");return xe.isSet("table_default_styles")?be:(Ke=be,Ol(Le=ge)||!Jr(Le)?Ke:mi(Le)?{...Ke,width:Aa(Le)}:{...Ke,width:"100%"});var Le,Ke},Lc=ge=>{const xe=ge.options,be=xe.get("table_default_attributes");return xe.isSet("table_default_attributes")?be:(Ke=be,Ol(Le=ge)||Jr(Le)?Ke:mi(Le)?{...Ke,width:Aa(Le)}:{...Ke,width:"100%"});var Le,Ke},L1=(ge,xe)=>xe.column>=ge.startCol&&xe.column+xe.colspan-1<=ge.finishCol&&xe.row>=ge.startRow&&xe.row+xe.rowspan-1<=ge.finishRow,yd=_o,Vu=(ge,xe)=>{Tt(ge).each(be=>{be.dom.insertBefore(xe.dom,ge.dom)})},Di=(ge,xe)=>{$t(ge).fold(()=>{Tt(ge).each(be=>{zt(be,xe)})},be=>{Vu(be,xe)})},zt=(ge,xe)=>{ge.dom.appendChild(xe.dom)},kr=(ge,xe)=>{wt(xe,(be,Le)=>{Di(0===Le?ge:xe[Le-1],be)})},El=ge=>{const xe=ge.dom;null!==xe.parentNode&&xe.parentNode.removeChild(xe)},ea=((ge,xe)=>{const be=Le=>ge(Le)?pe.from(Le.dom.nodeValue):pe.none();return{get:Le=>{if(!ge(Le))throw new Error("Can only get text value of a text node");return be(Le).getOr("")},getOption:be,set:(Le,Ke)=>{if(!ge(Le))throw new Error("Can only set raw text value of a text node");Le.dom.nodeValue=Ke}}})(_i);var No=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const Bh=(ge,xe,be)=>xe.bind(Le=>be.filter(U(ge.eq,Le))),nl={up:X({selector:Rn,closest:Si,predicate:ao,all:(ge,xe)=>{const be=j(xe)?xe:le;let Le=ge.dom;const Ke=[];for(;null!=Le.parentNode;){const tt=Le.parentNode,At=Jt.fromDom(tt);if(Ke.push(At),!0===be(At))break;Le=tt}return Ke}}),down:X({selector:Ma,predicate:bo}),styles:X({get:el,getRaw:os,set:(ge,xe,be)=>{((Le,Ke,tt)=>{if(!Oe(tt))throw console.error("Invalid call to CSS.set. Property ",Ke,":: Value ",tt,":: Element ",Le),new Error("CSS value must be a string: "+tt);Al(Le)&&Le.style.setProperty(Ke,tt)})(ge.dom,xe,be)},remove:(ge,xe)=>{var be,Le;Le=xe,Al(be=ge.dom)&&be.style.removeProperty(Le),Ln(ir(ge,"style").map(fd),"")&&go(ge,"style")}}),attrs:X({get:Ml,set:(ge,xe,be)=>{pa(ge.dom,xe,be)},remove:go,copyTo:(ge,xe)=>{((be,Le)=>{const Ke=be.dom;Ge(Le,(tt,At)=>{pa(Ke,At,tt)})})(xe,Bt(ge.dom.attributes,(be,Le)=>(be[Le.name]=Le.value,be),{}))}}),insert:X({before:Vu,after:Di,afterAll:kr,append:zt,appendAll:(ge,xe)=>{wt(xe,be=>{zt(ge,be)})},prepend:(ge,xe)=>{var be;(be=ge,pe.from(be.dom.childNodes[0]).map(Jt.fromDom)).fold(()=>{zt(ge,xe)},be=>{ge.dom.insertBefore(xe.dom,be.dom)})},wrap:(ge,xe)=>{Vu(ge,xe),zt(xe,ge)}}),remove:X({unwrap:ge=>{const xe=tn(ge);xe.length>0&&kr(ge,xe),El(ge)},remove:El}),create:X({nu:Jt.fromTag,clone:ge=>Jt.fromDom(ge.dom.cloneNode(!1)),text:Jt.fromText}),query:X({comparePosition:(ge,xe)=>ge.dom.compareDocumentPosition(xe.dom),prevSibling:ge=>pe.from(ge.dom.previousSibling).map(Jt.fromDom),nextSibling:$t}),property:X({children:tn,name:Yn,parent:Tt,document:ge=>{return(xe=ge,Qo(xe)?xe:Jt.fromDom(xe.dom.ownerDocument)).dom;var xe},isText:_i,isComment:ge=>8===dn(ge)||"#comment"===Yn(ge),isElement:Oo,isSpecial:ge=>{const xe=Yn(ge);return F(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],xe)},getLanguage:ge=>Oo(ge)?ir(ge,"lang"):pe.none(),getText:ge=>ea.get(ge),setText:(ge,xe)=>ea.set(ge,xe),isBoundary:ge=>!!Oo(ge)&&("body"===Yn(ge)||F(No,Yn(ge))),isEmptyTag:ge=>!!Oo(ge)&&F(["br","img","hr","input"],Yn(ge)),isNonEditable:ge=>Oo(ge)&&"false"===Ml(ge,"contenteditable")}),eq:Qe,is:uo},Pi=ge=>Rn(ge,"table"),mo=(ge,xe,be)=>Go(ge,xe).bind(Le=>Go(ge,be).bind(Ke=>{return(tt=Pi,At=[Le,Ke],jt=nl,Vt=At,Vt.length>0?(xn=(jt,Lt)=>tt(Lt),((ge,xe,be,Le)=>{const Ke=xe(ge,be);return tt=(jt,Lt)=>{const Vt=xe(ge,Lt);return Bh(ge,jt,Vt)},At=Ke,((jt,Lt)=>{for(let Vt=jt.length-1;Vt>=0;Vt--)Lt(jt[Vt])})(Le,(jt,Lt)=>{At=tt(At,jt)}),At;var tt,At})(jt,xn,(Po=Vt)[0],Po.slice(1))):pe.none()).map(jt=>({first:Le,last:Ke,table:jt}));var jt,Vt,xn,Po,tt,At})),zg=ge=>rt(ge,Jt.fromDom),nr="data-mce-selected",Hu="data-mce-first-selected",ci="data-mce-last-selected",fa={selected:nr,selectedSelector:"td["+nr+"],th["+nr+"]",firstSelected:Hu,firstSelectedSelector:"td["+Hu+"],th["+Hu+"]",lastSelected:ci,lastSelectedSelector:"td["+ci+"],th["+ci+"]"},tu=ge=>(xe,be)=>{const Le=Yn(xe),Ke="col"===Le||"colgroup"===Le?Ft(tt=xe).bind(At=>((Vt,ln)=>{const xn=Ma(Vt,ln);return xn.length>0?pe.some(xn):pe.none()})(At,fa.firstSelectedSelector)).fold(X(tt),At=>At[0]):xe;var tt;return Si(Ke,ge,be)},Ua=tu("th,td,caption"),rs=tu("th,td"),bd=ge=>zg(ge.model.table.getSelectedCells()),nc=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],is=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Pc=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Wu=ge=>{return(xe=ge,ji(xe,"#")?(be=xe,be.substring(1)):xe).toUpperCase();var be,xe},Gr=ge=>{const xe=ge.toString(16);return(1===xe.length?"0"+xe:xe).toUpperCase()},Mv=ge=>{return xe=Gr(ge.red)+Gr(ge.green)+Gr(ge.blue),{value:Wu(xe)};var xe},P1=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Fg=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,cm=(ge,xe,be,Le)=>({red:ge,green:xe,blue:be,alpha:Le}),Wy=(ge,xe,be,Le)=>{const Ke=parseInt(ge,10),tt=parseInt(xe,10),At=parseInt(be,10),jt=parseFloat(Le);return cm(Ke,tt,At,jt)},Av=ge=>{const xe=P1.exec(ge);if(null!==xe)return pe.some(Wy(xe[1],xe[2],xe[3],"1"));const be=Fg.exec(ge);return null!==be?pe.some(Wy(be[1],be[2],be[3],be[4])):pe.none()},Uu=ge=>{let xe=ge;return{get:()=>xe,set:be=>{xe=be}}},Iv=(ge,xe,be)=>Le=>{const Ke=(jt=>{const Lt=Uu(pe.none()),Vt=()=>Lt.get().each(jt);return{clear:()=>{Vt(),Lt.set(pe.none())},isSet:()=>Lt.get().isSome(),get:()=>Lt.get(),set:ln=>{Vt(),Lt.set(pe.some(ln))}}})(jt=>jt.unbind()),tt=!si(be),At=()=>{const jt=bd(ge),Lt=Vt=>ge.formatter.match(xe,{value:be},Vt.dom,tt);tt?(Le.setActive(!We(jt,Lt)),Ke.set(ge.formatter.formatChanged(xe,Vt=>Le.setActive(!Vt),!0))):(Le.setActive(Ct(jt,Lt)),Ke.set(ge.formatter.formatChanged(xe,Le.setActive,!1,{value:be})))};return ge.initialized?At():ge.on("init",At),Ke.clear},Gu=ge=>Pe(ge,"menu"),zh=ge=>rt(ge,xe=>{const be=xe.text||xe.title||"";return Gu(xe)?{text:be,items:zh(xe.menu)}:{text:be,value:xe.value}}),Vg=ge=>ge.length?pe.some(zh([{text:"Select...",value:"mce-no-match"},...ge])):pe.none(),Nl=(ge,xe,be,Le)=>rt(xe,Ke=>{const tt=Ke.text||Ke.title;return Gu(Ke)?{type:"nestedmenuitem",text:tt,getSubmenuItems:()=>Nl(ge,Ke.menu,be,Le)}:{text:tt,type:"togglemenuitem",onAction:()=>Le(Ke.value),onSetup:Iv(ge,be,Ke.value)}}),yr=(ge,xe)=>be=>{ge.execCommand("mceTableApplyCellStyle",!1,{[xe]:be})},Bc=ge=>ue(ge,xe=>Gu(xe)?[{...xe,menu:Bc(xe.menu)}]:si(xe.value)?[xe]:[]),Ze=(ge,xe,be,Le)=>Ke=>Ke(Nl(ge,xe,be,Le)),oc=(ge,xe,be)=>{const Le=rt(xe,Ke=>{return{text:Ke.title,value:"#"+(At=Ke.value,(tt=At,jt=tt,is.test(jt)||Pc.test(jt)?pe.some({value:Wu(tt)}):pe.none()).orThunk(()=>Av(At).map(Mv)).getOrThunk(()=>{const jt=document.createElement("canvas");jt.height=1,jt.width=1;const Lt=jt.getContext("2d");Lt.clearRect(0,0,jt.width,jt.height),Lt.fillStyle="#FFFFFF",Lt.fillStyle=At,Lt.fillRect(0,0,1,1);const Vt=Lt.getImageData(0,0,1,1).data;return Mv(cm(Vt[0],Vt[1],Vt[2],Vt[3]))})).value,type:"choiceitem"};var jt,tt,At});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:Le.length>0?Le:void 0,allowCustomColors:!1},onAction:Ke=>{ge.execCommand("mceTableApplyCellStyle",!1,{[be]:"remove"===Ke.value?"":Ke.value})}}]},zc=ge=>()=>{const xe="header"===ge.queryCommandValue("mceTableRowType")?"body":"header";ge.execCommand("mceTableRowType",!1,{type:xe})},va=ge=>()=>{const xe="th"===ge.queryCommandValue("mceTableColType")?"td":"th";ge.execCommand("mceTableColType",!1,{type:xe})},xd=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:nc}],To=ge=>{return xd.concat((xe=ge,Vg(Os(xe)).map(be=>({name:"class",type:"listbox",label:"Class",items:be}))).toArray());var xe},Es=(ge,xe)=>{const be=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(zh(Lh(ge)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===xe?[{name:"borderwidth",type:"input",label:"Border width"}].concat(be):be}},Hg=(ge,xe)=>{const be=ge.dom;return{setAttrib:(Le,Ke)=>{be.setAttrib(xe,Le,Ke)},setStyle:(Le,Ke)=>{be.setStyle(xe,Le,Ke)},setFormat:(Le,Ke)=>{""===Ke?ge.formatter.remove(Le,{value:null},xe,!0):ge.formatter.apply(Le,{value:Ke},xe)}}},Fc=pt("th"),Ro=(ge,xe)=>ge&&xe?"sectionCells":ge?"section":"cells",Wg=(ge,xe)=>xi(ge.all,be=>Wt(be.cells,Le=>Qe(xe,Le.element))),nu=(ge,xe)=>((ge,xe,be)=>{const Le=(tt=>{const At=[],jt=Lt=>{At.push(Lt)};for(let Lt=0;Lt<tt.length;Lt++)tt[Lt].each(jt);return At})(rt(xe.selection,tt=>{return(At=tt,((Lt,Vt,ln=le)=>ln(Vt)?pe.none():F(Lt,Yn(Vt))?pe.some(Vt):Rn(Vt,Lt.join(","),xn=>_n(xn,"table")||ln(xn)))(["td","th"],At,void 0)).bind(Lt=>Wg(ge,Lt)).filter(be);var At}));return Le.length>0?pe.some(Le):pe.none()})(ge,xe,de),_d=(ge,xe)=>Ct(xe,be=>Wg(ge,be).exists(tt=>!tt.isLocked)),Uy=(ge,xe)=>{return(Le=xe,Le.mergable).filter(be=>_d(ge,be.cells));var Le},Gy=(ge,xe)=>{return(Le=xe,Le.unmergable).filter(be=>_d(ge,be));var Le},Qr=((ge=>{if(!Ve(ge))throw new Error("cases must be an array");if(0===ge.length)throw new Error("there must be at least one case");const xe=[],be={};wt(ge,(Le,Ke)=>{const tt=_e(Le);if(1!==tt.length)throw new Error("one and only one name per case");const At=tt[0],jt=Le[At];if(void 0!==be[At])throw new Error("duplicate key detected:"+At);if("cata"===At)throw new Error("cannot have a case named cata (sorry)");if(!Ve(jt))throw new Error("case arguments must be an array");xe.push(At),be[At]=(...Lt)=>{const Vt=Lt.length;if(Vt!==jt.length)throw new Error("Wrong number of arguments to case "+At+". Expected "+jt.length+" ("+jt+"), got "+Vt);return{fold:(...ln)=>{if(ln.length!==ge.length)throw new Error("Wrong number of arguments to fold. Expected "+ge.length+", got "+ln.length);return ln[Ke].apply(null,Lt)},match:ln=>{const xn=_e(ln);if(xe.length!==xn.length)throw new Error("Wrong number of arguments to match. Expected: "+xe.join(",")+"\nActual: "+xn.join(","));if(!Ct(xe,Po=>F(xn,Po)))throw new Error("Not all branches were specified when using match. Specified: "+xn.join(", ")+"\nRequired: "+xe.join(", "));return ln[At].apply(null,Lt)},log:ln=>{console.log(ln,{constructors:xe,constructor:At,params:Lt})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(ge,xe)=>{const be=_o(ge);return nu(be,xe).bind(Le=>{const Ke=Le[Le.length-1];return(ge=>{const xe=rt(ge,Ke=>(tt=>{const At="thead"===tt.section,jt=Ln((Lt=>{const Vt=nt(Lt,ln=>Fc(ln.element));return 0===Vt.length?pe.some("td"):Vt.length===Lt.length?pe.some("th"):pe.none()})(tt.cells),"th");return"tfoot"===tt.section?{type:"footer"}:At||jt?{type:"header",subType:Ro(At,jt)}:{type:"body"}})(Ke).type),be=F(xe,"header"),Le=F(xe,"footer");if(be||Le){const Ke=F(xe,"body");return!be||Ke||Le?be||Ke||!Le?pe.none():pe.some("footer"):pe.some("header")}return pe.some("body")})(be.all.slice(Le[0].row,Ke.row+Ke.rowspan))}).getOr("")}),rc=ge=>{return ji(ge,"rgb")?Av(xe=ge).map(Mv).map(be=>"#"+be.value).getOr(xe):ge;var xe},Fh=ge=>{const xe=Jt.fromDom(ge);return{borderwidth:os(xe,"border-width").getOr(""),borderstyle:os(xe,"border-style").getOr(""),bordercolor:os(xe,"border-color").map(rc).getOr(""),backgroundcolor:os(xe,"background-color").map(rc).getOr("")}},Rl=ge=>{const xe=ge[0],be=ge.slice(1);return wt(be,Le=>{wt(_e(xe),Ke=>{Ge(Le,(tt,At)=>{const jt=xe[Ke];""!==jt&&Ke===At&&jt!==tt&&(xe[Ke]="class"===Ke?"mce-no-match":"")})})}),xe},xs=(ge,xe,be,Le)=>Wt(ge,Ke=>!se(be.formatter.matchNode(Le,xe+Ke))).getOr(""),ju=U(xs,["left","center","right"],"align"),Ns=U(xs,["top","middle","bottom"],"valign"),Gg=ge=>Ft(Jt.fromDom(ge)).map(xe=>{const be={selection:zg(ge.cells)};return Qr(xe,be)}).getOr(""),jg=(ge,xe)=>{const be=_o(ge),Le=ue(be.all,At=>At.cells),Ke=nt(Le,tt=>We(xe,At=>Qe(tt.element,At)));return rt(Ke,tt=>({element:tt.element.dom,column:li(be,tt.column).map(At=>At.element.dom)}))},ou=(ge,xe,be,Le)=>{const Ke=Le.getData();Le.close(),ge.undoManager.transact(()=>{((tt,At,jt,Lt)=>{const Vt=Re(Lt,(ln,xn)=>jt[xn]!==ln);Ue(Vt)>0&&At.length>=1&&Ft(At[0]).each(ln=>{const xn=jg(ln,At),Po=Ue(Re(Vt,(oo,Bo)=>"scope"!==Bo&&"celltype"!==Bo))>0,Vn=Me(Vt,"celltype");(Po||Me(Vt,"scope"))&&((oo,Bo,fn,Et)=>{const lo=1===Bo.length;wt(Bo,xo=>{const zo=xo.element,jo=lo?de:Et,dr=Hg(oo,zo);var ba,Ga,io,ac;ba=dr,Ga=xo.column.map(ba=>Hg(oo,ba)).getOr(dr),io=fn,(ac=jo)("scope")&&ba.setAttrib("scope",io.scope),ac("class")&&"mce-no-match"!==io.class&&ba.setAttrib("class",io.class),ac("width")&&Ga.setStyle("width",ho(io.width)),Bg(oo)&&((ba,Ga,io)=>{io("backgroundcolor")&&ba.setFormat("tablecellbackgroundcolor",Ga.backgroundcolor),io("bordercolor")&&ba.setFormat("tablecellbordercolor",Ga.bordercolor),io("borderstyle")&&ba.setFormat("tablecellborderstyle",Ga.borderstyle),io("borderwidth")&&ba.setFormat("tablecellborderwidth",ho(Ga.borderwidth))})(dr,fn,jo),Et("halign")&&ys(oo,zo,fn.halign),Et("valign")&&((ba,Ga,io)=>{Nc.each("top middle bottom".split(" "),ac=>{ac!==io&&ba.formatter.remove("valign"+ac,{},Ga)}),io&&ba.formatter.apply("valign"+io,{},Ga)})(oo,zo,fn.valign)})})(tt,xn,Lt,U(Me,Vt)),Vn&&tt.execCommand("mceTableCellType",!1,{type:Lt.celltype,no_events:!0}),bs(tt,ln.dom,{structure:Vn,style:Po})})})(ge,xe,be,Ke),ge.focus()})},gA=ge=>{const xe=bd(ge);if(0===xe.length)return;const be=((tt,At)=>{const jt=Ft(At[0]).map(Lt=>rt(jg(Lt,At),Vt=>((ln,xn,Po,Vn)=>{const oo=ln.dom;return{width:(fn=Vn.getOr(xn),oo.getStyle(fn,"width")||oo.getAttrib(fn,"width")),scope:oo.getAttrib(xn,"scope"),celltype:(Bo=xn,Bo.nodeName.toLowerCase()),class:oo.getAttrib(xn,"class",""),halign:ju(ln,xn),valign:Ns(ln,xn),...Po?Fh(xn):{}};var Bo,fn})(tt,Vt.element,Bg(tt),Vt.column)));return Rl(jt.getOrDie())})(ge,xe),Le={type:"tabpanel",tabs:[{title:"General",name:"general",items:To(ge)},Es(ge,"cell")]},Ke={type:"panel",items:[{type:"grid",columns:2,items:To(ge)}]};ge.windowManager.open({title:"Cell Properties",size:"normal",body:Bg(ge)?Le:Ke,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:be,onSubmit:U(ou,ge,xe,be)})},Vh=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Oi=ge=>{return Vh.concat((xe=ge,Vg(sm(xe)).map(be=>({name:"class",type:"listbox",label:"Class",items:be}))).toArray());var xe},Fr=(ge,xe,be,Le)=>{const Ke=Le.getData();Le.close(),ge.undoManager.transact(()=>{((tt,At,jt,Lt)=>{const Vt=Re(Lt,(ln,xn)=>jt[xn]!==ln);if(Ue(Vt)>0){const ln=Me(Vt,"type"),xn=!ln||Ue(Vt)>1;xn&&((Po,Vn,oo,Bo)=>{const fn=1===Vn.length?de:Bo;wt(Vn,Et=>{const lo=Br(Jt.fromDom(Et),"td,th"),xo=Hg(Po,Et);var zo,jo,dr;zo=xo,jo=oo,(dr=fn)("class")&&"mce-no-match"!==jo.class&&zo.setAttrib("class",jo.class),dr("height")&&zo.setStyle("height",ho(jo.height)),Ia(Po)&&((zo,jo,dr)=>{dr("backgroundcolor")&&zo.setStyle("background-color",jo.backgroundcolor),dr("bordercolor")&&zo.setStyle("border-color",jo.bordercolor),dr("borderstyle")&&zo.setStyle("border-style",jo.borderstyle)})(xo,oo,fn),Bo("height")&&wt(lo,zo=>{Po.dom.setStyle(zo.dom,"height",null)}),Bo("align")&&ys(Po,Et,oo.align)})})(tt,At,Lt,U(Me,Vt)),ln&&tt.execCommand("mceTableRowType",!1,{type:Lt.type,no_events:!0}),Ft(Jt.fromDom(At[0])).each(Po=>bs(tt,Po.dom,{structure:ln,style:xn}))}})(ge,xe,be,Ke),ge.focus()})},ol=ge=>{const xe=((ge,xe)=>{const be=rs(ge),Le=be.bind(Ke=>Ft(Ke)).map(Ke=>Rt(Ke));return Jd(be,Le,(Ke,tt)=>nt(tt,At=>We(zg(At.dom.cells),jt=>"1"===Ml(jt,xe)||Qe(jt,Ke)))).getOr([])})(vn(ge),fa.selected);if(0===xe.length)return;const be=rt(xe,At=>((jt,Lt,Vt)=>{const ln=jt.dom;return{height:ln.getStyle(Lt,"height")||ln.getAttrib(Lt,"height"),class:ln.getAttrib(Lt,"class",""),type:Gg(Lt),align:ju(jt,Lt),...Vt?Fh(Lt):{}}})(ge,At.dom,Ia(ge))),Le=Rl(be),Ke={type:"tabpanel",tabs:[{title:"General",name:"general",items:Oi(ge)},Es(ge,"row")]},tt={type:"panel",items:[{type:"grid",columns:2,items:Oi(ge)}]};ge.windowManager.open({title:"Row Properties",size:"normal",body:Ia(ge)?Ke:tt,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Le,onSubmit:U(Fr,ge,rt(xe,At=>At.dom),Le)})},qg=(ge,xe,be)=>{const Le=be?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],Ke=eu(ge)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],tt=xe.length>0?[{name:"class",type:"listbox",label:"Class",items:xe}]:[];return Le.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(Ke).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(tt)},$i=(ge,xe,be,Le)=>{if("TD"===xe.tagName||"TH"===xe.tagName)Oe(be)&&q(Le)?ge.setStyle(xe,be,Le):ge.setStyles(xe,be);else if(xe.children)for(let Ke=0;Ke<xe.children.length;Ke++)$i(ge,xe.children[Ke],be,Le)},kn=(ge,xe,be,Le)=>{const Ke=ge.dom,tt=Le.getData(),At=Re(tt,(jt,Lt)=>be[Lt]!==jt);Le.close(),ge.undoManager.transact(()=>{if(!xe){const jt=vd(tt.cols).getOr(1),Lt=vd(tt.rows).getOr(1);ge.execCommand("mceInsertTable",!1,{rows:Lt,columns:jt}),xe=rs(vn(ge),vs(ge)).bind(Vt=>Ft(Vt,vs(ge))).map(Vt=>Vt.dom).getOrDie()}if(Ue(At)>0){const jt={border:Me(At,"border"),bordercolor:Me(At,"bordercolor"),cellpadding:Me(At,"cellpadding")};((Vt,ln,xn,Po)=>{const Vn=Vt.dom,oo={},Bo={},fn=Jr(Vt),Et=Il(Vt),lo=0===parseFloat(xn.border);if(se(xn.class)||"mce-no-match"===xn.class||(oo.class=xn.class),Bo.height=ho(xn.height),fn?Bo.width=ho(xn.width):Vn.getAttrib(ln,"width")&&(oo.width=(xo=xn.width)?xo.replace(/px$/,""):""),fn?(lo?(oo.border=0,Bo["border-width"]=""):(Bo["border-width"]=ho(xn.border),oo.border=1),Bo["border-spacing"]=ho(xn.cellspacing)):(oo.border=lo?0:xn.border,oo.cellpadding=xn.cellpadding,oo.cellspacing=xn.cellspacing),fn&&ln.children){const xo={};if(lo?xo["border-width"]="":Po.border&&(xo["border-width"]=ho(xn.border)),Po.cellpadding&&(xo.padding=ho(xn.cellpadding)),Et&&Po.bordercolor&&(xo["border-color"]=xn.bordercolor),!(zo=>{for(const jo in zo)if(ae.call(zo,jo))return!1;return!0})(xo))for(let zo=0;zo<ln.children.length;zo++)$i(Vn,ln.children[zo],xo)}var xo;if(Et){const xo=xn;Bo["background-color"]=xo.backgroundcolor,Bo["border-color"]=xo.bordercolor,Bo["border-style"]=xo.borderstyle}Vn.setStyles(ln,{...tr(Vt),...Bo}),Vn.setAttribs(ln,{...Lc(Vt),...oo})})(ge,xe,tt,jt);const Lt=Ke.select("caption",xe)[0];(Lt&&!tt.caption||!Lt&&tt.caption)&&ge.execCommand("mceTableToggleCaption"),ys(ge,xe,tt.align)}if(ge.focus(),ge.addVisual(),Ue(At)>0){const jt=Me(At,"caption"),Lt=!jt||Ue(At)>1;bs(ge,xe,{structure:jt,style:Lt})}})},ic=(ge,xe)=>{const be=ge.dom;let Le,Ke=((Lt,Vt)=>{const ln=tr(Lt),xn=Lc(Lt),Po=Vt?{borderstyle:ve(ln,"border-style").getOr(""),bordercolor:rc(ve(ln,"border-color").getOr("")),backgroundcolor:rc(ve(ln,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...ln,...xn,...Po,...(()=>{const Vn=ln["border-width"];return Jr(Lt)&&Vn?{border:Vn}:ve(xn,"border").fold(()=>({}),oo=>({border:oo}))})(),...ve(ln,"border-spacing").or(ve(xn,"cellspacing")).fold(()=>({}),Vn=>({cellspacing:Vn})),...ve(ln,"border-padding").or(ve(xn,"cellpadding")).fold(()=>({}),Vn=>({cellpadding:Vn}))}})(ge,Il(ge));xe?(Ke.cols="1",Ke.rows="1",Il(ge)&&(Ke.borderstyle="",Ke.bordercolor="",Ke.backgroundcolor="")):(Le=be.getParent(ge.selection.getStart(),"table",ge.getBody()),Le?Ke=((Lt,Vt,ln)=>{const xn=Lt.dom,Po=Jr(Lt)?xn.getStyle(Vt,"border-spacing")||xn.getAttrib(Vt,"cellspacing"):xn.getAttrib(Vt,"cellspacing")||xn.getStyle(Vt,"border-spacing"),Vn=Jr(Lt)?po(xn,Vt,"padding")||xn.getAttrib(Vt,"cellpadding"):xn.getAttrib(Vt,"cellpadding")||po(xn,Vt,"padding");return{width:xn.getStyle(Vt,"width")||xn.getAttrib(Vt,"width"),height:xn.getStyle(Vt,"height")||xn.getAttrib(Vt,"height"),cellspacing:Po??"",cellpadding:Vn??"",border:((oo,Bo)=>{const fn=os(Jt.fromDom(Bo),"border-width");return Jr(Lt)&&fn.isSome()?fn.getOr(""):oo.getAttrib(Bo,"border")||po(Lt.dom,Bo,"border-width")||po(Lt.dom,Bo,"border")||""})(xn,Vt),caption:!!xn.select("caption",Vt)[0],class:xn.getAttrib(Vt,"class",""),align:ju(Lt,Vt),...ln?Fh(Vt):{}}})(ge,Le,Il(ge)):Il(ge)&&(Ke.borderstyle="",Ke.bordercolor="",Ke.backgroundcolor=""));const tt=Vg(lm(ge));tt.isSome()&&Ke.class&&(Ke.class=Ke.class.replace(/\s*mce\-item\-table\s*/g,""));const At={type:"grid",columns:2,items:qg(ge,tt.getOr([]),xe)},jt=Il(ge)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[At]},Es(ge,"table")]}:{type:"panel",items:[At]};ge.windowManager.open({title:"Table Properties",size:"normal",body:jt,onSubmit:U(kn,ge,Le,Ke),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ke})},ar=Y,Dv=ge=>{const xe=(be,Le)=>ir(be,Le).exists(Ke=>parseInt(Ke,10)>1);return ge.length>0&&Ct(ge,be=>xe(be,"rowspan")||xe(be,"colspan"))?pe.some(ge):pe.none()},jy=(ge,xe,be)=>{return xe.length<=1?pe.none():(Le=ge,Ke=be.firstSelectedSelector,tt=be.lastSelectedSelector,mo(Le,Ke,tt).bind(At=>{const jt=xn=>Qe(Le,xn),Lt="thead,tfoot,tbody,table",Vt=Rn(At.first,Lt,jt),ln=Rn(At.last,Lt,jt);return Vt.bind(xn=>ln.bind(Po=>{return Qe(xn,Po)?(oo=At.first,Bo=At.last,((ge,xe,be)=>((Le,Ke,tt)=>{const At=Kr(Le,Ke,Qe),jt=Kr(Le,tt,Qe);return At.bind(Lt=>jt.map(Vt=>{return ln=Lt,xn=Vt,{startRow:Math.min(ln.row,xn.row),startCol:Math.min(ln.column,xn.column),finishRow:Math.max(ln.row+ln.rowspan-1,xn.row+xn.rowspan-1),finishCol:Math.max(ln.column+ln.colspan-1,xn.column+xn.colspan-1)};var ln,xn}))})(ge,xe,be).bind(Le=>((Ke,tt)=>{let At=!0;const jt=U(L1,tt);for(let Lt=tt.startRow;Lt<=tt.finishRow;Lt++)for(let Vt=tt.startCol;Vt<=tt.finishCol;Vt++)At=At&&Er(Ke,Lt,Vt).exists(jt);return At?pe.some(tt):pe.none()})(ge,Le)))(yd(At.table),oo,Bo)):pe.none();var oo,Bo}))})).map(At=>({bounds:At,cells:xe}));var Le,Ke,tt};var so=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Ci="x-tinymce/dom-table-",dm=Ci+"rows",Ov=Ci+"columns",$g=ge=>{var xe;const be=null!==(xe=so.read())&&void 0!==xe?xe:[];return xi(be,Le=>pe.from(Le.getType(ge)))},Pl=()=>$g(dm),ki=()=>$g(Ov),ya=ge=>xe=>{const be=()=>{xe.setEnabled(ge.selection.isEditable())};return ge.on("NodeChange",be),be(),()=>{ge.off("NodeChange",be)}},rl=ge=>xe=>{const be=()=>{xe.setEnabled(ge.selection.isEditable())};return ge.on("NodeChange",be),be(),()=>{ge.off("NodeChange",be)}};Xe.add("table",ge=>{const xe=(ge=>{const xe=Uu(pe.none()),be=Uu([]);let Le=pe.none();const Ke=pt("caption"),tt=fn=>Le.forall(Et=>!Et[fn]),At=()=>Ua(vn(ge),vs(ge)).bind(fn=>{return Jd(Ft(fn),Ua((lo=ge,Jt.fromDom(lo.selection.getEnd())),vs(ge)).bind(Ft),(lo,xo)=>{return Qe(lo,xo)?Ke(fn)?pe.some({element:zo=fn,mergable:pe.none(),unmergable:pe.none(),selection:[zo]}):pe.some(((zo,jo,dr)=>({element:dr,mergable:jy(jo,zo,fa),unmergable:Dv(zo),selection:ar(zo)}))(bd(ge),lo,fn)):pe.none();var zo}).bind(Y);var lo}),jt=fn=>Ft(fn.element).map(Et=>{const lo=_o(Et),xo=nu(lo,fn).getOr([]),zo=Bt(xo,(jo,dr)=>(dr.isLocked&&(jo.onAny=!0,0===dr.column?jo.onFirst=!0:dr.column+dr.colspan>=lo.grid.columns&&(jo.onLast=!0)),jo),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Uy(lo,fn).isSome(),unmergeable:Gy(lo,fn).isSome(),locked:zo}}),Lt=()=>{xe.set((fn=>{let Et,lo=!1;return(...xo)=>(lo||(lo=!0,Et=fn.apply(null,xo)),Et)})(At)()),Le=xe.get().bind(jt),wt(be.get(),K)},Vt=fn=>(fn(),be.set(be.get().concat([fn])),()=>{be.set(nt(be.get(),Et=>Et!==fn))}),ln=(fn,Et)=>Vt(()=>xe.get().fold(()=>{fn.setEnabled(!1)},lo=>{fn.setEnabled(!Et(lo)&&ge.selection.isEditable())})),xn=(fn,Et,lo)=>Vt(()=>xe.get().fold(()=>{fn.setEnabled(!1),fn.setActive(!1)},xo=>{fn.setEnabled(!Et(xo)&&ge.selection.isEditable()),fn.setActive(lo(xo))})),Po=fn=>Le.exists(Et=>Et.locked[fn]),Vn=(fn,Et)=>lo=>xn(lo,xo=>Ke(xo.element),()=>ge.queryCommandValue(fn)===Et),oo=Vn("mceTableRowType","header"),Bo=Vn("mceTableColType","th");return ge.on("NodeChange ExecCommand TableSelectorChange",Lt),{onSetupTable:fn=>ln(fn,Et=>!1),onSetupCellOrRow:fn=>ln(fn,Et=>Ke(Et.element)),onSetupColumn:fn=>Et=>ln(Et,lo=>Ke(lo.element)||Po(fn)),onSetupPasteable:fn=>Et=>ln(Et,lo=>Ke(lo.element)||fn().isNone()),onSetupPasteableColumn:(fn,Et)=>lo=>ln(lo,xo=>Ke(xo.element)||fn().isNone()||Po(Et)),onSetupMergeable:fn=>ln(fn,Et=>tt("mergeable")),onSetupUnmergeable:fn=>ln(fn,Et=>tt("unmergeable")),resetTargets:Lt,onSetupTableWithCaption:fn=>xn(fn,le,Et=>Ft(Et.element,vs(ge)).exists(lo=>((ge,xe)=>Wt(ge.dom.childNodes,Ke=>{return tt=Jt.fromDom(Ke),_n(tt,"caption");var tt}).map(Jt.fromDom))(lo).isSome())),onSetupTableRowHeaders:oo,onSetupTableColumnHeaders:Bo,targets:xe.get}})(ge);(be=>{const Le=be.options.register;Le("table_border_widths",{processor:"object[]",default:Ii}),Le("table_border_styles",{processor:"object[]",default:tl}),Le("table_cell_advtab",{processor:"boolean",default:!0}),Le("table_row_advtab",{processor:"boolean",default:!0}),Le("table_advtab",{processor:"boolean",default:!0}),Le("table_appearance_options",{processor:"boolean",default:!0}),Le("table_grid",{processor:"boolean",default:!am.deviceType.isTouch()}),Le("table_cell_class_list",{processor:"object[]",default:[]}),Le("table_row_class_list",{processor:"object[]",default:[]}),Le("table_class_list",{processor:"object[]",default:[]}),Le("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),Le("table_background_color_map",{processor:"object[]",default:[]}),Le("table_border_color_map",{processor:"object[]",default:[]})})(ge),(ge=>{Ge({mceTableProps:U(ic,ge,!1),mceTableRowProps:U(ol,ge),mceTableCellProps:U(gA,ge),mceInsertTableDialog:U(ic,ge,!0)},(xe,be)=>ge.addCommand(be,()=>{return Le=xe,void((tt=vn(ge),At=pt("table"),no((jt,Lt)=>Lt(jt),ao,tt,At,void 0)).forall(Ds)&&Le());var tt,At,Le}))})(ge),((be,Le)=>{const Ke=Vn=>()=>be.execCommand(Vn),tt=(Vn,oo)=>!!be.queryCommandSupported(oo.command)&&(be.ui.registry.addMenuItem(Vn,{...oo,onAction:j(oo.onAction)?oo.onAction:Ke(oo.command)}),!0),At=(Vn,oo)=>{be.queryCommandSupported(oo.command)&&be.ui.registry.addToggleMenuItem(Vn,{...oo,onAction:j(oo.onAction)?oo.onAction:Ke(oo.command)})},jt=Vn=>{be.execCommand("mceInsertTable",!1,{rows:Vn.numRows,columns:Vn.numColumns})},Lt=[tt("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:Le.onSetupCellOrRow}),tt("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:Le.onSetupCellOrRow}),tt("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:Le.onSetupCellOrRow}),tt("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:Le.onSetupCellOrRow}),tt("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:Le.onSetupCellOrRow}),tt("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:Le.onSetupCellOrRow}),tt("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:Le.onSetupPasteable(Pl)}),tt("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:Le.onSetupPasteable(Pl)})],Vt=[tt("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:Le.onSetupColumn("onFirst")}),tt("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:Le.onSetupColumn("onLast")}),tt("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:Le.onSetupColumn("onAny")}),tt("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:Le.onSetupColumn("onAny")}),tt("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:Le.onSetupColumn("onAny")}),tt("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:Le.onSetupPasteableColumn(ki,"onFirst")}),tt("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:Le.onSetupPasteableColumn(ki,"onLast")})],ln=[tt("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:Le.onSetupCellOrRow}),tt("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:Le.onSetupMergeable}),tt("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:Le.onSetupUnmergeable})];tc(be)?be.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:jt}],onSetup:rl(be)}):be.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:Ke("mceInsertTableDialog"),onSetup:rl(be)}),be.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:Ke("mceInsertTableDialog"),onSetup:rl(be)}),tt("tableprops",{text:"Table properties",onSetup:Le.onSetupTable,command:"mceTableProps"}),tt("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:Le.onSetupTable,command:"mceTableDelete"}),F(Lt,!0)&&be.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:X("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),F(Vt,!0)&&be.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:X("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),F(ln,!0)&&be.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:X("tablecellprops tablemergecells tablesplitcells")}),be.ui.registry.addContextMenu("table",{update:()=>(Le.resetTargets(),Le.targets().fold(X(""),Vn=>"caption"===Yn(Vn.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const xn=Bc(lm(be));0!==xn.length&&be.queryCommandSupported("mceTableToggleClass")&&be.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Nl(be,xn,"tableclass",Vn=>be.execCommand("mceTableToggleClass",!1,Vn)),onSetup:Le.onSetupTable});const Po=Bc(Os(be));0!==Po.length&&be.queryCommandSupported("mceTableCellToggleClass")&&be.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Nl(be,Po,"tablecellclass",Vn=>be.execCommand("mceTableCellToggleClass",!1,Vn)),onSetup:Le.onSetupCellOrRow}),be.queryCommandSupported("mceTableApplyCellStyle")&&(be.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Nl(be,nc,"tablecellverticalalign",yr(be,"vertical-align")),onSetup:Le.onSetupCellOrRow}),be.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Nl(be,Rh(be),"tablecellborderwidth",yr(be,"border-width")),onSetup:Le.onSetupCellOrRow}),be.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Nl(be,Lh(be),"tablecellborderstyle",yr(be,"border-style")),onSetup:Le.onSetupCellOrRow}),be.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>oc(be,Dl(be),"background-color"),onSetup:Le.onSetupCellOrRow}),be.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>oc(be,qi(be),"border-color"),onSetup:Le.onSetupCellOrRow})),At("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:Le.onSetupTableWithCaption}),At("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:zc(be),onSetup:Le.onSetupTableRowHeaders}),At("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:va(be),onSetup:Le.onSetupTableRowHeaders})})(ge,xe),((be,Le)=>{be.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:ya(be),fetch:Vt=>Vt("inserttable | cell row column | advtablesort | tableprops deletetable")});const Ke=Vt=>()=>be.execCommand(Vt),tt=(Vt,ln)=>{be.queryCommandSupported(ln.command)&&be.ui.registry.addButton(Vt,{...ln,onAction:j(ln.onAction)?ln.onAction:Ke(ln.command)})},At=(Vt,ln)=>{be.queryCommandSupported(ln.command)&&be.ui.registry.addToggleButton(Vt,{...ln,onAction:j(ln.onAction)?ln.onAction:Ke(ln.command)})};tt("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:Le.onSetupTable}),tt("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:Le.onSetupTable}),tt("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:Le.onSetupCellOrRow}),tt("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:Le.onSetupMergeable}),tt("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:Le.onSetupUnmergeable}),tt("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:Le.onSetupCellOrRow}),tt("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:Le.onSetupCellOrRow}),tt("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:Le.onSetupCellOrRow}),tt("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:Le.onSetupCellOrRow}),tt("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:Le.onSetupColumn("onFirst")}),tt("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:Le.onSetupColumn("onLast")}),tt("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:Le.onSetupColumn("onAny")}),tt("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:Le.onSetupCellOrRow}),tt("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:Le.onSetupCellOrRow}),tt("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:Le.onSetupPasteable(Pl)}),tt("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:Le.onSetupPasteable(Pl)}),tt("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:Le.onSetupColumn("onAny")}),tt("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:Le.onSetupColumn("onAny")}),tt("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:Le.onSetupPasteableColumn(ki,"onFirst")}),tt("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:Le.onSetupPasteableColumn(ki,"onLast")}),tt("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:ya(be)});const jt=Bc(lm(be));0!==jt.length&&be.queryCommandSupported("mceTableToggleClass")&&be.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Ze(be,jt,"tableclass",Vt=>be.execCommand("mceTableToggleClass",!1,Vt)),onSetup:Le.onSetupTable});const Lt=Bc(Os(be));0!==Lt.length&&be.queryCommandSupported("mceTableCellToggleClass")&&be.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Ze(be,Lt,"tablecellclass",Vt=>be.execCommand("mceTableCellToggleClass",!1,Vt)),onSetup:Le.onSetupCellOrRow}),be.queryCommandSupported("mceTableApplyCellStyle")&&(be.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Ze(be,nc,"tablecellverticalalign",yr(be,"vertical-align")),onSetup:Le.onSetupCellOrRow}),be.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Ze(be,Rh(be),"tablecellborderwidth",yr(be,"border-width")),onSetup:Le.onSetupCellOrRow}),be.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Ze(be,Lh(be),"tablecellborderstyle",yr(be,"border-style")),onSetup:Le.onSetupCellOrRow}),be.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Vt=>Vt(oc(be,Dl(be),"background-color")),onSetup:Le.onSetupCellOrRow}),be.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Vt=>Vt(oc(be,qi(be),"border-color")),onSetup:Le.onSetupCellOrRow})),At("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:Le.onSetupTableWithCaption}),At("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:zc(be),onSetup:Le.onSetupTableRowHeaders}),At("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:va(be),onSetup:Le.onSetupTableColumnHeaders})})(ge,xe),(be=>{const Le=Pn(be);Le.length>0&&be.ui.registry.addContextToolbar("table",{predicate:Ke=>be.dom.is(Ke,"table")&&be.getBody().contains(Ke)&&be.dom.isEditable(Ke.parentNode),items:Le,scope:"node",position:"node"})})(ge)})}(),function(Xe,St){"object"==typeof exports&&typeof module<"u"?St(exports):"function"==typeof define&&define.amd?define(["exports"],St):St(Xe.echarts={})}(this,function(Xe){"use strict";var e,t,o,a,c,h,Ge,St=2311,wn=function(){return St++},Oe="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:typeof document>"u"&&typeof self<"u"?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:typeof navigator>"u"?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:(t={},o=(e=navigator.userAgent).match(/Firefox\/([\d.]+)/),a=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),c=e.match(/Edge\/([\d.]+)/),h=/micromessenger/i.test(e),o&&(t.firefox=!0,t.version=o[1]),a&&(t.ie=!0,t.version=a[1]),c&&(t.edge=!0,t.version=c[1]),h&&(t.weChat=!0),{browser:t,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:typeof SVGRect<"u",touchEventsSupported:"ontouchstart"in window&&!t.ie&&!t.edge,pointerEventsSupported:"onpointerdown"in window&&(t.edge||t.ie&&11<=t.version),domSupported:typeof document<"u"}),Ve={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},Q={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},se=Object.prototype.toString,q=Array.prototype,j=q.forEach,ne=q.filter,$=q.slice,X=q.map,Y=q.reduce,W={};function U(e,t){"createCanvas"===e&&(Ge=null),W[e]=t}function K(e){if(null==e||"object"!=typeof e)return e;var t=e,o=se.call(e);if("[object Array]"===o){if(!_i(e)){t=[];for(var a=0,c=e.length;a<c;a++)t[a]=K(e[a])}}else if(Q[o]){if(!_i(e)){var h=e.constructor;if(e.constructor.from)t=h.from(e);else for(t=new h(e.length),a=0,c=e.length;a<c;a++)t[a]=K(e[a])}}else if(!Ve[o]&&!_i(e)&&!xi(e))for(var p in t={},e)e.hasOwnProperty(p)&&(t[p]=K(e[p]));return t}function le(e,t,o){if(!ue(t)||!ue(e))return o?K(t):e;for(var a in t)if(t.hasOwnProperty(a)){var c=e[a],h=t[a];!ue(h)||!ue(c)||nt(h)||nt(c)||xi(h)||xi(c)||Ct(h)||Ct(c)||_i(h)||_i(c)?!o&&a in e||(e[a]=K(t[a])):le(c,h,o)}return e}function de(e,t){for(var o=e[0],a=1,c=e.length;a<c;a++)o=le(o,e[a],t);return o}function pe(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function _e(e,t,o){for(var a in t)t.hasOwnProperty(a)&&(o?null!=t[a]:null==e[a])&&(e[a]=t[a]);return e}function ae(){return W.createCanvas()}function Re(){return Ge=Ge||ae().getContext("2d")}function Ue(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var o=0,a=e.length;o<a;o++)if(e[o]===t)return o}return-1}function ve(e,t){var o=e.prototype;function a(){}for(var c in a.prototype=t.prototype,e.prototype=new a,o)o.hasOwnProperty(c)&&(e.prototype[c]=o[c]);(e.prototype.constructor=e).superClass=t}function Me(e,t,o){_e(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,o)}function Pe(e){if(e)return"string"!=typeof e&&"number"==typeof e.length}function ee(e,t,o){if(e&&t)if(e.forEach&&e.forEach===j)e.forEach(t,o);else if(e.length===+e.length)for(var a=0,c=e.length;a<c;a++)t.call(o,e[a],a,e);else for(var h in e)e.hasOwnProperty(h)&&t.call(o,e[h],h,e)}function Se(e,t,o){if(e&&t){if(e.map&&e.map===X)return e.map(t,o);for(var a=[],c=0,h=e.length;c<h;c++)a.push(t.call(o,e[c],c,e));return a}}function F(e,t,o,a){if(e&&t){if(e.reduce&&e.reduce===Y)return e.reduce(t,o,a);for(var c=0,h=e.length;c<h;c++)o=t.call(a,o,e[c],c,e);return o}}function We(e,t,o){if(e&&t){if(e.filter&&e.filter===ne)return e.filter(t,o);for(var a=[],c=0,h=e.length;c<h;c++)t.call(o,e[c],c,e)&&a.push(e[c]);return a}}function _t(e,t,o){if(e&&t)for(var a=0,c=e.length;a<c;a++)if(t.call(o,e[a],a,e))return e[a]}function rt(e,t){var o=$.call(arguments,2);return function(){return e.apply(t,o.concat($.call(arguments)))}}function wt(e){var t=$.call(arguments,1);return function(){return e.apply(this,t.concat($.call(arguments)))}}function nt(e){return"[object Array]"===se.call(e)}function Bt(e){return"function"==typeof e}function Wt(e){return"[object String]"===se.call(e)}function ue(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function Ct(e){return!!Ve[se.call(e)]}function Gt(e){return!!Q[se.call(e)]}function xi(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}function to(e){return e!=e}function Jt(e){for(var t=0,o=arguments.length;t<o;t++)if(null!=arguments[t])return arguments[t]}function _n(e,t){return e??t}function hn(e,t,o){return e??t??o}function Qe(){return Function.call.apply($,arguments)}function uo(e){if("number"==typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function Yn(e,t){if(!e)throw new Error(t)}function dn(e){return null==e?null:"function"==typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}W.createCanvas=function(){return document.createElement("canvas")};var Ao="__ec_primitive__";function Oo(e){e[Ao]=!0}function _i(e){return e[Ao]}function Qo(e){var t=nt(e);this.data={};var o=this;function a(c,h){t?o.set(c,h):o.set(h,c)}e instanceof Qo?e.each(a):e&&ee(e,a)}function ft(e){return new Qo(e)}function pt(e,t){for(var o=new e.constructor(e.length+t.length),a=0;a<e.length;a++)o[a]=e[a];var c=e.length;for(a=0;a<t.length;a++)o[a+c]=t[a];return o}function Tt(){}Qo.prototype={constructor:Qo,get:function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},set:function(e,t){return this.data[e]=t},each:function(e,t){for(var o in void 0!==t&&(e=rt(e,t)),this.data)this.data.hasOwnProperty(o)&&e(this.data[o],o)},removeKey:function(e){delete this.data[e]}};var $t=(Object.freeze||Object)({$override:U,clone:K,merge:le,mergeAll:de,extend:pe,defaults:_e,createCanvas:ae,getContext:Re,indexOf:Ue,inherits:ve,mixin:Me,isArrayLike:Pe,each:ee,map:Se,reduce:F,filter:We,find:_t,bind:rt,curry:wt,isArray:nt,isFunction:Bt,isString:Wt,isObject:ue,isBuiltInObject:Ct,isTypedArray:Gt,isDom:xi,eqNaN:to,retrieve:Jt,retrieve2:_n,retrieve3:hn,slice:Qe,normalizeCssArray:uo,assert:Yn,trim:dn,setAsPrimitive:Oo,isPrimitive:_i,createHashMap:ft,concatArray:pt,noop:Tt}),tn=typeof Float32Array>"u"?Array:Float32Array;function on(e,t){var o=new tn(2);return null==e&&(e=0),null==t&&(t=0),o[0]=e,o[1]=t,o}function Sn(e,t){return e[0]=t[0],e[1]=t[1],e}function no(e){var t=new tn(2);return t[0]=e[0],t[1]=e[1],t}function ao(e,t,o){return e[0]=t,e[1]=o,e}function Rn(e,t,o){return e[0]=t[0]+o[0],e[1]=t[1]+o[1],e}function wi(e,t,o,a){return e[0]=t[0]+o[0]*a,e[1]=t[1]+o[1]*a,e}function Go(e,t,o){return e[0]=t[0]-o[0],e[1]=t[1]-o[1],e}function Si(e){return Math.sqrt(Ur(e))}function Ur(e){return e[0]*e[0]+e[1]*e[1]}function ho(e,t,o){return e[0]=t[0]*o,e[1]=t[1]*o,e}function vn(e,t){var o=Si(t);return 0===o?(e[0]=0,e[1]=0):(e[0]=t[0]/o,e[1]=t[1]/o),e}function bo(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var Br=bo;function Ma(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var pa=Ma;function Ml(e,t,o,a){return e[0]=t[0]+a*(o[0]-t[0]),e[1]=t[1]+a*(o[1]-t[1]),e}function ir(e,t,o){var a=t[0],c=t[1];return e[0]=o[0]*a+o[2]*c+o[4],e[1]=o[1]*a+o[3]*c+o[5],e}function go(e,t,o){return e[0]=Math.min(t[0],o[0]),e[1]=Math.min(t[1],o[1]),e}function Ln(e,t,o){return e[0]=Math.max(t[0],o[0]),e[1]=Math.max(t[1],o[1]),e}var Jd=(Object.freeze||Object)({create:on,copy:Sn,clone:no,set:ao,add:Rn,scaleAndAdd:wi,sub:Go,len:Si,length:Si,lenSquare:Ur,lengthSquare:Ur,mul:function(e,t,o){return e[0]=t[0]*o[0],e[1]=t[1]*o[1],e},div:function(e,t,o){return e[0]=t[0]/o[0],e[1]=t[1]/o[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:ho,normalize:vn,distance:bo,dist:Br,distanceSquare:Ma,distSquare:pa,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:Ml,applyTransform:ir,min:go,max:Ln});function ji(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function fd(e,t){return{target:e,topTarget:t&&t.topTarget}}ji.prototype={constructor:ji,_dragStart:function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent;t&&((this._draggingTarget=t).dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.dispatchToElement(fd(t,e),"dragstart",e.event))},_drag:function(e){var t=this._draggingTarget;if(t){var o=e.offsetX,a=e.offsetY,c=o-this._x,h=a-this._y;this._x=o,this._y=a,t.drift(c,h,e),this.dispatchToElement(fd(t,e),"drag",e.event);var p=this.findHover(o,a,t).target,y=this._dropTarget;t!==(this._dropTarget=p)&&(y&&p!==y&&this.dispatchToElement(fd(y,e),"dragleave",e.event),p&&p!==y&&this.dispatchToElement(fd(p,e),"dragenter",e.event))}},_dragEnd:function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.dispatchToElement(fd(t,e),"dragend",e.event),this._dropTarget&&this.dispatchToElement(fd(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null}};var Ec=Array.prototype.slice,si=function(e){this._$handlers={},this._$eventProcessor=e};function vd(e,t,o,a,c,h){var s,d,p=e._$handlers;if("function"==typeof o&&(c=a,a=o,o=null),!a||!t)return e;d=e._$eventProcessor,null!=(s=o)&&d&&d.normalizeQuery&&(s=d.normalizeQuery(s)),o=s,p[t]||(p[t]=[]);for(var y=0;y<p[t].length;y++)if(p[t][y].h===a)return e;var w={h:a,one:h,query:o,ctx:c||e,callAtLast:a.zrEventfulCallAtLast},C=p[t].length-1,n=p[t][C];return n&&n.callAtLast?p[t].splice(C,0,w):p[t].push(w),e}si.prototype={constructor:si,one:function(e,t,o,a){return vd(this,e,t,o,a,!0)},on:function(e,t,o,a){return vd(this,e,t,o,a,!1)},isSilent:function(e){var t=this._$handlers;return!t[e]||!t[e].length},off:function(e,t){var o=this._$handlers;if(!e)return this._$handlers={},this;if(t){if(o[e]){for(var a=[],c=0,h=o[e].length;c<h;c++)o[e][c].h!==t&&a.push(o[e][c]);o[e]=a}o[e]&&0===o[e].length&&delete o[e]}else delete o[e];return this},trigger:function(e){var t=this._$handlers[e],o=this._$eventProcessor;if(t){var a=arguments,c=a.length;3<c&&(a=Ec.call(a,1));for(var h=t.length,p=0;p<h;){var y=t[p];if(o&&o.filter&&null!=y.query&&!o.filter(e,y.query))p++;else{switch(c){case 1:y.h.call(y.ctx);break;case 2:y.h.call(y.ctx,a[1]);break;case 3:y.h.call(y.ctx,a[1],a[2]);break;default:y.h.apply(y.ctx,a)}y.one?(t.splice(p,1),h--):p++}}}return o&&o.afterTrigger&&o.afterTrigger(e),this},triggerWithContext:function(e){var t=this._$handlers[e],o=this._$eventProcessor;if(t){var a=arguments,c=a.length;4<c&&(a=Ec.call(a,1,a.length-1));for(var h=a[a.length-1],p=t.length,y=0;y<p;){var w=t[y];if(o&&o.filter&&null!=w.query&&!o.filter(e,w.query))y++;else{switch(c){case 1:w.h.call(h);break;case 2:w.h.call(h,a[1]);break;case 3:w.h.call(h,a[1],a[2]);break;default:w.h.apply(h,a)}w.one?(t.splice(y,1),p--):y++}}}return o&&o.afterTrigger&&o.afterTrigger(e),this}};var Al=Math.log(2);function el(e,t,o,a,c,h){var p=a+"-"+c,y=e.length;if(h.hasOwnProperty(p))return h[p];if(1===t){var w=Math.round(Math.log((1<<y)-1&~c)/Al);return e[o][w]}for(var C=a|1<<o,n=o+1;a&1<<n;)n++;for(var i=0,s=0,d=0;s<y;s++){var u=1<<s;u&c||(i+=(d%2?-1:1)*e[o][s]*el(e,t-1,n,C,c|u,h),d++)}return h[p]=i}function Fu(e,t){var o=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],a={},c=el(o,8,0,0,0,a);if(0!==c){for(var h=[],p=0;p<8;p++)for(var y=0;y<8;y++)null==h[y]&&(h[y]=0),h[y]+=((p+y)%2?-1:1)*el(o,7,0===p?1:0,1<<p,1<<y,a)/c*t[p];return function(w,C,n){var i=C*h[6]+n*h[7]+1;w[0]=(C*h[0]+n*h[1]+h[2])/i,w[1]=(C*h[3]+n*h[4]+h[5])/i}}}var os="___zrEVENTSAVED",ma=[];function dt(e,t,o,a,c){if(t.getBoundingClientRect&&Oe.domSupported&&!je(t)){var h=t[os]||(t[os]={}),p=function(y,w,C){for(var n=C?"invTrans":"trans",i=w[n],s=w.srcCoords,d=!0,u=[],f=[],v=0;v<4;v++){var _=y[v].getBoundingClientRect(),k=2*v,T=_.left,M=_.top;u.push(T,M),d=d&&s&&T===s[k]&&M===s[1+k],f.push(y[v].offsetLeft,y[v].offsetTop)}return d&&i?i:(w.srcCoords=u,w[n]=C?Fu(f,u):Fu(u,f))}(function(y,w){var C=w.markers;if(C)return C;C=w.markers=[];for(var n=["left","right"],i=["top","bottom"],s=0;s<4;s++){var d=document.createElement("div"),f=s%2,v=(s>>1)%2;d.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[f]+":0",i[v]+":0",n[1-f]+":auto",i[1-v]+":auto",""].join("!important;"),y.appendChild(d),C.push(d)}return C}(t,h),h,c);if(p)return p(e,o,a),!0}return!1}function je(e){return"CANVAS"===e.nodeName.toUpperCase()}var lt=typeof window<"u"&&!!window.addEventListener,Nt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,yn=[];function Ft(e,t,o,a){return o=o||{},a||!Oe.canvasSupported?Rt(e,t,o):Oe.browser.firefox&&null!=t.layerX&&t.layerX!==t.offsetX?(o.zrX=t.layerX,o.zrY=t.layerY):null!=t.offsetX?(o.zrX=t.offsetX,o.zrY=t.offsetY):Rt(e,t,o),o}function Rt(e,t,o){if(Oe.domSupported&&e.getBoundingClientRect){var a=t.clientX,c=t.clientY;if(je(e)){var h=e.getBoundingClientRect();return o.zrX=a-h.left,void(o.zrY=c-h.top)}if(dt(yn,e,a,c))return o.zrX=yn[0],void(o.zrY=yn[1])}o.zrX=o.zrY=0}function gn(e){return e||window.event}function En(e,t,o){if(null!=(t=gn(t)).zrX)return t;var a=t.type;if(a&&0<=a.indexOf("touch")){var c="touchend"!==a?t.targetTouches[0]:t.changedTouches[0];c&&Ft(e,c,t,o)}else Ft(e,t,t,o),t.zrDelta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3;var h=t.button;return null==t.which&&void 0!==h&&Nt.test(t.type)&&(t.which=1&h?1:2&h?3:4&h?2:0),t}function $n(e,t,o,a){lt?e.addEventListener(t,o,a):e.attachEvent("on"+t,o)}var Xn=lt?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};function Zo(e){return 2===e.which||3===e.which}function _o(){this._track=[]}function Er(e){var t=e[1][0]-e[0][0],o=e[1][1]-e[0][1];return Math.sqrt(t*t+o*o)}_o.prototype={constructor:_o,recognize:function(e,t,o){return this._doTrack(e,t,o),this._recognize(e)},clear:function(){return this._track.length=0,this},_doTrack:function(e,t,o){var a=e.touches;if(a){for(var c={points:[],touches:[],target:t,event:e},h=0,p=a.length;h<p;h++){var y=a[h],w=Ft(o,y,{});c.points.push([w.zrX,w.zrY]),c.touches.push(y)}this._track.push(c)}},_recognize:function(e){for(var t in Kr)if(Kr.hasOwnProperty(t)){var o=Kr[t](this._track,e);if(o)return o}}};var Kr={pinch:function(e,t){var y,o=e.length;if(o){var a=(e[o-1]||{}).points,c=(e[o-2]||{}).points||a;if(c&&1<c.length&&a&&1<a.length){var h=Er(a)/Er(c);isFinite(h)||(h=1),t.pinchScale=h;var p=[((y=a)[0][0]+y[1][0])/2,(y[0][1]+y[1][1])/2];return t.pinchX=p[0],t.pinchY=p[1],{type:"pinch",target:e[0].target,event:t}}}}},li="silent";function Nc(){Xn(this.event)}function po(){}function ys(e,t,o,a){si.call(this),this.storage=e,this.painter=t,this.painterRoot=a,o=o||new po,this.proxy=null,this._hovered={},ji.call(this),this.setHandlerProxy(o)}po.prototype.dispose=function(){};var bs=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];function Qd(e,t,o){if(e[e.rectHover?"rectContain":"contain"](t,o)){for(var a,c=e;c;){if(c.clipPath&&!c.clipPath.contain(t,o))return!1;c.silent&&(a=!0),c=c.parent}return!a||li}return!1}function Tv(e,t,o){var a=e.painter;return t<0||t>a.getWidth()||o<0||o>a.getHeight()}ys.prototype={constructor:ys,setHandlerProxy:function(e){this.proxy&&this.proxy.dispose(),e&&(ee(bs,function(t){e.on&&e.on(t,this[t],this)},this),e.handler=this),this.proxy=e},mousemove:function(e){var t=e.zrX,o=e.zrY,a=Tv(this,t,o),c=this._hovered,h=c.target;h&&!h.__zr&&(h=(c=this.findHover(c.x,c.y)).target);var p=this._hovered=a?{x:t,y:o}:this.findHover(t,o),y=p.target,w=this.proxy;w.setCursor&&w.setCursor(y?y.cursor:"default"),h&&y!==h&&this.dispatchToElement(c,"mouseout",e),this.dispatchToElement(p,"mousemove",e),y&&y!==h&&this.dispatchToElement(p,"mouseover",e)},mouseout:function(e){var t=e.zrEventControl,o=e.zrIsToLocalDOM;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&(o||this.trigger("globalout",{type:"globalout",event:e}))},resize:function(e){this._hovered={}},dispatch:function(e,t){var o=this[e];o&&o.call(this,t)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},dispatchToElement:function(e,t,o){var y,w,a=(e=e||{}).target;if(!a||!a.silent){for(var c="on"+t,h={type:t,event:w=o,target:(y=e).target,topTarget:y.topTarget,cancelBubble:!1,offsetX:w.zrX,offsetY:w.zrY,gestureEvent:w.gestureEvent,pinchX:w.pinchX,pinchY:w.pinchY,pinchScale:w.pinchScale,wheelDelta:w.zrDelta,zrByTouch:w.zrByTouch,which:w.which,stop:Nc};a&&(a[c]&&(h.cancelBubble=a[c].call(a,h)),a.trigger(t,h),a=a.parent,!h.cancelBubble););h.cancelBubble||(this.trigger(t,h),this.painter&&this.painter.eachOtherLayer(function(p){"function"==typeof p[c]&&p[c].call(p,h),p.trigger&&p.trigger(t,h)}))}},findHover:function(e,t,o){for(var a=this.storage.getDisplayList(),c={x:e,y:t},h=a.length-1;0<=h;h--){var p;if(a[h]!==o&&!a[h].ignore&&(p=Qd(a[h],e,t))&&(c.topTarget||(c.topTarget=a[h]),p!==li)){c.target=a[h];break}}return c},processGesture:function(e,t){this._gestureMgr||(this._gestureMgr=new _o);var o=this._gestureMgr;"start"===t&&o.clear();var a=o.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&o.clear(),a){var c=a.type;e.gestureEvent=c,this.dispatchToElement({target:a.target},c,a.event)}}},ee(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){ys.prototype[e]=function(t){var o,a,c=t.zrX,h=t.zrY,p=Tv(this,c,h);if("mouseup"===e&&p||(a=(o=this.findHover(c,h)).target),"mousedown"===e)this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if("mouseup"===e)this._upEl=a;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||4<Br(this._downPoint,[t.zrX,t.zrY]))return;this._downPoint=null}this.dispatchToElement(o,e,t)}}),Me(ys,si),Me(ys,ji);var am=typeof Float32Array>"u"?Array:Float32Array;function Ii(){var e=new am(6);return tl(e),e}function tl(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Nh(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Aa(e,t,o){var c=t[1]*o[0]+t[3]*o[1],h=t[0]*o[2]+t[2]*o[3],p=t[1]*o[2]+t[3]*o[3],y=t[0]*o[4]+t[2]*o[5]+t[4],w=t[1]*o[4]+t[3]*o[5]+t[5];return e[0]=t[0]*o[0]+t[2]*o[1],e[1]=c,e[2]=h,e[3]=p,e[4]=y,e[5]=w,e}function zr(e,t,o){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+o[0],e[5]=t[5]+o[1],e}function Rc(e,t,o){var a=t[0],c=t[2],h=t[4],p=t[1],y=t[3],w=t[5],C=Math.sin(o),n=Math.cos(o);return e[0]=a*n+p*C,e[1]=-a*C+p*n,e[2]=c*n+y*C,e[3]=-c*C+n*y,e[4]=n*h+C*w,e[5]=n*w-C*h,e}function Rh(e,t,o){var a=o[0],c=o[1];return e[0]=t[0]*a,e[1]=t[1]*c,e[2]=t[2]*a,e[3]=t[3]*c,e[4]=t[4]*a,e[5]=t[5]*c,e}function Lh(e,t){var o=t[0],a=t[2],c=t[4],h=t[1],p=t[3],y=t[5],w=o*p-h*a;return w?(e[0]=p*(w=1/w),e[1]=-h*w,e[2]=-a*w,e[3]=o*w,e[4]=(a*y-p*c)*w,e[5]=(h*c-o*y)*w,e):null}function Bg(e){var t=Ii();return Nh(t,e),t}var Ia=(Object.freeze||Object)({create:Ii,identity:tl,copy:Nh,mul:Aa,translate:zr,rotate:Rc,scale:Rh,invert:Lh,clone:Bg}),Il=tl;function eu(e){return 5e-5<e||e<-5e-5}var tc=function(e){(e=e||{}).position||(this.position=[0,0]),null==e.rotation&&(this.rotation=0),e.scale||(this.scale=[1,1]),this.origin=this.origin||null},Jr=tc.prototype;Jr.transform=null,Jr.needLocalTransform=function(){return eu(this.rotation)||eu(this.position[0])||eu(this.position[1])||eu(this.scale[0]-1)||eu(this.scale[1]-1)};var Os=[];Jr.updateTransform=function(){var e=this.parent,t=e&&e.transform,o=this.needLocalTransform(),a=this.transform;if(o||t){a=a||Ii(),o?this.getLocalTransform(a):Il(a),t&&(o?Aa(a,e.transform,a):Nh(a,e.transform)),this.transform=a;var c=this.globalScaleRatio;if(null!=c&&1!==c){this.getGlobalScale(Os);var h=Os[0]<0?-1:1,p=Os[1]<0?-1:1,y=((Os[0]-h)*c+h)/Os[0]||0,w=((Os[1]-p)*c+p)/Os[1]||0;a[0]*=y,a[1]*=y,a[2]*=w,a[3]*=w}this.invTransform=this.invTransform||Ii(),Lh(this.invTransform,a)}else a&&Il(a)},Jr.getLocalTransform=function(e){return tc.getLocalTransform(this,e)},Jr.setTransform=function(e){var t=this.transform,o=e.dpr||1;t?e.setTransform(o*t[0],o*t[1],o*t[2],o*t[3],o*t[4],o*t[5]):e.setTransform(o,0,0,o,0,0)},Jr.restoreTransform=function(e){var t=e.dpr||1;e.setTransform(t,0,0,t,0,0)};var sm=[],lm=Ii();Jr.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],o=e[2]*e[2]+e[3]*e[3],a=this.position,c=this.scale;eu(t-1)&&(t=Math.sqrt(t)),eu(o-1)&&(o=Math.sqrt(o)),e[0]<0&&(t=-t),e[3]<0&&(o=-o),a[0]=e[4],a[1]=e[5],c[0]=t,c[1]=o,this.rotation=Math.atan2(-e[1]/o,e[0]/t)}},Jr.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(Aa(sm,e.invTransform,t),t=sm);var o=this.origin;o&&(o[0]||o[1])&&(lm[4]=o[0],lm[5]=o[1],Aa(sm,t,lm),sm[4]-=o[0],sm[5]-=o[1],t=sm),this.setLocalTransform(t)}},Jr.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1])):(e[0]=1,e[1]=1),e},Jr.transformCoordToLocal=function(e,t){var o=[e,t],a=this.invTransform;return a&&ir(o,o,a),o},Jr.transformCoordToGlobal=function(e,t){var o=[e,t],a=this.transform;return a&&ir(o,o,a),o},tc.getLocalTransform=function(e,t){Il(t=t||[]);var o=e.origin,a=e.scale||[1,1],c=e.rotation||0,h=e.position||[0,0];return o&&(t[4]-=o[0],t[5]-=o[1]),Rh(t,t,a),c&&Rc(t,t,c),o&&(t[4]+=o[0],t[5]+=o[1]),t[4]+=h[0],t[5]+=h[1],t};var Pn={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,o=.1;return 0===e?0:1===e?1:(t=!o||o<1?(o=1,.1):.4*Math.asin(1/o)/(2*Math.PI),-o*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){var t,o=.1;return 0===e?0:1===e?1:(t=!o||o<1?(o=1,.1):.4*Math.asin(1/o)/(2*Math.PI),o*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){var t,o=.1;return 0===e?0:1===e?1:(t=!o||o<1?(o=1,.1):.4*Math.asin(1/o)/(2*Math.PI),(e*=2)<1?o*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:o*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)},backIn:function(e){return e*e*(2.70158*e-1.70158)},backOut:function(e){return--e*e*(2.70158*e+1.70158)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)},bounceIn:function(e){return 1-Pn.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*Pn.bounceIn(2*e):.5*Pn.bounceOut(2*e-1)+.5}};function Dl(e){this._target=e.target,this._life=e.life||1e3,this._delay=e.delay||0,this._initialized=!1,this.loop=null!=e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this._pausedTime=0,this._paused=!1}function qi(){this.head=null,this.tail=null,this._len=0}Dl.prototype={constructor:Dl,step:function(e,t){if(this._initialized||(this._startTime=e+this._delay,this._initialized=!0),this._paused)this._pausedTime+=t;else{var o=(e-this._startTime-this._pausedTime)/this._life;if(!(o<0)){o=Math.min(o,1);var a=this.easing,c="string"==typeof a?Pn[a]:a,h="function"==typeof c?c(o):o;return this.fire("frame",h),1===o?this.loop?(this.restart(e),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(e){this._startTime=e-(e-this._startTime-this._pausedTime)%this._life+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(e,t){this[e="on"+e]&&this[e](this._target,t)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var mi=qi.prototype;function Ol(e){this._list=new qi,this._map={},this._maxSize=e||10,this._lastRemovedEntry=null}mi.insert=function(e){var t=new tr(e);return this.insertEntry(t),t},mi.insertEntry=function(e){this.head?((this.tail.next=e).prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},mi.remove=function(e){var t=e.prev,o=e.next;t?t.next=o:this.head=o,o?o.prev=t:this.tail=t,e.next=e.prev=null,this._len--},mi.len=function(){return this._len},mi.clear=function(){this.head=this.tail=null,this._len=0};var tr=function(e){this.value=e},Lc=Ol.prototype;Lc.put=function(e,t){var o=this._list,a=this._map,c=null;if(null==a[e]){var h=o.len(),p=this._lastRemovedEntry;if(h>=this._maxSize&&0<h){var y=o.head;o.remove(y),delete a[y.key],c=y.value,this._lastRemovedEntry=y}p?p.value=t:p=new tr(t),p.key=e,o.insertEntry(p),a[e]=p}return c},Lc.get=function(e){var t=this._map[e],o=this._list;if(null!=t)return t!==o.tail&&(o.remove(t),o.insertEntry(t)),t.value},Lc.clear=function(){this._list.clear(),this._map={}};var L1={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Yt(e){return(e=Math.round(e))<0?0:255<e?255:e}function yd(e){return e<0?0:1<e?1:e}function Vu(e){return e.length&&"%"===e.charAt(e.length-1)?Yt(parseFloat(e)/100*255):Yt(parseInt(e,10))}function Di(e){return e.length&&"%"===e.charAt(e.length-1)?yd(parseFloat(e)/100):yd(parseFloat(e))}function zt(e,t,o){return o<0?o+=1:1<o&&(o-=1),6*o<1?e+(t-e)*o*6:2*o<1?t:3*o<2?e+(t-e)*(2/3-o)*6:e}function kr(e,t,o){return e+(t-e)*o}function El(e,t,o,a,c){return e[0]=t,e[1]=o,e[2]=a,e[3]=c,e}function ea(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var No=new Ol(20),Ph=null;function Bh(e,t){Ph&&ea(Ph,t),Ph=No.put(e,Ph||t.slice())}function nl(e,t){if(e){t=t||[];var o=No.get(e);if(o)return ea(t,o);var a,c=(e+="").replace(/ /g,"").toLowerCase();if(c in L1)return ea(t,L1[c]),Bh(e,t),t;if("#"===c.charAt(0))return 4===c.length?0<=(a=parseInt(c.substr(1),16))&&a<=4095?(El(t,(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1),Bh(e,t),t):void El(t,0,0,0,1):7===c.length?0<=(a=parseInt(c.substr(1),16))&&a<=16777215?(El(t,(16711680&a)>>16,(65280&a)>>8,255&a,1),Bh(e,t),t):void El(t,0,0,0,1):void 0;var h=c.indexOf("("),p=c.indexOf(")");if(-1!==h&&p+1===c.length){var y=c.substr(0,h),w=c.substr(h+1,p-(h+1)).split(","),C=1;switch(y){case"rgba":if(4!==w.length)return void El(t,0,0,0,1);C=Di(w.pop());case"rgb":return 3!==w.length?void El(t,0,0,0,1):(El(t,Vu(w[0]),Vu(w[1]),Vu(w[2]),C),Bh(e,t),t);case"hsla":return 4!==w.length?void El(t,0,0,0,1):(w[3]=Di(w[3]),Pi(w,t),Bh(e,t),t);case"hsl":return 3!==w.length?void El(t,0,0,0,1):(Pi(w,t),Bh(e,t),t);default:return}}El(t,0,0,0,1)}}function Pi(e,t){var o=(parseFloat(e[0])%360+360)%360/360,a=Di(e[1]),c=Di(e[2]),h=c<=.5?c*(a+1):c+a-c*a,p=2*c-h;return El(t=t||[],Yt(255*zt(p,h,o+1/3)),Yt(255*zt(p,h,o)),Yt(255*zt(p,h,o-1/3)),1),4===e.length&&(t[3]=e[3]),t}function mo(e,t){var o=nl(e);if(o){for(var a=0;a<3;a++)o[a]=t<0?o[a]*(1-t)|0:(255-o[a])*t+o[a]|0,255<o[a]?o[a]=255:e[a]<0&&(o[a]=0);return rs(o,4===o.length?"rgba":"rgb")}}function zg(e){var t=nl(e);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function nr(e,t,o){if(t&&t.length&&0<=e&&e<=1){o=o||[];var a=e*(t.length-1),c=Math.floor(a),h=Math.ceil(a),p=t[c],y=t[h],w=a-c;return o[0]=Yt(kr(p[0],y[0],w)),o[1]=Yt(kr(p[1],y[1],w)),o[2]=Yt(kr(p[2],y[2],w)),o[3]=yd(kr(p[3],y[3],w)),o}}function ci(e,t,o){if(t&&t.length&&0<=e&&e<=1){var a=e*(t.length-1),c=Math.floor(a),h=Math.ceil(a),p=nl(t[c]),y=nl(t[h]),w=a-c,C=rs([Yt(kr(p[0],y[0],w)),Yt(kr(p[1],y[1],w)),Yt(kr(p[2],y[2],w)),yd(kr(p[3],y[3],w))],"rgba");return o?{color:C,leftIndex:c,rightIndex:h,value:a}:C}}function tu(e,t,o,a){if(e=nl(e))return e=function(c){if(c){var h,p,y=c[0]/255,w=c[1]/255,C=c[2]/255,n=Math.min(y,w,C),i=Math.max(y,w,C),s=i-n,d=(i+n)/2;if(0==s)p=h=0;else{p=d<.5?s/(i+n):s/(2-i-n);var u=((i-y)/6+s/2)/s,f=((i-w)/6+s/2)/s,v=((i-C)/6+s/2)/s;y===i?h=v-f:w===i?h=1/3+u-v:C===i&&(h=2/3+f-u),h<0&&(h+=1),1<h&&(h-=1)}var _=[360*h,p,d];return null!=c[3]&&_.push(c[3]),_}}(e),null!=t&&(e[0]=function(c){return(c=Math.round(c))<0?0:360<c?360:c}(t)),null!=o&&(e[1]=Di(o)),null!=a&&(e[2]=Di(a)),rs(Pi(e),"rgba")}function Ua(e,t){if((e=nl(e))&&null!=t)return e[3]=yd(t),rs(e,"rgba")}function rs(e,t){if(e&&e.length){var o=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(o+=","+e[3]),t+"("+o+")"}}var bd=(Object.freeze||Object)({parse:nl,lift:mo,toHex:zg,fastLerp:nr,fastMapToColor:nr,lerp:ci,mapToColor:ci,modifyHSL:tu,modifyAlpha:Ua,stringify:rs}),ta=Array.prototype.slice;function nc(e,t){return e[t]}function is(e,t,o){e[t]=o}function Pc(e,t,o){return(t-e)*o+e}function Wu(e,t,o){return.5<o?t:e}function Gr(e,t,o,a,c){var h=e.length;if(1===c)for(var p=0;p<h;p++)a[p]=Pc(e[p],t[p],o);else{var y=h&&e[0].length;for(p=0;p<h;p++)for(var w=0;w<y;w++)a[p][w]=Pc(e[p][w],t[p][w],o)}}function Mv(e,t,o){var a=e.length,c=t.length;if(a!==c)if(c<a)e.length=c;else for(var h=a;h<c;h++)e.push(1===o?t[h]:ta.call(t[h]));var p=e[0]&&e[0].length;for(h=0;h<e.length;h++)if(1===o)isNaN(e[h])&&(e[h]=t[h]);else for(var y=0;y<p;y++)isNaN(e[h][y])&&(e[h][y]=t[h][y])}function P1(e,t,o){if(e===t)return!0;var a=e.length;if(a!==t.length)return!1;if(1===o){for(var c=0;c<a;c++)if(e[c]!==t[c])return!1}else{var h=e[0].length;for(c=0;c<a;c++)for(var p=0;p<h;p++)if(e[c][p]!==t[c][p])return!1}return!0}function Fg(e,t,o,a,c,h,p,y,w){var C=e.length;if(1===w)for(var n=0;n<C;n++)y[n]=cm(e[n],t[n],o[n],a[n],c,h,p);else{var i=e[0].length;for(n=0;n<C;n++)for(var s=0;s<i;s++)y[n][s]=cm(e[n][s],t[n][s],o[n][s],a[n][s],c,h,p)}}function cm(e,t,o,a,c,h,p){var y=.5*(o-e),w=.5*(a-t);return(2*(t-o)+y+w)*p+(-3*(t-o)-2*y-w)*h+y*c+t}function Wy(e){if(Pe(e)){var t=e.length;if(Pe(e[0])){for(var o=[],a=0;a<t;a++)o.push(ta.call(e[a]));return o}return ta.call(e)}return e}function Av(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}function Uu(e,t,o,a,c,h){var he,fe,p=e._getter,y=e._setter,w="spline"===t,C=a.length;if(C){var n,i=Pe(a[0].value),s=!1,d=!1,u=i?Pe((fe=(he=a)[he.length-1].value)&&fe[0])?2:1:0;a.sort(function(he,fe){return he.time-fe.time}),n=a[C-1].time;for(var f=[],v=[],_=a[0].value,k=!0,T=0;T<C;T++){f.push(a[T].time/n);var M=a[T].value;if(i&&P1(M,_,u)||!i&&M===_||(k=!1),"string"==typeof(_=M)){var I=nl(M);I?(M=I,s=!0):d=!0}v.push(M)}if(h||!k){var O=v[C-1];for(T=0;T<C-1;T++)i?Mv(v[T],O,u):!isNaN(v[T])||isNaN(O)||d||s||(v[T]=O);i&&Mv(p(e._target,c),O,u);var R,N,z,L,V,J=0,te=0;if(s)var re=[0,0,0,0];var ie=new Dl({target:e._target,life:n,loop:e._loop,delay:e._delay,onframe:function(he,fe){var ye;if(fe<0)ye=0;else if(fe<te){for(ye=Math.min(J+1,C-1);0<=ye&&!(f[ye]<=fe);ye--);ye=Math.min(ye,C-2)}else{for(ye=J;ye<C&&!(f[ye]>fe);ye++);ye=Math.min(ye-1,C-2)}te=fe;var Ie=f[(J=ye)+1]-f[ye];if(0!=Ie)if(R=(fe-f[ye])/Ie,w)if(z=v[ye],N=v[0===ye?ye:ye-1],L=v[C-2<ye?C-1:ye+1],V=v[C-3<ye?C-1:ye+2],i)Fg(N,z,L,V,R,R*R,R*R*R,p(he,c),u);else{if(s)He=Fg(N,z,L,V,R,R*R,R*R*R,re,1),He=Av(re);else{if(d)return Wu(z,L,R);He=cm(N,z,L,V,R,R*R,R*R*R)}y(he,c,He)}else if(i)Gr(v[ye],v[ye+1],R,p(he,c),u);else{var He;if(s)Gr(v[ye],v[ye+1],R,re,1),He=Av(re);else{if(d)return Wu(v[ye],v[ye+1],R);He=Pc(v[ye],v[ye+1],R)}y(he,c,He)}},ondestroy:o});return t&&"spline"!==t&&(ie.easing=t),ie}}}function Iv(e,t,o,a){this._tracks={},this._target=e,this._loop=t||!1,this._getter=o||nc,this._setter=a||is,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}Iv.prototype={when:function(e,t){var o=this._tracks;for(var a in t)if(t.hasOwnProperty(a)){if(!o[a]){o[a]=[];var c=this._getter(this._target,a);if(null==c)continue;0!==e&&o[a].push({time:0,value:Wy(c)})}o[a].push({time:e,value:t[a]})}return this},during:function(e){return this._onframeList.push(e),this},pause:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].pause();this._paused=!0},resume:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var e=this._doneList,t=e.length,o=0;o<t;o++)e[o].call(this)},start:function(e,t){function o(){--h||c._doneCallback()}var a,c=this,h=0;for(var p in this._tracks)if(this._tracks.hasOwnProperty(p)){var y=Uu(this,e,o,this._tracks[p],p,t);y&&(this._clipList.push(y),h++,this.animation&&this.animation.addClip(y),a=y)}if(a){var w=a.onframe;a.onframe=function(C,n){w(C,n);for(var i=0;i<c._onframeList.length;i++)c._onframeList[i](C,n)}}return h||this._doneCallback(),this},stop:function(e){for(var t=this._clipList,o=this.animation,a=0;a<t.length;a++){var c=t[a];e&&c.onframe(this._target,1),o&&o.removeClip(c)}t.length=0},delay:function(e){return this._delay=e,this},done:function(e){return e&&this._doneList.push(e),this},getClips:function(){return this._clipList}};var Gu=1;typeof window<"u"&&(Gu=Math.max(window.devicePixelRatio||1,1));var zh=Gu;function Nl(){this.animators=[]}function Bc(e,t,o,a,c,h,p,y){Wt(a)?(h=c,c=a,a=0):Bt(c)?(h=c,c="linear",a=0):Bt(a)?(h=a,a=0):o=Bt(o)?(h=o,500):o||500,e.stopAnimation(),function s(d,u,f,v,_,k,T){var M={},I=0;for(var O in v)v.hasOwnProperty(O)&&(null!=f[O]?ue(v[O])&&!Pe(v[O])?s(d,u?u+"."+O:O,f[O],v[O],_,k,T):(T?(M[O]=f[O],Ze(d,u,O,v[O])):M[O]=v[O],I++):null==v[O]||T||Ze(d,u,O,v[O]));0<I&&d.animate(u,!1).when(_??500,M).delay(k||0)}(e,"",e,t,o,a,y);var w=e.animators.slice(),C=w.length;function n(){--C||h&&h()}C||h&&h();for(var i=0;i<w.length;i++)w[i].done(n).start(c,p)}function Ze(e,t,o,a){if(t){var c={};c[t]={},c[t][o]=a,e.attr(c)}else e.attr(o,a)}Nl.prototype={constructor:Nl,animate:function(e,t){var o,a=!1,c=this,h=this.__zr;if(e){var p=e.split("."),y=c;a="shape"===p[0];for(var w=0,C=p.length;w<C;w++)y=y&&y[p[w]];y&&(o=y)}else o=c;if(o){var n=c.animators,i=new Iv(o,t);return i.during(function(s){c.dirty(a)}).done(function(){n.splice(Ue(n,i),1)}),n.push(i),h&&h.animation.addAnimator(i),i}},stopAnimation:function(e){for(var t=this.animators,o=t.length,a=0;a<o;a++)t[a].stop(e);return t.length=0,this},animateTo:function(e,t,o,a,c,h){Bc(this,e,t,o,a,c,h)},animateFrom:function(e,t,o,a,c,h){Bc(this,e,t,o,a,c,h,!0)}};var oc=function(e){tc.call(this,e),si.call(this,e),Nl.call(this,e),this.id=e.id||wn()};oc.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(e,t){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var o=this.transform;(o=o||(this.transform=[1,0,0,1,0,0]))[4]+=e,o[5]+=t,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(e,t){},attrKV:function(e,t){if("position"===e||"scale"===e||"origin"===e){if(t){var o=this[e];(o=o||(this[e]=[]))[0]=t[0],o[1]=t[1]}}else this[e]=t},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(ue(e))for(var o in e)e.hasOwnProperty(o)&&this.attrKV(o,e[o]);return this.dirty(!1),this},setClipPath:function(e){var t=this.__zr;t&&e.addSelfToZr(t),this.clipPath&&this.clipPath!==e&&this.removeClipPath(),(this.clipPath=e).__zr=t,(e.__clipTarget=this).dirty(!1)},removeClipPath:function(){var e=this.clipPath;e&&(e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(e){this.__zr=e;var t=this.animators;if(t)for(var o=0;o<t.length;o++)e.animation.addAnimator(t[o]);this.clipPath&&this.clipPath.addSelfToZr(e)},removeSelfFromZr:function(e){this.__zr=null;var t=this.animators;if(t)for(var o=0;o<t.length;o++)e.animation.removeAnimator(t[o]);this.clipPath&&this.clipPath.removeSelfFromZr(e)}},Me(oc,Nl),Me(oc,tc),Me(oc,si);var zc,va,xd,To,Es=ir,Hg=Math.min,Fc=Math.max;function Ro(e,t,o,a){o<0&&(e+=o,o=-o),a<0&&(t+=a,a=-a),this.x=e,this.y=t,this.width=o,this.height=a}Ro.prototype={constructor:Ro,union:function(e){var t=Hg(e.x,this.x),o=Hg(e.y,this.y);this.width=Fc(e.x+e.width,this.x+this.width)-t,this.height=Fc(e.y+e.height,this.y+this.height)-o,this.x=t,this.y=o},applyTransform:(zc=[],va=[],xd=[],To=[],function(e){if(e){zc[0]=xd[0]=this.x,zc[1]=To[1]=this.y,va[0]=To[0]=this.x+this.width,va[1]=xd[1]=this.y+this.height,Es(zc,zc,e),Es(va,va,e),Es(xd,xd,e),Es(To,To,e),this.x=Hg(zc[0],va[0],xd[0],To[0]),this.y=Hg(zc[1],va[1],xd[1],To[1]);var t=Fc(zc[0],va[0],xd[0],To[0]),o=Fc(zc[1],va[1],xd[1],To[1]);this.width=t-this.x,this.height=o-this.y}}),calculateTransform:function(e){var t=e.width/this.width,o=e.height/this.height,a=Ii();return zr(a,a,[-this.x,-this.y]),Rh(a,a,[t,o]),zr(a,a,[e.x,e.y]),a},intersect:function(e){if(!e)return!1;e instanceof Ro||(e=Ro.create(e));var t=this;return!(t.x+t.width<e.x||e.x+e.width<t.x||t.y+t.height<e.y||e.y+e.height<t.y)},contain:function(e,t){var o=this;return e>=o.x&&e<=o.x+o.width&&t>=o.y&&t<=o.y+o.height},clone:function(){return new Ro(this.x,this.y,this.width,this.height)},copy:function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},Ro.create=function(e){return new Ro(e.x,e.y,e.width,e.height)};var pn=function(e){for(var t in oc.call(this,e=e||{}),e)e.hasOwnProperty(t)&&(this[t]=e[t]);this._children=[],this.__storage=null,this.__dirty=!0};pn.prototype={constructor:pn,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},childOfName:function(e){for(var t=this._children,o=0;o<t.length;o++)if(t[o].name===e)return t[o]},childCount:function(){return this._children.length},add:function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},addBefore:function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var o=this._children,a=o.indexOf(t);0<=a&&(o.splice(a,0,e),this._doAdd(e))}return this},_doAdd:function(e){e.parent&&e.parent.remove(e);var t=(e.parent=this).__storage,o=this.__zr;t&&t!==e.__storage&&(t.addToStorage(e),e instanceof pn&&e.addChildrenToStorage(t)),o&&o.refresh()},remove:function(e){var t=this.__zr,o=this.__storage,a=this._children,c=Ue(a,e);return c<0||(a.splice(c,1),e.parent=null,o&&(o.delFromStorage(e),e instanceof pn&&e.delChildrenFromStorage(o)),t&&t.refresh()),this},removeAll:function(){var e,t,o=this._children,a=this.__storage;for(t=0;t<o.length;t++)e=o[t],a&&(a.delFromStorage(e),e instanceof pn&&e.delChildrenFromStorage(a)),e.parent=null;return o.length=0,this},eachChild:function(e,t){for(var o=this._children,a=0;a<o.length;a++)e.call(t,o[a],a);return this},traverse:function(e,t){for(var o=0;o<this._children.length;o++){var a=this._children[o];e.call(t,a),"group"===a.type&&a.traverse(e,t)}return this},addChildrenToStorage:function(e){for(var t=0;t<this._children.length;t++){var o=this._children[t];e.addToStorage(o),o instanceof pn&&o.addChildrenToStorage(e)}},delChildrenFromStorage:function(e){for(var t=0;t<this._children.length;t++){var o=this._children[t];e.delFromStorage(o),o instanceof pn&&o.delChildrenFromStorage(e)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(e){for(var t=null,o=new Ro(0,0,0,0),a=e||this._children,c=[],h=0;h<a.length;h++){var p=a[h];if(!p.ignore&&!p.invisible){var y=p.getBoundingRect(),w=p.getLocalTransform(c);w?(o.copy(y),o.applyTransform(w),(t=t||o.clone()).union(o)):(t=t||y.clone()).union(y)}}return t||o}},ve(pn,oc);var Wg=32,Ug=7;function nu(e,t,o,a){var c=t+1;if(c===o)return 1;if(a(e[c++],e[t])<0){for(;c<o&&a(e[c],e[c-1])<0;)c++;!function(h,p,y){for(y--;p<y;){var w=h[p];h[p++]=h[y],h[y--]=w}}(e,t,c)}else for(;c<o&&0<=a(e[c],e[c-1]);)c++;return c-t}function _d(e,t,o,a,c){for(a===t&&a++;a<o;a++){for(var h,p=e[a],y=t,w=a;y<w;)c(p,e[h=y+w>>>1])<0?w=h:y=1+h;var C=a-y;switch(C){case 3:e[y+3]=e[y+2];case 2:e[y+2]=e[y+1];case 1:e[y+1]=e[y];break;default:for(;0<C;)e[y+C]=e[y+C-1],C--}e[y]=p}}function Uy(e,t,o,a,c,h){var p=0,y=0,w=1;if(0<h(e,t[o+c])){for(y=a-c;w<y&&0<h(e,t[o+c+w]);)(w=1+((p=w)<<1))<=0&&(w=y);y<w&&(w=y),p+=c,w+=c}else{for(y=c+1;w<y&&h(e,t[o+c-w])<=0;)(w=1+((p=w)<<1))<=0&&(w=y);y<w&&(w=y);var C=p;p=c-w,w=c-C}for(p++;p<w;){var n=p+(w-p>>>1);0<h(e,t[o+n])?p=n+1:w=n}return w}function Gy(e,t,o,a,c,h){var p=0,y=0,w=1;if(h(e,t[o+c])<0){for(y=c+1;w<y&&h(e,t[o+c-w])<0;)(w=1+((p=w)<<1))<=0&&(w=y);y<w&&(w=y);var C=p;p=c-w,w=c-C}else{for(y=a-c;w<y&&0<=h(e,t[o+c+w]);)(w=1+((p=w)<<1))<=0&&(w=y);y<w&&(w=y),p+=c,w+=c}for(p++;p<w;){var n=p+(w-p>>>1);h(e,t[o+n])<0?w=n:p=n+1}return w}function Qr(e,t){var o,a,c=Ug,h=0,p=[];function y(w){var C=o[w],n=a[w],i=o[w+1],s=a[w+1];a[w]=n+s,w===h-3&&(o[w+1]=o[w+2],a[w+1]=a[w+2]),h--;var d=Gy(e[i],e,C,n,0,t);C+=d,0!=(n-=d)&&0!==(s=Uy(e[C+n-1],e,i,s,s-1,t))&&(n<=s?function(u,f,v,_){var k=0;for(k=0;k<f;k++)p[k]=e[u+k];var T=0,M=v,I=u;if(e[I++]=e[M++],0!=--_){if(1===f){for(k=0;k<_;k++)e[I+k]=e[M+k];return e[I+_]=p[T]}for(var O,R,N,z=c;;){R=O=0,N=!1;do{if(t(e[M],p[T])<0){if(e[I++]=e[M++],R++,(O=0)==--_){N=!0;break}}else if(e[I++]=p[T++],O++,R=0,1==--f){N=!0;break}}while((O|R)<z);if(N)break;do{if(0!==(O=Gy(e[M],p,T,f,0,t))){for(k=0;k<O;k++)e[I+k]=p[T+k];if(I+=O,T+=O,(f-=O)<=1){N=!0;break}}if(e[I++]=e[M++],0==--_){N=!0;break}if(0!==(R=Uy(p[T],e,M,_,0,t))){for(k=0;k<R;k++)e[I+k]=e[M+k];if(I+=R,M+=R,0==(_-=R)){N=!0;break}}if(e[I++]=p[T++],1==--f){N=!0;break}z--}while(Ug<=O||Ug<=R);if(N)break;z<0&&(z=0),z+=2}if((c=z)<1&&(c=1),1===f){for(k=0;k<_;k++)e[I+k]=e[M+k];e[I+_]=p[T]}else{if(0===f)throw new Error;for(k=0;k<f;k++)e[I+k]=p[T+k]}}else for(k=0;k<f;k++)e[I+k]=p[T+k]}(C,n,i,s):function(u,f,v,_){var k=0;for(k=0;k<_;k++)p[k]=e[v+k];var T=u+f-1,M=_-1,I=v+_-1,O=0,R=0;if(e[I--]=e[T--],0!=--f){if(1===_){for(R=1+(I-=f),O=1+(T-=f),k=f-1;0<=k;k--)e[R+k]=e[O+k];return e[I]=p[M]}for(var N=c;;){var z=0,L=0,V=!1;do{if(t(p[M],e[T])<0){if(e[I--]=e[T--],z++,(L=0)==--f){V=!0;break}}else if(e[I--]=p[M--],L++,z=0,1==--_){V=!0;break}}while((z|L)<N);if(V)break;do{if(0!=(z=f-Gy(p[M],e,u,f,f-1,t))){for(f-=z,R=1+(I-=z),O=1+(T-=z),k=z-1;0<=k;k--)e[R+k]=e[O+k];if(0===f){V=!0;break}}if(e[I--]=p[M--],1==--_){V=!0;break}if(0!=(L=_-Uy(e[T],p,0,_,_-1,t))){for(_-=L,R=1+(I-=L),O=1+(M-=L),k=0;k<L;k++)e[R+k]=p[O+k];if(_<=1){V=!0;break}}if(e[I--]=e[T--],0==--f){V=!0;break}N--}while(Ug<=z||Ug<=L);if(V)break;N<0&&(N=0),N+=2}if((c=N)<1&&(c=1),1===_){for(R=1+(I-=f),O=1+(T-=f),k=f-1;0<=k;k--)e[R+k]=e[O+k];e[I]=p[M]}else{if(0===_)throw new Error;for(O=I-(_-1),k=0;k<_;k++)e[O+k]=p[k]}}else for(O=I-(_-1),k=0;k<_;k++)e[O+k]=p[k]}(C,n,i,s))}o=[],a=[],this.mergeRuns=function(){for(;1<h;){var w=h-2;if(1<=w&&a[w-1]<=a[w]+a[w+1]||2<=w&&a[w-2]<=a[w]+a[w-1])a[w-1]<a[w+1]&&w--;else if(a[w]>a[w+1])break;y(w)}},this.forceMergeRuns=function(){for(;1<h;){var w=h-2;0<w&&a[w-1]<a[w+1]&&w--,y(w)}},this.pushRun=function(w,C){o[h]=w,a[h]=C,h+=1}}function rc(e,t,o,a){var c=(a=a||e.length)-(o=o||0);if(!(c<2)){var h=0;if(c<Wg)_d(e,o,a,o+(h=nu(e,o,a,t)),t);else{var p=new Qr(e,t),y=function(C){for(var n=0;Wg<=C;)n|=1&C,C>>=1;return C+n}(c);do{if((h=nu(e,o,a,t))<y){var w=c;y<w&&(w=y),_d(e,o,o+w,o+h,t),h=w}p.pushRun(o,h),p.mergeRuns(),c-=h,o+=h}while(0!==c);p.forceMergeRuns()}}}function Fh(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}function Rl(){this._roots=[],this._displayList=[],this._displayListLen=0}Rl.prototype={constructor:Rl,traverse:function(e,t){for(var o=0;o<this._roots.length;o++)this._roots[o].traverse(e,t)},getDisplayList:function(e,t){return t=t||!1,e&&this.updateDisplayList(t),this._displayList},updateDisplayList:function(e){this._displayListLen=0;for(var t=this._roots,o=this._displayList,a=0,c=t.length;a<c;a++)this._updateAndAddDisplayable(t[a],null,e);o.length=this._displayListLen,Oe.canvasSupported&&rc(o,Fh)},_updateAndAddDisplayable:function(e,t,o){if(!e.ignore||o){e.beforeUpdate(),e.__dirty&&e.update(),e.afterUpdate();var a=e.clipPath;if(a){t=t?t.slice():[];for(var c=a,h=e;c;)c.parent=h,c.updateTransform(),t.push(c),c=(h=c).clipPath}if(e.isGroup){for(var p=e._children,y=0;y<p.length;y++){var w=p[y];e.__dirty&&(w.__dirty=!0),this._updateAndAddDisplayable(w,t,o)}e.__dirty=!1}else e.__clipPaths=t,this._displayList[this._displayListLen++]=e}},addRoot:function(e){e.__storage!==this&&(e instanceof pn&&e.addChildrenToStorage(this),this.addToStorage(e),this._roots.push(e))},delRoot:function(e){if(null==e){for(var t=0;t<this._roots.length;t++){var o=this._roots[t];o instanceof pn&&o.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(e instanceof Array){t=0;for(var a=e.length;t<a;t++)this.delRoot(e[t])}else{var c=Ue(this._roots,e);0<=c&&(this.delFromStorage(e),this._roots.splice(c,1),e instanceof pn&&e.delChildrenFromStorage(this))}},addToStorage:function(e){return e&&(e.__storage=this,e.dirty(!1)),this},delFromStorage:function(e){return e&&(e.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:Fh};var xs={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},ju=function(e,t,o){return xs.hasOwnProperty(t)?o*e.dpr:o},Ns={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},Gg=9,jg=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],ou=function(e){this.extendFrom(e,!1)};function gA(e,t,o){var a=null==t.x?0:t.x,c=null==t.x2?1:t.x2,h=null==t.y?0:t.y,p=null==t.y2?0:t.y2;return t.global||(a=a*o.width+o.x,c=c*o.width+o.x,h=h*o.height+o.y,p=p*o.height+o.y),a=isNaN(a)?0:a,c=isNaN(c)?1:c,h=isNaN(h)?0:h,p=isNaN(p)?0:p,e.createLinearGradient(a,h,c,p)}function Vh(e,t,o){var a=o.width,c=o.height,h=Math.min(a,c),p=null==t.x?.5:t.x,y=null==t.y?.5:t.y,w=null==t.r?.5:t.r;return t.global||(p=p*a+o.x,y=y*c+o.y,w*=h),e.createRadialGradient(p,y,0,p,y,w)}ou.prototype={constructor:ou,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(e,t,o){var a=this,c=o&&o.style,h=!c||e.__attrCachedBy!==Ns.STYLE_BIND;e.__attrCachedBy=Ns.STYLE_BIND;for(var p=0;p<jg.length;p++){var y=jg[p],w=y[0];!h&&a[w]===c[w]||(e[w]=ju(e,w,a[w]||y[1]))}!h&&a.fill===c.fill||(e.fillStyle=a.fill),!h&&a.stroke===c.stroke||(e.strokeStyle=a.stroke),!h&&a.opacity===c.opacity||(e.globalAlpha=null==a.opacity?1:a.opacity),!h&&a.blend===c.blend||(e.globalCompositeOperation=a.blend||"source-over"),this.hasStroke()&&(e.lineWidth=a.lineWidth/(this.strokeNoScale&&t&&t.getLineScale?t.getLineScale():1))},hasFill:function(){var e=this.fill;return null!=e&&"none"!==e},hasStroke:function(){var e=this.stroke;return null!=e&&"none"!==e&&0<this.lineWidth},extendFrom:function(e,t){if(e)for(var o in e)!e.hasOwnProperty(o)||!0!==t&&(!1===t?this.hasOwnProperty(o):null==e[o])||(this[o]=e[o])},set:function(e,t){"string"==typeof e?this[e]=t:this.extendFrom(e,!0)},clone:function(){var e=new this.constructor;return e.extendFrom(this,!0),e},getGradient:function(e,t,o){for(var a=("radial"===t.type?Vh:gA)(e,t,o),c=t.colorStops,h=0;h<c.length;h++)a.addColorStop(c[h].offset,c[h].color);return a}};for(var Oi=ou.prototype,Fr=0;Fr<jg.length;Fr++){var ol=jg[Fr];ol[0]in Oi||(Oi[ol[0]]=ol[1])}function qg(e,t){this.image=e,this.repeat=t,this.type="pattern"}function $i(){return!1}function kn(e,t,o){var a=ae(),c=t.getWidth(),h=t.getHeight(),p=a.style;return p&&(p.position="absolute",p.left=0,p.top=0,p.width=c+"px",p.height=h+"px",a.setAttribute("data-zr-dom-id",e)),a.width=c*o,a.height=h*o,a}function ic(e,t,o){var a;o=o||zh,"string"==typeof e?a=kn(e,t,o):ue(e)&&(e=(a=e).id),this.id=e;var c=(this.dom=a).style;c&&(a.onselectstart=$i,c["-webkit-user-select"]="none",c["user-select"]="none",c["-webkit-touch-callout"]="none",c["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",c.padding=0,c.margin=0,c["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=t,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=o}ou.getGradient=Oi.getGradient,ic.prototype={constructor:ic,__dirty:!0,__used:!(qg.prototype.getCanvasPattern=function(e){return e.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var e=this.dpr;this.domBack=kn("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},resize:function(e,t){var o=this.dpr,a=this.dom,c=a.style,h=this.domBack;c&&(c.width=e+"px",c.height=t+"px"),a.width=e*o,a.height=t*o,h&&(h.width=e*o,h.height=t*o,1!==o&&this.ctxBack.scale(o,o))},clear:function(e,t){var o,a=this.dom,c=this.ctx,h=a.width,p=a.height,y=(t=t||this.clearColor,this.motionBlur&&!e),w=this.lastFrameAlpha,C=this.dpr;if(y&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,h/C,p/C)),c.clearRect(0,0,h,p),t&&"transparent"!==t&&(t.colorStops?(o=t.__canvasGradient||ou.getGradient(c,t,{x:0,y:0,width:h,height:p}),t.__canvasGradient=o):t.image&&(o=qg.prototype.getCanvasPattern.call(t,c)),c.save(),c.fillStyle=o||t,c.fillRect(0,0,h,p),c.restore()),y){var n=this.domBack;c.save(),c.globalAlpha=w,c.drawImage(n,0,0,h,p),c.restore()}}};var Ll=typeof window<"u"&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)},ar=new Ol(50);function Dv(e){if("string"!=typeof e)return e;var t=ar.get(e);return t&&t.image}function jy(e,t,o,a,c){if(e){if("string"!=typeof e)return e;if(t&&t.__zrImageSrc===e||!o)return t;var h=ar.get(e),p={hostEl:o,cb:a,cbPayload:c};return h?so(t=h.image)||h.pending.push(p):((t=new Image).onload=t.onerror=B1,ar.put(e,t.__cachedImgObj={image:t,pending:[p]}),t.src=t.__zrImageSrc=e),t}return t}function B1(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var o=e.pending[t],a=o.cb;a&&a(this,o.cbPayload),o.hostEl.dirty()}e.pending.length=0}function so(e){return e&&e.width&&e.height}var Ci={},dm=0,Ov=5e3,$g=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,Pl="12px sans-serif",ki={};function ya(e,t){var o=e+":"+(t=t||Pl);if(Ci[o])return Ci[o];for(var a,c,h=(e+"").split("\n"),p=0,y=0,w=h.length;y<w;y++)p=Math.max((a=h[y],c=t,ki.measureText(a,c)).width,p);return Ov<dm&&(dm=0,Ci={}),dm++,Ci[o]=p}function rl(e,t,o,a,c,h,p,y){return p?(i=a,k=(v=Vt(e,{rich:p,truncate:y,font:t,textAlign:n=o,textPadding:c,textLineHeight:h})).outerHeight,new Ro(ge(0,_=v.outerWidth,n),xe(0,k,i),_,k)):function(w,C,n,i,s,d,u){var f=Lt(w,C,s,d,u),v=ya(w,C);s&&(v+=s[1]+s[3]);var _=f.outerHeight,M=new Ro(ge(0,v,n),xe(0,_,i),v,_);return M.lineHeight=f.lineHeight,M}(e,t,o,a,c,h,y);var n,i,v,_,k}function ge(e,t,o){return"right"===o?e-=t:"center"===o&&(e-=t/2),e}function xe(e,t,o){return"middle"===o?e-=t/2:"bottom"===o&&(e-=t),e}function be(e,t,o){var c=t.textDistance,h=o.x,p=o.y;c=c||0;var y=o.height,w=o.width,C=y/2,n="left",i="top";switch(t.textPosition){case"left":h-=c,p+=C,n="right",i="middle";break;case"right":h+=c+w,p+=C,i="middle";break;case"top":h+=w/2,p-=c,n="center",i="bottom";break;case"bottom":h+=w/2,p+=y+c,n="center";break;case"inside":h+=w/2,p+=C,n="center",i="middle";break;case"insideLeft":h+=c,p+=C,i="middle";break;case"insideRight":h+=w-c,p+=C,n="right",i="middle";break;case"insideTop":h+=w/2,p+=c,n="center";break;case"insideBottom":h+=w/2,p+=y-c,n="center",i="bottom";break;case"insideTopLeft":h+=c,p+=c;break;case"insideTopRight":h+=w-c,p+=c,n="right";break;case"insideBottomLeft":h+=c,p+=y-c,i="bottom";break;case"insideBottomRight":h+=w-c,p+=y-c,n="right",i="bottom"}return(e=e||{}).x=h,e.y=p,e.textAlign=n,e.textVerticalAlign=i,e}function Le(e,t,o,a,c){if(!t)return"";var h=(e+"").split("\n");c=Ke(t,o,a,c);for(var p=0,y=h.length;p<y;p++)h[p]=tt(h[p],c);return h.join("\n")}function Ke(e,t,o,a){(a=pe({},a)).font=t,o=_n(o,"..."),a.maxIterations=_n(a.maxIterations,2);var c=a.minChar=_n(a.minChar,0);a.cnCharWidth=ya("\u56fd",t);var h=a.ascCharWidth=ya("a",t);a.placeholder=_n(a.placeholder,"");for(var p=e=Math.max(0,e-1),y=0;y<c&&h<=p;y++)p-=h;var w=ya(o,t);return p<w&&(o="",w=0),p=e-w,a.ellipsis=o,a.ellipsisWidth=w,a.contentWidth=p,a.containerWidth=e,a}function tt(e,t){var o=t.containerWidth,a=t.font,c=t.contentWidth;if(!o)return"";var h=ya(e,a);if(h<=o)return e;for(var p=0;;p++){if(h<=c||p>=t.maxIterations){e+=t.ellipsis;break}var y=0===p?At(e,c,t.ascCharWidth,t.cnCharWidth):0<h?Math.floor(e.length*c/h):0;h=ya(e=e.substr(0,y),a)}return""===e&&(e=t.placeholder),e}function At(e,t,o,a){for(var c=0,h=0,p=e.length;h<p&&c<t;h++){var y=e.charCodeAt(h);c+=0<=y&&y<=127?o:a}return h}function jt(e){return ya("\u56fd",e)}function Lt(e,t,o,a,c){null!=e&&(e+="");var h=_n(a,jt(t)),p=e?e.split("\n"):[],y=p.length*h,w=y,C=!0;if(o&&(w+=o[0]+o[2]),e&&c){C=!1;var n=c.outerHeight,i=c.outerWidth;if(null!=n&&n<w)e="",p=[];else if(null!=i)for(var s=Ke(i-(o?o[1]+o[3]:0),t,c.ellipsis,{minChar:c.minChar,placeholder:c.placeholder}),d=0,u=p.length;d<u;d++)p[d]=tt(p[d],s)}return{lines:p,height:y,outerHeight:w,lineHeight:h,canCacheByTextString:C}}function Vt(e,t){var o={lines:[],width:0,height:0};if(null!=e&&(e+=""),!e)return o;for(var a,c=$g.lastIndex=0;null!=(a=$g.exec(e));){var h=a.index;c<h&&ln(o,e.substring(c,h)),ln(o,a[2],a[1]),c=$g.lastIndex}c<e.length&&ln(o,e.substring(c,e.length));var p=o.lines,y=0,w=0,C=[],n=t.textPadding,i=t.truncate,s=i&&i.outerWidth,d=i&&i.outerHeight;n&&(null!=s&&(s-=n[1]+n[3]),null!=d&&(d-=n[0]+n[2]));for(var u=0;u<p.length;u++){for(var f=p[u],v=0,_=0,k=0;k<f.tokens.length;k++){var T=(te=f.tokens[k]).styleName&&t.rich[te.styleName]||{},M=te.textPadding=T.textPadding,I=te.font=T.font||t.font,O=te.textHeight=_n(T.textHeight,jt(I));if(M&&(O+=M[0]+M[2]),te.height=O,te.lineHeight=hn(T.textLineHeight,t.textLineHeight,O),te.textAlign=T&&T.textAlign||t.textAlign,te.textVerticalAlign=T&&T.textVerticalAlign||"middle",null!=d&&y+te.lineHeight>d)return{lines:[],width:0,height:0};te.textWidth=ya(te.text,I);var R=T.textWidth,N=null==R||"auto"===R;if("string"==typeof R&&"%"===R.charAt(R.length-1))te.percentWidth=R,C.push(te),R=0;else{if(N){R=te.textWidth;var z=T.textBackgroundColor,L=z&&z.image;L&&so(L=Dv(L))&&(R=Math.max(R,L.width*O/L.height))}var V=M?M[1]+M[3]:0;R+=V;var J=null!=s?s-_:null;null!=J&&J<R&&(!N||J<V?(te.text="",te.textWidth=R=0):(te.text=Le(te.text,J-V,I,i.ellipsis,{minChar:i.minChar}),te.textWidth=ya(te.text,I),R=te.textWidth+V))}_+=te.width=R,T&&(v=Math.max(v,te.lineHeight))}f.width=_,y+=f.lineHeight=v,w=Math.max(w,_)}for(o.outerWidth=o.width=_n(t.textWidth,w),o.outerHeight=o.height=_n(t.textHeight,y),n&&(o.outerWidth+=n[1]+n[3],o.outerHeight+=n[0]+n[2]),u=0;u<C.length;u++){var te,re=(te=C[u]).percentWidth;te.width=parseInt(re,10)/100*w}return o}function ln(e,t,o){for(var a=""===t,c=t.split("\n"),h=e.lines,p=0;p<c.length;p++){var y=c[p],w={styleName:o,text:y,isLineHolder:!y&&!a};if(p)h.push({tokens:[w]});else{var C=(h[h.length-1]||(h[0]={tokens:[]})).tokens,n=C.length;1===n&&C[0].isLineHolder?C[0]=w:!y&&n&&!a||C.push(w)}}}function xn(e){var t=(e.fontSize||e.fontFamily)&&[e.fontStyle,e.fontWeight,(e.fontSize||12)+"px",e.fontFamily||"sans-serif"].join(" ");return t&&dn(t)||e.textFont||e.font}function Po(e,t){var o,a,c,h,p,y=t.x,w=t.y,C=t.width,n=t.height,i=t.r;C<0&&(y+=C,C=-C),n<0&&(w+=n,n=-n),"number"==typeof i?o=a=c=h=i:i instanceof Array?1===i.length?o=a=c=h=i[0]:2===i.length?(o=c=i[0],a=h=i[1]):3===i.length?(o=i[0],a=h=i[1],c=i[2]):(o=i[0],a=i[1],c=i[2],h=i[3]):o=a=c=h=0,C<o+a&&(o*=C/(p=o+a),a*=C/p),C<c+h&&(c*=C/(p=c+h),h*=C/p),n<a+c&&(a*=n/(p=a+c),c*=n/p),n<o+h&&(o*=n/(p=o+h),h*=n/p),e.moveTo(y+o,w),e.lineTo(y+C-a,w),0!==a&&e.arc(y+C-a,w+a,a,-Math.PI/2,0),e.lineTo(y+C,w+n-c),0!==c&&e.arc(y+C-c,w+n-c,c,0,Math.PI/2),e.lineTo(y+h,w+n),0!==h&&e.arc(y+h,w+n-h,h,Math.PI/2,Math.PI),e.lineTo(y,w+o),0!==o&&e.arc(y+o,w+o,o,Math.PI,1.5*Math.PI)}ki.measureText=function(e,t){var o=Re();return o.font=t||Pl,o.measureText(e)};var Vn=Pl,oo={left:1,right:1,center:1},Bo={top:1,bottom:1,middle:1},fn=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],Et={},lo={};function xo(e){return zo(e),ee(e.rich,zo),e}function zo(e){if(e){e.font=xn(e);var t=e.textAlign;"middle"===t&&(t="center"),e.textAlign=null==t||oo[t]?t:"left";var o=e.textVerticalAlign||e.textBaseline;"center"===o&&(o="middle"),e.textVerticalAlign=null==o||Bo[o]?o:"top",e.textPadding&&(e.textPadding=uo(e.textPadding))}}function jo(e,t,o,a,c,h){a.rich?function(p,y,w,C,n,i){i!==Gg&&(y.__attrCachedBy=Ns.NONE);var s=p.__textCotentBlock;s&&!p.__dirtyText||(s=p.__textCotentBlock=Vt(w,C)),function(d,u,f,v,_){var k=f.width,T=f.outerWidth,M=f.outerHeight,I=v.textPadding,O=Bi(lo,d,v,_),R=O.baseX,N=O.baseY,z=O.textAlign,L=O.textVerticalAlign;dr(u,v,_,R,N);var V=ge(R,T,z),J=xe(N,M,L),te=V,re=J;I&&(te+=I[3],re+=I[0]);var ie=te+k;Ga(v)&&io(d,u,v,V,J,T,M);for(var he=0;he<f.lines.length;he++){for(var fe,ye=f.lines[he],Ie=ye.tokens,He=Ie.length,we=ye.lineHeight,De=ye.width,Be=0,et=te,Ye=ie,it=He-1;Be<He&&(!(fe=Ie[Be]).textAlign||"left"===fe.textAlign);)ba(d,u,fe,v,we,re,et,"left"),De-=fe.width,et+=fe.width,Be++;for(;0<=it&&"right"===(fe=Ie[it]).textAlign;)ba(d,u,fe,v,we,re,Ye,"right"),De-=fe.width,Ye-=fe.width,it--;for(et+=(k-(et-te)-(ie-Ye)-De)/2;Be<=it;)ba(d,u,fe=Ie[Be],v,we,re,et+fe.width/2,"center"),et+=fe.width,Be++;re+=we}}(p,y,s,C,n)}(e,t,o,a,c,h):function(p,y,w,C,n,i){var s,d=Ga(C),u=!1,f=y.__attrCachedBy===Ns.PLAIN_TEXT;i!==Gg?(i&&(s=i.style,u=!d&&f&&s),y.__attrCachedBy=d?Ns.NONE:Ns.PLAIN_TEXT):f&&(y.__attrCachedBy=Ns.NONE);var v=C.font||Vn;u&&v===(s.font||Vn)||(y.font=v);var _=p.__computedFont;p.__styleFont!==v&&(p.__styleFont=v,_=p.__computedFont=y.font);var k=C.textPadding,M=p.__textCotentBlock;M&&!p.__dirtyText||(M=p.__textCotentBlock=Lt(w,_,k,C.textLineHeight,C.truncate));var I=M.outerHeight,O=M.lines,R=M.lineHeight,N=Bi(lo,p,C,n),z=N.baseX,L=N.baseY,V=N.textAlign||"left",J=N.textVerticalAlign;dr(y,C,n,z,L);var te=xe(L,I,J),re=z,ie=te;if(d||k){var he=ya(w,_);k&&(he+=k[1]+k[3]);var fe=ge(z,he,V);d&&io(p,y,C,fe,te,he,I),k&&(re=aC(z,V,k),ie+=k[0])}y.textAlign=V,y.textBaseline="middle",y.globalAlpha=C.opacity||1;for(var ye=0;ye<fn.length;ye++){var Ie=fn[ye],He=Ie[0],we=Ie[1],De=C[He];u&&De===s[He]||(y[we]=ju(y,we,De||Ie[2]))}ie+=R/2;var Be=C.textStrokeWidth,Ye=!u||Be!==(u?s.textStrokeWidth:null),it=!u||Ye||C.textStroke!==s.textStroke,yt=pA(C.textStroke,Be),It=ru(C.textFill);if(yt&&(Ye&&(y.lineWidth=Be),it&&(y.strokeStyle=yt)),It&&(u&&C.textFill===s.textFill||(y.fillStyle=It)),1===O.length)yt&&y.strokeText(O[0],re,ie),It&&y.fillText(O[0],re,ie);else for(ye=0;ye<O.length;ye++)yt&&y.strokeText(O[ye],re,ie),It&&y.fillText(O[ye],re,ie),ie+=R}(e,t,o,a,c,h)}function dr(e,t,o,a,c){if(o&&t.textRotation){var h=t.textOrigin;"center"===h?(a=o.width/2+o.x,c=o.height/2+o.y):h&&(a=h[0]+o.x,c=h[1]+o.y),e.translate(a,c),e.rotate(-t.textRotation),e.translate(-a,-c)}}function ba(e,t,o,a,c,h,p,y){var w=a.rich[o.styleName]||{};w.text=o.text;var C=o.textVerticalAlign,n=h+c/2;"top"===C?n=h+o.height/2:"bottom"===C&&(n=h+c-o.height/2),!o.isLineHolder&&Ga(w)&&io(e,t,w,"right"===y?p-o.width:"center"===y?p-o.width/2:p,n-o.height/2,o.width,o.height);var i=o.textPadding;i&&(p=aC(p,y,i),n-=o.height/2-i[2]-o.textHeight/2),as(t,"shadowBlur",hn(w.textShadowBlur,a.textShadowBlur,0)),as(t,"shadowColor",w.textShadowColor||a.textShadowColor||"transparent"),as(t,"shadowOffsetX",hn(w.textShadowOffsetX,a.textShadowOffsetX,0)),as(t,"shadowOffsetY",hn(w.textShadowOffsetY,a.textShadowOffsetY,0)),as(t,"textAlign",y),as(t,"textBaseline","middle"),as(t,"font",o.font||Vn);var s=pA(w.textStroke||a.textStroke,u),d=ru(w.textFill||a.textFill),u=_n(w.textStrokeWidth,a.textStrokeWidth);s&&(as(t,"lineWidth",u),as(t,"strokeStyle",s),t.strokeText(o.text,p,n)),d&&(as(t,"fillStyle",d),t.fillText(o.text,p,n))}function Ga(e){return!!(e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor)}function io(e,t,o,a,c,h,p){var y=o.textBackgroundColor,w=o.textBorderWidth,C=o.textBorderColor,n=Wt(y);if(as(t,"shadowBlur",o.textBoxShadowBlur||0),as(t,"shadowColor",o.textBoxShadowColor||"transparent"),as(t,"shadowOffsetX",o.textBoxShadowOffsetX||0),as(t,"shadowOffsetY",o.textBoxShadowOffsetY||0),n||w&&C){t.beginPath();var i=o.textBorderRadius;i?Po(t,{x:a,y:c,width:h,height:p,r:i}):t.rect(a,c,h,p),t.closePath()}if(n)if(as(t,"fillStyle",y),null!=o.fillOpacity){var s=t.globalAlpha;t.globalAlpha=o.fillOpacity*o.opacity,t.fill(),t.globalAlpha=s}else t.fill();else if(ue(y)){var d=y.image;(d=jy(d,null,e,ac,y))&&so(d)&&t.drawImage(d,a,c,h,p)}w&&C&&(as(t,"lineWidth",w),as(t,"strokeStyle",C),null!=o.strokeOpacity?(s=t.globalAlpha,t.globalAlpha=o.strokeOpacity*o.opacity,t.stroke(),t.globalAlpha=s):t.stroke())}function ac(e,t){t.image=e}function Bi(e,t,o,a){var c=o.x||0,h=o.y||0,p=o.textAlign,y=o.textVerticalAlign;if(a){var w=o.textPosition;if(w instanceof Array)c=a.x+um(w[0],a.width),h=a.y+um(w[1],a.height);else{var C=t&&t.calculateTextPosition?t.calculateTextPosition(Et,o,a):be(Et,o,a);c=C.x,h=C.y,p=p||C.textAlign,y=y||C.textVerticalAlign}var n=o.textOffset;n&&(c+=n[0],h+=n[1])}return(e=e||{}).baseX=c,e.baseY=h,e.textAlign=p,e.textVerticalAlign=y,e}function as(e,t,o){return e[t]=ju(e,t,o),e[t]}function pA(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function ru(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function um(e,t){return"string"==typeof e?0<=e.lastIndexOf("%")?parseFloat(e)/100*t:parseFloat(e):e}function aC(e,t,o){return"right"===t?e-o[1]:"center"===t?e+o[3]/2-o[1]/2:e+o[3]}function br(e,t){return null!=e&&(e||t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor||t.textPadding)}function il(){}var nn=new Ro;function Ei(e){for(var t in oc.call(this,e=e||{}),e)e.hasOwnProperty(t)&&"style"!==t&&(this[t]=e[t]);this.style=new ou(e.style,this),this._rect=null,this.__clipPaths=null}function xr(e){Ei.call(this,e)}Ei.prototype={constructor:Ei,type:"displayable",__dirty:!0,invisible:!(il.prototype={constructor:il,drawRectText:function(e,t){var o=this.style;t=o.textRect||t,this.__dirty&&xo(o);var a=o.text;if(null!=a&&(a+=""),br(a,o)){e.save();var c=this.transform;o.transformText?this.setTransform(e):c&&(nn.copy(t),nn.applyTransform(c),t=nn),jo(this,e,a,o,t,Gg),e.restore()}}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(e){},afterBrush:function(e){},brush:function(e,t){},getBoundingRect:function(){},contain:function(e,t){return this.rectContain(e,t)},traverse:function(e,t){e.call(t,this)},rectContain:function(e,t){var o=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(o[0],o[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(e){return this.animate("style",e)},attrKV:function(e,t){"style"!==e?oc.prototype.attrKV.call(this,e,t):this.style.set(t)},setStyle:function(e,t){return this.style.set(e,t),this.dirty(!1),this},useStyle:function(e){return this.style=new ou(e,this),this.dirty(!1),this},calculateTextPosition:null},ve(Ei,oc),Me(Ei,il),xr.prototype={constructor:xr,type:"image",brush:function(e,t){var o=this.style,a=o.image;o.bind(e,this,t);var c=this._image=jy(a,this._image,this,this.onload);if(c&&so(c)){var h=o.x||0,p=o.y||0,y=o.width,w=o.height,C=c.width/c.height;if(null==y&&null!=w?y=w*C:null==w&&null!=y?w=y/C:null==y&&null==w&&(y=c.width,w=c.height),this.setTransform(e),o.sWidth&&o.sHeight){var n=o.sx||0,i=o.sy||0;e.drawImage(c,n,i,o.sWidth,o.sHeight,h,p,y,w)}else if(o.sx&&o.sy){var s=y-(n=o.sx),d=w-(i=o.sy);e.drawImage(c,n,i,s,d,h,p,y,w)}else e.drawImage(c,h,p,y,w);null!=o.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))}},getBoundingRect:function(){var e=this.style;return this._rect||(this._rect=new Ro(e.x||0,e.y||0,e.width||0,e.height||0)),this._rect}},ve(xr,Ei);var Rs=314159;function zi(e){return parseInt(e,10)}var Yi=new Ro(0,0,0,0),Vc=new Ro(0,0,0,0);function kt(e,t,o){this.type="canvas";var a=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=o=pe({},o||{}),this.dpr=o.devicePixelRatio||zh,this._singleCanvas=a;var c=(this.root=e).style;c&&(c["-webkit-tap-highlight-color"]="transparent",c["-webkit-user-select"]=c["user-select"]=c["-webkit-touch-callout"]="none",e.innerHTML=""),this.storage=t;var i,s,d,h=this._zlevelList=[],p=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,a){var y=e.width,w=e.height;null!=o.width&&(y=o.width),null!=o.height&&(w=o.height),this.dpr=o.devicePixelRatio||1,e.width=y*this.dpr,e.height=w*this.dpr,this._width=y,this._height=w;var C=new ic(e,this,this.dpr);C.__builtin__=!0,C.initContext(),(p[Rs]=C).zlevel=Rs,h.push(Rs),this._domRoot=e}else{this._width=this._getSize(0),this._height=this._getSize(1);var n=this._domRoot=(i=this._width,s=this._height,(d=document.createElement("div")).style.cssText=["position:relative","width:"+i+"px","height:"+s+"px","padding:0","margin:0","border-width:0"].join(";")+";",d);e.appendChild(n)}this._hoverlayer=null,this._hoverElements=[]}function Ls(e){this.stage=(e=e||{}).stage||{},this.onframe=e.onframe||function(){},this._clips=[],this._running=!1,this._paused=!1,si.call(this)}kt.prototype={constructor:kt,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(e){var t=this.storage.getDisplayList(!0),o=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,e,this._redrawId);for(var a=0;a<o.length;a++){var h=this._layers[o[a]];!h.__builtin__&&h.refresh&&h.refresh(0===a?this._backgroundColor:null)}return this.refreshHover(),this},addHover:function(e,t){if(!e.__hoverMir){var o=new e.constructor({style:e.style,shape:e.shape,z:e.z,z2:e.z2,silent:e.silent});return(o.__from=e).__hoverMir=o,t&&o.setStyle(t),this._hoverElements.push(o),o}},removeHover:function(e){var o=this._hoverElements,a=Ue(o,e.__hoverMir);0<=a&&o.splice(a,1),e.__hoverMir=null},clearHover:function(e){for(var t=this._hoverElements,o=0;o<t.length;o++){var a=t[o].__from;a&&(a.__hoverMir=null)}t.length=0},refreshHover:function(){var e=this._hoverElements,t=e.length,o=this._hoverlayer;if(o&&o.clear(),t){rc(e,this.storage.displayableSortFunc);var a={};(o=o||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var c=0;c<t;){var h=e[c],p=h.__from;p&&p.__zr?(c++,p.invisible||(h.transform=p.transform,h.invTransform=p.invTransform,h.__clipPaths=p.__clipPaths,this._doPaintEl(h,o,!0,a))):(e.splice(c,1),p.__hoverMir=null,t--)}o.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(e,t,o){if(this._redrawId===o){t=t||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,t);if(this._needsManuallyCompositing&&this._compositeManually(),!a){var c=this;Ll(function(){c._paintList(e,t,o)})}}},_compositeManually:function(){var e=this.getLayer(Rs).ctx,t=this._domRoot.width,o=this._domRoot.height;e.clearRect(0,0,t,o),this.eachBuiltinLayer(function(a){a.virtual&&e.drawImage(a.dom,0,0,t,o)})},_doPaintList:function(e,t){for(var o=[],a=0;a<this._zlevelList.length;a++)(y=this._layers[this._zlevelList[a]]).__builtin__&&y!==this._hoverlayer&&(y.__dirty||t)&&o.push(y);for(var h=!0,p=0;p<o.length;p++){var y,w=(y=o[p]).ctx,C={};w.save();var n=t?y.__startIndex:y.__drawIndex,i=!t&&y.incremental&&Date.now,s=i&&Date.now(),d=y.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(y.__startIndex===y.__endIndex)y.clear(!1,d);else if(n===y.__startIndex){var u=e[n];u.incremental&&u.notClear&&!t||y.clear(!1,d)}-1===n&&(console.error("For some unknown reason. drawIndex is -1"),n=y.__startIndex);for(var f=n;f<y.__endIndex;f++){var v=e[f];if(this._doPaintEl(v,y,t,C),v.__dirty=v.__dirtyText=!1,i&&15<Date.now()-s)break}y.__drawIndex=f,y.__drawIndex<y.__endIndex&&(h=!1),C.prevElClipPaths&&w.restore(),w.restore()}return Oe.wxa&&ee(this._layers,function(_){_&&_.ctx&&_.ctx.draw&&_.ctx.draw()}),h},_doPaintEl:function(e,t,o,a){var w,C,n,c=t.ctx,h=e.transform;if((t.__dirty||o)&&!e.invisible&&0!==e.style.opacity&&(!h||h[0]||h[3])&&(!e.culling||(C=this._width,n=this._height,Yi.copy((w=e).getBoundingRect()),w.transform&&Yi.applyTransform(w.transform),Vc.width=C,Vc.height=n,Yi.intersect(Vc)))){var p=e.__clipPaths,y=a.prevElClipPaths;y&&!function(w,C){if(w===C)return!1;if(!w||!C||w.length!==C.length)return!0;for(var n=0;n<w.length;n++)if(w[n]!==C[n])return!0;return!1}(p,y)||(y&&(c.restore(),a.prevElClipPaths=null,a.prevEl=null),p&&(c.save(),function(w,C){for(var n=0;n<w.length;n++){var i=w[n];i.setTransform(C),C.beginPath(),i.buildPath(C,i.shape),C.clip(),i.restoreTransform(C)}}(p,c),a.prevElClipPaths=p)),e.beforeBrush&&e.beforeBrush(c),e.brush(c,a.prevEl||null),(a.prevEl=e).afterBrush&&e.afterBrush(c)}},getLayer:function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Rs);var o=this._layers[e];return o||((o=new ic("zr_"+e,this,this.dpr)).zlevel=e,o.__builtin__=!0,this._layerConfig[e]?le(o,this._layerConfig[e],!0):this._layerConfig[e-.01]&&le(o,this._layerConfig[e-.01],!0),t&&(o.virtual=t),this.insertLayer(e,o),o.initContext()),o},insertLayer:function(e,t){var C,o=this._layers,a=this._zlevelList,c=a.length,h=null,p=-1,y=this._domRoot;if(o[e]);else if((C=t)&&(C.__builtin__||"function"==typeof C.resize&&"function"==typeof C.refresh)){if(0<c&&e>a[0]){for(p=0;p<c-1&&!(a[p]<e&&a[p+1]>e);p++);h=o[a[p]]}if(a.splice(p+1,0,e),!(o[e]=t).virtual)if(h){var w=h.dom;w.nextSibling?y.insertBefore(t.dom,w.nextSibling):y.appendChild(t.dom)}else y.firstChild?y.insertBefore(t.dom,y.firstChild):y.appendChild(t.dom)}},eachLayer:function(e,t){var o,a,c=this._zlevelList;for(a=0;a<c.length;a++)e.call(t,this._layers[o=c[a]],o)},eachBuiltinLayer:function(e,t){var o,a,c,h=this._zlevelList;for(c=0;c<h.length;c++)(o=this._layers[a=h[c]]).__builtin__&&e.call(t,o,a)},eachOtherLayer:function(e,t){var o,a,c,h=this._zlevelList;for(c=0;c<h.length;c++)(o=this._layers[a=h[c]]).__builtin__||e.call(t,o,a)},getLayers:function(){return this._layers},_updateLayerStatus:function(e){function t(C){c&&(c.__endIndex!==C&&(c.__dirty=!0),c.__endIndex=C)}if(this.eachBuiltinLayer(function(C,n){C.__dirty=C.__used=!1}),this._singleCanvas)for(var o=1;o<e.length;o++)if((p=e[o]).zlevel!==e[o-1].zlevel||p.incremental){this._needsManuallyCompositing=!0;break}var a,c=null,h=0;for(o=0;o<e.length;o++){var p,y,w=(p=e[o]).zlevel;a!==w&&(a=w,h=0),p.incremental?((y=this.getLayer(w+.001,this._needsManuallyCompositing)).incremental=!0,h=1):y=this.getLayer(w+(0<h?.01:0),this._needsManuallyCompositing),y!==c&&(y.__used=!0,y.__startIndex!==o&&(y.__dirty=!0),y.__startIndex=o,y.__drawIndex=y.incremental?-1:o,t(o),c=y),p.__dirty&&(y.__dirty=!0,y.incremental&&y.__drawIndex<0&&(y.__drawIndex=o))}t(o),this.eachBuiltinLayer(function(C,n){!C.__used&&0<C.getElementCount()&&(C.__dirty=!0,C.__startIndex=C.__endIndex=C.__drawIndex=0),C.__dirty&&C.__drawIndex<0&&(C.__drawIndex=C.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(e){e.clear()},setBackgroundColor:function(e){this._backgroundColor=e},configLayer:function(e,t){if(t){var o=this._layerConfig;o[e]?le(o[e],t,!0):o[e]=t;for(var a=0;a<this._zlevelList.length;a++){var c=this._zlevelList[a];(c===e||c===e+.01)&&le(this._layers[c],o[e],!0)}}},delLayer:function(e){var t=this._layers,o=this._zlevelList,a=t[e];a&&(a.dom.parentNode.removeChild(a.dom),delete t[e],o.splice(Ue(o,e),1))},resize:function(e,t){if(this._domRoot.style){var o=this._domRoot;o.style.display="none";var a=this._opts;if(null!=e&&(a.width=e),null!=t&&(a.height=t),e=this._getSize(0),t=this._getSize(1),o.style.display="",this._width!==e||t!==this._height){for(var c in o.style.width=e+"px",o.style.height=t+"px",this._layers)this._layers.hasOwnProperty(c)&&this._layers[c].resize(e,t);ee(this._progressiveLayers,function(h){h.resize(e,t)}),this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(Rs).resize(e,t)}return this},clearLayer:function(e){var t=this._layers[e];t&&t.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(e){if(this._singleCanvas&&!this._compositeManually)return this._layers[Rs].dom;var t=new ic("image",this,(e=e||{}).pixelRatio||this.dpr);if(t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor),e.pixelRatio<=this.dpr){this.refresh();var o=t.dom.width,a=t.dom.height,c=t.ctx;this.eachLayer(function(C){C.__builtin__?c.drawImage(C.dom,0,0,o,a):C.renderToCanvas&&(t.ctx.save(),C.renderToCanvas(t.ctx),t.ctx.restore())})}else for(var h={},p=this.storage.getDisplayList(!0),y=0;y<p.length;y++)this._doPaintEl(p[y],t,!0,h);return t.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,o=["width","height"][e],a=["clientWidth","clientHeight"][e],c=["paddingLeft","paddingTop"][e],h=["paddingRight","paddingBottom"][e];if(null!=t[o]&&"auto"!==t[o])return parseFloat(t[o]);var p=this.root,y=document.defaultView.getComputedStyle(p);return(p[a]||zi(y[o])||zi(p.style[o]))-(zi(y[c])||0)-(zi(y[h])||0)|0},pathToImage:function(e,t){t=t||this.dpr;var o=document.createElement("canvas"),a=o.getContext("2d"),c=e.getBoundingRect(),h=e.style,p=h.shadowBlur*t,y=h.shadowOffsetX*t,w=h.shadowOffsetY*t,C=h.hasStroke()?h.lineWidth:0,n=Math.max(C/2,p-y),i=Math.max(C/2,y+p),s=Math.max(C/2,p-w),d=Math.max(C/2,w+p),u=c.width+n+i,f=c.height+s+d;o.width=u*t,o.height=f*t,a.scale(t,t),a.clearRect(0,0,u,f),a.dpr=t;var v={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[n-c.x,s-c.y],e.rotation=0,e.scale=[1,1],e.updateTransform(),e&&e.brush(a);var _=new xr({style:{x:0,y:0,image:o}});return null!=v.position&&(_.position=e.position=v.position),null!=v.rotation&&(_.rotation=e.rotation=v.rotation),null!=v.scale&&(_.scale=e.scale=v.scale),_}},Ls.prototype={constructor:Ls,addClip:function(e){this._clips.push(e)},addAnimator:function(e){e.animation=this;for(var t=e.getClips(),o=0;o<t.length;o++)this.addClip(t[o])},removeClip:function(e){var t=Ue(this._clips,e);0<=t&&this._clips.splice(t,1)},removeAnimator:function(e){for(var t=e.getClips(),o=0;o<t.length;o++)this.removeClip(t[o]);e.animation=null},_update:function(){for(var e=(new Date).getTime()-this._pausedTime,t=e-this._time,o=this._clips,a=o.length,c=[],h=[],p=0;p<a;p++){var y=o[p],w=y.step(e,t);w&&(c.push(w),h.push(y))}for(p=0;p<a;)o[p]._needsRemove?(o[p]=o[a-1],o.pop(),a--):p++;for(a=c.length,p=0;p<a;p++)h[p].fire(c[p]);this._time=e,this.onframe(t),this.trigger("frame",t),this.stage.update&&this.stage.update()},_startLoop:function(){var e=this;this._running=!0,Ll(function t(){e._running&&(Ll(t),e._paused||e._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(e,t){var o=new Iv(e,(t=t||{}).loop,t.getter,t.setter);return this.addAnimator(o),o}},Me(Ls,si);var Mt,Hh,Hc=Oe.domSupported,al=(Hh={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:Mt=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:Se(Mt,function(e){var t=e.replace("mouse","pointer");return Hh.hasOwnProperty(t)?t:e})}),Ev={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]};function sl(e){return"mousewheel"===e&&Oe.browser.firefox?"DOMMouseScroll":e}function Bn(e){var t=e.pointerType;return"pen"===t||"touch"===t}function wd(e){e&&(e.zrByTouch=!0)}function ll(e,t){for(var o=t,a=!1;o&&9!==o.nodeType&&!(a=o.domBelongToZr||o!==t&&o===e.painterRoot);)o=o.parentNode;return a}function fo(e,t){this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}var Nv=fo.prototype;Nv.stopPropagation=Nv.stopImmediatePropagation=Nv.preventDefault=Tt;var Ps={mousedown:function(e){e=En(this.dom,e),this._mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=En(this.dom,e);var t=this._mayPointerCapture;!t||e.zrX===t[0]&&e.zrY===t[1]||Ti(this,!0),this.trigger("mousemove",e)},mouseup:function(e){e=En(this.dom,e),Ti(this,!1),this.trigger("mouseup",e)},mouseout:function(e){e=En(this.dom,e),this._pointerCapturing&&(e.zrEventControl="no_globalout"),e.zrIsToLocalDOM=ll(this,e.toElement||e.relatedTarget),this.trigger("mouseout",e)},touchstart:function(e){wd(e=En(this.dom,e)),this._lastTouchMoment=new Date,this.handler.processGesture(e,"start"),Ps.mousemove.call(this,e),Ps.mousedown.call(this,e)},touchmove:function(e){wd(e=En(this.dom,e)),this.handler.processGesture(e,"change"),Ps.mousemove.call(this,e)},touchend:function(e){wd(e=En(this.dom,e)),this.handler.processGesture(e,"end"),Ps.mouseup.call(this,e),+new Date-this._lastTouchMoment<300&&Ps.click.call(this,e)},pointerdown:function(e){Ps.mousedown.call(this,e)},pointermove:function(e){Bn(e)||Ps.mousemove.call(this,e)},pointerup:function(e){Ps.mouseup.call(this,e)},pointerout:function(e){Bn(e)||Ps.mouseout.call(this,e)}};ee(["click","mousewheel","dblclick","contextmenu"],function(e){Ps[e]=function(t){t=En(this.dom,t),this.trigger(e,t)}});var Sd={pointermove:function(e){Bn(e)||Sd.mousemove.call(this,e)},pointerup:function(e){Sd.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this._pointerCapturing;Ti(this,!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function Bl(e,t,o,a){e.mounted[t]=o,e.listenerOpts[t]=a,$n(e.domTarget,sl(t),o,a)}function qy(e){var t,o,a,h=e.mounted;for(var p in h)h.hasOwnProperty(p)&&(t=e.domTarget,o=sl(p),a=h[p],lt?t.removeEventListener(o,a,e.listenerOpts[p]):t.detachEvent("on"+o,a));e.mounted={}}function Ti(e,t){if(e._mayPointerCapture=null,Hc&&e._pointerCapturing^t){e._pointerCapturing=t;var o=e._globalHandlerScope;t?function st(e,t){function o(a){Bl(t,a,function(c){c=gn(c),ll(e,c.target)||(c=function(h,p){return En(h.dom,new fo(h,p),!0)}(e,c),t.domHandlers[a].call(e,c))},{capture:!0})}Oe.pointerEventsSupported?ee(Ev.pointer,o):Oe.touchEventsSupported||ee(Ev.mouse,o)}(e,o):qy(o)}}function qu(e,t){this.domTarget=e,this.domHandlers=t,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function xa(e,t){si.call(this),this.dom=e,this.painterRoot=t,this._localHandlerScope=new qu(e,Ps),Hc&&(this._globalHandlerScope=new qu(document,Sd)),this._pointerCapturing=!1,this._mayPointerCapture=null,function Wc(e,t){var o=t.domHandlers;Oe.pointerEventsSupported?ee(al.pointer,function(a){Bl(t,a,function(c){o[a].call(e,c)})}):(Oe.touchEventsSupported&&ee(al.touch,function(a){Bl(t,a,function(c){o[a].call(e,c),function(h){h.touching=!0,null!=h.touchTimer&&(clearTimeout(h.touchTimer),h.touchTimer=null),h.touchTimer=setTimeout(function(){h.touching=!1,h.touchTimer=null},700)}(t)})}),ee(al.mouse,function(a){Bl(t,a,function(c){c=gn(c),t.touching||o[a].call(e,c)})}))}(this,this._localHandlerScope)}var Tr=xa.prototype;Tr.dispose=function(){qy(this._localHandlerScope),Hc&&qy(this._globalHandlerScope)},Tr.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},Me(xa,si);var na=!Oe.canvasSupported,Rv={canvas:kt},ur={};function Yg(e,t){var o=new z1(wn(),e,t);return ur[o.id]=o}function zl(e,t){Rv[e]=t}var z1=function(e,t,o){o=o||{},this.dom=t,this.id=e;var a=this,c=new Rl,h=o.renderer;if(na){if(!Rv.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");h="vml"}else h&&Rv[h]||(h="canvas");var p=new Rv[h](t,c,o,e);this.storage=c,this.painter=p;var y=Oe.node||Oe.worker?null:new xa(p.getViewportRoot(),p.root);this.handler=new ys(c,p,y,p.root),this.animation=new Ls({stage:{update:rt(this.flush,this)}}),this.animation.start();var w=c.delFromStorage,C=c.addToStorage;c.delFromStorage=function(n){w.call(c,n),n&&n.removeSelfFromZr(a)},c.addToStorage=function(n){C.call(c,n),n.addSelfToZr(a)}};z1.prototype={constructor:z1,getId:function(){return this.id},add:function(e){this.storage.addRoot(e),this._needsRefresh=!0},remove:function(e){this.storage.delRoot(e),this._needsRefresh=!0},configLayer:function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this._needsRefresh=!0},setBackgroundColor:function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var e;this._needsRefresh&&(e=!0,this.refreshImmediately()),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately()),e&&this.trigger("rendered")},addHover:function(e,t){if(this.painter.addHover){var o=this.painter.addHover(e,t);return this.refreshHover(),o}},removeHover:function(e){this.painter.removeHover&&(this.painter.removeHover(e),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(e){this.painter.resize((e=e||{}).width,e.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,t){return this.painter.pathToImage(e,t)},setCursorStyle:function(e){this.handler.setCursorStyle(e)},findHover:function(e,t){return this.handler.findHover(e,t)},on:function(e,t,o){this.handler.on(e,t,o)},off:function(e,t){this.handler.off(e,t)},trigger:function(e,t){this.handler.trigger(e,t)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(e){delete ur[e]}(this.id)}};var hm=(Object.freeze||Object)({version:"4.3.2",init:Yg,dispose:function(e){if(e)e.dispose();else{for(var t in ur)ur.hasOwnProperty(t)&&ur[t].dispose();ur={}}return this},getInstance:function(e){return ur[e]},registerPainter:zl}),$u=ee,gm=ue,$E=nt,Wh="series\0";function hr(e){return e instanceof Array?e:null==e?[]:[e]}function Fl(e,t,o){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var a=0,c=o.length;a<c;a++){var h=o[a];!e.emphasis[t].hasOwnProperty(h)&&e[t].hasOwnProperty(h)&&(e.emphasis[t][h]=e[t][h])}}}var Lv=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function iu(e){return!gm(e)||$E(e)||e instanceof Date?e:e.value}function sC(e,t){t=(t||[]).slice();var o=Se(e||[],function(a,c){return{exist:a}});return $u(t,function(a,c){if(gm(a)){for(var h=0;h<o.length;h++)if(!o[h].option&&null!=a.id&&o[h].exist.id===a.id+"")return o[h].option=a,void(t[c]=null);for(h=0;h<o.length;h++){var p=o[h].exist;if(!(o[h].option||null!=p.id&&null!=a.id||null==a.name||Xg(a)||Xg(p)||p.name!==a.name+""))return o[h].option=a,void(t[c]=null)}}}),$u(t,function(a,c){if(gm(a)){for(var h=0;h<o.length;h++)if(!o[h].option&&!Xg(o[h].exist)&&null==a.id){o[h].option=a;break}h>=o.length&&o.push({option:a})}}),o}function cl(e){var t=ft();$u(e,function(o,a){var c=o.exist;c&&t.set(c.id,o)}),$u(e,function(o,a){var c=o.option;Yn(!c||null==c.id||!t.get(c.id)||t.get(c.id)===o,"id duplicates: "+(c&&c.id)),c&&null!=c.id&&t.set(c.id,o),o.keyInfo||(o.keyInfo={})}),$u(e,function(o,a){var c=o.exist,h=o.option,p=o.keyInfo;if(gm(h)){if(p.name=null!=h.name?h.name+"":c?c.name:Wh+a,c)p.id=c.id;else if(null!=h.id)p.id=h.id+"";else for(var y=0;p.id="\0"+p.name+"\0"+y++,t.get(p.id););t.set(p.id,o)}})}function $y(e){var t=e.name;return!(!t||!t.indexOf(Wh))}function Xg(e){return gm(e)&&e.id&&0===(e.id+"").indexOf("\0_ec_\0")}function pm(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?nt(t.dataIndex)?Se(t.dataIndex,function(o){return e.indexOfRawIndex(o)}):e.indexOfRawIndex(t.dataIndex):null!=t.name?nt(t.name)?Se(t.name,function(o){return e.indexOfName(o)}):e.indexOfName(t.name):void 0}function Xi(){var e="__\0ec_inner_"+dl+++"_"+Math.random().toFixed(5);return function(t){return t[e]||(t[e]={})}}var dl=0;function F1(e,t,o){if(Wt(t)){var a={};a[t+"Index"]=0,t=a}var c=o&&o.defaultMainType;!c||sc(t,c+"Index")||sc(t,c+"Id")||sc(t,c+"Name")||(t[c+"Index"]=0);var h={};return $u(t,function(p,y){if(p=t[y],"dataIndex"!==y&&"dataIndexInside"!==y){var w=y.match(/^(\w+)(Index|Id|Name)$/)||[],C=w[1],n=(w[2]||"").toLowerCase();if(!(!C||!n||null==p||"index"===n&&"none"===p||o&&o.includeMainTypes&&Ue(o.includeMainTypes,C)<0)){var i={mainType:C};"index"===n&&"all"===p||(i[n]=p);var s=e.queryComponents(i);h[C+"Models"]=s,h[C+"Model"]=s[0]}}else h[y]=p}),h}function sc(e,t){return e&&e.hasOwnProperty(t)}function zD(e,t,o){e.setAttribute?e.setAttribute(t,o):e[t]=o}function Zg(e){return"auto"===e?Oe.domSupported?"html":"richText":e||"html"}function Kg(e,t){var o=ft(),a=[];return ee(e,function(c){var h=t(c);(o.get(h)||(a.push(h),o.set(h,[]))).push(c)}),{keys:a,buckets:o}}var mm=".",fm="___EC__COMPONENT__CONTAINER___";function Cd(e){var t={main:"",sub:""};return e&&(e=e.split(mm),t.main=e[0]||"",t.sub=e[1]||""),t}function Yy(e){(e.$constructor=e).extend=function(t){function o(){t.$constructor?t.$constructor.apply(this,arguments):a.apply(this,arguments)}var a=this;return pe(o.prototype,t),o.extend=this.extend,o.superCall=lC,o.superApply=Yu,ve(o,this),o.superClass=a,o}}var mA=0;function fi(e){var t=["__\0is_clz",mA++,Math.random().toFixed(3)].join("_");e.prototype[t]=!0,e.isInstance=function(o){return!(!o||!o[t])}}function lC(e,t){var o=Qe(arguments,2);return this.superClass.prototype[t].apply(e,o)}function Yu(e,t,o){return this.superClass.prototype[t].apply(e,o)}function vm(e,t){t=t||{};var o={};if(e.registerClass=function(c,h){return h&&(Yn(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(p=h),'componentType "'+p+'" illegal'),(h=Cd(h)).sub?h.sub!==fm&&((function(p){var y=o[p.main];return y&&y[fm]||((y=o[p.main]={})[fm]=!0),y}(h))[h.sub]=c):o[h.main]=c),c;var p},e.getClass=function(c,h,p){var y=o[c];if(y&&y[fm]&&(y=h?y[h]:null),p&&!y)throw new Error(h?"Component "+c+"."+(h||"")+" not exists. Load it first.":c+".type should be specified.");return y},e.getClassesByMainType=function(c){c=Cd(c);var h=[],p=o[c.main];return p&&p[fm]?ee(p,function(y,w){w!==fm&&h.push(y)}):h.push(p),h},e.hasClass=function(c){return c=Cd(c),!!o[c.main]},e.getAllClassMainTypes=function(){var c=[];return ee(o,function(h,p){c.push(p)}),c},e.hasSubTypes=function(c){c=Cd(c);var h=o[c.main];return h&&h[fm]},e.parseClassType=Cd,t.registerWhenExtend){var a=e.extend;a&&(e.extend=function(c){var h=a.call(this,c);return e.registerClass(h,c.type)})}return e}function ym(e){for(var t=0;t<e.length;t++)e[t][1]||(e[t][1]=e[t][0]);return function(o,a,c){for(var h={},p=0;p<e.length;p++){var y=e[p][1];if(!(a&&0<=Ue(a,y)||c&&Ue(c,y)<0)){var w=o.getShallow(y);null!=w&&(h[e[p][0]]=w)}}return h}}var Pv=ym([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),ss={getLineStyle:function(e){var t=Pv(this,e);return t.lineDash=this.getLineDash(t.lineWidth),t},getLineDash:function(e){null==e&&(e=1);var t=this.get("type"),o=Math.max(e,2),a=4*e;return"solid"!==t&&null!=t&&("dashed"===t?[a,a]:[o,o])}},V1=ym([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),Xy={getAreaStyle:function(e,t){return V1(this,e,t)}},Zy=Math.pow,au=Math.sqrt,Bv=1e-8,zv=1e-4,bm=au(3),Da=1/3,kd=on(),ul=on(),hl=on();function Bs(e){return-Bv<e&&e<Bv}function xm(e){return Bv<e||e<-Bv}function gl(e,t,o,a,c){var h=1-c;return h*h*(h*e+3*c*t)+c*c*(c*a+3*h*o)}function Fv(e,t,o,a,c){var h=1-c;return 3*(((t-e)*h+2*(o-t)*c)*h+(a-o)*c*c)}function Vv(e,t,o,a,c){var h=6*o-12*t+6*e,p=9*t+3*a-3*e-9*o,y=3*t-3*e,w=0;if(Bs(p))xm(h)&&0<=(n=-y/h)&&n<=1&&(c[w++]=n);else{var C=h*h-4*p*y;if(Bs(C))c[0]=-h/(2*p);else if(0<C){var n,i=au(C),s=(-h-i)/(2*p);0<=(n=(-h+i)/(2*p))&&n<=1&&(c[w++]=n),0<=s&&s<=1&&(c[w++]=s)}}return w}function Hv(e,t,o,a,c,h){var p=(t-e)*c+e,y=(o-t)*c+t,w=(a-o)*c+o,C=(y-p)*c+p,n=(w-y)*c+y,i=(n-C)*c+C;h[0]=e,h[1]=p,h[2]=C,h[3]=i,h[4]=i,h[5]=n,h[6]=w,h[7]=a}function Ni(e,t,o,a){var c=1-a;return c*(c*e+2*a*t)+a*a*o}function H1(e,t,o,a){return 2*((1-a)*(t-e)+a*(o-t))}function W1(e,t,o){var a=e+o-2*t;return 0==a?.5:(e-t)/a}function Ky(e,t,o,a,c){var h=(t-e)*a+e,p=(o-t)*a+t,y=(p-h)*a+h;c[0]=e,c[1]=h,c[2]=y,c[3]=y,c[4]=p,c[5]=o}var Zn=Math.min,mn=Math.max,Vl=Math.sin,Wv=Math.cos,Jg=2*Math.PI,Jy=on(),gr=on(),Qy=on();function eb(e,t,o){if(0!==e.length){var a,c=e[0],h=c[0],p=c[0],y=c[1],w=c[1];for(a=1;a<e.length;a++)h=Zn(h,(c=e[a])[0]),p=mn(p,c[0]),y=Zn(y,c[1]),w=mn(w,c[1]);t[0]=h,t[1]=y,o[0]=p,o[1]=w}}function xt(e,t,o,a,c,h){c[0]=Zn(e,o),c[1]=Zn(t,a),h[0]=mn(e,o),h[1]=mn(t,a)}var _m=[],Uv=[];function tb(e,t,o,a,c,h,p,y,w,C){var n,i=Vv,s=gl,d=i(e,o,c,p,_m);for(w[0]=1/0,w[1]=1/0,C[0]=-1/0,C[1]=-1/0,n=0;n<d;n++){var u=s(e,o,c,p,_m[n]);w[0]=Zn(u,w[0]),C[0]=mn(u,C[0])}for(d=i(t,a,h,y,Uv),n=0;n<d;n++){var f=s(t,a,h,y,Uv[n]);w[1]=Zn(f,w[1]),C[1]=mn(f,C[1])}w[0]=Zn(e,w[0]),C[0]=mn(e,C[0]),w[0]=Zn(p,w[0]),C[0]=mn(p,C[0]),w[1]=Zn(t,w[1]),C[1]=mn(t,C[1]),w[1]=Zn(y,w[1]),C[1]=mn(y,C[1])}function cC(e,t,o,a,c,h,p,y,w){var C=go,n=Ln,i=Math.abs(c-h);if(i%Jg<1e-4&&1e-4<i)return y[0]=e-o,y[1]=t-a,w[0]=e+o,void(w[1]=t+a);if(Jy[0]=Wv(c)*o+e,Jy[1]=Vl(c)*a+t,gr[0]=Wv(h)*o+e,gr[1]=Vl(h)*a+t,C(y,Jy,gr),n(w,Jy,gr),(c%=Jg)<0&&(c+=Jg),(h%=Jg)<0&&(h+=Jg),h<c&&!p?h+=Jg:c<h&&p&&(c+=Jg),p){var s=h;h=c,c=s}for(var d=0;d<h;d+=Math.PI/2)c<d&&(Qy[0]=Wv(d)*o+e,Qy[1]=Vl(d)*a+t,C(y,Qy,y),n(w,Qy,w))}var di={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Uh=[],lc=[],qo=[],_a=[],fA=Math.min,Hl=Math.max,Qg=Math.cos,Gv=Math.sin,Wl=Math.sqrt,wm=Math.abs,jv=typeof Float32Array<"u",Ul=function(e){this._saveData=!e,this._saveData&&(this.data=[]),this._ctx=null};function wa(e,t,o,a,c,h,p){if(0===c)return!1;var w,y=c;if(t+y<p&&a+y<p||p<t-y&&p<a-y||e+y<h&&o+y<h||h<e-y&&h<o-y)return!1;if(e===o)return Math.abs(h-e)<=y/2;var C=(w=(t-a)/(e-o))*h-p+(e*a-o*t)/(e-o);return C*C/(w*w+1)<=y/2*y/2}function cc(e,t,o,a,c,h,p,y,w,C,n){if(0===w)return!1;var i=w;return!(t+i<n&&a+i<n&&h+i<n&&y+i<n||n<t-i&&n<a-i&&n<h-i&&n<y-i||e+i<C&&o+i<C&&c+i<C&&p+i<C||C<e-i&&C<o-i&&C<c-i&&C<p-i)&&function(s,d,u,f,v,_,k,T,M,I,O){var R,N,z,L,V,J=.005,te=1/0;kd[0]=M,kd[1]=I;for(var re=0;re<1;re+=.05)ul[0]=gl(s,u,v,k,re),ul[1]=gl(d,f,_,T,re),(L=pa(kd,ul))<te&&(R=re,te=L);te=1/0;for(var ie=0;ie<32&&!(J<zv);ie++)z=R+J,ul[0]=gl(s,u,v,k,N=R-J),ul[1]=gl(d,f,_,T,N),L=pa(ul,kd),0<=N&&L<te?(R=N,te=L):(hl[0]=gl(s,u,v,k,z),hl[1]=gl(d,f,_,T,z),V=pa(hl,kd),z<=1&&V<te?(R=z,te=V):J*=.5);return au(te)}(e,t,o,a,c,h,p,y,C,n)<=i/2}function Pt(e,t,o,a,c,h,p,y,w){if(0===p)return!1;var C=p;return!(t+C<w&&a+C<w&&h+C<w||w<t-C&&w<a-C&&w<h-C||e+C<y&&o+C<y&&c+C<y||y<e-C&&y<o-C&&y<c-C)&&function(n,i,s,d,u,f,v,_,k){var T,M=.005,I=1/0;kd[0]=v,kd[1]=_;for(var O=0;O<1;O+=.05)ul[0]=Ni(n,s,u,O),ul[1]=Ni(i,d,f,O),(L=pa(kd,ul))<I&&(T=O,I=L);I=1/0;for(var R=0;R<32&&!(M<zv);R++){var N=T-M,z=T+M;ul[0]=Ni(n,s,u,N),ul[1]=Ni(i,d,f,N);var L=pa(ul,kd);if(0<=N&&L<I)T=N,I=L;else{hl[0]=Ni(n,s,u,z),hl[1]=Ni(i,d,f,z);var V=pa(hl,kd);z<=1&&V<I?(T=z,I=V):M*=.5}}return au(I)}(e,t,o,a,c,h,y,w)<=C/2}Ul.prototype={constructor:Ul,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(e,t,o){this._ux=wm((o=o||0)/zh/e)||0,this._uy=wm(o/zh/t)||0},getContext:function(){return this._ctx},beginPath:function(e){return(this._ctx=e)&&e.beginPath(),e&&(this.dpr=e.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(e,t){return this.addData(di.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},lineTo:function(e,t){var o=wm(e-this._xi)>this._ux||wm(t-this._yi)>this._uy||this._len<5;return this.addData(di.L,e,t),this._ctx&&o&&(this._needsDash()?this._dashedLineTo(e,t):this._ctx.lineTo(e,t)),o&&(this._xi=e,this._yi=t),this},bezierCurveTo:function(e,t,o,a,c,h){return this.addData(di.C,e,t,o,a,c,h),this._ctx&&(this._needsDash()?this._dashedBezierTo(e,t,o,a,c,h):this._ctx.bezierCurveTo(e,t,o,a,c,h)),this._xi=c,this._yi=h,this},quadraticCurveTo:function(e,t,o,a){return this.addData(di.Q,e,t,o,a),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(e,t,o,a):this._ctx.quadraticCurveTo(e,t,o,a)),this._xi=o,this._yi=a,this},arc:function(e,t,o,a,c,h){return this.addData(di.A,e,t,o,o,a,c-a,0,h?0:1),this._ctx&&this._ctx.arc(e,t,o,a,c,h),this._xi=Qg(c)*o+e,this._yi=Gv(c)*o+t,this},arcTo:function(e,t,o,a,c){return this._ctx&&this._ctx.arcTo(e,t,o,a,c),this},rect:function(e,t,o,a){return this._ctx&&this._ctx.rect(e,t,o,a),this.addData(di.R,e,t,o,a),this},closePath:function(){this.addData(di.Z);var e=this._ctx,t=this._x0,o=this._y0;return e&&(this._needsDash()&&this._dashedLineTo(t,o),e.closePath()),this._xi=t,this._yi=o,this},fill:function(e){e&&e.fill(),this.toStatic()},stroke:function(e){e&&e.stroke(),this.toStatic()},setLineDash:function(e){if(e instanceof Array){this._lineDash=e;for(var t=this._dashIdx=0,o=0;o<e.length;o++)t+=e[o];this._dashSum=t}return this},setLineDashOffset:function(e){return this._dashOffset=e,this},len:function(){return this._len},setData:function(e){var t=e.length;this.data&&this.data.length===t||!jv||(this.data=new Float32Array(t));for(var o=0;o<t;o++)this.data[o]=e[o];this._len=t},appendPath:function(e){e instanceof Array||(e=[e]);for(var t=e.length,o=0,a=this._len,c=0;c<t;c++)o+=e[c].len();for(jv&&this.data instanceof Float32Array&&(this.data=new Float32Array(a+o)),c=0;c<t;c++)for(var h=e[c].data,p=0;p<h.length;p++)this.data[a++]=h[p];this._len=a},addData:function(e){if(this._saveData){var t=this.data;this._len+arguments.length>t.length&&(this._expandData(),t=this.data);for(var o=0;o<arguments.length;o++)t[this._len++]=arguments[o];this._prevCmd=e}},_expandData:function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(e,t){var o,a,c=this._dashSum,h=this._dashOffset,p=this._lineDash,y=this._ctx,w=this._xi,C=this._yi,n=e-w,i=t-C,s=Wl(n*n+i*i),d=w,u=C,f=p.length;for(h<0&&(h=c+h),d-=(h%=c)*(n/=s),u-=h*(i/=s);0<n&&d<=e||n<0&&e<=d||0===n&&(0<i&&u<=t||i<0&&t<=u);)d+=n*(o=p[a=this._dashIdx]),u+=i*o,this._dashIdx=(a+1)%f,0<n&&d<w||n<0&&w<d||0<i&&u<C||i<0&&C<u||y[a%2?"moveTo":"lineTo"](0<=n?fA(d,e):Hl(d,e),0<=i?fA(u,t):Hl(u,t));this._dashOffset=-Wl((n=d-e)*n+(i=u-t)*i)},_dashedBezierTo:function(e,t,o,a,c,h){var p,y,w,C,n,i=this._dashSum,s=this._dashOffset,d=this._lineDash,u=this._ctx,f=this._xi,v=this._yi,_=gl,k=0,T=this._dashIdx,M=d.length,I=0;for(s<0&&(s=i+s),s%=i,p=0;p<1;p+=.1)y=_(f,e,o,c,p+.1)-_(f,e,o,c,p),w=_(v,t,a,h,p+.1)-_(v,t,a,h,p),k+=Wl(y*y+w*w);for(;T<M&&!(s<(I+=d[T]));T++);for(p=(I-s)/k;p<=1;)C=_(f,e,o,c,p),n=_(v,t,a,h,p),T%2?u.moveTo(C,n):u.lineTo(C,n),p+=d[T]/k,T=(T+1)%M;T%2!=0&&u.lineTo(c,h),this._dashOffset=-Wl((y=c-C)*y+(w=h-n)*w)},_dashedQuadraticTo:function(e,t,o,a){var c=o,h=a;o=(o+2*e)/3,a=(a+2*t)/3,this._dashedBezierTo(e=(this._xi+2*e)/3,t=(this._yi+2*t)/3,o,a,c,h)},toStatic:function(){var e=this.data;e instanceof Array&&(e.length=this._len,jv&&(this.data=new Float32Array(e)))},getBoundingRect:function(){Uh[0]=Uh[1]=qo[0]=qo[1]=Number.MAX_VALUE,lc[0]=lc[1]=_a[0]=_a[1]=-Number.MAX_VALUE;for(var e,t,o,a,c,h,p,y,w,C,n,i,s,d,u=this.data,f=0,v=0,_=0,k=0,T=0;T<u.length;){var M=u[T++];switch(1===T&&(_=f=u[T],k=v=u[T+1]),M){case di.M:f=_=u[T++],v=k=u[T++],qo[0]=_,qo[1]=k,_a[0]=_,_a[1]=k;break;case di.L:xt(f,v,u[T],u[T+1],qo,_a),f=u[T++],v=u[T++];break;case di.C:tb(f,v,u[T++],u[T++],u[T++],u[T++],u[T],u[T+1],qo,_a),f=u[T++],v=u[T++];break;case di.Q:t=v,o=u[T++],a=u[T++],h=u[T+1],p=qo,y=_a,C=w=void 0,C=Ni,n=mn(Zn((w=W1)(e=f,o,c=u[T]),1),0),i=mn(Zn(w(t,a,h),1),0),s=C(e,o,c,n),d=C(t,a,h,i),p[0]=Zn(e,c,s),p[1]=Zn(t,h,d),y[0]=mn(e,c,s),y[1]=mn(t,h,d),f=u[T++],v=u[T++];break;case di.A:var I=u[T++],O=u[T++],R=u[T++],N=u[T++],z=u[T++],L=u[T++]+z;T+=1;var V=1-u[T++];1===T&&(_=Qg(z)*R+I,k=Gv(z)*N+O),cC(I,O,R,N,z,L,V,qo,_a),f=Qg(L)*R+I,v=Gv(L)*N+O;break;case di.R:xt(_=f=u[T++],k=v=u[T++],_+u[T++],k+u[T++],qo,_a);break;case di.Z:f=_,v=k}go(Uh,Uh,qo),Ln(lc,lc,_a)}return 0===T&&(Uh[0]=Uh[1]=lc[0]=lc[1]=0),new Ro(Uh[0],Uh[1],lc[0]-Uh[0],lc[1]-Uh[1])},rebuildPath:function(e){for(var t,o,a,c,h,p,y=this.data,w=this._ux,C=this._uy,n=this._len,i=0;i<n;){var s=y[i++];switch(1===i&&(t=a=y[i],o=c=y[i+1]),s){case di.M:t=a=y[i++],o=c=y[i++],e.moveTo(a,c);break;case di.L:h=y[i++],p=y[i++],(wm(h-a)>w||wm(p-c)>C||i===n-1)&&(e.lineTo(h,p),a=h,c=p);break;case di.C:e.bezierCurveTo(y[i++],y[i++],y[i++],y[i++],y[i++],y[i++]),a=y[i-2],c=y[i-1];break;case di.Q:e.quadraticCurveTo(y[i++],y[i++],y[i++],y[i++]),a=y[i-2],c=y[i-1];break;case di.A:var d=y[i++],u=y[i++],f=y[i++],v=y[i++],_=y[i++],k=y[i++],T=y[i++],M=y[i++],I=v<f?f:v,O=v<f?1:f/v,R=v<f?v/f:1,N=_+k;.001<Math.abs(f-v)?(e.translate(d,u),e.rotate(T),e.scale(O,R),e.arc(0,0,I,_,N,1-M),e.scale(1/O,1/R),e.rotate(-T),e.translate(-d,-u)):e.arc(d,u,I,_,N,1-M),1===i&&(t=Qg(_)*f+d,o=Gv(_)*v+u),a=Qg(N)*f+d,c=Gv(N)*v+u;break;case di.R:t=a=y[i],o=c=y[i+1],e.rect(y[i++],y[i++],y[i++],y[i++]);break;case di.Z:e.closePath(),a=t,c=o}}}},Ul.CMD=di;var Mr=2*Math.PI;function Mi(e){return(e%=Mr)<0&&(e+=Mr),e}var Td=2*Math.PI;function nb(e,t,o,a,c,h,p,y,w){if(0===p)return!1;var C=p;y-=e,w-=t;var n=Math.sqrt(y*y+w*w);if(o<n-C||n+C<o)return!1;if(Math.abs(a-c)%Td<1e-4)return!0;if(h){var i=a;a=Mi(c),c=Mi(i)}else a=Mi(a),c=Mi(c);c<a&&(c+=Td);var s=Math.atan2(w,y);return s<0&&(s+=Td),a<=s&&s<=c||a<=s+Td&&s+Td<=c}function Xu(e,t,o,a,c,h){if(t<h&&a<h||h<t&&h<a||a===t)return 0;var p=a<t?1:-1,y=(h-t)/(a-t);1!=y&&0!=y||(p=a<t?.5:-.5);var w=y*(o-e)+e;return w===c?1/0:c<w?p:0}var Zu=Ul.CMD,ja=2*Math.PI,_s=1e-4,ws=[-1,-1,-1],dc=[-1,-1];function ui(e,t,o,a,c,h,p,y,w,C){if(t<C&&a<C&&h<C&&y<C||C<t&&C<a&&C<h&&C<y)return 0;var n,i=function(T,M,I,O,R,N){var z=O+3*(M-I)-T,L=3*(I-2*M+T),V=3*(M-T),J=T-R,te=L*L-3*z*V,re=L*V-9*z*J,ie=V*V-3*L*J,he=0;if(Bs(te)&&Bs(re))Bs(L)?N[0]=0:0<=(yt=-V/L)&&yt<=1&&(N[he++]=yt);else{var fe=re*re-4*te*ie;if(Bs(fe)){var ye=re/te,Ie=-ye/2;0<=(yt=-L/z+ye)&&yt<=1&&(N[he++]=yt),0<=Ie&&Ie<=1&&(N[he++]=Ie)}else if(0<fe){var He=au(fe),we=te*L+1.5*z*(-re+He),De=te*L+1.5*z*(-re-He);0<=(yt=(-L-((we=we<0?-Zy(-we,Da):Zy(we,Da))+(De=De<0?-Zy(-De,Da):Zy(De,Da))))/(3*z))&&yt<=1&&(N[he++]=yt)}else{var Be=(2*te*L-3*z*re)/(2*au(te*te*te)),et=Math.acos(Be)/3,Ye=au(te),it=Math.cos(et),yt=(-L-2*Ye*it)/(3*z),It=(Ie=(-L+Ye*(it+bm*Math.sin(et)))/(3*z),(-L+Ye*(it-bm*Math.sin(et)))/(3*z));0<=yt&&yt<=1&&(N[he++]=yt),0<=Ie&&Ie<=1&&(N[he++]=Ie),0<=It&&It<=1&&(N[he++]=It)}}return he}(t,a,h,y,C,ws);if(0===i)return 0;for(var s,d,u=0,f=-1,v=0;v<i;v++){var _=ws[v],k=0===_||1===_?.5:1;gl(e,o,c,p,_)<w||(f<0&&(f=Vv(t,a,h,y,dc),dc[1]<dc[0]&&1<f&&(n=dc[0],dc[0]=dc[1],dc[1]=n),s=gl(t,a,h,y,dc[0]),1<f&&(d=gl(t,a,h,y,dc[1]))),u+=2===f?_<dc[0]?s<t?k:-k:_<dc[1]?d<s?k:-k:y<d?k:-k:_<dc[0]?s<t?k:-k:y<s?k:-k)}return u}function Sm(e,t,o,a,c,h,p,y){if(t<y&&a<y&&h<y||y<t&&y<a&&y<h)return 0;var w=function(u,f,v,_,k){var T=u-2*f+v,M=2*(f-u),I=u-_,O=0;if(Bs(T))xm(M)&&0<=(N=-I/M)&&N<=1&&(k[O++]=N);else{var R=M*M-4*T*I;if(Bs(R))0<=(N=-M/(2*T))&&N<=1&&(k[O++]=N);else if(0<R){var N,z=au(R),L=(-M-z)/(2*T);0<=(N=(-M+z)/(2*T))&&N<=1&&(k[O++]=N),0<=L&&L<=1&&(k[O++]=L)}}return O}(t,a,h,y,ws);if(0===w)return 0;var C=W1(t,a,h);if(0<=C&&C<=1){for(var n=0,i=Ni(t,a,h,C),s=0;s<w;s++){var d=0===ws[s]||1===ws[s]?.5:1;Ni(e,o,c,ws[s])<p||(n+=ws[s]<C?i<t?d:-d:h<i?d:-d)}return n}return d=0===ws[0]||1===ws[0]?.5:1,Ni(e,o,c,ws[0])<p?0:h<t?d:-d}function Vr(e,t,o,a,c,h,p,y){if(o<(y-=t)||y<-o)return 0;var w=Math.sqrt(o*o-y*y);ws[0]=-w,ws[1]=w;var C=Math.abs(a-c);if(C<1e-4)return 0;if(C%ja<1e-4){c=ja;var n=h?1:-1;return p>=ws[a=0]+e&&p<=ws[1]+e?n:0}h?(w=a,a=Mi(c),c=Mi(w)):(a=Mi(a),c=Mi(c)),c<a&&(c+=ja);for(var i=0,s=0;s<2;s++){var d=ws[s];if(p<d+e){var u=Math.atan2(y,d);n=h?1:-1,u<0&&(u=ja+u),(a<=u&&u<=c||a<=u+ja&&u+ja<=c)&&(u>Math.PI/2&&u<1.5*Math.PI&&(n=-n),i+=n)}}return i}function qa(e,t,o,a,c){for(var h=0,p=0,y=0,w=0,C=0,n=0;n<e.length;){var i=e[n++];switch(i===Zu.M&&1<n&&(o||(h+=Xu(p,y,w,C,a,c))),1===n&&(w=p=e[n],C=y=e[n+1]),i){case Zu.M:p=w=e[n++],y=C=e[n++];break;case Zu.L:if(o){if(wa(p,y,e[n],e[n+1],t,a,c))return!0}else h+=Xu(p,y,e[n],e[n+1],a,c)||0;p=e[n++],y=e[n++];break;case Zu.C:if(o){if(cc(p,y,e[n++],e[n++],e[n++],e[n++],e[n],e[n+1],t,a,c))return!0}else h+=ui(p,y,e[n++],e[n++],e[n++],e[n++],e[n],e[n+1],a,c)||0;p=e[n++],y=e[n++];break;case Zu.Q:if(o){if(Pt(p,y,e[n++],e[n++],e[n],e[n+1],t,a,c))return!0}else h+=Sm(p,y,e[n++],e[n++],e[n],e[n+1],a,c)||0;p=e[n++],y=e[n++];break;case Zu.A:var s=e[n++],d=e[n++],u=e[n++],f=e[n++],v=e[n++],_=e[n++];n+=1;var k=1-e[n++],T=Math.cos(v)*u+s,M=Math.sin(v)*f+d;1<n?h+=Xu(p,y,T,M,a,c):(w=T,C=M);var I=(a-s)*f/u+s;if(o){if(nb(s,d,f,v,v+_,k,t,I,c))return!0}else h+=Vr(s,d,f,v,v+_,k,I,c);p=Math.cos(v+_)*u+s,y=Math.sin(v+_)*f+d;break;case Zu.R:if(w=p=e[n++],C=y=e[n++],T=w+e[n++],M=C+e[n++],o){if(wa(w,C,T,C,t,a,c)||wa(T,C,T,M,t,a,c)||wa(T,M,w,M,t,a,c)||wa(w,M,w,C,t,a,c))return!0}else h+=Xu(T,C,T,M,a,c),h+=Xu(w,M,w,C,a,c);break;case Zu.Z:if(o){if(wa(p,y,w,C,t,a,c))return!0}else h+=Xu(p,y,w,C,a,c);p=w,y=C}}return o||Math.abs(y-C)<_s||(h+=Xu(p,y,w,C,a,c)||0),0!==h}var su=qg.prototype.getCanvasPattern,zs=Math.abs,vA=new Ul(!0);function Mo(e){Ei.call(this,e),this.path=null}function dC(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}Mo.prototype={constructor:Mo,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(e,t){var o,a=this.style,c=this.path||vA,h=a.hasStroke(),p=a.hasFill(),y=a.fill,w=a.stroke,C=p&&!!y.colorStops,n=h&&!!w.colorStops,i=p&&!!y.image,s=h&&!!w.image;a.bind(e,this,t),this.setTransform(e),this.__dirty&&(C&&(o=o||this.getBoundingRect(),this._fillGradient=a.getGradient(e,y,o)),n&&(o=o||this.getBoundingRect(),this._strokeGradient=a.getGradient(e,w,o))),C?e.fillStyle=this._fillGradient:i&&(e.fillStyle=su.call(y,e)),n?e.strokeStyle=this._strokeGradient:s&&(e.strokeStyle=su.call(w,e));var d=a.lineDash,u=a.lineDashOffset,f=!!e.setLineDash,v=this.getGlobalScale();if(c.setScale(v[0],v[1],this.segmentIgnoreThreshold),this.__dirtyPath||d&&!f&&h?(c.beginPath(e),d&&!f&&(c.setLineDash(d),c.setLineDashOffset(u)),this.buildPath(c,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(e.beginPath(),this.path.rebuildPath(e)),p)if(null!=a.fillOpacity){var _=e.globalAlpha;e.globalAlpha=a.fillOpacity*a.opacity,c.fill(e),e.globalAlpha=_}else c.fill(e);d&&f&&(e.setLineDash(d),e.lineDashOffset=u),h&&(null!=a.strokeOpacity?(_=e.globalAlpha,e.globalAlpha=a.strokeOpacity*a.opacity,c.stroke(e),e.globalAlpha=_):c.stroke(e)),d&&f&&e.setLineDash([]),null!=a.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))},buildPath:function(e,t,o){},createPathProxy:function(){this.path=new Ul},getBoundingRect:function(){var e=this._rect,t=this.style,o=!e;if(o){var a=this.path;a=a||(this.path=new Ul),this.__dirtyPath&&(a.beginPath(),this.buildPath(a,this.shape,!1)),e=a.getBoundingRect()}if(this._rect=e,t.hasStroke()){var c=this._rectWithStroke||(this._rectWithStroke=e.clone());if(this.__dirty||o){c.copy(e);var h=t.lineWidth,p=t.strokeNoScale?this.getLineScale():1;t.hasFill()||(h=Math.max(h,this.strokeContainThreshold||4)),1e-10<p&&(c.width+=h/p,c.height+=h/p,c.x-=h/p/2,c.y-=h/p/2)}return c}return e},contain:function(e,t){var o=this.transformCoordToLocal(e,t),a=this.getBoundingRect(),c=this.style;if(a.contain(e=o[0],t=o[1])){var h=this.path.data;if(c.hasStroke()){var p=c.lineWidth,y=c.strokeNoScale?this.getLineScale():1;if(1e-10<y&&(c.hasFill()||(p=Math.max(p,this.strokeContainThreshold)),qa(h,p/y,!0,e,t)))return!0}if(c.hasFill())return qa(h,0,!1,e,t)}return!1},dirty:function(e){null==e&&(e=!0),e&&(this.__dirtyPath=e,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(e){return this.animate("shape",e)},attrKV:function(e,t){"shape"===e?(this.setShape(t),this.__dirtyPath=!0,this._rect=null):Ei.prototype.attrKV.call(this,e,t)},setShape:function(e,t){var o=this.shape;if(o){if(ue(e))for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);else o[e]=t;this.dirty(!0)}return this},getLineScale:function(){var e=this.transform;return e&&1e-10<zs(e[0]-1)&&1e-10<zs(e[3]-1)?Math.sqrt(zs(e[0]*e[3]-e[2]*e[1])):1}},Mo.extend=function(e){function t(a){Mo.call(this,a),e.style&&this.style.extendFrom(e.style,!1);var c=e.shape;if(c){this.shape=this.shape||{};var h=this.shape;for(var p in c)!h.hasOwnProperty(p)&&c.hasOwnProperty(p)&&(h[p]=c[p])}e.init&&e.init.call(this,a)}for(var o in ve(t,Mo),e)"style"!==o&&"shape"!==o&&(t.prototype[o]=e[o]);return t},ve(Mo,Ei);var ep=Ul.CMD,yA=[[],[],[]],bA=Math.sqrt,FD=Math.atan2,ob=function(e,t){var o,a,c,h,p,y=e.data,w=ep.M,C=ep.C,n=ep.L,i=ep.R,s=ep.A,d=ep.Q;for(h=c=0;c<y.length;){switch(o=y[c++],h=c,a=0,o){case w:case n:a=1;break;case C:a=3;break;case d:a=2;break;case s:var u=t[4],f=t[5],v=bA(t[0]*t[0]+t[1]*t[1]),_=bA(t[2]*t[2]+t[3]*t[3]),k=FD(-t[1]/_,t[0]/v);y[c]*=v,y[c++]+=u,y[c]*=_,y[c++]+=f,y[c++]*=v,y[c++]*=_,y[c++]+=k,y[c++]+=k,h=c+=2;break;case i:T[0]=y[c++],T[1]=y[c++],ir(T,T,t),y[h++]=T[0],y[h++]=T[1],T[0]+=y[c++],T[1]+=y[c++],ir(T,T,t),y[h++]=T[0],y[h++]=T[1]}for(p=0;p<a;p++){var T;(T=yA[p])[0]=y[c++],T[1]=y[c++],ir(T,T,t),y[h++]=T[0],y[h++]=T[1]}}},U1=Math.sqrt,lu=Math.sin,qv=Math.cos,$v=Math.PI,Ku=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(dC(e)*dC(t))},G1=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Ku(e,t))};function Yv(e,t,o,a,c,h,p,y,w,C,n){var i=w*($v/180),s=qv(i)*(e-o)/2+lu(i)*(t-a)/2,d=-1*lu(i)*(e-o)/2+qv(i)*(t-a)/2,u=s*s/(p*p)+d*d/(y*y);1<u&&(p*=U1(u),y*=U1(u));var f=(c===h?-1:1)*U1((p*p*(y*y)-p*p*(d*d)-y*y*(s*s))/(p*p*(d*d)+y*y*(s*s)))||0,v=f*p*d/y,_=f*-y*s/p,k=(e+o)/2+qv(i)*v-lu(i)*_,T=(t+a)/2+lu(i)*v+qv(i)*_,M=G1([1,0],[(s-v)/p,(d-_)/y]),I=[(s-v)/p,(d-_)/y],O=[(-1*s-v)/p,(-1*d-_)/y],R=G1(I,O);Ku(I,O)<=-1&&(R=$v),1<=Ku(I,O)&&(R=0),0===h&&0<R&&(R-=2*$v),1===h&&R<0&&(R+=2*$v),n.addData(C,k,T,p,y,M,R,i,h)}var uC=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,rb=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function tp(e,t){var o=function(a){if(!a)return new Ul;for(var c,h=0,p=0,y=h,w=p,C=new Ul,n=Ul.CMD,i=a.match(uC),s=0;s<i.length;s++){for(var d,u=i[s],f=u.charAt(0),v=u.match(rb)||[],_=v.length,k=0;k<_;k++)v[k]=parseFloat(v[k]);for(var T=0;T<_;){var M,I,O,R,N,z,L,V=h,J=p;switch(f){case"l":h+=v[T++],p+=v[T++],C.addData(d=n.L,h,p);break;case"L":h=v[T++],p=v[T++],C.addData(d=n.L,h,p);break;case"m":h+=v[T++],p+=v[T++],C.addData(d=n.M,h,p),y=h,w=p,f="l";break;case"M":h=v[T++],p=v[T++],C.addData(d=n.M,h,p),y=h,w=p,f="L";break;case"h":h+=v[T++],C.addData(d=n.L,h,p);break;case"H":h=v[T++],C.addData(d=n.L,h,p);break;case"v":p+=v[T++],C.addData(d=n.L,h,p);break;case"V":p=v[T++],C.addData(d=n.L,h,p);break;case"C":C.addData(d=n.C,v[T++],v[T++],v[T++],v[T++],v[T++],v[T++]),h=v[T-2],p=v[T-1];break;case"c":C.addData(d=n.C,v[T++]+h,v[T++]+p,v[T++]+h,v[T++]+p,v[T++]+h,v[T++]+p),h+=v[T-2],p+=v[T-1];break;case"S":M=h,I=p;var te=C.len(),re=C.data;c===n.C&&(M+=h-re[te-4],I+=p-re[te-3]),V=v[T++],J=v[T++],h=v[T++],p=v[T++],C.addData(d=n.C,M,I,V,J,h,p);break;case"s":M=h,I=p,te=C.len(),re=C.data,c===n.C&&(M+=h-re[te-4],I+=p-re[te-3]),V=h+v[T++],J=p+v[T++],h+=v[T++],p+=v[T++],C.addData(d=n.C,M,I,V,J,h,p);break;case"Q":V=v[T++],J=v[T++],h=v[T++],p=v[T++],C.addData(d=n.Q,V,J,h,p);break;case"q":V=v[T++]+h,J=v[T++]+p,h+=v[T++],p+=v[T++],C.addData(d=n.Q,V,J,h,p);break;case"T":M=h,I=p,te=C.len(),re=C.data,c===n.Q&&(M+=h-re[te-4],I+=p-re[te-3]),h=v[T++],p=v[T++],C.addData(d=n.Q,M,I,h,p);break;case"t":M=h,I=p,te=C.len(),re=C.data,c===n.Q&&(M+=h-re[te-4],I+=p-re[te-3]),h+=v[T++],p+=v[T++],C.addData(d=n.Q,M,I,h,p);break;case"A":O=v[T++],R=v[T++],N=v[T++],z=v[T++],L=v[T++],Yv(V=h,J=p,h=v[T++],p=v[T++],z,L,O,R,N,d=n.A,C);break;case"a":O=v[T++],R=v[T++],N=v[T++],z=v[T++],L=v[T++],Yv(V=h,J=p,h+=v[T++],p+=v[T++],z,L,O,R,N,d=n.A,C)}}"z"!==f&&"Z"!==f||(C.addData(d=n.Z),h=y,p=w),c=d}return C.toStatic(),C}(e);return(t=t||{}).buildPath=function(a){if(a.setData)a.setData(o.data),(c=a.getContext())&&a.rebuildPath(c);else{var c=a;o.rebuildPath(c)}},t.applyTransform=function(a){ob(o,a),this.dirty(!0)},t}function j1(e,t){return new Mo(tp(e,t))}var Yo=function(e){Ei.call(this,e)};function np(e){return Oe.browser.ie&&11<=Oe.browser.version?function(){var t,o=this.__clipPaths,a=this.style;if(o)for(var c=0;c<o.length;c++){var h=o[c],p=h&&h.shape,y=h&&h.type;if(p&&("sector"===y&&p.startAngle===p.endAngle||"rect"===y&&(!p.width||!p.height))){for(var w=0;w<Ad.length;w++)Ad[w][2]=a[Ad[w][0]],a[Ad[w][0]]=Ad[w][1];t=!0;break}}if(e.apply(this,arguments),t)for(w=0;w<Ad.length;w++)a[Ad[w][0]]=Ad[w][2]}:e}Yo.prototype={constructor:Yo,type:"text",brush:function(e,t){var o=this.style;this.__dirty&&xo(o),o.fill=o.stroke=o.shadowBlur=o.shadowColor=o.shadowOffsetX=o.shadowOffsetY=null;var a=o.text;null!=a&&(a+=""),br(a,o)?(this.setTransform(e),jo(this,e,a,o,null,t),this.restoreTransform(e)):e.__attrCachedBy=Ns.NONE},getBoundingRect:function(){var e=this.style;if(this.__dirty&&xo(e),!this._rect){var t=e.text;null!=t?t+="":t="";var o=rl(e.text+"",e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich);if(o.x+=e.x||0,o.y+=e.y||0,pA(e.textStroke,e.textStrokeWidth)){var a=e.textStrokeWidth;o.x-=a/2,o.y-=a/2,o.width+=a,o.height+=a}this._rect=o}return this._rect}},ve(Yo,Ei);var Md=Mo.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(e,t,o){o&&e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI,!0)}}),Ad=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],uc=Mo.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:np(Mo.prototype.brush),buildPath:function(e,t){var o=t.cx,a=t.cy,c=Math.max(t.r0||0,0),h=Math.max(t.r,0),p=t.startAngle,y=t.endAngle,w=t.clockwise,C=Math.cos(p),n=Math.sin(p);e.moveTo(C*c+o,n*c+a),e.lineTo(C*h+o,n*h+a),e.arc(o,a,h,p,y,!w),e.lineTo(Math.cos(y)*c+o,Math.sin(y)*c+a),0!==c&&e.arc(o,a,c,y,p,w),e.closePath()}}),op=Mo.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(e,t){var o=t.cx,a=t.cy,c=2*Math.PI;e.moveTo(o+t.r,a),e.arc(o,a,t.r,0,c,!1),e.moveTo(o+t.r0,a),e.arc(o,a,t.r0,0,c,!0)}});function rp(e,t,o,a,c,h,p){var y=.5*(o-e),w=.5*(a-t);return(2*(t-o)+y+w)*p+(-3*(t-o)-2*y-w)*h+y*c+t}function Sa(e,t,o){var a=t.points,c=t.smooth;if(a&&2<=a.length){if(c&&"spline"!==c){var h=function(s,d,u,f){var v,_,k,T,M=[],I=[],O=[],R=[];if(f){k=[1/0,1/0],T=[-1/0,-1/0];for(var N=0,z=s.length;N<z;N++)go(k,k,s[N]),Ln(T,T,s[N]);go(k,k,f[0]),Ln(T,T,f[1])}for(N=0,z=s.length;N<z;N++){var L=s[N];if(u)v=s[N?N-1:z-1],_=s[(N+1)%z];else{if(0===N||N===z-1){M.push(no(s[N]));continue}v=s[N-1],_=s[N+1]}Go(I,_,v),ho(I,I,d);var V=bo(L,v),J=bo(L,_),te=V+J;0!==te&&(V/=te,J/=te),ho(O,I,-V),ho(R,I,J);var re=Rn([],L,O),ie=Rn([],L,R);f&&(Ln(re,re,k),go(re,re,T),Ln(ie,ie,k),go(ie,ie,T)),M.push(re),M.push(ie)}return u&&M.push(M.shift()),M}(a,c,o,t.smoothConstraint);e.moveTo(a[0][0],a[0][1]);for(var p=a.length,y=0;y<(o?p:p-1);y++){var w=h[2*y],C=h[2*y+1],n=a[(y+1)%p];e.bezierCurveTo(w[0],w[1],C[0],C[1],n[0],n[1])}}else{"spline"===c&&(a=function(s,d){for(var u=s.length,f=[],v=0,_=1;_<u;_++)v+=bo(s[_-1],s[_]);var k=v/2;for(k=k<u?u:k,_=0;_<k;_++){var T,M,I,O=_/(k-1)*(d?u:u-1),R=Math.floor(O),N=O-R,z=s[R%u];I=d?(T=s[(R-1+u)%u],M=s[(R+1)%u],s[(R+2)%u]):(T=s[0===R?R:R-1],M=s[u-2<R?u-1:R+1],s[u-3<R?u-1:R+2]);var L=N*N,V=N*L;f.push([rp(T[0],z[0],M[0],I[0],N,L,V),rp(T[1],z[1],M[1],I[1],N,L,V)])}return f}(a,o)),e.moveTo(a[0][0],a[0][1]),y=1;for(var i=a.length;y<i;y++)e.lineTo(a[y][0],a[y][1])}o&&e.closePath()}}var pl=Mo.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(e,t){Sa(e,t,!0)}}),Zi=Mo.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(e,t){Sa(e,t,!1)}}),Cm=Math.round;function cu(e,t,o){if(t){var a=t.x1,c=t.x2,h=t.y1,p=t.y2;e.x1=a,e.x2=c,e.y1=h,e.y2=p;var y=o&&o.lineWidth;y&&(Cm(2*a)===Cm(2*c)&&(e.x1=e.x2=$a(a,y,!0)),Cm(2*h)===Cm(2*p)&&(e.y1=e.y2=$a(h,y,!0)))}}function km(e,t,o){if(t){var a=t.x,c=t.y,h=t.width,p=t.height;e.x=a,e.y=c,e.width=h,e.height=p;var y=o&&o.lineWidth;y&&(e.x=$a(a,y,!0),e.y=$a(c,y,!0),e.width=Math.max($a(a+h,y,!1)-e.x,0===h?0:1),e.height=Math.max($a(c+p,y,!1)-e.y,0===p?0:1))}}function $a(e,t,o){if(!t)return e;var a=Cm(2*e);return(a+Cm(t))%2==0?a/2:(a+(o?1:-1))/2}var oa={},sr=Mo.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(e,t){var o,a,c,h;this.subPixelOptimize?(km(oa,t,this.style),o=oa.x,a=oa.y,c=oa.width,h=oa.height,oa.r=t.r,t=oa):(o=t.x,a=t.y,c=t.width,h=t.height),t.r?Po(e,t):e.rect(o,a,c,h),e.closePath()}}),Xv={},Ya=Mo.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var o,a,c,h;h=this.subPixelOptimize?(cu(Xv,t,this.style),o=Xv.x1,a=Xv.y1,c=Xv.x2,Xv.y2):(o=t.x1,a=t.y1,c=t.x2,t.y2);var p=t.percent;0!==p&&(e.moveTo(o,a),p<1&&(c=o*(1-p)+c*p,h=a*(1-p)+h*p),e.lineTo(c,h))},pointAt:function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]}}),ml=[];function ib(e,t,o){return null===e.cpx2||null===e.cpy2?[(o?Fv:gl)(e.x1,e.cpx1,e.cpx2,e.x2,t),(o?Fv:gl)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(o?H1:Ni)(e.x1,e.cpx1,e.x2,t),(o?H1:Ni)(e.y1,e.cpy1,e.y2,t)]}function Uc(e){this.colorStops=e||[]}var q1=Mo.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var o=t.x1,a=t.y1,c=t.x2,h=t.y2,p=t.cpx1,y=t.cpy1,w=t.cpx2,C=t.cpy2,n=t.percent;0!==n&&(e.moveTo(o,a),null==w||null==C?(n<1&&(Ky(o,p,c,n,ml),p=ml[1],c=ml[2],Ky(a,y,h,n,ml),y=ml[1],h=ml[2]),e.quadraticCurveTo(p,y,c,h)):(n<1&&(Hv(o,p,w,c,n,ml),p=ml[1],w=ml[2],c=ml[3],Hv(a,y,C,h,n,ml),y=ml[1],C=ml[2],h=ml[3]),e.bezierCurveTo(p,y,w,C,c,h)))},pointAt:function(e){return ib(this.shape,e,!1)},tangentAt:function(e){var t=ib(this.shape,e,!0);return vn(t,t)}}),Tm=Mo.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(e,t){var o=t.cx,a=t.cy,c=Math.max(t.r,0),h=t.startAngle,p=t.endAngle,y=t.clockwise,w=Math.cos(h),C=Math.sin(h);e.moveTo(w*c+o,C*c+a),e.arc(o,a,c,h,p,!y)}}),Ju=Mo.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var e=this.__dirtyPath,t=this.shape.paths,o=0;o<t.length;o++)e=e||t[o].__dirtyPath;this.__dirtyPath=e,this.__dirty=this.__dirty||e},beforeBrush:function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),o=0;o<e.length;o++)e[o].path||e[o].createPathProxy(),e[o].path.setScale(t[0],t[1],e[o].segmentIgnoreThreshold)},buildPath:function(e,t){for(var o=t.paths||[],a=0;a<o.length;a++)o[a].buildPath(e,o[a].shape,!0)},afterBrush:function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),Mo.prototype.getBoundingRect.call(this)}});function Gc(e,t,o,a,c,h){this.x=e??0,this.y=t??0,this.x2=o??1,this.y2=a??0,this.type="linear",this.global=h||!1,Uc.call(this,c)}function Mm(e,t,o,a,c){this.x=e??.5,this.y=t??.5,this.r=o??.5,this.type="radial",this.global=c||!1,Uc.call(this,a)}function Kn(e){Ei.call(this,e),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}Uc.prototype={constructor:Uc,addColorStop:function(e,t){this.colorStops.push({offset:e,color:t})}},Gc.prototype={constructor:Gc},ve(Gc,Uc),Mm.prototype={constructor:Mm},ve(Mm,Uc),Kn.prototype.incremental=!0,Kn.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},Kn.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.dirty()},Kn.prototype.addDisplayables=function(e,t){t=t||!1;for(var o=0;o<e.length;o++)this.addDisplayable(e[o],t)},Kn.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},Kn.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++)(t=this._displayables[e]).parent=this,t.update(),t.parent=null;for(e=0;e<this._temporaryDisplayables.length;e++){var t;(t=this._temporaryDisplayables[e]).parent=this,t.update(),t.parent=null}},Kn.prototype.brush=function(e,t){for(var o=this._cursor;o<this._displayables.length;o++)(a=this._displayables[o]).beforeBrush&&a.beforeBrush(e),a.brush(e,o===this._cursor?null:this._displayables[o-1]),a.afterBrush&&a.afterBrush(e);for(this._cursor=o,o=0;o<this._temporaryDisplayables.length;o++){var a;(a=this._temporaryDisplayables[o]).beforeBrush&&a.beforeBrush(e),a.brush(e,0===o?null:this._temporaryDisplayables[o-1]),a.afterBrush&&a.afterBrush(e)}this._temporaryDisplayables=[],this.notClear=!0};var Ss=[];Kn.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new Ro(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var o=this._displayables[t],a=o.getBoundingRect().clone();o.needLocalTransform()&&a.applyTransform(o.getLocalTransform(Ss)),e.union(a)}this._rect=e}return this._rect},Kn.prototype.contain=function(e,t){var o=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(o[0],o[1]))for(var a=0;a<this._displayables.length;a++)if(this._displayables[a].contain(e,t))return!0;return!1},ve(Kn,Ei);var Qu=Math.max,ip=Math.min,Ko={},ab=1,hC={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},xA="emphasis",jr="normal",VD=1,HD={},Am={};function ra(e){return Mo.extend(e)}function eh(e,t){Am[e]=t}function cn(e){if(Am.hasOwnProperty(e))return Am[e]}function jc(e,t,o,a){var c=j1(e,t);return o&&("center"===a&&(o=_A(o,c.getBoundingRect())),pC(c,o)),c}function gC(e,t,o){var a=new xr({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(c){"center"===o&&a.setStyle(_A(t,{width:c.width,height:c.height}))}});return a}function _A(e,t){var o,a=t.width/t.height,c=e.height*a;return o=c<=e.width?e.height:(c=e.width)/a,{x:e.x+e.width/2-c/2,y:e.y+e.height/2-o/2,width:c,height:o}}var qc=function(e,t){for(var o=[],a=e.length,c=0;c<a;c++){var h=e[c];h.path||h.createPathProxy(),h.__dirtyPath&&h.buildPath(h.path,h.shape,!0),o.push(h.path)}var p=new Mo(t);return p.createPathProxy(),p.buildPath=function(y){y.appendPath(o);var w=y.getContext();w&&y.rebuildPath(w)},p};function pC(e,t){if(e.applyTransform){var o=e.getBoundingRect().calculateTransform(t);e.applyTransform(o)}}var ap=$a;function Zv(e){return null!=e&&"none"!==e}var sb=ft(),$1=0;function Kv(e){var t=e.__hoverStl;if(t&&!e.__highlighted){var o=e.__zr,a=e.useHoverLayer&&o&&"canvas"===o.painter.type;if(e.__highlighted=a?"layer":"plain",!(e.isGroup||!o&&e.useHoverLayer)){var c=e,h=e.style;a&&(h=(c=o.addHover(e)).style),Z1(h),a||function(p){if(p.__hoverStlDirty){p.__hoverStlDirty=!1;var y=p.__hoverStl;if(y){var w=p.__cachedNormalStl={};p.__cachedNormalZ2=p.z2;var C=p.style;for(var n in y)null!=y[n]&&(w[n]=C[n]);w.fill=C.fill,w.stroke=C.stroke}else p.__cachedNormalStl=p.__cachedNormalZ2=null}}(c),h.extendFrom(t),Jv(h,t,"fill"),Jv(h,t,"stroke"),cb(h),a||(e.dirty(!1),e.z2+=ab)}}}function Jv(e,t,o){!Zv(t[o])&&Zv(e[o])&&(e[o]=function(a){if("string"!=typeof a)return a;var c=sb.get(a);return c||(c=mo(a,-.1),$1<1e4&&(sb.set(a,c),$1++)),c}(e[o]))}function Y1(e){var t=e.__highlighted;if(t&&(e.__highlighted=!1,!e.isGroup))if("layer"===t)e.__zr&&e.__zr.removeHover(e);else{var o=e.style,a=e.__cachedNormalStl;a&&(Z1(o),e.setStyle(a),cb(o));var c=e.__cachedNormalZ2;null!=c&&e.z2-c===ab&&(e.z2=c)}}function sp(e,t,o){var a,c=jr,h=jr;e.__highlighted&&(c=xA,a=!0),t(e,o),e.__highlighted&&(h=xA,a=!0),e.isGroup&&e.traverse(function(p){p.isGroup||t(p,o)}),a&&e.__highDownOnUpdate&&e.__highDownOnUpdate(c,h)}function Gh(e,t){t=e.__hoverStl=!1!==t&&(e.hoverStyle||t||{}),e.__hoverStlDirty=!0,e.__highlighted&&(e.__cachedNormalStl=null,Y1(e),Kv(e))}function mC(e){lp(this,e)||this.__highByOuter||sp(this,Kv)}function fC(e){lp(this,e)||this.__highByOuter||sp(this,Y1)}function wA(e){this.__highByOuter|=1<<(e||0),sp(this,Kv)}function WD(e){(this.__highByOuter&=~(1<<(e||0)))||sp(this,Y1)}function lp(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function qr(e,t){ut(e,!0),sp(e,Gh,t)}function ut(e,t){var o=!1===t;if(e.__highDownSilentOnTouch=e.highDownSilentOnTouch,e.__highDownOnUpdate=e.highDownOnUpdate,!o||e.__highDownDispatcher){var a=o?"off":"on";e[a]("mouseover",mC)[a]("mouseout",fC),e[a]("emphasis",wA)[a]("normal",WD),e.__highByOuter=e.__highByOuter||0,e.__highDownDispatcher=!o}}function Qv(e){return!(!e||!e.__highDownDispatcher)}function vC(e){var t=HD[e];return null==t&&VD<=32&&(t=HD[e]=VD++),t}function ei(e,t,o,a,c,h,p){var y,w=(c=c||Ko).labelFetcher,C=c.labelDataIndex,n=c.labelDimIndex,i=c.labelProp,s=o.getShallow("show"),d=a.getShallow("show");(s||d)&&(w&&(y=w.getFormattedLabel(C,"normal",null,n,i)),null==y&&(y=Bt(c.defaultText)?c.defaultText(C,c):c.defaultText));var u=s?y:null,f=d?_n(w?w.getFormattedLabel(C,"emphasis",null,n,i):null,y):null;null==u&&null==f||(Fi(e,o,h,c),Fi(t,a,p,c,!0)),e.text=u,t.text=f}function jh(e,t,o){var a=e.style;t&&(Z1(a),e.setStyle(t),cb(a)),a=e.__hoverStl,o&&a&&(Z1(a),pe(a,o),cb(a))}function Fi(e,t,o,a,c){return yC(e,t,a,c),o&&pe(e,o),e}function yC(e,t,o,a){if((o=o||Ko).isRectText){var c;o.getTextPosition?c=o.getTextPosition(t,a):"outside"===(c=t.getShallow("position")||(a?null:"inside"))&&(c="top"),e.textPosition=c,e.textOffset=t.getShallow("offset");var h=t.getShallow("rotate");null!=h&&(h*=Math.PI/180),e.textRotation=h,e.textDistance=_n(t.getShallow("distance"),a?null:5)}var p,y=t.ecModel,w=y&&y.option.textStyle,C=function(s){for(var d;s&&s!==s.ecModel;){var u=(s.option||Ko).rich;if(u)for(var f in d=d||{},u)u.hasOwnProperty(f)&&(d[f]=1);s=s.parentModel}return d}(t);if(C)for(var n in p={},C)if(C.hasOwnProperty(n)){var i=t.getModel(["rich",n]);X1(p[n]={},i,w,o,a)}return e.rich=p,X1(e,t,w,o,a,!0),o.forceRich&&!o.textStyle&&(o.textStyle={}),e}function X1(e,t,o,a,c,h){o=!c&&o||Ko,e.textFill=lb(t.getShallow("color"),a)||o.color,e.textStroke=lb(t.getShallow("textBorderColor"),a)||o.textBorderColor,e.textStrokeWidth=_n(t.getShallow("textBorderWidth"),o.textBorderWidth),c||(h&&(e.insideRollbackOpt=a,cb(e)),null==e.textFill&&(e.textFill=a.autoColor)),e.fontStyle=t.getShallow("fontStyle")||o.fontStyle,e.fontWeight=t.getShallow("fontWeight")||o.fontWeight,e.fontSize=t.getShallow("fontSize")||o.fontSize,e.fontFamily=t.getShallow("fontFamily")||o.fontFamily,e.textAlign=t.getShallow("align"),e.textVerticalAlign=t.getShallow("verticalAlign")||t.getShallow("baseline"),e.textLineHeight=t.getShallow("lineHeight"),e.textWidth=t.getShallow("width"),e.textHeight=t.getShallow("height"),e.textTag=t.getShallow("tag"),h&&a.disableBox||(e.textBackgroundColor=lb(t.getShallow("backgroundColor"),a),e.textPadding=t.getShallow("padding"),e.textBorderColor=lb(t.getShallow("borderColor"),a),e.textBorderWidth=t.getShallow("borderWidth"),e.textBorderRadius=t.getShallow("borderRadius"),e.textBoxShadowColor=t.getShallow("shadowColor"),e.textBoxShadowBlur=t.getShallow("shadowBlur"),e.textBoxShadowOffsetX=t.getShallow("shadowOffsetX"),e.textBoxShadowOffsetY=t.getShallow("shadowOffsetY")),e.textShadowColor=t.getShallow("textShadowColor")||o.textShadowColor,e.textShadowBlur=t.getShallow("textShadowBlur")||o.textShadowBlur,e.textShadowOffsetX=t.getShallow("textShadowOffsetX")||o.textShadowOffsetX,e.textShadowOffsetY=t.getShallow("textShadowOffsetY")||o.textShadowOffsetY}function lb(e,t){return"auto"!==e?e:t&&t.autoColor?t.autoColor:null}function cb(e){var t,o=e.textPosition,a=e.insideRollbackOpt;if(a&&null==e.textFill){var c=a.autoColor,p=a.useInsideStyle,y=!1!==p&&(!0===p||a.isRectText&&o&&"string"==typeof o&&0<=o.indexOf("inside")),w=!y&&null!=c;(y||w)&&(t={textFill:e.textFill,textStroke:e.textStroke,textStrokeWidth:e.textStrokeWidth}),y&&(e.textFill="#fff",null==e.textStroke&&(e.textStroke=c,null==e.textStrokeWidth&&(e.textStrokeWidth=2))),w&&(e.textFill=c)}e.insideRollback=t}function Z1(e){var t=e.insideRollback;t&&(e.textFill=t.textFill,e.textStroke=t.textStroke,e.textStrokeWidth=t.textStrokeWidth,e.insideRollback=null)}function bC(e,t){var o=t&&t.getModel("textStyle");return dn([e.fontStyle||o&&o.getShallow("fontStyle")||"",e.fontWeight||o&&o.getShallow("fontWeight")||"",(e.fontSize||o&&o.getShallow("fontSize")||12)+"px",e.fontFamily||o&&o.getShallow("fontFamily")||"sans-serif"].join(" "))}function Hr(e,t,o,a,c,h){if("function"==typeof c&&(h=c,c=null),a&&a.isAnimationEnabled()){var p=e?"Update":"",y=a.getShallow("animationDuration"+p),w=a.getShallow("animationEasing"+p),C=a.getShallow("animationDelay"+p);"function"==typeof C&&(C=C(c,a.getAnimationDelayParams?a.getAnimationDelayParams(t,c):null)),"function"==typeof y&&(y=y(c)),0<y?t.animateTo(o,y,C||0,w,h,!!h):(t.stopAnimation(),t.attr(o),h&&h())}else t.stopAnimation(),t.attr(o),h&&h()}function Eo(e,t,o,a,c){Hr(!0,e,t,o,a,c)}function Fs(e,t,o,a,c){Hr(!1,e,t,o,a,c)}function qh(e,t){for(var o=tl([]);e&&e!==t;)Aa(o,e.getLocalTransform(),o),e=e.parent;return o}function vi(e,t,o){return t&&!Pe(t)&&(t=tc.getLocalTransform(t)),o&&(t=Lh([],t)),ir([],e,t)}function fl(e,t,o){var a=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),c=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),h=["left"===e?-a:"right"===e?a:0,"top"===e?-c:"bottom"===e?c:0];return h=vi(h,t,o),Math.abs(h[0])>Math.abs(h[1])?0<h[0]?"right":"left":0<h[1]?"bottom":"top"}function db(e,t,o,a){if(e&&t){var c,h=(c={},e.traverse(function(y){!y.isGroup&&y.anid&&(c[y.anid]=y)}),c);t.traverse(function(y){if(!y.isGroup&&y.anid){var w=h[y.anid];if(w){var C=p(y);y.attr(p(w)),Eo(y,C,o,y.dataIndex)}}})}function p(y){var w={position:no(y.position),rotation:y.rotation};return y.shape&&(w.shape=pe({},y.shape)),w}}function xC(e,t){return Se(e,function(o){var a=o[0];a=Qu(a,t.x),a=ip(a,t.x+t.width);var c=o[1];return c=Qu(c,t.y),[a,c=ip(c,t.y+t.height)]})}function Im(e,t,o){var a=(t=pe({rectHover:!0},t)).style={strokeNoScale:!0};if(o=o||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(a.image=e.slice(8),_e(a,o),new xr(t)):jc(e.replace("path://",""),t,o,"center")}function Dm(e,t,o,a,c){for(var h=0,p=c[c.length-1];h<c.length;h++){var y=c[h];if(_C(e,t,o,a,y[0],y[1],p[0],p[1]))return!0;p=y}}function _C(e,t,o,a,c,h,p,y){var _,w=o-e,C=a-t,n=p-c,i=y-h,s=K1(n,i,w,C);if((_=s)<=1e-6&&-1e-6<=_)return!1;var d=e-c,u=t-h,f=K1(d,u,w,C)/s;if(f<0||1<f)return!1;var v=K1(d,u,n,i)/s;return!(v<0||1<v)}function K1(e,t,o,a){return e*a-o*t}eh("circle",Md),eh("sector",uc),eh("ring",op),eh("polygon",pl),eh("polyline",Zi),eh("rect",sr),eh("line",Ya),eh("bezierCurve",q1),eh("arc",Tm);var ti=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:ab,CACHED_LABEL_STYLE_PROPERTIES:hC,extendShape:ra,extendPath:function(e,t){return function(o,a){return Mo.extend(tp(o,a))}(e,t)},registerShape:eh,getShapeClass:cn,makePath:jc,makeImage:gC,mergePath:qc,resizePath:pC,subPixelOptimizeLine:function(e){return cu(e.shape,e.shape,e.style),e},subPixelOptimizeRect:function(e){return km(e.shape,e.shape,e.style),e},subPixelOptimize:ap,setElementHoverStyle:Gh,setHoverStyle:qr,setAsHighDownDispatcher:ut,isHighDownDispatcher:Qv,getHighlightDigit:vC,setLabelStyle:ei,modifyLabelStyle:jh,setTextStyle:Fi,setText:function(e,t,o){var a,c={isRectText:!0};!1===o?a=!0:c.autoColor=o,yC(e,t,c,a)},getFont:bC,updateProps:Eo,initProps:Fs,getTransform:qh,applyTransform:vi,transformDirection:fl,groupTransition:db,clipPointsByRect:xC,clipRectByRect:function(e,t){var o=Qu(e.x,t.x),a=ip(e.x+e.width,t.x+t.width),c=Qu(e.y,t.y),h=ip(e.y+e.height,t.y+t.height);if(o<=a&&c<=h)return{x:o,y:c,width:a-o,height:h-c}},createIcon:Im,linePolygonIntersect:Dm,lineLineIntersect:_C,Group:pn,Image:xr,Text:Yo,Circle:Md,Sector:uc,Ring:op,Polygon:pl,Polyline:Zi,Rect:sr,Line:Ya,BezierCurve:q1,Arc:Tm,IncrementalDisplayable:Kn,CompoundPath:Ju,LinearGradient:Gc,RadialGradient:Mm,BoundingRect:Ro}),$h=["textStyle","color"],SA={getTextColor:function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get($h):null)},getFont:function(){return bC({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(e){return rl(e,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},$r=ym([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),Yh={getItemStyle:function(e,t){var o=$r(this,e,t),a=this.getBorderLineDash();return a&&(o.lineDash=a),o},getBorderLineDash:function(){var e=this.get("borderType");return"solid"===e||null==e?null:"dashed"===e?[5,5]:[1,1]}},cp=Me,wC=Xi();function Fo(e,t,o){this.parentModel=t,this.ecModel=o,this.option=e}function Oa(e,t,o){for(var a=0;a<t.length&&(!t[a]||null!=(e=e&&"object"==typeof e?e[t[a]]:null));a++);return null==e&&o&&(e=o.get(t)),e}function du(e,t){var o=wC(e).getParent;return o?o.call(e,t):e.parentModel}Fo.prototype={constructor:Fo,init:null,mergeOption:function(e){le(this.option,e,!0)},get:function(e,t){return null==e?this.option:Oa(this.option,this.parsePath(e),!t&&du(this,e))},getShallow:function(e,t){var o=this.option,a=null==o?o:o[e],c=!t&&du(this,e);return null==a&&c&&(a=c.getShallow(e)),a},getModel:function(e,t){var o;return new Fo(null==e?this.option:Oa(this.option,e=this.parsePath(e)),t=t||(o=du(this,e))&&o.getModel(e),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(K(this.option))},setReadOnly:function(e){},parsePath:function(e){return"string"==typeof e&&(e=e.split(".")),e},customizeGetParent:function(e){wC(this).getParent=e},isAnimationEnabled:function(){if(!Oe.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},Yy(Fo),fi(Fo),cp(Fo,ss),cp(Fo,Xy),cp(Fo,SA),cp(Fo,Yh);var SC=0;function e0(e){return[e||"",SC++,Math.random().toFixed(5)].join("_")}var J1=1e-4;function Ht(e,t,o,a){var c=t[1]-t[0],h=o[1]-o[0];if(0==c)return 0==h?o[0]:(o[0]+o[1])/2;if(a)if(0<c){if(e<=t[0])return o[0];if(e>=t[1])return o[1]}else{if(e>=t[0])return o[0];if(e<=t[1])return o[1]}else{if(e===t[0])return o[0];if(e===t[1])return o[1]}return(e-t[0])/c*h+o[0]}function rn(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return"string"==typeof e?function(o){return o.replace(/^\s+|\s+$/g,"")}(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e}function Ea(e,t,o){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),o?e:+e}function Om(e){return e.sort(function(t,o){return t-o}),e}function CA(e){if(e=+e,isNaN(e))return 0;for(var t=1,o=0;Math.round(e*t)/t!==e;)t*=10,o++;return o}function ia(e){var t=e.toString(),o=t.indexOf("e");if(0<o){var a=+t.slice(o+1);return a<0?-a:0}var c=t.indexOf(".");return c<0?0:t.length-1-c}function Xh(e,t){var o=Math.log,a=Math.LN10,c=Math.floor(o(e[1]-e[0])/a),h=Math.round(o(Math.abs(t[1]-t[0]))/a),p=Math.min(Math.max(-c+h,0),20);return isFinite(p)?p:20}function kA(e,t,o){if(!e[t])return 0;var a=F(e,function(u,f){return u+(isNaN(f)?0:f)},0);if(0===a)return 0;for(var c=Math.pow(10,o),h=Se(e,function(u){return(isNaN(u)?0:u)/a*c*100}),p=100*c,y=Se(h,function(u){return Math.floor(u)}),w=F(y,function(u,f){return u+f},0),C=Se(h,function(u,f){return u-y[f]});w<p;){for(var n=Number.NEGATIVE_INFINITY,i=null,s=0,d=C.length;s<d;++s)C[s]>n&&(n=C[s],i=s);++y[i],C[i]=0,++w}return y[t]/c}var Q1=9007199254740991;function CC(e){var t=2*Math.PI;return(e%t+t)%t}function aa(e){return-J1<e&&e<J1}var t0=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function ub(e){if(e instanceof Date)return e;if("string"!=typeof e)return null==e?new Date(NaN):new Date(Math.round(e));var t=t0.exec(e);if(!t)return new Date(NaN);if(t[8]){var o=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(o-=t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,o,+(t[5]||0),+t[6]||0,+t[7]||0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,+t[7]||0)}function Ki(e){return Math.pow(10,Vi(e))}function Vi(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return 10<=e/Math.pow(10,t)&&t++,t}function Na(e,t){var o=Vi(e),a=Math.pow(10,o),c=e/a;return e=(t?c<1.5?1:c<2.5?2:c<4?3:c<7?5:10:c<1?1:c<2?2:c<3?3:c<5?5:10)*a,-20<=o?+e.toFixed(o<0?-o:0):e}function Ra(e){e.sort(function(y,w){return function C(n,i,s){return n.interval[s]<i.interval[s]||n.interval[s]===i.interval[s]&&(n.close[s]-i.close[s]==(s?-1:1)||!s&&C(n,i,1))}(y,w,0)?-1:1});for(var t=-1/0,o=1,a=0;a<e.length;){for(var c=e[a].interval,h=e[a].close,p=0;p<2;p++)c[p]<=t&&(c[p]=t,h[p]=p?1:1-o),t=c[p],o=h[p];c[0]===c[1]&&h[0]*h[1]!=1?e.splice(a,1):a++}return e}function sa(e){return 0<=e-parseFloat(e)}var Ji=(Object.freeze||Object)({linearMap:Ht,parsePercent:rn,round:Ea,asc:Om,getPrecision:CA,getPrecisionSafe:ia,getPixelPrecision:Xh,getPercentWithPrecision:kA,MAX_SAFE_INTEGER:Q1,remRadian:CC,isRadianAroundZero:aa,parseDate:ub,quantity:Ki,quantityExponent:Vi,nice:Na,quantile:function(e,t){var o=(e.length-1)*t+1,a=Math.floor(o),c=+e[a-1],h=o-a;return h?c+h*(e[a]-c):c},reformIntervals:Ra,isNumeric:sa});function Zh(e){return isNaN(e)?"-":(e=(e+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<e.length?"."+e[1]:"")}function e_(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(o,a){return a.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var Em=uo,UD=/([&<>"'])/g,GD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Hi(e){return null==e?"":(e+"").replace(UD,function(t,o){return GD[o]})}function t_(e,t){return"{"+e+(t??"")+"}"}var kC=["a","b","c","d","e","f","g"];function n_(e,t,o){nt(t)||(t=[t]);var a=t.length;if(!a)return"";for(var c=t[0].$vars||[],h=0;h<c.length;h++){var p=kC[h];e=e.replace(t_(p),t_(p,0))}for(var y=0;y<a;y++)for(var w=0;w<c.length;w++){var C=t[y][c[w]];e=e.replace(t_(kC[w],y),o?Hi(C):C)}return e}function TA(e,t,o){return ee(t,function(a,c){e=e.replace("{"+c+"}",o?Hi(a):a)}),e}function Vs(e,t){var o=(e=Wt(e)?{color:e,extraCssText:t}:e||{}).color,c=(t=e.extraCssText,e.renderMode||"html"),h=e.markerId||"X";return o?"html"===c?"subItem"===e.type?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Hi(o)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+Hi(o)+";"+(t||"")+'"></span>':{renderMode:c,content:"{marker"+h+"|}  ",style:{color:o}}:""}function n0(e,t){return"0000".substr(0,t-(e+="").length)+e}function hc(e,t,o){"week"!==e&&"month"!==e&&"quarter"!==e&&"half-year"!==e&&"year"!==e||(e="MM-dd\nyyyy");var a=ub(t),c=o?"UTC":"",h=a["get"+c+"FullYear"](),p=a["get"+c+"Month"]()+1,y=a["get"+c+"Date"](),w=a["get"+c+"Hours"](),C=a["get"+c+"Minutes"](),n=a["get"+c+"Seconds"](),i=a["get"+c+"Milliseconds"]();return e.replace("MM",n0(p,2)).replace("M",p).replace("yyyy",h).replace("yy",h%100).replace("dd",n0(y,2)).replace("d",y).replace("hh",n0(w,2)).replace("h",w).replace("mm",n0(C,2)).replace("m",C).replace("ss",n0(n,2)).replace("s",n).replace("SSS",n0(i,3))}function o0(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)}var hb=Le;function gc(e,t){if("_blank"===t||"blank"===t){var o=window.open();o.opener=null,o.location=e}else window.open(e,t)}var vl=(Object.freeze||Object)({addCommas:Zh,toCamelCase:e_,normalizeCssArray:Em,encodeHTML:Hi,formatTpl:n_,formatTplSimple:TA,getTooltipMarker:Vs,formatTime:hc,capitalFirst:o0,truncateText:hb,getTextBoundingRect:function(e){return rl(e.text,e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich,e.truncate)},getTextRect:function(e,t,o,a,c,h,p,y){return rl(e,t,o,a,c,y,h,p)},windowOpen:gc}),gb=ee,o_=["left","right","top","bottom","width","height"],Nm=[["width","left","right"],["height","top","bottom"]];function TC(e,t,o,a,c){var h=0,p=0;null==a&&(a=1/0),null==c&&(c=1/0);var y=0;t.eachChild(function(w,C){var n,i,s=w.position,d=w.getBoundingRect(),u=t.childAt(C+1),f=u&&u.getBoundingRect();if("horizontal"===e){var v=d.width+(f?-f.x+d.x:0);y=a<(n=h+v)||w.newline?(h=0,n=v,p+=y+o,d.height):Math.max(y,d.height)}else{var _=d.height+(f?-f.y+d.y:0);y=c<(i=p+_)||w.newline?(h+=y+o,p=0,i=_,d.width):Math.max(y,d.width)}w.newline||(s[0]=h,s[1]=p,"horizontal"===e?h=n+o:p=i+o)})}var Kh=TC;function Xa(e,t,o){o=Em(o||0);var a=t.width,c=t.height,h=rn(e.left,a),p=rn(e.top,c),y=rn(e.right,a),w=rn(e.bottom,c),C=rn(e.width,a),n=rn(e.height,c),i=o[2]+o[0],s=o[1]+o[3],d=e.aspect;switch(isNaN(C)&&(C=a-y-s-h),isNaN(n)&&(n=c-w-i-p),null!=d&&(isNaN(C)&&isNaN(n)&&(a/c<d?C=.8*a:n=.8*c),isNaN(C)&&(C=d*n),isNaN(n)&&(n=C/d)),isNaN(h)&&(h=a-y-C-s),isNaN(p)&&(p=c-w-n-i),e.left||e.right){case"center":h=a/2-C/2-o[3];break;case"right":h=a-C-s}switch(e.top||e.bottom){case"middle":case"center":p=c/2-n/2-o[0];break;case"bottom":p=c-n-i}h=h||0,p=p||0,isNaN(C)&&(C=a-s-h-(y||0)),isNaN(n)&&(n=c-i-p-(w||0));var u=new Ro(h+o[3],p+o[0],C,n);return u.margin=o,u}function Jh(e,t,o,a,c){var h=!c||!c.hv||c.hv[0],p=!c||!c.hv||c.hv[1],y=c&&c.boundingMode||"all";if(h||p){var w;if("raw"===y)w="group"===e.type?new Ro(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(w=e.getBoundingRect(),e.needLocalTransform()){var C=e.getLocalTransform();(w=w.clone()).applyTransform(C)}t=Xa(_e({width:w.width,height:w.height},t),o,a);var n=e.position,i=h?t.x-w.x:0,s=p?t.y-w.y:0;e.attr("position","raw"===y?[i,s]:[n[0]+i,n[1]+s])}}function Rm(e,t,o){ue(o)||(o={});var a=o.ignoreSize;nt(a)||(a=[a,a]);var c=p(Nm[0],0),h=p(Nm[1],1);function p(n,i){var s={},d=0,u={},f=0;if(gb(n,function(k){u[k]=e[k]}),gb(n,function(k){y(t,k)&&(s[k]=u[k]=t[k]),w(s,k)&&d++,w(u,k)&&f++}),a[i])return w(t,n[1])?u[n[2]]=null:w(t,n[2])&&(u[n[1]]=null),u;if(2!==f&&d){if(2<=d)return s;for(var v=0;v<n.length;v++){var _=n[v];if(!y(s,_)&&y(e,_)){s[_]=e[_];break}}return s}return u}function y(n,i){return n.hasOwnProperty(i)}function w(n,i){return null!=n[i]&&"auto"!==n[i]}function C(n,i,s){gb(n,function(d){i[d]=s[d]})}C(Nm[0],e,c),C(Nm[1],e,h)}function Lm(e){return MC({},e)}function MC(e,t){return t&&e&&gb(o_,function(o){t.hasOwnProperty(o)&&(e[o]=t[o])}),e}wt(TC,"vertical"),wt(TC,"horizontal");var Pm,r0,jD,qD=Xi(),wo=Fo.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(e,t,o,a){Fo.call(this,e,t,o,a),this.uid=e0("ec_cpt_model")},init:function(e,t,o,a){this.mergeDefaultAndTheme(e,o)},mergeDefaultAndTheme:function(e,t){var o=this.layoutMode,a=o?Lm(e):{};le(e,t.getTheme().get(this.mainType)),le(e,this.getDefaultOption()),o&&Rm(e,a,o)},mergeOption:function(e,t){le(this.option,e,!0);var o=this.layoutMode;o&&Rm(this.option,e,o)},optionUpdated:function(e,t){},getDefaultOption:function(){var e=qD(this);if(!e.defaultOption){for(var t=[],o=this.constructor;o;){var a=o.prototype.defaultOption;a&&t.push(a),o=o.superClass}for(var c={},h=t.length-1;0<=h;h--)c=le(c,t[h],!0);e.defaultOption=c}return e.defaultOption},getReferringComponents:function(e){return this.ecModel.queryComponents({mainType:e,index:this.get(e+"Index",!0),id:this.get(e+"Id",!0)})}});function AC(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}vm(wo,{registerWhenExtend:!0}),r0={},(Pm=wo).registerSubTypeDefaulter=function(e,t){e=Cd(e),r0[e.main]=t},Pm.determineSubType=function(e,t){var o=t.type;if(!o){var a=Cd(e).main;Pm.hasSubTypes(e)&&r0[a]&&(o=r0[a](t))}return o},jD=function(e){var t=[];return ee(wo.getClassesByMainType(e),function(o){t=t.concat(o.prototype.dependencies||[])}),t=Se(t,function(o){return Cd(o).main}),"dataset"!==e&&Ue(t,"dataset")<=0&&t.unshift("dataset"),t},wo.topologicalTravel=function(e,t,o,a){if(e.length){var c=(u={},f=[],ee(d=t,function(v){var T,M,I,_=AC(u,v),k=(T=_.originalDeps=jD(v),M=d,I=[],ee(T,function(O){0<=Ue(M,O)&&I.push(O)}),I);_.entryCount=k.length,0===_.entryCount&&f.push(v),ee(k,function(T){Ue(_.predecessor,T)<0&&_.predecessor.push(T);var M=AC(u,T);Ue(M.successor,T)<0&&M.successor.push(v)})}),{graph:u,noEntryList:f}),h=c.graph,p=c.noEntryList,y={};for(ee(e,function(d){y[d]=!0});p.length;){var w=p.pop(),C=h[w],n=!!y[w];n&&(o.call(a,w,C.originalDeps.slice()),delete y[w]),ee(C.successor,n?s:i)}ee(y,function(){throw new Error("Circle dependency may exists")})}var d,u,f;function i(d){h[d].entryCount--,0===h[d].entryCount&&p.push(d)}function s(d){y[d]=!0,i(d)}},Me(wo,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var r_="";typeof navigator<"u"&&(r_=navigator.platform||"");var $D={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:r_.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},pb=Xi(),MA={clearColorPalette:function(){pb(this).colorIdx=0,pb(this).colorNameMap={}},getColorFromPalette:function(e,t,o){var a=pb(t=t||this),c=a.colorIdx||0,h=a.colorNameMap=a.colorNameMap||{};if(h.hasOwnProperty(e))return h[e];var p=hr(this.get("color",!0)),y=this.get("colorLayer",!0),w=null!=o&&y?function(n,i){for(var s=n.length,d=0;d<s;d++)if(n[d].length>i)return n[d];return n[s-1]}(y,o):p;if((w=w||p)&&w.length){var C=w[c];return e&&(h[e]=C),a.colorIdx=(c+1)%w.length,C}}},Bm="original",mb="arrayRows",Qh="objectRows",i0="keyedColumns",YD="unknown",i_="typedArray",Gl="column",fb="row";function $c(e){this.fromDataset=e.fromDataset,this.data=e.data||(e.sourceFormat===i0?{}:[]),this.sourceFormat=e.sourceFormat||YD,this.seriesLayoutBy=e.seriesLayoutBy||Gl,this.dimensionsDefine=e.dimensionsDefine,this.encodeDefine=e.encodeDefine&&ft(e.encodeDefine),this.startIndex=e.startIndex||0,this.dimensionsDetectCount=e.dimensionsDetectCount}$c.seriesDataToSource=function(e){return new $c({data:e,sourceFormat:Gt(e)?i_:Bm,fromDataset:!1})},fi($c);var Hs={Must:1,Might:2,Not:3},vb=Xi();function th(e){var t=e.option,o=t.data,a=Gt(o)?i_:Bm,c=!1,h=t.seriesLayoutBy,p=t.sourceHeader,y=t.dimensions,w=AA(e);if(w){var C=w.option;o=C.source,a=vb(w).sourceFormat,c=!0,h=h||C.seriesLayoutBy,null==p&&(p=C.sourceHeader),y=y||C.dimensions}var n=function(i,s,d,u,f){if(!i)return{dimensionsDefine:a_(f)};var v,_;if(s===mb)"auto"===u||null==u?XD(function(T){null!=T&&"-"!==T&&(Wt(T)?null==_&&(_=1):_=0)},d,i,10):_=u?1:0,f||1!==_||(f=[],XD(function(T,M){f[M]=T??""},d,i)),v=f?f.length:d===fb?i.length:i[0]?i[0].length:null;else if(s===Qh)f=f||function(T){for(var M,I=0;I<T.length&&!(M=T[I++]););if(M){var O=[];return ee(M,function(R,N){O.push(N)}),O}}(i);else if(s===i0)f||(f=[],ee(i,function(T,M){f.push(M)}));else if(s===Bm){var k=iu(i[0]);v=nt(k)&&k.length||1}return{startIndex:_,dimensionsDefine:a_(f),dimensionsDetectCount:v}}(o,a,h,p,y);vb(e).source=new $c({data:o,fromDataset:c,seriesLayoutBy:h,sourceFormat:a,dimensionsDefine:n.dimensionsDefine,startIndex:n.startIndex,dimensionsDetectCount:n.dimensionsDetectCount,encodeDefine:t.encode})}function a_(e){if(e){var t=ft();return Se(e,function(o,a){if(null==(o=pe({},ue(o)?o:{name:o})).name)return o;o.name+="",null==o.displayName&&(o.displayName=o.name);var c=t.get(o.name);return c?o.name+="-"+c.count++:t.set(o.name,{count:1}),o})}}function XD(e,t,o,a){if(null==a&&(a=1/0),t===fb)for(var c=0;c<o.length&&c<a;c++)e(o[c]?o[c][0]:null,c);else{var h=o[0]||[];for(c=0;c<h.length&&c<a;c++)e(h[c],c)}}function dp(e,t,o){var a={},c=AA(t);if(!c||!e)return a;var h,p,y=[],w=[],n=vb(t.ecModel).datasetMap,i=c.uid+"_"+o.seriesLayoutBy;ee(e=e.slice(),function(f,v){ue(f)||(e[v]={name:f}),"ordinal"===f.type&&null==h&&(p=u(e[h=v])),a[f.name]=[]});var s=n.get(i)||n.set(i,{categoryWayDim:p,valueWayDim:0});function d(f,v,_){for(var k=0;k<_;k++)f.push(v+k)}function u(f){var v=f.dimsDef;return v?v.length:1}return ee(e,function(f,v){var _=f.name,k=u(f);if(null==h){var T=s.valueWayDim;d(a[_],T,k),d(w,T,k),s.valueWayDim+=k}else h===v?(d(a[_],0,k),d(y,0,k)):(d(a[_],T=s.categoryWayDim,k),d(w,T,k),s.categoryWayDim+=k)}),y.length&&(a.itemName=y),w.length&&(a.seriesName=w),a}function yb(e,t,o){var a={};if(!AA(e))return a;var c,h=t.sourceFormat,p=t.dimensionsDefine;h!==Qh&&h!==i0||ee(p,function(C,n){"name"===(ue(C)?C.name:C)&&(c=n)});var y=function(){for(var C={},n={},i=[],s=0,d=Math.min(5,o);s<d;s++){var u=ZD(t.data,h,t.seriesLayoutBy,p,t.startIndex,s);i.push(u);var f=u===Hs.Not;if(f&&null==C.v&&s!==c&&(C.v=s),null!=C.n&&C.n!==C.v&&(f||i[C.n]!==Hs.Not)||(C.n=s),v(C)&&i[C.n]!==Hs.Not)return C;f||(u===Hs.Might&&null==n.v&&s!==c&&(n.v=s),null!=n.n&&n.n!==n.v||(n.n=s))}function v(_){return null!=_.v&&null!=_.n}return v(C)?C:v(n)?n:null}();if(y){a.value=y.v;var w=c??y.n;a.itemName=[w],a.seriesName=[w]}return a}function AA(e){var t=e.option;if(!t.data)return e.ecModel.getComponent("dataset",t.datasetIndex||0)}function ZD(e,t,o,a,c,h){var p,y,w;if(Gt(e))return Hs.Not;if(a){var C=a[h];ue(C)?(y=C.name,w=C.type):Wt(C)&&(y=C)}if(null!=w)return"ordinal"===w?Hs.Must:Hs.Not;if(t===mb)if(o===fb){for(var n=e[h],i=0;i<(n||[]).length&&i<5;i++)if(null!=(p=f(n[c+i])))return p}else for(i=0;i<e.length&&i<5;i++){var s=e[c+i];if(s&&null!=(p=f(s[h])))return p}else if(t===Qh){if(!y)return Hs.Not;for(i=0;i<e.length&&i<5;i++)if((d=e[i])&&null!=(p=f(d[y])))return p}else if(t===i0){if(!y||!(n=e[y])||Gt(n))return Hs.Not;for(i=0;i<n.length&&i<5;i++)if(null!=(p=f(n[i])))return p}else if(t===Bm)for(i=0;i<e.length&&i<5;i++){var d,u=iu(d=e[i]);if(!nt(u))return Hs.Not;if(null!=(p=f(u[h])))return p}function f(v){var _=Wt(v);return null!=v&&isFinite(v)&&""!==v?_?Hs.Might:Hs.Not:_&&"-"!==v?Hs.Must:void 0}return Hs.Not}var IC="\0_ec_inner",IA=Fo.extend({init:function(e,t,o,a){o=o||{},this.option=null,this._theme=new Fo(o),this._optionManager=a},setOption:function(e,t){Yn(!(IC in e),"please use chart.getOption()"),this._optionManager.setOption(e,t),this.resetOption(null)},resetOption:function(e){var t=!1,o=this._optionManager;if(!e||"recreate"===e){var a=o.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this.mergeOption(a)):function(p){var y,C;this.option={},this.option[IC]=1,this._componentsMap=ft({series:[]}),C=(y=p).color&&!y.colorLayer,ee(this._theme.option,function(n,i){"colorLayer"===i&&C||wo.hasClass(i)||("object"==typeof n?y[i]=y[i]?le(y[i],n,!1):K(n):null==y[i]&&(y[i]=n))}),le(p,$D,!1),this.mergeOption(p)}.call(this,a),t=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var c=o.getTimelineOption(this);c&&(this.mergeOption(c),t=!0)}if(!e||"recreate"===e||"media"===e){var h=o.getMediaOption(this,this._api);h.length&&ee(h,function(p){this.mergeOption(p,t=!0)},this)}return t},mergeOption:function(e){var t=this.option,o=this._componentsMap,a=[];(function(c){vb(c).datasetMap=ft()})(this),ee(e,function(c,h){null!=c&&(wo.hasClass(h)?h&&a.push(h):t[h]=null==t[h]?K(c):le(t[h],c,!0))}),wo.topologicalTravel(a,wo.getAllClassMainTypes(),function(c,h){var p=hr(e[c]),y=sC(o.get(c),p);cl(y),ee(y,function(C,n){var d,u,i=C.option;ue(i)&&(C.keyInfo.mainType=c,C.keyInfo.subType=(u=C.exist,(d=i).type?d.type:u?u.subType:wo.determineSubType(c,d)))});var w=function(C,n){nt(n)||(n=n?[n]:[]);var i={};return ee(n,function(s){i[s]=(C.get(s)||[]).slice()}),i}(o,h);t[c]=[],o.set(c,[]),ee(y,function(C,n){var i=C.exist,s=C.option;if(Yn(ue(s)||i,"Empty component definition"),s){var d=wo.getClass(c,C.keyInfo.subType,!0);if(i&&i.constructor===d)i.name=C.keyInfo.name,i.mergeOption(s,this),i.optionUpdated(s,!1);else{var u=pe({dependentModels:w,componentIndex:n},C.keyInfo);pe(i=new d(s,this,this,u),u),i.init(s,this,this,u),i.optionUpdated(null,!0)}}else i.mergeOption({},this),i.optionUpdated({},!1);o.get(c)[n]=i,t[c][n]=i.option},this),"series"===c&&bb(this,o.get("series"))},this),this._seriesIndicesMap=ft(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var e=K(this.option);return ee(e,function(t,o){if(wo.hasClass(o)){for(var a=(t=hr(t)).length-1;0<=a;a--)Xg(t[a])&&t.splice(a,1);e[o]=t}}),delete e[IC],e},getTheme:function(){return this._theme},getComponent:function(e,t){var o=this._componentsMap.get(e);if(o)return o[t||0]},queryComponents:function(e){var t=e.mainType;if(!t)return[];var o,a=e.index,c=e.id,h=e.name,p=this._componentsMap.get(t);if(!p||!p.length)return[];if(null!=a)nt(a)||(a=[a]),o=We(Se(a,function(C){return p[C]}),function(C){return!!C});else if(null!=c){var y=nt(c);o=We(p,function(C){return y&&0<=Ue(c,C.id)||!y&&C.id===c})}else if(null!=h){var w=nt(h);o=We(p,function(C){return w&&0<=Ue(h,C.name)||!w&&C.name===h})}else o=p.slice();return DA(o,e)},findComponents:function(e){var t,o,a,c,h,y=e.mainType,w=(o=y+"Index",a=y+"Id",c=y+"Name",!(t=e.query)||null==t[o]&&null==t[a]&&null==t[c]?null:{mainType:y,index:t[o],id:t[a],name:t[c]});return h=DA(w?this.queryComponents(w):this._componentsMap.get(y),e),e.filter?We(h,e.filter):h},eachComponent:function(e,t,o){var a=this._componentsMap;"function"==typeof e?(o=t,t=e,a.each(function(c,h){ee(c,function(p,y){t.call(o,h,p,y)})})):Wt(e)?ee(a.get(e),t,o):ue(e)&&ee(this.findComponents(e),t,o)},getSeriesByName:function(e){return We(this._componentsMap.get("series"),function(t){return t.name===e})},getSeriesByIndex:function(e){return this._componentsMap.get("series")[e]},getSeriesByType:function(e){return We(this._componentsMap.get("series"),function(t){return t.subType===e})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(e,t){ee(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];e.call(t,a,o)},this)},eachRawSeries:function(e,t){ee(this._componentsMap.get("series"),e,t)},eachSeriesByType:function(e,t,o){ee(this._seriesIndices,function(a){var c=this._componentsMap.get("series")[a];c.subType===e&&t.call(o,c,a)},this)},eachRawSeriesByType:function(e,t,o){return ee(this.getSeriesByType(e),t,o)},isSeriesFiltered:function(e){return null==this._seriesIndicesMap.get(e.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(e,t){bb(this,We(this._componentsMap.get("series"),e,t))},restoreData:function(e){var t=this._componentsMap;bb(this,t.get("series"));var o=[];t.each(function(a,c){o.push(c)}),wo.topologicalTravel(o,wo.getAllClassMainTypes(),function(a,c){ee(t.get(a),function(h){"series"===a&&function(p,y){if(y){var w=y.seiresIndex,C=y.seriesId,n=y.seriesName;return null!=w&&p.componentIndex!==w||null!=C&&p.id!==C||null!=n&&p.name!==n}}(h,e)||h.restoreData()})})}});function bb(e,t){e._seriesIndicesMap=ft(e._seriesIndices=Se(t,function(o){return o.componentIndex})||[])}function DA(e,t){return t.hasOwnProperty("subType")?We(e,function(o){return o.subType===t.subType}):e}Me(IA,MA);var KD=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function JD(e){ee(KD,function(t){this[t]=rt(e[t],e)},this)}var OA={};function yl(){this._coordinateSystems=[]}yl.prototype={constructor:yl,create:function(e,t){var o=[];ee(OA,function(a,c){var h=a.create(e,t);o=o.concat(h||[])}),this._coordinateSystems=o},update:function(e,t){ee(this._coordinateSystems,function(o){o.update&&o.update(e,t)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},yl.register=function(e,t){OA[e]=t},yl.get=function(e){return OA[e]};var xb=ee,zm=K,DC=Se,s_=le,EA=/^(min|max)?(.+)$/;function NA(e){this._api=e,this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[]}function OC(e,t,o){var a={width:t,height:o,aspectratio:t/o},c=!0;return ee(e,function(h,p){var n,i,s,y=p.match(EA);if(y&&y[1]&&y[2]){var w=y[1],C=y[2].toLowerCase();n=a[C],i=h,!("min"===(s=w)?i<=n:"max"===s?n<=i:n===i)&&(c=!1)}}),c}NA.prototype={constructor:NA,setOption:function(e,t){e&&ee(hr(e.series),function(c){c&&c.data&&Gt(c.data)&&Oo(c.data)}),e=zm(e);var o=this._optionBackup,a=function(c,h,p){var y,w,C=[],n=[],i=c.timeline;return c.baseOption&&(w=c.baseOption),(i||c.options)&&(w=w||{},C=(c.options||[]).slice()),c.media&&(w=w||{},xb(c.media,function(d){d&&d.option&&(d.query?n.push(d):y=y||d)})),(w=w||c).timeline||(w.timeline=i),xb([w].concat(C).concat(Se(n,function(d){return d.option})),function(d){xb(h,function(u){u(d,p)})}),{baseOption:w,timelineOptions:C,mediaDefault:y,mediaList:n}}.call(this,e,t,!o);this._newBaseOption=a.baseOption,o?(function(c,h){xb(h=h||{},function(p,y){if(null!=p){var w=c[y];if(wo.hasClass(y)){p=hr(p);var C=sC(w=hr(w),p);c[y]=DC(C,function(n){return n.option&&n.exist?s_(n.exist,n.option,!0):n.exist||n.option})}else c[y]=s_(w,p,!0)}})}(o.baseOption,a.baseOption),a.timelineOptions.length&&(o.timelineOptions=a.timelineOptions),a.mediaList.length&&(o.mediaList=a.mediaList),a.mediaDefault&&(o.mediaDefault=a.mediaDefault)):this._optionBackup=a},mountOption:function(e){var t=this._optionBackup;return this._timelineOptions=DC(t.timelineOptions,zm),this._mediaList=DC(t.mediaList,zm),this._mediaDefault=zm(t.mediaDefault),this._currentMediaIndices=[],zm(e?t.baseOption:this._newBaseOption)},getTimelineOption:function(e){var t,o=this._timelineOptions;if(o.length){var a=e.getComponent("timeline");a&&(t=zm(o[a.getCurrentIndex()],!0))}return t},getMediaOption:function(e){var n,t=this._api.getWidth(),o=this._api.getHeight(),a=this._mediaList,c=this._mediaDefault,h=[],p=[];if(!a.length&&!c)return p;for(var y=0,w=a.length;y<w;y++)OC(a[y].query,t,o)&&h.push(y);return!h.length&&c&&(h=[-1]),h.length&&(n=this._currentMediaIndices,!(h.join(",")===n.join(",")))&&(p=DC(h,function(C){return zm(-1===C?c.option:a[C].option)})),this._currentMediaIndices=h,p}};var jl=ee,_b=ue,RA=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function EC(e){var t=e&&e.itemStyle;if(t)for(var o=0,a=RA.length;o<a;o++){var c=RA[o],h=t.normal,p=t.emphasis;h&&h[c]&&(e[c]=e[c]||{},e[c].normal?le(e[c].normal,h[c]):e[c].normal=h[c],h[c]=null),p&&p[c]&&(e[c]=e[c]||{},e[c].emphasis?le(e[c].emphasis,p[c]):e[c].emphasis=p[c],p[c]=null)}}function ls(e,t,o){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var a=e[t].normal,c=e[t].emphasis;a&&(o?(e[t].normal=e[t].emphasis=null,_e(e[t],a)):e[t]=a),c&&(e.emphasis=e.emphasis||{},e.emphasis[t]=c)}}function a0(e){ls(e,"itemStyle"),ls(e,"lineStyle"),ls(e,"areaStyle"),ls(e,"label"),ls(e,"labelLine"),ls(e,"upperLabel"),ls(e,"edgeLabel")}function La(e,t){var o=_b(e)&&e[t],a=_b(o)&&o.textStyle;if(a)for(var c=0,h=Lv.length;c<h;c++)a.hasOwnProperty(t=Lv[c])&&(o[t]=a[t])}function Yc(e){e&&(a0(e),La(e,"label"),e.emphasis&&La(e.emphasis,"label"))}function Qi(e){return nt(e)?e:e?[e]:[]}function LA(e){return(nt(e)?e[0]:e)||{}}function NC(e){ee(PA,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var PA=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],RC=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BA=function(e,t){(function YE(e,t){jl(Qi(e.series),function(a){_b(a)&&function(c){if(_b(c)){EC(c),a0(c),La(c,"label"),La(c,"upperLabel"),La(c,"edgeLabel"),c.emphasis&&(La(c.emphasis,"label"),La(c.emphasis,"upperLabel"),La(c.emphasis,"edgeLabel")),(p=c.markPoint)&&(EC(p),Yc(p)),(y=c.markLine)&&(EC(y),Yc(y));var h=c.markArea;h&&Yc(h);var p,y,w=c.data;if("graph"===c.type){w=w||c.nodes;var C=c.links||c.edges;if(C&&!Gt(C))for(var n=0;n<C.length;n++)Yc(C[n]);ee(c.categories,function(d){a0(d)})}if(w&&!Gt(w))for(n=0;n<w.length;n++)Yc(w[n]);if((p=c.markPoint)&&p.data){var i=p.data;for(n=0;n<i.length;n++)Yc(i[n])}if((y=c.markLine)&&y.data){var s=y.data;for(n=0;n<s.length;n++)nt(s[n])?(Yc(s[n][0]),Yc(s[n][1])):Yc(s[n])}"gauge"===c.type?(La(c,"axisLabel"),La(c,"title"),La(c,"detail")):"treemap"===c.type?(ls(c.breadcrumb,"itemStyle"),ee(c.levels,function(d){a0(d)})):"tree"===c.type&&a0(c.leaves)}}(a)});var o=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&o.push("valueAxis","categoryAxis","logAxis","timeAxis"),jl(o,function(a){jl(Qi(e[a]),function(c){c&&(La(c,"axisLabel"),La(c.axisPointer,"label"))})}),jl(Qi(e.parallel),function(a){var c=a&&a.parallelAxisDefault;La(c,"axisLabel"),La(c&&c.axisPointer,"label")}),jl(Qi(e.calendar),function(a){ls(a,"itemStyle"),La(a,"dayLabel"),La(a,"monthLabel"),La(a,"yearLabel")}),jl(Qi(e.radar),function(a){La(a,"name")}),jl(Qi(e.geo),function(a){_b(a)&&(Yc(a),jl(Qi(a.regions),function(c){Yc(c)}))}),jl(Qi(e.timeline),function(a){Yc(a),ls(a,"label"),ls(a,"itemStyle"),ls(a,"controlStyle",!0);var c=a.data;nt(c)&&ee(c,function(h){ue(h)&&(ls(h,"label"),ls(h,"itemStyle"))})}),jl(Qi(e.toolbox),function(a){ls(a,"iconStyle"),jl(a.feature,function(c){ls(c,"iconStyle")})}),La(LA(e.axisPointer),"label"),La(LA(e.tooltip).axisPointer,"label")})(e,t),e.series=hr(e.series),ee(e.series,function(o){if(ue(o)){var a=o.type;if("line"===a)null!=o.clipOverflow&&(o.clip=o.clipOverflow);else if("pie"===a||"gauge"===a)null!=o.clockWise&&(o.clockwise=o.clockWise);else if("gauge"===a){var c=function(h,p){p=p.split(",");for(var y=h,w=0;w<p.length&&null!=(y=y&&y[p[w]]);w++);return y}(o,"pointer.color");null!=c&&function(h,p,y,w){p=p.split(",");for(var C,n=h,i=0;i<p.length-1;i++)null==n[C=p[i]]&&(n[C]={}),n=n[C];null!=n[p[i]]||(n[p[i]]=y)}(o,"itemStyle.color",c)}NC(o)}}),e.dataRange&&(e.visualMap=e.dataRange),ee(RC,function(o){var a=e[o];a&&(nt(a)||(a=[a]),ee(a,function(c){NC(c)}))})};function zA(e){ee(e,function(t,o){var a=[],c=[NaN,NaN],p=t.data,y=t.isStackedByIndex,w=p.map([t.stackResultDimension,t.stackedOverDimension],function(C,n,i){var s,d,u=p.get(t.stackedDimension,i);if(isNaN(u))return c;y?d=p.getRawIndex(i):s=p.get(t.stackedByDimension,i);for(var f=NaN,v=o-1;0<=v;v--){var _=e[v];if(y||(d=_.data.rawIndexOf(_.stackedByDimension,s)),0<=d){var k=_.data.getByRawIndex(_.stackResultDimension,d);if(0<=u&&0<k||u<=0&&k<0){u+=k,f=k;break}}}return a[0]=u,a[1]=f,a});p.hostModel.setData(w),t.data=w})}function FA(e,t){$c.isInstance(e)||(e=$c.seriesDataToSource(e)),this._source=e;var o=this._data=e.data,a=e.sourceFormat;a===i_&&(this._offset=0,this._dimSize=t,this._data=o),pe(this,l_[a===mb?a+"_"+e.seriesLayoutBy:a])}var LC=FA.prototype;LC.pure=!1;var l_={arrayRows_column:{pure:LC.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(e){return this._data[e+this._source.startIndex]},appendData:c_},arrayRows_row:{pure:!0,count:function(){var e=this._data[0];return e?Math.max(0,e.length-this._source.startIndex):0},getItem:function(e){e+=this._source.startIndex;for(var t=[],o=this._data,a=0;a<o.length;a++){var c=o[a];t.push(c?c[e]:null)}return t},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:PC,getItem:BC,appendData:c_},keyedColumns:{pure:!0,count:function(){var t=this._data[this._source.dimensionsDefine[0].name];return t?t.length:0},getItem:function(e){for(var t=[],o=this._source.dimensionsDefine,a=0;a<o.length;a++){var c=this._data[o[a].name];t.push(c?c[e]:null)}return t},appendData:function(e){var t=this._data;ee(e,function(o,a){for(var c=t[a]||(t[a]=[]),h=0;h<(o||[]).length;h++)c.push(o[h])})}},original:{count:PC,getItem:BC,appendData:c_},typedArray:{persistent:!(LC.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(e,t){t=t||[];for(var o=this._dimSize*(e-=this._offset),a=0;a<this._dimSize;a++)t[a]=this._data[o+a];return t},appendData:function(e){this._data=e},clean:function(){this._offset+=this.count(),this._data=null}}};function PC(){return this._data.length}function BC(e){return this._data[e]}function c_(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}var QD={arrayRows:eg,objectRows:function(e,t,o,a){return null!=o?e[a]:e},keyedColumns:eg,original:function(e,t,o,a){var c=iu(e);return null!=o&&c instanceof Array?c[o]:c},typedArray:eg};function eg(e,t,o,a){return null!=o?e[o]:e}var VA={arrayRows:HA,objectRows:function(e,t,o,a){return zC(e[t],this._dimensionInfos[t])},keyedColumns:HA,original:function(e,t,o,a){var c=e&&(null==e.value?e:e.value);return!this._rawData.pure&&function(h){return gm(h)&&!(h instanceof Array)}(e)&&(this.hasItemOption=!0),zC(c instanceof Array?c[a]:c,this._dimensionInfos[t])},typedArray:function(e,t,o,a){return e[a]}};function HA(e,t,o,a){return zC(e[a],this._dimensionInfos[t])}function zC(e,t){var o=t&&t.type;if("ordinal"!==o)return"time"===o&&"number"!=typeof e&&null!=e&&"-"!==e&&(e=+ub(e)),null==e||""===e?NaN:+e;var a=t&&t.ordinalMeta;return a?a.parseAndCollect(e):e}function up(e,t,o){if(e){var a=e.getRawDataItem(t);if(null!=a){var c,h,p=e.getProvider().getSource().sourceFormat,y=e.getDimensionInfo(o);return y&&(c=y.name,h=y.index),QD[p](a,t,h,c)}}}function WA(e,t,o){if(e){var a=e.getProvider().getSource().sourceFormat;if(a===Bm||a===Qh){var c=e.getRawDataItem(t);return a!==Bm||ue(c)||(c=null),c?c[o]:void 0}}}var eO=/\{@(.+?)\}/g,s0={getDataParams:function(e,t){var o=this.getData(t),a=this.getRawValue(e,t),c=o.getRawIndex(e),h=o.getName(e),p=o.getRawDataItem(e),y=o.getItemVisual(e,"color"),w=o.getItemVisual(e,"borderColor"),C=this.ecModel.getComponent("tooltip"),n=Zg(C&&C.get("renderMode")),i=this.mainType,s="series"===i,d=o.userOutput;return{componentType:i,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:s?this.subType:null,seriesIndex:this.seriesIndex,seriesId:s?this.id:null,seriesName:s?this.name:null,name:h,dataIndex:c,data:p,dataType:t,value:a,color:y,borderColor:w,dimensionNames:d?d.dimensionNames:null,encode:d?d.encode:null,marker:Vs({color:y,renderMode:n}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(e,t,o,a,c){t=t||"normal";var h=this.getData(o),p=h.getItemModel(e),y=this.getDataParams(e,o);null!=a&&y.value instanceof Array&&(y.value=y.value[a]);var w=p.get("normal"===t?[c||"label","formatter"]:[t,c||"label","formatter"]);return"function"==typeof w?(y.status=t,y.dimensionIndex=a,w(y)):"string"==typeof w?n_(w,y).replace(eO,function(C,n){var i=n.length;return"["===n.charAt(0)&&"]"===n.charAt(i-1)&&(n=+n.slice(1,i-1)),up(h,e,n)}):void 0},getRawValue:function(e,t){return up(this.getData(t),e)},formatTooltip:function(){}};function hp(e){return new tO(e)}function tO(e){this._reset=(e=e||{}).reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}var tg=tO.prototype;tg.perform=function(e){var t,o=this._upstream,a=e&&e.skip;if(this._dirty&&o){var c=this.context;c.data=c.outputData=o.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!a&&(t=this._plan(this.context));var h,p=n(this._modBy),y=this._modDataCount||0,w=n(e&&e.modBy),C=e&&e.modDataCount||0;function n(_){return 1<=_||(_=1),_}p===w&&y===C||(t="reset"),!this._dirty&&"reset"!==t||(this._dirty=!1,h=function(_,k){var T,M;_._dueIndex=_._outputDueEnd=_._dueEnd=0,_._settedOutputEnd=null,!k&&_._reset&&((T=_._reset(_.context))&&T.progress&&(M=T.forceFirstProgress,T=T.progress),nt(T)&&!T.length&&(T=null)),_._progress=T,_._modBy=_._modDataCount=null;var I=_._downstream;return I&&I.dirty(),M}(this,a)),this._modBy=w,this._modDataCount=C;var i=e&&e.step;if(this._dueEnd=o?o._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var s=this._dueIndex,d=Math.min(null!=i?this._dueIndex+i:1/0,this._dueEnd);if(!a&&(h||s<d)){var u=this._progress;if(nt(u))for(var f=0;f<u.length;f++)nh(this,u[f],s,d,w,C);else nh(this,u,s,d,w,C)}this._dueIndex=d,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:d}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var FC,gp,Ca,l0,c0,wb,UA=wb={reset:function(e,t,o,a){gp=e,FC=t,Ca=o,l0=a,c0=Math.ceil(l0/Ca),wb.next=1<Ca&&0<l0?Vm:Fm}};function Fm(){return gp<FC?gp++:null}function Vm(){var e=gp%c0*Ca+Math.ceil(gp/c0),t=FC<=gp?null:e<l0?e:gp;return gp++,t}function nh(e,t,o,a,c,h){UA.reset(o,a,c,h),e._callingProgress=t,e._callingProgress({start:o,end:a,count:a-o,next:UA.next},e.context)}tg.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},tg.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},tg.pipe=function(e){this._downstream===e&&!this._dirty||((this._downstream=e)._upstream=this,e.dirty())},tg.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},tg.getUpstream=function(){return this._upstream},tg.getDownstream=function(){return this._downstream},tg.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e};var ng=Xi(),Yr=wo.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(e,t,o,a){this.seriesIndex=this.componentIndex,this.dataTask=hp({count:VC,reset:HC}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,o),th(this);var c=this.getInitialData(e,o);UC(c,this),this.dataTask.context.data=c,ng(this).dataBeforeProcessed=c,Cs(this)},mergeDefaultAndTheme:function(e,t){var o=this.layoutMode,a=o?Lm(e):{},c=this.subType;wo.hasClass(c)&&(c+="Series"),le(e,t.getTheme().get(this.subType)),le(e,this.getDefaultOption()),Fl(e,"label",["show"]),this.fillDataTextStyle(e.data),o&&Rm(e,a,o)},mergeOption:function(e,t){e=le(this.option,e,!0),this.fillDataTextStyle(e.data);var o=this.layoutMode;o&&Rm(this.option,e,o),th(this);var a=this.getInitialData(e,t);UC(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,ng(this).dataBeforeProcessed=a,Cs(this)},fillDataTextStyle:function(e){if(e&&!Gt(e))for(var t=["show"],o=0;o<e.length;o++)e[o]&&e[o].label&&Fl(e[o],"label",t)},getInitialData:function(){},appendData:function(e){this.getRawData().appendData(e.data)},getData:function(e){var t=Hm(this);if(t){var o=t.context.data;return null==e?o:o.getLinkedData(e)}return ng(this).data},setData:function(e){var t=Hm(this);if(t){var o=t.context;o.data!==e&&t.modifyOutputEnd&&t.setOutputEnd(e.count()),o.outputData=e,t!==this.dataTask&&(o.data=e)}ng(this).data=e},getSource:function(){return function(e){return vb(e).source}(this)},getRawData:function(){return ng(this).dataBeforeProcessed},getBaseAxis:function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},formatTooltip:function(e,t,o,a){var c=this,h="html"===(a=a||"html")?"<br/>":"\n",p="richText"===a,y={},w=0,n=this.getData(),i=n.mapDimension("defaultedTooltip",!0),s=i.length,d=this.getRawValue(e),u=nt(d),f=n.getItemVisual(e,"color");ue(f)&&f.colorStops&&(f=(f.colorStops[0]||{}).color),f=f||"transparent";var v=(1<s||u&&!s?function(O){var R=F(O,function(J,te,re){var ie=n.getDimensionInfo(re);return J|(ie&&!1!==ie.tooltip&&null!=ie.displayName)},0),N=[];function z(J,te){var re=n.getDimensionInfo(te);if(re&&!1!==re.otherDims.tooltip){var ie=re.type,he="sub"+c.seriesIndex+"at"+w,fe=Vs({color:f,type:"subItem",renderMode:a,markerId:he}),Ie=(R?("string"==typeof fe?fe:fe.content)+Hi(re.displayName||"-")+": ":"")+Hi("ordinal"===ie?J+"":"time"===ie?t?"":hc("yyyy/MM/dd hh:mm:ss",J):Zh(J));Ie&&N.push(Ie),p&&(y[he]=f,++w)}}i.length?ee(i,function(J){z(up(n,e,J),J)}):ee(O,z);var L=R?p?"\n":"<br/>":"",V=L+N.join(L||", ");return{renderMode:a,content:V,style:y}}(d):function C(O){return{renderMode:a,content:Hi(Zh(O)),style:y}}(s?up(n,e,i[0]):u?d[0]:d)).content,_=c.seriesIndex+"at"+w,k=Vs({color:f,type:"item",renderMode:a,markerId:_});y[_]=f,++w;var T=n.getName(e),M=this.name;$y(this)||(M=""),M=M?Hi(M)+(t?": ":h):"";var I="string"==typeof k?k:k.content;return{html:t?I+M+v:M+I+(T?Hi(T)+": "+v:v),markers:y}},isAnimationEnabled:function(){if(Oe.node)return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),e},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(e,t,o){var a=this.ecModel;return MA.getColorFromPalette.call(this,e,t,o)||a.getColorFromPalette(e,t,o)},coordDimToDataDim:function(e){return this.getRawData().mapDimension(e,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function Cs(e){var t=e.name;$y(e)||(e.name=function(o){var a=o.getRawData(),c=a.mapDimension("seriesName",!0),h=[];return ee(c,function(p){var y=a.getDimensionInfo(p);y.displayName&&h.push(y.displayName)}),h.join(" ")}(e)||t)}function VC(e){return e.model.getRawData().count()}function HC(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),WC}function WC(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function UC(e,t){ee(e.CHANGABLE_METHODS,function(o){e.wrapMethod(o,wt(d_,t))})}function d_(e){var t=Hm(e);t&&t.setOutputEnd(this.count())}function Hm(e){var t=(e.ecModel||{}).scheduler,o=t&&t.getPipeline(e.uid);if(o){var a=o.currentTask;if(a){var c=a.agentStubMap;c&&(a=c.get(e.uid))}return a}}Me(Yr,s0),Me(Yr,MA);var Id=function(){this.group=new pn,this.uid=e0("viewComponent")};Id.prototype={constructor:Id,init:function(e,t){},render:function(e,t,o,a){},dispose:function(){},filterForExposedEvent:null};var u_=Id.prototype;function oh(){var e=Xi();return function(t){var o=e(t),a=t.pipelineContext,c=o.large,h=o.progressiveRender,p=o.large=a&&a.large,y=o.progressiveRender=a&&a.progressiveRender;return!!(c^p||h^y)&&"reset"}}u_.updateView=u_.updateLayout=u_.updateVisual=function(e,t,o,a){},Yy(Id),vm(Id,{registerWhenExtend:!0});var Sb=Xi(),GC=oh();function Za(){this.group=new pn,this.uid=e0("viewChart"),this.renderTask=hp({plan:Io,reset:og}),this.renderTask.context={view:this}}var ka=Za.prototype={type:"chart",init:function(e,t){},render:function(e,t,o,a){},highlight:function(e,t,o,a){rh(e.getData(),a,"emphasis")},downplay:function(e,t,o,a){rh(e.getData(),a,"normal")},remove:function(e,t){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};function GA(e,t,o){if(e&&(e.trigger(t,o),e.isGroup&&!Qv(e)))for(var a=0,c=e.childCount();a<c;a++)GA(e.childAt(a),t,o)}function rh(e,t,o){var a=pm(e,t),c=t&&null!=t.highlightKey?vC(t.highlightKey):null;null!=a?ee(hr(a),function(h){GA(e.getItemGraphicEl(h),o,c)}):e.eachItemGraphicEl(function(h){GA(h,o,c)})}function Io(e){return GC(e.model)}function og(e){var t=e.model,o=e.ecModel,a=e.api,c=e.payload,h=t.pipelineContext.progressiveRender,p=e.view,y=c&&Sb(c).updateMethod,w=h?"incrementalPrepareRender":y&&p[y]?y:"render";return"render"!==w&&p[w](t,o,a,c),ih[w]}ka.updateView=ka.updateLayout=ka.updateVisual=function(e,t,o,a){this.render(e,t,o,a)},Yy(Za),vm(Za,{registerWhenExtend:!0}),Za.markUpdateMethod=function(e,t){Sb(e).updateMethod=t};var ih={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},d0="\0__throttleOriginMethod",h_="\0__throttleRate",g_="\0__throttleType";function p_(e,t,o){var a,c,h,p,y,w=0,C=0,n=null;function i(){C=(new Date).getTime(),n=null,e.apply(h,p||[])}function s(){a=(new Date).getTime(),h=this,p=arguments;var d=y||t,u=y||o;y=null,c=a-(u?w:C)-d,clearTimeout(n),u?n=setTimeout(i,d):0<=c?i():n=setTimeout(i,-c),w=a}return t=t||0,s.clear=function(){n&&(clearTimeout(n),n=null)},s.debounceNextCall=function(d){y=d},s}function pp(e,t,o,a){var c=e[t];if(c){var h=c[d0]||c;if(c[h_]!==o||c[g_]!==a){if(null==o||!a)return e[t]=h;(c=e[t]=p_(h,o,"debounce"===a))[d0]=h,c[g_]=a,c[h_]=o}return c}}function Dd(e,t){var o=e[t];o&&o[d0]&&(e[t]=o[d0])}var jA={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var o=e.getData(),a=(e.visualColorAccessPath||"itemStyle.color").split("."),c=e.get(a),h=!Bt(c)||c instanceof Uc?null:c;c&&!h||(c=e.getColorFromPalette(e.name,null,t.getSeriesCount())),o.setVisual("color",c);var p=(e.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),y=e.get(p);if(o.setVisual("borderColor",y),!t.isSeriesFiltered(e))return h&&o.each(function(w){o.setItemVisual(w,"color",h(e.getDataParams(w)))}),{dataEach:o.hasItemOption?function(w,C){var n=w.getItemModel(C),i=n.get(a,!0),s=n.get(p,!0);null!=i&&w.setItemVisual(C,"color",i),null!=s&&w.setItemVisual(C,"borderColor",s)}:null}}},rg={legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}},nO=function(e,t){var s,o=t.getModel("aria");if(o.get("show"))if(o.get("description"))e.setAttribute("aria-label",o.get("description"));else{var a=0;t.eachSeries(function(s,d){++a},this);var c,h=o.get("data.maxCount")||10,p=o.get("series.maxCount")||10,y=Math.min(a,p);if(!(a<1)){var w=((s=t.getModel("title").option)&&s.length&&(s=s[0]),s&&s.text);c=w?n(i("general.withTitle"),{title:w}):i("general.withoutTitle");var C=[];c+=n(i(1<a?"series.multiple.prefix":"series.single.prefix"),{seriesCount:a}),t.eachSeries(function(s,d){if(d<y){var u,f=s.get("name"),v="series."+(1<a?"multiple":"single")+".";u=n(u=i(f?v+"withName":v+"withoutName"),{seriesId:s.seriesIndex,seriesName:s.get("name"),seriesType:(O=s.subType,rg.series.typeNames[O]||"\u81ea\u5b9a\u4e49\u56fe")});var _=s.getData();(window.data=_).count()>h?u+=n(i("data.partialData"),{displayCnt:h}):u+=i("data.allData");for(var k=[],T=0;T<_.count();T++)if(T<h){var M=_.getName(T),I=up(_,T);k.push(n(i(M?"data.withName":"data.withoutName"),{name:M,value:I}))}u+=k.join(i("data.separator.middle"))+i("data.separator.end"),C.push(u)}var O}),c+=C.join(i("series.multiple.separator.middle"))+i("series.multiple.separator.end"),e.setAttribute("aria-label",c)}}function n(s,d){if("string"!=typeof s)return s;var u=s;return ee(d,function(f,v){u=u.replace(new RegExp("\\{\\s*"+v+"\\s*\\}","g"),f)}),u}function i(s){var d=o.get(s);if(null!=d)return d;for(var u=s.split("."),f=rg.aria,v=0;v<u.length;++v)f=f[u[v]];return f}},bl=Math.PI;function ig(e,t,o,a){this.ecInstance=e,this.api=t,o=this._dataProcessorHandlers=o.slice(),a=this._visualHandlers=a.slice(),this._allHandlers=o.concat(a),this._stageTaskMap=ft()}var Od=ig.prototype;function Wm(e,t,o,a,c){var h;function p(y,w){return y.setDirty&&(!y.dirtyMap||y.dirtyMap.get(w.__pipeline.id))}c=c||{},ee(t,function(y,w){if(!c.visualType||c.visualType===y.visualType){var C=e._stageTaskMap.get(y.uid),n=C.seriesTaskMap,i=C.overallTask;if(i){var s,d=i.agentStubMap;d.each(function(f){p(c,f)&&(f.dirty(),s=!0)}),s&&i.dirty(),xl(i,a);var u=e.getPerformArgs(i,c.block);d.each(function(f){f.perform(u)}),h|=i.perform(u)}else n&&n.each(function(f,v){p(c,f)&&f.dirty();var _=e.getPerformArgs(f,c.block);_.skip=!y.performRawSeries&&o.isSeriesFiltered(f.context.model),xl(f,a),h|=f.perform(_)})}}),e.unfinished|=h}Od.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(o){var a=o.overallTask;a&&a.dirty()})},Od.getPerformArgs=function(e,t){if(e.__pipeline){var o=this._pipelineMap.get(e.__pipeline.id),a=o.context,c=!t&&o.progressiveEnabled&&(!a||a.progressiveRender)&&e.__idxInPipeline>o.blockIndex?o.step:null,h=a&&a.modDataCount;return{step:c,modBy:null!=h?Math.ceil(h/c):null,modDataCount:h}}},Od.getPipeline=function(e){return this._pipelineMap.get(e)},Od.updateStreamModes=function(e,t){var o=this._pipelineMap.get(e.uid),a=e.getData().count(),c=o.progressiveEnabled&&t.incrementalPrepareRender&&a>=o.threshold,h=e.get("large")&&a>=e.get("largeThreshold"),p="mod"===e.get("progressiveChunkMode")?a:null;e.pipelineContext=o.context={progressiveRender:c,modDataCount:p,large:h}},Od.restorePipelines=function(e){var t=this,o=t._pipelineMap=ft();e.eachSeries(function(a){var c=a.getProgressive(),h=a.uid;o.set(h,{id:h,head:null,tail:null,threshold:a.getProgressiveThreshold(),progressiveEnabled:c&&!(a.preventIncremental&&a.preventIncremental()),blockIndex:-1,step:Math.round(c||700),count:0}),Cb(t,a,a.dataTask)})},Od.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.ecInstance.getModel(),o=this.api;ee(this._allHandlers,function(a){var c=e.get(a.uid)||e.set(a.uid,[]);a.reset&&function(h,p,y,w,C){var n=y.seriesTaskMap||(y.seriesTaskMap=ft()),i=p.seriesType,s=p.getTargetSeries;function d(f){var v=f.uid,_=n.get(v)||n.set(v,hp({plan:Nr,reset:mp,count:fp}));_.context={model:f,ecModel:w,api:C,useClearVisual:p.isVisual&&!p.isLayout,plan:p.plan,reset:p.reset,scheduler:h},Cb(h,f,_)}p.createOnAllSeries?w.eachRawSeries(d):i?w.eachRawSeriesByType(i,d):s&&s(w,C).each(d);var u=h._pipelineMap;n.each(function(f,v){u.get(v)||(f.dispose(),n.removeKey(v))})}(this,a,c,t,o),a.overallReset&&function(h,p,y,w,C){var n=y.overallTask=y.overallTask||hp({reset:pc});n.context={ecModel:w,api:C,overallReset:p.overallReset,scheduler:h};var i=n.agentStubMap=n.agentStubMap||ft(),s=p.seriesType,d=p.getTargetSeries,u=!0,f=p.modifyOutputEnd;function v(k){var T=k.uid,M=i.get(T);M||(M=i.set(T,hp({reset:Ws,onDirty:Qt})),n.dirty()),M.context={model:k,overallProgress:u,modifyOutputEnd:f},M.agent=n,M.__block=u,Cb(h,k,M)}s?w.eachRawSeriesByType(s,v):d?d(w,C).each(v):(u=!1,ee(w.getSeries(),v));var _=h._pipelineMap;i.each(function(k,T){_.get(T)||(k.dispose(),n.dirty(),i.removeKey(T))})}(this,a,c,t,o)},this)},Od.prepareView=function(e,t,o,a){var c=e.renderTask,h=c.context;h.model=t,h.ecModel=o,h.api=a,c.__block=!e.incrementalPrepareRender,Cb(this,t,c)},Od.performDataProcessorTasks=function(e,t){Wm(this,this._dataProcessorHandlers,e,t,{block:!0})},Od.performVisualTasks=function(e,t,o){Wm(this,this._visualHandlers,e,t,o)},Od.performSeriesTasks=function(e){var t;e.eachSeries(function(o){t|=o.dataTask.perform()}),this.unfinished|=t},Od.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})};var xl=Od.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)};function pc(e){e.overallReset(e.ecModel,e.api,e.payload)}function Ws(e,t){return e.overallProgress&&uu}function uu(){this.agent.dirty(),this.getDownstream().dirty()}function Qt(){this.agent&&this.agent.dirty()}function Nr(e){return e.plan&&e.plan(e.model,e.ecModel,e.api,e.payload)}function mp(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=hr(e.reset(e.model,e.ecModel,e.api,e.payload));return 1<t.length?Se(t,function(o,a){return Um(a)}):Pa}var Pa=Um(0);function Um(e){return function(t,o){var a=o.data,c=o.resetDefines[e];if(c&&c.dataEach)for(var h=t.start;h<t.end;h++)c.dataEach(a,h);else c&&c.progress&&c.progress(t,a)}}function fp(e){return e.data.count()}function Cb(e,t,o){var c=e._pipelineMap.get(t.uid);c.head||(c.head=o),c.tail&&c.tail.pipe(o),(c.tail=o).__idxInPipeline=c.count++,o.__pipeline=c}ig.wrapStageHandler=function(e,t){return Bt(e)&&(e={overallReset:e,seriesType:function(o){u0=null;try{o(Gm,jC)}catch{}return u0}(e)}),e.uid=e0("stageHandler"),t&&(e.visualType=t),e};var u0,Gm={},jC={};function m_(e,t){for(var o in t.prototype)e[o]=Tt}function f_(){return{axisLine:{lineStyle:{color:Xr}},axisTick:{lineStyle:{color:Xr}},axisLabel:{textStyle:{color:Xr}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:Xr}}}}m_(Gm,IA),m_(jC,JD),Gm.eachSeriesByType=Gm.eachRawSeriesByType=function(e){u0=e},Gm.eachComponent=function(e){"series"===e.mainType&&e.subType&&(u0=e.subType)};var qA=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],qC={color:qA,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],qA]},Xr="#eee",jm=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],kb={color:jm,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:Xr},crossStyle:{color:Xr},label:{color:"#000"}}},legend:{textStyle:{color:Xr}},textStyle:{color:Xr},title:{textStyle:{color:Xr}},toolbox:{iconStyle:{normal:{borderColor:Xr}}},dataZoom:{textStyle:{color:Xr}},visualMap:{textStyle:{color:Xr}},timeline:{lineStyle:{color:Xr},itemStyle:{normal:{color:jm[1]}},label:{normal:{textStyle:{color:Xr}}},controlStyle:{normal:{color:Xr,borderColor:Xr}}},timeAxis:f_(),logAxis:f_(),valueAxis:f_(),categoryAxis:f_(),line:{symbol:"circle"},graph:{color:jm},gauge:{title:{textStyle:{color:Xr}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};kb.categoryAxis.splitLine.show=!1,wo.extend({type:"dataset",defaultOption:{seriesLayoutBy:Gl,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(e){var t=e.option.source,o=YD;if(Gt(t))o=i_;else if(nt(t)){0===t.length&&(o=mb);for(var a=0,c=t.length;a<c;a++){var h=t[a];if(null!=h){if(nt(h)){o=mb;break}if(ue(h)){o=Qh;break}}}}else if(ue(t)){for(var p in t)if(t.hasOwnProperty(p)&&Pe(t[p])){o=i0;break}}else if(null!=t)throw new Error("Invalid data");vb(e).sourceFormat=o}(this)}}),Id.extend({type:"dataset"});var vp=Mo.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(e,t){var o=t.cx,a=t.cy,c=t.rx,h=t.ry,p=.5522848*c,y=.5522848*h;e.moveTo(o-c,a),e.bezierCurveTo(o-c,a-y,o-p,a-h,o,a-h),e.bezierCurveTo(o+p,a-h,o+c,a-y,o+c,a),e.bezierCurveTo(o+c,a+y,o+p,a+h,o,a+h),e.bezierCurveTo(o-p,a+h,o-c,a+y,o-c,a),e.closePath()}}),ag=/[\s,]+/;function h0(e){for(Wt(e)&&(e=(new DOMParser).parseFromString(e,"text/xml")),9===e.nodeType&&(e=e.firstChild);"svg"!==e.nodeName.toLowerCase()||1!==e.nodeType;)e=e.nextSibling;return e}function qm(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}qm.prototype.parse=function(e,t){t=t||{};var o=h0(e);if(!o)throw new Error("Illegal svg");var a=new pn;this._root=a;var c=o.getAttribute("viewBox")||"",h=parseFloat(o.getAttribute("width")||t.width),p=parseFloat(o.getAttribute("height")||t.height);isNaN(h)&&(h=null),isNaN(p)&&(p=null),ql(o,a,null,!0);for(var y,w,C=o.firstChild;C;)this._parseNode(C,a),C=C.nextSibling;if(c){var n=dn(c).split(ag);4<=n.length&&(y={x:parseFloat(n[0]||0),y:parseFloat(n[1]||0),width:parseFloat(n[2]),height:parseFloat(n[3])})}if(y&&null!=h&&null!=p&&(w=p0(y,h,p),!t.ignoreViewBox)){var i=a;(a=new pn).add(i),i.scale=w.scale.slice(),i.position=w.position.slice()}return t.ignoreRootClip||null==h||null==p||a.setClipPath(new sr({shape:{x:0,y:0,width:h,height:p}})),{root:a,width:h,height:p,viewBoxRect:y,viewBoxTransform:w}},qm.prototype._parseNode=function(e,t){var o,a,c=e.nodeName.toLowerCase();if("defs"===c?this._isDefine=!0:"text"===c&&(this._isText=!0),this._isDefine){if(a=v_[c]){var h=a.call(this,e),p=e.getAttribute("id");p&&(this._defs[p]=h)}}else(a=Tb[c])&&(o=a.call(this,e,t),t.add(o));for(var y=e.firstChild;y;)1===y.nodeType&&this._parseNode(y,o),3===y.nodeType&&this._isText&&this._parseText(y,o),y=y.nextSibling;"defs"===c?this._isDefine=!1:"text"===c&&(this._isText=!1)},qm.prototype._parseText=function(e,t){if(1===e.nodeType){var o=e.getAttribute("dx")||0,a=e.getAttribute("dy")||0;this._textX+=parseFloat(o),this._textY+=parseFloat(a)}var c=new Yo({style:{text:e.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});Ed(t,c),ql(e,c,this._defs);var h=c.style.fontSize;h&&h<9&&(c.style.fontSize=9,c.scale=c.scale||[1,1],c.scale[0]*=h/9,c.scale[1]*=h/9);var p=c.getBoundingRect();return this._textX+=p.width,t.add(c),c};var Tb={g:function(e,t){var o=new pn;return Ed(t,o),ql(e,o,this._defs),o},rect:function(e,t){var o=new sr;return Ed(t,o),ql(e,o,this._defs),o.setShape({x:parseFloat(e.getAttribute("x")||0),y:parseFloat(e.getAttribute("y")||0),width:parseFloat(e.getAttribute("width")||0),height:parseFloat(e.getAttribute("height")||0)}),o},circle:function(e,t){var o=new Md;return Ed(t,o),ql(e,o,this._defs),o.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),r:parseFloat(e.getAttribute("r")||0)}),o},line:function(e,t){var o=new Ya;return Ed(t,o),ql(e,o,this._defs),o.setShape({x1:parseFloat(e.getAttribute("x1")||0),y1:parseFloat(e.getAttribute("y1")||0),x2:parseFloat(e.getAttribute("x2")||0),y2:parseFloat(e.getAttribute("y2")||0)}),o},ellipse:function(e,t){var o=new vp;return Ed(t,o),ql(e,o,this._defs),o.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),rx:parseFloat(e.getAttribute("rx")||0),ry:parseFloat(e.getAttribute("ry")||0)}),o},polygon:function(e,t){var o=e.getAttribute("points");o=o&&$C(o);var a=new pl({shape:{points:o||[]}});return Ed(t,a),ql(e,a,this._defs),a},polyline:function(e,t){var o=new Mo;Ed(t,o),ql(e,o,this._defs);var a=e.getAttribute("points");return a=a&&$C(a),new Zi({shape:{points:a||[]}})},image:function(e,t){var o=new xr;return Ed(t,o),ql(e,o,this._defs),o.setStyle({image:e.getAttribute("xlink:href"),x:e.getAttribute("x"),y:e.getAttribute("y"),width:e.getAttribute("width"),height:e.getAttribute("height")}),o},text:function(e,t){var o=e.getAttribute("x")||0,a=e.getAttribute("y")||0,c=e.getAttribute("dx")||0,h=e.getAttribute("dy")||0;this._textX=parseFloat(o)+parseFloat(c),this._textY=parseFloat(a)+parseFloat(h);var p=new pn;return Ed(t,p),ql(e,p,this._defs),p},tspan:function(e,t){var o=e.getAttribute("x"),a=e.getAttribute("y");null!=o&&(this._textX=parseFloat(o)),null!=a&&(this._textY=parseFloat(a));var c=e.getAttribute("dx")||0,h=e.getAttribute("dy")||0,p=new pn;return Ed(t,p),ql(e,p,this._defs),this._textX+=c,this._textY+=h,p},path:function(e,t){var o=j1(e.getAttribute("d")||"");return Ed(t,o),ql(e,o,this._defs),o}},v_={lineargradient:function(e){var h=new Gc(parseInt(e.getAttribute("x1")||0,10),parseInt(e.getAttribute("y1")||0,10),parseInt(e.getAttribute("x2")||10,10),parseInt(e.getAttribute("y2")||0,10));return function(p,y){for(var w=p.firstChild;w;){if(1===w.nodeType){var C=w.getAttribute("offset");C=0<C.indexOf("%")?parseInt(C,10)/100:C?parseFloat(C):0;var n=w.getAttribute("stop-color")||"#000000";y.addColorStop(C,n)}w=w.nextSibling}}(e,h),h},radialgradient:function(e){}};function Ed(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),_e(t.__inheritedStyle,e.__inheritedStyle))}function $C(e){for(var t=dn(e).split(ag),o=[],a=0;a<t.length;a+=2){var c=parseFloat(t[a]),h=parseFloat(t[a+1]);o.push([c,h])}return o}var yp={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function ql(e,t,o,a){var c=t.__inheritedStyle||{},h="text"===t.type;if(1===e.nodeType&&(function(i,s){var d=i.getAttribute("transform");if(d){d=d.replace(/,/g," ");var u=null,f=[];d.replace(Nd,function(T,M,I){f.push(M,I)});for(var v=f.length-1;0<v;v-=2){var _=f[v],k=f[v-1];switch(u=u||Ii(),k){case"translate":_=dn(_).split(ag),zr(u,u,[parseFloat(_[0]),parseFloat(_[1]||0)]);break;case"scale":_=dn(_).split(ag),Rh(u,u,[parseFloat(_[0]),parseFloat(_[1]||_[0])]);break;case"rotate":_=dn(_).split(ag),Rc(u,u,parseFloat(_[0]));break;case"skew":_=dn(_).split(ag),console.warn("Skew transform is not supported yet");break;case"matrix":_=dn(_).split(ag),u[0]=parseFloat(_[0]),u[1]=parseFloat(_[1]),u[2]=parseFloat(_[2]),u[3]=parseFloat(_[3]),u[4]=parseFloat(_[4]),u[5]=parseFloat(_[5])}}s.setLocalTransform(u)}}(e,t),pe(c,function(i){var s=i.getAttribute("style"),d={};if(!s)return d;var u,f={};for(Us.lastIndex=0;null!=(u=Us.exec(s));)f[u[1]]=u[2];for(var v in yp)yp.hasOwnProperty(v)&&null!=f[v]&&(d[yp[v]]=f[v]);return d}(e)),!a))for(var p in yp)if(yp.hasOwnProperty(p)){var y=e.getAttribute(p);null!=y&&(c[yp[p]]=y)}var w=h?"textFill":"fill",C=h?"textStroke":"stroke";t.style=t.style||new ou;var n=t.style;null!=c.fill&&n.set(w,Ba(c.fill,o)),null!=c.stroke&&n.set(C,Ba(c.stroke,o)),ee(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(i){null!=c[i]&&n.set("lineWidth"===i&&h?"textStrokeWidth":i,parseFloat(c[i]))}),c.textBaseline&&"auto"!==c.textBaseline||(c.textBaseline="alphabetic"),"alphabetic"===c.textBaseline&&(c.textBaseline="bottom"),"start"===c.textAlign&&(c.textAlign="left"),"end"===c.textAlign&&(c.textAlign="right"),ee(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(i){null!=c[i]&&n.set(i,c[i])}),c.lineDash&&(t.style.lineDash=dn(c.lineDash).split(ag)),n[C]&&"none"!==n[C]&&(t[C]=!0),t.__inheritedStyle=c}var g0=/url\(\s*#(.*?)\)/;function Ba(e,t){var o=t&&e&&e.match(g0);return o?t[dn(o[1])]:e}var Nd=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,Us=/([^\s:;]+)\s*:\s*([^:;]+)/g;function p0(e,t,o){var h=Math.min(t/e.width,o/e.height);return{scale:[h,h],position:[-(e.x+e.width/2)*h+t/2,-(e.y+e.height/2)*h+o/2]}}var y_=ft(),YC={registerMap:function(e,t,o){var a;return ee(a=nt(t)?t:t.svg?[{type:"svg",source:t.svg,specialAreas:t.specialAreas}]:(t.geoJson&&!t.features&&(o=t.specialAreas,t=t.geoJson),[{type:"geoJSON",source:t,specialAreas:o}]),function(c){var h=c.type;"geoJson"===h&&(h=c.type="geoJSON"),(0,XC[h])(c)}),y_.set(e,a)},retrieveMap:function(e){return y_.get(e)}},XC={geoJSON:function(e){var t=e.source;e.geoJSON=Wt(t)?typeof JSON<"u"&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t},svg:function(e){e.svgXML=h0(e.source)}},b_=Yn,la=ee,x_=Bt,m0=ue,ah=wo.parseClassType,Xc={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},Zc="__flagInMainProcess",Vo="__optionUpdated",sg=/^[a-zA-Z0-9_]+$/;function lg(e,t){return function(o,a,c){!t&&this._disposed||(o=o&&o.toLowerCase(),si.prototype[e].call(this,o,a,c))}}function $m(){si.call(this)}function mc(e,t,o){o=o||{},"string"==typeof t&&(t=k_[t]),this._dom=e;var a=this._zr=Yg(e,{renderer:o.renderer||"canvas",devicePixelRatio:o.devicePixelRatio,width:o.width,height:o.height});this._throttledZrFlush=p_(rt(a.flush,a),17),(t=K(t))&&BA(t,!0),this._theme=t,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new yl;var p,y,c=this._api=(y=(p=this)._coordSysMgr,pe(new JD(p),{getCoordinateSystems:rt(y.getCoordinateSystems,y),getComponentByElement:function(w){for(;w;){var C=w.__ecComponentInfo;if(null!=C)return p._model.getComponent(C.mainType,C.index);w=w.parent}}}));function h(p,y){return p.__prio-y.__prio}rc(v0,h),rc(_p,h),this._scheduler=new ig(this,c,_p,v0),si.call(this,this._ecEventProcessor=new S_),this._messageCenter=new $m,this._initEvents(),this.resize=rt(this.resize,this),this._pendingActions=[],a.animation.on("frame",this._onframe,this),function(p,y){p.on("rendered",function(){y.trigger("rendered"),!p.animation.isFinished()||y[Vo]||y._scheduler.unfinished||y._pendingActions.length||y.trigger("finished")})}(a,this),Oo(this)}$m.prototype.on=lg("on",!0),$m.prototype.off=lg("off",!0),$m.prototype.one=lg("one",!0),Me($m,si);var Ho=mc.prototype;function ca(e,t,o){if(!this._disposed){var a,c=this._model,h=this._coordSysMgr.getCoordinateSystems();t=F1(c,t);for(var p=0;p<h.length;p++){var y=h[p];if(y[e]&&null!=(a=y[e](c,t,o)))return a}}}Ho._onframe=function(){if(!this._disposed){var e=this._scheduler;if(this[Vo]){var t=this[Vo].silent;this[Zc]=!0,Mb(this),hu.update.call(this),this[Zc]=!1,this[Vo]=!1,w_.call(this,t),KC.call(this,t)}else if(e.unfinished){var o=1,a=this._model;e.unfinished=!1;do{var h=+new Date;e.performSeriesTasks(a),e.performDataProcessorTasks(a),bp(this,a),e.performVisualTasks(a),$A(this,this._model,0,"remain"),o-=+new Date-h}while(0<o&&e.unfinished);e.unfinished||this._zr.flush()}}},Ho.getDom=function(){return this._dom},Ho.getZr=function(){return this._zr},Ho.setOption=function(e,t,o){if(!this._disposed){var a;if(m0(t)&&(o=t.lazyUpdate,a=t.silent,t=t.notMerge),this[Zc]=!0,!this._model||t){var c=new NA(this._api),h=this._theme,p=this._model=new IA;p.scheduler=this._scheduler,p.init(null,null,h,c)}this._model.setOption(e,Ab),o?(this[Vo]={silent:a},this[Zc]=!1):(Mb(this),hu.update.call(this),this._zr.flush(),this[Vo]=!1,this[Zc]=!1,w_.call(this,a),KC.call(this,a))}},Ho.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Ho.getModel=function(){return this._model},Ho.getOption=function(){return this._model&&this._model.getOption()},Ho.getWidth=function(){return this._zr.getWidth()},Ho.getHeight=function(){return this._zr.getHeight()},Ho.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},Ho.getRenderedCanvas=function(e){if(Oe.canvasSupported)return(e=e||{}).pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(e)},Ho.getSvgDataURL=function(){if(Oe.svgSupported){var e=this._zr;return ee(e.storage.getDisplayList(),function(t){t.stopAnimation(!0)}),e.painter.toDataURL()}},Ho.getDataURL=function(e){if(!this._disposed){var t=(e=e||{}).excludeComponents,o=this._model,a=[],c=this;la(t,function(p){o.eachComponent({mainType:p},function(y){var w=c._componentsMap[y.__viewId];w.group.ignore||(a.push(w),w.group.ignore=!0)})});var h="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return la(a,function(p){p.group.ignore=!1}),h}},Ho.getConnectedDataURL=function(e){if(!this._disposed&&Oe.canvasSupported){var t="svg"===e.type,o=this.group,a=Math.min,c=Math.max;if(Xm[o]){var h=1/0,p=1/0,y=-1/0,w=-1/0,C=[],n=e&&e.pixelRatio||1;ee(Ym,function(v,_){if(v.group===o){var k=t?v.getZr().painter.getSvgDom().innerHTML:v.getRenderedCanvas(K(e)),T=v.getDom().getBoundingClientRect();h=a(T.left,h),p=a(T.top,p),y=c(T.right,y),w=c(T.bottom,w),C.push({dom:k,left:T.left,top:T.top})}});var i=(y*=n)-(h*=n),s=(w*=n)-(p*=n),d=ae(),u=Yg(d,{renderer:t?"svg":"canvas"});if(u.resize({width:i,height:s}),t){var f="";return la(C,function(v){f+='<g transform="translate('+(v.left-h)+","+(v.top-p)+')">'+v.dom+"</g>"}),u.painter.getSvgRoot().innerHTML=f,e.connectedBackgroundColor&&u.painter.setBackgroundColor(e.connectedBackgroundColor),u.refreshImmediately(),u.painter.toDataURL()}return e.connectedBackgroundColor&&u.add(new sr({shape:{x:0,y:0,width:i,height:s},style:{fill:e.connectedBackgroundColor}})),la(C,function(v){var _=new xr({style:{x:v.left*n-h,y:v.top*n-p,image:v.dom}});u.add(_)}),u.refreshImmediately(),d.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}},Ho.convertToPixel=wt(ca,"convertToPixel"),Ho.convertFromPixel=wt(ca,"convertFromPixel"),Ho.containPixel=function(e,t){var o;if(!this._disposed)return ee(e=F1(this._model,e),function(a,c){0<=c.indexOf("Models")&&ee(a,function(h){var p=h.coordinateSystem;if(p&&p.containPoint)o|=!!p.containPoint(t);else if("seriesModels"===c){var y=this._chartsMap[h.__viewId];y&&y.containPoint&&(o|=y.containPoint(t,h))}},this)},this),!!o},Ho.getVisual=function(e,t){var o=(e=F1(this._model,e,{defaultMainType:"series"})).seriesModel.getData(),a=e.hasOwnProperty("dataIndexInside")?e.dataIndexInside:e.hasOwnProperty("dataIndex")?o.indexOfRawIndex(e.dataIndex):null;return null!=a?o.getItemVisual(a,t):o.getVisual(t)},Ho.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},Ho.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]};var hu={prepareAndUpdate:function(e){Mb(this),hu.update.call(this,e)},update:function(e){var t=this._model,o=this._api,a=this._zr,c=this._coordSysMgr,h=this._scheduler;if(t){h.restoreData(t,e),h.performSeriesTasks(t),c.create(t,o),h.performDataProcessorTasks(t,e),bp(this,t),c.update(t,o),Ka(t),h.performVisualTasks(t,e),f0(this,t,o,e);var p=t.get("backgroundColor")||"transparent";if(Oe.canvasSupported)a.setBackgroundColor(p);else{var y=nl(p);p=rs(y,"rgb"),0===y[3]&&(p="transparent")}JC(t,o)}},updateTransform:function(e){var t=this._model,o=this,a=this._api;if(t){var c=[];t.eachComponent(function(p,y){var w=o.getViewOfComponentModel(y);if(w&&w.__alive)if(w.updateTransform){var C=w.updateTransform(y,t,a,e);C&&C.update&&c.push(w)}else c.push(w)});var h=ft();t.eachSeries(function(p){var y=o._chartsMap[p.__viewId];if(y.updateTransform){var w=y.updateTransform(p,t,a,e);w&&w.update&&h.set(p.uid,1)}else h.set(p.uid,1)}),Ka(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0,dirtyMap:h}),$A(o,t,0,e,h),JC(t,this._api)}},updateView:function(e){var t=this._model;t&&(Za.markUpdateMethod(e,"updateView"),Ka(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0}),f0(this,this._model,this._api,e),JC(t,this._api))},updateVisual:function(e){hu.update.call(this,e)},updateLayout:function(e){hu.update.call(this,e)}};function Mb(e){var t=e._model,o=e._scheduler;o.restorePipelines(t),o.prepareStageTasks(),$l(e,"component",t,o),$l(e,"chart",t,o),o.plan()}function __(e,t,o,a,c){var h=e._model;if(a){var p={};p[a+"Id"]=o[a+"Id"],p[a+"Index"]=o[a+"Index"],p[a+"Name"]=o[a+"Name"];var y={mainType:a,query:p};c&&(y.subType=c);var w=o.excludeSeriesId;null!=w&&(w=ft(hr(w))),h&&h.eachComponent(y,function(n){w&&null!=w.get(n.id)||C(e["series"===a?"_chartsMap":"_componentsMap"][n.__viewId])},e)}else la(e._componentsViews.concat(e._chartsViews),C);function C(n){n&&n.__alive&&n[t]&&n[t](n.__model,h,e._api,o)}}function bp(e,t){var o=e._chartsMap,a=e._scheduler;t.eachSeries(function(c){a.updateStreamModes(c,o[c.__viewId])})}function ZC(e,t){var o=e.type,a=e.escapeConnect,c=xp[o],h=c.actionInfo,p=(h.update||"update").split(":"),y=p.pop();p=null!=p[0]&&ah(p[0]),this[Zc]=!0;var w=[e],C=!1;e.batch&&(C=!0,w=Se(e.batch,function(d){return(d=_e(pe({},d),e)).batch=null,d}));var n,i=[],s="highlight"===o||"downplay"===o;la(w,function(d){(n=(n=c.action(d,this._model,this._api))||pe({},d)).type=h.event||n.type,i.push(n),s?__(this,y,d,"series"):p&&__(this,y,d,p.main,p.sub)},this),"none"===y||s||p||(this[Vo]?(Mb(this),hu.update.call(this,e),this[Vo]=!1):hu[y].call(this,e)),n=C?{type:h.event||o,escapeConnect:a,batch:i}:i[0],this[Zc]=!1,t||this._messageCenter.trigger(n.type,n)}function w_(e){for(var t=this._pendingActions;t.length;){var o=t.shift();ZC.call(this,o,e)}}function KC(e){e||this.trigger("updated")}function $l(e,t,o,a){for(var c="component"===t,h=c?e._componentsViews:e._chartsViews,p=c?e._componentsMap:e._chartsMap,y=e._zr,w=e._api,C=0;C<h.length;C++)h[C].__alive=!1;function n(s){var d="_ec_"+s.id+"_"+s.type,u=p[d];if(!u){var f=ah(s.type);(u=new(c?Id.getClass(f.main,f.sub):Za.getClass(f.sub))).init(o,w),p[d]=u,h.push(u),y.add(u.group)}s.__viewId=u.__id=d,u.__alive=!0,u.__model=s,u.group.__ecComponentInfo={mainType:s.mainType,index:s.componentIndex},c||a.prepareView(u,s,o,w)}for(c?o.eachComponent(function(s,d){"series"!==s&&n(d)}):o.eachSeries(n),C=0;C<h.length;){var i=h[C];i.__alive?C++:(c||i.renderTask.dispose(),y.remove(i.group),i.dispose(o,w),h.splice(C,1),delete p[i.__id],i.__id=i.group.__ecComponentInfo=null)}}function Ka(e){e.clearColorPalette(),e.eachSeries(function(t){t.clearColorPalette()})}function f0(e,t,o,a){(function(c,h,p,y,w){la(c._componentsViews,function(C){var n=C.__model;C.render(n,h,p,y),YA(n,C)})})(e,t,o,a),la(e._chartsViews,function(c){c.__alive=!1}),$A(e,t,0,a),la(e._chartsViews,function(c){c.__alive||c.remove(t,o)})}function $A(e,t,o,a,c){var h,y,w,n,p=e._scheduler;t.eachSeries(function(y){var w=e._chartsMap[y.__viewId];w.__alive=!0;var i,s,C=w.renderTask;p.updatePayload(C,a),c&&c.get(y.uid)&&C.dirty(),h|=C.perform(p.getPerformArgs(C)),w.group.silent=!!y.get("silent"),YA(y,w),i=w,s=y.get("blendMode")||null,i.group.traverse(function(d){d.isGroup||d.style.blend!==s&&d.setStyle("blend",s),d.eachPendingDisplayable&&d.eachPendingDisplayable(function(u){u.setStyle("blend",s)})})}),p.unfinished|=h,w=t,n=0,(y=e)._zr.storage.traverse(function(i){n++}),n>w.get("hoverLayerThreshold")&&!Oe.node&&w.eachSeries(function(i){if(!i.preventUsingHoverLayer){var s=y._chartsMap[i.__viewId];s.__alive&&s.group.traverse(function(d){d.useHoverLayer=!0})}}),nO(e._zr.dom,t)}function JC(e,t){la(oO,function(o){o(e,t)})}Ho.resize=function(e){if(!this._disposed){this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var o=t.resetOption("media"),a=e&&e.silent;this[Zc]=!0,o&&Mb(this),hu.update.call(this),this[Zc]=!1,w_.call(this,a),KC.call(this,a)}}},Ho.showLoading=function(e,t){if(!this._disposed&&(m0(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),QC[e])){var o=QC[e](this._api,t),a=this._zr;this._loadingFX=o,a.add(o)}},Ho.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},Ho.makeActionFromEvent=function(e){var t=pe({},e);return t.type=C_[e.type],t},Ho.dispatchAction=function(e,t){this._disposed||(m0(t)||(t={silent:!!t}),xp[e.type]&&this._model&&(this[Zc]?this._pendingActions.push(e):(ZC.call(this,e,t.silent),t.flush?this._zr.flush(!0):!1!==t.flush&&Oe.browser.weChat&&this._throttledZrFlush(),w_.call(this,t.silent),KC.call(this,t.silent))))},Ho.appendData=function(e){if(!this._disposed){var t=e.seriesIndex;this.getModel().getSeriesByIndex(t).appendData(e),this._scheduler.unfinished=!0}},Ho.on=lg("on",!1),Ho.off=lg("off",!1),Ho.one=lg("one",!1);var So=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function YA(e,t){var o=e.get("z"),a=e.get("zlevel");t.group.traverse(function(c){"group"!==c.type&&(null!=o&&(c.z=o),null!=a&&(c.zlevel=a))})}function S_(){}Ho._initEvents=function(){la(So,function(e){function t(o){var a,c=this.getModel(),h=o.target;if("globalout"===e)a={};else if(h&&null!=h.dataIndex){var p=h.dataModel||c.getSeriesByIndex(h.seriesIndex);a=p&&p.getDataParams(h.dataIndex,h.dataType,h)||{}}else h&&h.eventData&&(a=pe({},h.eventData));if(a){var y=a.componentType,w=a.componentIndex;"markLine"!==y&&"markPoint"!==y&&"markArea"!==y||(y="series",w=a.seriesIndex);var C=y&&null!=w&&c.getComponent(y,w),n=C&&this["series"===C.mainType?"_chartsMap":"_componentsMap"][C.__viewId];a.event=o,a.type=e,this._ecEventProcessor.eventInfo={targetEl:h,packedEvent:a,model:C,view:n},this.trigger(e,a)}}t.zrEventfulCallAtLast=!0,this._zr.on(e,t,this)},this),la(C_,function(e,t){this._messageCenter.on(t,function(o){this.trigger(t,o)},this)},this)},Ho.isDisposed=function(){return this._disposed},Ho.clear=function(){this._disposed||this.setOption({series:[]},!0)},Ho.dispose=function(){if(!this._disposed){this._disposed=!0,zD(this.getDom(),T_,"");var e=this._api,t=this._model;la(this._componentsViews,function(o){o.dispose(t,e)}),la(this._chartsViews,function(o){o.dispose(t,e)}),this._zr.dispose(),delete Ym[this.id]}},Me(mc,si),S_.prototype={constructor:S_,normalizeQuery:function(e){var t={},o={},a={};if(Wt(e)){var c=ah(e);t.mainType=c.main||null,t.subType=c.sub||null}else{var h=["Index","Name","Id"],p={name:1,dataIndex:1,dataType:1};ee(e,function(y,w){for(var C=!1,n=0;n<h.length;n++){var i=h[n],s=w.lastIndexOf(i);if(0<s&&s===w.length-i.length){var d=w.slice(0,s);"data"!==d&&(t.mainType=d,t[i.toLowerCase()]=y,C=!0)}}p.hasOwnProperty(w)&&(o[w]=y,C=!0),C||(a[w]=y)})}return{cptQuery:t,dataQuery:o,otherQuery:a}},filter:function(e,t,o){var a=this.eventInfo;if(!a)return!0;var c=a.targetEl,h=a.packedEvent,p=a.model,y=a.view;if(!p||!y)return!0;var w=t.cptQuery,C=t.dataQuery;return n(w,p,"mainType")&&n(w,p,"subType")&&n(w,p,"index","componentIndex")&&n(w,p,"name")&&n(w,p,"id")&&n(C,h,"name")&&n(C,h,"dataIndex")&&n(C,h,"dataType")&&(!y.filterForExposedEvent||y.filterForExposedEvent(e,t.otherQuery,c,h));function n(i,s,d,u){return null==i[d]||s[u||d]===i[d]}},afterTrigger:function(){this.eventInfo=null}};var xp={},C_={},_p=[],Ab=[],oO=[],v0=[],k_={},QC={},Ym={},Xm={},rO=new Date-0,Nn=new Date-0,T_="_echarts_instance_";function y0(e){Xm[e]=!1}var ek=y0;function M_(e){return Ym[function(t,o){return t.getAttribute?t.getAttribute(o):t[o]}(e,T_)]}function Ib(e,t){k_[e]=t}function ks(e){Ab.push(e)}function Kt(e,t){gu(_p,e,t,1e3)}function Xo(e,t,o){"function"==typeof t&&(o=t,t="");var a=m0(e)?e.type:[e,e={event:t}][0];e.event=(e.event||a).toLowerCase(),t=e.event,b_(sg.test(a)&&sg.test(t)),xp[a]||(xp[a]={action:o,actionInfo:e}),C_[t]=a}function tk(e,t){yl.register(e,t)}function Wn(e,t){gu(v0,e,t,1e3,"layout")}function yi(e,t){gu(v0,e,t,3e3,"visual")}function gu(e,t,o,a,c){(x_(t)||m0(t))&&(o=t,t=a);var h=ig.wrapStageHandler(o,c);return h.__prio=t,h.__raw=o,e.push(h),h}function pu(e,t){QC[e]=t}function Gs(e){return wo.extend(e)}function fr(e){return Id.extend(e)}function Zm(e){return Yr.extend(e)}function Ts(e){return Za.extend(e)}function b0(e){return e}function za(e,t,o,a,c){this._old=e,this._new=t,this._oldKeyGetter=o||b0,this._newKeyGetter=a||b0,this.context=c}function A_(e,t,o,a,c){for(var h=0;h<e.length;h++){var p="_ec_"+c[a](e[h],h),y=t[p];null==y?(o.push(p),t[p]=h):(y.length||(t[p]=y=[y]),y.push(h))}}yi(2e3,jA),ks(BA),Kt(900,function(e){var t=ft();e.eachSeries(function(o){var a=o.get("stack");if(a){var c=t.get(a)||t.set(a,[]),h=o.getData(),p={stackResultDimension:h.getCalculationInfo("stackResultDimension"),stackedOverDimension:h.getCalculationInfo("stackedOverDimension"),stackedDimension:h.getCalculationInfo("stackedDimension"),stackedByDimension:h.getCalculationInfo("stackedByDimension"),isStackedByIndex:h.getCalculationInfo("isStackedByIndex"),data:h,seriesModel:o};if(!p.stackedDimension||!p.isStackedByIndex&&!p.stackedByDimension)return;c.length&&h.setCalculationInfo("stackedOnSeries",c[c.length-1].seriesModel),c.push(p)}}),t.each(zA)}),pu("default",function(e,t){_e(t=t||{},{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var o=new pn,a=new sr({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});o.add(a);var c=t.fontSize+" sans-serif",h=new sr({style:{fill:"none",text:t.text,font:c,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});if(o.add(h),t.showSpinner){var p=new Tm({shape:{startAngle:-bl/2,endAngle:-bl/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001});p.animateShape(!0).when(1e3,{endAngle:3*bl/2}).start("circularInOut"),p.animateShape(!0).when(1e3,{startAngle:3*bl/2}).delay(300).start("circularInOut"),o.add(p)}return o.resize=function(){var y=ya(t.text,c),w=t.showSpinner?t.spinnerRadius:0,C=(e.getWidth()-2*w-(t.showSpinner&&y?10:0)-y)/2-(t.showSpinner?0:y/2),n=e.getHeight()/2;t.showSpinner&&p.setShape({cx:C,cy:n}),h.setShape({x:C-w,y:n-w,width:2*w,height:2*w}),a.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},o.resize(),o}),Xo({type:"highlight",event:"highlight",update:"highlight"},Tt),Xo({type:"downplay",event:"downplay",update:"downplay"},Tt),Ib("light",qC),Ib("dark",kb),za.prototype={constructor:za,add:function(e){return this._add=e,this},update:function(e){return this._update=e,this},remove:function(e){return this._remove=e,this},execute:function(){var e=this._old,t=this._new,o={},a=[],c=[];for(A_(e,{},a,"_oldKeyGetter",this),A_(t,o,c,"_newKeyGetter",this),h=0;h<e.length;h++)null!=(y=o[p=a[h]])?((C=y.length)?(1===C&&(o[p]=null),y=y.shift()):o[p]=null,this._update&&this._update(y,h)):this._remove&&this._remove(h);for(var h=0;h<c.length;h++){var p=c[h];if(o.hasOwnProperty(p)){var y;if(null==(y=o[p]))continue;if(y.length)for(var w=0,C=y.length;w<C;w++)this._add&&this._add(y[w]);else this._add&&this._add(y)}}}};var x0=ft(["tooltip","label","itemName","itemId","seriesName"]);function Db(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function nk(e){return"category"===e?"ordinal":"time"===e?"time":"float"}function vo(e){null!=e&&pe(this,e),this.otherDims={}}var Yl=ue,sh="undefined",XE={float:typeof Float64Array==sh?Array:Float64Array,int:typeof Int32Array==sh?Array:Int32Array,ordinal:Array,number:Array,time:Array},Ob=typeof Uint32Array==sh?Array:Uint32Array,Do=typeof Int32Array==sh?Array:Int32Array,XA=typeof Uint16Array==sh?Array:Uint16Array;function Eb(e){return 65535<e._rawCount?Ob:XA}var ZE=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],Km=["_extent","_approximateExtent","_rawExtent"];function cg(e,t){ee(ZE.concat(t.__wrappedMethods||[]),function(o){t.hasOwnProperty(o)&&(e[o]=t[o])}),e.__wrappedMethods=t.__wrappedMethods,ee(Km,function(o){e[o]=K(t[o])}),e._calculationInfo=pe(t._calculationInfo)}var Ja=function(e,t){e=e||["x","y"];for(var o={},a=[],c={},h=0;h<e.length;h++){var p=e[h];Wt(p)?p=new vo({name:p}):p instanceof vo||(p=new vo(p));var y=p.name;p.type=p.type||"float",p.coordDim||(p.coordDim=y,p.coordDimIndex=0),p.otherDims=p.otherDims||{},a.push(y),(o[y]=p).index=h,p.createInvertedIndices&&(c[y]=[])}this.dimensions=a,this._dimensionInfos=o,this.hostModel=t,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(w){var C={},n=C.encode={},i=ft(),s=[],d=[],u=C.userOutput={dimensionNames:w.dimensions.slice(),encode:{}};ee(w.dimensions,function(T){var R,M=w.getDimensionInfo(T),I=M.coordDim;if(I){var O=M.coordDimIndex;Db(n,I)[O]=T,M.isExtraCoord||(i.set(I,1),!("ordinal"===(R=M.type)||"time"===R)&&(s[0]=T),Db(u.encode,I)[O]=M.index),M.defaultTooltip&&d.push(T)}x0.each(function(R,N){var z=Db(n,N),L=M.otherDims[N];null!=L&&!1!==L&&(z[L]=M.name)})});var f=[],v={};i.each(function(T,M){var I=n[M];v[M]=I[0],f=f.concat(I)}),C.dataDimsOnCoord=f,C.encodeFirstDimNotExtra=v;var _=n.label;_&&_.length&&(s=_.slice());var k=n.tooltip;return k&&k.length?d=k.slice():d.length||(d=s.slice()),n.defaultedLabel=s,n.defaultedTooltip=d,C}(this),this._invertedIndicesMap=c,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},eo=Ja.prototype;function I_(e,t,o,a,c){var h=XE[t.type],p=a-1,y=t.name,w=e[y][p];if(w&&w.length<o){for(var C=new h(Math.min(c-p*o,o)),n=0;n<w.length;n++)C[n]=w[n];e[y][p]=C}for(var i=a*o;i<c;i+=o)e[y].push(new h(Math.min(c-i,o)))}function wp(e){var t=e._invertedIndicesMap;ee(t,function(o,a){var c=e._dimensionInfos[a].ordinalMeta;if(c){o=t[a]=new Do(c.categories.length);for(var h=0;h<o.length;h++)o[h]=-1;for(h=0;h<e._count;h++)o[e.get(a,h)]=h}})}function Rd(e,t,o){var a;if(null!=t){var c=e._chunkSize,h=Math.floor(o/c),y=e.dimensions[t],w=e._storage[y][h];if(w){a=w[o%c];var C=e._dimensionInfos[y].ordinalMeta;C&&C.categories.length&&(a=C.categories[a])}}return a}function D_(e){return e}function _0(e){return e<this._count&&0<=e?this._indices[e]:-1}function ok(e,t){var o=e._idList[t];return null==o&&(o=Rd(e,e._idDimIdx,t)),null==o&&(o="e\0\0"+t),o}function rk(e){return nt(e)||(e=[e]),e}function ik(e,t){var o=e.dimensions,a=new Ja(Se(o,e.getDimensionInfo,e),e.hostModel);cg(a,e);for(var c=a._storage={},h=e._storage,p=0;p<o.length;p++){var y=o[p];h[y]&&(0<=Ue(t,y)?(c[y]=ZA(h[y]),a._rawExtent[y]=[1/0,-1/0],a._extent[y]=null):c[y]=h[y])}return a}function ZA(e){for(var t,o,a=new Array(e.length),c=0;c<e.length;c++)a[c]=(o=void 0,(o=(t=e[c]).constructor)===Array?t.slice():new o(t));return a}function ak(e){e.seriesIndex=this.seriesIndex,e.dataIndex=this.dataIndex,e.dataType=this.dataType}function sk(e,t,o){$c.isInstance(t)||(t=$c.seriesDataToSource(t)),o=o||{},e=(e||[]).slice();for(var a=(o.dimsDef||[]).slice(),c=ft(),h=ft(),p=[],y=function(O,R,N,z){var L=Math.max(O.dimensionsDetectCount||1,R.length,N.length,z||0);return ee(R,function(V){var J=V.dimsDef;J&&(L=Math.max(L,J.length))}),L}(t,e,a,o.dimCount),w=0;w<y;w++){var C=a[w]=pe({},ue(a[w])?a[w]:{name:a[w]}),n=C.name,i=p[w]=new vo;null!=n&&null==c.get(n)&&(i.name=i.displayName=n,c.set(n,w)),null!=C.type&&(i.type=C.type),null!=C.displayName&&(i.displayName=C.displayName)}var s=o.encodeDef;!s&&o.encodeDefaulter&&(s=o.encodeDefaulter(t,y)),(s=ft(s)).each(function(O,R){if(1===(O=hr(O).slice()).length&&!Wt(O[0])&&O[0]<0)s.set(R,!1);else{var N=s.set(R,[]);ee(O,function(z,L){Wt(z)&&(z=c.get(z)),null!=z&&z<y&&(N[L]=z,u(p[z],R,L))})}});var d=0;function u(O,R,N){null!=x0.get(R)?O.otherDims[R]=N:(O.coordDim=R,O.coordDimIndex=N,h.set(R,!0))}ee(e,function(O,R){var N,z,L;if(Wt(O))N=O,O={};else{N=O.name;var V=O.ordinalMeta;O.ordinalMeta=null,(O=K(O)).ordinalMeta=V,z=O.dimsDef,L=O.otherDims,O.name=O.coordDim=O.coordDimIndex=O.dimsDef=O.otherDims=null}if(!1!==(J=s.get(N))){var J;if(!(J=hr(J)).length)for(var te=0;te<(z&&z.length||1);te++){for(;d<p.length&&null!=p[d].coordDim;)d++;d<p.length&&J.push(d++)}ee(J,function(re,ie){var he=p[re];if(u(_e(he,O),N,ie),null==he.name&&z){var fe=z[ie];ue(fe)||(fe={name:fe}),he.name=he.displayName=fe.name,he.defaultTooltip=fe.defaultTooltip}L&&_e(he.otherDims,L)})}});var f=o.generateCoord,v=o.generateCoordCount,_=null!=v;v=f?v||1:0;for(var k,M=f||"value",I=0;I<y;I++)null==(i=p[I]=p[I]||new vo).coordDim&&(i.coordDim=lk(M,h,_),i.coordDimIndex=0,(!f||v<=0)&&(i.isExtraCoord=!0),v--),null==i.name&&(i.name=lk(i.coordDim,c)),null==i.type&&(ZD((k=t).data,k.sourceFormat,k.seriesLayoutBy,k.dimensionsDefine,k.startIndex,I)===Hs.Must||i.isExtraCoord&&(null!=i.otherDims.itemName||null!=i.otherDims.seriesName))&&(i.type="ordinal");return p}function lk(e,t,o){if(o||null!=t.get(e)){for(var a=0;null!=t.get(e+a);)a++;e+=a}return t.set(e,!0),e}eo.type="list",eo.hasItemOption=!0,eo.getDimension=function(e){return"number"!=typeof e&&(isNaN(e)||this._dimensionInfos.hasOwnProperty(e))||(e=this.dimensions[e]),e},eo.getDimensionInfo=function(e){return this._dimensionInfos[this.getDimension(e)]},eo.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},eo.mapDimension=function(e,t){var o=this._dimensionsSummary;if(null==t)return o.encodeFirstDimNotExtra[e];var a=o.encode[e];return!0===t?(a||[]).slice():a&&a[t]},eo.initData=function(e,t,o){($c.isInstance(e)||Pe(e))&&(e=new FA(e,this.dimensions.length)),this._rawData=e,this._storage={},this._indices=null,this._nameList=t||[],this._idList=[],this._nameRepeatCount={},o||(this.hasItemOption=!1),this.defaultDimValueGetter=VA[this._rawData.getSource().sourceFormat],this._dimValueGetter=o=o||this.defaultDimValueGetter,this._dimValueGetterArrayRows=VA.arrayRows,this._rawExtent={},this._initDataFromProvider(0,e.count()),e.pure&&(this.hasItemOption=!1)},eo.getProvider=function(){return this._rawData},eo.appendData=function(e){var t=this._rawData,o=this.count();t.appendData(e);var a=t.count();t.persistent||(a+=o),this._initDataFromProvider(o,a)},eo.appendValues=function(e,t){for(var o=this._chunkSize,a=this._storage,c=this.dimensions,h=c.length,p=this._rawExtent,y=this.count(),w=y+Math.max(e.length,t?t.length:0),C=this._chunkCount,n=0;n<h;n++)p[_=c[n]]||(p[_]=[1/0,-1/0]),a[_]||(a[_]=[]),I_(a,this._dimensionInfos[_],o,C,w),this._chunkCount=a[_].length;for(var i=new Array(h),s=y;s<w;s++){for(var d=s-y,u=Math.floor(s/o),f=s%o,v=0;v<h;v++){var _=c[v],k=this._dimValueGetterArrayRows(e[d]||i,_,d,v);a[_][u][f]=k;var T=p[_];k<T[0]&&(T[0]=k),k>T[1]&&(T[1]=k)}t&&(this._nameList[s]=t[d])}this._rawCount=this._count=w,this._extent={},wp(this)},eo._initDataFromProvider=function(e,t){if(!(t<=e)){for(var o,a=this._chunkSize,c=this._rawData,h=this._storage,p=this.dimensions,y=p.length,w=this._dimensionInfos,C=this._nameList,n=this._idList,i=this._rawExtent,s=this._nameRepeatCount={},d=this._chunkCount,u=0;u<y;u++){i[I=p[u]]||(i[I]=[1/0,-1/0]);var f=w[I];0===f.otherDims.itemName&&(o=this._nameDimIdx=u),0===f.otherDims.itemId&&(this._idDimIdx=u),h[I]||(h[I]=[]),I_(h,f,a,d,t),this._chunkCount=h[I].length}for(var v=new Array(y),_=e;_<t;_++){v=c.getItem(_,v);for(var k=Math.floor(_/a),T=_%a,M=0;M<y;M++){var I,O=h[I=p[M]][k],R=this._dimValueGetter(v,I,_,M);O[T]=R;var N=i[I];R<N[0]&&(N[0]=R),R>N[1]&&(N[1]=R)}if(!c.pure){var z=C[_];if(v&&null==z)if(null!=v.name)C[_]=z=v.name;else if(null!=o){var L=p[o],V=h[L][k];if(V){z=V[T];var J=w[L].ordinalMeta;J&&J.categories.length&&(z=J.categories[z])}}var te=null==v?null:v.id;null==te&&null!=z&&(s[z]=s[z]||0,0<s[te=z]&&(te+="__ec__"+s[z]),s[z]++),null!=te&&(n[_]=te)}}!c.persistent&&c.clean&&c.clean(),this._rawCount=this._count=t,this._extent={},wp(this)}},eo.count=function(){return this._count},eo.getIndices=function(){var e=this._indices;if(e){var t=e.constructor,o=this._count;if(t===Array){c=new t(o);for(var a=0;a<o;a++)c[a]=e[a]}else c=new t(e.buffer,0,o)}else{var c=new(t=Eb(this))(this.count());for(a=0;a<c.length;a++)c[a]=a}return c},eo.get=function(e,t){if(!(0<=t&&t<this._count))return NaN;var o=this._storage;if(!o[e])return NaN;t=this.getRawIndex(t);var a=Math.floor(t/this._chunkSize);return o[e][a][t%this._chunkSize]},eo.getByRawIndex=function(e,t){if(!(0<=t&&t<this._rawCount))return NaN;var o=this._storage[e];return o?o[Math.floor(t/this._chunkSize)][t%this._chunkSize]:NaN},eo._getFast=function(e,t){var o=Math.floor(t/this._chunkSize);return this._storage[e][o][t%this._chunkSize]},eo.getValues=function(e,t){var o=[];nt(e)||(t=e,e=this.dimensions);for(var a=0,c=e.length;a<c;a++)o.push(this.get(e[a],t));return o},eo.hasValue=function(e){for(var t=this._dimensionsSummary.dataDimsOnCoord,o=0,a=t.length;o<a;o++)if(isNaN(this.get(t[o],e)))return!1;return!0},eo.getDataExtent=function(e){e=this.getDimension(e);var o=[1/0,-1/0];if(!this._storage[e])return o;var a,c=this.count();if(!this._indices)return this._rawExtent[e].slice();if(a=this._extent[e])return a.slice();for(var h=(a=o)[0],p=a[1],y=0;y<c;y++){var w=this._getFast(e,this.getRawIndex(y));w<h&&(h=w),p<w&&(p=w)}return this._extent[e]=[h,p]},eo.getApproximateExtent=function(e){return e=this.getDimension(e),this._approximateExtent[e]||this.getDataExtent(e)},eo.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},eo.getCalculationInfo=function(e){return this._calculationInfo[e]},eo.setCalculationInfo=function(e,t){Yl(e)?pe(this._calculationInfo,e):this._calculationInfo[e]=t},eo.getSum=function(e){var t=0;if(this._storage[e])for(var o=0,a=this.count();o<a;o++){var c=this.get(e,o);isNaN(c)||(t+=c)}return t},eo.getMedian=function(e){var t=[];this.each(e,function(c,h){isNaN(c)||t.push(c)});var o=[].concat(t).sort(function(c,h){return c-h}),a=this.count();return 0===a?0:a%2==1?o[(a-1)/2]:(o[a/2]+o[a/2-1])/2},eo.rawIndexOf=function(e,t){var o=(e&&this._invertedIndicesMap[e])[t];return null==o||isNaN(o)?-1:o},eo.indexOfName=function(e){for(var t=0,o=this.count();t<o;t++)if(this.getName(t)===e)return t;return-1},eo.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,o=t[e];if(null!=o&&o<this._count&&o===e)return e;for(var a=0,c=this._count-1;a<=c;){var h=(a+c)/2|0;if(t[h]<e)a=1+h;else{if(!(t[h]>e))return h;c=h-1}}return-1},eo.indicesOfNearest=function(e,t,o){var a=[];if(!this._storage[e])return a;null==o&&(o=1/0);for(var c=1/0,h=-1,p=0,y=0,w=this.count();y<w;y++){var C=t-this.get(e,y),n=Math.abs(C);n<=o&&((n<c||n===c&&0<=C&&h<0)&&(c=n,h=C,p=0),C===h&&(a[p++]=y))}return a.length=p,a},eo.getRawIndex=D_,eo.getRawDataItem=function(e){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(e));for(var t=[],o=0;o<this.dimensions.length;o++)t.push(this.get(this.dimensions[o],e));return t},eo.getName=function(e){var t=this.getRawIndex(e);return this._nameList[t]||Rd(this,this._nameDimIdx,t)||""},eo.getId=function(e){return ok(this,this.getRawIndex(e))},eo.each=function(e,t,o,a){if(this._count){"function"==typeof e&&(a=o,o=t,t=e,e=[]),o=o||a||this;for(var c=(e=Se(rk(e),this.getDimension,this)).length,h=0;h<this.count();h++)switch(c){case 0:t.call(o,h);break;case 1:t.call(o,this.get(e[0],h),h);break;case 2:t.call(o,this.get(e[0],h),this.get(e[1],h),h);break;default:for(var p=0,y=[];p<c;p++)y[p]=this.get(e[p],h);y[p]=h,t.apply(o,y)}}},eo.filterSelf=function(e,t,o,a){if(this._count){"function"==typeof e&&(a=o,o=t,t=e,e=[]),o=o||a||this,e=Se(rk(e),this.getDimension,this);for(var c=this.count(),h=new(Eb(this))(c),p=[],y=e.length,w=0,C=e[0],n=0;n<c;n++){var i,s=this.getRawIndex(n);if(0===y)i=t.call(o,n);else if(1===y){var d=this._getFast(C,s);i=t.call(o,d,n)}else{for(var u=0;u<y;u++)p[u]=this._getFast(C,s);p[u]=n,i=t.apply(o,p)}i&&(h[w++]=s)}return w<c&&(this._indices=h),this._count=w,this._extent={},this.getRawIndex=this._indices?_0:D_,this}},eo.selectRange=function(e){if(this._count){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o);var a=t.length;if(a){var c=this.count(),h=new(Eb(this))(c),p=0,y=t[0],w=e[y][0],C=e[y][1],n=!1;if(!this._indices){var i=0;if(1===a){for(var s=this._storage[t[0]],d=0;d<this._chunkCount;d++)for(var u=s[d],f=Math.min(this._count-d*this._chunkSize,this._chunkSize),v=0;v<f;v++)(w<=(I=u[v])&&I<=C||isNaN(I))&&(h[p++]=i),i++;n=!0}else if(2===a){s=this._storage[y];var _=this._storage[t[1]],k=e[t[1]][0],T=e[t[1]][1];for(d=0;d<this._chunkCount;d++){u=s[d];var M=_[d];for(f=Math.min(this._count-d*this._chunkSize,this._chunkSize),v=0;v<f;v++){var I=u[v],O=M[v];(w<=I&&I<=C||isNaN(I))&&(k<=O&&O<=T||isNaN(O))&&(h[p++]=i),i++}}n=!0}}if(!n)if(1===a)for(v=0;v<c;v++){var R=this.getRawIndex(v);(w<=(I=this._getFast(y,R))&&I<=C||isNaN(I))&&(h[p++]=R)}else for(v=0;v<c;v++){var N=!0;for(R=this.getRawIndex(v),d=0;d<a;d++){var z=t[d];((I=this._getFast(o,R))<e[z][0]||I>e[z][1])&&(N=!1)}N&&(h[p++]=this.getRawIndex(v))}return p<c&&(this._indices=h),this._count=p,this._extent={},this.getRawIndex=this._indices?_0:D_,this}}},eo.mapArray=function(e,t,o,a){"function"==typeof e&&(a=o,o=t,t=e,e=[]);var c=[];return this.each(e,function(){c.push(t&&t.apply(this,arguments))},o=o||a||this),c},eo.map=function(e,t,o,a){o=o||a||this;var c=ik(this,e=Se(rk(e),this.getDimension,this));c._indices=this._indices,c.getRawIndex=c._indices?_0:D_;for(var h=c._storage,p=[],y=this._chunkSize,w=e.length,C=this.count(),n=[],i=c._rawExtent,s=0;s<C;s++){for(var d=0;d<w;d++)n[d]=this.get(e[d],s);n[w]=s;var u=t&&t.apply(o,n);if(null!=u){"object"!=typeof u&&(p[0]=u,u=p);for(var f=this.getRawIndex(s),v=Math.floor(f/y),_=f%y,k=0;k<u.length;k++){var T=e[k],M=u[k],I=i[T],O=h[T];O&&(O[v][_]=M),M<I[0]&&(I[0]=M),M>I[1]&&(I[1]=M)}}}return c},eo.downSample=function(e,t,o,a){for(var c=ik(this,[e]),h=c._storage,p=[],y=Math.floor(1/t),w=h[e],C=this.count(),n=this._chunkSize,i=c._rawExtent[e],s=new(Eb(this))(C),d=0,u=0;u<C;u+=y){C-u<y&&(p.length=y=C-u);for(var f=0;f<y;f++){var v=this.getRawIndex(u+f),_=Math.floor(v/n);p[f]=w[_][v%n]}var T=o(p),M=this.getRawIndex(Math.min(u+a(p,T)||0,C-1)),I=M%n;(w[Math.floor(M/n)][I]=T)<i[0]&&(i[0]=T),T>i[1]&&(i[1]=T),s[d++]=M}return c._count=d,c._indices=s,c.getRawIndex=_0,c},eo.getItemModel=function(e){var t=this.hostModel;return new Fo(this.getRawDataItem(e),t,t&&t.ecModel)},eo.diff=function(e){var t=this;return new za(e?e.getIndices():[],this.getIndices(),function(o){return ok(e,o)},function(o){return ok(t,o)})},eo.getVisual=function(e){var t=this._visual;return t&&t[e]},eo.setVisual=function(e,t){if(Yl(e))for(var o in e)e.hasOwnProperty(o)&&this.setVisual(o,e[o]);else this._visual=this._visual||{},this._visual[e]=t},eo.setLayout=function(e,t){if(Yl(e))for(var o in e)e.hasOwnProperty(o)&&this.setLayout(o,e[o]);else this._layout[e]=t},eo.getLayout=function(e){return this._layout[e]},eo.getItemLayout=function(e){return this._itemLayouts[e]},eo.setItemLayout=function(e,t,o){this._itemLayouts[e]=o?pe(this._itemLayouts[e]||{},t):t},eo.clearItemLayouts=function(){this._itemLayouts.length=0},eo.getItemVisual=function(e,t,o){var a=this._itemVisuals[e],c=a&&a[t];return null!=c||o?c:this.getVisual(t)},eo.setItemVisual=function(e,t,o){var a=this._itemVisuals[e]||{},c=this.hasItemVisual;if(this._itemVisuals[e]=a,Yl(t))for(var h in t)t.hasOwnProperty(h)&&(a[h]=t[h],c[h]=!0);else a[t]=o,c[t]=!0},eo.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}},eo.setItemGraphicEl=function(e,t){var o=this.hostModel;t&&(t.dataIndex=e,t.dataType=this.dataType,t.seriesIndex=o&&o.seriesIndex,"group"===t.type&&t.traverse(ak,t)),this._graphicEls[e]=t},eo.getItemGraphicEl=function(e){return this._graphicEls[e]},eo.eachItemGraphicEl=function(e,t){ee(this._graphicEls,function(o,a){o&&e&&e.call(t,o,a)})},eo.cloneShallow=function(e){if(!e){var t=Se(this.dimensions,this.getDimensionInfo,this);e=new Ja(t,this.hostModel)}return e._storage=this._storage,cg(e,this),e._indices=this._indices?new(0,this._indices.constructor)(this._indices):null,e.getRawIndex=e._indices?_0:D_,e},eo.wrapMethod=function(e,t){var o=this[e];"function"==typeof o&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var a=o.apply(this,arguments);return t.apply(this,[a].concat(Qe(arguments)))})},eo.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],eo.CHANGABLE_METHODS=["filterSelf","selectRange"];var S0=function(e,t){return sk((t=t||{}).coordDimensions||[],e,{dimsDef:t.dimensionsDefine||e.dimensionsDefine,encodeDef:t.encodeDefine||e.encodeDefine,dimCount:t.dimensionsCount,encodeDefaulter:t.encodeDefaulter,generateCoord:t.generateCoord,generateCoordCount:t.generateCoordCount})};function ck(e){this.coordSysName=e,this.coordSysDims=[],this.axisMap=ft(),this.categoryAxisMap=ft(),this.firstCategoryDimIndex=null}var O_={cartesian2d:function(e,t,o,a){var c=e.getReferringComponents("xAxis")[0],h=e.getReferringComponents("yAxis")[0];t.coordSysDims=["x","y"],o.set("x",c),o.set("y",h),Jm(c)&&(a.set("x",c),t.firstCategoryDimIndex=0),Jm(h)&&(a.set("y",h),t.firstCategoryDimIndex=1)},singleAxis:function(e,t,o,a){var c=e.getReferringComponents("singleAxis")[0];t.coordSysDims=["single"],o.set("single",c),Jm(c)&&(a.set("single",c),t.firstCategoryDimIndex=0)},polar:function(e,t,o,a){var c=e.getReferringComponents("polar")[0],h=c.findAxisModel("radiusAxis"),p=c.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],o.set("radius",h),o.set("angle",p),Jm(h)&&(a.set("radius",h),t.firstCategoryDimIndex=0),Jm(p)&&(a.set("angle",p),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,o,a){t.coordSysDims=["lng","lat"]},parallel:function(e,t,o,a){var c=e.ecModel,h=c.getComponent("parallel",e.get("parallelIndex")),p=t.coordSysDims=h.dimensions.slice();ee(h.parallelAxisIndex,function(y,w){var C=c.getComponent("parallelAxis",y),n=p[w];o.set(n,C),Jm(C)&&null==t.firstCategoryDimIndex&&(a.set(n,C),t.firstCategoryDimIndex=w)})}};function Jm(e){return"category"===e.get("type")}function dk(e,t,o){var a,c,h,p,y=(o=o||{}).byIndex,w=o.stackedCoordDimension,C=!(!e||!e.get("stack"));if(ee(t,function(d,u){Wt(d)&&(t[u]=d={name:d}),C&&!d.isExtraCoord&&(y||a||!d.ordinalMeta||(a=d),c||"ordinal"===d.type||"time"===d.type||w&&w!==d.coordDim||(c=d))}),!c||y||a||(y=!0),c){h="__\0ecstackresult",p="__\0ecstackedover",a&&(a.createInvertedIndices=!0);var n=c.coordDim,i=c.type,s=0;ee(t,function(d){d.coordDim===n&&s++}),t.push({name:h,coordDim:n,coordDimIndex:s,type:i,isExtraCoord:!0,isCalculationCoord:!0}),s++,t.push({name:p,coordDim:p,coordDimIndex:s,type:i,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:c&&c.name,stackedByDimension:a&&a.name,isStackedByIndex:y,stackedOverDimension:p,stackResultDimension:h}}function dg(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function Nb(e,t){return dg(e,t)?e.getCalculationInfo("stackResultDimension"):t}function ug(e,t,o){o=o||{},$c.isInstance(e)||(e=$c.seriesDataToSource(e));var a,c=t.get("coordinateSystem"),h=yl.get(c),p=function(d){var u=d.get("coordinateSystem"),f=new ck(u),v=O_[u];if(v)return v(d,f,f.axisMap,f.categoryAxisMap),f}(t);p&&(a=Se(p.coordSysDims,function(d){var u={name:d},f=p.axisMap.get(d);if(f){var v=f.get("type");u.type=nk(v)}return u})),a=a||h&&(h.getDimensionsInfo?h.getDimensionsInfo():h.dimensions.slice())||["x","y"];var y,w,C=S0(e,{coordDimensions:a,generateCoord:o.generateCoord,encodeDefaulter:o.useEncodeDefaulter?wt(dp,a,t):null});p&&ee(C,function(d,u){var v=p.categoryAxisMap.get(d.coordDim);v&&(null==y&&(y=u),d.ordinalMeta=v.getOrdinalMeta()),null!=d.otherDims.itemName&&(w=!0)}),w||null==y||(C[y].otherDims.itemName=0);var n=dk(t,C),i=new Ja(C,t);i.setCalculationInfo(n);var s=null!=y&&function(d){if(d.sourceFormat===Bm){var u=function(f){for(var v=0;v<f.length&&null==f[v];)v++;return f[v]}(d.data||[]);return null!=u&&!nt(iu(u))}}(e)?function(d,u,f,v){return v===y?f:this.defaultDimValueGetter(d,u,f,v)}:null;return i.hasItemOption=!1,i.initData(e,null,s),i}function Fa(e){this._setting=e||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function Sp(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication}Fa.prototype.parse=function(e){return e},Fa.prototype.getSetting=function(e){return this._setting[e]},Fa.prototype.contain=function(e){var t=this._extent;return e>=t[0]&&e<=t[1]},Fa.prototype.normalize=function(e){var t=this._extent;return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])},Fa.prototype.scale=function(e){var t=this._extent;return e*(t[1]-t[0])+t[0]},Fa.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},Fa.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},Fa.prototype.getExtent=function(){return this._extent.slice()},Fa.prototype.setExtent=function(e,t){var o=this._extent;isNaN(e)||(o[0]=e),isNaN(t)||(o[1]=t)},Fa.prototype.isBlank=function(){return this._isBlank},Fa.prototype.setBlank=function(e){this._isBlank=e},Fa.prototype.getLabel=null,Yy(Fa),vm(Fa,{registerWhenExtend:!0}),Sp.createByAxisModel=function(e){var t=e.option,o=t.data,a=o&&Se(o,uk);return new Sp({categories:a,needCollect:!a,deduplication:!1!==t.dedplication})};var KA=Sp.prototype;function Rb(e){return e._map||(e._map=ft(e.categories))}function uk(e){return ue(e)&&null!=e.value?e.value:e+""}KA.getOrdinal=function(e){return Rb(this).get(e)},KA.parseAndCollect=function(e){var t,o=this._needCollect;if("string"!=typeof e&&!o)return e;if(o&&!this._deduplication)return this.categories[t=this.categories.length]=e,t;var a=Rb(this);return null==(t=a.get(e))&&(o?(this.categories[t=this.categories.length]=e,a.set(e,t)):t=NaN),t};var E_=Fa.prototype,hk=Fa.extend({type:"ordinal",init:function(e,t){e&&!nt(e)||(e=new Sp({categories:e})),this._ordinalMeta=e,this._extent=t||[0,e.categories.length-1]},parse:function(e){return"string"==typeof e?this._ordinalMeta.getOrdinal(e):Math.round(e)},contain:function(e){return e=this.parse(e),E_.contain.call(this,e)&&null!=this._ordinalMeta.categories[e]},normalize:function(e){return E_.normalize.call(this,this.parse(e))},scale:function(e){return Math.round(E_.scale.call(this,e))},getTicks:function(){for(var e=[],t=this._extent,o=t[0];o<=t[1];)e.push(o),o++;return e},getLabel:function(e){if(!this.isBlank())return this._ordinalMeta.categories[e]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:Tt,niceExtent:Tt});hk.create=function(){return new hk};var JA=Ea;function QA(e){return ia(e)+2}function iO(e,t,o){e[t]=Math.max(Math.min(e[t],o[1]),o[0])}function aO(e,t){isFinite(e[0])||(e[0]=t[0]),isFinite(e[1])||(e[1]=t[1]),iO(e,0,t),iO(e,1,t),e[0]>e[1]&&(e[0]=e[1])}var Cp=Ea,Ld=Fa.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(e,t){var o=this._extent;isNaN(e)||(o[0]=parseFloat(e)),isNaN(t)||(o[1]=parseFloat(t))},unionExtent:function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),Ld.prototype.setExtent.call(this,t[0],t[1])},getInterval:function(){return this._interval},setInterval:function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=QA(e)},getTicks:function(e){var t=this._interval,o=this._extent,a=this._niceExtent,c=this._intervalPrecision,h=[];if(!t)return h;o[0]<a[0]&&h.push(e?Cp(a[0]-t,c):o[0]);for(var p=a[0];p<=a[1]&&(h.push(p),(p=Cp(p+t,c))!==h[h.length-1]);)if(1e4<h.length)return[];var y=h.length?h[h.length-1]:a[1];return o[1]>y&&h.push(e?Cp(y+t,c):o[1]),h},getMinorTicks:function(e){for(var t=this.getTicks(!0),o=[],a=this.getExtent(),c=1;c<t.length;c++){for(var p=t[c-1],y=0,w=[],C=(t[c]-p)/e;y<e-1;){var n=Ea(p+(y+1)*C);n>a[0]&&n<a[1]&&w.push(n),y++}o.push(w)}return o},getLabel:function(e,t){if(null==e)return"";var o=t&&t.precision;return null==o?o=ia(e)||0:"auto"===o&&(o=this._intervalPrecision),Zh(e=Cp(e,o,!0))},niceTicks:function(e,t,o){e=e||5;var a=this._extent,c=a[1]-a[0];if(isFinite(c)){c<0&&(c=-c,a.reverse());var h=function(p,y,w,C){var n={},s=n.interval=Na((p[1]-p[0])/y,!0);null!=w&&s<w&&(s=n.interval=w),null!=C&&C<s&&(s=n.interval=C);var d=n.intervalPrecision=QA(s);return aO(n.niceTickExtent=[JA(Math.ceil(p[0]/s)*s,d),JA(Math.floor(p[1]/s)*s,d)],p),n}(a,e,t,o);this._intervalPrecision=h.intervalPrecision,this._interval=h.interval,this._niceExtent=h.niceTickExtent}},niceExtent:function(e){var t=this._extent;if(t[0]===t[1])if(0!==t[0]){var o=t[0];e.fixMax||(t[1]+=o/2),t[0]-=o/2}else t[1]=1;isFinite(t[1]-t[0])||(t[0]=0,t[1]=1),this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var c=this._interval;e.fixMin||(t[0]=Cp(Math.floor(t[0]/c)*c)),e.fixMax||(t[1]=Cp(Math.ceil(t[1]/c)*c))}});Ld.create=function(){return new Ld};var N_="__ec_stack_",js=typeof Float32Array<"u"?Float32Array:Array;function Qm(e){return e.get("stack")||N_+e.seriesIndex}function C0(e){return e.dim+e.index}function gk(e,t){var o=[];return t.eachSeriesByType(e,function(a){ef(a)&&!tf(a)&&o.push(a)}),o}function k0(e){var t=function(a){var c={};ee(a,function(i){var s=i.coordinateSystem.getBaseAxis();if("time"===s.type||"value"===s.type)for(var d=i.getData(),u=s.dim+"_"+s.index,f=d.mapDimension(s.dim),v=0,_=d.count();v<_;++v){var k=d.get(f,v);c[u]?c[u].push(k):c[u]=[k]}});var h=[];for(var p in c)if(c.hasOwnProperty(p)){var y=c[p];if(y){y.sort(function(i,s){return i-s});for(var w=null,C=1;C<y.length;++C){var n=y[C]-y[C-1];0<n&&(w=null===w?n:Math.min(w,n))}h[p]=w}}return h}(e),o=[];return ee(e,function(a){var c,h=a.coordinateSystem.getBaseAxis(),p=h.getExtent();if("category"===h.type)c=h.getBandWidth();else if("value"===h.type||"time"===h.type){var w=t[h.dim+"_"+h.index],C=Math.abs(p[1]-p[0]),n=h.scale.getExtent(),i=Math.abs(n[1]-n[0]);c=w?C/i*w:C}else{var s=a.getData();c=Math.abs(p[1]-p[0])/s.count()}var d=rn(a.get("barWidth"),c),u=rn(a.get("barMaxWidth"),c),f=rn(a.get("barMinWidth")||1,c),v=a.get("barGap"),_=a.get("barCategoryGap");o.push({bandWidth:c,barWidth:d,barMaxWidth:u,barMinWidth:f,barGap:v,barCategoryGap:_,axisKey:C0(h),stackId:Qm(a)})}),R_(o)}function R_(e){var t={};ee(e,function(a,c){var h=a.axisKey,p=a.bandWidth,y=t[h]||{bandWidth:p,remainedWidth:p,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},w=y.stacks;t[h]=y;var C=a.stackId;w[C]||y.autoWidthCount++,w[C]=w[C]||{width:0,maxWidth:0};var n=a.barWidth;n&&!w[C].width&&(w[C].width=n,n=Math.min(y.remainedWidth,n),y.remainedWidth-=n);var i=a.barMaxWidth;i&&(w[C].maxWidth=i);var s=a.barMinWidth;s&&(w[C].minWidth=s);var d=a.barGap;null!=d&&(y.gap=d);var u=a.barCategoryGap;null!=u&&(y.categoryGap=u)});var o={};return ee(t,function(a,c){o[c]={};var h=a.stacks,p=a.bandWidth,y=rn(a.categoryGap,p),w=rn(a.gap,1),C=a.remainedWidth,n=a.autoWidthCount,i=(C-y)/(n+(n-1)*w);i=Math.max(i,0),ee(h,function(f){var v=f.maxWidth,_=f.minWidth;if(f.width)k=f.width,v&&(k=Math.min(k,v)),_&&(k=Math.max(k,_)),f.width=k,C-=k+w*k,n--;else{var k=i;v&&v<k&&(k=Math.min(v,C)),_&&k<_&&(k=_),k!==i&&(f.width=k,C-=k+w*k,n--)}}),i=(C-y)/(n+(n-1)*w),i=Math.max(i,0);var s,d=0;ee(h,function(f,v){f.width||(f.width=i),d+=(s=f).width*(1+w)}),s&&(d-=s.width*w);var u=-d/2;ee(h,function(f,v){o[c][v]=o[c][v]||{bandWidth:p,offset:u,width:f.width},u+=f.width*(1+w)})}),o}function e2(e,t,o){if(e&&t){var a=e[C0(t)];return null!=a&&null!=o&&(a=a[Qm(o)]),a}}function sO(e,t){var o=gk(e,t),a=k0(o),c={};ee(o,function(h){var p=h.getData(),y=h.coordinateSystem,w=y.getBaseAxis(),C=Qm(h),n=a[C0(w)][C],i=n.offset,s=n.width,d=y.getOtherAxis(w),u=h.get("barMinHeight")||0;c[C]=c[C]||[],p.setLayout({bandWidth:n.bandWidth,offset:i,size:s});for(var f=p.mapDimension(d.dim),v=p.mapDimension(w.dim),_=dg(p,f),k=d.isHorizontal(),T=pk(0,d),M=0,I=p.count();M<I;M++){var O,R,N,z,L,V=p.get(f,M),J=p.get(v,M),te=0<=V?"p":"n",re=T;_&&(c[C][J]||(c[C][J]={p:T,n:T}),re=c[C][J][te]),k?(O=re,R=(L=y.dataToPoint([V,J]))[1]+i,N=L[0]-T,z=s,Math.abs(N)<u&&(N=(N<0?-1:1)*u),isNaN(N)||_&&(c[C][J][te]+=N)):(O=(L=y.dataToPoint([J,V]))[0]+i,R=re,N=s,z=L[1]-T,Math.abs(z)<u&&(z=(z<=0?-1:1)*u),isNaN(z)||_&&(c[C][J][te]+=z)),p.setItemLayout(M,{x:O,y:R,width:N,height:z})}},this)}var lO={seriesType:"bar",plan:oh(),reset:function(e){if(ef(e)&&tf(e)){var t=e.getData(),o=e.coordinateSystem,a=o.grid.getRect(),c=o.getBaseAxis(),h=o.getOtherAxis(c),p=t.mapDimension(h.dim),y=t.mapDimension(c.dim),w=h.isHorizontal(),C=w?0:1,n=e2(k0([e]),c,e).width;return.5<n||(n=.5),{progress:function(i,s){for(var d,u=i.count,f=new js(2*u),v=new js(2*u),_=new js(u),k=[],T=[],M=0,I=0;null!=(d=i.next());)T[C]=s.get(p,d),T[1-C]=s.get(y,d),k=o.dataToPoint(T,null,k),v[M]=w?a.x+a.width:k[0],f[M++]=k[0],v[M]=w?k[1]:a.y+a.height,f[M++]=k[1],_[I++]=d;s.setLayout({largePoints:f,largeDataIndices:_,largeBackgroundPoints:v,barWidth:n,valueAxisStart:pk(0,h),backgroundStart:w?a.x:a.y,valueAxisHorizontal:w})}}}}};function ef(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function tf(e){return e.pipelineContext&&e.pipelineContext.large}function pk(e,t){return t.toGlobalCoord(t.dataToCoord("log"===t.type?1:0))}var mk=Ld.prototype,fk=Math.ceil,t2=Math.floor,da=864e5,L_=Ld.extend({type:"time",getLabel:function(e){var t=this._stepLvl,o=new Date(e);return hc(t[0],o,this.getSetting("useUTC"))},niceExtent:function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=da,t[1]+=da),t[1]===-1/0&&t[0]===1/0){var o=new Date;t[1]=+new Date(o.getFullYear(),o.getMonth(),o.getDate()),t[0]=t[1]-da}this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var a=this._interval;e.fixMin||(t[0]=Ea(t2(t[0]/a)*a)),e.fixMax||(t[1]=Ea(fk(t[1]/a)*a))},niceTicks:function(e,t,o){var a=this._extent,c=a[1]-a[0],h=c/(e=e||10);null!=t&&h<t&&(h=t),null!=o&&o<h&&(h=o);var p=Lb.length,y=function(s,d,u,f){for(;u<f;){var v=u+f>>>1;s[v][1]<d?u=1+v:f=v}return u}(Lb,h,0,p),w=Lb[Math.min(y,p-1)],C=w[1];"year"===w[0]&&(C*=Na(c/C/e,!0));var n=this.getSetting("useUTC")?0:60*new Date(+a[0]||+a[1]).getTimezoneOffset()*1e3,i=[Math.round(fk((a[0]-n)/C)*C+n),Math.round(t2((a[1]-n)/C)*C+n)];aO(i,a),this._stepLvl=w,this._interval=C,this._niceExtent=i},parse:function(e){return+ub(e)}});ee(["contain","normalize"],function(e){L_.prototype[e]=function(t){return mk[e].call(this,this.parse(t))}});var Lb=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",da],["MM-dd\nyyyy",2*da],["MM-dd\nyyyy",3*da],["MM-dd\nyyyy",4*da],["MM-dd\nyyyy",5*da],["MM-dd\nyyyy",6*da],["week",7*da],["MM-dd\nyyyy",864e6],["week",14*da],["week",21*da],["month",31*da],["week",42*da],["month",62*da],["week",70*da],["quarter",95*da],["month",31*da*4],["month",13392e6],["half-year",16416e6],["month",31*da*8],["month",26784e6],["year",380*da]];L_.create=function(e){return new L_({useUTC:e.ecModel.get("useUTC")})};var vk=Fa.prototype,nf=Ld.prototype,KE=ia,cO=Ea,_l=Math.floor,JE=Math.ceil,Pb=Math.pow,lh=Math.log,Bb=Fa.extend({type:"log",base:10,$constructor:function(){Fa.apply(this,arguments),this._originalScale=new Ld},getTicks:function(e){var t=this._originalScale,o=this._extent,a=t.getExtent();return Se(nf.getTicks.call(this,e),function(c){var h=Ea(Pb(this.base,c));return h=c===o[0]&&t.__fixMin?zb(h,a[0]):h,c===o[1]&&t.__fixMax?zb(h,a[1]):h},this)},getMinorTicks:nf.getMinorTicks,getLabel:nf.getLabel,scale:function(e){return e=vk.scale.call(this,e),Pb(this.base,e)},setExtent:function(e,t){var o=this.base;e=lh(e)/lh(o),t=lh(t)/lh(o),nf.setExtent.call(this,e,t)},getExtent:function(){var e=this.base,t=vk.getExtent.call(this);t[0]=Pb(e,t[0]),t[1]=Pb(e,t[1]);var o=this._originalScale,a=o.getExtent();return o.__fixMin&&(t[0]=zb(t[0],a[0])),o.__fixMax&&(t[1]=zb(t[1],a[1])),t},unionExtent:function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=lh(e[0])/lh(t),e[1]=lh(e[1])/lh(t),vk.unionExtent.call(this,e)},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},niceTicks:function(e){e=e||10;var t=this._extent,o=t[1]-t[0];if(!(o==1/0||o<=0)){var a=Ki(o);for(e/o*a<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&0<Math.abs(a);)a*=10;var c=[Ea(JE(t[0]/a)*a),Ea(_l(t[1]/a)*a)];this._interval=a,this._niceExtent=c}},niceExtent:function(e){nf.niceExtent.call(this,e);var t=this._originalScale;t.__fixMin=e.fixMin,t.__fixMax=e.fixMax}});function zb(e,t){return cO(e,KE(t))}function dO(e,t){var o,a,c,h=e.type,p=t.getMin(),y=t.getMax(),w=e.getExtent();"ordinal"===h?o=t.getCategories().length:(nt(a=t.get("boundaryGap"))||(a=[a||0,a||0]),"boolean"==typeof a[0]&&(a=[0,0]),a[0]=rn(a[0],1),a[1]=rn(a[1],1),c=w[1]-w[0]||Math.abs(w[0])),"dataMin"===p?p=w[0]:"function"==typeof p&&(p=p({min:w[0],max:w[1]})),"dataMax"===y?y=w[1]:"function"==typeof y&&(y=y({min:w[0],max:w[1]}));var C=null!=p,n=null!=y;null==p&&(p="ordinal"===h?o?0:NaN:w[0]-a[0]*c),null==y&&(y="ordinal"===h?o?o-1:NaN:w[1]+a[1]*c),null!=p&&isFinite(p)||(p=NaN),null!=y&&isFinite(y)||(y=NaN),e.setBlank(to(p)||to(y)||"ordinal"===h&&!e.getOrdinalMeta().categories.length),t.getNeedCrossZero()&&(0<p&&0<y&&!C&&(p=0),p<0&&y<0&&!n&&(y=0));var i=t.ecModel;if(i&&"time"===h){var s,d=gk("bar",i);if(ee(d,function(v){s|=v.getBaseAxis()===t.axis}),s){var u=k0(d),f=function(v,_,k,T){var M=k.axis.getExtent(),I=M[1]-M[0],O=e2(T,k.axis);if(void 0===O)return{min:v,max:_};var R=1/0;ee(O,function(J){R=Math.min(J.offset,R)});var N=-1/0;ee(O,function(J){N=Math.max(J.offset+J.width,N)}),R=Math.abs(R),N=Math.abs(N);var z=R+N,L=_-v,V=L/(1-(R+N)/I)-L;return{min:v-=R/z*V,max:_+=N/z*V}}(p,y,t,u);p=f.min,y=f.max}}return{extent:[p,y],fixMin:C,fixMax:n}}function of(e,t){var o=dO(e,t),a=o.extent,c=t.get("splitNumber");"log"===e.type&&(e.base=t.get("logBase"));var h=e.type;e.setExtent(a[0],a[1]),e.niceExtent({splitNumber:c,fixMin:o.fixMin,fixMax:o.fixMax,minInterval:"interval"===h||"time"===h?t.get("minInterval"):null,maxInterval:"interval"===h||"time"===h?t.get("maxInterval"):null});var p=t.get("interval");null!=p&&e.setInterval&&e.setInterval(p)}function Fb(e,t){if(t=t||e.get("type"))switch(t){case"category":return new hk(e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),[1/0,-1/0]);case"value":return new Ld;default:return(Fa.getClass(t)||Ld).create(e)}}function P_(e){var t,o=e.getLabelModel().get("formatter"),a="category"===e.type?e.scale.getExtent()[0]:null;return"string"==typeof o?(t=o,o=function(c){return c=e.scale.getLabel(c),t.replace("{value}",c??"")}):"function"==typeof o?function(c,h){return null!=a&&(h=c-a),o(yk(e,c),h)}:function(c){return e.scale.getLabel(c)}}function yk(e,t){return"category"===e.type?e.scale.getLabel(t):t}function o2(e){return e.get("interval")??"auto"}function uO(e){return"category"===e.type&&0===o2(e.getLabelModel())}ee(["contain","normalize"],function(e){Bb.prototype[e]=function(t){return t=lh(t)/lh(this.base),vk[e].call(this,t)}}),Bb.create=function(){return new Bb};var rf={getMin:function(e){var t=this.option,o=e||null==t.rangeStart?t.min:t.rangeStart;return this.axis&&null!=o&&"dataMin"!==o&&"function"!=typeof o&&!to(o)&&(o=this.axis.scale.parse(o)),o},getMax:function(e){var t=this.option,o=e||null==t.rangeEnd?t.max:t.rangeEnd;return this.axis&&null!=o&&"dataMax"!==o&&"function"!=typeof o&&!to(o)&&(o=this.axis.scale.parse(o)),o},getNeedCrossZero:function(){var e=this.option;return null==e.rangeStart&&null==e.rangeEnd&&!e.scale},getCoordSysModel:Tt,setRange:function(e,t){this.option.rangeStart=e,this.option.rangeEnd=t},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},hO=ra({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var o=t.cx,a=t.cy,c=t.width/2,h=t.height/2;e.moveTo(o,a-h),e.lineTo(o+c,a+h),e.lineTo(o-c,a+h),e.closePath()}}),gO=ra({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var o=t.cx,a=t.cy,c=t.width/2,h=t.height/2;e.moveTo(o,a-h),e.lineTo(o+c,a),e.lineTo(o,a+h),e.lineTo(o-c,a),e.closePath()}}),QE=ra({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var o=t.x,a=t.y,c=t.width/5*3,h=Math.max(c,t.height),p=c/2,y=p*p/(h-p),w=a-h+p+y,C=Math.asin(y/p),n=Math.cos(C)*p,i=Math.sin(C),s=Math.cos(C),d=.6*p,u=.7*p;e.moveTo(o-n,w+y),e.arc(o,w,p,Math.PI-C,2*Math.PI+C),e.bezierCurveTo(o+n-i*d,w+y+s*d,o,a-u,o,a),e.bezierCurveTo(o,a-u,o-n+i*d,w+y+s*d,o-n,w+y),e.closePath()}}),pO=ra({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var o=t.height,c=t.x,h=t.y,p=t.width/3*2;e.moveTo(c,h),e.lineTo(c+p,h+o),e.lineTo(c,h+o/4*3),e.lineTo(c-p,h+o),e.lineTo(c,h),e.closePath()}}),mO={line:function(e,t,o,a,c){c.x1=e,c.y1=t+a/2,c.x2=e+o,c.y2=t+a/2},rect:function(e,t,o,a,c){c.x=e,c.y=t,c.width=o,c.height=a},roundRect:function(e,t,o,a,c){c.x=e,c.y=t,c.width=o,c.height=a,c.r=Math.min(o,a)/4},square:function(e,t,o,a,c){var h=Math.min(o,a);c.x=e,c.y=t,c.width=h,c.height=h},circle:function(e,t,o,a,c){c.cx=e+o/2,c.cy=t+a/2,c.r=Math.min(o,a)/2},diamond:function(e,t,o,a,c){c.cx=e+o/2,c.cy=t+a/2,c.width=o,c.height=a},pin:function(e,t,o,a,c){c.x=e+o/2,c.y=t+a/2,c.width=o,c.height=a},arrow:function(e,t,o,a,c){c.x=e+o/2,c.y=t+a/2,c.width=o,c.height=a},triangle:function(e,t,o,a,c){c.cx=e+o/2,c.cy=t+a/2,c.width=o,c.height=a}},bn={};ee({line:Ya,rect:sr,roundRect:sr,square:sr,circle:Md,diamond:gO,pin:QE,arrow:pO,triangle:hO},function(e,t){bn[t]=new e});var r2=ra({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,o){var a=be(e,t,o),c=this.shape;return c&&"pin"===c.symbolType&&"inside"===t.textPosition&&(a.y=o.y+.4*o.height),a},buildPath:function(e,t,o){var a=t.symbolType;if("none"!==a){var c=bn[a];c=c||bn[a="rect"],mO[a](t.x,t.y,t.width,t.height,c.shape),c.buildPath(e,c.shape,o)}}});function i2(e,t){if("image"!==this.type){var o=this.style,a=this.shape;a&&"line"===a.symbolType?o.stroke=e:this.__isEmptyBrush?(o.stroke=e,o.fill=t||"#fff"):(o.fill&&(o.fill=e),o.stroke&&(o.stroke=e)),this.dirty(!1)}}function Kc(e,t,o,a,c,h,p){var y,w=0===e.indexOf("empty");return w&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(y=0===e.indexOf("image://")?gC(e.slice(8),new Ro(t,o,a,c),p?"center":"cover"):0===e.indexOf("path://")?jc(e.slice(7),{},new Ro(t,o,a,c),p?"center":"cover"):new r2({shape:{symbolType:e,x:t,y:o,width:a,height:c}})).__isEmptyBrush=w,y.setColor=i2,y.setColor(h),y}var fO=(Object.freeze||Object)({createList:function(e){return ug(e.getSource(),e)},getLayoutRect:Xa,dataStack:{isDimensionStacked:dg,enableDataStack:dk,getStackedDimension:Nb},createScale:function(e,t){var o=t;Fo.isInstance(t)||Me(o=new Fo(t),rf);var a=Fb(o);return a.setExtent(e[0],e[1]),of(a,o),a},mixinAxisModelCommonMethods:function(e){Me(e,rf)},completeDimensions:sk,createDimensions:S0,createSymbol:Kc}),B_=1e-8;function z_(e,t){return Math.abs(e-t)<B_}function kp(e,t,o){var a=0,c=e[0];if(!c)return!1;for(var h=1;h<e.length;h++){var p=e[h];a+=Xu(c[0],c[1],p[0],p[1],t,o),c=p}var y=e[0];return z_(c[0],y[0])&&z_(c[1],y[1])||(a+=Xu(c[0],c[1],y[0],y[1],t,o)),0!==a}function zn(e,t,o){if(this.name=e,this.geometries=t,o)o=[o[0],o[1]];else{var a=this.getBoundingRect();o=[a.x+a.width/2,a.y+a.height/2]}this.center=o}function Fn(e,t,o){for(var a=[],c=t[0],h=t[1],p=0;p<e.length;p+=2){var y=e.charCodeAt(p)-64,w=e.charCodeAt(p+1)-64;y=y>>1^-(1&y),w=w>>1^-(1&w),c=y+=c,h=w+=h,a.push([y/o,w/o])}return a}function F_(e,t){return function(o){if(o.UTF8Encoding){var a=o.UTF8Scale;null==a&&(a=1024);for(var c=o.features,h=0;h<c.length;h++)for(var p=c[h].geometry,y=p.coordinates,w=p.encodeOffsets,C=0;C<y.length;C++){var n=y[C];if("Polygon"===p.type)y[C]=Fn(n,w[C],a);else if("MultiPolygon"===p.type)for(var i=0;i<n.length;i++)n[i]=Fn(n[i],w[C][i],a)}o.UTF8Encoding=!1}}(e),Se(We(e.features,function(o){return o.geometry&&o.properties&&0<o.geometry.coordinates.length}),function(o){var a=o.properties,c=o.geometry,h=c.coordinates,p=[];"Polygon"===c.type&&p.push({type:"polygon",exterior:h[0],interiors:h.slice(1)}),"MultiPolygon"===c.type&&ee(h,function(w){w[0]&&p.push({type:"polygon",exterior:w[0],interiors:w.slice(1)})});var y=new zn(a[t||"name"],p,a.cp);return y.properties=a,y})}zn.prototype={constructor:zn,properties:null,getBoundingRect:function(){var e=this._rect;if(e)return e;for(var t=Number.MAX_VALUE,o=[t,t],a=[-t,-t],c=[],h=[],p=this.geometries,y=0;y<p.length;y++)"polygon"===p[y].type&&(eb(p[y].exterior,c,h),go(o,o,c),Ln(a,a,h));return 0===y&&(o[0]=o[1]=a[0]=a[1]=0),this._rect=new Ro(o[0],o[1],a[0]-o[0],a[1]-o[1])},contain:function(e){var t=this.getBoundingRect(),o=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var a=0,c=o.length;a<c;a++)if("polygon"===o[a].type){var p=o[a].interiors;if(kp(o[a].exterior,e[0],e[1])){for(var y=0;y<(p?p.length:0);y++)if(kp(p[y]))continue e;return!0}}return!1},transformTo:function(e,t,o,a){var c=this.getBoundingRect(),h=c.width/c.height;o?a=a||o/h:o=h*a;for(var p=new Ro(e,t,o,a),y=c.calculateTransform(p),w=this.geometries,C=0;C<w.length;C++)if("polygon"===w[C].type){for(var n=w[C].exterior,i=w[C].interiors,s=0;s<n.length;s++)ir(n[s],n[s],y);for(var d=0;d<(i?i.length:0);d++)for(s=0;s<i[d].length;s++)ir(i[d][s],i[d][s],y)}(c=this._rect).copy(p),this.center=[c.x+c.width/2,c.y+c.height/2]},cloneShallow:function(e){null==e&&(e=this.name);var t=new zn(e,this.geometries,this.center);return t._rect=this._rect,t.transformTo=null,t}};var Vb=Xi();function Dn(e,t){var o,p,a=hg(e,"labels"),c=o2(t);return bk(a,c)||V_(a,c,{labels:Bt(c)?Mp(e,c):Tp(e,o="auto"===c?(p=e,Vb(p).autoInterval??(Vb(p).autoInterval=p.calculateCategoryInterval())):c),labelCategoryInterval:o})}function hg(e,t){return Vb(e)[t]||(Vb(e)[t]=[])}function bk(e,t){for(var o=0;o<e.length;o++)if(e[o].key===t)return e[o].value}function V_(e,t,o){return e.push({key:t,value:o}),o}function Tp(e,t,o){var a=P_(e),c=e.scale,h=c.getExtent(),p=e.getLabelModel(),y=[],w=Math.max((t||0)+1,1),C=h[0],n=c.count();0!==C&&1<w&&2<n/w&&(C=Math.round(Math.ceil(C/w)*w));var i=uO(e),s=p.get("showMinLabel")||i,d=p.get("showMaxLabel")||i;s&&C!==h[0]&&f(h[0]);for(var u=C;u<=h[1];u+=w)f(u);function f(v){y.push(o?v:{formattedLabel:a(v),rawLabel:c.getLabel(v),tickValue:v})}return d&&u-w!==h[1]&&f(h[1]),y}function Mp(e,t,o){var a=e.scale,c=P_(e),h=[];return ee(a.getTicks(),function(p){var y=a.getLabel(p);t(p,y)&&h.push(o?p:{formattedLabel:c(p),rawLabel:y,tickValue:p})}),h}var xk=[0,1],bi=function(e,t,o){this.dim=e,this.scale=t,this._extent=o||[0,0],this.inverse=!1,this.onBand=!1};function Qn(e,t){var o=(e[1]-e[0])/t/2;e[0]+=o,e[1]-=o}bi.prototype={constructor:bi,contain:function(e){var t=this._extent,o=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]);return o<=e&&e<=a},containData:function(e){return this.scale.contain(e)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(e){return Xh(e||this.scale.getExtent(),this._extent)},setExtent:function(e,t){var o=this._extent;o[0]=e,o[1]=t},dataToCoord:function(e,t){var o=this._extent,a=this.scale;return e=a.normalize(e),this.onBand&&"ordinal"===a.type&&Qn(o=o.slice(),a.count()),Ht(e,xk,o,t)},coordToData:function(e,t){var o=this._extent,a=this.scale;this.onBand&&"ordinal"===a.type&&Qn(o=o.slice(),a.count());var c=Ht(e,o,xk,t);return this.scale.scale(c)},pointToData:function(e,t){},getTicksCoords:function(e){var t=(e=e||{}).tickModel||this.getTickModel(),o=Se(function tN(e,t){return"category"===e.type?function(o,a){var c,h,p=hg(o,"ticks"),y=o2(a),w=bk(p,y);if(w)return w;if(a.get("show")&&!o.scale.isBlank()||(c=[]),Bt(y))c=Mp(o,y,!0);else if("auto"===y){var C=Dn(o,o.getLabelModel());h=C.labelCategoryInterval,c=Se(C.labels,function(n){return n.tickValue})}else c=Tp(o,h=y,!0);return V_(p,y,{ticks:c,tickCategoryInterval:h})}(e,t):{ticks:e.scale.getTicks()}}(this,t).ticks,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this);return function(a,c,h,p){var y=c.length;if(a.onBand&&!h&&y){var w,n=a.getExtent();if(1===y)c[0].coord=n[0],w=c[1]={coord:n[0]};else{var s=(c[y-1].coord-c[0].coord)/(c[y-1].tickValue-c[0].tickValue);ee(c,function(v){v.coord-=s/2});var d=a.scale.getExtent();c.push(w={coord:c[y-1].coord+s*(1+d[1]-c[y-1].tickValue)})}var u=n[0]>n[1];f(c[0].coord,n[0])&&(p?c[0].coord=n[0]:c.shift()),p&&f(n[0],c[0].coord)&&c.unshift({coord:n[0]}),f(n[1],w.coord)&&(p?w.coord=n[1]:c.pop()),p&&f(w.coord,n[1])&&c.push({coord:n[1]})}function f(v,_){return v=Ea(v),_=Ea(_),u?_<v:v<_}}(this,o,t.get("alignWithLabel"),e.clamp),o},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");return 0<e&&e<100||(e=5),Se(this.scale.getMinorTicks(e),function(t){return Se(t,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this)},getViewLabels:function(){return function eN(e){return"category"===e.type?function(t){var o=t.getLabelModel(),a=Dn(t,o);return!o.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:a.labelCategoryInterval}:a}(e):function(t){var o=t.scale.getTicks(),a=P_(t);return{labels:Se(o,function(c,h){return{formattedLabel:a(c,h),rawLabel:t.scale.getLabel(c),tickValue:c}})}}(e)}(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var e=this._extent,t=this.scale.getExtent(),o=t[1]-t[0]+(this.onBand?1:0);0===o&&(o=1);var a=Math.abs(e[1]-e[0]);return Math.abs(a)/o},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(e){var N,z,t=(z=(N=e).getLabelModel(),{axisRotate:N.getRotate?N.getRotate():N.isHorizontal&&!N.isHorizontal()?90:0,labelRotate:z.get("rotate")||0,font:z.getFont()}),o=P_(e),a=(t.axisRotate-t.labelRotate)/180*Math.PI,c=e.scale,h=c.getExtent(),p=c.count();if(h[1]-h[0]<1)return 0;var y=1;40<p&&(y=Math.max(1,Math.floor(p/40)));for(var w=h[0],C=e.dataToCoord(w+1)-e.dataToCoord(w),n=Math.abs(C*Math.cos(a)),i=Math.abs(C*Math.sin(a)),s=0,d=0;w<=h[1];w+=y){var f,v=rl(o(w),t.font,"center","top");f=1.3*v.height,s=Math.max(s,1.3*v.width,7),d=Math.max(d,f,7)}var _=s/n,k=d/i;isNaN(_)&&(_=1/0),isNaN(k)&&(k=1/0);var T=Math.max(0,Math.floor(Math.min(_,k))),M=Vb(e.model),I=e.getExtent(),O=M.lastAutoInterval,R=M.lastTickCount;return null!=O&&null!=R&&Math.abs(O-T)<=1&&Math.abs(R-p)<=1&&T<O&&M.axisExtend0===I[0]&&M.axisExtend1===I[1]?T=O:(M.lastTickCount=p,M.lastAutoInterval=T,M.axisExtend0=I[0],M.axisExtend1=I[1]),T}(this)}};var a2=F_,Hb={};ee(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(e){Hb[e]=$t[e]});var _k={};function T0(e,t){var o=e.mapDimension("defaultedLabel",!0),a=o.length;if(1===a)return up(e,t,o[0]);if(a){for(var c=[],h=0;h<o.length;h++){var p=up(e,t,o[h]);c.push(p)}return c.join(" ")}}function gg(e,t,o){pn.call(this),this.updateData(e,t,o)}ee(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(e){_k[e]=ti[e]}),Yr.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(e,t){return ug(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var mu=gg.prototype,vO=gg.getSymbolSize=function(e,t){var o=e.getItemVisual(t,"symbolSize");return o instanceof Array?o.slice():[+o,+o]};function wk(e){return[e[0]/2,e[1]/2]}function Sk(e,t){this.parent.drift(e,t)}mu._createSymbol=function(e,t,o,a,c){this.removeAll();var h=Kc(e,-1,-1,2,2,t.getItemVisual(o,"color"),c);h.attr({z2:100,culling:!0,scale:wk(a)}),h.drift=Sk,this._symbolType=e,this.add(h)},mu.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(e)},mu.getSymbolPath=function(){return this.childAt(0)},mu.getScale=function(){return this.childAt(0).scale},mu.highlight=function(){this.childAt(0).trigger("emphasis")},mu.downplay=function(){this.childAt(0).trigger("normal")},mu.setZ=function(e,t){var o=this.childAt(0);o.zlevel=e,o.z=t},mu.setDraggable=function(e){var t=this.childAt(0);t.draggable=e,t.cursor=e?"move":t.cursor},mu.updateData=function(e,t,o){this.silent=!1;var a=e.getItemVisual(t,"symbol")||"circle",c=e.hostModel,h=vO(e,t),p=a!==this._symbolType;if(p){var y=e.getItemVisual(t,"symbolKeepAspect");this._createSymbol(a,e,t,h,y)}else(w=this.childAt(0)).silent=!1,Eo(w,{scale:wk(h)},c,t);if(this._updateCommon(e,t,h,o),p){var w=this.childAt(0),C=o&&o.fadeIn,n={scale:w.scale.slice()};C&&(n.style={opacity:w.style.opacity}),w.scale=[0,0],C&&(w.style.opacity=0),Fs(w,n,c,t)}this._seriesModel=c};var s2=["itemStyle"],Ck=["emphasis","itemStyle"],yO=["label"],nN=["emphasis","label"];function kk(e,t){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===t){var o=this.__symbolOriginalScale,a=o[1]/o[0],c={scale:[Math.max(1.1*o[0],o[0]+3),Math.max(1.1*o[1],o[1]+3*a)]};this.animateTo(c,400,"elasticOut")}else"normal"===t&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function Ap(e){this.group=new pn,this._symbolCtor=e||gg}mu._updateCommon=function(e,t,o,a){var c=this.childAt(0),h=e.hostModel,p=e.getItemVisual(t,"color");"image"!==c.type?c.useStyle({strokeNoScale:!0}):c.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var y=a&&a.itemStyle,w=a&&a.hoverItemStyle,C=a&&a.symbolOffset,n=a&&a.labelModel,i=a&&a.hoverLabelModel,s=a&&a.hoverAnimation,d=a&&a.cursorStyle;if(!a||e.hasItemOption){var u=a&&a.itemModel?a.itemModel:e.getItemModel(t);y=u.getModel(s2).getItemStyle(["color"]),w=u.getModel(Ck).getItemStyle(),C=u.getShallow("symbolOffset"),n=u.getModel(yO),i=u.getModel(nN),s=u.getShallow("hoverAnimation"),d=u.getShallow("cursor")}else w=pe({},w);var f=c.style,v=e.getItemVisual(t,"symbolRotate");c.attr("rotation",(v||0)*Math.PI/180||0),C&&c.attr("position",[rn(C[0],o[0]),rn(C[1],o[1])]),d&&c.attr("cursor",d),c.setColor(p,a&&a.symbolInnerColor),c.setStyle(y);var _=e.getItemVisual(t,"opacity");null!=_&&(f.opacity=_);var k=e.getItemVisual(t,"liftZ"),T=c.__z2Origin;null!=k?null==T&&(c.__z2Origin=c.z2,c.z2+=k):null!=T&&(c.z2=T,c.__z2Origin=null);var M=a&&a.useNameLabel;ei(f,w,n,i,{labelFetcher:h,labelDataIndex:t,defaultText:function(I,O){return M?e.getName(I):T0(e,I)},isRectText:!0,autoColor:p}),c.__symbolOriginalScale=wk(o),c.hoverStyle=w,c.highDownOnUpdate=s&&h.isAnimationEnabled()?kk:null,qr(c)},mu.fadeOut=function(e,t){var o=this.childAt(0);this.silent=o.silent=!0,t&&t.keepLabel||(o.style.text=null),Eo(o,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,e)},ve(gg,pn);var M0=Ap.prototype;function Tk(e,t,o,a){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(a.isIgnore&&a.isIgnore(o))&&!(a.clipShape&&!a.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(o,"symbol")}function Mk(e){return null==e||ue(e)||(e={isIgnore:e}),e||{}}function l2(e){var t=e.hostModel;return{itemStyle:t.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:t.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label"),cursorStyle:t.get("cursor")}}function H_(e,t,o){var a,f,v,_,c=e.getBaseAxis(),h=e.getOtherAxis(c),p=(f=o,v=0,_=h.scale.getExtent(),"start"===f?v=_[0]:"end"===f?v=_[1]:0<_[0]?v=_[0]:_[1]<0&&(v=_[1]),v),y=c.dim,w=h.dim,C=t.mapDimension(w),n=t.mapDimension(y),i="x"===w||"radius"===w?1:0,s=Se(e.dimensions,function(u){return t.mapDimension(u)}),d=t.getCalculationInfo("stackResultDimension");return(a|=dg(t,s[0]))&&(s[0]=d),(a|=dg(t,s[1]))&&(s[1]=d),{dataDimsForPoint:s,valueStart:p,valueAxisDim:w,baseAxisDim:y,stacked:!!a,valueDim:C,baseDim:n,baseDataOffset:i,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Pd(e,t,o,a){var c=NaN;e.stacked&&(c=o.get(o.getCalculationInfo("stackedOverDimension"),a)),isNaN(c)&&(c=e.valueStart);var h=e.baseDataOffset,p=[];return p[h]=o.get(e.baseDim,a),p[1-h]=c,t.dataToPoint(p)}M0.updateData=function(e,t){t=Mk(t);var o=this.group,a=e.hostModel,c=this._data,h=this._symbolCtor,p=l2(e);c||o.removeAll(),e.diff(c).add(function(y){var w=e.getItemLayout(y);if(Tk(e,w,y,t)){var C=new h(e,y,p);C.attr("position",w),e.setItemGraphicEl(y,C),o.add(C)}}).update(function(y,w){var C=c.getItemGraphicEl(w),n=e.getItemLayout(y);Tk(e,n,y,t)?(C?(C.updateData(e,y,p),Eo(C,{position:n},a)):(C=new h(e,y)).attr("position",n),o.add(C),e.setItemGraphicEl(y,C)):o.remove(C)}).remove(function(y){var w=c.getItemGraphicEl(y);w&&w.fadeOut(function(){o.remove(w)})}).execute(),this._data=e},M0.isPersistent=function(){return!0},M0.updateLayout=function(){var e=this._data;e&&e.eachItemGraphicEl(function(t,o){var a=e.getItemLayout(o);t.attr("position",a)})},M0.incrementalPrepareUpdate=function(e){this._seriesScope=l2(e),this._data=null,this.group.removeAll()},M0.incrementalUpdate=function(e,t,o){function a(y){y.isGroup||(y.incremental=y.useHoverLayer=!0)}o=Mk(o);for(var c=e.start;c<e.end;c++){var h=t.getItemLayout(c);if(Tk(t,h,c,o)){var p=new this._symbolCtor(t,c,this._seriesScope);p.traverse(a),p.attr("position",h),this.group.add(p),t.setItemGraphicEl(c,p)}}},M0.remove=function(e){var t=this.group,o=this._data;o&&e?o.eachItemGraphicEl(function(a){a.fadeOut(function(){t.remove(a)})}):t.removeAll()};var A0=go,W_=Ln,c2=wi,U_=Sn,G_=[],Jc=[],Ai=[];function pg(e){return isNaN(e[0])||isNaN(e[1])}function fu(e,t,o,a,c,h,p,y,w,C){return"none"!==C&&C?function(n,i,s,d,u,f,v,_,k,T,M){for(var I=0,O=s,R=0;R<d;R++){var N=i[O];if(u<=O||O<0)break;if(pg(N)){if(M){O+=f;continue}break}if(O===s)n[0<f?"moveTo":"lineTo"](N[0],N[1]);else if(0<k){var z=i[I],L="y"===T?1:0,V=(N[L]-z[L])*k;U_(Jc,z),Jc[L]=z[L]+V,U_(Ai,N),Ai[L]=N[L]-V,n.bezierCurveTo(Jc[0],Jc[1],Ai[0],Ai[1],N[0],N[1])}else n.lineTo(N[0],N[1]);I=O,O+=f}return R}.apply(this,arguments):function(n,i,s,d,u,f,v,_,k,T,M){for(var I=0,O=s,R=0;R<d;R++){var N=i[O];if(u<=O||O<0)break;if(pg(N)){if(M){O+=f;continue}break}if(O===s)n[0<f?"moveTo":"lineTo"](N[0],N[1]),U_(Jc,N);else if(0<k){var z=O+f,L=i[z];if(M)for(;L&&pg(i[z]);)L=i[z+=f];var V=.5,J=i[I];if(!(L=i[z])||pg(L))U_(Ai,N);else{var te,re;if(pg(L)&&!M&&(L=N),Go(G_,L,J),"x"===T||"y"===T){var ie="x"===T?0:1;te=Math.abs(N[ie]-J[ie]),re=Math.abs(N[ie]-L[ie])}else te=Br(N,J),re=Br(N,L);c2(Ai,N,G_,-k*(1-(V=re/(re+te))))}A0(Jc,Jc,_),W_(Jc,Jc,v),A0(Ai,Ai,_),W_(Ai,Ai,v),n.bezierCurveTo(Jc[0],Jc[1],Ai[0],Ai[1],N[0],N[1]),c2(Jc,N,G_,k*V)}else n.lineTo(N[0],N[1]);I=O,O+=f}return R}.apply(this,arguments)}function _r(e,t){var o=[1/0,1/0],a=[-1/0,-1/0];if(t)for(var c=0;c<e.length;c++){var h=e[c];h[0]<o[0]&&(o[0]=h[0]),h[1]<o[1]&&(o[1]=h[1]),h[0]>a[0]&&(a[0]=h[0]),h[1]>a[1]&&(a[1]=h[1])}return{min:t?o:a,max:t?a:o}}var fc=Mo.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:np(Mo.prototype.brush),buildPath:function(e,t){var o=t.points,a=0,c=o.length,h=_r(o,t.smoothConstraint);if(t.connectNulls){for(;0<c&&pg(o[c-1]);c--);for(;a<c&&pg(o[a]);a++);}for(;a<c;)a+=fu(e,o,a,c,c,1,h.min,h.max,t.smooth,t.smoothMonotone,t.connectNulls)+1}}),Wb=Mo.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:np(Mo.prototype.brush),buildPath:function(e,t){var o=t.points,a=t.stackedOnPoints,c=0,h=o.length,p=t.smoothMonotone,y=_r(o,t.smoothConstraint),w=_r(a,t.smoothConstraint);if(t.connectNulls){for(;0<h&&pg(o[h-1]);h--);for(;c<h&&pg(o[c]);c++);}for(;c<h;){var C=fu(e,o,c,h,h,1,y.min,y.max,t.smooth,p,t.connectNulls);fu(e,a,c+C-1,C,h,-1,w.min,w.max,t.stackedOnSmooth,p,t.connectNulls),c+=C+1,e.closePath()}}});function Ub(e,t,o){var a=e.getArea(),c=e.getBaseAxis().isHorizontal(),h=a.x,p=a.y,y=a.width,w=a.height,C=o.get("lineStyle.width")||2;h-=C/2,p-=C/2,y+=C,w+=C,h=Math.floor(h),y=Math.round(y);var n=new sr({shape:{x:h,y:p,width:y,height:w}});return t&&(n.shape[c?"width":"height"]=0,Fs(n,{shape:{width:y,height:w}},o)),n}function sf(e,t,o){var a=e.getArea(),c=new uc({shape:{cx:Ea(e.cx,1),cy:Ea(e.cy,1),r0:Ea(a.r0,1),r:Ea(a.r,1),startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});return t&&(c.shape.endAngle=a.startAngle,Fs(c,{shape:{endAngle:a.endAngle}},o)),c}function Ak(e,t,o){return e?"polar"===e.type?sf(e,t,o):"cartesian2d"===e.type?Ub(e,t,o):null:null}function lf(e,t){if(e.length===t.length){for(var o=0;o<e.length;o++){var a=e[o],c=t[o];if(a[0]!==c[0]||a[1]!==c[1])return}return!0}}function lr(e,t){var o=[],a=[],c=[],h=[];return eb(e,o,a),eb(t,c,h),Math.max(Math.abs(o[0]-c[0]),Math.abs(o[1]-c[1]),Math.abs(a[0]-h[0]),Math.abs(a[1]-h[1]))}function vu(e){return"number"==typeof e?e:e?.5:0}function Ip(e,t,o){for(var a=t.getBaseAxis(),c="x"===a.dim||"radius"===a.dim?0:1,h=[],p=0;p<e.length-1;p++){var y=e[p+1],w=e[p];h.push(w);var C=[];switch(o){case"end":C[c]=y[c],C[1-c]=w[1-c],h.push(C);break;case"middle":var i=[];C[c]=i[c]=(w[c]+y[c])/2,C[1-c]=w[1-c],i[1-c]=y[1-c],h.push(C),h.push(i);break;default:C[c]=w[c],C[1-c]=y[1-c],h.push(C)}}return e[p]&&h.push(e[p]),h}function j_(e,t,o){if("cartesian2d"!==e.type)return sf(e,t,o);var a=e.getBaseAxis().isHorizontal(),c=Ub(e,t,o);if(!o.get("clip",!0)){var h=c.shape,p=Math.max(h.width,h.height);a?(h.y-=p,h.height+=2*p):(h.x-=p,h.width+=2*p)}return c}function Xl(e,t,o){return{seriesType:e,performRawSeries:!0,reset:function(a,c,h){var p=a.getData(),y=a.get("symbol"),w=a.get("symbolSize"),C=a.get("symbolKeepAspect"),n=a.get("symbolRotate"),i=Bt(y),s=Bt(w),d=Bt(n),u=i||s||d,f=!i&&y?y:t;if(p.setVisual({legendSymbol:o||f,symbol:f,symbolSize:s?null:w,symbolKeepAspect:C,symbolRotate:n}),!c.isSeriesFiltered(a))return{dataEach:p.hasItemOption||u?function(_,k){if(u){var T=a.getRawValue(k),M=a.getDataParams(k);i&&_.setItemVisual(k,"symbol",y(T,M)),s&&_.setItemVisual(k,"symbolSize",w(T,M)),d&&_.setItemVisual(k,"symbolRotate",n(T,M))}if(_.hasItemOption){var I=_.getItemModel(k),O=I.getShallow("symbol",!0),R=I.getShallow("symbolSize",!0),N=I.getShallow("symbolRotate",!0),z=I.getShallow("symbolKeepAspect",!0);null!=O&&_.setItemVisual(k,"symbol",O),null!=R&&_.setItemVisual(k,"symbolSize",R),null!=N&&_.setItemVisual(k,"symbolRotate",N),null!=z&&_.setItemVisual(k,"symbolKeepAspect",z)}}:null}}}}function Ms(e){return{seriesType:e,plan:oh(),reset:function(t){var o=t.getData(),a=t.coordinateSystem,c=t.pipelineContext.large;if(a){var h=Se(a.dimensions,function(w){return o.mapDimension(w)}).slice(0,2),p=h.length,y=o.getCalculationInfo("stackResultDimension");return dg(o,h[0])&&(h[0]=y),dg(o,h[1])&&(h[1]=y),p&&{progress:function(w,C){for(var i=c&&new Float32Array((w.end-w.start)*p),s=w.start,d=0,u=[],f=[];s<w.end;s++){var v;if(1===p){var _=C.get(h[0],s);v=!isNaN(_)&&a.dataToPoint(_,null,f)}else{_=u[0]=C.get(h[0],s);var k=u[1]=C.get(h[1],s);v=!isNaN(_)&&!isNaN(k)&&a.dataToPoint(u,null,f)}c?(i[d++]=v?v[0]:NaN,i[d++]=v?v[1]:NaN):C.setItemLayout(s,v&&v.slice()||[NaN,NaN])}c&&C.setLayout("symbolPoints",i)}}}}}}function Ik(e,t){return Math.round(e.length/2)}Za.extend({type:"line",init:function(){var e=new pn,t=new Ap;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},render:function(e,t,o){var a=e.coordinateSystem,c=this.group,h=e.getData(),p=e.getModel("lineStyle"),y=e.getModel("areaStyle"),w=h.mapArray(h.getItemLayout),C="polar"===a.type,n=this._coordSys,i=this._symbolDraw,s=this._polyline,d=this._polygon,u=this._lineGroup,f=e.get("animation"),v=!y.isEmpty(),_=y.get("origin"),k=function(J,te,re){if(!re.valueDim)return[];for(var ie=[],he=0,fe=te.count();he<fe;he++)ie.push(Pd(re,J,te,he));return ie}(a,h,H_(a,h,_)),T=e.get("showSymbol"),M=T&&!C&&function cf(e,t,o){var a=e.get("showAllSymbol"),c="auto"===a;if(!a||c){var h=o.getAxesByScale("ordinal")[0];if(h&&(!c||!function(w,C){var n=w.getExtent(),i=Math.abs(n[1]-n[0])/w.scale.count();isNaN(i)&&(i=0);for(var s=C.count(),d=Math.max(1,Math.round(s/5)),u=0;u<s;u+=d)if(1.5*gg.getSymbolSize(C,u)[w.isHorizontal()?1:0]>i)return!1;return!0}(h,t))){var p=t.mapDimension(h.dim),y={};return ee(h.getViewLabels(),function(w){y[w.tickValue]=1}),function(w){return!y.hasOwnProperty(t.get(p,w))}}}}(e,h,a),I=this._data;I&&I.eachItemGraphicEl(function(J,te){J.__temp&&(c.remove(J),I.setItemGraphicEl(te,null))}),T||i.remove(),c.add(u);var O,R=!C&&e.get("step");a&&a.getArea&&e.get("clip",!0)&&(null!=(O=a.getArea()).width?(O.x-=.1,O.y-=.1,O.width+=.2,O.height+=.2):O.r0&&(O.r0-=.5,O.r1+=.5)),this._clipShapeForSymbol=O,s&&n.type===a.type&&R===this._step?(v&&!d?d=this._newPolygon(w,k,a,f):d&&!v&&(u.remove(d),d=this._polygon=null),u.setClipPath(j_(a,!1,e)),T&&i.updateData(h,{isIgnore:M,clipShape:O}),h.eachItemGraphicEl(function(J){J.stopAnimation(!0)}),lf(this._stackedOnPoints,k)&&lf(this._points,w)||(f?this._updateAnimation(h,k,a,o,R,_):(R&&(w=Ip(w,a,R),k=Ip(k,a,R)),s.setShape({points:w}),d&&d.setShape({points:w,stackedOnPoints:k})))):(T&&i.updateData(h,{isIgnore:M,clipShape:O}),R&&(w=Ip(w,a,R),k=Ip(k,a,R)),s=this._newPolyline(w,a,f),v&&(d=this._newPolygon(w,k,a,f)),u.setClipPath(j_(a,!0,e)));var N=function(J,te){var re=J.getVisual("visualMeta");if(re&&re.length&&J.count()&&"cartesian2d"===te.type){for(var ie,he,fe=re.length-1;0<=fe;fe--){var He=J.getDimensionInfo(J.dimensions[re[fe].dimension]);if("x"===(ie=He&&He.coordDim)||"y"===ie){he=re[fe];break}}if(he){var we=te.getAxis(ie),De=Se(he.stops,function(qt){return{coord:we.toGlobalCoord(we.dataToCoord(qt.value)),color:qt.color}}),Be=De.length,et=he.outerColors.slice();Be&&De[0].coord>De[Be-1].coord&&(De.reverse(),et.reverse());var Ye=De[0].coord-10,it=De[Be-1].coord+10,yt=it-Ye;if(yt<.001)return"transparent";ee(De,function(qt){qt.offset=(qt.coord-Ye)/yt}),De.push({offset:Be?De[Be-1].offset:.5,color:et[1]||"transparent"}),De.unshift({offset:Be?De[0].offset:.5,color:et[0]||"transparent"});var It=new Gc(0,0,0,0,De,!0);return It[ie]=Ye,It[ie+"2"]=it,It}}}(h,a)||h.getVisual("color");s.useStyle(_e(p.getLineStyle(),{fill:"none",stroke:N,lineJoin:"bevel"}));var z=e.get("smooth");if(z=vu(e.get("smooth")),s.setShape({smooth:z,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")}),d){var L=h.getCalculationInfo("stackedOnSeries"),V=0;d.useStyle(_e(y.getAreaStyle(),{fill:N,opacity:.7,lineJoin:"bevel"})),L&&(V=vu(L.get("smooth"))),d.setShape({smooth:z,stackedOnSmooth:V,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")})}this._data=h,this._coordSys=a,this._stackedOnPoints=k,this._points=w,this._step=R,this._valueOrigin=_},dispose:function(){},highlight:function(e,t,o,a){var c=e.getData(),h=pm(c,a);if(!(h instanceof Array)&&null!=h&&0<=h){var p=c.getItemGraphicEl(h);if(!p){var y=c.getItemLayout(h);if(!y||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(y[0],y[1]))return;(p=new gg(c,h)).position=y,p.setZ(e.get("zlevel"),e.get("z")),p.ignore=isNaN(y[0])||isNaN(y[1]),p.__temp=!0,c.setItemGraphicEl(h,p),p.stopSymbolAnimation(!0),this.group.add(p)}p.highlight()}else Za.prototype.highlight.call(this,e,t,o,a)},downplay:function(e,t,o,a){var c=e.getData(),h=pm(c,a);if(null!=h&&0<=h){var p=c.getItemGraphicEl(h);p&&(p.__temp?(c.setItemGraphicEl(h,null),this.group.remove(p)):p.downplay())}else Za.prototype.downplay.call(this,e,t,o,a)},_newPolyline:function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new fc({shape:{points:e},silent:!0,z2:10}),this._lineGroup.add(t),this._polyline=t},_newPolygon:function(e,t){var o=this._polygon;return o&&this._lineGroup.remove(o),o=new Wb({shape:{points:e,stackedOnPoints:t},silent:!0}),this._lineGroup.add(o),this._polygon=o},_updateAnimation:function(e,t,o,a,c,h){var p=this._polyline,y=this._polygon,w=e.hostModel,C=function(k,T,M,I,O,R,N,z){for(var L=function(en,qe){var Je=[];return qe.diff(en).add(function(gt){Je.push({cmd:"+",idx:gt})}).update(function(gt,ht){Je.push({cmd:"=",idx:ht,idx1:gt})}).remove(function(gt){Je.push({cmd:"-",idx:gt})}).execute(),Je}(k,T),V=[],J=[],te=[],re=[],ie=[],he=[],fe=[],ye=H_(O,T,N),Ie=H_(R,k,z),He=0;He<L.length;He++){var we=L[He],De=!0;switch(we.cmd){case"=":var Be=k.getItemLayout(we.idx),et=T.getItemLayout(we.idx1);(isNaN(Be[0])||isNaN(Be[1]))&&(Be=et.slice()),V.push(Be),J.push(et),te.push(M[we.idx]),re.push(I[we.idx1]),fe.push(T.getRawIndex(we.idx1));break;case"+":var Ye=we.idx;V.push(O.dataToPoint([T.get(ye.dataDimsForPoint[0],Ye),T.get(ye.dataDimsForPoint[1],Ye)])),J.push(T.getItemLayout(Ye).slice()),te.push(Pd(ye,O,T,Ye)),re.push(I[Ye]),fe.push(T.getRawIndex(Ye));break;case"-":var it=k.getRawIndex(Ye=we.idx);it!==Ye?(V.push(k.getItemLayout(Ye)),J.push(R.dataToPoint([k.get(Ie.dataDimsForPoint[0],Ye),k.get(Ie.dataDimsForPoint[1],Ye)])),te.push(M[Ye]),re.push(Pd(Ie,R,k,Ye)),fe.push(it)):De=!1}De&&(ie.push(we),he.push(he.length))}he.sort(function(en,qe){return fe[en]-fe[qe]});var yt=[],It=[],qt=[],Xt=[],Dt=[];for(He=0;He<he.length;He++)yt[He]=V[Ye=he[He]],It[He]=J[Ye],qt[He]=te[Ye],Xt[He]=re[Ye],Dt[He]=ie[Ye];return{current:yt,next:It,stackedOnCurrent:qt,stackedOnNext:Xt,status:Dt}}(this._data,e,this._stackedOnPoints,t,this._coordSys,o,this._valueOrigin,h),n=C.current,i=C.stackedOnCurrent,s=C.next,d=C.stackedOnNext;if(c&&(n=Ip(C.current,o,c),i=Ip(C.stackedOnCurrent,o,c),s=Ip(C.next,o,c),d=Ip(C.stackedOnNext,o,c)),3e3<lr(n,s)||y&&3e3<lr(i,d))return p.setShape({points:s}),void(y&&y.setShape({points:s,stackedOnPoints:d}));p.shape.__points=C.current,p.shape.points=n,Eo(p,{shape:{points:s}},w),y&&(y.setShape({points:n,stackedOnPoints:i}),Eo(y,{shape:{points:s,stackedOnPoints:d}},w));for(var u=[],f=C.status,v=0;v<f.length;v++)if("="===f[v].cmd){var _=e.getItemGraphicEl(f[v].idx1);_&&u.push({el:_,ptIdx:v})}p.animators&&p.animators.length&&p.animators[0].during(function(){for(var k=0;k<u.length;k++)u[k].el.attr("position",p.shape.__points[u[k].ptIdx])})},remove:function(e){var t=this.group,o=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),o&&o.eachItemGraphicEl(function(a,c){a.__temp&&(t.remove(a),o.setItemGraphicEl(c,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var q_={average:function(e){for(var t=0,o=0,a=0;a<e.length;a++)isNaN(e[a])||(t+=e[a],o++);return 0===o?NaN:t/o},sum:function(e){for(var t=0,o=0;o<e.length;o++)t+=e[o]||0;return t},max:function(e){for(var t=-1/0,o=0;o<e.length;o++)e[o]>t&&(t=e[o]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,o=0;o<e.length;o++)e[o]<t&&(t=e[o]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}};function Dk(e){return this._axes[e]}function df(e){this._axes={},this._dimList=[],this.name=e||""}function I0(e){df.call(this,e)}function $_(e,t,o,a,c){bi.call(this,e,t,o),this.type=a||"value",this.position=c||"bottom"}df.prototype={constructor:df,type:"cartesian",getAxis:function(e){return this._axes[e]},getAxes:function(){return Se(this._dimList,Dk,this)},getAxesByScale:function(e){return e=e.toLowerCase(),We(this.getAxes(),function(t){return t.scale.type===e})},addAxis:function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},dataToCoord:function(e){return this._dataCoordConvert(e,"dataToCoord")},coordToData:function(e){return this._dataCoordConvert(e,"coordToData")},_dataCoordConvert:function(e,t){for(var o=this._dimList,a=e instanceof Array?[]:{},c=0;c<o.length;c++){var h=o[c];a[h]=this._axes[h][t](e[h])}return a}},I0.prototype={constructor:I0,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(e){var t=this.getAxis("x"),o=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&o.contain(o.toLocalCoord(e[1]))},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},dataToPoint:function(e,t,o){var a=this.getAxis("x"),c=this.getAxis("y");return(o=o||[])[0]=a.toGlobalCoord(a.dataToCoord(e[0])),o[1]=c.toGlobalCoord(c.dataToCoord(e[1])),o},clampData:function(e,t){var o=this.getAxis("x").scale,a=this.getAxis("y").scale,c=o.getExtent(),h=a.getExtent(),p=o.parse(e[0]),y=a.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(c[0],c[1]),p),Math.max(c[0],c[1])),t[1]=Math.min(Math.max(Math.min(h[0],h[1]),y),Math.max(h[0],h[1])),t},pointToData:function(e,t){var o=this.getAxis("x"),a=this.getAxis("y");return(t=t||[])[0]=o.coordToData(o.toLocalCoord(e[0])),t[1]=a.coordToData(a.toLocalCoord(e[1])),t},getOtherAxis:function(e){return this.getAxis("x"===e.dim?"y":"x")},getArea:function(){var e=this.getAxis("x").getGlobalExtent(),t=this.getAxis("y").getGlobalExtent(),o=Math.min(e[0],e[1]),a=Math.min(t[0],t[1]);return new Ro(o,a,Math.max(e[0],e[1])-o,Math.max(t[0],t[1])-a)}},ve(I0,df),$_.prototype={constructor:$_,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},getGlobalExtent:function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},toLocalCoord:null,toGlobalCoord:null},ve($_,bi);var Gb={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},ch={};function yu(e,t,o,a){ee(d2,function(c){t.extend({type:e+"Axis."+c,mergeDefaultAndTheme:function(h,p){var y=this.layoutMode,w=y?Lm(h):{};le(h,p.getTheme().get(c+"Axis")),le(h,this.getDefaultOption()),h.type=o(e,h),y&&Rm(h,w,y)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=Sp.createByAxisModel(this))},getCategories:function(h){var p=this.option;if("category"===p.type)return h?p.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:de([{},ch[c+"Axis"],a],!0)})}),wo.registerSubTypeDefaulter(e+"Axis",wt(o,e))}ch.categoryAxis=le({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Gb),ch.valueAxis=le({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},Gb),ch.timeAxis=_e({scale:!0,min:"dataMin",max:"dataMax"},ch.valueAxis),ch.logAxis=_e({scale:!0,logBase:10},ch.valueAxis);var d2=["value","category","time","log"],Dp=wo.extend({type:"cartesian2dAxis",axis:null,init:function(){Dp.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){Dp.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){Dp.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function Ok(e,t){return t.type||(t.data?"category":"value")}le(Dp.prototype,rf);var u2={offset:0};function jb(e,t){return e.getCoordSysModel()===t}function dh(e,t,o){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(e,t,o),this.model=e}yu("x",Dp,Ok,u2),yu("y",Dp,Ok,u2),wo.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var cs=dh.prototype;function qb(e,t,o,a){o.getAxesOnZeroOf=function(){return c?[c]:[]};var c,h=e[t],p=o.model,y=p.get("axisLine.onZero"),w=p.get("axisLine.onZeroAxisIndex");if(y){if(null!=w)Ek(h[w])&&(c=h[w]);else for(var C in h)if(h.hasOwnProperty(C)&&Ek(h[C])&&!a[n(h[C])]){c=h[C];break}c&&(a[n(c)]=!0)}function n(i){return i.dim+"_"+i.index}}function Ek(e){return e&&"category"!==e.type&&"time"!==e.type&&function(t){var o=t.scale.getExtent(),a=o[0],c=o[1];return!(0<a&&0<c||a<0&&c<0)}(e)}cs.type="grid",cs.axisPointerEnabled=!0,cs.getRect=function(){return this._rect},cs.update=function(e,t){var o=this._axesMap;this._updateScale(e,this.model),ee(o.x,function(c){of(c.scale,c.model)}),ee(o.y,function(c){of(c.scale,c.model)});var a={};ee(o.x,function(c){qb(o,"y",c,a)}),ee(o.y,function(c){qb(o,"x",c,a)}),this.resize(this.model,t)},cs.resize=function(e,t,o){var a=Xa(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});this._rect=a;var c=this._axesList;function h(){ee(c,function(p){var n,i,s,d,y=p.isHorizontal(),w=y?[0,a.width]:[0,a.height],C=p.inverse?1:0;p.setExtent(w[C],w[1-C]),i=y?a.x:a.y,s=(n=p).getExtent(),d=s[0]+s[1],n.toGlobalCoord="x"===n.dim?function(u){return u+i}:function(u){return d-u+i},n.toLocalCoord="x"===n.dim?function(u){return u-i}:function(u){return d-u+i}})}h(),!o&&e.get("containLabel")&&(ee(c,function(p){if(!p.model.get("axisLabel.inside")){var y=function(n){var s=n.scale;if(n.model.get("axisLabel.show")&&!s.isBlank()){var d,u,f="category"===n.type,v=s.getExtent();u=f?s.count():(d=s.getTicks()).length;var _,k,M,I,O,R,N,z,L=n.getLabelModel(),V=P_(n),J=1;40<u&&(J=Math.ceil(u/40));for(var te=0;te<u;te+=J){var re=V(d?d[te]:v[0]+te),he=(k=L.getTextRect(re),M=(L.get("rotate")||0)*Math.PI/180,R=(I=k.plain()).height,N=(O=I.width)*Math.abs(Math.cos(M))+Math.abs(R*Math.sin(M)),z=O*Math.abs(Math.sin(M))+Math.abs(R*Math.cos(M)),new Ro(I.x,I.y,N,z));_?_.union(he):_=he}return _}}(p);if(y){var w=p.isHorizontal()?"height":"width",C=p.model.get("axisLabel.margin");a[w]-=y[w]+C,"top"===p.position?a.y+=y.height+C:"left"===p.position&&(a.x+=y.width+C)}}}),h())},cs.getAxis=function(e,t){var o=this._axesMap[e];if(null!=o){if(null==t)for(var a in o)if(o.hasOwnProperty(a))return o[a];return o[t]}},cs.getAxes=function(){return this._axesList.slice()},cs.getCartesian=function(e,t){if(null!=e&&null!=t)return this._coordsMap["x"+e+"y"+t];ue(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var a=0,c=this._coordsList;a<c.length;a++)if(c[a].getAxis("x").index===e||c[a].getAxis("y").index===t)return c[a]},cs.getCartesians=function(){return this._coordsList.slice()},cs.convertToPixel=function(e,t,o){var a=this._findConvertTarget(e,t);return a.cartesian?a.cartesian.dataToPoint(o):a.axis?a.axis.toGlobalCoord(a.axis.dataToCoord(o)):null},cs.convertFromPixel=function(e,t,o){var a=this._findConvertTarget(e,t);return a.cartesian?a.cartesian.pointToData(o):a.axis?a.axis.coordToData(a.axis.toLocalCoord(o)):null},cs._findConvertTarget=function(e,t){var o,a,c=t.seriesModel,h=t.xAxisModel||c&&c.getReferringComponents("xAxis")[0],p=t.yAxisModel||c&&c.getReferringComponents("yAxis")[0],y=t.gridModel;return c?Ue(this._coordsList,o=c.coordinateSystem)<0&&(o=null):h&&p?o=this.getCartesian(h.componentIndex,p.componentIndex):h?a=this.getAxis("x",h.componentIndex):p?a=this.getAxis("y",p.componentIndex):y&&y.coordinateSystem===this&&(o=this._coordsList[0]),{cartesian:o,axis:a}},cs.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},cs._initCartesian=function(e,t,o){var a={left:!1,right:!1,top:!1,bottom:!1},c={x:{},y:{}},h={x:0,y:0};if(t.eachComponent("xAxis",p("x"),this),t.eachComponent("yAxis",p("y"),this),!h.x||!h.y)return this._axesMap={},void(this._axesList=[]);function p(y){return function(w,C){if(jb(w,e)){var n=w.get("position");"x"===y?"top"!==n&&"bottom"!==n&&(n=a.bottom?"top":"bottom"):"left"!==n&&"right"!==n&&(n=a.left?"right":"left"),a[n]=!0;var i=new $_(y,Fb(w),[0,0],w.get("type"),n);i.onBand="category"===i.type&&w.get("boundaryGap"),i.inverse=w.get("inverse"),(w.axis=i).model=w,i.grid=this,i.index=C,this._axesList.push(i),c[y][C]=i,h[y]++}}}ee((this._axesMap=c).x,function(y,w){ee(c.y,function(C,n){var i="x"+w+"y"+n,s=new I0(i);s.grid=this,s.model=e,this._coordsMap[i]=s,this._coordsList.push(s),s.addAxis(y),s.addAxis(C)},this)},this)},cs._updateScale=function(e,t){function o(a,c){ee(a.mapDimension(c.dim,!0),function(h){c.scale.unionExtentFromData(a,Nb(a,h))})}ee(this._axesList,function(a){a.scale.setExtent(1/0,-1/0)}),e.eachSeries(function(a){if(Lk(a)){var c=Rk(a),h=c[0],p=c[1];if(!jb(h,t)||!jb(p,t))return;var y=this.getCartesian(h.componentIndex,p.componentIndex),w=a.getData(),C=y.getAxis("x"),n=y.getAxis("y");"list"===w.type&&(o(w,C),o(w,n))}},this)},cs.getTooltipAxes=function(e){var t=[],o=[];return ee(this.getCartesians(),function(a){var c=null!=e&&"auto"!==e?a.getAxis(e):a.getBaseAxis(),h=a.getOtherAxis(c);Ue(t,c)<0&&t.push(c),Ue(o,h)<0&&o.push(h)}),{baseAxes:t,otherAxes:o}};var Nk=["xAxis","yAxis"];function Rk(e){return Se(Nk,function(t){return e.getReferringComponents(t)[0]})}function Lk(e){return"cartesian2d"===e.get("coordinateSystem")}function wl(e,t){this.opt=t,this.axisModel=e,_e(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new pn;var o=new pn({position:t.position.slice(),rotation:t.rotation});o.updateTransform(),this._transform=o.transform,this._dumbGroup=o}dh.create=function(e,t){var o=[];return e.eachComponent("grid",function(a,c){var h=new dh(a,e,t);h.name="grid_"+c,h.resize(a,t,!0),a.coordinateSystem=h,o.push(h)}),e.eachSeries(function(a){if(Lk(a)){var c=Rk(a),h=c[0],p=c[1],y=h.getCoordSysModel().coordinateSystem;a.coordinateSystem=y.getCartesian(h.componentIndex,p.componentIndex)}}),o},dh.dimensions=dh.prototype.dimensions=I0.prototype.dimensions,yl.register("cartesian2d",dh);var mg=Math.PI;wl.prototype={constructor:wl,hasBuilder:function(e){return!!h2[e]},add:function(e){h2[e].call(this)},getGroup:function(){return this.group}};var h2={axisLine:function(){var e=this.opt,t=this.axisModel;if(t.get("axisLine.show")){var o=this.axisModel.axis.getExtent(),a=this._transform,c=[o[0],0],h=[o[1],0];a&&(ir(c,c,a),ir(h,h,a));var p=pe({lineCap:"round"},t.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new Ya({anid:"line",subPixelOptimize:!0,shape:{x1:c[0],y1:c[1],x2:h[0],y2:h[1]},style:p,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1}));var y=t.get("axisLine.symbol"),w=t.get("axisLine.symbolSize"),C=t.get("axisLine.symbolOffset")||0;if("number"==typeof C&&(C=[C,C]),null!=y){"string"==typeof y&&(y=[y,y]),"string"!=typeof w&&"number"!=typeof w||(w=[w,w]);var n=w[0],i=w[1];ee([{rotate:e.rotation+Math.PI/2,offset:C[0],r:0},{rotate:e.rotation-Math.PI/2,offset:C[1],r:Math.sqrt((c[0]-h[0])*(c[0]-h[0])+(c[1]-h[1])*(c[1]-h[1]))}],function(s,d){if("none"!==y[d]&&null!=y[d]){var u=Kc(y[d],-n/2,-i/2,n,i,p.stroke,!0),f=s.r+s.offset,v=[c[0]+f*Math.cos(e.rotation),c[1]-f*Math.sin(e.rotation)];u.attr({rotation:s.rotate,position:v,silent:!0,z2:11}),this.group.add(u)}},this)}}},axisTickLabel:function(){var e=this.axisModel,t=this.opt,o=function(a,c,h){var p=c.axis,y=c.getModel("axisTick");if(y.get("show")&&!p.scale.isBlank()){for(var w=y.getModel("lineStyle"),C=h.tickDirection*y.get("length"),n=p2(p.getTicksCoords(),a._transform,C,_e(w.getLineStyle(),{stroke:c.get("axisLine.lineStyle.color")}),"ticks"),i=0;i<n.length;i++)a.group.add(n[i]);return n}}(this,e,t);(function(a,c,h){if(!uO(a.axis)){var p=a.get("axisLabel.showMinLabel"),y=a.get("axisLabel.showMaxLabel"),w=(c=c||[])[0],C=c[1],n=c[c.length-1],i=c[c.length-2],s=(h=h||[])[0],d=h[1],u=h[h.length-1],f=h[h.length-2];!1===p?(vc(w),vc(s)):g2(w,C)&&(p?(vc(C),vc(d)):(vc(w),vc(s))),!1===y?(vc(n),vc(u)):g2(i,n)&&(y?(vc(i),vc(f)):(vc(n),vc(u)))}})(e,function(a,c,h){var p=c.axis;if(Jt(h.axisLabelShow,c.get("axisLabel.show"))&&!p.scale.isBlank()){var y=c.getModel("axisLabel"),w=y.get("margin"),C=p.getViewLabels(),n=(Jt(h.labelRotate,y.get("rotate"))||0)*mg/180,i=Y_(h.rotation,n,h.labelDirection),s=c.getCategories&&c.getCategories(!0),d=[],u=Bk(c),f=c.get("triggerEvent");return ee(C,function(v,_){var k=v.tickValue,T=v.formattedLabel,M=v.rawLabel,I=y;s&&s[k]&&s[k].textStyle&&(I=new Fo(s[k].textStyle,y,c.ecModel));var O=I.getTextColor()||c.get("axisLine.lineStyle.color"),R=[p.dataToCoord(k),h.labelOffset+h.labelDirection*w],N=new Yo({anid:"label_"+k,position:R,rotation:i.rotation,silent:u,z2:10});Fi(N.style,I,{text:T,textAlign:I.getShallow("align",!0)||i.textAlign,textVerticalAlign:I.getShallow("verticalAlign",!0)||I.getShallow("baseline",!0)||i.textVerticalAlign,textFill:"function"==typeof O?O("category"===p.type?M:"value"===p.type?k+"":k,_):O}),f&&(N.eventData=Pk(c),N.eventData.targetType="axisLabel",N.eventData.value=M),a._dumbGroup.add(N),N.updateTransform(),d.push(N),a.group.add(N),N.decomposeTransform()}),d}}(this,e,t),o),function(a,c,h){var p=c.axis,y=c.getModel("minorTick");if(y.get("show")&&!p.scale.isBlank()){var w=p.getMinorTicksCoords();if(w.length)for(var C=y.getModel("lineStyle"),n=h.tickDirection*y.get("length"),i=_e(C.getLineStyle(),_e(c.getModel("axisTick").getLineStyle(),{stroke:c.get("axisLine.lineStyle.color")})),s=0;s<w.length;s++)for(var d=p2(w[s],a._transform,n,i,"minorticks_"+s),u=0;u<d.length;u++)a.group.add(d[u])}}(this,e,t)},axisName:function(){var R,z,V,J,te,re,e=this.opt,t=this.axisModel,o=Jt(e.axisName,t.get("name"));if(o){var a,c,h=t.get("nameLocation"),p=e.nameDirection,y=t.getModel("nameTextStyle"),w=t.get("nameGap")||0,C=this.axisModel.axis.getExtent(),n=C[0]>C[1]?-1:1,i=["start"===h?C[0]-n*w:"end"===h?C[1]+n*w:(C[0]+C[1])/2,X_(h)?e.labelOffset+p*w:0],s=t.get("nameRotate");null!=s&&(s=s*mg/180),X_(h)?a=Y_(e.rotation,s??e.rotation,p):(R=h,z=C,J=CC((s||0)-e.rotation),te=z[0]>z[1],re="start"===R&&!te||"start"!==R&&te,a={rotation:J,textAlign:aa(J-mg/2)?(V=re?"bottom":"top","center"):aa(J-1.5*mg)?(V=re?"top":"bottom","center"):(V="middle",J<1.5*mg&&mg/2<J?re?"left":"right":re?"right":"left"),textVerticalAlign:V},null!=(c=e.axisNameAvailableWidth)&&(c=Math.abs(c/Math.sin(a.rotation)),isFinite(c)||(c=null)));var d=y.getFont(),u=t.get("nameTruncate",!0)||{},f=u.ellipsis,v=Jt(e.nameTruncateMaxWidth,u.maxWidth,c),_=null!=f&&null!=v?hb(o,v,d,f,{minChar:2,placeholder:u.placeholder}):o,k=t.get("tooltip",!0),T=t.mainType,M={componentType:T,name:o,$vars:["name"]};M[T+"Index"]=t.componentIndex;var I=new Yo({anid:"name",__fullText:o,__truncatedText:_,position:i,rotation:a.rotation,silent:Bk(t),z2:1,tooltip:k&&k.show?pe({content:o,formatter:function(){return o},formatterParams:M},k):null});Fi(I.style,y,{text:_,textFont:d,textFill:y.getTextColor()||t.get("axisLine.lineStyle.color"),textAlign:y.get("align")||a.textAlign,textVerticalAlign:y.get("verticalAlign")||a.textVerticalAlign}),t.get("triggerEvent")&&(I.eventData=Pk(t),I.eventData.targetType="axisName",I.eventData.name=o),this._dumbGroup.add(I),I.updateTransform(),this.group.add(I),I.decomposeTransform()}}},Pk=wl.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},Y_=wl.innerTextLayout=function(e,t,o){var a,c=CC(t-e);return{rotation:c,textAlign:aa(c)?(a=0<o?"top":"bottom","center"):aa(c-mg)?(a=0<o?"bottom":"top","center"):(a="middle",0<c&&c<mg?0<o?"right":"left":0<o?"left":"right"),textVerticalAlign:a}},Bk=wl.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)};function vc(e){e&&(e.ignore=!0)}function g2(e,t){var o=e&&e.getBoundingRect().clone(),a=t&&t.getBoundingRect().clone();if(o&&a){var c=tl([]);return Rc(c,c,-e.rotation),o.applyTransform(Aa([],c,e.getLocalTransform())),a.applyTransform(Aa([],c,t.getLocalTransform())),o.intersect(a)}}function X_(e){return"middle"===e||"center"===e}function p2(e,t,o,a,c){for(var h=[],p=[],y=[],w=0;w<e.length;w++){var C=e[w].coord;p[0]=C,y[p[1]=0]=C,y[1]=o,t&&(ir(p,p,t),ir(y,y,t));var n=new Ya({anid:c+"_"+e[w].tickValue,subPixelOptimize:!0,shape:{x1:p[0],y1:p[1],x2:y[0],y2:y[1]},style:a,z2:2,silent:!0});h.push(n)}return h}var uf=ee,$b=wt;function Yb(e,t){return"all"===e||nt(e)&&0<=Ue(e,t)||e===t}function Xb(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Qc(e)]}function D0(e){return!!e.get("handle.show")}function Qc(e){return e.type+"||"+e.id}var ed=fr({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(e,t,o,a){this.axisPointerClass&&function(c){var h=Xb(c);if(h){var p=h.axisPointerModel,y=h.axis.scale,w=p.option,C=p.get("status"),n=p.get("value");null!=n&&(n=y.parse(n));var i=D0(p);null==C&&(w.status=i?"show":"hide");var s=y.getExtent().slice();s[0]>s[1]&&s.reverse(),(null==n||n>s[1])&&(n=s[1]),n<s[0]&&(n=s[0]),w.value=n,i&&(w.status=h.axis.scale.isBlank()?"hide":"show")}}(e),ed.superApply(this,"render",arguments),K_(this,e,0,o,0,!0)},updateAxisPointer:function(e,t,o,a,c){K_(this,e,0,o,0,!1)},remove:function(e,t){var o=this._axisPointer;o&&o.remove(t),ed.superApply(this,"remove",arguments)},dispose:function(e,t){Zb(this,t),ed.superApply(this,"dispose",arguments)}});function K_(e,t,o,a,c,h){var C,p=ed.getAxisPointerClass(e.axisPointerClass);if(p){var y=(C=Xb(t))&&C.axisPointerModel;y?(e._axisPointer||(e._axisPointer=new p)).render(t,y,a,h):Zb(e,a)}}function Zb(e,t,o){var a=e._axisPointer;a&&a.dispose(t,o),e._axisPointer=null}var O0=[];function Kb(e,t,o){o=o||{};var a=e.coordinateSystem,c=t.axis,h={},p=c.getAxesOnZeroOf()[0],y=c.position,w=p?"onZero":y,C=c.dim,n=a.getRect(),i=[n.x,n.x+n.width,n.y,n.y+n.height],s={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,u="x"===C?[i[2]-d,i[3]+d]:[i[0]-d,i[1]+d];if(p){var f=p.toGlobalCoord(p.dataToCoord(0));u[s.onZero]=Math.max(Math.min(f,u[1]),u[0])}h.position=["y"===C?u[s[w]]:i[0],"x"===C?u[s[w]]:i[3]],h.rotation=Math.PI/2*("x"===C?0:1),h.labelDirection=h.tickDirection=h.nameDirection={top:-1,bottom:1,left:-1,right:1}[y],h.labelOffset=p?u[s[y]]-u[s.onZero]:0,t.get("axisTick.inside")&&(h.tickDirection=-h.tickDirection),Jt(o.labelInside,t.get("axisLabel.inside"))&&(h.labelDirection=-h.labelDirection);var v=t.get("axisLabel.rotate");return h.labelRotate="top"===w?-v:v,h.z2=1,h}function zk(e,t,o,a){var c=o.axis;if(!c.scale.isBlank()){var h=o.getModel("splitArea"),p=h.getModel("areaStyle"),y=p.get("color"),w=a.coordinateSystem.getRect(),C=c.getTicksCoords({tickModel:h,clamp:!0});if(C.length){var n=y.length,i=e.__splitAreaColors,s=ft(),d=0;if(i)for(var u=0;u<C.length;u++){var f=i.get(C[u].tickValue);if(null!=f){d=(f+(n-1)*u)%n;break}}var v=c.toGlobalCoord(C[0].coord),_=p.getAreaStyle();for(y=nt(y)?y:[y],u=1;u<C.length;u++){var k,T,M,I,O=c.toGlobalCoord(C[u].coord);v=c.isHorizontal()?(T=w.y,I=w.height,(k=v)+(M=O-k)):(k=w.x,M=w.width,(T=v)+(I=O-T));var R=C[u-1].tickValue;null!=R&&s.set(R,d),t.add(new sr({anid:null!=R?"area_"+R:null,shape:{x:k,y:T,width:M,height:I},style:_e({fill:y[d]},_),silent:!0})),d=(d+1)%n}e.__splitAreaColors=s}}}function hf(e){e.__splitAreaColors=null}ed.registerAxisPointerClass=function(e,t){O0[e]=t},ed.getAxisPointerClass=function(e){return e&&O0[e]};var J_=["axisLine","axisTickLabel","axisName"],Fk=["splitArea","splitLine","minorSplitLine"],bu=ed.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(e,t,o,a){this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new pn,this.group.add(this._axisGroup),e.get("show")){var h=e.getCoordSysModel(),p=Kb(h,e),y=new wl(e,p);ee(J_,y.add,y),this._axisGroup.add(y.getGroup()),ee(Fk,function(w){e.get(w+".show")&&this["_"+w](e,h)},this),db(c,this._axisGroup,e),bu.superCall(this,"render",e,t,o,a)}},remove:function(){hf(this)},_splitLine:function(e,t){var o=e.axis;if(!o.scale.isBlank()){var a=e.getModel("splitLine"),c=a.getModel("lineStyle"),h=c.get("color");h=nt(h)?h:[h];for(var p=t.coordinateSystem.getRect(),y=o.isHorizontal(),w=0,C=o.getTicksCoords({tickModel:a}),n=[],i=[],s=c.getLineStyle(),d=0;d<C.length;d++){var u=o.toGlobalCoord(C[d].coord);y?(n[0]=u,n[1]=p.y,i[0]=u,i[1]=p.y+p.height):(n[0]=p.x,n[1]=u,i[0]=p.x+p.width,i[1]=u);var f=w++%h.length;this._axisGroup.add(new Ya({anid:null!=C[d].tickValue?"line_"+C[d].tickValue:null,subPixelOptimize:!0,shape:{x1:n[0],y1:n[1],x2:i[0],y2:i[1]},style:_e({stroke:h[f]},s),silent:!0}))}}},_minorSplitLine:function(e,t){var o=e.axis,a=e.getModel("minorSplitLine").getModel("lineStyle"),c=t.coordinateSystem.getRect(),h=o.isHorizontal(),p=o.getMinorTicksCoords();if(p.length)for(var y=[],w=[],C=a.getLineStyle(),n=0;n<p.length;n++)for(var i=0;i<p[n].length;i++){var s=o.toGlobalCoord(p[n][i].coord);h?(y[0]=s,y[1]=c.y,w[0]=s,w[1]=c.y+c.height):(y[0]=c.x,y[1]=s,w[0]=c.x+c.width,w[1]=s),this._axisGroup.add(new Ya({anid:"minor_line_"+p[n][i].tickValue,subPixelOptimize:!0,shape:{x1:y[0],y1:y[1],x2:w[0],y2:w[1]},style:C,silent:!0}))}},_splitArea:function(e,t){zk(this,this._axisGroup,e,t)}});bu.extend({type:"xAxis"}),bu.extend({type:"yAxis"}),fr({type:"grid",render:function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new sr({shape:e.coordinateSystem.getRect(),style:_e({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))}}),ks(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})}),yi(Xl("line","circle","line")),Wn(Ms("line")),Kt(Xc.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(e,t,o){var a=e.getData(),c=e.get("sampling"),h=e.coordinateSystem;if("cartesian2d"===h.type&&c){var p,y=h.getBaseAxis(),w=h.getOtherAxis(y),C=y.getExtent(),n=Math.abs(C[1]-C[0]),i=Math.round(a.count()/n);1<i&&("string"==typeof c?p=q_[c]:"function"==typeof c&&(p=c),p&&e.setData(a.downSample(a.mapDimension(w.dim),1/i,p,Ik)))}}});var Op=Yr.extend({type:"series.__base_bar__",getInitialData:function(e,t){return ug(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(e){var t=this.coordinateSystem;if(t){var o=t.dataToPoint(t.clampData(e)),a=this.getData(),c=a.getLayout("offset"),h=a.getLayout("size");return o[t.getBaseAxis().isHorizontal()?0:1]+=c+h/2,o}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function Q_(e,t,o,a,c,h){ei(e,t,o.getModel("label"),o.getModel("emphasis.label"),{labelFetcher:c,labelDataIndex:h,defaultText:T0(c.getData(),h),isRectText:!0,autoColor:a}),Vk(e),Vk(t)}function Vk(e,t){"outside"===e.textPosition&&(e.textPosition=t)}Op.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return e<t&&(e=t),e},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});var m2=ym([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Hk={getBarItemStyle:function(e){var t=m2(this,e);if(this.getBorderLineDash){var o=this.getBorderLineDash();o&&(t.lineDash=o)}return t}},bO=ra({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(e,t){var o=t.cx,a=t.cy,c=Math.max(t.r0||0,0),h=Math.max(t.r,0),p=.5*(h-c),y=c+p,w=t.startAngle,C=t.endAngle,n=t.clockwise,i=Math.cos(w),s=Math.sin(w),d=Math.cos(C),u=Math.sin(C);(n?C-w<2*Math.PI:w-C<2*Math.PI)&&(e.moveTo(i*c+o,s*c+a),e.arc(i*y+o,s*y+a,p,-Math.PI+w,w,!n)),e.arc(o,a,h,w,C,!n),e.moveTo(d*h+o,u*h+a),e.arc(d*y+o,u*y+a,p,C-2*Math.PI,C-Math.PI,!n),0!==c&&(e.arc(o,a,c,C,w,n),e.moveTo(i*c+o,u*c+a)),e.closePath()}}),gf=["itemStyle","barBorderWidth"],xu=[0,0];pe(Fo.prototype,Hk),Ts({type:"bar",render:function(e,t,o){this._updateDrawMode(e);var a=e.get("coordinateSystem");return"cartesian2d"!==a&&"polar"!==a||(this._isLargeDraw?this._renderLarge(e,t,o):this._renderNormal(e,t,o)),this.group},incrementalPrepareRender:function(e,t,o){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,o,a){this._incrementalRenderLarge(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e,t,o){var a,c=this.group,h=e.getData(),p=this._data,y=e.coordinateSystem,w=y.getBaseAxis();"cartesian2d"===y.type?a=w.isHorizontal():"polar"===y.type&&(a="angle"===w.dim);var C=e.isAnimationEnabled()?e:null,n=e.get("clip",!0),i=function(I,O){var R=I.getArea&&I.getArea();if("cartesian2d"===I.type){var N=I.getBaseAxis();if("category"!==N.type||!N.onBand){var z=O.getLayout("bandWidth");N.isHorizontal()?(R.x-=z,R.width+=2*z):(R.y-=z,R.height+=2*z)}}return R}(y,h);function s(I){var N,O=E0[y.type](h,I),R=new("polar"===(N=y).type?uc:sr)({shape:tw(a,O,N),silent:!0,z2:0});return R.useStyle(f.getBarItemStyle()),"cartesian2d"===y.type&&R.setShape("r",v),_[I]=R}c.removeClipPath();var d=e.get("roundCap",!0),u=e.get("showBackground",!0),f=e.getModel("backgroundStyle"),v=f.get("barBorderRadius")||0,_=[],k=this._backgroundEls||[];h.diff(p).add(function(I){var O=h.getItemModel(I),R=E0[y.type](h,I,O);if(u&&s(I),h.hasValue(I)){if(n&&Wo[y.type](i,R))return void c.remove(N);var N=Wk[y.type](I,R,a,C,!1,d);h.setItemGraphicEl(I,N),c.add(N),mf(N,h,I,O,R,e,0,"polar"===y.type)}}).update(function(I,O){var R=h.getItemModel(I),N=E0[y.type](h,I,R);if(u){var z;0===k.length?z=s(O):((z=k[O]).useStyle(f.getBarItemStyle()),"cartesian2d"===y.type&&z.setShape("r",v),_[I]=z);var L=E0[y.type](h,I);Eo(z,{shape:tw(a,L,y)},C,I)}var V=p.getItemGraphicEl(O);if(h.hasValue(I)){if(n&&Wo[y.type](i,N))return void c.remove(V);V?Eo(V,{shape:N},C,I):V=Wk[y.type](I,N,a,C,!0,d),h.setItemGraphicEl(I,V),c.add(V),mf(V,h,I,R,N,e,0,"polar"===y.type)}else c.remove(V)}).remove(function(I){var O=p.getItemGraphicEl(I);"cartesian2d"===y.type?O&&xO(I,C,O):O&&cr(I,C,O)}).execute();var T=this._backgroundGroup||(this._backgroundGroup=new pn);T.removeAll();for(var M=0;M<_.length;++M)T.add(_[M]);c.add(T),this._backgroundEls=_,this._data=h},_renderLarge:function(e,t,o){this._clear(),N0(e,this.group);var a=e.get("clip",!0)?Ak(e.coordinateSystem,!1,e):null;a?this.group.setClipPath(a):this.group.removeClipPath()},_incrementalRenderLarge:function(e,t){this._removeBackground(),N0(t,this.group,!0)},dispose:Tt,remove:function(e){this._clear(e)},_clear:function(e){var t=this.group,o=this._data;e&&e.get("animation")&&o&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],o.eachItemGraphicEl(function(a){"sector"===a.type?cr(a.dataIndex,e,a):xO(a.dataIndex,e,a)})):t.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}});var ua=Math.max,uh=Math.min,Wo={cartesian2d:function(e,t){var o=t.width<0?-1:1,a=t.height<0?-1:1;o<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height);var c=ua(t.x,e.x),h=uh(t.x+t.width,e.x+e.width),p=ua(t.y,e.y),y=uh(t.y+t.height,e.y+e.height);t.x=c,t.y=p,t.width=h-c,t.height=y-p;var w=t.width<0||t.height<0;return o<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height),w},polar:function(e,t){var o=t.r0<=t.r?1:-1;if(o<0){var a=t.r;t.r=t.r0,t.r0=a}a=uh(t.r,e.r);var c=ua(t.r0,e.r0),h=(t.r=a)-(t.r0=c)<0;return o<0&&(a=t.r,t.r=t.r0,t.r0=a),h}},Wk={cartesian2d:function(e,t,o,a,c){var h=new sr({shape:pe({},t),z2:1});if(h.name="item",a){var p=o?"height":"width",y={};h.shape[p]=0,y[p]=t[p],ti[c?"updateProps":"initProps"](h,{shape:y},a,e)}return h},polar:function(e,t,o,a,c,h){var y=new(!o&&h?bO:uc)({shape:_e({clockwise:t.startAngle<t.endAngle},t),z2:1});if(y.name="item",a){var w=o?"r":"endAngle",C={};y.shape[w]=o?0:t.startAngle,C[w]=t[w],ti[c?"updateProps":"initProps"](y,{shape:C},a,e)}return y}};function xO(e,t,o){o.style.text=null,Eo(o,{shape:{width:0}},t,e,function(){o.parent&&o.parent.remove(o)})}function cr(e,t,o){o.style.text=null,Eo(o,{shape:{r:o.shape.r0}},t,e,function(){o.parent&&o.parent.remove(o)})}var E0={cartesian2d:function(e,t,o){var w,C,n,i,a=e.getItemLayout(t),c=o?(w=a,C=o.get(gf)||0,n=isNaN(w.width)?Number.MAX_VALUE:Math.abs(w.width),i=isNaN(w.height)?Number.MAX_VALUE:Math.abs(w.height),Math.min(C,n,i)):0,h=0<a.width?1:-1,p=0<a.height?1:-1;return{x:a.x+h*c/2,y:a.y+p*c/2,width:a.width-h*c,height:a.height-p*c}},polar:function(e,t,o){var a=e.getItemLayout(t);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle}}};function pf(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}function mf(e,t,o,a,c,h,p,y){var w=t.getItemVisual(o,"color"),C=t.getItemVisual(o,"opacity"),n=t.getVisual("borderColor"),i=a.getModel("itemStyle"),s=a.getModel("emphasis.itemStyle").getBarItemStyle();y||e.setShape("r",i.get("barBorderRadius")||0),e.useStyle(_e({stroke:pf(c)?"none":n,fill:pf(c)?"none":w,opacity:C},i.getBarItemStyle()));var d=a.getShallow("cursor");d&&e.attr("cursor",d),y||Q_(e.style,s,a,w,h,o),pf(c)&&(s.fill=s.stroke="none"),qr(e,s)}var ff=Mo.extend({type:"largeBar",shape:{points:[]},buildPath:function(e,t){for(var o=t.points,a=this.__startPoint,c=this.__baseDimIdx,h=0;h<o.length;h+=2)a[c]=o[h+c],e.moveTo(a[0],a[1]),e.lineTo(o[h],o[h+1])}});function N0(e,t,o){var a=e.getData(),c=[],h=a.getLayout("valueAxisHorizontal")?1:0;c[1-h]=a.getLayout("valueAxisStart");var d,u,f,v,_,p=a.getLayout("largeDataIndices"),y=a.getLayout("barWidth"),w=e.getModel("backgroundStyle");if(e.get("showBackground",!0)){var C=a.getLayout("largeBackgroundPoints"),n=[];n[1-h]=a.getLayout("backgroundStart");var i=new ff({shape:{points:C},incremental:!!o,__startPoint:n,__baseDimIdx:h,__largeDataIndices:p,__barWidth:y,silent:!0,z2:0});d=i,f=a,v=(u=w).get("borderColor")||u.get("color"),_=u.getItemStyle(["color","borderColor"]),d.useStyle(_),d.style.fill=null,d.style.stroke=v,d.style.lineWidth=f.getLayout("barWidth"),t.add(i)}var s=new ff({shape:{points:a.getLayout("largePoints")},incremental:!!o,__startPoint:c,__baseDimIdx:h,__largeDataIndices:p,__barWidth:y});t.add(s),function(d,u,f){var v=f.getVisual("borderColor")||f.getVisual("color"),_=u.getModel("itemStyle").getItemStyle(["color","borderColor"]);d.useStyle(_),d.style.fill=null,d.style.stroke=v,d.style.lineWidth=f.getLayout("barWidth")}(s,e,a),s.seriesIndex=e.seriesIndex,e.get("silent")||(s.on("mousedown",ew),s.on("mousemove",ew))}var ew=p_(function(e){var t=function(o,a,c){var h=o.__baseDimIdx,p=1-h,y=o.shape.points,w=o.__largeDataIndices,C=Math.abs(o.__barWidth/2),n=o.__startPoint[p];xu[0]=a,xu[1]=c;for(var i=xu[h],s=xu[1-h],d=i-C,u=i+C,f=0,v=y.length/2;f<v;f++){var _=2*f,k=y[_+h],T=y[_+p];if(d<=k&&k<=u&&(n<=T?n<=s&&s<=T:T<=s&&s<=n))return w[f]}return-1}(this,e.offsetX,e.offsetY);this.dataIndex=0<=t?t:null},30,!1);function tw(e,t,o){var a,c="polar"===o.type;return a=c?o.getArea():o.grid.getRect(),c?{cx:a.cx,cy:a.cy,r0:e?a.r0:t.r0,r:e?a.r:t.r,startAngle:e?t.startAngle:0,endAngle:e?t.endAngle:2*Math.PI}:{x:e?t.x:a.x,y:e?a.y:t.y,width:e?t.width:a.width,height:e?a.height:t.height}}function R0(e,t,o){t=nt(t)&&{coordDimensions:t}||pe({},t);var a=e.getSource(),c=S0(a,t),h=new Ja(c,e);return h.initData(a,o),h}Wn(Xc.VISUAL.LAYOUT,wt(sO,"bar")),Wn(Xc.VISUAL.PROGRESSIVE_LAYOUT,lO),yi({seriesType:"bar",reset:function(e){e.getData().setVisual("legendSymbol","roundRect")}});var _u={updateSelectedMap:function(e){this._targetList=nt(e)?e.slice():[],this._selectTargetMap=F(e||[],function(t,o){return t.set(o.name,o),t},ft())},select:function(e,t){var o=null!=t?this._targetList[t]:this._selectTargetMap.get(e);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(a){a.selected=!1}),o&&(o.selected=!0)},unSelect:function(e,t){var o=null!=t?this._targetList[t]:this._selectTargetMap.get(e);o&&(o.selected=!1)},toggleSelected:function(e,t){var o=null!=t?this._targetList[t]:this._selectTargetMap.get(e);if(null!=o)return this[o.selected?"unSelect":"select"](e,t),o.selected},isSelected:function(e,t){var o=null!=t?this._targetList[t]:this._selectTargetMap.get(e);return o&&o.selected}};function L0(e,t){this.getAllNames=function(){var o=t();return o.mapArray(o.getName)},this.containName=function(o){return 0<=t().indexOfName(o)},this.indexOfName=function(o){return e().indexOfName(o)},this.getItemVisual=function(o,a){return e().getItemVisual(o,a)}}var vr=Zm({type:"series.pie",init:function(e){vr.superApply(this,"init",arguments),this.legendVisualProvider=new L0(rt(this.getData,this),rt(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(e)},mergeOption:function(e){vr.superCall(this,"mergeOption",e),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(e,t){return R0(this,{coordDimensions:["value"],encodeDefaulter:wt(yb,this)})},_createSelectableList:function(){for(var e=this.getRawData(),t=e.mapDimension("value"),o=[],a=0,c=e.count();a<c;a++)o.push({name:e.getName(a),value:e.get(t,a),selected:WA(e,a,"selected")});return o},getDataParams:function(e){var t=this.getData(),o=vr.superCall(this,"getDataParams",e),a=[];return t.each(t.mapDimension("value"),function(c){a.push(c)}),o.percent=kA(a,e,t.hostModel.get("percentPrecision")),o.$vars.push("percent"),o},_defaultLabelLine:function(e){Fl(e,"labelLine",["show"]);var t=e.labelLine,o=e.emphasis.labelLine;t.show=t.show&&e.label.show,o.show=o.show&&e.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});function f2(e,t,o,a){var c=t.getData(),p=c.getName(this.dataIndex),y=t.get("selectedOffset");a.dispatchAction({type:"pieToggleSelect",from:e,name:p,seriesId:t.id}),c.each(function(w){nw(c.getItemGraphicEl(w),c.getItemLayout(w),t.isSelected(c.getName(w)),y,o)})}function nw(e,t,o,a,c){var h=(t.startAngle+t.endAngle)/2,p=o?a:0,y=[Math.cos(h)*p,Math.sin(h)*p];c?e.animate().when(200,{position:y}).start("bounceOut"):e.attr("position",y)}function ow(e,t){pn.call(this);var o=new uc({z2:2}),a=new Zi,c=new Yo;this.add(o),this.add(a),this.add(c),this.updateData(e,t,!0)}Me(vr,_u);var Uk=ow.prototype;function v2(e,t){ee(t,function(o){o.update="updateView",Xo(o,function(a,c){var h={};return c.eachComponent({mainType:"series",subType:e,query:a},function(p){p[o.method]&&p[o.method](a.name,a.dataIndex);var y=p.getData();y.each(function(w){var C=y.getName(w);h[C]=p.isSelected(C)||!1})}),{name:a.name,selected:h,seriesId:a.seriesId}})})}function As(e){return{getTargetSeries:function(t){var o={},a=ft();return t.eachSeriesByType(e,function(c){c.__paletteScope=o,a.set(c.uid,c)}),a},reset:function(t,o){var a=t.getRawData(),c={},h=t.getData();h.each(function(p){var y=h.getRawIndex(p);c[y]=p}),a.each(function(p){var y,w=c[p],C=null!=w&&h.getItemVisual(w,"color",!0),n=null!=w&&h.getItemVisual(w,"borderColor",!0);if(C&&n||(y=a.getItemModel(p)),!C){var i=y.get("itemStyle.color")||t.getColorFromPalette(a.getName(p)||p+"",t.__paletteScope,a.count());null!=w&&h.setItemVisual(w,"color",i)}if(!n){var s=y.get("itemStyle.borderColor");null!=w&&h.setItemVisual(w,"borderColor",s)}})}}}Uk.updateData=function(e,t,o){var a=this.childAt(0),c=this.childAt(1),h=this.childAt(2),p=e.hostModel,y=e.getItemModel(t),w=e.getItemLayout(t),C=pe({},w);C.label=null;var n=p.getShallow("animationTypeUpdate");o?(a.setShape(C),"scale"===p.getShallow("animationType")?(a.shape.r=w.r0,Fs(a,{shape:{r:w.r}},p,t)):(a.shape.endAngle=w.startAngle,Eo(a,{shape:{endAngle:w.endAngle}},p,t))):"expansion"===n?a.setShape(C):Eo(a,{shape:C},p,t);var i=e.getItemVisual(t,"color");a.useStyle(_e({lineJoin:"bevel",fill:i},y.getModel("itemStyle").getItemStyle())),a.hoverStyle=y.getModel("emphasis.itemStyle").getItemStyle();var s=y.getShallow("cursor");s&&a.attr("cursor",s),nw(this,e.getItemLayout(t),p.isSelected(e.getName(t)),p.get("selectedOffset"),p.get("animation")),this._updateLabel(e,t,!o&&"transition"===n),this.highDownOnUpdate=p.get("silent")?null:function(u,f){var v=p.isAnimationEnabled()&&y.get("hoverAnimation");"emphasis"===f?(c.ignore=c.hoverIgnore,h.ignore=h.hoverIgnore,v&&(a.stopAnimation(!0),a.animateTo({shape:{r:w.r+p.get("hoverOffset")}},300,"elasticOut"))):(c.ignore=c.normalIgnore,h.ignore=h.normalIgnore,v&&(a.stopAnimation(!0),a.animateTo({shape:{r:w.r}},300,"elasticOut")))},qr(this)},Uk._updateLabel=function(e,t,o){var a=this.childAt(1),c=this.childAt(2),h=e.hostModel,p=e.getItemModel(t),y=e.getItemLayout(t).label,w=e.getItemVisual(t,"color");if(!y||isNaN(y.x)||isNaN(y.y))c.ignore=c.normalIgnore=c.hoverIgnore=a.ignore=a.normalIgnore=a.hoverIgnore=!0;else{var C={points:y.linePoints||[[y.x,y.y],[y.x,y.y],[y.x,y.y]]},n={x:y.x,y:y.y};o?(Eo(a,{shape:C},h,t),Eo(c,{style:n},h,t)):(a.attr({shape:C}),c.attr({style:n})),c.attr({rotation:y.rotation,origin:[y.x,y.y],z2:10});var i=p.getModel("label"),s=p.getModel("emphasis.label"),d=p.getModel("labelLine"),u=p.getModel("emphasis.labelLine");w=e.getItemVisual(t,"color"),ei(c.style,c.hoverStyle={},i,s,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:y.text,autoColor:w,useInsideStyle:!!y.inside},{textAlign:y.textAlign,textVerticalAlign:y.verticalAlign,opacity:e.getItemVisual(t,"opacity")}),c.ignore=c.normalIgnore=!i.get("show"),c.hoverIgnore=!s.get("show"),a.ignore=a.normalIgnore=!d.get("show"),a.hoverIgnore=!u.get("show"),a.setStyle({stroke:w,opacity:e.getItemVisual(t,"opacity")}),a.setStyle(d.getModel("lineStyle").getLineStyle()),a.hoverStyle=u.getModel("lineStyle").getLineStyle();var f=d.get("smooth");f&&!0===f&&(f=.4),a.setShape({smooth:f})}},ve(ow,pn),Za.extend({type:"pie",init:function(){var e=new pn;this._sectorGroup=e},render:function(e,t,o,a){if(!a||a.from!==this.uid){var c=e.getData(),h=this._data,p=this.group,y=t.get("animation"),w=!h,C=e.get("animationType"),n=e.get("animationTypeUpdate"),i=wt(f2,this.uid,e,y,o),s=e.get("selectedMode");if(c.diff(h).add(function(_){var k=new ow(c,_);w&&"scale"!==C&&k.eachChild(function(T){T.stopAnimation(!0)}),s&&k.on("click",i),c.setItemGraphicEl(_,k),p.add(k)}).update(function(_,k){var T=h.getItemGraphicEl(k);w||"transition"===n||T.eachChild(function(M){M.stopAnimation(!0)}),T.updateData(c,_),T.off("click"),s&&T.on("click",i),p.add(T),c.setItemGraphicEl(_,T)}).remove(function(_){var k=h.getItemGraphicEl(_);p.remove(k)}).execute(),y&&0<c.count()&&(w?"scale"!==C:"transition"!==n)){for(var d=c.getItemLayout(0),u=1;isNaN(d.startAngle)&&u<c.count();++u)d=c.getItemLayout(u);var f=Math.max(o.getWidth(),o.getHeight())/2,v=rt(p.removeClipPath,p);p.setClipPath(this._createClipPath(d.cx,d.cy,f,d.startAngle,d.clockwise,v,e,w))}else p.removeClipPath();this._data=c}},dispose:function(){},_createClipPath:function(e,t,o,a,c,h,p,y){var w=new uc({shape:{cx:e,cy:t,r0:0,r:o,startAngle:a,endAngle:a,clockwise:c}});return(y?Fs:Eo)(w,{shape:{endAngle:a+(c?1:-1)*Math.PI*2}},p,h),w},containPoint:function(e,t){var o=t.getData().getItemLayout(0);if(o){var a=e[0]-o.cx,c=e[1]-o.cy,h=Math.sqrt(a*a+c*c);return h<=o.r&&h>=o.r0}}});var Bd=Math.PI/180;function Gk(e,t,o,a,c,h,p,y,w,C){function n(M,I,O){for(var R=M;R<I&&!(e[R].y+O>w+p);R++)if(e[R].y+=O,M<R&&R+1<I&&e[R+1].y>e[R].y+e[R].height)return void i(R,O/2);i(I-1,O/2)}function i(M,I){for(var O=M;0<=O&&!(e[O].y-I<w)&&(e[O].y-=I,!(0<O&&e[O].y>e[O-1].y+e[O-1].height));O--);}function s(M,I,O,R,N,z){for(var L=I?Number.MAX_VALUE:0,V=0,J=M.length;V<J;V++)if("none"===M[V].labelAlignTo){var te=Math.abs(M[V].y-R),re=M[V].len,ie=M[V].len2,he=te<N+re?Math.sqrt((N+re+ie)*(N+re+ie)-te*te):Math.abs(M[V].x-O);I&&L<=he&&(he=L-10),!I&&he<=L&&(he=L+10),M[V].x=O+he*z,L=he}}e.sort(function(M,I){return M.y-I.y});for(var d,u=0,f=e.length,v=[],_=[],k=0;k<f;k++)"outer"===e[k].position&&"labelLine"===e[k].labelAlignTo&&(e[k].linePoints[1][0]+=e[k].x-C,e[k].x=C),(d=e[k].y-u)<0&&n(k,f,-d),u=e[k].y+e[k].height;for(p-u<0&&i(f-1,u-p),k=0;k<f;k++)e[k].y>=o?_.push(e[k]):v.push(e[k]);s(v,!1,t,o,a,c),s(_,!0,t,o,a,c)}function jk(e){return"center"===e.position}var vf=2*Math.PI,$k=Math.PI/180;function zd(e){return{seriesType:e,reset:function(t,o){var a=o.findComponents({mainType:"legend"});if(a&&a.length){var c=t.getData();c.filterSelf(function(h){for(var p=c.getName(h),y=0;y<a.length;y++)if(!a[y].isSelected(p))return!1;return!0})}}}}v2("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),yi(As("pie")),Wn(wt(function(e,t,o,a){t.eachSeriesByType(e,function(c){var he,h=c.getData(),p=h.mapDimension("value"),y=(he=o,Xa(c.getBoxLayoutParams(),{width:he.getWidth(),height:he.getHeight()})),w=c.get("center"),C=c.get("radius");nt(C)||(C=[0,C]),nt(w)||(w=[w,w]);var n=rn(y.width,o.getWidth()),i=rn(y.height,o.getHeight()),s=Math.min(n,i),d=rn(w[0],n)+y.x,u=rn(w[1],i)+y.y,f=rn(C[0],s/2),v=rn(C[1],s/2),_=-c.get("startAngle")*$k,k=c.get("minAngle")*$k,T=0;h.each(p,function(ie){isNaN(ie)||T++});var M=h.getSum(p),I=Math.PI/(M||T)*2,O=c.get("clockwise"),R=c.get("roseType"),N=c.get("stillShowZeroSum"),z=h.getDataExtent(p);z[0]=0;var L=vf,V=0,J=_,te=O?1:-1;if(h.each(p,function(ie,he){var fe;if(isNaN(ie))h.setItemLayout(he,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:O,cx:d,cy:u,r0:f,r:R?NaN:v,viewRect:y});else{(fe="area"!==R?0===M&&N?I:ie*I:vf/T)<k?L-=fe=k:V+=ie;var ye=J+te*fe;h.setItemLayout(he,{angle:fe,startAngle:J,endAngle:ye,clockwise:O,cx:d,cy:u,r0:f,r:R?Ht(ie,z,[f,v]):v,viewRect:y}),J=ye}}),L<vf&&T)if(L<=.001){var re=vf/T;h.each(p,function(ie,he){if(!isNaN(ie)){var fe=h.getItemLayout(he);fe.angle=re,fe.startAngle=_+te*he*re,fe.endAngle=_+te*(he+1)*re}})}else I=L/V,J=_,h.each(p,function(ie,he){if(!isNaN(ie)){var fe=h.getItemLayout(he),ye=fe.angle===k?k:ie*I;fe.startAngle=J,fe.endAngle=J+te*ye,J+=te*ye}});!function qk(e,t,o,a,c,h){var p,y,w=e.getData(),C=[],n=!1,i=(e.get("minShowLabelAngle")||0)*Bd;w.each(function(s){var d=w.getItemLayout(s),u=w.getItemModel(s),f=u.getModel("label"),v=f.get("position")||u.get("emphasis.label.position"),_=f.get("distanceToLabelLine"),k=f.get("alignTo"),T=rn(f.get("margin"),o),M=f.get("bleedMargin"),I=f.getFont(),O=u.getModel("labelLine"),R=O.get("length");R=rn(R,o);var N=O.get("length2");if(N=rn(N,o),!(d.angle<i)){var z,L,V,J,te=(d.startAngle+d.endAngle)/2,re=Math.cos(te),ie=Math.sin(te);p=d.cx,y=d.cy;var he,fe=e.getFormattedLabel(s,"normal")||w.getName(s),ye=rl(fe,I,J,"top"),Ie="inside"===v||"inner"===v;if("center"===v)z=d.cx,L=d.cy,J="center";else{var He=(Ie?(d.r+d.r0)/2*re:d.r*re)+p,we=(Ie?(d.r+d.r0)/2*ie:d.r*ie)+y;if(z=He+3*re,L=we+3*ie,!Ie){var De=He+re*(R+t-d.r),Be=we+ie*(R+t-d.r),et=De+(re<0?-1:1)*N;z="edge"===k?re<0?c+T:c+o-T:et+(re<0?-_:_),V=[[He,we],[De,Be],[et,L=Be]]}J=Ie?"center":"edge"===k?0<re?"right":"left":0<re?"left":"right"}var Ye=f.get("rotate");he="number"==typeof Ye?Ye*(Math.PI/180):Ye?re<0?-te+Math.PI:-te:0,n=!!he,d.label={x:z,y:L,position:v,height:ye.height,len:R,len2:N,linePoints:V,textAlign:J,verticalAlign:"middle",rotation:he,inside:Ie,labelDistance:_,labelAlignTo:k,labelMargin:T,bleedMargin:M,textRect:ye,text:fe,font:I},Ie||C.push(d.label)}}),!n&&e.get("avoidLabelOverlap")&&function(s,d,u,f,v,_,k,T){for(var M=[],I=[],O=Number.MAX_VALUE,R=-Number.MAX_VALUE,N=0;N<s.length;N++)jk(s[N])||(s[N].x<d?(O=Math.min(O,s[N].x),M.push(s[N])):(R=Math.max(R,s[N].x),I.push(s[N])));for(Gk(I,d,u,f,1,0,_,0,T,R),Gk(M,d,u,f,-1,0,_,0,T,O),N=0;N<s.length;N++){var z=s[N];if(!jk(z)){var L=z.linePoints;if(L){var V,J="edge"===z.labelAlignTo,te=z.textRect.width;(V=J?z.x<d?L[2][0]-z.labelDistance-k-z.labelMargin:k+v-z.labelMargin-L[2][0]-z.labelDistance:z.x<d?z.x-k-z.bleedMargin:k+v-z.x-z.bleedMargin)<z.textRect.width&&(z.text=Le(z.text,V,z.font),"edge"===z.labelAlignTo&&(te=ya(z.text,z.font)));var re=L[1][0]-L[2][0];J?L[2][0]=z.x<d?k+z.labelMargin+te+z.labelDistance:k+v-z.labelMargin-te-z.labelDistance:(L[2][0]=z.x<d?z.x+z.labelDistance:z.x-z.labelDistance,L[1][0]=L[2][0]+re),L[1][1]=L[2][1]=z.y}}}}(C,p,y,t,o,a,c,h)}(c,v,y.width,y.height,y.x,y.y)})},"pie")),Kt(zd("pie")),Yr.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(e,t){return ug(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){return this.option.progressive??(this.option.large?5e3:this.get("progressive"))},getProgressiveThreshold:function(){return this.option.progressiveThreshold??(this.option.large?1e4:this.get("progressiveThreshold"))},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});var P0=ra({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(e,t){var o=t.points,a=t.size,c=this.symbolProxy,h=c.shape;if(!((e.getContext?e.getContext():e)&&a[0]<4))for(var p=0;p<o.length;){var y=o[p++],w=o[p++];isNaN(y)||isNaN(w)||this.softClipShape&&!this.softClipShape.contain(y,w)||(h.x=y-a[0]/2,h.y=w-a[1]/2,h.width=a[0],h.height=a[1],c.buildPath(e,h,!0))}},afterBrush:function(e){var t=this.shape,o=t.points,a=t.size;if(a[0]<4){this.setTransform(e);for(var c=0;c<o.length;){var h=o[c++],p=o[c++];isNaN(h)||isNaN(p)||this.softClipShape&&!this.softClipShape.contain(h,p)||e.fillRect(h-a[0]/2,p-a[1]/2,a[0],a[1])}this.restoreTransform(e)}},findDataIndex:function(e,t){for(var o=this.shape,a=o.points,c=o.size,h=Math.max(c[0],4),p=Math.max(c[1],4),y=a.length/2-1;0<=y;y--){var w=2*y,C=a[w]-h/2,n=a[1+w]-p/2;if(C<=e&&n<=t&&e<=C+h&&t<=n+p)return y}return-1}});function rw(){this.group=new pn}var fg=rw.prototype;function B0(e,t,o){bi.call(this,e,t,o),this.type="value",this.angle=0,this.name=""}function hh(e,t,o){this._model=e,this.dimensions=[],this._indicatorAxes=Se(e.getIndicatorModels(),function(a,c){var h="indicator_"+c,p=new B0(h,"log"===a.get("axisType")?new Bb:new Ld);return p.name=a.get("name"),(p.model=a).axis=p,this.dimensions.push(h),p},this),this.resize(e,o)}fg.isPersistent=function(){return!this._incremental},fg.updateData=function(e,t){this.group.removeAll();var o=new P0({rectHover:!0,cursor:"default"});o.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(o,e,!1,t),this.group.add(o),this._incremental=null},fg.updateLayout=function(e){if(!this._incremental){var t=e.getLayout("symbolPoints");this.group.eachChild(function(o){null!=o.startIndex&&(t=new Float32Array(t.buffer,4*o.startIndex*2,2*(o.endIndex-o.startIndex))),o.setShape("points",t)})}},fg.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),2e6<e.count()?(this._incremental||(this._incremental=new Kn({silent:!0})),this.group.add(this._incremental)):this._incremental=null},fg.incrementalUpdate=function(e,t,o){var a;this._incremental?(a=new P0,this._incremental.addDisplayable(a,!0)):((a=new P0({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end})).incremental=!0,this.group.add(a)),a.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(a,t,!!this._incremental,o)},fg._setCommon=function(e,t,o,a){var c=t.hostModel;a=a||{};var h=t.getVisual("symbolSize");e.setShape("size",h instanceof Array?h:[h,h]),e.softClipShape=a.clipShape||null,e.symbolProxy=Kc(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var p=e.shape.size[0]<4;e.useStyle(c.getModel("itemStyle").getItemStyle(p?["color","shadowBlur","shadowColor"]:["color"]));var y=t.getVisual("color");y&&e.setColor(y),o||(e.seriesIndex=c.seriesIndex,e.on("mousemove",function(w){e.dataIndex=null;var C=e.findDataIndex(w.offsetX,w.offsetY);0<=C&&(e.dataIndex=C+(e.startIndex||0))}))},fg.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},fg._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},Ts({type:"scatter",render:function(e,t,o){var a=e.getData();this._updateSymbolDraw(a,e).updateData(a,{clipShape:this._getClipShape(e)}),this._finished=!0},incrementalPrepareRender:function(e,t,o){var a=e.getData();this._updateSymbolDraw(a,e).incrementalPrepareUpdate(a),this._finished=!1},incrementalRender:function(e,t,o){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,o){var a=e.getData();if(this.group.dirty(),!this._finished||1e4<a.count()||!this._symbolDraw.isPersistent())return{update:!0};var c=Ms().reset(e);c.progress&&c.progress({start:0,end:a.count()},a),this._symbolDraw.updateLayout(a)},_getClipShape:function(e){var t=e.coordinateSystem,o=t&&t.getArea&&t.getArea();return e.get("clip",!0)?o:null},_updateSymbolDraw:function(e,t){var o=this._symbolDraw,a=t.pipelineContext.large;return o&&a===this._isLargeDraw||(o&&o.remove(),o=this._symbolDraw=a?new rw:new Ap,this._isLargeDraw=a,this.group.removeAll()),this.group.add(o.group),o},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),yi(Xl("scatter","circle")),Wn(Ms("scatter")),ve(B0,bi),hh.prototype.getIndicatorAxes=function(){return this._indicatorAxes},hh.prototype.dataToPoint=function(e,t){return this.coordToPoint(this._indicatorAxes[t].dataToCoord(e),t)},hh.prototype.coordToPoint=function(e,t){var o=this._indicatorAxes[t].angle;return[this.cx+e*Math.cos(o),this.cy-e*Math.sin(o)]},hh.prototype.pointToData=function(e){var t=e[0]-this.cx,o=e[1]-this.cy,a=Math.sqrt(t*t+o*o);t/=a,o/=a;for(var c,h=Math.atan2(-o,t),p=1/0,y=-1,w=0;w<this._indicatorAxes.length;w++){var C=this._indicatorAxes[w],n=Math.abs(h-C.angle);n<p&&(c=C,y=w,p=n)}return[y,+(c&&c.coordToData(a))]},hh.prototype.resize=function(e,t){var o=e.get("center"),a=t.getWidth(),c=t.getHeight(),h=Math.min(a,c)/2;this.cx=rn(o[0],a),this.cy=rn(o[1],c),this.startAngle=e.get("startAngle")*Math.PI/180;var p=e.get("radius");"string"!=typeof p&&"number"!=typeof p||(p=[0,p]),this.r0=rn(p[0],h),this.r=rn(p[1],h),ee(this._indicatorAxes,function(y,w){y.setExtent(this.r0,this.r);var C=this.startAngle+w*Math.PI*2/this._indicatorAxes.length;C=Math.atan2(Math.sin(C),Math.cos(C)),y.angle=C},this)},hh.prototype.update=function(e,t){var o=this._indicatorAxes,a=this._model;ee(o,function(p){p.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(p,y){if("radar"===p.get("coordinateSystem")&&e.getComponent("radar",p.get("radarIndex"))===a){var w=p.getData();ee(o,function(C){C.scale.unionExtentFromData(w,w.mapDimension(C.dim))})}},this);var c=a.get("splitNumber");function h(p){var y=Math.pow(10,Math.floor(Math.log(p)/Math.LN10)),w=p/y;return 2===w?w=5:w*=2,w*y}ee(o,function(p,y){var w=dO(p.scale,p.model).extent;of(p.scale,p.model);var C=p.model,n=p.scale,i=C.getMin(),s=C.getMax(),d=n.getInterval();if(null!=i&&null!=s)n.setExtent(+i,+s),n.setInterval((s-i)/c);else if(null!=i)for(;n.setExtent(+i,f=i+d*c),n.setInterval(d),d=h(d),f<w[1]&&isFinite(f)&&isFinite(w[1]););else if(null!=s)for(;n.setExtent(v=s-d*c,+s),n.setInterval(d),d=h(d),v>w[0]&&isFinite(v)&&isFinite(w[0]););else{var u=n.getTicks().length-1;c<u&&(d=h(d));var f,v=Ea((f=Math.ceil(w[1]/d)*d)-d*c);n.setExtent(v,f),n.setInterval(d)}})},hh.dimensions=[],hh.create=function(e,t){var o=[];return e.eachComponent("radar",function(a){var c=new hh(a,e,t);o.push(c),a.coordinateSystem=c}),e.eachSeriesByType("radar",function(a){"radar"===a.get("coordinateSystem")&&(a.coordinateSystem=o[a.get("radarIndex")||0])}),o},yl.register("radar",hh);var Jb=ch.valueAxis;function yc(e,t){return _e({show:t},e)}Gs({type:"radar",optionUpdated:function(){var e=this.get("boundaryGap"),t=this.get("splitNumber"),o=this.get("scale"),a=this.get("axisLine"),c=this.get("axisTick"),h=this.get("axisType"),p=this.get("axisLabel"),y=this.get("name"),w=this.get("name.show"),C=this.get("name.formatter"),n=this.get("nameGap"),i=this.get("triggerEvent"),s=Se(this.get("indicator")||[],function(d){null!=d.max&&0<d.max&&!d.min?d.min=0:null!=d.min&&d.min<0&&!d.max&&(d.max=0);var u=y;null!=d.color&&(u=_e({color:d.color},y)),d=le(K(d),{boundaryGap:e,splitNumber:t,scale:o,axisLine:a,axisTick:c,axisType:h,axisLabel:p,name:d.text,nameLocation:"end",nameGap:n,nameTextStyle:u,triggerEvent:i},!1),w||(d.name=""),"string"==typeof C?d.name=C.replace("{value}",d.name??""):"function"==typeof C&&(d.name=C(d.name,d));var v=pe(new Fo(d,null,this.ecModel),rf);return v.mainType="radar",v.componentIndex=this.componentIndex,v},this);this.getIndicatorModels=function(){return s}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:le({lineStyle:{color:"#bbb"}},Jb.axisLine),axisLabel:yc(Jb.axisLabel,!1),axisTick:yc(Jb.axisTick,!1),axisType:"interval",splitLine:yc(Jb.splitLine,!0),splitArea:yc(Jb.splitArea,!0),indicator:[]}});var Sl=["axisLine","axisTickLabel","axisName"];fr({type:"radar",render:function(e,t,o){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},_buildAxes:function(e){var t=e.coordinateSystem;ee(Se(t.getIndicatorAxes(),function(o){return new wl(o.model,{position:[t.cx,t.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(o){ee(Sl,o.add,o),this.group.add(o.getGroup())},this)},_buildSplitLineAndArea:function(e){var t=e.coordinateSystem,o=t.getIndicatorAxes();if(o.length){var a=e.get("shape"),c=e.getModel("splitLine"),h=e.getModel("splitArea"),p=c.getModel("lineStyle"),y=h.getModel("areaStyle"),w=c.get("show"),C=h.get("show"),n=p.get("color"),i=y.get("color");n=nt(n)?n:[n],i=nt(i)?i:[i];var s=[],d=[];if("circle"===a)for(var u=o[0].getTicksCoords(),f=t.cx,v=t.cy,_=0;_<u.length;_++)w&&s[z(s,n,_)].push(new Md({shape:{cx:f,cy:v,r:u[_].coord}})),C&&_<u.length-1&&d[z(d,i,_)].push(new op({shape:{cx:f,cy:v,r0:u[_].coord,r:u[_+1].coord}}));else{var k,T=Se(o,function(L,V){var J=L.getTicksCoords();return k=null==k?J.length-1:Math.min(J.length-1,k),Se(J,function(te){return t.coordToPoint(te.coord,V)})}),M=[];for(_=0;_<=k;_++){for(var I=[],O=0;O<o.length;O++)I.push(T[O][_]);I[0]&&I.push(I[0].slice()),w&&s[z(s,n,_)].push(new Zi({shape:{points:I}})),C&&M&&d[z(d,i,_-1)].push(new pl({shape:{points:I.concat(M)}})),M=I.slice().reverse()}}var R=p.getLineStyle(),N=y.getAreaStyle();ee(d,function(L,V){this.group.add(qc(L,{style:_e({stroke:"none",fill:i[V%i.length]},N),silent:!0}))},this),ee(s,function(L,V){this.group.add(qc(L,{style:_e({fill:"none",stroke:n[V%n.length]},R),silent:!0}))},this)}function z(L,V,J){var te=J%V.length;return L[te]=L[te]||[],te}}});var z0=Yr.extend({type:"series.radar",dependencies:["radar"],init:function(e){z0.superApply(this,"init",arguments),this.legendVisualProvider=new L0(rt(this.getData,this),rt(this.getRawData,this))},getInitialData:function(e,t){return R0(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(e,t,o,a){var c=this.getData(),h=this.coordinateSystem.getIndicatorAxes(),p=this.getData().getName(e),y="html"===a?"<br/>":"\n";return Hi(""===p?this.name:p)+y+Se(h,function(w,C){var n=c.get(c.mapDimension(w.dim),e);return Hi(w.name+" : "+n)}).join(y)},getTooltipPosition:function(e){if(null!=e)for(var t=this.getData(),o=this.coordinateSystem,a=t.getValues(Se(o.dimensions,function(y){return t.mapDimension(y)}),e,!0),c=0,h=a.length;c<h;c++)if(!isNaN(a[c])){var p=o.getIndicatorAxes();return o.coordToPoint(p[c].dataToCoord(a[c]),c)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function Yk(e){return!isNaN(e[0])&&!isNaN(e[1])}function bc(e){return[e.cx,e.cy]}Ts({type:"radar",render:function(e,t,o){var a=e.coordinateSystem,c=this.group,h=e.getData(),p=this._data;function y(n,i){var _,s=n.getItemVisual(i,"symbol")||"circle",d=n.getItemVisual(i,"color");if("none"!==s){var u=(nt(_=n.getItemVisual(i,"symbolSize"))||(_=[+_,+_]),_),f=Kc(s,-1,-1,2,2,d),v=n.getItemVisual(i,"symbolRotate")||0;return f.attr({style:{strokeNoScale:!0},z2:100,scale:[u[0]/2,u[1]/2],rotation:v*Math.PI/180||0}),f}}function w(n,i,s,d,u,f){s.removeAll();for(var v=0;v<i.length-1;v++){var _=y(d,u);_&&(n[_.__dimIdx=v]?(_.attr("position",n[v]),ti[f?"initProps":"updateProps"](_,{position:i[v]},e,u)):_.attr("position",i[v]),s.add(_))}}function C(n){return Se(n,function(i){return[a.cx,a.cy]})}h.diff(p).add(function(n){var i=h.getItemLayout(n);if(i){var s=new pl,d=new Zi,u={shape:{points:i}};s.shape.points=C(i),d.shape.points=C(i),Fs(s,u,e,n),Fs(d,u,e,n);var f=new pn,v=new pn;f.add(d),f.add(s),f.add(v),w(d.shape.points,i,v,h,n,!0),h.setItemGraphicEl(n,f)}}).update(function(n,i){var s=p.getItemGraphicEl(i),d=s.childAt(0),u=s.childAt(1),f=s.childAt(2),v={shape:{points:h.getItemLayout(n)}};v.shape.points&&(w(d.shape.points,v.shape.points,f,h,n,!1),Eo(d,v,e),Eo(u,v,e),h.setItemGraphicEl(n,s))}).remove(function(n){c.remove(p.getItemGraphicEl(n))}).execute(),h.eachItemGraphicEl(function(n,i){var s=h.getItemModel(i),d=n.childAt(0),u=n.childAt(1),f=n.childAt(2),v=h.getItemVisual(i,"color");c.add(n),d.useStyle(_e(s.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:v})),d.hoverStyle=s.getModel("emphasis.lineStyle").getLineStyle();var _=s.getModel("areaStyle"),k=s.getModel("emphasis.areaStyle"),T=_.isEmpty()&&_.parentModel.isEmpty(),M=k.isEmpty()&&k.parentModel.isEmpty();M=M&&T,u.ignore=T,u.useStyle(_e(_.getAreaStyle(),{fill:v,opacity:.7})),u.hoverStyle=k.getAreaStyle();var I=s.getModel("itemStyle").getItemStyle(["color"]),O=s.getModel("emphasis.itemStyle").getItemStyle(),R=s.getModel("label"),N=s.getModel("emphasis.label");f.eachChild(function(z){z.setStyle(I),z.hoverStyle=K(O);var L=h.get(h.dimensions[z.__dimIdx],i);null!=L&&!isNaN(L)||(L=""),ei(z.style,z.hoverStyle,R,N,{labelFetcher:h.hostModel,labelDataIndex:i,labelDimIndex:z.__dimIdx,defaultText:L,autoColor:v,isRectText:!0})}),n.highDownOnUpdate=function(z,L){u.attr("ignore","emphasis"===L?M:T)},qr(n)}),this._data=h},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),yi(As("radar")),yi(Xl("radar","circle")),Wn(function(e){e.eachSeriesByType("radar",function(t){var o=t.getData(),a=[],c=t.coordinateSystem;if(c){var h=c.getIndicatorAxes();ee(h,function(p,y){o.each(o.mapDimension(h[y].dim),function(w,C){a[C]=a[C]||[];var n=c.dataToPoint(w,y);a[C][y]=Yk(n)?n:bc(c)})}),o.each(function(p){var y=_t(a[p],function(w){return Yk(w)})||bc(c);a[p].push(y.slice()),o.setItemLayout(p,a[p])})}})}),Kt(zd("radar")),ks(function(e){var t=e.polar;if(t){nt(t)||(t=[t]);var o=[];ee(t,function(a,c){a.indicator?(a.type&&!a.shape&&(a.shape=a.type),e.radar=e.radar||[],nt(e.radar)||(e.radar=[e.radar]),e.radar.push(a)):o.push(a)}),e.polar=o}ee(e.series,function(a){a&&"radar"===a.type&&a.polarIndex&&(a.radarIndex=a.polarIndex)})});for(var or=[126,25],Ep=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],td=0;td<Ep.length;td++)for(var gh=0;gh<Ep[td].length;gh++)Ep[td][gh][0]/=10.5,Ep[td][gh][1]/=-14,Ep[td][gh][0]+=or[0],Ep[td][gh][1]+=or[1];var yf={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]},y2={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},iw=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],aw=Xi(),Xk={load:function(e,t,o){var a=aw(t).parsed;if(a)return a;var c,y,h=t.specialAreas||{},p=t.geoJSON;try{c=p?F_(p,o):[]}catch(y){throw new Error("Invalid geoJson format\n"+y.message)}return"china"===(y=e)&&c.push(new zn("\u5357\u6d77\u8bf8\u5c9b",Se(Ep,function(C){return{type:"polygon",exterior:C}}),or)),ee(c,function(y){var i,w=y.name;(function(n,i){if("china"===n){var s=yf[i.name];if(s){var d=i.center;d[0]+=s[0]/10.5,d[1]+=-s[1]/14}}})(e,y),function(n,i){if("world"===n){var s=y2[i.name];if(s){var d=i.center;d[0]=s[0],d[1]=s[1]}}}(e,y),i=y,"china"===e&&"\u53f0\u6e7e"===i.name&&i.geometries.push({type:"polygon",exterior:iw[0]});var C=h[w];C&&y.transformTo(C.left,C.top,C.width,C.height)}),aw(t).parsed={regions:c,boundingRect:function(y){for(var w,C=0;C<y.length;C++){var n=y[C].getBoundingRect();(w=w||n.clone()).union(n)}return w}(c)}}},F0=Xi();function Zk(e,t){var o,a,n,c=e.svgXML;try{Yn(null!=(a=(o=c&&(n=c,(new qm).parse(n,{ignoreViewBox:!0,ignoreRootClip:!0}))||{}).root))}catch(n){throw new Error("Invalid svg format\n"+n.message)}var h=o.width,p=o.height,y=o.viewBoxRect;if(t||(t=null==h||null==p?a.getBoundingRect():new Ro(0,0,0,0),null!=h&&(t.width=h),null!=p&&(t.height=p)),y){var w=p0(y,t.width,t.height),C=a;(a=new pn).add(C),C.scale=w.scale,C.position=w.position}return a.setClipPath(new sr({shape:t.plain()})),{root:a,boundingRect:t}}var sw={geoJSON:Xk,svg:{load:function(e,t){var o=F0(t).originRoot;if(o)return{root:o,boundingRect:F0(t).boundingRect};var a=Zk(t);return F0(t).originRoot=a.root,F0(t).boundingRect=a.boundingRect,a},makeGraphic:function(e,t,o){var a=F0(t),c=a.rootMap||(a.rootMap=ft()),h=c.get(o);if(h)return h;var p=a.originRoot;return h=a.originRootHostKey?Zk(t,a.boundingRect).root:(a.originRootHostKey=o,p),c.set(o,h)},removeGraphic:function(e,t,o){var a=F0(t),c=a.rootMap;c&&c.removeKey(o),o===a.originRootHostKey&&(a.originRootHostKey=null)}}},bf={load:function(e,t,o){var a,c=[],h=ft(),p=ft();return ee(Qb(e),function(y){var w=sw[y.type].load(e,y,o);ee(w.regions,function(n){var i=n.name;t&&t.hasOwnProperty(i)&&(n=n.cloneShallow(i=t[i])),c.push(n),h.set(i,n),p.set(i,n.center)});var C=w.boundingRect;C&&(a?a.union(C):a=C.clone())}),{regions:c,regionsMap:h,nameCoordMap:p,boundingRect:a||new Ro(0,0,0,0)}},makeGraphic:Kk("makeGraphic"),removeGraphic:Kk("removeGraphic")};function Kk(e){return function(t,o){var a=Qb(t),c=[];return ee(a,function(h){var p=sw[h.type][e];p&&c.push(p(t,h,o))}),c}}function Qb(e){return YC.retrieveMap(e)||[]}Me(Yr.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(e){for(var t=R0(this,{coordDimensions:["value"],encodeDefaulter:wt(yb,this)}),o=t.mapDimension("value"),a=ft(),c=[],h=[],p=0,y=t.count();p<y;p++){var w=t.getName(p);a.set(w,!0),c.push({name:w,value:t.get(o,p),selected:WA(t,p,"selected")})}return ee(bf.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(C){var n=C.name;a.get(n)||(c.push({name:n}),h.push(n))}),this.updateSelectedMap(c),t.appendValues([],h),t},getHostGeoModel:function(){var e=this.option.geoIndex;return null!=e?this.dependentModels.geo[e]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},getRegionModel:function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},formatTooltip:function(e,t,o,a){for(var c=this.getData(),h=Zh(this.getRawValue(e)),p=c.getName(e),y=this.seriesGroup,w=[],C=0;C<y.length;C++){var n=y[C].originalData.indexOfName(p),i=c.mapDimension("value");isNaN(y[C].originalData.get(i,n))||w.push(Hi(y[C].name))}var s="html"===a?"<br/>":"\n";return w.join(", ")+s+Hi(p+" : "+h)},getTooltipPosition:function(e){if(null!=e){var t=this.getData().getName(e),o=this.coordinateSystem,a=o.getRegion(t);return a&&o.dataToPoint(a.center)}},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}}),_u);var b2="\0_ec_interaction_mutex";function x2(e,t){return!!Jk(e)[t]}function Jk(e){return e[b2]||(e[b2]={})}function ex(e){this._zr=e,this._opt={};var t=rt,o=t(_O,this),a=t(tx,this),c=t(wO,this),h=t(Qk,this),p=t(_2,this);si.call(this),this.setPointerChecker=function(y){this.pointerChecker=y},this.enable=function(y,w){this.disable(),this._opt=_e(K(w)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==y&&(y=!0),!0!==y&&"move"!==y&&"pan"!==y||(e.on("mousedown",o),e.on("mousemove",a),e.on("mouseup",c)),!0!==y&&"scale"!==y&&"zoom"!==y||(e.on("mousewheel",h),e.on("pinch",p))},this.disable=function(){e.off("mousedown",o),e.off("mousemove",a),e.off("mouseup",c),e.off("mousewheel",h),e.off("pinch",p)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function _O(e){if(!(Zo(e)||e.target&&e.target.draggable)){var t=e.offsetX,o=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,o)&&(this._x=t,this._y=o,this._dragging=!0)}}function tx(e){if(this._dragging&&lw("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!x2(this._zr,"globalPan")){var t=e.offsetX,o=e.offsetY,a=this._x,c=this._y,h=t-a,p=o-c;this._x=t,this._y=o,this._opt.preventDefaultMouseMove&&Xn(e.event),eT(this,"pan","moveOnMouseMove",e,{dx:h,dy:p,oldX:a,oldY:c,newX:t,newY:o})}}function wO(e){Zo(e)||(this._dragging=!1)}function Qk(e){var t=lw("zoomOnMouseWheel",e,this._opt),o=lw("moveOnMouseWheel",e,this._opt),a=e.wheelDelta,c=Math.abs(a),h=e.offsetX,p=e.offsetY;if(0!==a&&(t||o)){if(t){var y=3<c?1.4:1<c?1.2:1.1;w2(this,"zoom","zoomOnMouseWheel",e,{scale:0<a?y:1/y,originX:h,originY:p})}if(o){var w=Math.abs(a);w2(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(0<a?1:-1)*(3<w?.4:1<w?.15:.05),originX:h,originY:p})}}}function _2(e){x2(this._zr,"globalPan")||w2(this,"zoom",null,e,{scale:1<e.pinchScale?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY})}function w2(e,t,o,a,c){e.pointerChecker&&e.pointerChecker(a,c.originX,c.originY)&&(Xn(a.event),eT(e,t,o,a,c))}function eT(e,t,o,a,c){c.isAvailableBehavior=rt(lw,null,o,a),e.trigger(t,c)}function lw(e,t,o){var a=o[e];return!e||a&&(!Wt(a)||t.event[a+"Key"])}function tT(e,t,o){var a=e.target,c=a.position;c[0]+=t,c[1]+=o,a.dirty()}function cw(e,t,o,a){var c=e.target,h=e.zoomLimit,p=c.position,y=c.scale,w=e.zoom=e.zoom||1;if(w*=t,h){var C=h.min||0;w=Math.max(Math.min(h.max||1/0,w),C)}var i=w/e.zoom;e.zoom=w,p[0]-=(o-p[0])*(i-1),p[1]-=(a-p[1])*(i-1),y[0]*=i,y[1]*=i,c.dirty()}Xo({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),Me(ex,si);var nd={axisPointer:1,tooltip:1,brush:1};function dw(e,t,o){var a=t.getComponentByElement(e.topTarget),c=a&&a.coordinateSystem;return a&&a!==o&&!nd[a.mainType]&&c&&c.model!==o}function nT(e){var t=e.getItemStyle(),o=e.get("areaColor");return null!=o&&(t.fill=o),t}function uw(e,t){t.eachChild(function(o){ee(o.__regions,function(a){o.trigger(e.isSelected(a.name)?"emphasis":"normal")})})}function nx(e,t){var o=new pn;this.uid=e0("ec_map_draw"),this._controller=new ex(e.getZr()),this._controllerHost={target:t?o:null},this.group=o,this._updateGroup=t,o.add(this._regionsGroup=new pn),o.add(this._backgroundGroup=new pn)}nx.prototype={constructor:nx,draw:function(e,t,o,a,c){var h="geo"===e.mainType,p=e.getData&&e.getData();h&&t.eachComponent({mainType:"series",subType:"map"},function(O){p||O.getHostGeoModel()!==e||(p=O.getData())});var y=e.coordinateSystem;this._updateBackground(y);var w,C=this._regionsGroup,n=this.group,i=y.getTransformInfo(),s=!C.childAt(0)||c;if(s)n.transform=i.roamTransform,n.decomposeTransform(),n.dirty();else{var d=new tc;d.transform=i.roamTransform,d.decomposeTransform(),w=d.scale,Eo(n,{scale:d.scale,position:d.position},e)}var f=i.rawScale,v=i.rawPosition;C.removeAll();var O,R,N,z,L,_=["itemStyle"],k=["emphasis","itemStyle"],T=["label"],M=["emphasis","label"],I=ft();ee(y.regions,function(O){var R=I.get(O.name)||I.set(O.name,new pn),N=new Ju({segmentIgnoreThreshold:1,shape:{paths:[]}});R.add(N);var z,L=(Ye=e.getRegionModel(O.name)||e).getModel(_),V=Ye.getModel(k),J=nT(L),te=nT(V),re=Ye.getModel(T),ie=Ye.getModel(M);if(p){z=p.indexOfName(O.name);var he=p.getItemVisual(z,"color",!0);he&&(J.fill=he)}function fe(it){return[it[0]*f[0]+v[0],it[1]*f[1]+v[1]]}ee(O.geometries,function(it){if("polygon"===it.type){for(var yt=[],It=0;It<it.exterior.length;++It)yt.push(fe(it.exterior[It]));for(N.shape.paths.push(new pl({segmentIgnoreThreshold:1,shape:{points:yt}})),It=0;It<(it.interiors?it.interiors.length:0);++It){for(var qt=it.interiors[It],Xt=(yt=[],0);Xt<qt.length;++Xt)yt.push(fe(qt[Xt]));N.shape.paths.push(new pl({segmentIgnoreThreshold:1,shape:{points:yt}}))}}}),N.setStyle(J),N.style.strokeNoScale=!0,N.culling=!0;var ye=re.get("show"),Ie=ie.get("show"),He=p&&isNaN(p.get(p.mapDimension("value"),z)),we=p&&p.getItemLayout(z);if(h||He&&(ye||Ie)||we&&we.showLabel){var De,Be=h?O.name:z;(!p||0<=z)&&(De=e);var et=new Yo({position:fe(O.center.slice()),scale:[1/n.scale[0],1/n.scale[1]],z2:10,silent:!0});ei(et.style,et.hoverStyle={},re,ie,{labelFetcher:De,labelDataIndex:Be,defaultText:O.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),!s&&Eo(et,{scale:[1/w[0],1/w[1]]},e),R.add(et)}if(p)p.setItemGraphicEl(z,R);else{var Ye=e.getRegionModel(O.name);N.eventData={componentType:"geo",componentIndex:e.componentIndex,geoIndex:e.componentIndex,name:O.name,region:Ye&&Ye.option||{}}}(R.__regions||(R.__regions=[])).push(O),R.highDownSilentOnTouch=!!e.get("selectedMode"),qr(R,te),C.add(R)}),this._updateController(e,t,o),O=this,R=e,z=o,L=a,(N=C).off("click"),N.off("mousedown"),R.get("selectedMode")&&(N.on("mousedown",function(){O._mouseDownFlag=!0}),N.on("click",function(V){if(O._mouseDownFlag){O._mouseDownFlag=!1;for(var J=V.target;!J.__regions;)J=J.parent;if(J){var te={type:("geo"===R.mainType?"geo":"map")+"ToggleSelect",batch:Se(J.__regions,function(re){return{name:re.name,from:L.uid}})};te[R.mainType+"Id"]=R.id,z.dispatchAction(te),uw(R,N)}}})),uw(e,C)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&bf.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(e){var t=e.map;this._mapName!==t&&ee(bf.makeGraphic(t,this.uid),function(o){this._backgroundGroup.add(o)},this),this._mapName=t},_updateController:function(e,t,o){var a=e.coordinateSystem,c=this._controller,h=this._controllerHost;h.zoomLimit=e.get("scaleLimit"),h.zoom=a.getZoom(),c.enable(e.get("roam")||!1);var p=e.mainType;function y(){var w={type:"geoRoam",componentType:p};return w[p+"Id"]=e.id,w}c.off("pan").on("pan",function(w){this._mouseDownFlag=!1,tT(h,w.dx,w.dy),o.dispatchAction(pe(y(),{dx:w.dx,dy:w.dy}))},this),c.off("zoom").on("zoom",function(w){if(this._mouseDownFlag=!1,cw(h,w.scale,w.originX,w.originY),o.dispatchAction(pe(y(),{zoom:w.scale,originX:w.originX,originY:w.originY})),this._updateGroup){var C=this.group.scale;this._regionsGroup.traverse(function(n){"text"===n.type&&n.attr("scale",[1/C[0],1/C[1]])})}},this),c.setPointerChecker(function(w,C,n){return a.getViewRectAfterRoam().contain(C,n)&&!dw(w,o,e)})}};var ox="__seriesMapHighDown",oT="__seriesMapCallKey";function rT(e){var t=this[ox];t&&t.recordVersion===this[oT]&&S2(t,e)}function S2(e,t){var o=e.circle,a=e.labelModel,c=e.hoverLabelModel,h=e.emphasisText,p=e.normalText;t?(o.style.extendFrom(Fi({},c,{text:c.get("show")?h:null},{isRectText:!0,useInsideStyle:!1},!0)),o.__mapOriginalZ2=o.z2,o.z2+=ab):(Fi(o.style,a,{text:a.get("show")?p:null,textPosition:a.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),o.dirty(!1),null!=o.__mapOriginalZ2&&(o.z2=o.__mapOriginalZ2,o.__mapOriginalZ2=null))}function Zl(e,t,o){var a=e.getZoom(),c=e.getCenter(),h=t.zoom,p=e.dataToPoint(c);if(null!=t.dx&&null!=t.dy&&(p[0]-=t.dx,p[1]-=t.dy,c=e.pointToData(p),e.setCenter(c)),null!=h){if(o){var y=o.min||0;h=Math.max(Math.min(a*h,o.max||1/0),y)/a}e.scale[0]*=h,e.scale[1]*=h;var C=e.position,i=(t.originY-C[1])*(h-1);C[0]-=(t.originX-C[0])*(h-1),C[1]-=i,e.updateTransform(),c=e.pointToData(p),e.setCenter(c),e.setZoom(h*a)}return{center:e.getCenter(),zoom:e.getZoom()}}Ts({type:"map",render:function(e,t,o,a){if(!a||"mapToggleSelect"!==a.type||a.from!==this.uid){var c=this.group;if(c.removeAll(),!e.getHostGeoModel()){if(a&&"geoRoam"===a.type&&"series"===a.componentType&&a.seriesId===e.id)(h=this._mapDraw)&&c.add(h.group);else if(e.needsDrawMap){var h=this._mapDraw||new nx(o,!0);c.add(h.group),h.draw(e,t,o,this,a),this._mapDraw=h}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,o)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(e,t,o){var a=e.originalData,c=this.group;a.each(a.mapDimension("value"),function(h,p){if(!isNaN(h)){var y=a.getItemLayout(p);if(y&&y.point){var w=y.point,C=y.offset,n=new Md({style:{fill:e.getData().getVisual("color")},shape:{cx:w[0]+9*C,cy:w[1],r:3},silent:!0,z2:8+(C?0:ab+1)});if(!C){var i=e.mainSeries.getData(),s=a.getName(p),d=i.indexOfName(s),u=a.getItemModel(p),f=u.getModel("label"),v=u.getModel("emphasis.label"),_=i.getItemGraphicEl(d),k=_n(e.getFormattedLabel(d,"normal"),s),T=_n(e.getFormattedLabel(d,"emphasis"),k),M=_[ox],I=Math.random();if(!M){M=_[ox]={};var O=wt(rT,!0),R=wt(rT,!1);_.on("mouseover",O).on("mouseout",R).on("emphasis",O).on("normal",R)}pe(M,{recordVersion:_[oT]=I,circle:n,labelModel:f,hoverLabelModel:v,emphasisText:T,normalText:k}),S2(M,!1)}c.add(n)}}})}}),Xo({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,t){var o=e.componentType||"series";t.eachComponent({mainType:o,query:e},function(a){var c=a.coordinateSystem;if("geo"===c.type){var h=Zl(c,e,a.get("scaleLimit"));a.setCenter&&a.setCenter(h.center),a.setZoom&&a.setZoom(h.zoom),"series"===o&&ee(a.seriesGroup,function(p){p.setCenter(h.center),p.setZoom(h.zoom)})}})});var C2=ir;function rx(){tc.call(this)}function xf(e){this.name=e,tc.call(this),this._roamTransformable=new rx,this._rawTransformable=new rx}function iT(e,t,o,a){var c=o.seriesModel,h=c?c.coordinateSystem:null;return h===this?h[e](a):null}function Cl(e,t,o,a){xf.call(this,e),this.map=t;var c=bf.load(t,o);this._nameCoordMap=c.nameCoordMap,this._regionsMap=c.regionsMap,this._invertLongitute=null==a||a,this.regions=c.regions,this._rect=c.boundingRect}function ix(e,t,o,a){var c=o.geoModel,h=o.seriesModel,p=c?c.coordinateSystem:h?h.coordinateSystem||(h.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return p===this?p[e](a):null}function ax(e,t){var o=e.get("boundingCoords");if(null!=o){var a=o[0],c=o[1];isNaN(a[0])||isNaN(a[1])||isNaN(c[0])||isNaN(c[1])||this.setBoundingRect(a[0],a[1],c[0]-a[0],c[1]-a[1])}var h,p=this.getBoundingRect(),y=e.get("layoutCenter"),w=e.get("layoutSize"),C=t.getWidth(),n=t.getHeight(),i=p.width/p.height*this.aspectScale,s=!1;if(y&&w&&(y=[rn(y[0],C),rn(y[1],n)],w=rn(w,Math.min(C,n)),isNaN(y[0])||isNaN(y[1])||isNaN(w)||(s=!0)),s){var d={};1<i?(d.width=w,d.height=w/i):(d.height=w,d.width=w*i),d.y=y[1]-d.height/2,d.x=y[0]-d.width/2}else(h=e.getBoxLayoutParams()).aspect=i,d=Xa(h,{width:C,height:n});this.setViewRect(d.x,d.y,d.width,d.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}function aT(e,t){ee(t.get("geoCoord"),function(o,a){e.addGeoCoord(a,o)})}Me(rx,tc),xf.prototype={constructor:xf,type:"view",dimensions:["x","y"],setBoundingRect:function(e,t,o,a){return this._rect=new Ro(e,t,o,a),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(e,t,o,a){this.transformTo(e,t,o,a),this._viewRect=new Ro(e,t,o,a)},transformTo:function(e,t,o,a){var c=this.getBoundingRect(),h=this._rawTransformable;h.transform=c.calculateTransform(new Ro(e,t,o,a)),h.decomposeTransform(),this._updateTransform()},setCenter:function(e){e&&(this._center=e,this._updateCenterAndZoom())},setZoom:function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},getDefaultCenter:function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,o=this.getDefaultCenter(),a=this.getCenter(),c=this.getZoom();a=ir([],a,e),o=ir([],o,e),t.origin=a,t.position=[o[0]-a[0],o[1]-a[1]],t.scale=[c,c],this._updateTransform()},_updateTransform:function(){var t=this._rawTransformable;(t.parent=this._roamTransformable).updateTransform(),t.updateTransform(),Nh(this.transform||(this.transform=[]),t.transform||Ii()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],Lh(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var e=this._roamTransformable.transform,t=this._rawTransformable;return{roamTransform:e?Qe(e):Ii(),rawScale:Qe(t.scale),rawPosition:Qe(t.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},dataToPoint:function(e,t,o){var a=t?this._rawTransform:this.transform;return o=o||[],a?C2(o,e,a):Sn(o,e)},pointToData:function(e){var t=this.invTransform;return t?C2([],e,t):[e[0],e[1]]},convertToPixel:wt(iT,"dataToPoint"),convertFromPixel:wt(iT,"pointToData"),containPoint:function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])}},Me(xf,tc),Cl.prototype={constructor:Cl,type:"geo",dimensions:["lng","lat"],containCoord:function(e){for(var t=this.regions,o=0;o<t.length;o++)if(t[o].contain(e))return!0;return!1},transformTo:function(e,t,o,a){var c=this.getBoundingRect(),h=this._invertLongitute;c=c.clone(),h&&(c.y=-c.y-c.height);var p=this._rawTransformable;if(p.transform=c.calculateTransform(new Ro(e,t,o,a)),p.decomposeTransform(),h){var y=p.scale;y[1]=-y[1]}p.updateTransform(),this._updateTransform()},getRegion:function(e){return this._regionsMap.get(e)},getRegionByCoord:function(e){for(var t=this.regions,o=0;o<t.length;o++)if(t[o].contain(e))return t[o]},addGeoCoord:function(e,t){this._nameCoordMap.set(e,t)},getGeoCoord:function(e){return this._nameCoordMap.get(e)},getBoundingRect:function(){return this._rect},dataToPoint:function(e,t,o){if("string"==typeof e&&(e=this.getGeoCoord(e)),e)return xf.prototype.dataToPoint.call(this,e,t,o)},convertToPixel:wt(ix,"dataToPoint"),convertFromPixel:wt(ix,"pointToData")},Me(Cl,xf);var SO={dimensions:Cl.prototype.dimensions,create:function(e,t){var o=[];e.eachComponent("geo",function(c,h){var p=c.get("map"),y=c.get("aspectScale"),w=!0,C=YC.retrieveMap(p);C&&C[0]&&"svg"===C[0].type?(null==y&&(y=1),w=!1):null==y&&(y=.75);var n=new Cl(p+h,p,c.get("nameMap"),w);n.aspectScale=y,n.zoomLimit=c.get("scaleLimit"),o.push(n),aT(n,c),(c.coordinateSystem=n).model=c,n.resize=ax,n.resize(c,t)}),e.eachSeries(function(c){if("geo"===c.get("coordinateSystem")){var h=c.get("geoIndex")||0;c.coordinateSystem=o[h]}});var a={};return e.eachSeriesByType("map",function(c){if(!c.getHostGeoModel()){var h=c.getMapType();a[h]=a[h]||[],a[h].push(c)}}),ee(a,function(c,h){var p=new Cl(h,h,de(Se(c,function(y){return y.get("nameMap")})));p.zoomLimit=Jt.apply(null,Se(c,function(y){return y.get("scaleLimit")})),o.push(p),p.resize=ax,p.aspectScale=c[0].get("aspectScale"),p.resize(c[0],t),ee(c,function(y){aT(y.coordinateSystem=p,y)})}),o},getFilledRegions:function(e,t,o){for(var a=(e||[]).slice(),c=ft(),h=0;h<a.length;h++)c.set(a[h].name,a[h]);return ee(bf.load(t,o).regions,function(p){var y=p.name;c.get(y)||a.push({name:y})}),a}};tk("geo",SO),Wn(function(e){var t={};e.eachSeriesByType("map",function(o){var a=o.getMapType();if(!o.getHostGeoModel()&&!t[a]){var c={};ee(o.seriesGroup,function(p){var y=p.coordinateSystem,w=p.originalData;p.get("showLegendSymbol")&&e.getComponent("legend")&&w.each(w.mapDimension("value"),function(C,n){var i=w.getName(n),s=y.getRegion(i);if(s&&!isNaN(C)){var d=c[i]||0,u=y.dataToPoint(s.center);c[i]=d+1,w.setItemLayout(n,{point:u,offset:d})}})});var h=o.getData();h.each(function(p){var y=h.getName(p),w=h.getItemLayout(p)||{};w.showLabel=!c[y],h.setItemLayout(p,w)}),t[a]=!0}})}),yi(function(e){e.eachSeriesByType("map",function(t){var o=t.get("color"),a=t.getModel("itemStyle"),c=a.get("areaColor"),h=a.get("color")||o[t.seriesIndex%o.length];t.getData().setVisual({areaColor:c,color:h})})}),Kt(Xc.PROCESSOR.STATISTIC,function(e){var t={};e.eachSeriesByType("map",function(o){var a=o.getHostGeoModel(),c=a?"o"+a.id:"i"+o.getMapType();(t[c]=t[c]||[]).push(o)}),ee(t,function(o,a){for(var c=function(p,y){var w={};return ee(p,function(C){C.each(C.mapDimension("value"),function(n,i){var s="ec-"+C.getName(i);w[s]=w[s]||[],isNaN(n)||w[s].push(n)})}),p[0].map(p[0].mapDimension("value"),function(C,n){for(var s="ec-"+p[0].getName(n),d=0,u=1/0,f=-1/0,v=w[s].length,_=0;_<v;_++)u=Math.min(u,w[s][_]),f=Math.max(f,w[s][_]),d+=w[s][_];return 0===v?NaN:"min"===y?u:"max"===y?f:"average"===y?d/v:d})}(Se(o,function(p){return p.getData()}),o[0].get("mapValueCalculation")),h=0;h<o.length;h++)o[h].originalData=o[h].getData();for(h=0;h<o.length;h++)(o[h].seriesGroup=o)[h].needsDrawMap=0===h&&!o[h].getHostGeoModel(),o[h].setData(c.cloneShallow()),o[h].mainSeries=o[0]})}),ks(function(e){var t=[];ee(e.series,function(o){o&&"map"===o.type&&(t.push(o),o.map=o.map||o.mapType,_e(o,o.mapLocation))})}),v2("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var sx=ee,lx="\0__link_datas",ds="\0__link_mainData";function od(e){var t=e.mainData,o=e.datas;o||(o={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,k2(t,o,e),sx(o,function(a){sx(t.TRANSFERABLE_METHODS,function(c){a.wrapMethod(c,wt(_f,e))})}),t.wrapMethod("cloneShallow",wt(lT,e)),sx(t.CHANGABLE_METHODS,function(a){t.wrapMethod(a,wt(sT,e))}),Yn(o[t.dataType]===t)}function _f(e,t){if(function(a){return a[ds]===a}(this)){var o=pe({},this[lx]);k2(o[this.dataType]=t,o,e)}else Np(t,this.dataType,this[ds],e);return t}function sT(e,t){return e.struct&&e.struct.update(this),t}function lT(e,t){return sx(t[lx],function(o,a){o!==t&&Np(o.cloneShallow(),a,t,e)}),t}function hw(e){var t=this[ds];return null==e||null==t?t:t[lx][e]}function k2(e,t,o){e[lx]={},sx(t,function(a,c){Np(a,c,e,o)})}function Np(e,t,o,a){(o[lx][t]=e)[ds]=o,e.dataType=t,a.struct&&(e[a.structAttr]=a.struct,a.struct[a.datasAttr[t]]=e),e.getLinkedData=hw}function wu(e,t){this.name=e||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=t}function Rp(e){this._nodes=[],this.hostModel=e}function wf(e,t){var o=e.isExpand?e.children:[],a=e.parentNode.children,c=e.hierNode.i?a[e.hierNode.i-1]:null;if(o.length){!function(p){for(var y=p.children,w=y.length,C=0,n=0;0<=--w;){var i=y[w];i.hierNode.prelim+=C,i.hierNode.modifier+=C,C+=i.hierNode.shift+(n+=i.hierNode.change)}}(e);var h=(o[0].hierNode.prelim+o[o.length-1].hierNode.prelim)/2;c?(e.hierNode.prelim=c.hierNode.prelim+t(e,c),e.hierNode.modifier=e.hierNode.prelim-h):e.hierNode.prelim=h}else c&&(e.hierNode.prelim=c.hierNode.prelim+t(e,c));e.parentNode.hierNode.defaultAncestor=function(p,y,w,C){if(y){for(var n=p,i=p,s=i.parentNode.children[0],d=y,u=n.hierNode.modifier,f=i.hierNode.modifier,v=s.hierNode.modifier,_=d.hierNode.modifier;d=qs(d),i=Fd(i),d&&i;){n=qs(n),s=Fd(s),n.hierNode.ancestor=p;var k=d.hierNode.prelim+_-i.hierNode.prelim-f+C(d,i);0<k&&(M2((T=d).hierNode.ancestor.parentNode===p.parentNode?T.hierNode.ancestor:w,p,k),f+=k,u+=k),_+=d.hierNode.modifier,f+=i.hierNode.modifier,u+=n.hierNode.modifier,v+=s.hierNode.modifier}d&&!qs(n)&&(n.hierNode.thread=d,n.hierNode.modifier+=_-u),i&&!Fd(s)&&(s.hierNode.thread=i,s.hierNode.modifier+=f-v,w=p)}var T;return w}(e,c,e.parentNode.hierNode.defaultAncestor||a[0],t)}function kO(e){e.setLayout({x:e.hierNode.prelim+e.parentNode.hierNode.modifier},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function T2(e){return arguments.length?e:rd}function xc(e,t){var o={};return e-=Math.PI/2,o.x=t*Math.cos(e),o.y=t*Math.sin(e),o}function qs(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function Fd(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function M2(e,t,o){var a=o/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=a,t.hierNode.shift+=o,t.hierNode.modifier+=o,t.hierNode.prelim+=o,e.hierNode.change+=a}function rd(e,t){return e.parentNode===t.parentNode?1:2}wu.prototype={constructor:wu,isRemoved:function(){return this.dataIndex<0},eachNode:function(e,t,o){"function"==typeof e&&(o=t,t=e,e=null),Wt(e=e||{})&&(e={order:e});var a,c=e.order||"preorder",h=this[e.attr||"children"];"preorder"===c&&(a=t.call(o,this));for(var p=0;!a&&p<h.length;p++)h[p].eachNode(e,t,o);"postorder"===c&&t.call(o,this)},updateDepthAndHeight:function(e){var t=0;this.depth=e;for(var o=0;o<this.children.length;o++){var a=this.children[o];a.updateDepthAndHeight(e+1),a.height>t&&(t=a.height)}this.height=t+1},getNodeById:function(e){if(this.getId()===e)return this;for(var t=0,o=this.children,a=o.length;t<a;t++){var c=o[t].getNodeById(e);if(c)return c}},contains:function(e){if(e===this)return!0;for(var t=0,o=this.children,a=o.length;t<a;t++){var c=o[t].contains(e);if(c)return c}},getAncestors:function(e){for(var t=[],o=e?this:this.parentNode;o;)t.push(o),o=o.parentNode;return t.reverse(),t},getValue:function(e){var t=this.hostTree.data;return t.get(t.getDimension(e||"value"),this.dataIndex)},setLayout:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},setVisual:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},getVisual:function(e,t){return this.hostTree.data.getItemVisual(this.dataIndex,e,t)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},isDescendantOf:function(e){return e!==this&&e.isAncestorOf(this)}},Rp.prototype={constructor:Rp,type:"tree",eachNode:function(e,t,o){this.root.eachNode(e,t,o)},getNodeByDataIndex:function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},getNodeByName:function(e){return this.root.getNodeByName(e)},update:function(){for(var e=this.data,t=this._nodes,o=0,a=t.length;o<a;o++)t[o].dataIndex=-1;for(o=0,a=e.count();o<a;o++)t[e.getRawIndex(o)].dataIndex=o},clearLayouts:function(){this.data.clearItemLayouts()}},Rp.createTree=function(e,t,o){var a=new Rp(t),c=[],h=1;(function w(C,n){var i=C.value;h=Math.max(h,nt(i)?i.length:1),c.push(C);var s=new wu(C.name,a);n?function CO(e,t){e.parentNode!==t&&(t.children.push(e),e.parentNode=t)}(s,n):a.root=s,a._nodes.push(s);var d=C.children;if(d)for(var u=0;u<d.length;u++)w(d[u],s)})(e),a.root.updateDepthAndHeight(0);var p=S0(c,{coordDimensions:["value"],dimensionsCount:h}),y=new Ja(p,t);return y.initData(c),o&&o(y),od({mainData:y,struct:a,structAttr:"tree"}),a.update(),a},Yr.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(e){var t={name:e.name,children:e.data},o=new Fo(e.leaves||{},this,this.ecModel),a=Rp.createTree(t,this,function(p){p.wrapMethod("getItemModel",function(y,w){var C=a.getNodeByDataIndex(w);return C.children.length&&C.isExpand||(y.parentModel=o),y})}),c=0;a.eachNode("preorder",function(p){p.depth>c&&(c=p.depth)});var h=e.expandAndCollapse&&0<=e.initialTreeDepth?e.initialTreeDepth:c;return a.root.eachNode("preorder",function(p){var y=p.hostTree.data.getRawDataItem(p.dataIndex);p.isExpand=y&&null!=y.collapsed?!y.collapsed:p.depth<=h}),a.data},getOrient:function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},formatTooltip:function(e){for(var t=this.getData().tree,o=t.root.children[0],a=t.getNodeByDataIndex(e),c=a.getValue(),h=a.name;a&&a!==o;)h=a.parentNode.name+"."+h,a=a.parentNode;return Hi(h+(isNaN(c)||null==c?"":" : "+c))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});var pr=ra({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(e,t){var o=t.childPoints,a=o.length,c=t.parentPoint,h=o[0],p=o[a-1];if(1===a)return e.moveTo(c[0],c[1]),void e.lineTo(h[0],h[1]);var y=t.orient,w="TB"===y||"BT"===y?0:1,C=1-w,n=rn(t.forkPosition,1),i=[];i[w]=c[w],i[C]=c[C]+(p[C]-c[C])*n,e.moveTo(c[0],c[1]),e.lineTo(i[0],i[1]),e.moveTo(h[0],h[1]),i[w]=h[w],e.lineTo(i[0],i[1]),i[w]=p[w],e.lineTo(i[0],i[1]),e.lineTo(p[0],p[1]);for(var s=1;s<a-1;s++){var d=o[s];e.moveTo(d[0],d[1]),i[w]=d[w],e.lineTo(i[0],i[1])}}});function gw(e,t){var o=e.getItemLayout(t);return o&&!isNaN(o.x)&&!isNaN(o.y)&&"none"!==e.getItemVisual(t,"symbol")}function Lp(e,t,o){return o.itemModel=t,o.itemStyle=t.getModel("itemStyle").getItemStyle(),o.hoverItemStyle=t.getModel("emphasis.itemStyle").getItemStyle(),o.lineStyle=t.getModel("lineStyle").getLineStyle(),o.labelModel=t.getModel("label"),o.hoverLabelModel=t.getModel("emphasis.label"),o.symbolInnerColor=!1===e.isExpand&&0!==e.children.length?o.itemStyle.fill:"#fff",o}function V0(e,t,o,a,c,h){var p=!o,y=e.tree.getNodeByDataIndex(t),w=y.getModel(),C=(h=Lp(y,w,h),e.tree.root),n=y.parentNode===C?y:y.parentNode||y,i=e.getItemGraphicEl(n.dataIndex),s=n.getLayout(),d=i?{x:i.position[0],y:i.position[1],rawX:i.__radialOldRawX,rawY:i.__radialOldRawY}:s,u=y.getLayout();p?(o=new gg(e,t,h)).attr("position",[d.x,d.y]):o.updateData(e,t,h),o.__radialOldRawX=o.__radialRawX,o.__radialOldRawY=o.__radialRawY,o.__radialRawX=u.rawX,o.__radialRawY=u.rawY,a.add(o),e.setItemGraphicEl(t,o),Eo(o,{position:[u.x,u.y]},c);var f=o.getSymbolPath();if("radial"===h.layout){var v,_,k=C.children[0],T=k.getLayout(),M=k.children.length;if(u.x===T.x&&!0===y.isExpand){var I={};I.x=(k.children[0].getLayout().x+k.children[M-1].getLayout().x)/2,I.y=(k.children[0].getLayout().y+k.children[M-1].getLayout().y)/2,(v=Math.atan2(I.y-T.y,I.x-T.x))<0&&(v=2*Math.PI+v),(_=I.x<T.x)&&(v-=Math.PI)}else(v=Math.atan2(u.y-T.y,u.x-T.x))<0&&(v=2*Math.PI+v),0===y.children.length||0!==y.children.length&&!1===y.isExpand?(_=u.x<T.x)&&(v-=Math.PI):(_=u.x>T.x)||(v-=Math.PI);var O=_?"left":"right",R=h.labelModel.get("rotate"),N=R*(Math.PI/180);f.setStyle({textPosition:h.labelModel.get("position")||O,textRotation:null==R?-v:N,textOrigin:"center",verticalAlign:"middle"})}!function(z,L,V,J,te,re,ie,he,fe){var ye=fe.edgeShape,Ie=J.__edge;if("curve"===ye)L.parentNode&&L.parentNode!==V&&Eo(Ie=Ie||(J.__edge=new q1({shape:Sf(fe,te,te),style:_e({opacity:0,strokeNoScale:!0},fe.lineStyle)})),{shape:Sf(fe,re,ie),style:_e({opacity:1},fe.lineStyle)},z);else if("polyline"===ye&&"orthogonal"===fe.layout&&L!==V&&L.children&&0!==L.children.length&&!0===L.isExpand){for(var He=L.children,we=[],De=0;De<He.length;De++){var Be=He[De].getLayout();we.push([Be.x,Be.y])}Eo(Ie=Ie||(J.__edge=new pr({shape:{parentPoint:[ie.x,ie.y],childPoints:[[ie.x,ie.y]],orient:fe.orient,forkPosition:fe.edgeForkPosition},style:_e({opacity:0,strokeNoScale:!0},fe.lineStyle)})),{shape:{parentPoint:[ie.x,ie.y],childPoints:we},style:_e({opacity:1},fe.lineStyle)},z)}he.add(Ie)}(c,y,C,o,d,s,u,a,h)}function A2(e,t,o,a,c,h){for(var p,i,y=e.tree.getNodeByDataIndex(t),w=e.tree.root,C=y.getModel(),n=(h=Lp(y,C,h),y.parentNode===w?y:y.parentNode||y);null==(p=n.getLayout());)n=n.parentNode===w?n:n.parentNode||n;Eo(o,{position:[p.x+1,p.y+1]},c,function(){a.remove(o),e.setItemGraphicEl(t,null)}),o.fadeOut(null,{keepLabel:!0});var s=e.getItemGraphicEl(n.dataIndex).__edge,d=o.__edge||(!1===n.isExpand||1===n.children.length?s:void 0);i=h.edgeShape,d&&("curve"===i?Eo(d,{shape:Sf(h,p,p),style:{opacity:0}},c,function(){a.remove(d)}):"polyline"===i&&"orthogonal"===h.layout&&Eo(d,{shape:{parentPoint:[p.x,p.y],childPoints:[[p.x,p.y]]},style:{opacity:0}},c,function(){a.remove(d)}))}function Sf(e,t,o){var a,c,h,p,y,w,C,n,i=e.orient;if("radial"!==e.layout)return y=t.x,C=t.y,w=o.x,n=o.y,"LR"!==i&&"RL"!==i||(a=y+(w-y)*e.curvature,c=C,h=w+(y-w)*e.curvature,p=n),"TB"!==i&&"BT"!==i||(a=y,c=C+(n-C)*e.curvature,h=w,p=n+(C-n)*e.curvature),{x1:y,y1:C,x2:w,y2:n,cpx1:a,cpy1:c,cpx2:h,cpy2:p};w=o.rawX,n=o.rawY;var s=xc(y=t.rawX,C=t.rawY),d=xc(y,C+(n-C)*e.curvature),u=xc(w,n+(C-n)*e.curvature),f=xc(w,n);return{x1:s.x,y1:s.y,x2:f.x,y2:f.y,cpx1:d.x,cpy1:d.y,cpx2:u.x,cpy2:u.y}}function Cf(e,t){for(var o,a=[e];o=a.pop();)if(t(o),o.isExpand){var c=o.children;if(c.length)for(var h=c.length-1;0<=h;h--)a.push(c[h])}}function H0(e,t,o){if(e&&0<=Ue(t,e.type)){var a=o.getData().tree.root,c=e.targetNode;if("string"==typeof c&&(c=a.getNodeById(c)),c&&a.contains(c))return{node:c};var h=e.targetNodeId;if(null!=h&&(c=a.getNodeById(h)))return{node:c}}}function pw(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function mw(e,t){return 0<=Ue(pw(e),t)}function fw(e,t){for(var o=[];e;){var a=e.dataIndex;o.push({name:e.name,dataIndex:a,value:t.getRawValue(a)}),e=e.parentNode}return o.reverse(),o}Ts({type:"tree",init:function(e,t){this._mainGroup=new pn,this._controller=new ex(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(e,t,o,a){var c=e.getData(),h=e.layoutInfo,p=this._mainGroup,y=e.get("layout");p.attr("position","radial"===y?[h.x+h.width/2,h.y+h.height/2]:[h.x,h.y]),this._updateViewCoordSys(e,h,y),this._updateController(e,t,o);var w=this._data,C={expandAndCollapse:e.get("expandAndCollapse"),layout:y,edgeShape:e.get("edgeShape"),edgeForkPosition:e.get("edgeForkPosition"),orient:e.getOrient(),curvature:e.get("lineStyle.curveness"),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};c.diff(w).add(function(n){gw(c,n)&&V0(c,n,null,p,e,C)}).update(function(n,i){var s=w.getItemGraphicEl(i);gw(c,n)?V0(c,n,s,p,e,C):s&&A2(w,i,s,p,e,C)}).remove(function(n){var i=w.getItemGraphicEl(n);i&&A2(w,n,i,p,e,C)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===C.expandAndCollapse&&c.eachItemGraphicEl(function(n,i){n.off("click").on("click",function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:i})})}),this._data=c},_updateViewCoordSys:function(e){var t=e.getData(),o=[];t.each(function(w){var C=t.getItemLayout(w);!C||isNaN(C.x)||isNaN(C.y)||o.push([+C.x,+C.y])});var a=[],c=[];eb(o,a,c);var h=this._min,p=this._max;c[0]-a[0]==0&&(a[0]=h?h[0]:a[0]-1,c[0]=p?p[0]:c[0]+1),c[1]-a[1]==0&&(a[1]=h?h[1]:a[1]-1,c[1]=p?p[1]:c[1]+1);var y=e.coordinateSystem=new xf;y.zoomLimit=e.get("scaleLimit"),y.setBoundingRect(a[0],a[1],c[0]-a[0],c[1]-a[1]),y.setCenter(e.get("center")),y.setZoom(e.get("zoom")),this.group.attr({position:y.position,scale:y.scale}),this._viewCoordSys=y,this._min=a,this._max=c},_updateController:function(e,t,o){var a=this._controller,c=this._controllerHost,h=this.group;a.setPointerChecker(function(p,y,w){var C=h.getBoundingRect();return C.applyTransform(h.transform),C.contain(y,w)&&!dw(p,o,e)}),a.enable(e.get("roam")),c.zoomLimit=e.get("scaleLimit"),c.zoom=e.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(p){tT(c,p.dx,p.dy),o.dispatchAction({seriesId:e.id,type:"treeRoam",dx:p.dx,dy:p.dy})},this).on("zoom",function(p){cw(c,p.scale,p.originX,p.originY),o.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:p.scale,originX:p.originX,originY:p.originY}),this._updateNodeAndLinkScale(e)},this)},_updateNodeAndLinkScale:function(e){var t=e.getData(),o=this._getNodeGlobalScale(e),a=[o,o];t.eachItemGraphicEl(function(c,h){c.attr("scale",a)})},_getNodeGlobalScale:function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var o=this._nodeScaleRatio,a=t.scale,c=a&&a[0]||1;return((t.getZoom()-1)*o+1)/c},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),Xo({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(o){var a=e.dataIndex,c=o.getData().tree.getNodeByDataIndex(a);c.isExpand=!c.isExpand})}),Xo({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(o){var a=Zl(o.coordinateSystem,e);o.setCenter&&o.setCenter(a.center),o.setZoom&&o.setZoom(a.zoom)})}),yi(Xl("tree","circle")),Wn(function(e,t){e.eachSeriesByType("tree",function(o){!function(a,c){var R,h=(R=c,Xa(a.getBoxLayoutParams(),{width:R.getWidth(),height:R.getHeight()}));a.layoutInfo=h;var p=a.get("layout"),y=0,w=0,C=null;C="radial"===p?(y=2*Math.PI,w=Math.min(h.height,h.width)/2,T2(function(O,R){return(O.parentNode===R.parentNode?1:2)/O.depth})):(y=h.width,w=h.height,T2());var n=a.getData().tree.root,i=n.children[0];if(i){(function(O){O.hierNode={defaultAncestor:null,ancestor:O,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var R,N,z=[O];R=z.pop();)if(N=R.children,R.isExpand&&N.length)for(var L=N.length-1;0<=L;L--){var V=N[L];V.hierNode={defaultAncestor:null,ancestor:V,prelim:0,modifier:0,change:0,shift:0,i:L,thread:null},z.push(V)}})(n),function(O,R,N){for(var z,L=[O],V=[];z=L.pop();)if(V.push(z),z.isExpand){var J=z.children;if(J.length)for(var te=0;te<J.length;te++)L.push(J[te])}for(;z=V.pop();)R(z,N)}(i,wf,C),n.hierNode.modifier=-i.hierNode.prelim,Cf(i,kO);var s=i,d=i,u=i;Cf(i,function(O){var R=O.getLayout().x;R<s.getLayout().x&&(s=O),R>d.getLayout().x&&(d=O),O.depth>u.depth&&(u=O)});var f=s===d?1:C(s,d)/2,v=f-s.getLayout().x,_=0,k=0,T=0,M=0;if("radial"===p)_=y/(d.getLayout().x+f+v),k=w/(u.depth-1||1),Cf(i,function(O){var R=xc(T=(O.getLayout().x+v)*_,M=(O.depth-1)*k);O.setLayout({x:R.x,y:R.y,rawX:T,rawY:M},!0)});else{var I=a.getOrient();"RL"===I||"LR"===I?(k=w/(d.getLayout().x+f+v),_=y/(u.depth-1||1),Cf(i,function(O){M=(O.getLayout().x+v)*k,O.setLayout({x:T="LR"===I?(O.depth-1)*_:y-(O.depth-1)*_,y:M},!0)})):"TB"!==I&&"BT"!==I||(_=y/(d.getLayout().x+f+v),k=w/(u.depth-1||1),Cf(i,function(O){T=(O.getLayout().x+v)*_,O.setLayout({x:T,y:M="TB"===I?(O.depth-1)*k:w-(O.depth-1)*k},!0)}))}}}(o,t)})}),Yr.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(e,t){var o={name:e.name,children:e.data};!function y(w){var C=0;ee(w.children,function(i){y(i);var s=i.value;nt(s)&&(s=s[0]),C+=s});var n=w.value;nt(n)&&(n=n[0]),null!=n&&!isNaN(n)||(n=C),n<0&&(n=0),nt(w.value)?w.value[0]=n:w.value=n}(o);var a=e.levels||[],c=new Fo({itemStyle:this.designatedVisualItemStyle={}},this,t),h=Se((a=e.levels=function(y,w){var C,n=w.get("color");if(n)return ee(y=y||[],function(i){var s=new Fo(i),d=s.get("color");(s.get("itemStyle.color")||d&&"none"!==d)&&(C=!0)}),!C&&((y[0]||(y[0]={})).color=n.slice()),y}(a,t))||[],function(y){return new Fo(y,c,t)},this),p=Rp.createTree(o,this,function(y){y.wrapMethod("getItemModel",function(w,C){var n=p.getNodeByDataIndex(C);return w.parentModel=h[n.depth]||c,w})});return p.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(e){var t=this.getData(),o=this.getRawValue(e),a=nt(o)?Zh(o[0]):Zh(o);return Hi(t.getName(e)+": "+a)},getDataParams:function(e){var t=Yr.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=fw(o,this),t},setLayoutInfo:function(e){this.layoutInfo=this.layoutInfo||{},pe(this.layoutInfo,e)},mapIdToIndex:function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=ft(),this._idIndexMapCount=0);var o=t.get(e);return null==o&&t.set(e,o=this._idIndexMapCount++),o},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});var W0=5;function Vd(e){this.group=new pn,e.add(this.group)}function TO(e,t,o,a,c,h){var p=[[c?e:e-W0,t],[e+o,t],[e+o,t+a],[c?e:e-W0,t+a]];return h||p.splice(2,0,[e+o+W0,t+a/2]),c||p.push([e,t+a/2]),p}function U0(e){var t=kf(e);return t.stroke=t.fill=t.lineWidth=null,t}Vd.prototype={constructor:Vd,render:function(e,t,o,a){var c=e.getModel("breadcrumb"),h=this.group;if(h.removeAll(),c.get("show")&&o){var p=c.getModel("itemStyle"),y=p.getModel("textStyle"),w={pos:{left:c.get("left"),right:c.get("right"),top:c.get("top"),bottom:c.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:c.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(o,w,y),this._renderContent(e,w,p,y,a),Jh(h,w.pos,w.box)}},_prepare:function(e,t,o){for(var a=e;a;a=a.parentNode){var c=a.getModel().get("name"),h=o.getTextRect(c),p=Math.max(h.width+16,t.emptyItemWidth);t.totalWidth+=p+8,t.renderList.push({node:a,text:c,width:p})}},_renderContent:function(e,t,o,a,c){for(var h,p,y=0,w=t.emptyItemWidth,C=e.get("breadcrumb.height"),n=(I=void 0,void 0,void 0,N=void 0,z=void 0,L=void 0,V=void 0,R=(M=t.box).height,N=rn((T=t.pos).x,O=M.width),z=rn(T.y,R),L=rn(T.x2,O),V=rn(T.y2,R),(isNaN(N)||isNaN(parseFloat(T.x)))&&(N=0),(isNaN(L)||isNaN(parseFloat(T.x2)))&&(L=O),(isNaN(z)||isNaN(parseFloat(T.y)))&&(z=0),(isNaN(V)||isNaN(parseFloat(T.y2)))&&(V=R),I=Em(I||0),{width:Math.max(L-N-I[1]-I[3],0),height:Math.max(V-z-I[0]-I[2],0)}),i=t.totalWidth,s=t.renderList,d=s.length-1;0<=d;d--){var u=s[d],f=u.node,v=u.width,_=u.text;i>n.width&&(i-=v-w,v=w,_=null);var k=new pl({shape:{points:TO(y,0,v,C,d===s.length-1,0===d)},style:_e(o.getItemStyle(),{lineJoin:"bevel",text:_,textFill:a.getTextColor(),textFont:a.getFont()}),z:10,onclick:wt(c,f)});this.group.add(k),k.eventData={componentType:"series",componentSubType:"treemap",componentIndex:(h=e).componentIndex,seriesIndex:h.componentIndex,seriesName:h.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:(p=f)&&p.dataIndex,name:p&&p.name},treePathInfo:p&&fw(p,h)},y+=v+8}var T,M,I,O,R,N,z,L,V},remove:function(){this.group.removeAll()}};var hi=rt,cT=pn,dT=sr,$s=ee,MO=["label"],I2=["emphasis","label"],vw=["upperLabel"],oN=["emphasis","upperLabel"],AO=10,kf=ym([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);function IO(e,t,o,a,c,h,p,y,w,C){if(p){var n=p.getLayout(),i=e.getData();if(i.setItemGraphicEl(p.dataIndex,null),n&&n.isInView){var s=n.width,d=n.height,u=n.borderWidth,f=n.invisible,v=p.getRawIndex(),_=y&&y.getRawIndex(),k=p.viewChildren,T=n.upperHeight,M=k&&k.length,I=p.getModel("itemStyle"),O=p.getModel("emphasis.itemStyle"),R=re("nodeGroup",cT);if(R){if(w.add(R),R.attr("position",[n.x||0,n.y||0]),R.__tmNodeWidth=s,R.__tmNodeHeight=d,n.isAboveViewRoot)return R;var N=p.getModel(),z=re("background",dT,C,1);if(z&&function(ie,he,fe){if(he.dataIndex=p.dataIndex,he.seriesIndex=e.seriesIndex,he.setShape({x:0,y:0,width:s,height:d}),f)V(he);else{he.invisible=!1;var ye=p.getVisual("borderColor",!0),Ie=O.get("borderColor"),He=U0(I);He.fill=ye;var we=kf(O);if(we.fill=Ie,fe){var De=s-2*u;J(He,we,ye,De,T,{x:u,y:0,width:De,height:T})}else He.text=we.text=null;he.setStyle(He),Gh(he,we)}ie.add(he)}(R,z,M&&n.upperLabelHeight),M)Qv(R)&&ut(R,!1),z&&(ut(z,!0),i.setItemGraphicEl(p.dataIndex,z));else{var L=re("content",dT,C,2);L&&function(ie,he){he.dataIndex=p.dataIndex,he.seriesIndex=e.seriesIndex;var fe=Math.max(s-2*u,0),ye=Math.max(d-2*u,0);if(he.culling=!0,he.setShape({x:u,y:u,width:fe,height:ye}),f)V(he);else{he.invisible=!1;var Ie=p.getVisual("color",!0),He=U0(I);He.fill=Ie;var we=kf(O);J(He,we,Ie,fe,ye),he.setStyle(He),Gh(he,we)}ie.add(he)}(R,L),z&&Qv(z)&&ut(z,!1),ut(R,!0),i.setItemGraphicEl(p.dataIndex,R)}return R}}}function V(ie){ie.invisible||h.push(ie)}function J(ie,he,fe,ye,Ie,He){var we=N.get("name"),De=N.getModel(He?vw:MO),Be=N.getModel(He?oN:I2),et=De.getShallow("show");ei(ie,he,De,Be,{defaultText:et?we:null,autoColor:fe,isRectText:!0,labelFetcher:e,labelDataIndex:p.dataIndex,labelProp:He?"upperLabel":"label"}),te(ie,He,n),te(he,He,n),He&&(ie.textRect=K(He)),ie.truncate=et&&De.get("ellipsis")?{outerWidth:ye,outerHeight:Ie,minChar:2}:null}function te(ie,he,fe){var ye=ie.text;if(!he&&fe.isLeafRoot&&null!=ye){var Ie=e.get("drillDownIcon",!0);ie.text=Ie?Ie+" "+ye:ye}}function re(ie,he,fe,ye){var De,Be,Ie=null!=_&&o[ie][_],He=c[ie];return Ie?(o[ie][_]=null,De=Ie,Be=ie,(He[v]={}).old="nodeGroup"===Be?De.position.slice():pe({},De.shape)):f||((Ie=new he({z:function(we,De){var Be=we*AO+De;return(Be-1)/Be}(fe,ye)})).__tmDepth=fe,function(we,De,Be){var et=we[v]={},Ye=p.parentNode;if(Ye&&(!a||"drillDown"===a.direction)){var it=0,yt=0,It=c.background[Ye.getRawIndex()];!a&&It&&It.old&&(it=It.old.width,yt=It.old.height),et.old="nodeGroup"===Be?[0,yt]:{x:it,y:yt,width:0,height:0}}et.fadein="nodeGroup"!==Be}(He,0,Ie.__tmStorageName=ie)),t[ie][v]=Ie}}Ts({type:"treemap",init:function(e,t){this._storage={nodeGroup:[],background:[],content:[]},this._state="ready"},render:function(e,t,o,a){if(!(Ue(t.findComponents({mainType:"series",subType:"treemap",query:a}),e)<0)){this.seriesModel=e,this.api=o,this.ecModel=t;var c=H0(a,["treemapZoomToNode","treemapRootToNode"],e),h=a&&a.type,p=e.layoutInfo,y=!this._oldTree,w=this._storage,C="treemapRootToNode"===h&&c&&w?{rootNodeGroup:w.nodeGroup[c.node.getRawIndex()],direction:a.direction}:null,n=this._giveContainerGroup(p),i=this._doRender(n,e,C);y||h&&"treemapZoomToNode"!==h&&"treemapRootToNode"!==h?i.renderFinally():this._doAnimation(n,i,e,C),this._resetController(o),this._renderBreadcrumb(e,o,c)}},_giveContainerGroup:function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new cT,this._initEvents(t),this.group.add(t)),t.attr("position",[e.x,e.y]),t},_doRender:function(e,t,o){var a=t.getData().tree,c=this._oldTree,h={nodeGroup:[],background:[],content:[]},p={nodeGroup:[],background:[],content:[]},y=this._storage,w=[],C=wt(IO,t,p,y,o,h,w);!function d(u,f,v,_,k){function T(I){return I.getId()}function M(I,O){var R=null!=I?u[I]:null,N=null!=O?f[O]:null,z=C(R,N,v,k);z&&d(R&&R.viewChildren||[],N&&N.viewChildren||[],z,_,k+1)}_?$s(f=u,function(I,O){I.isRemoved()||M(O,O)}):new za(f,u,T,T).add(M).update(M).remove(wt(M,null)).execute()}(a.root?[a.root]:[],c&&c.root?[c.root]:[],e,a===c||!c,0);var n,i,s=(i={nodeGroup:[],background:[],content:[]},(n=y)&&$s(n,function(d,u){var f=i[u];$s(d,function(v){v&&(f.push(v),v.__tmWillDelete=1)})}),i);return this._oldTree=a,this._storage=p,{lastsForAnimation:h,willDeleteEls:s,renderFinally:function(){$s(s,function(d){$s(d,function(u){u.parent&&u.parent.remove(u)})}),$s(w,function(d){d.invisible=!0,d.dirty()})}}},_doAnimation:function(e,t,o,a){if(o.get("animation")){var c=o.get("animationDurationUpdate"),h=o.get("animationEasing"),p=(w=[],C={},{add:function(n,i,s,d,u){return Wt(d)&&(u=d,d=0),!C[n.id]&&(C[n.id]=1,w.push({el:n,target:i,time:s,delay:d,easing:u}),!0)},done:function(n){return y=n,this},start:function(){for(var n=w.length,i=0,s=w.length;i<s;i++){var d=w[i];d.el.animateTo(d.target,d.time,d.delay,d.easing,u)}return this;function u(){--n||(w.length=0,C={},y&&y())}}});$s(t.willDeleteEls,function(y,w){$s(y,function(C,n){if(!C.invisible){var i,s=C.parent;if(a&&"drillDown"===a.direction)i=s===a.rootNodeGroup?{shape:{x:0,y:0,width:s.__tmNodeWidth,height:s.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var d=0,u=0;s.__tmWillDelete||(d=s.__tmNodeWidth/2,u=s.__tmNodeHeight/2),i="nodeGroup"===w?{position:[d,u],style:{opacity:0}}:{shape:{x:d,y:u,width:0,height:0},style:{opacity:0}}}i&&p.add(C,i,c,h)}})}),$s(this._storage,function(y,w){$s(y,function(C,n){var i=t.lastsForAnimation[w][n],s={};i&&("nodeGroup"===w?i.old&&(s.position=C.position.slice(),C.attr("position",i.old)):(i.old&&(s.shape=pe({},C.shape),C.setShape(i.old)),i.fadein?(C.setStyle("opacity",0),s.style={opacity:1}):1!==C.style.opacity&&(s.style={opacity:1})),p.add(C,s,c,h))})},this),this._state="animating",p.done(hi(function(){this._state="ready",t.renderFinally()},this)).start()}var y,w,C},_resetController:function(e){var t=this._controller;t||((t=this._controller=new ex(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",hi(this._onPan,this)),t.on("zoom",hi(this._onZoom,this)));var o=new Ro(0,0,e.getWidth(),e.getHeight());t.setPointerChecker(function(a,c,h){return o.contain(c,h)})},_clearController:function(){var e=this._controller;e&&(e.dispose(),e=null)},_onPan:function(e){if("animating"!==this._state&&(3<Math.abs(e.dx)||3<Math.abs(e.dy))){var t=this.seriesModel.getData().tree.root;if(!t)return;var o=t.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+e.dx,y:o.y+e.dy,width:o.width,height:o.height}})}},_onZoom:function(e){var t=e.originX,o=e.originY;if("animating"!==this._state){var a=this.seriesModel.getData().tree.root;if(!a)return;var c=a.getLayout();if(!c)return;var h=new Ro(c.x,c.y,c.width,c.height),p=this.seriesModel.layoutInfo;t-=p.x,o-=p.y;var y=Ii();zr(y,y,[-t,-o]),Rh(y,y,[e.scale,e.scale]),zr(y,y,[t,o]),h.applyTransform(y),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:h.x,y:h.y,width:h.width,height:h.height}})}},_initEvents:function(e){e.on("click",function(t){if("ready"===this._state){var o=this.seriesModel.get("nodeClick",!0);if(o){var a=this.findTarget(t.offsetX,t.offsetY);if(a){var c=a.node;if(c.getLayout().isLeafRoot)this._rootToNode(a);else if("zoomToNode"===o)this._zoomToNode(a);else if("link"===o){var h=c.hostTree.data.getItemModel(c.dataIndex),p=h.get("link",!0),y=h.get("target",!0)||"blank";p&&gc(p,y)}}}}},this)},_renderBreadcrumb:function(e,t,o){o=o||(o=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||{node:e.getData().tree.root},(this._breadcrumb||(this._breadcrumb=new Vd(this.group))).render(e,t,o.node,hi(function(a){"animating"!==this._state&&(mw(e.getViewRoot(),a)?this._rootToNode({node:a}):this._zoomToNode({node:a}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},_rootToNode:function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},findTarget:function(e,t){var o;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(a){var c=this._storage.background[a.getRawIndex()];if(c){var h=c.transformCoordToLocal(e,t),p=c.shape;if(!(p.x<=h[0]&&h[0]<=p.x+p.width&&p.y<=h[1]&&h[1]<=p.y+p.height))return!1;o={node:a,offsetX:h[0],offsetY:h[1]}}},this),o}});for(var G0=function(){},uT=["treemapZoomToNode","treemapRender","treemapMove"],ph=0;ph<uT.length;ph++)Xo({type:uT[ph],update:"updateView"},G0);Xo({type:"treemapRootToNode",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},function(o,a){var c=H0(e,["treemapZoomToNode","treemapRootToNode"],o);if(c){var h=o.getViewRoot();h&&(e.direction=mw(h,c.node)?"rollUp":"drillDown"),o.resetViewRoot(c.node)}})});var yw=ee,id=ue,Tf=-1,Rr=function(e){var t=e.mappingMethod,o=e.type,a=this.option=K(e);this.type=o,this.mappingMethod=t,this._normalizeData=D2[t];var c=Mf[o];this.applyVisual=c.applyVisual,this.getColorMapper=c.getColorMapper,this._doMap=c._doMap[t],"piecewise"===t?(ad(a),function(h){var p=h.pieceList;h.hasSpecialVisual=!1,ee(p,function(y,w){y.originIndex=w,null!=y.visual&&(h.hasSpecialVisual=!0)})}(a)):"category"===t?a.categories?function(h){var p=h.categories,y=h.visual,w=h.categoryMap={};if(yw(p,function(i,s){w[i]=s}),!nt(y)){var C=[];ue(y)?yw(y,function(i,s){C[w[s]??Tf]=i}):C[Tf]=y,y=If(h,C)}for(var n=p.length-1;0<=n;n--)null==y[n]&&(delete w[p[n]],p.pop())}(a):ad(a,!0):(Yn("linear"!==t||a.dataExtent),ad(a))};Rr.prototype={constructor:Rr,mapValueToVisual:function(e){var t=this._normalizeData(e);return this._doMap(t,e)},getNormalizer:function(){return rt(this._normalizeData,this)}};var Mf=Rr.visualHandlers={color:{applyVisual:Kl("color"),getColorMapper:function(){var e=this.option;return rt("category"===e.mappingMethod?function(t,o){return o||(t=this._normalizeData(t)),Af.call(this,t)}:function(t,o,a){var c=!!a;return o||(t=this._normalizeData(t)),a=nr(t,e.parsedVisual,a),c?a:rs(a,"rgba")},this)},_doMap:{linear:function(e){return rs(nr(e,this.option.parsedVisual),"rgba")},category:Af,piecewise:function(e,t){var o=dx.call(this,t);return null==o&&(o=rs(nr(e,this.option.parsedVisual),"rgba")),o},fixed:Pp}},colorHue:j0(function(e,t){return tu(e,t)}),colorSaturation:j0(function(e,t){return tu(e,null,t)}),colorLightness:j0(function(e,t){return tu(e,null,null,t)}),colorAlpha:j0(function(e,t){return Ua(e,t)}),opacity:{applyVisual:Kl("opacity"),_doMap:cx([0,1])},liftZ:{applyVisual:Kl("liftZ"),_doMap:{linear:Pp,category:Pp,piecewise:Pp,fixed:Pp}},symbol:{applyVisual:function(e,t,o){var a=this.mapValueToVisual(e);if(Wt(a))o("symbol",a);else if(id(a))for(var c in a)a.hasOwnProperty(c)&&o(c,a[c])},_doMap:{linear:hT,category:Af,piecewise:function(e,t){var o=dx.call(this,t);return null==o&&(o=hT.call(this,e)),o},fixed:Pp}},symbolSize:{applyVisual:Kl("symbolSize"),_doMap:cx([0,1])}};function ad(e,t){var o=e.visual,a=[];ue(o)?yw(o,function(c){a.push(c)}):null!=o&&a.push(o),t||1!==a.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(a[1]=a[0]),If(e,a)}function j0(e){return{applyVisual:function(t,o,a){t=this.mapValueToVisual(t),a("color",e(o("color"),t))},_doMap:cx([0,1])}}function hT(e){var t=this.option.visual;return t[Math.round(Ht(e,[0,1],[0,t.length-1],!0))]||{}}function Kl(e){return function(t,o,a){a(e,this.mapValueToVisual(t))}}function Af(e){var t=this.option.visual;return t[this.option.loop&&e!==Tf?e%t.length:e]}function Pp(){return this.option.visual[0]}function cx(e){return{linear:function(t){return Ht(t,e,this.option.visual,!0)},category:Af,piecewise:function(t,o){var a=dx.call(this,o);return null==a&&(a=Ht(t,e,this.option.visual,!0)),a},fixed:Pp}}function dx(e){var t=this.option,o=t.pieceList;if(t.hasSpecialVisual){var a=o[Rr.findPieceIndex(e,o)];if(a&&a.visual)return a.visual[this.type]}}function If(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=Se(t,function(o){return nl(o)})),t}var D2={linear:function(e){return Ht(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,o=Rr.findPieceIndex(e,t,!0);if(null!=o)return Ht(o,[0,t.length-1],[0,1],!0)},category:function(e){return(this.option.categories?this.option.categoryMap[e]:e)??Tf},fixed:Tt};function bw(e,t,o){return e?t<=o:t<o}Rr.listVisualTypes=function(){var e=[];return ee(Mf,function(t,o){e.push(o)}),e},Rr.addVisualHandler=function(e,t){Mf[e]=t},Rr.isValidType=function(e){return Mf.hasOwnProperty(e)},Rr.eachVisual=function(e,t,o){ue(e)?ee(e,t,o):t.call(o,e)},Rr.mapVisual=function(e,t,o){var a,c=nt(e)?[]:ue(e)?{}:(a=!0,null);return Rr.eachVisual(e,function(h,p){var y=t.call(o,h,p);a?c=y:c[p]=y}),c},Rr.retrieveVisuals=function(e){var t,o={};return e&&yw(Mf,function(a,c){e.hasOwnProperty(c)&&(o[c]=e[c],t=!0)}),t?o:null},Rr.prepareVisualTypes=function(e){if(id(e)){var t=[];yw(e,function(o,a){t.push(a)}),e=t}else{if(!nt(e))return[];e=e.slice()}return e.sort(function(o,a){return"color"===a&&"color"!==o&&0===o.indexOf("color")?1:-1}),e},Rr.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},Rr.findPieceIndex=function(e,t,o){for(var a,c=1/0,h=0,p=t.length;h<p;h++){var y=t[h].value;if(null!=y){if(y===e||"string"==typeof y&&y===e+"")return h;o&&i(y,h)}}for(h=0,p=t.length;h<p;h++){var w=t[h],C=w.interval,n=w.close;if(C){if(C[0]===-1/0){if(bw(n[1],e,C[1]))return h}else if(C[1]===1/0){if(bw(n[0],C[0],e))return h}else if(bw(n[0],C[0],e)&&bw(n[1],e,C[1]))return h;o&&i(C[0],h),o&&i(C[1],h)}}if(o)return e===1/0?t.length-1:e===-1/0?0:a;function i(s,d){var u=Math.abs(s-e);u<c&&(c=u,a=d)}};var DO=nt,OO={seriesType:"treemap",reset:function(e,t,o,a){var c=e.getData().tree.root;c.isRemoved()||function h(p,y,w,C){var n=p.getModel(),i=p.getLayout();if(i&&!i.invisible&&i.isInView){var v,k,s=p.getModel("itemStyle"),d=function q0(e,t,o){var a=pe({},t),c=o.designatedVisualItemStyle;return ee(["color","colorAlpha","colorSaturation"],function(h){c[h]=t[h];var p=e.get(h);(c[h]=null)!=p&&(a[h]=p)}),a}(s,y,C),u=s.get("borderColor"),f=s.get("borderColorSaturation");null!=f&&(u=null!=(k=v=xw(d))?tu(k,null,null,f):null),p.setVisual("borderColor",u);var T=p.viewChildren;if(T&&T.length){var M=function O2(e,t,o,a,c,h){if(h&&h.length){var p=_w(t,"color")||null!=c.color&&"none"!==c.color&&(_w(t,"colorAlpha")||_w(t,"colorSaturation"));if(p){var y=t.get("visualMin"),w=t.get("visualMax"),C=o.dataExtent.slice();null!=y&&y<C[0]&&(C[0]=y),null!=w&&w>C[1]&&(C[1]=w);var n=t.get("colorMappingBy"),i={type:p.name,dataExtent:C,visual:p.range};"color"!==i.type||"index"!==n&&"id"!==n?i.mappingMethod="linear":(i.mappingMethod="category",i.loop=!0);var s=new Rr(i);return s.__drColorMappingBy=n,s}}}(0,n,i,0,d,T);ee(T,function(I,O){if(I.depth>=w.length||I===w[I.depth]){var R=function E2(e,t,o,a,c,h){var p=pe({},t);if(c){var y=c.type,w="color"===y&&c.__drColorMappingBy,C="index"===w?a:"id"===w?h.mapIdToIndex(o.getId()):o.getValue(e.get("visualDimension"));p[y]=c.mapValueToVisual(C)}return p}(n,d,I,O,M,C);h(I,R,w,C)}})}else v=xw(d),p.setVisual("color",v)}}(c,{},e.getViewRoot().getAncestors(),e)}};function xw(e){var t=gT(e,"color");if(t){var o=gT(e,"colorAlpha"),a=gT(e,"colorSaturation");return a&&(t=tu(t,null,null,a)),o&&(t=Ua(t,o)),t}}function gT(e,t){var o=e[t];if(null!=o&&"none"!==o)return o}function _w(e,t){var o=e.get(t);return DO(o)&&o.length?{name:t,range:o}:null}var $0=Math.max,hx=Math.min,N2=Jt,R2=ee,L2=["itemStyle","borderWidth"],rN=["itemStyle","gapWidth"],EO=["upperLabel","show"],NO=["upperLabel","height"],RO={seriesType:"treemap",reset:function(e,t,o,a){var c=o.getWidth(),h=o.getHeight(),p=e.option,y=Xa(e.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()}),w=p.size||[],C=rn(N2(y.width,w[0]),c),n=rn(N2(y.height,w[1]),h),i=a&&a.type,s=H0(a,["treemapZoomToNode","treemapRootToNode"],e),d="treemapRender"===i||"treemapMove"===i?a.rootRect:null,u=e.getViewRoot(),f=pw(u);if("treemapMove"!==i){var v="treemapZoomToNode"===i?function(I,O,R,N,z){var L,V=(O||{}).node,J=[N,z];if(!V||V===R)return J;for(var te=N*z,re=te*I.option.zoomToNodeRatio;L=V.parentNode;){for(var ie=0,he=L.children,fe=0,ye=he.length;fe<ye;fe++)ie+=he[fe].getValue();var Ie=V.getValue();if(0===Ie)return J;re*=ie/Ie;var He=L.getModel(),we=He.get(L2);re+=4*we*we+(3*we+Math.max(we,Y0(He)))*Math.pow(re,.5),Q1<re&&(re=Q1),V=L}re<te&&(re=te);var Be=Math.pow(re/te,.5);return[N*Be,z*Be]}(e,s,u,C,n):d?[d.width,d.height]:[C,n],_=p.sort;_&&"asc"!==_&&"desc"!==_&&(_="desc");var k={squareRatio:p.squareRatio,sort:_,leafDepth:p.leafDepth};u.hostTree.clearLayouts();var T={x:0,y:0,width:v[0],height:v[1],area:v[0]*v[1]};u.setLayout(T),function I(O,R,N,z){var L,V;if(!O.isRemoved()){var J=O.getLayout();L=J.width,V=J.height;var te=(Ie=O.getModel()).get(L2),re=Ie.get(rN)/2,ie=Y0(Ie),he=Math.max(te,ie),fe=te-re,ye=he-re,Ie=O.getModel();O.setLayout({borderWidth:te,upperHeight:he,upperLabelHeight:ie},!0);var He=(L=$0(L-2*fe,0))*(V=$0(V-fe-ye,0)),we=function iN(e,t,o,a,c,h){var p=e.children||[],y=a.sort;"asc"!==y&&"desc"!==y&&(y=null);var w=null!=a.leafDepth&&a.leafDepth<=h;if(c&&!w)return e.viewChildren=[];!function(d,u){u&&d.sort(function(f,v){var _="asc"===u?f.getValue()-v.getValue():v.getValue()-f.getValue();return 0==_?"asc"===u?f.dataIndex-v.dataIndex:v.dataIndex-f.dataIndex:_})}(p=We(p,function(d){return!d.isRemoved()}),y);var C=function(d,u,f){for(var v=0,_=0,k=u.length;_<k;_++)v+=u[_].getValue();var T=d.get("visualDimension");if(u&&u.length)if("value"===T&&f)M=[u[u.length-1].getValue(),u[0].getValue()],"asc"===f&&M.reverse();else{var M=[1/0,-1/0];R2(u,function(I){var O=I.getValue(T);O<M[0]&&(M[0]=O),O>M[1]&&(M[1]=O)})}else M=[NaN,NaN];return{sum:v,dataExtent:M}}(t,p,y);if(0===C.sum)return e.viewChildren=[];if(C.sum=function(d,u,f,v,_){if(!v)return f;for(var k=d.get("visibleMin"),T=_.length,M=T,I=T-1;0<=I;I--){var O=_["asc"===v?T-I-1:I].getValue();O/f*u<k&&(M=I,f-=O)}return _.splice("asc"===v?0:M,T-M),f}(t,o,C.sum,y,p),0===C.sum)return e.viewChildren=[];for(var n=0,i=p.length;n<i;n++){var s=p[n].getValue()/C.sum*o;p[n].setLayout({area:s})}return w&&(p.length&&e.setLayout({isLeafRoot:!0},!0),p.length=0),e.viewChildren=p,e.setLayout({dataExtent:C.dataExtent},!0),p}(O,Ie,He,R,N,z);if(we.length){var De={x:fe,y:ye,width:L,height:V},Be=hx(L,V),et=1/0,Ye=[];Ye.area=0;for(var it=0,yt=we.length;it<yt;){var It=we[it];Ye.push(It),Ye.area+=It.getLayout().area;var qt=LO(Ye,Be,R.squareRatio);et=qt<=et?(it++,qt):(Ye.area-=Ye.pop().getLayout().area,P2(Ye,Be,De,re,!1),Be=hx(De.width,De.height),Ye.length=Ye.area=0,1/0)}if(Ye.length&&P2(Ye,Be,De,re,!0),!N){var Xt=Ie.get("childrenVisibleMin");null!=Xt&&He<Xt&&(N=!0)}for(it=0,yt=we.length;it<yt;it++)I(we[it],R,N,z+1)}}}(u,k,!1,0),T=u.getLayout(),R2(f,function(I,O){var R=(f[O+1]||u).getValue();I.setLayout(pe({dataExtent:[R,R],borderWidth:0,upperHeight:0},T))})}var M=e.getData().tree.root;M.setLayout(function(I,O,R){if(O)return{x:O.x,y:O.y};var N={x:0,y:0};if(!R)return N;var z=R.node,L=z.getLayout();if(!L)return N;for(var V=[L.width/2,L.height/2],J=z;J;){var te=J.getLayout();V[0]+=te.x,V[1]+=te.y,J=J.parentNode}return{x:I.width/2-V[0],y:I.height/2-V[1]}}(y,d,s),!0),e.setLayoutInfo(y),function I(O,R,N,z,L){var V=O.getLayout(),J=N[L],te=J&&J===O;if(!(J&&!te||L===N.length&&O!==z)){O.setLayout({isInView:!0,invisible:!te&&!R.intersect(V),isAboveViewRoot:te},!0);var re=new Ro(R.x-V.x,R.y-V.y,R.width,R.height);R2(O.viewChildren||[],function(ie){I(ie,re,N,z,L+1)})}}(M,new Ro(-y.x,-y.y,c,h),f,u,0)}};function LO(e,t,o){for(var a,c=0,h=1/0,p=0,y=e.length;p<y;p++)(a=e[p].getLayout().area)&&(a<h&&(h=a),c<a&&(c=a));var w=e.area*e.area,C=t*t*o;return w?$0(C*c/w,w/(C*h)):1/0}function P2(e,t,o,a,c){var h=t===o.width?0:1,p=1-h,y=["x","y"],w=["width","height"],C=o[y[h]],n=t?e.area/t:0;(c||n>o[w[p]])&&(n=o[w[p]]);for(var i=0,s=e.length;i<s;i++){var d=e[i],u={},f=n?d.getLayout().area/n:0,v=u[w[p]]=$0(n-2*a,0),_=o[y[h]]+o[w[h]]-C,k=i===s-1||_<f?_:f,T=u[w[h]]=$0(k-2*a,0);u[y[p]]=o[y[p]]+hx(a,v/2),u[y[h]]=C+hx(a,T/2),C+=k,d.setLayout(u,!0)}o[y[p]]+=n,o[w[p]]-=n}function Y0(e){return e.get(EO)?e.get(NO):0}function gx(e){return"_EC_"+e}function Df(e){this._directed=e||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}}yi(OO),Wn(RO);var _c=Df.prototype;function Su(e,t){this.id=e??"",this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=t??-1}function ww(e,t,o){this.node1=e,this.node2=t,this.dataIndex=o??-1}function PO(e,t){return{getValue:function(o){var a=this[e][t];return a.get(a.getDimension(o||"value"),this.dataIndex)},setVisual:function(o,a){0<=this.dataIndex&&this[e][t].setItemVisual(this.dataIndex,o,a)},getVisual:function(o,a){return this[e][t].getItemVisual(this.dataIndex,o,a)},setLayout:function(o,a){0<=this.dataIndex&&this[e][t].setItemLayout(this.dataIndex,o,a)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}function Sw(e,t,o,a,c){for(var h=new Df(a),p=0;p<e.length;p++)h.addNode(Jt(e[p].id,e[p].name,p),p);var y=[],w=[],C=0;for(p=0;p<t.length;p++){var n=t[p],i=n.source,s=n.target;h.addEdge(i,s,C)&&(w.push(n),y.push(Jt(n.id,i+" > "+s)),C++)}var d,u=o.get("coordinateSystem");if("cartesian2d"===u||"polar"===u)d=ug(e,o);else{var f=yl.get(u),v=f&&"view"!==f.type&&f.dimensions||[];Ue(v,"value")<0&&v.concat(["value"]);var _=S0(e,{coordDimensions:v});(d=new Ja(_,o)).initData(e)}var k=new Ja(["value"],o);return k.initData(w,y),c&&c(d,k),od({mainData:d,struct:h,structAttr:"graph",datas:{node:d,edge:k},datasAttr:{node:"data",edge:"edgeData"}}),h.update(),h}_c.type="graph",_c.isDirected=function(){return this._directed},_c.addNode=function(e,t){var o=this._nodesMap;if(!o[gx(e=null==e?""+t:""+e)]){var a=new Su(e,t);return(a.hostGraph=this).nodes.push(a),o[gx(e)]=a}},_c.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},_c.getNodeById=function(e){return this._nodesMap[gx(e)]},_c.addEdge=function(e,t,o){var a=this._nodesMap,c=this._edgesMap;if("number"==typeof e&&(e=this.nodes[e]),"number"==typeof t&&(t=this.nodes[t]),Su.isInstance(e)||(e=a[gx(e)]),Su.isInstance(t)||(t=a[gx(t)]),e&&t){var h=e.id+"-"+t.id,p=new ww(e,t,o);return(p.hostGraph=this)._directed&&(e.outEdges.push(p),t.inEdges.push(p)),e.edges.push(p),e!==t&&t.edges.push(p),this.edges.push(p),c[h]=p}},_c.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},_c.getEdge=function(e,t){Su.isInstance(e)&&(e=e.id),Su.isInstance(t)&&(t=t.id);var o=this._edgesMap;return this._directed?o[e+"-"+t]:o[e+"-"+t]||o[t+"-"+e]},_c.eachNode=function(e,t){for(var o=this.nodes,a=o.length,c=0;c<a;c++)0<=o[c].dataIndex&&e.call(t,o[c],c)},_c.eachEdge=function(e,t){for(var o=this.edges,a=o.length,c=0;c<a;c++)0<=o[c].dataIndex&&0<=o[c].node1.dataIndex&&0<=o[c].node2.dataIndex&&e.call(t,o[c],c)},_c.breadthFirstTraverse=function(e,t,o,a){if(Su.isInstance(t)||(t=this._nodesMap[gx(t)]),t){for(var c="out"===o?"outEdges":"in"===o?"inEdges":"edges",h=0;h<this.nodes.length;h++)this.nodes[h].__visited=!1;if(!e.call(a,t,null))for(var p=[t];p.length;){var y=p.shift(),w=y[c];for(h=0;h<w.length;h++){var C=w[h],n=C.node1===y?C.node2:C.node1;if(!n.__visited){if(e.call(a,n,y))return;p.push(n),n.__visited=!0}}}}},_c.update=function(){for(var e=this.data,t=this.edgeData,o=this.nodes,a=this.edges,c=0,h=o.length;c<h;c++)o[c].dataIndex=-1;for(c=0,h=e.count();c<h;c++)o[e.getRawIndex(c)].dataIndex=c;for(t.filterSelf(function(p){var y=a[t.getRawIndex(p)];return 0<=y.node1.dataIndex&&0<=y.node2.dataIndex}),c=0,h=a.length;c<h;c++)a[c].dataIndex=-1;for(c=0,h=t.count();c<h;c++)a[t.getRawIndex(c)].dataIndex=c},_c.clone=function(){for(var e=new Df(this._directed),t=this.nodes,o=this.edges,a=0;a<t.length;a++)e.addNode(t[a].id,t[a].dataIndex);for(a=0;a<o.length;a++){var c=o[a];e.addEdge(c.node1.id,c.node2.id,c.dataIndex)}return e},Su.prototype={constructor:Su,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)}},ww.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},Me(Su,PO("hostGraph","data")),Me(ww,PO("hostGraph","edgeData")),Df.Node=Su,Df.Edge=ww,fi(Su),fi(ww);var px=function(e){return e.get("autoCurveness")||null},kw=function(e,t){var o=px(e),a=20,c=[];if("number"==typeof o)a=o;else if(nt(o))return void(e.__curvenessList=o);a<t&&(a=t);var h=a%2?a+2:a+3;c=[];for(var p=0;p<h;p++)c.push((p%2?p+1:p)/10*(p%2?-1:1));e.__curvenessList=c},mh=function(e,t,o){var a=[e.id,e.dataIndex].join("."),c=[t.id,t.dataIndex].join(".");return[o.uid,a,c].join("--\x3e")},Tw=function(e){var t=e.split("--\x3e");return[t[0],t[2],t[1]].join("--\x3e")},Of=function(e,t){var o=mh(e.node1,e.node2,t);return t.__edgeMap[o]},B2=function(e,t){return X0(mh(e.node1,e.node2,t),t)+X0(mh(e.node2,e.node1,t),t)},X0=function(e,t){var o=t.__edgeMap;return o[e]?o[e].length:0};function wc(e,t,o,a){var c=px(t),h=nt(c);if(!c)return null;var p=Of(e,t);if(!p)return null;for(var y=-1,w=0;w<p.length;w++)if(p[w]===o){y=w;break}var C=B2(e,t);kw(t,C),e.lineStyle=e.lineStyle||{};var n=mh(e.node1,e.node2,t),i=t.__curvenessList,s=h||C%2?0:1;if(p.isForward)return i[s+y];var d=Tw(n),u=X0(d,t),f=i[y+u+s];return a?h?c&&0===c[0]?(u+s)%2?f:-f:((u%2?0:1)+s)%2?f:-f:(u+s)%2?f:-f:i[y+u+s]}var sd=Zm({type:"series.graph",init:function(e){sd.superApply(this,"init",arguments);var t=this;function o(){return t._categoriesData}this.legendVisualProvider=new L0(o,o),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeOption:function(e){sd.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(e){sd.superApply(this,"mergeDefaultAndTheme",arguments),Fl(e,["edgeLabel"],["show"])},getInitialData:function(e,t){var p,o=e.edges||e.links||[],a=e.data||e.nodes||[],c=this;if(a&&o){px(p=this)&&(p.__curvenessList=[],p.__edgeMap={},kw(p));var h=Sw(a,o,this,!0,function(p,y){p.wrapMethod("getItemModel",function(d){var u=c._categoriesModels[d.getShallow("category")];return u&&(u.parentModel=d.parentModel,d.parentModel=u),d});var w=c.getModel("edgeLabel"),C=new Fo({label:w.option},w.parentModel,t),n=c.getModel("emphasis.edgeLabel"),i=new Fo({emphasis:{label:n.option}},n.parentModel,t);function s(d){return(d=this.parsePath(d))&&"label"===d[0]?C:d&&"emphasis"===d[0]&&"label"===d[1]?i:this.parentModel}y.wrapMethod("getItemModel",function(d){return d.customizeGetParent(s),d})});return ee(h.edges,function(p){!function(y,w,C,n){if(px(C)){var i=mh(y,w,C),s=C.__edgeMap,d=s[Tw(i)];s[i]&&!d?s[i].isForward=!0:d&&s[i]&&(d.isForward=!0,s[i].isForward=!1),s[i]=s[i]||[],s[i].push(n)}}(p.node1,p.node2,this,p.dataIndex)},this),h.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,t,o){if("edge"!==o)return sd.superApply(this,"formatTooltip",arguments);var a=this.getData(),c=this.getDataParams(e,o),h=a.graph.getEdgeByIndex(e),p=a.getName(h.node1.dataIndex),y=a.getName(h.node2.dataIndex),w=[];return null!=p&&w.push(p),null!=y&&w.push(y),w=Hi(w.join(" > ")),c.value&&(w+=" : "+Hi(c.value)),w},_updateCategoriesData:function(){var e=Se(this.option.categories||[],function(o){return null!=o.value?o:pe({value:0},o)}),t=new Ja(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray(function(o){return t.getItemModel(o,!0)})},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},isAnimationEnabled:function(){return sd.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),ni=Ya.prototype,Mw=q1.prototype;function Ef(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var z2=ra({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(e,t){this[Ef(t)?"_buildPathLine":"_buildPathCurve"](e,t)},_buildPathLine:ni.buildPath,_buildPathCurve:Mw.buildPath,pointAt:function(e){return this[Ef(this.shape)?"_pointAtLine":"_pointAtCurve"](e)},_pointAtLine:ni.pointAt,_pointAtCurve:Mw.pointAt,tangentAt:function(e){var t=this.shape,o=Ef(t)?[t.x2-t.x1,t.y2-t.y1]:this._tangentAtCurve(e);return vn(o,o)},_tangentAtCurve:Mw.tangentAt}),gi=["fromSymbol","toSymbol"];function F2(e){return"_"+e+"Type"}function V2(e,t,o){var a=t.getItemVisual(o,e);if(a&&"none"!==a){var c=t.getItemVisual(o,"color"),h=t.getItemVisual(o,e+"Size"),p=t.getItemVisual(o,e+"Rotate");nt(h)||(h=[h,h]);var y=Kc(a,-h[0]/2,-h[1]/2,h[0],h[1],c);return y.__specifiedRotation=null==p||isNaN(p)?void 0:+p*Math.PI/180||0,y.name=e,y}}function Nf(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var o=t[2];o?(e.cpx1=o[0],e.cpy1=o[1]):(e.cpx1=NaN,e.cpy1=NaN)}function vg(e,t,o){pn.call(this),this._createLine(e,t,o)}var ld=vg.prototype;function Rf(e){this._ctor=e||vg,this.group=new pn}ld.beforeUpdate=function(){var e=this.childOfName("fromSymbol"),t=this.childOfName("toSymbol"),o=this.childOfName("label");if(e||t||!o.ignore){for(var a=1,c=this.parent;c;)c.scale&&(a/=c.scale[0]),c=c.parent;var h=this.childOfName("line");if(this.__dirty||h.__dirty){var i,p=h.shape.percent,y=h.pointAt(0),w=h.pointAt(p),C=Go([],w,y);if(vn(C,C),e){if(e.attr("position",y),null==(i=e.__specifiedRotation)){var n=h.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(n[1],n[0]))}else e.attr("rotation",i);e.attr("scale",[a*p,a*p])}if(t&&(t.attr("position",w),null==(i=t.__specifiedRotation)?(n=h.tangentAt(1),t.attr("rotation",-Math.PI/2-Math.atan2(n[1],n[0]))):t.attr("rotation",i),t.attr("scale",[a*p,a*p])),!o.ignore){var s,d,u,f;o.attr("position",w);var v=o.__labelDistance,_=v[0]*a,k=v[1]*a,T=p/2,M=[(n=h.tangentAt(T))[1],-n[0]],I=h.pointAt(T);0<M[1]&&(M[0]=-M[0],M[1]=-M[1]);var O,R=n[0]<0?-1:1;if("start"!==o.__position&&"end"!==o.__position){var N=-Math.atan2(n[1],n[0]);w[0]<y[0]&&(N=Math.PI+N),o.attr("rotation",N)}switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":O=-k,u="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":O=k,u="top";break;default:O=0,u="middle"}switch(o.__position){case"end":s=[C[0]*_+w[0],C[1]*k+w[1]],d=.8<C[0]?"left":C[0]<-.8?"right":"center",u=.8<C[1]?"top":C[1]<-.8?"bottom":"middle";break;case"start":s=[-C[0]*_+y[0],-C[1]*k+y[1]],d=.8<C[0]?"right":C[0]<-.8?"left":"center",u=.8<C[1]?"bottom":C[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":s=[_*R+y[0],y[1]+O],d=n[0]<0?"right":"left",f=[-_*R,-O];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":s=[I[0],I[1]+O],d="center",f=[0,-O];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":s=[-_*R+w[0],w[1]+O],d=0<=n[0]?"right":"left",f=[_*R,-O]}o.attr({style:{textVerticalAlign:o.__verticalAlign||u,textAlign:o.__textAlign||d},position:s,scale:[a,a],origin:f})}}}},ld._createLine=function(e,t,o){var p,y,a=e.hostModel,c=(p=e.getItemLayout(t),Nf((y=new z2({name:"line",subPixelOptimize:!0})).shape,p),y);c.shape.percent=0,Fs(c,{shape:{percent:1}},a,t),this.add(c);var h=new Yo({name:"label",lineLabelOriginalOpacity:1});this.add(h),ee(gi,function(p){var y=V2(p,e,t);this.add(y),this[F2(p)]=e.getItemVisual(t,p)},this),this._updateCommonStl(e,t,o)},ld.updateData=function(e,t,o){var a=e.hostModel,c=this.childOfName("line"),h=e.getItemLayout(t),p={shape:{}};Nf(p.shape,h),Eo(c,p,a,t),ee(gi,function(y){var w=e.getItemVisual(t,y),C=F2(y);if(this[C]!==w){this.remove(this.childOfName(y));var n=V2(y,e,t);this.add(n)}this[C]=w},this),this._updateCommonStl(e,t,o)},ld._updateCommonStl=function(e,t,o){var a=e.hostModel,c=this.childOfName("line"),h=o&&o.lineStyle,p=o&&o.hoverLineStyle,y=o&&o.labelModel,w=o&&o.hoverLabelModel;if(!o||e.hasItemOption){var C=e.getItemModel(t);h=C.getModel("lineStyle").getLineStyle(),p=C.getModel("emphasis.lineStyle").getLineStyle(),y=C.getModel("label"),w=C.getModel("emphasis.label")}var n=e.getItemVisual(t,"color"),i=hn(e.getItemVisual(t,"opacity"),h.opacity,1);c.useStyle(_e({strokeNoScale:!0,fill:"none",stroke:n,opacity:i},h)),c.hoverStyle=p,ee(gi,function(O){var R=this.childOfName(O);R&&(R.setColor(n),R.setStyle({opacity:i}))},this);var s,d,u=y.getShallow("show"),f=w.getShallow("show"),v=this.childOfName("label");if((u||f)&&(s=n||"#000",null==(d=a.getFormattedLabel(t,"normal",e.dataType)))){var _=a.getRawValue(t);d=null==_?e.getName(t):isFinite(_)?Ea(_):_}var k=u?d:null,T=f?_n(a.getFormattedLabel(t,"emphasis",e.dataType),d):null,M=v.style;if(null!=k||null!=T){Fi(v.style,y,{text:k},{autoColor:s}),v.__textAlign=M.textAlign,v.__verticalAlign=M.textVerticalAlign,v.__position=y.get("position")||"middle";var I=y.get("distance");nt(I)||(I=[I,I]),v.__labelDistance=I}v.hoverStyle=null!=T?{text:T,textFill:w.getTextColor(!0),fontStyle:w.getShallow("fontStyle"),fontWeight:w.getShallow("fontWeight"),fontSize:w.getShallow("fontSize"),fontFamily:w.getShallow("fontFamily")}:{text:null},v.ignore=!u&&!f,qr(this)},ld.highlight=function(){this.trigger("emphasis")},ld.downplay=function(){this.trigger("normal")},ld.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},ld.setLinePoints=function(e){var t=this.childOfName("line");Nf(t.shape,e),t.dirty()},ve(vg,pn);var Bp=Rf.prototype;function H2(e){var t=e.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),hoverLineStyle:t.getModel("emphasis.lineStyle").getLineStyle(),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label")}}function W2(e){return isNaN(e[0])||isNaN(e[1])}function pT(e){return!W2(e[0])&&!W2(e[1])}function mx(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var o=e.option.nodeScaleRatio,a=t.scale,c=a&&a[0]||1;return((t.getZoom()-1)*o+1)/c}function fx(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}Bp.isPersistent=function(){return!0},Bp.updateData=function(e){var t=this,o=t.group,a=t._lineData;t._lineData=e,a||o.removeAll();var c=H2(e);e.diff(a).add(function(h){!function(p,y,w,C){if(pT(y.getItemLayout(w))){var n=new p._ctor(y,w,C);y.setItemGraphicEl(w,n),p.group.add(n)}}(t,e,h,c)}).update(function(h,p){!function(y,w,C,n,i,s){var d=w.getItemGraphicEl(n);if(!pT(C.getItemLayout(i)))return y.group.remove(d);d?d.updateData(C,i,s):d=new y._ctor(C,i,s),C.setItemGraphicEl(i,d),y.group.add(d)}(t,a,e,p,h,c)}).remove(function(h){o.remove(a.getItemGraphicEl(h))}).execute()},Bp.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,o){t.updateLayout(e,o)},this)},Bp.incrementalPrepareUpdate=function(e){this._seriesScope=H2(e),this._lineData=null,this.group.removeAll()},Bp.incrementalUpdate=function(e,t){function o(h){var p;h.isGroup||(p=h).animators&&0<p.animators.length||(h.incremental=h.useHoverLayer=!0)}for(var a=e.start;a<e.end;a++)if(pT(t.getItemLayout(a))){var c=new this._ctor(t,a,this._seriesScope);c.traverse(o),this.group.add(c),t.setItemGraphicEl(a,c)}},Bp.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Bp._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var mT=[],Lf=[],fT=[],Z0=Ni,vT=pa,vx=Math.abs;function yx(e,t,o){for(var a,c=e[0],h=e[1],p=e[2],y=1/0,w=o*o,C=.1,n=.1;n<=.9;n+=.1)mT[0]=Z0(c[0],h[0],p[0],n),mT[1]=Z0(c[1],h[1],p[1],n),(d=vx(vT(mT,t)-w))<y&&(y=d,a=n);for(var i=0;i<32;i++){var s=a+C;Lf[0]=Z0(c[0],h[0],p[0],a),Lf[1]=Z0(c[1],h[1],p[1],a),fT[0]=Z0(c[0],h[0],p[0],s),fT[1]=Z0(c[1],h[1],p[1],s);var d=vT(Lf,t)-w;if(vx(d)<.01)break;var u=vT(fT,t)-w;C/=2,d<0?0<=u?a+=C:a-=C:0<=u?a-=C:a+=C}return a}function K0(e,t){var o=[],a=Ky,c=[[],[],[]],h=[[],[]],p=[];t/=2,e.eachEdge(function(y,w){var C=y.getLayout(),n=y.getVisual("fromSymbol"),i=y.getVisual("toSymbol");C.__original||(C.__original=[no(C[0]),no(C[1])],C[2]&&C.__original.push(no(C[2])));var s=C.__original;if(null!=C[2]){if(Sn(c[0],s[0]),Sn(c[1],s[2]),Sn(c[2],s[1]),n&&"none"!==n){var d=fx(y.node1),u=yx(c,s[0],d*t);a(c[0][0],c[1][0],c[2][0],u,o),c[0][0]=o[3],c[1][0]=o[4],a(c[0][1],c[1][1],c[2][1],u,o),c[0][1]=o[3],c[1][1]=o[4]}i&&"none"!==i&&(d=fx(y.node2),u=yx(c,s[1],d*t),a(c[0][0],c[1][0],c[2][0],u,o),c[1][0]=o[1],c[2][0]=o[2],a(c[0][1],c[1][1],c[2][1],u,o),c[1][1]=o[1],c[2][1]=o[2]),Sn(C[0],c[0]),Sn(C[1],c[2]),Sn(C[2],c[1])}else Sn(h[0],s[0]),Sn(h[1],s[1]),Go(p,h[1],h[0]),vn(p,p),n&&"none"!==n&&(d=fx(y.node1),wi(h[0],h[0],p,d*t)),i&&"none"!==i&&(d=fx(y.node2),wi(h[1],h[1],p,-d*t)),Sn(C[0],h[0]),Sn(C[1],h[1])})}var Cu="__focusNodeAdjacency",Pf="__unfocusNodeAdjacency",zp=["itemStyle","opacity"],bx=["lineStyle","opacity"];function xx(e,t){return e.getVisual("opacity")??e.getModel().get(t)}function Aw(e,t,o){var a=e.getGraphicEl(),c=xx(e,t);null!=o&&(null==c&&(c=1),c*=o),a.downplay&&a.downplay(),a.traverse(function(h){if(!h.isGroup){var p=h.lineLabelOriginalOpacity;null!=p&&null==o||(p=c),h.setStyle("opacity",p)}})}function Bf(e,t){var o=xx(e,t),a=e.getGraphicEl();a.traverse(function(c){c.isGroup||c.setStyle("opacity",o)}),a.highlight&&a.highlight()}function zf(e){return e instanceof Array||(e=[e,e]),e}function J0(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var o=e.getGraph();o.eachNode(function(a){var c=a.getModel();a.setLayout([+c.get("x"),+c.get("y")])}),Ff(o,e)}}function Ff(e,t){e.eachEdge(function(o,a){var c=hn(o.getModel().get("lineStyle.curveness"),-wc(o,t,a,!0),0),h=no(o.node1.getLayout()),p=no(o.node2.getLayout()),y=[h,p];+c&&y.push([(h[0]+p[0])/2-(h[1]-p[1])*c,(h[1]+p[1])/2-(p[0]-h[0])*c]),o.setLayout(y)})}Ts({type:"graph",init:function(e,t){var o=new Ap,a=new Rf,c=this.group;this._controller=new ex(t.getZr()),this._controllerHost={target:c},c.add(o.group),c.add(a.group),this._symbolDraw=o,this._lineDraw=a,this._firstRender=!0},render:function(e,t,o){var a=this,c=e.coordinateSystem;this._model=e;var h=this._symbolDraw,p=this._lineDraw,y=this.group;if("view"===c.type){var w={position:c.position,scale:c.scale};this._firstRender?y.attr(w):Eo(y,w,e)}K0(e.getGraph(),mx(e));var C=e.getData();h.updateData(C);var n=e.getEdgeData();p.updateData(n),this._updateNodeAndLinkScale(),this._updateController(e,t,o),clearTimeout(this._layoutTimeout);var i=e.forceLayout,s=e.get("force.layoutAnimation");i&&this._startForceLayoutIteration(i,s),C.eachItemGraphicEl(function(v,_){var k=C.getItemModel(_);v.off("drag").off("dragend");var T=k.get("draggable");T&&v.on("drag",function(){i&&(i.warmUp(),this._layouting||this._startForceLayoutIteration(i,s),i.setFixed(_),C.setItemLayout(_,v.position))},this).on("dragend",function(){i&&i.setUnfixed(_)},this),v.setDraggable(T&&i),v[Cu]&&v.off("mouseover",v[Cu]),v[Pf]&&v.off("mouseout",v[Pf]),k.get("focusNodeAdjacency")&&(v.on("mouseover",v[Cu]=function(){a._clearTimer(),o.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:v.dataIndex})}),v.on("mouseout",v[Pf]=function(){a._dispatchUnfocus(o)}))},this),C.graph.eachEdge(function(v){var _=v.getGraphicEl();_[Cu]&&_.off("mouseover",_[Cu]),_[Pf]&&_.off("mouseout",_[Pf]),v.getModel().get("focusNodeAdjacency")&&(_.on("mouseover",_[Cu]=function(){a._clearTimer(),o.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:v.dataIndex})}),_.on("mouseout",_[Pf]=function(){a._dispatchUnfocus(o)}))});var d="circular"===e.get("layout")&&e.get("circular.rotateLabel"),u=C.getLayout("cx"),f=C.getLayout("cy");C.eachItemGraphicEl(function(v,_){var k=C.getItemModel(_).get("label.rotate")||0,T=v.getSymbolPath();if(d){var M=C.getItemLayout(_),I=Math.atan2(M[1]-f,M[0]-u);I<0&&(I=2*Math.PI+I);var O=M[0]<u;O&&(I-=Math.PI);var R=O?"left":"right";jh(T,{textRotation:-I,textPosition:R,textOrigin:"center"},{textPosition:R})}else jh(T,{textRotation:k*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(e,t){var o=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){o._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:o._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,o,a){var c=e.getData().graph,p=a.edgeDataIndex,y=c.getNodeByIndex(a.dataIndex),w=c.getEdgeByIndex(p);(y||w)&&(c.eachNode(function(C){Aw(C,zp,.1)}),c.eachEdge(function(C){Aw(C,bx,.1)}),y&&(Bf(y,zp),ee(y.edges,function(C){C.dataIndex<0||(Bf(C,bx),Bf(C.node1,zp),Bf(C.node2,zp))})),w&&(Bf(w,bx),Bf(w.node1,zp),Bf(w.node2,zp)))},unfocusNodeAdjacency:function(e,t,o,a){var c=e.getData().graph;c.eachNode(function(h){Aw(h,zp)}),c.eachEdge(function(h){Aw(h,bx)})},_startForceLayoutIteration:function(e,t){var o=this;!function a(){e.step(function(c){o.updateLayout(o._model),(o._layouting=!c)&&(t?o._layoutTimeout=setTimeout(a,16):a())})}()},_updateController:function(e,t,o){var a=this._controller,c=this._controllerHost,h=this.group;a.setPointerChecker(function(p,y,w){var C=h.getBoundingRect();return C.applyTransform(h.transform),C.contain(y,w)&&!dw(p,o,e)}),"view"===e.coordinateSystem.type?(a.enable(e.get("roam")),c.zoomLimit=e.get("scaleLimit"),c.zoom=e.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(p){tT(c,p.dx,p.dy),o.dispatchAction({seriesId:e.id,type:"graphRoam",dx:p.dx,dy:p.dy})}).on("zoom",function(p){cw(c,p.scale,p.originX,p.originY),o.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:p.scale,originX:p.originX,originY:p.originY}),this._updateNodeAndLinkScale(),K0(e.getGraph(),mx(e)),this._lineDraw.updateLayout()},this)):a.disable()},_updateNodeAndLinkScale:function(){var e=this._model,t=e.getData(),o=mx(e),a=[o,o];t.eachItemGraphicEl(function(c,h){c.attr("scale",a)})},updateLayout:function(e){K0(e.getGraph(),mx(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),Xo({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),Xo({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),Xo({type:"graphRoam",event:"graphRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",query:e},function(o){var a=Zl(o.coordinateSystem,e);o.setCenter&&o.setCenter(a.center),o.setZoom&&o.setZoom(a.zoom)})});var Fp=Math.PI,_x=[];function Sx(e,t){var o=e.coordinateSystem;if(!o||"view"===o.type){var a=o.getBoundingRect(),c=e.getData(),h=c.graph,p=a.width/2+a.x,y=a.height/2+a.y,w=Math.min(a.width,a.height)/2,C=c.count();c.setLayout({cx:p,cy:y}),C&&(Vp[t](e,o,h,c,w,p,y,C),h.eachEdge(function(n,i){var s,d=hn(n.getModel().get("lineStyle.curveness"),wc(n,e,i),0),u=no(n.node1.getLayout()),f=no(n.node2.getLayout());+d&&(s=[p*(d*=3)+(u[0]+f[0])/2*(1-d),y*d+(u[1]+f[1])/2*(1-d)]),n.setLayout([u,f,s])}))}}var Vp={value:function(e,t,o,a,c,h,p,y){var w=0,C=a.getSum("value"),n=2*Math.PI/(C||y);o.eachNode(function(i){var s=i.getValue("value"),d=n*(C?s:1)/2;w+=d,i.setLayout([c*Math.cos(w)+h,c*Math.sin(w)+p]),w+=d})},symbolSize:function(e,t,o,a,c,h,p,y){var w=0;_x.length=y;var C=mx(e);o.eachNode(function(s){var d=fx(s);isNaN(d)&&(d=2),d<0&&(d=0),d*=C;var u=Math.asin(d/2/c);isNaN(u)&&(u=Fp/2),_x[s.dataIndex]=u,w+=2*u});var n=(2*Fp-w)/y/2,i=0;o.eachNode(function(s){var d=n+_x[s.dataIndex];i+=d,s.setLayout([c*Math.cos(i)+h,c*Math.sin(i)+p]),i+=d})}},fh=wi;Kt(function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",function(o){var a=o.getCategoriesData(),c=o.getGraph().data,h=a.mapArray(a.getName);c.filterSelf(function(p){var y=c.getItemModel(p).getShallow("category");if(null!=y){"number"==typeof y&&(y=h[y]);for(var w=0;w<t.length;w++)if(!t[w].isSelected(y))return!1}return!0})},this)}),yi(Xl("graph","circle",null)),yi(function(e){var t={};e.eachSeriesByType("graph",function(o){var a=o.getCategoriesData(),c=o.getData(),h={};a.each(function(p){var y=a.getName(p);h["ec-"+y]=p;var w=a.getItemModel(p),C=w.get("itemStyle.color")||o.getColorFromPalette(y,t);a.setItemVisual(p,"color",C);for(var n=["opacity","symbol","symbolSize","symbolKeepAspect"],i=0;i<n.length;i++){var s=w.getShallow(n[i],!0);null!=s&&a.setItemVisual(p,n[i],s)}}),a.count()&&c.each(function(p){var y=c.getItemModel(p).getShallow("category");if(null!=y){"string"==typeof y&&(y=h["ec-"+y]);for(var w=["color","opacity","symbol","symbolSize","symbolKeepAspect"],C=0;C<w.length;C++)null==c.getItemVisual(p,w[C],!0)&&c.setItemVisual(p,w[C],a.getItemVisual(y,w[C]))}})})}),yi(function(e){e.eachSeriesByType("graph",function(t){var o=t.getGraph(),a=t.getEdgeData(),c=zf(t.get("edgeSymbol")),h=zf(t.get("edgeSymbolSize")),p="lineStyle.color".split("."),y="lineStyle.opacity".split(".");a.setVisual("fromSymbol",c&&c[0]),a.setVisual("toSymbol",c&&c[1]),a.setVisual("fromSymbolSize",h&&h[0]),a.setVisual("toSymbolSize",h&&h[1]),a.setVisual("color",t.get(p)),a.setVisual("opacity",t.get(y)),a.each(function(w){var C=a.getItemModel(w),n=o.getEdgeByIndex(w),i=zf(C.getShallow("symbol",!0)),s=zf(C.getShallow("symbolSize",!0)),d=C.get(p),u=C.get(y);switch(d){case"source":d=n.node1.getVisual("color");break;case"target":d=n.node2.getVisual("color")}i[0]&&n.setVisual("fromSymbol",i[0]),i[1]&&n.setVisual("toSymbol",i[1]),s[0]&&n.setVisual("fromSymbolSize",s[0]),s[1]&&n.setVisual("toSymbolSize",s[1]),n.setVisual("color",d),n.setVisual("opacity",u)})})}),Wn(function(e,t){e.eachSeriesByType("graph",function(o){var a=o.get("layout"),c=o.coordinateSystem;if(c&&"view"!==c.type){var h=o.getData(),p=[];ee(c.dimensions,function(s){p=p.concat(h.mapDimension(s,!0))});for(var y=0;y<h.count();y++){for(var w=[],C=!1,n=0;n<p.length;n++){var i=h.get(p[n],y);isNaN(i)||(C=!0),w.push(i)}h.setItemLayout(y,C?c.dataToPoint(w):[NaN,NaN])}Ff(h.graph,o)}else a&&"none"!==a||J0(o)})}),Wn(Xc.VISUAL.POST_CHART_LAYOUT,function(e){e.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&Sx(t,"symbolSize")})}),Wn(function(e){e.eachSeriesByType("graph",function(t){if(!(s=t.coordinateSystem)||"view"===s.type)if("force"===t.get("layout")){var o=t.preservedPoints||{},a=t.getGraph(),c=a.data,h=a.edgeData,p=t.getModel("force"),y=p.get("initLayout");t.preservedPoints?c.each(function(k){var T=c.getId(k);c.setItemLayout(k,o[T]||[NaN,NaN])}):y&&"none"!==y?"circular"===y&&Sx(t,"value"):J0(t);var w=c.getDataExtent("value"),C=h.getDataExtent("value"),n=p.get("repulsion"),i=p.get("edgeLength");nt(n)||(n=[n,n]),nt(i)||(i=[i,i]),i=[i[1],i[0]];var s,d=c.mapArray("value",function(k,T){var M=c.getItemLayout(T),I=Ht(k,w,n);return isNaN(I)&&(I=(n[0]+n[1])/2),{w:I,rep:I,fixed:c.getItemModel(T).get("fixed"),p:!M||isNaN(M[0])||isNaN(M[1])?null:M}}),u=h.mapArray("value",function(k,T){var M=a.getEdgeByIndex(T),I=Ht(k,C,i);isNaN(I)&&(I=(i[0]+i[1])/2);var O=M.getModel(),R=hn(O.get("lineStyle.curveness"),-wc(M,t,T,!0),0);return{n1:d[M.node1.dataIndex],n2:d[M.node2.dataIndex],d:I,curveness:R,ignoreForceLayout:O.get("ignoreForceLayout")}}),f=(s=t.coordinateSystem).getBoundingRect(),v=function(k,T,M){for(var I=M.rect,O=I.width,R=I.height,N=[I.x+O/2,I.y+R/2],z=null==M.gravity?.1:M.gravity,L=0;L<k.length;L++){var V=k[L];V.p||(V.p=on(O*(Math.random()-.5)+N[0],R*(Math.random()-.5)+N[1])),V.pp=no(V.p),V.edges=null}var J=null==M.friction?.6:M.friction,te=J;return{warmUp:function(){te=.8*J},setFixed:function(re){k[re].fixed=!0},setUnfixed:function(re){k[re].fixed=!1},step:function(re){for(var ie=[],he=k.length,fe=0;fe<T.length;fe++){var ye=T[fe];if(!ye.ignoreForceLayout){var Ie=ye.n1;Go(ie,(Be=ye.n2).p,Ie.p);var He=Si(ie)-ye.d,we=Be.w/(Ie.w+Be.w);isNaN(we)&&(we=0),vn(ie,ie),Ie.fixed||fh(Ie.p,Ie.p,ie,we*He*te),Be.fixed||fh(Be.p,Be.p,ie,-(1-we)*He*te)}}for(fe=0;fe<he;fe++)(it=k[fe]).fixed||(Go(ie,N,it.p),fh(it.p,it.p,ie,z*te));for(fe=0;fe<he;fe++){Ie=k[fe];for(var De=fe+1;De<he;De++){var Be;Go(ie,(Be=k[De]).p,Ie.p),0===(He=Si(ie))&&(ao(ie,Math.random()-.5,Math.random()-.5),He=1);var et=(Ie.rep+Be.rep)/He/He;Ie.fixed||fh(Ie.pp,Ie.pp,ie,et),Be.fixed||fh(Be.pp,Be.pp,ie,-et)}}var Ye=[];for(fe=0;fe<he;fe++){var it;(it=k[fe]).fixed||(Go(Ye,it.p,it.pp),fh(it.p,it.p,Ye,te),Sn(it.pp,it.p))}te*=.992,re&&re(k,T,te<.01)}}}(d,u,{rect:f,gravity:p.get("gravity"),friction:p.get("friction")}),_=v.step;v.step=function(k){for(var T=0,M=d.length;T<M;T++)d[T].fixed&&Sn(d[T].p,a.getNodeByIndex(T).getLayout());_(function(I,O,R){for(var N=0,z=I.length;N<z;N++)I[N].fixed||a.getNodeByIndex(N).setLayout(I[N].p),o[c.getId(N)]=I[N].p;for(N=0,z=O.length;N<z;N++){var L=O[N],V=a.getEdgeByIndex(N),J=L.n1.p,te=L.n2.p,re=V.getLayout();(re=re?re.slice():[])[0]=re[0]||[],re[1]=re[1]||[],Sn(re[0],J),Sn(re[1],te),+L.curveness&&(re[2]=[(J[0]+te[0])/2-(J[1]-te[1])*L.curveness,(J[1]+te[1])/2-(te[0]-J[0])*L.curveness]),V.setLayout(re)}k&&k(R)})},t.forceLayout=v,t.preservedPoints=o,v.step()}else t.forceLayout=null})}),tk("graphView",{create:function(e,t){var o=[];return e.eachSeriesByType("graph",function(a){var v,_,k,c=a.get("coordinateSystem");if(!c||"view"===c){var h=a.getData(),p=[],y=[];eb(h.mapArray(function(f){var v=h.getItemModel(f);return[+v.get("x"),+v.get("y")]}),p,y),y[0]-p[0]==0&&(y[0]+=1,p[0]-=1),y[1]-p[1]==0&&(y[1]+=1,p[1]-=1);var w=(y[0]-p[0])/(y[1]-p[1]),C=(v=t,_=w,(k=a.getBoxLayoutParams()).aspect=_,Xa(k,{width:v.getWidth(),height:v.getHeight()}));isNaN(w)&&(p=[C.x,C.y],y=[C.x+C.width,C.y+C.height]);var n=y[0]-p[0],i=y[1]-p[1],s=C.width,d=C.height,u=a.coordinateSystem=new xf;u.zoomLimit=a.get("scaleLimit"),u.setBoundingRect(p[0],p[1],n,i),u.setViewRect(C.x,C.y,s,d),u.setCenter(a.get("center")),u.setZoom(a.get("zoom")),o.push(u)}}),o}}),Yr.extend({type:"series.gauge",getInitialData:function(e,t){return R0(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var Cx=Mo.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(e,t){var o=Math.cos,a=Math.sin,c=t.r,h=t.width,p=t.angle,y=t.x-o(p)*h*(c/3<=h?1:2),w=t.y-a(p)*h*(c/3<=h?1:2);p=t.angle-Math.PI/2,e.moveTo(y,w),e.lineTo(t.x+o(p)*h,t.y+a(p)*h),e.lineTo(t.x+o(t.angle)*c,t.y+a(t.angle)*c),e.lineTo(t.x-o(p)*h,t.y-a(p)*h),e.lineTo(y,w)}});function Iw(e,t){return t&&("string"==typeof t?e=t.replace("{value}",e??""):"function"==typeof t&&(e=t(e))),e}var U2=2*Math.PI,yT=(Za.extend({type:"gauge",render:function(e,t,o){this.group.removeAll();var a=e.get("axisLine.lineStyle.color"),c=function(h,p){var y=h.get("center"),w=p.getWidth(),C=p.getHeight(),n=Math.min(w,C);return{cx:rn(y[0],p.getWidth()),cy:rn(y[1],p.getHeight()),r:rn(h.get("radius"),n/2)}}(e,o);this._renderMain(e,t,o,a,c)},dispose:function(){},_renderMain:function(e,t,o,a,c){for(var h=this.group,p=e.getModel("axisLine"),y=p.getModel("lineStyle"),w=e.get("clockwise"),C=-e.get("startAngle")/180*Math.PI,n=((f=-e.get("endAngle")/180*Math.PI)-C)%U2,i=C,s=y.get("width"),d=p.get("show"),u=0;d&&u<a.length;u++){var f,v=Math.min(Math.max(a[u][0],0),1),_=new uc({shape:{startAngle:i,endAngle:f=C+n*v,cx:c.cx,cy:c.cy,clockwise:w,r0:c.r-s,r:c.r},silent:!0});_.setStyle({fill:a[u][1]}),_.setStyle(y.getLineStyle(["color","borderWidth","borderColor"])),h.add(_),i=f}function k(M){if(M<=0)return a[0][1];for(var I=0;I<a.length;I++)if(a[I][0]>=M&&(0===I?0:a[I-1][0])<M)return a[I][1];return a[I-1][1]}if(!w){var T=C;C=f,f=T}this._renderTicks(e,t,o,k,c,C,f,w),this._renderPointer(e,t,o,k,c,C,f,w),this._renderTitle(e,t,o,k,c),this._renderDetail(e,t,o,k,c)},_renderTicks:function(e,t,o,a,c,h,p,y){for(var w=this.group,C=c.cx,n=c.cy,i=c.r,s=+e.get("min"),d=+e.get("max"),u=e.getModel("splitLine"),f=e.getModel("axisTick"),v=e.getModel("axisLabel"),_=e.get("splitNumber"),k=f.get("splitNumber"),T=rn(u.get("length"),i),M=rn(f.get("length"),i),I=h,O=(p-h)/_,R=O/k,N=u.getModel("lineStyle").getLineStyle(),z=f.getModel("lineStyle").getLineStyle(),L=0;L<=_;L++){var V=Math.cos(I),J=Math.sin(I);if(u.get("show")){var te=new Ya({shape:{x1:V*i+C,y1:J*i+n,x2:V*(i-T)+C,y2:J*(i-T)+n},style:N,silent:!0});"auto"===N.stroke&&te.setStyle({stroke:a(L/_)}),w.add(te)}if(v.get("show")){var re=Iw(Ea(L/_*(d-s)+s),v.get("formatter")),ie=v.get("distance"),he=a(L/_);w.add(new Yo({style:Fi({},v,{text:re,x:V*(i-T-ie)+C,y:J*(i-T-ie)+n,textVerticalAlign:J<-.4?"top":.4<J?"bottom":"middle",textAlign:V<-.4?"left":.4<V?"right":"center"},{autoColor:he}),silent:!0}))}if(f.get("show")&&L!==_){for(var fe=0;fe<=k;fe++){V=Math.cos(I),J=Math.sin(I);var ye=new Ya({shape:{x1:V*i+C,y1:J*i+n,x2:V*(i-M)+C,y2:J*(i-M)+n},silent:!0,style:z});"auto"===z.stroke&&ye.setStyle({stroke:a((L+fe/k)/_)}),w.add(ye),I+=R}I-=R}else I+=O}},_renderPointer:function(e,t,o,a,c,h,p,y){var w=this.group,C=this._data;if(e.get("pointer.show")){var n=[+e.get("min"),+e.get("max")],i=[h,p],s=e.getData(),d=s.mapDimension("value");s.diff(C).add(function(u){var f=new Cx({shape:{angle:h}});Fs(f,{shape:{angle:Ht(s.get(d,u),n,i,!0)}},e),w.add(f),s.setItemGraphicEl(u,f)}).update(function(u,f){var v=C.getItemGraphicEl(f);Eo(v,{shape:{angle:Ht(s.get(d,u),n,i,!0)}},e),w.add(v),s.setItemGraphicEl(u,v)}).remove(function(u){var f=C.getItemGraphicEl(u);w.remove(f)}).execute(),s.eachItemGraphicEl(function(u,f){var v=s.getItemModel(f),_=v.getModel("pointer");u.setShape({x:c.cx,y:c.cy,width:rn(_.get("width"),c.r),r:rn(_.get("length"),c.r)}),u.useStyle(v.getModel("itemStyle").getItemStyle()),"auto"===u.style.fill&&u.setStyle("fill",a(Ht(s.get(d,f),n,[0,1],!0))),qr(u,v.getModel("emphasis.itemStyle").getItemStyle())}),this._data=s}else C&&C.eachItemGraphicEl(function(u){w.remove(u)})},_renderTitle:function(e,t,o,a,c){var h=e.getData(),p=h.mapDimension("value"),y=e.getModel("title");if(y.get("show")){var w=y.get("offsetCenter"),C=c.cx+rn(w[0],c.r),n=c.cy+rn(w[1],c.r),i=+e.get("min"),s=+e.get("max"),d=a(Ht(e.getData().get(p,0),[i,s],[0,1],!0));this.group.add(new Yo({silent:!0,style:Fi({},y,{x:C,y:n,text:h.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:d,forceRich:!0})}))}},_renderDetail:function(e,t,o,a,c){var h=e.getModel("detail"),p=+e.get("min"),y=+e.get("max");if(h.get("show")){var w=h.get("offsetCenter"),C=c.cx+rn(w[0],c.r),n=c.cy+rn(w[1],c.r),i=rn(h.get("width"),c.r),s=rn(h.get("height"),c.r),d=e.getData(),u=d.get(d.mapDimension("value"),0),f=a(Ht(u,[p,y],[0,1],!0));this.group.add(new Yo({silent:!0,style:Fi({},h,{x:C,y:n,text:Iw(u,h.get("formatter")),textWidth:isNaN(i)?null:i,textHeight:isNaN(s)?null:s,textAlign:"center",textVerticalAlign:"middle"},{autoColor:f,forceRich:!0})}))}}}),Zm({type:"series.funnel",init:function(e){yT.superApply(this,"init",arguments),this.legendVisualProvider=new L0(rt(this.getData,this),rt(this.getRawData,this)),this._defaultLabelLine(e)},getInitialData:function(e,t){return R0(this,{coordDimensions:["value"],encodeDefaulter:wt(yb,this)})},_defaultLabelLine:function(e){Fl(e,"labelLine",["show"]);var t=e.labelLine,o=e.emphasis.labelLine;t.show=t.show&&e.label.show,o.show=o.show&&e.emphasis.label.show},getDataParams:function(e){var t=this.getData(),o=yT.superCall(this,"getDataParams",e),a=t.mapDimension("value"),c=t.getSum(a);return o.percent=c?+(t.get(a,e)/c*100).toFixed(2):0,o.$vars.push("percent"),o},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function Dw(e,t){pn.call(this);var o=new pl,a=new Zi,c=new Yo;this.add(o),this.add(a),this.add(c),this.highDownOnUpdate=function(h,p){"emphasis"===p?(a.ignore=a.hoverIgnore,c.ignore=c.hoverIgnore):(a.ignore=a.normalIgnore,c.ignore=c.normalIgnore)},this.updateData(e,t,!0)}var BO=Dw.prototype,bT=["itemStyle","opacity"];function Va(e,t,o,a,c){bi.call(this,e,t,o),this.type=a||"value",this.axisIndex=c}function vh(e,t,o,a,c,h){e=e||0;var p=o[1]-o[0];if(null!=c&&(c=Vf(c,[0,p])),null!=h&&(h=Math.max(h,c??0)),"all"===a){var y=Math.abs(t[1]-t[0]);c=h=Vf(y=Vf(y,[0,p]),[c,h]),a=0}t[0]=Vf(t[0],o),t[1]=Vf(t[1],o);var w=Hp(t,a);t[a]+=e;var C=c||0,n=o.slice();w.sign<0?n[0]+=C:n[1]-=C,t[a]=Vf(t[a],n);var i=Hp(t,a);return null!=c&&(i.sign!==w.sign||i.span<c)&&(t[1-a]=t[a]+w.sign*c),i=Hp(t,a),null!=h&&i.span>h&&(t[1-a]=t[a]+i.sign*h),t}function Hp(e,t){var o=e[t]-e[1-t];return{span:Math.abs(o),sign:0<o?-1:o<0?1:t?-1:1}}function Vf(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}BO.updateData=function(e,t,o){var a=this.childAt(0),c=e.hostModel,h=e.getItemModel(t),p=e.getItemLayout(t),y=e.getItemModel(t).get(bT);y=y??1,a.useStyle({}),o?(a.setShape({points:p.points}),a.setStyle({opacity:0}),Fs(a,{style:{opacity:y}},c,t)):Eo(a,{style:{opacity:y},shape:{points:p.points}},c,t);var w=h.getModel("itemStyle"),C=e.getItemVisual(t,"color");a.setStyle(_e({lineJoin:"round",fill:C},w.getItemStyle(["opacity"]))),a.hoverStyle=w.getModel("emphasis").getItemStyle(),this._updateLabel(e,t),qr(this)},BO._updateLabel=function(e,t){var o=this.childAt(1),a=this.childAt(2),c=e.hostModel,h=e.getItemModel(t),p=e.getItemLayout(t).label,y=e.getItemVisual(t,"color");Eo(o,{shape:{points:p.linePoints||p.linePoints}},c,t),Eo(a,{style:{x:p.x,y:p.y}},c,t),a.attr({rotation:p.rotation,origin:[p.x,p.y],z2:10});var w=h.getModel("label"),C=h.getModel("emphasis.label"),n=h.getModel("labelLine"),i=h.getModel("emphasis.labelLine");y=e.getItemVisual(t,"color"),ei(a.style,a.hoverStyle={},w,C,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:y,useInsideStyle:!!p.inside},{textAlign:p.textAlign,textVerticalAlign:p.verticalAlign}),a.ignore=a.normalIgnore=!w.get("show"),a.hoverIgnore=!C.get("show"),o.ignore=o.normalIgnore=!n.get("show"),o.hoverIgnore=!i.get("show"),o.setStyle({stroke:y}),o.setStyle(n.getModel("lineStyle").getLineStyle()),o.hoverStyle=i.getModel("lineStyle").getLineStyle()},ve(Dw,pn),Za.extend({type:"funnel",render:function(e,t,o){var a=e.getData(),c=this._data,h=this.group;a.diff(c).add(function(p){var y=new Dw(a,p);a.setItemGraphicEl(p,y),h.add(y)}).update(function(p,y){var w=c.getItemGraphicEl(y);w.updateData(a,p),h.add(w),a.setItemGraphicEl(p,w)}).remove(function(p){var y=c.getItemGraphicEl(p);h.remove(y)}).execute(),this._data=a},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),yi(As("funnel")),Wn(function(e,t,o){e.eachSeriesByType("funnel",function(a){var ie,c=a.getData(),h=c.mapDimension("value"),p=a.get("sort"),y=(ie=t,Xa(a.getBoxLayoutParams(),{width:ie.getWidth(),height:ie.getHeight()})),w=function(re,ie){for(var he=re.mapDimension("value"),fe=re.mapArray(he,function(De){return De}),ye=[],Ie="ascending"===ie,He=0,we=re.count();He<we;He++)ye[He]=He;return"function"==typeof ie?ye.sort(ie):"none"!==ie&&ye.sort(function(De,Be){return Ie?fe[De]-fe[Be]:fe[Be]-fe[De]}),ye}(c,p),C=a.get("orient"),n=y.width,i=y.height,s=y.x,d=y.y,u="horizontal"===C?[rn(a.get("minSize"),i),rn(a.get("maxSize"),i)]:[rn(a.get("minSize"),n),rn(a.get("maxSize"),n)],f=c.getDataExtent(h),v=a.get("min"),_=a.get("max");function k(re,ie){if("horizontal"===C){var he,fe=Ht(c.get(h,re)||0,[v,_],u,!0);switch(T){case"top":he=d;break;case"center":he=d+(i-fe)/2;break;case"bottom":he=d+(i-fe)}return[[ie,he],[ie,he+fe]]}var ye,Ie=Ht(c.get(h,re)||0,[v,_],u,!0);switch(T){case"left":ye=s;break;case"center":ye=s+(n-Ie)/2;break;case"right":ye=s+n-Ie}return[[ye,ie],[ye+Ie,ie]]}null==v&&(v=Math.min(f[0],0)),null==_&&(_=f[1]);var re,T=a.get("funnelAlign"),M=a.get("gap"),I=(("horizontal"===C?n:i)-M*(c.count()-1))/c.count();"ascending"===p&&(I=-I,M=-M,"horizontal"===C?s+=n:d+=i,w=w.reverse());for(var O=0;O<w.length;O++){var R=w[O],N=w[O+1],z=c.getItemModel(R);if("horizontal"===C){var L=z.get("itemStyle.width");null==L?L=I:(L=rn(L,n),"ascending"===p&&(L=-L));var V=k(R,s),J=k(N,s+L);s+=L+M,c.setItemLayout(R,{points:V.concat(J.slice().reverse())})}else{var te=z.get("itemStyle.height");null==te?te=I:(te=rn(te,i),"ascending"===p&&(te=-te)),V=k(R,"horizontal"===C?s:d),J=k(N,"horizontal"===C?s+L:d+te),d+=te+M,c.setItemLayout(R,{points:V.concat(J.slice().reverse())})}}(re=c).each(function(ie){var he,fe,ye,Ie,He=re.getItemModel(ie),we=He.getModel("label").get("position"),De=He.get("orient"),Be=He.getModel("labelLine"),et=re.getItemLayout(ie),Ye=et.points,it="inner"===we||"inside"===we||"center"===we||"insideLeft"===we||"insideRight"===we;if(it)he="insideLeft"===we?(fe=(Ye[0][0]+Ye[3][0])/2+5,ye=(Ye[0][1]+Ye[3][1])/2,"left"):"insideRight"===we?(fe=(Ye[1][0]+Ye[2][0])/2-5,ye=(Ye[1][1]+Ye[2][1])/2,"right"):(fe=(Ye[0][0]+Ye[1][0]+Ye[2][0]+Ye[3][0])/4,ye=(Ye[0][1]+Ye[1][1]+Ye[2][1]+Ye[3][1])/4,"center"),Ie=[[fe,ye],[fe,ye]];else{var yt,It,qt,Xt,Dt=Be.get("length");he="left"===we?(It=(Ye[3][1]+Ye[0][1])/2,fe=(qt=(yt=(Ye[3][0]+Ye[0][0])/2)-Dt)-5,"right"):"right"===we?(It=(Ye[1][1]+Ye[2][1])/2,fe=(qt=(yt=(Ye[1][0]+Ye[2][0])/2)+Dt)+5,"left"):"top"===we?(yt=(Ye[3][0]+Ye[0][0])/2,ye=(Xt=(It=(Ye[3][1]+Ye[0][1])/2)-Dt)-5,"center"):"bottom"===we?(yt=(Ye[1][0]+Ye[2][0])/2,ye=(Xt=(It=(Ye[1][1]+Ye[2][1])/2)+Dt)+5,"center"):"rightTop"===we?(yt="horizontal"===De?Ye[3][0]:Ye[1][0],It="horizontal"===De?Ye[3][1]:Ye[1][1],"horizontal"===De?(ye=(Xt=It-Dt)-5,"center"):(fe=(qt=yt+Dt)+5,"top")):"rightBottom"===we?(yt=Ye[2][0],It=Ye[2][1],"horizontal"===De?(ye=(Xt=It+Dt)+5,"center"):(fe=(qt=yt+Dt)+5,"bottom")):"leftTop"===we?(yt=Ye[0][0],It="horizontal"===De?Ye[0][1]:Ye[1][1],"horizontal"===De?(ye=(Xt=It-Dt)-5,"center"):(fe=(qt=yt-Dt)-5,"right")):"leftBottom"===we?(yt="horizontal"===De?Ye[1][0]:Ye[3][0],It="horizontal"===De?Ye[1][1]:Ye[2][1],"horizontal"===De?(ye=(Xt=It+Dt)+5,"center"):(fe=(qt=yt-Dt)-5,"right")):(yt=(Ye[1][0]+Ye[2][0])/2,It=(Ye[1][1]+Ye[2][1])/2,"horizontal"===De?(ye=(Xt=It+Dt)+5,"center"):(fe=(qt=yt+Dt)+5,"left")),"horizontal"===De?fe=qt=yt:ye=Xt=It,Ie=[[yt,It],[qt,Xt]]}et.label={linePoints:Ie,x:fe,y:ye,verticalAlign:"middle",textAlign:he,inside:it}})})}),Kt(zd("funnel")),Va.prototype={constructor:Va,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},ve(Va,bi);var Ha=ee,Hf=Math.min,G2=Math.max,kx=Math.floor,cd=Math.ceil,Wf=Ea,xT=Math.PI;function _T(e,t,o){this._axesMap=ft(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,o)}function wT(e,t){return Hf(G2(e,t[0]),t[1])}_T.prototype={type:"parallel",constructor:_T,_init:function(e,t,o){var c=e.parallelAxisIndex;Ha(e.dimensions,function(h,p){var y=c[p],w=t.getComponent("parallelAxis",y),C=this._axesMap.set(h,new Va(h,Fb(w),[0,0],w.get("type"),y));C.onBand="category"===C.type&&w.get("boundaryGap"),C.inverse=w.get("inverse"),(w.axis=C).model=w,C.coordinateSystem=w.coordinateSystem=this},this)},update:function(e,t){this._updateAxesFromSeries(this._model,e)},containPoint:function(e){var t=this._makeLayoutInfo(),o=t.axisBase,a=t.layoutBase,c=t.pixelDimIndex,h=e[1-c],p=e[c];return o<=h&&h<=o+t.axisLength&&a<=p&&p<=a+t.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(e,t){t.eachSeries(function(o){if(e.contains(o,t)){var a=o.getData();Ha(this.dimensions,function(c){var h=this._axesMap.get(c);h.scale.unionExtentFromData(a,a.mapDimension(c)),of(h.scale,h.model)},this)}},this)},resize:function(e,t){this._rect=Xa(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var e,t=this._model,o=this._rect,a=["x","y"],c=["width","height"],h=t.get("layout"),p="horizontal"===h?0:1,y=o[c[p]],w=[0,y],C=this.dimensions.length,n=wT(t.get("axisExpandWidth"),w),i=wT(t.get("axisExpandCount")||0,[0,C]),s=t.get("axisExpandable")&&3<C&&i<C&&1<i&&0<n&&0<y,d=t.get("axisExpandWindow");d?(e=wT(d[1]-d[0],w),d[1]=d[0]+e):(e=wT(n*(i-1),w),(d=[n*(t.get("axisExpandCenter")||kx(C/2))-e/2])[1]=d[0]+e);var u=(y-e)/(C-i);u<3&&(u=0);var f=[kx(Wf(d[0]/n,1))+1,cd(Wf(d[1]/n,1))-1];return{layout:h,pixelDimIndex:p,layoutBase:o[a[p]],layoutLength:y,axisBase:o[a[1-p]],axisLength:o[c[1-p]],axisExpandable:s,axisExpandWidth:n,axisCollapseWidth:u,axisExpandWindow:d,axisCount:C,winInnerIndices:f,axisExpandWindow0Pos:u/n*d[0]}},_layoutAxes:function(){var e=this._rect,t=this._axesMap,o=this.dimensions,a=this._makeLayoutInfo(),c=a.layout;t.each(function(h){var p=[0,a.axisLength],y=h.inverse?1:0;h.setExtent(p[y],p[1-y])}),Ha(o,function(h,p){var y=(a.axisExpandable?function(d,u){var f,v,k=u.axisExpandWidth,M=u.axisCollapseWidth,I=u.winInnerIndices,O=M,R=!1;return d<I[0]?(f=d*M,v=M):d<=I[1]?(f=u.axisExpandWindow0Pos+d*k-u.axisExpandWindow[0],O=k,R=!0):(f=u.layoutLength-(u.axisCount-1-d)*M,v=M),{position:f,axisNameAvailableWidth:O,axisLabelShow:R,nameTruncateMaxWidth:v}}:function(d,u){var f=u.layoutLength/(u.axisCount-1);return{position:f*d,axisNameAvailableWidth:f,axisLabelShow:!0}})(p,a),w={horizontal:{x:y.position,y:a.axisLength},vertical:{x:0,y:y.position}},n=[w[c].x+e.x,w[c].y+e.y],i={horizontal:xT/2,vertical:0}[c],s=Ii();Rc(s,s,i),zr(s,s,n),this._axesLayout[h]={position:n,rotation:i,transform:s,axisNameAvailableWidth:y.axisNameAvailableWidth,axisLabelShow:y.axisLabelShow,nameTruncateMaxWidth:y.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(e){return this._axesMap.get(e)},dataToPoint:function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},eachActiveState:function(e,t,o,a){null==o&&(o=0),null==a&&(a=e.count());var c=this._axesMap,h=this.dimensions,p=[],y=[];ee(h,function(u){p.push(e.mapDimension(u)),y.push(c.get(u).model)});for(var w=this.hasAxisBrushed(),C=o;C<a;C++){var n;if(w){n="active";for(var i=e.getValues(p,C),s=0,d=h.length;s<d;s++)if("inactive"===y[s].getActiveState(i[s])){n="inactive";break}}else n="normal";t(n,C)}},hasAxisBrushed:function(){for(var e=this.dimensions,t=this._axesMap,o=!1,a=0,c=e.length;a<c;a++)"normal"!==t.get(e[a]).model.getActiveState()&&(o=!0);return o},axisCoordToPoint:function(e,t){return vi([e,0],this._axesLayout[t].transform)},getAxisLayout:function(e){return K(this._axesLayout[e])},getSlidedAxisExpandWindow:function(e){var t=this._makeLayoutInfo(),o=t.pixelDimIndex,a=t.axisExpandWindow.slice(),c=a[1]-a[0],h=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:a};var p,y=e[o]-t.layoutBase-t.axisExpandWindow0Pos,w="slide",C=t.axisCollapseWidth,n=this._model.get("axisExpandSlideTriggerArea"),i=null!=n[0];return C?(i&&C&&y<c*n[0]?(w="jump",p=y-c*n[2]):i&&C&&y>c*(1-n[0])?(w="jump",p=y-c*(1-n[2])):0<=(p=y-c*n[1])&&(p=y-c*(1-n[1]))<=0&&(p=0),(p*=t.axisExpandWidth/C)?vh(p,a,h,"all"):w="none"):((a=[G2(0,h[1]*y/(c=a[1]-a[0])-c/2)])[1]=Hf(h[1],a[0]+c),a[0]=a[1]-c),{axisExpandWindow:a,behavior:w}}},yl.register("parallel",{create:function(e,t){var o=[];return e.eachComponent("parallel",function(a,c){var h=new _T(a,e,t);h.name="parallel_"+c,h.resize(a,t),(a.coordinateSystem=h).model=a,o.push(h)}),e.eachSeries(function(a){if("parallel"===a.get("coordinateSystem")){var c=e.queryComponents({mainType:"parallel",index:a.get("parallelIndex"),id:a.get("parallelId")})[0];a.coordinateSystem=c.coordinateSystem}}),o}});var Ow=wo.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return ym([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(e){var t=this.activeIntervals=K(e);if(t)for(var o=t.length-1;0<=o;o--)Om(t[o])},getActiveState:function(e){var t=this.activeIntervals;if(!t.length)return"normal";if(null==e||isNaN(e))return"inactive";if(1===t.length){var o=t[0];if(o[0]<=e&&e<=o[1])return"active"}else for(var a=0,c=t.length;a<c;a++)if(t[a][0]<=e&&e<=t[a][1])return"active";return"inactive"}});le(Ow.prototype,rf),yu("parallel",Ow,function(e,t){return t.type||(t.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),wo.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){wo.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(e){e&&le(this.option,e,!0),this._initDimensions()},contains:function(e,t){var o=e.get("parallelIndex");return null!=o&&t.getComponent("parallel",o)===this},setAxisExpand:function(e){ee(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(t){e.hasOwnProperty(t)&&(this.option[t]=e[t])},this)},_initDimensions:function(){var e=this.dimensions=[],t=this.parallelAxisIndex=[];ee(We(this.dependentModels.parallelAxis,function(o){return(o.get("parallelIndex")||0)===this.componentIndex},this),function(o){e.push("dim"+o.get("dim")),t.push(o.componentIndex)})}}),Xo({type:"axisAreaSelect",event:"axisAreaSelected"},function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(o){o.axis.model.setActiveIntervals(e.intervals)})}),Xo("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(o){o.setAxisExpand(e)})});var yh=wt,bh=ee,yg=Se,Uf=Math.min,bg=Math.max,ST=Math.pow,zO=1e4,CT=6,j2=6,q2="globalPan",FO={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},VO={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},$2={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},kT=0;function Wp(e){si.call(this),this._zr=e,this.group=new pn,this._track=[],this._covers=[],this._uid="brushController_"+kT++,this._handlers={},bh(jf,function(t,o){this._handlers[o]=rt(t,this)},this)}function TT(e,t){var o=Hd[t.brushType].createCover(e,t);return o.__brushOption=t,Y2(o,t),e.group.add(o),o}function Tx(e,t){var o=ku(t);return o.endCreating&&(o.endCreating(e,t),Y2(t,t.__brushOption)),t}function MT(e,t){var o=t.__brushOption;ku(t).updateCoverShape(e,t,o.range,o)}function Y2(e,t){var o=t.z;null==o&&(o=zO),e.traverse(function(a){a.z=o,a.z2=o})}function Q0(e,t){ku(t).updateCommon(e,t),MT(e,t)}function ku(e){return Hd[e.__brushOption.brushType]}function Gf(e,t,o){var a,c=e._panels;if(!c)return!0;var h=e._transform;return bh(c,function(p){p.isTargetByCursor(t,o,h)&&(a=p)}),a}function Ew(e,t){var o=e._panels;if(!o)return!0;var a=t.__brushOption.panelId;return null==a||o[a]}function Nw(e){var t=e._covers,o=t.length;return bh(t,function(a){e.group.remove(a)},e),t.length=0,!!o}function ey(e,t){var o=yg(e._covers,function(a){var c=a.__brushOption,h=K(c.range);return{brushType:c.brushType,panelId:c.panelId,range:h}});e.trigger("brush",o,{isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function Mx(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function Rw(e,t,o,a){var c=new pn;return c.add(new sr({name:"main",style:Bw(o),silent:!0,draggable:!0,cursor:"move",drift:yh(e,t,c,"nswe"),ondragend:yh(ey,t,{isEnd:!0})})),bh(a,function(h){c.add(new sr({name:h,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:yh(e,t,c,h),ondragend:yh(ey,t,{isEnd:!0})}))}),c}function Lw(e,t,o,a){var c=a.brushStyle.lineWidth||0,h=bg(c,j2),p=o[0][0],y=o[1][0],w=p-c/2,C=y-c/2,n=o[0][1],i=o[1][1],s=n-h+c/2,d=i-h+c/2,u=n-p,f=i-y,v=u+c,_=f+c;Qa(e,t,"main",p,y,u,f),a.transformable&&(Qa(e,t,"w",w,C,h,_),Qa(e,t,"e",s,C,h,_),Qa(e,t,"n",w,C,v,h),Qa(e,t,"s",w,d,v,h),Qa(e,t,"nw",w,C,h,h),Qa(e,t,"ne",s,C,h,h),Qa(e,t,"sw",w,d,h,h),Qa(e,t,"se",s,d,h,h))}function Pw(e,t){var o=t.__brushOption,a=o.transformable,c=t.childAt(0);c.useStyle(Bw(o)),c.attr({silent:!a,cursor:a?"move":"default"}),bh(["w","e","n","s","se","sw","ne","nw"],function(h){var p=t.childOfName(h),y=function w(C,n){return 1<n.length?("e"!==(d=[w(C,(n=n.split(""))[0]),w(C,n[1])])[0]&&"w"!==d[0]||d.reverse(),d.join("")):{left:"w",right:"e",top:"n",bottom:"s"}[d=fl({w:"left",e:"right",n:"top",s:"bottom"}[n],qh(C.group))];var d}(e,h);p&&p.attr({silent:!a,invisible:!a,cursor:a?VO[y]+"-resize":null})})}function Qa(e,t,o,a,c,h,p){var w,C,n,y=t.childOfName(o);y&&y.setShape((w=IT(e,t,[[a,c],[a+h,c+p]]),{x:C=Uf(w[0][0],w[1][0]),y:n=Uf(w[0][1],w[1][1]),width:bg(w[0][0],w[1][0])-C,height:bg(w[0][1],w[1][1])-n}))}function Bw(e){return _e({strokeNoScale:!0},e.brushStyle)}function X2(e,t,o,a){var c=[Uf(e,o),Uf(t,a)],h=[bg(e,o),bg(t,a)];return[[c[0],h[0]],[c[1],h[1]]]}function Z2(e,t,o,a,c,h,p,y){var w=a.__brushOption,C=e(w.range),n=AT(o,h,p);bh(c.split(""),function(i){var s=FO[i];C[s[0]][s[1]]+=n[s[0]]}),w.range=t(X2(C[0][0],C[1][0],C[0][1],C[1][1])),Q0(o,a),ey(o,{isEnd:!1})}function HO(e,t,o,a,c){var h=t.__brushOption.range,p=AT(e,o,a);bh(h,function(y){y[0]+=p[0],y[1]+=p[1]}),Q0(e,t),ey(e,{isEnd:!1})}function AT(e,t,o){var a=e.group,c=a.transformCoordToLocal(t,o),h=a.transformCoordToLocal(0,0);return[c[0]-h[0],c[1]-h[1]]}function IT(e,t,o){var a=Ew(e,t);return a&&!0!==a?a.clipPath(o,e._transform):K(o)}function Zr(e){var t=e.event;t.preventDefault&&t.preventDefault()}function Ax(e,t,o){return e.childOfName("main").contain(t,o)}function K2(e,t,o,a){var c,h=e._creatingCover,p=e._creatingPanel,y=e._brushOption;if(e._track.push(o.slice()),function(n){var i=n._track;if(!i.length)return!1;var s=i[i.length-1],d=i[0],u=s[0]-d[0],f=s[1]-d[1],v=ST(u*u+f*f,.5);return CT<v}(e)||h){if(p&&!h){"single"===y.brushMode&&Nw(e);var w=K(y);w.brushType=DT(w.brushType,p),w.panelId=!0===p?null:p.panelId,h=e._creatingCover=TT(e,w),e._covers.push(h)}if(h){var C=Hd[DT(e._brushType,p)];h.__brushOption.range=C.getCreatingRange(IT(e,h,e._track)),a&&(Tx(e,h),C.updateCommon(e,h)),MT(e,h),c={isEnd:a}}}else a&&"single"===y.brushMode&&y.removeOnClick&&Gf(e,t,o)&&Nw(e)&&(c={isEnd:a,removeOnClick:!0});return c}function DT(e,t){return"auto"===e?t.defaultBrushType:e}Wp.prototype={constructor:Wp,enableBrush:function(e){return this._brushType&&function(t){var o=t._zr;(function(a,c,h){var p=Jk(a);p[c]===h&&(p[c]=null)})(o,q2,t._uid),function(a,c){bh(c,function(h,p){a.off(p,h)})}(o,t._handlers),t._brushType=t._brushOption=null}(this),e.brushType&&function(t,o){var a=t._zr;t._enableGlobalPan||function(c,h,p){Jk(c)[h]=p}(a,q2,t._uid),function(c,h){bh(h,function(p,y){c.on(y,p)})}(a,t._handlers),t._brushType=o.brushType,t._brushOption=le(K($2),o,!0)}(this,e),this},setPanels:function(e){if(e&&e.length){var t=this._panels={};ee(e,function(o){t[o.panelId]=K(o)})}else this._panels=null;return this},mount:function(e){this._enableGlobalPan=(e=e||{}).enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({position:e.position||[0,0],rotation:e.rotation||0,scale:e.scale||[1,1]}),this._transform=t.getLocalTransform(),this},eachCover:function(e,t){bh(this._covers,e,t)},updateCovers:function(e){e=Se(e,function(w){return le(K($2),w,!0)});var t="\0-brush-index-",o=this._covers,a=this._covers=[],c=this,h=this._creatingCover;return new za(o,e,function(w,C){return p(w.__brushOption,C)},p).add(y).update(y).remove(function(w){o[w]!==h&&c.group.remove(o[w])}).execute(),this;function p(w,C){return(null!=w.id?w.id:t+C)+"-"+w.brushType}function y(w,C){var n=e[w];if(null!=C&&o[C]===h)a[w]=o[C];else{var i=a[w]=null!=C?(o[C].__brushOption=n,o[C]):Tx(c,TT(c,n));Q0(c,i)}}},unmount:function(){return this.enableBrush(!1),Nw(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},Me(Wp,si);var jf={mousedown:function(e){if(this._dragging)dd(this,e);else if(!e.target||!e.target.draggable){Zr(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=Gf(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var a=this.group.transformCoordToLocal(e.offsetX,e.offsetY);if(function(h,p,y){if(h._brushType&&(v=h._zr,!((u=p)<0||u>v.getWidth()||undefined>v.getHeight()))){var w=h._zr,C=h._covers,n=Gf(h,p,y);if(!h._dragging)for(var i=0;i<C.length;i++){var s=C[i].__brushOption;if(n&&(!0===n||s.panelId===n.panelId)&&Hd[s.brushType].contain(C[i],y[0],y[1]))return}n&&w.setCursorStyle("crosshair")}var u,v}(this,e,a),this._dragging){Zr(e);var c=K2(this,e,a,!1);c&&ey(this,c)}},mouseup:function(e){dd(this,e)}};function dd(e,t){if(e._dragging){Zr(t);var c=e.group.transformCoordToLocal(t.offsetX,t.offsetY),h=K2(e,t,c,!0);e._dragging=!1,e._track=[],e._creatingCover=null,h&&ey(e,h)}}var Hd={lineX:OT(0),lineY:OT(1),rect:{createCover:function(e,t){return Rw(yh(Z2,function(o){return o},function(o){return o}),e,t,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(e){var t=Mx(e);return X2(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,o,a){Lw(e,t,o,a)},updateCommon:Pw,contain:Ax},polygon:{createCover:function(e,t){var o=new pn;return o.add(new Zi({name:"main",style:Bw(t),silent:!0})),o},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new pl({name:"main",draggable:!0,drift:yh(HO,e,t),ondragend:yh(ey,e,{isEnd:!0})}))},updateCoverShape:function(e,t,o,a){t.childAt(0).setShape({points:IT(e,t,o)})},updateCommon:Pw,contain:Ax}};function OT(e){return{createCover:function(t,o){return Rw(yh(Z2,function(a){var c=[a,[0,100]];return e&&c.reverse(),c},function(a){return a[e]}),t,o,[["w","e"],["n","s"]][e])},getCreatingRange:function(t){var o=Mx(t);return[Uf(o[0][e],o[1][e]),bg(o[0][e],o[1][e])]},updateCoverShape:function(t,o,a,c){var h,p=Ew(t,o);if(!0!==p&&p.getLinearBrushOtherExtent)h=p.getLinearBrushOtherExtent(e,t._transform);else{var y=t._zr;h=[0,[y.getWidth(),y.getHeight()][1-e]]}var w=[a,h];e&&w.reverse(),Lw(t,o,w,c)},updateCommon:Pw,contain:Ax}}function ET(e){return e=J2(e),function(t,o){return xC(t,e)}}function Ix(e,t){return e=J2(e),function(o){var a=t??o,h=a?e.x:e.y;return[h,h+((a?e.width:e.height)||0)]}}function zw(e,t,o){return e=J2(e),function(a,c,h){return e.contain(c[0],c[1])&&!dw(a,t,o)}}function J2(e){return Ro.create(e)}var NT=["axisLine","axisTickLabel","axisName"],Q2=fr({type:"parallelAxis",init:function(e,t){Q2.superApply(this,"init",arguments),(this._brushController=new Wp(t.getZr())).on("brush",rt(this._onBrush,this))},render:function(e,t,o,a){if(d=e,!(f=a)||"axisAreaSelect"!==f.type||t.findComponents({mainType:"parallelAxis",query:f})[0]!==d){this.axisModel=e,this.api=o,this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new pn,this.group.add(this._axisGroup),e.get("show")){var h=function(d,u){return u.getComponent("parallel",d.get("parallelIndex"))}(e,t),p=h.coordinateSystem,y=e.getAreaSelectStyle(),w=y.width,n=pe({strokeContainThreshold:w},p.getAxisLayout(e.axis.dim)),i=new wl(e,n);ee(NT,i.add,i),this._axisGroup.add(i.getGroup()),this._refreshBrushController(n,y,e,h,w,o),db(c,this._axisGroup,a&&!1===a.animation?null:e)}}var d,f},_refreshBrushController:function(e,t,o,a,c,h){var n,i,p=o.axis.getExtent(),y=p[1]-p[0],w=Math.min(30,.1*Math.abs(y)),C=Ro.create({x:p[0],y:-c/2,width:y,height:c});C.x-=w,C.width+=2*w,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,position:e.position}).setPanels([{panelId:"pl",clipPath:ET(C),isTargetByCursor:zw(C,h,a),getLinearBrushOtherExtent:Ix(C,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers((i=(n=o).axis,Se(n.activeIntervals,function(s){return{brushType:"lineX",panelId:"pl",range:[i.dataToCoord(s[0],!0),i.dataToCoord(s[1],!0)]}})))},_onBrush:function(e,t){var o=this.axisModel,a=o.axis,c=Se(e,function(h){return[a.coordToData(h.range[0],!0),a.coordToData(h.range[1],!0)]});!o.option.realtime!==t.isEnd&&!t.removeOnClick||this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:o.id,intervals:c})},dispose:function(){this._brushController.dispose()}});fr({type:"parallel",render:function(e,t,o){this._model=e,this._api=o,this._handlers||(this._handlers={},ee(RT,function(a,c){o.getZr().on(c,this._handlers[c]=rt(a,this))},this)),pp(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},dispose:function(e,t){ee(this._handlers,function(o,a){t.getZr().off(a,o)}),this._handlers=null},_throttledDispatchExpand:function(e){this._dispatchExpand(e)},_dispatchExpand:function(e){e&&this._api.dispatchAction(pe({type:"parallelAxisExpand"},e))}});var RT={mousedown:function(e){Dx(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(Dx(this,"click")&&t){var o=[e.offsetX,e.offsetY];if(5<Math.pow(t[0]-o[0],2)+Math.pow(t[1]-o[1],2))return;var a=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==a.behavior&&this._dispatchExpand({axisExpandWindow:a.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&Dx(this,"mousemove")){var t=this._model,o=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),a=o.behavior;"jump"===a&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===a?null:{axisExpandWindow:o.axisExpandWindow,animation:"jump"===a&&null})}}};function Dx(e,t){var o=e._model;return o.get("axisExpandable")&&o.get("axisExpandTriggerOn")===t}function Is(e,t,o,a){for(var c,h=[],p=0;p<o.length;p++){var y=o[p],w=e.get(e.mapDimension(y),t);c=w,("category"===a.getAxis(y).type?null==c:null==c||isNaN(c))||h.push(a.dataToPoint(w,y))}return h}function Fw(e,t,o,a,c){var h=Is(e,o,a,c),p=new Zi({shape:{points:h},silent:!0,z2:10});return t.add(p),e.setItemGraphicEl(o,p),p}function WO(e){var t=e.get("smooth",!0);return!0===t&&(t=.3),{lineStyle:e.getModel("lineStyle").getLineStyle(),smooth:t??.3}}function eI(e,t,o,a){var c=a.lineStyle;t.hasItemOption&&(c=t.getItemModel(o).getModel("lineStyle").getLineStyle()),e.useStyle(c);var h=e.style;h.fill=null,h.stroke=t.getItemVisual(o,"color"),h.opacity=t.getItemVisual(o,"opacity"),a.smooth&&(e.shape.smooth=a.smooth)}ks(function(e){(function(t){if(!t.parallel){var o=!1;ee(t.series,function(a){a&&"parallel"===a.type&&(o=!0)}),o&&(t.parallel=[{}])}})(e),function(t){ee(hr(t.parallelAxis),function(o){if(ue(o)){var a=o.parallelIndex||0,c=hr(t.parallel)[a];c&&c.parallelAxisDefault&&le(o,c.parallelAxisDefault,!1)}})}(e)}),Yr.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(e,t){var o=this.getSource();return function(a,c){if(!a.encodeDefine){var h=c.ecModel.getComponent("parallel",c.get("parallelIndex"));if(h){var p=a.encodeDefine=ft();ee(h.dimensions,function(y){var w=+y.replace("dim","");p.set(y,w)})}}}(o,this),ug(o,this)},getRawIndicesByActiveState:function(e){var t=this.coordinateSystem,o=this.getData(),a=[];return t.eachActiveState(o,function(c,h){e===c&&a.push(o.getRawIndex(h))}),a},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}),Za.extend({type:"parallel",init:function(){this._dataGroup=new pn,this.group.add(this._dataGroup)},render:function(e,t,o,a){var i,s,u,f,v,_,c=this._dataGroup,h=e.getData(),p=this._data,y=e.coordinateSystem,w=y.dimensions,C=WO(e);if(h.diff(p).add(function(i){eI(Fw(h,c,i,w,y),h,i,C)}).update(function(i,s){var d=p.getItemGraphicEl(s),u=Is(h,i,w,y);h.setItemGraphicEl(i,d),Eo(d,{shape:{points:u}},a&&!1===a.animation?null:e,i),eI(d,h,i,C)}).remove(function(i){var s=p.getItemGraphicEl(i);c.remove(s)}).execute(),!this._initialized){this._initialized=!0;var n=(s=e,u=(i=y).model,f=i.getRect(),v=new sr({shape:{x:f.x,y:f.y,width:f.width,height:f.height}}),_="horizontal"===u.get("layout")?"width":"height",v.setShape(_,0),Fs(v,{shape:{width:f.width,height:f.height}},s,function(){setTimeout(function(){c.removeClipPath()})}),v);c.setClipPath(n)}this._data=h},incrementalPrepareRender:function(e,t,o){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(e,t,o){for(var a=t.getData(),c=t.coordinateSystem,h=c.dimensions,p=WO(t),y=e.start;y<e.end;y++){var w=Fw(a,this._dataGroup,y,h,c);w.incremental=!0,eI(w,a,y,p)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});var Sc=["lineStyle","normal","opacity"];yi({seriesType:"parallel",reset:function(e,t,o){var a=e.getModel("itemStyle"),c=e.getModel("lineStyle"),h=t.get("color"),p=c.get("color")||a.get("color")||h[e.seriesIndex%h.length],y=e.get("inactiveOpacity"),w=e.get("activeOpacity"),C=e.getModel("lineStyle").getLineStyle(),n=e.coordinateSystem,i=e.getData(),s={normal:C.opacity,active:w,inactive:y};return i.setVisual("color",p),{progress:function(d,u){n.eachActiveState(u,function(f,v){var _=s[f];if("normal"===f&&u.hasItemOption){var k=u.getItemModel(v).get(Sc,!0);null!=k&&(_=k)}u.setItemVisual(v,"opacity",_)},d.start,d.end)}}}});var tI=Yr.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(e,t){for(var o=e.edges||e.links,a=e.data||e.nodes,c=e.levels,h=this.levelModels={},p=0;p<c.length;p++)null!=c[p].depth&&0<=c[p].depth&&(h[c[p].depth]=new Fo(c[p],this,t));if(a&&o)return Sw(a,o,this,!0,function(y,w){y.wrapMethod("getItemModel",function(C,n){return C.customizeGetParent(function(i){var s=this.parentModel,d=s.getData().getItemLayout(n).depth;return s.levelModels[d]||this.parentModel}),C}),w.wrapMethod("getItemModel",function(C,n){return C.customizeGetParent(function(i){var s=this.parentModel,d=s.getGraph().getEdgeByIndex(n).node1.getLayout().depth;return s.levelModels[d]||this.parentModel}),C})}).data},setNodePosition:function(e,t){var o=this.option.data[e];o.localX=t[0],o.localY=t[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(e,t,o){if("edge"===o){var a=this.getDataParams(e,o),c=a.data,h=c.source+" -- "+c.target;return a.value&&(h+=" : "+a.value),Hi(h)}if("node"!==o)return tI.superCall(this,"formatTooltip",e,t);var p=this.getGraph().getNodeByIndex(e).getLayout().value,y=this.getDataParams(e,o).data.name;return p&&(h=y+" : "+p),Hi(h)},optionUpdated:function(){var e=this.option;!0===e.focusNodeAdjacency&&(e.focusNodeAdjacency="allEdges")},getDataParams:function(e,t){var o=tI.superCall(this,"getDataParams",e,t);if(null==o.value&&"node"===t){var a=this.getGraph().getNodeByIndex(e).getLayout().value;o.value=a}return o},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),UO=["itemStyle","opacity"],ty=["emphasis","itemStyle","opacity"],Ox=["lineStyle","opacity"],Wd=["emphasis","lineStyle","opacity"];function LT(e,t){return e.getVisual("opacity")||e.getModel().get(t)}function Ex(e,t,o){var a=e.getGraphicEl(),c=LT(e,t);null!=o&&(null==c&&(c=1),c*=o),a.downplay&&a.downplay(),a.traverse(function(h){"group"!==h.type&&h.setStyle("opacity",c)})}function Jl(e,t){var o=LT(e,t),a=e.getGraphicEl();a.traverse(function(c){"group"!==c.type&&c.setStyle("opacity",o)}),a.highlight&&a.highlight()}var nI=ra({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(e,t){var o=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+o,t.y2),e.bezierCurveTo(t.cpx2+o,t.cpy2,t.cpx1+o,t.cpy1,t.x1+o,t.y1)):(e.lineTo(t.x2,t.y2+o),e.bezierCurveTo(t.cpx2,t.cpy2+o,t.cpx1,t.cpy1+o,t.x1,t.y1+o)),e.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}});function GO(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&0<=t.depth}function ny(e,t,o,a,c){var h="vertical"===c?"x":"y";ee(e,function(p){var y,w,C;p.sort(function(u,f){return u.getLayout()[h]-f.getLayout()[h]});for(var n=0,i=p.length,s="vertical"===c?"dx":"dy",d=0;d<i;d++)0<(C=n-(w=p[d]).getLayout()[h])&&(y=w.getLayout()[h]+C,w.setLayout("vertical"===c?{x:y}:{y},!0)),n=w.getLayout()[h]+w.getLayout()[s]+t;if(0<(C=n-t-("vertical"===c?a:o)))for(y=w.getLayout()[h]-C,w.setLayout("vertical"===c?{x:y}:{y},!0),n=y,d=i-2;0<=d;--d)0<(C=(w=p[d]).getLayout()[h]+w.getLayout()[s]+t-n)&&(y=w.getLayout()[h]-C,w.setLayout("vertical"===c?{x:y}:{y},!0)),n=w.getLayout()[h]})}function jO(e,t,o){ee(e.slice().reverse(),function(a){ee(a,function(c){if(c.outEdges.length){var h=_g(c.outEdges,oI,o)/_g(c.outEdges,Nx,o);if(isNaN(h)){var p=c.outEdges.length;h=p?_g(c.outEdges,xg,o)/p:0}if("vertical"===o){var y=c.getLayout().x+(h-Up(c,o))*t;c.setLayout({x:y},!0)}else{var w=c.getLayout().y+(h-Up(c,o))*t;c.setLayout({y:w},!0)}}})})}function oI(e,t){return Up(e.node2,t)*e.getValue()}function xg(e,t){return Up(e.node2,t)}function Vw(e,t){return Up(e.node1,t)*e.getValue()}function Hw(e,t){return Up(e.node1,t)}function Up(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function Nx(e){return e.getValue()}function _g(e,t,o){for(var a=0,c=e.length,h=-1;++h<c;){var p=+t.call(e,e[h],o);isNaN(p)||(a+=p)}return a}function rI(e,t,o){ee(e,function(a){ee(a,function(c){if(c.inEdges.length){var h=_g(c.inEdges,Vw,o)/_g(c.inEdges,Nx,o);if(isNaN(h)){var p=c.inEdges.length;h=p?_g(c.inEdges,Hw,o)/p:0}if("vertical"===o){var y=c.getLayout().x+(h-Up(c,o))*t;c.setLayout({x:y},!0)}else{var w=c.getLayout().y+(h-Up(c,o))*t;c.setLayout({y:w},!0)}}})})}Ts({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(e,t,o){var s,d,f,a=this,c=e.getGraph(),h=this.group,p=e.layoutInfo,y=p.width,w=p.height,C=e.getData(),n=e.getData("edge"),i=e.get("orient");this._model=e,h.removeAll(),h.attr("position",[p.x,p.y]),c.eachEdge(function(s){var d=new nI;d.dataIndex=s.dataIndex,d.seriesIndex=e.seriesIndex,d.dataType="edge";var u,f,v,_,k,T,M,I,O=s.getModel("lineStyle"),R=O.get("curveness"),N=s.node1.getLayout(),z=s.node1.getModel(),L=z.get("localX"),V=z.get("localY"),J=s.node2.getLayout(),te=s.node2.getModel(),re=te.get("localX"),ie=te.get("localY"),he=s.getLayout();switch(d.shape.extent=Math.max(1,he.dy),I="vertical"===(d.shape.orient=i)?(k=u=(null!=L?L*y:N.x)+he.sy,T=(f=(null!=V?V*w:N.y)+N.dy)*(1-R)+(_=null!=ie?ie*w:J.y)*R,M=v=(null!=re?re*y:J.x)+he.ty,f*R+_*(1-R)):(k=(u=(null!=L?L*y:N.x)+N.dx)*(1-R)+(v=null!=re?re*y:J.x)*R,T=f=(null!=V?V*w:N.y)+he.sy,M=u*R+v*(1-R),_=(null!=ie?ie*w:J.y)+he.ty),d.setShape({x1:u,y1:f,x2:v,y2:_,cpx1:k,cpy1:T,cpx2:M,cpy2:I}),d.setStyle(O.getItemStyle()),d.style.fill){case"source":d.style.fill=s.node1.getVisual("color");break;case"target":d.style.fill=s.node2.getVisual("color")}qr(d,s.getModel("emphasis.lineStyle").getItemStyle()),h.add(d),n.setItemGraphicEl(s.dataIndex,d)}),c.eachNode(function(s){var d=s.getLayout(),u=s.getModel(),f=u.get("localX"),v=u.get("localY"),_=u.getModel("label"),k=u.getModel("emphasis.label"),T=new sr({shape:{x:null!=f?f*y:d.x,y:null!=v?v*w:d.y,width:d.dx,height:d.dy},style:u.getModel("itemStyle").getItemStyle()}),M=s.getModel("emphasis.itemStyle").getItemStyle();ei(T.style,M,_,k,{labelFetcher:e,labelDataIndex:s.dataIndex,defaultText:s.id,isRectText:!0}),T.setStyle("fill",s.getVisual("color")),qr(T,M),h.add(T),C.setItemGraphicEl(s.dataIndex,T),T.dataType="node"}),C.eachItemGraphicEl(function(s,d){var u=C.getItemModel(d);u.get("draggable")&&(s.drift=function(f,v){a._focusAdjacencyDisabled=!0,this.shape.x+=f,this.shape.y+=v,this.dirty(),o.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:C.getRawIndex(d),localX:this.shape.x/y,localY:this.shape.y/w})},s.ondragend=function(){a._focusAdjacencyDisabled=!1},s.draggable=!0,s.cursor="move"),s.highlight=function(){this.trigger("emphasis")},s.downplay=function(){this.trigger("normal")},s.focusNodeAdjHandler&&s.off("mouseover",s.focusNodeAdjHandler),s.unfocusNodeAdjHandler&&s.off("mouseout",s.unfocusNodeAdjHandler),u.get("focusNodeAdjacency")&&(s.on("mouseover",s.focusNodeAdjHandler=function(){a._focusAdjacencyDisabled||(a._clearTimer(),o.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:s.dataIndex}))}),s.on("mouseout",s.unfocusNodeAdjHandler=function(){a._focusAdjacencyDisabled||a._dispatchUnfocus(o)}))}),n.eachItemGraphicEl(function(s,d){var u=n.getItemModel(d);s.focusNodeAdjHandler&&s.off("mouseover",s.focusNodeAdjHandler),s.unfocusNodeAdjHandler&&s.off("mouseout",s.unfocusNodeAdjHandler),u.get("focusNodeAdjacency")&&(s.on("mouseover",s.focusNodeAdjHandler=function(){a._focusAdjacencyDisabled||(a._clearTimer(),o.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:s.dataIndex}))}),s.on("mouseout",s.unfocusNodeAdjHandler=function(){a._focusAdjacencyDisabled||a._dispatchUnfocus(o)}))}),!this._data&&e.get("animation")&&h.setClipPath((s=h.getBoundingRect(),d=e,Fs(f=new sr({shape:{x:s.x-10,y:s.y-10,width:0,height:s.height+20}}),{shape:{width:s.width+20}},d,function(){h.removeClipPath()}),f)),this._data=e.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(e){var t=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){t._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,o,a){var c=e.getData(),h=c.graph,p=a.dataIndex,y=c.getItemModel(p),w=a.edgeDataIndex;if(null!=p||null!=w){var C=h.getNodeByIndex(p),n=h.getEdgeByIndex(w);if(h.eachNode(function(s){Ex(s,UO,.1)}),h.eachEdge(function(s){Ex(s,Ox,.1)}),C){Jl(C,ty);var i=y.get("focusNodeAdjacency");"outEdges"===i?ee(C.outEdges,function(s){s.dataIndex<0||(Jl(s,Wd),Jl(s.node2,ty))}):"inEdges"===i?ee(C.inEdges,function(s){s.dataIndex<0||(Jl(s,Wd),Jl(s.node1,ty))}):"allEdges"===i&&ee(C.edges,function(s){s.dataIndex<0||(Jl(s,Wd),s.node1!==C&&Jl(s.node1,ty),s.node2!==C&&Jl(s.node2,ty))})}n&&(Jl(n,Wd),Jl(n.node1,ty),Jl(n.node2,ty))}},unfocusNodeAdjacency:function(e,t,o,a){var c=e.getGraph();c.eachNode(function(h){Ex(h,UO)}),c.eachEdge(function(h){Ex(h,Ox)})}}),Xo({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(o){o.setNodePosition(e.dataIndex,[e.localX,e.localY])})}),Wn(function(e,t,o){e.eachSeriesByType("sankey",function(a){var d,c=a.get("nodeWidth"),h=a.get("nodeGap"),p=(d=t,Xa(a.getBoxLayoutParams(),{width:d.getWidth(),height:d.getHeight()})),y=(a.layoutInfo=p).width,w=p.height,C=a.getGraph(),n=C.nodes,i=C.edges;ee(n,function(d){var u=_g(d.outEdges,Nx),f=_g(d.inEdges,Nx),v=d.getValue()||0,_=Math.max(u,f,v);d.setLayout({value:_},!0)}),function(s,d,u,f,v,_,k,T,M){var I,R;(function(I,O,R,N,z,L,V){for(var J=[],te=[],re=[],ie=[],he=0,fe=0;fe<O.length;fe++)J[fe]=1;for(fe=0;fe<I.length;fe++)te[fe]=I[fe].inEdges.length,0===te[fe]&&re.push(I[fe]);for(var ye=-1;re.length;){for(var Ie=0;Ie<re.length;Ie++){var He=re[Ie],we=He.hostGraph.data.getRawDataItem(He.dataIndex),De=null!=we.depth&&0<=we.depth;De&&we.depth>ye&&(ye=we.depth),He.setLayout({depth:De?we.depth:he},!0),He.setLayout("vertical"===L?{dy:R}:{dx:R},!0);for(var Be=0;Be<He.outEdges.length;Be++){var et=He.outEdges[Be];J[O.indexOf(et)]=0;var it=et.node2;0==--te[I.indexOf(it)]&&ie.indexOf(it)<0&&ie.push(it)}}++he,re=ie,ie=[]}for(fe=0;fe<J.length;fe++)if(1===J[fe])throw new Error("Sankey is a DAG, the original data has cycle!");var Xt,Dt,It=he-1<ye?ye:he-1;V&&"left"!==V&&function(qt,Xt,Dt,en){if("right"===Xt){for(var qe=[],Je=qt,gt=0;Je.length;){for(var ht=0;ht<Je.length;ht++){var Zt=Je[ht];Zt.setLayout({skNodeHeight:gt},!0);for(var Ut=0;Ut<Zt.inEdges.length;Ut++){var Mn=Zt.inEdges[Ut];qe.indexOf(Mn.node1)<0&&qe.push(Mn.node1)}}Je=qe,qe=[],++gt}ee(qt,function(In){GO(In)||In.setLayout({depth:Math.max(0,en-In.getLayout().skNodeHeight)},!0)})}else"justify"===Xt&&(Jn=en,ee(qt,function(wr){GO(wr)||wr.outEdges.length||wr.setLayout({depth:Jn},!0)}));var Jn}(I,V,0,It),Xt="vertical"===L?(z-R)/It:(N-R)/It,Dt=L,ee(I,function(en){var qe=en.getLayout().depth*Xt;en.setLayout("vertical"===Dt?{y:qe}:{x:qe},!0)})})(s,d,u,v,_,T,M),function(I,O,R,N,z,L,V){var he,fe,ye,J=(he=[],fe="vertical"===V?"y":"x",(ye=Kg(I,function(Ie){return Ie.getLayout()[fe]})).keys.sort(function(Ie,He){return Ie-He}),ee(ye.keys,function(Ie){he.push(ye.buckets.get(Ie))}),he);(function(re,ie,he,fe,ye,Ie){var He=1/0;ee(re,function(we){var De=we.length,Be=0;ee(we,function(Ye){Be+=Ye.getLayout().value});var et="vertical"===Ie?(fe-(De-1)*ye)/Be:(he-(De-1)*ye)/Be;et<He&&(He=et)}),ee(re,function(we){ee(we,function(De,Be){var et=De.getLayout().value*He;"vertical"===Ie?(De.setLayout({x:Be},!0),De.setLayout({dx:et},!0)):(De.setLayout({y:Be},!0),De.setLayout({dy:et},!0))})}),ee(ie,function(we){var De=+we.getValue()*He;we.setLayout({dy:De},!0)})})(J,O,R,N,z,V),ny(J,z,R,N,V);for(var te=1;0<L;L--)jO(J,te*=.99,V),ny(J,z,R,N,V),rI(J,te,V),ny(J,z,R,N,V)}(s,d,_,v,f,k,T),R="vertical"===T?"x":"y",ee(I=s,function(N){N.outEdges.sort(function(z,L){return z.node2.getLayout()[R]-L.node2.getLayout()[R]}),N.inEdges.sort(function(z,L){return z.node1.getLayout()[R]-L.node1.getLayout()[R]})}),ee(I,function(N){var z=0,L=0;ee(N.outEdges,function(V){V.setLayout({sy:z},!0),z+=V.getLayout().dy}),ee(N.inEdges,function(V){V.setLayout({ty:L},!0),L+=V.getLayout().dy})})}(n,i,c,h,y,w,0!==We(n,function(s){return 0===s.getLayout().value}).length?0:a.get("layoutIterations"),a.get("orient"),a.get("nodeAlign"))})}),yi(function(e,t){e.eachSeriesByType("sankey",function(o){var a=o.getGraph().nodes;if(a.length){var c=1/0,h=-1/0;ee(a,function(p){var y=p.getLayout().value;y<c&&(c=y),h<y&&(h=y)}),ee(a,function(p){var y=new Rr({type:"color",mappingMethod:"linear",dataExtent:[c,h],visual:o.get("color")}).mapValueToVisual(p.getLayout().value),w=p.getModel().get("itemStyle.color");p.setVisual("color",null!=w?w:y)})}})});var Cc={_baseAxisDim:null,getInitialData:function(e,t){var o,a,c=t.getComponent("xAxis",this.get("xAxisIndex")),h=t.getComponent("yAxis",this.get("yAxisIndex")),p=c.get("type"),y=h.get("type");"category"===p?(e.layout="horizontal",o=c.getOrdinalMeta(),a=!0):"category"===y?(e.layout="vertical",o=h.getOrdinalMeta(),a=!0):e.layout=e.layout||"horizontal";var w=["x","y"],C="horizontal"===e.layout?0:1,n=this._baseAxisDim=w[C],i=w[1-C],s=[c,h],d=s[C].get("type"),u=s[1-C].get("type"),f=e.data;if(f&&a){var v=[];ee(f,function(T,M){var I;T.value&&nt(T.value)?(I=T.value.slice(),T.value.unshift(M)):nt(T)?(I=T.slice(),T.unshift(M)):I=T,v.push(I)}),e.data=v}var _=this.defaultValueDimensions,k=[{name:n,type:nk(d),ordinalMeta:o,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:i,type:nk(u),dimsDef:_.slice()}];return R0(this,{coordDimensions:k,dimensionsCount:_.length+1,encodeDefaulter:wt(dp,k,this)})},getBaseAxis:function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis}};Me(Yr.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),Cc,!0);var oy=["itemStyle"],Ww=["emphasis","itemStyle"],qO=(Za.extend({type:"boxplot",render:function(e,t,o){var a=e.getData(),c=this.group,h=this._data;this._data||c.removeAll();var p="horizontal"===e.get("layout")?1:0;a.diff(h).add(function(y){if(a.hasValue(y)){var w=$o(a.getItemLayout(y),a,y,p,!0);a.setItemGraphicEl(y,w),c.add(w)}}).update(function(y,w){var C=h.getItemGraphicEl(w);if(a.hasValue(y)){var n=a.getItemLayout(y);C?iI(n,C,a,y):C=$o(n,a,y,p),c.add(C),a.setItemGraphicEl(y,C)}else c.remove(C)}).remove(function(y){var w=h.getItemGraphicEl(y);w&&c.remove(w)}).execute(),this._data=a},remove:function(e){var t=this.group,o=this._data;this._data=null,o&&o.eachItemGraphicEl(function(a){a&&t.remove(a)})},dispose:Tt}),Mo.extend({type:"boxplotBoxPath",shape:{},buildPath:function(e,t){var o=t.points,a=0;for(e.moveTo(o[a][0],o[a][1]),a++;a<4;a++)e.lineTo(o[a][0],o[a][1]);for(e.closePath();a<o.length;a++)e.moveTo(o[a][0],o[a][1]),a++,e.lineTo(o[a][0],o[a][1])}}));function $o(e,t,o,a,c){var y,w,C,h=e.ends,p=new qO({shape:{points:c?(y=h,w=a,C=e,Se(y,function(n){return(n=n.slice())[w]=C.initBaseline,n})):h}});return iI(e,p,t,o,c),p}function iI(e,t,o,a,c){(0,ti[c?"initProps":"updateProps"])(t,{shape:{points:e.ends}},o.hostModel,a);var p=o.getItemModel(a),y=p.getModel(oy),w=o.getItemVisual(a,"color"),C=y.getItemStyle(["borderColor"]);C.stroke=w,C.strokeNoScale=!0,t.useStyle(C),t.z2=100,qr(t,p.getModel(Ww).getItemStyle())}var ry=["itemStyle","borderColor"],Uw=ee;yi(function(e,t){var o=e.get("color");e.eachRawSeriesByType("boxplot",function(a){var c=o[a.seriesIndex%o.length],h=a.getData();h.setVisual({legendSymbol:"roundRect",color:a.get(ry)||c}),e.isSeriesFiltered(a)||h.each(function(p){var y=h.getItemModel(p);h.setItemVisual(p,{color:y.get(ry,!0)})})})}),Wn(function(e){var t=function(o){var a=[],c=[];return o.eachSeriesByType("boxplot",function(h){var p=h.getBaseAxis(),y=Ue(c,p);y<0&&(c[y=c.length]=p,a[y]={axis:p,seriesModels:[]}),a[y].seriesModels.push(h)}),a}(e);Uw(t,function(o){var a=o.seriesModels;a.length&&(function(c){var h,p,y=c.axis,w=c.seriesModels,C=w.length,n=c.boxWidthList=[],i=c.boxOffsetList=[],s=[];if("category"===y.type)p=y.getBandWidth();else{var d=0;Uw(w,function(k){d=Math.max(d,k.getData().count())}),h=y.getExtent(),Math.abs(h[1]-h[0])}Uw(w,function(k){var T=k.get("boxWidth");nt(T)||(T=[T,T]),s.push([rn(T[0],p)||0,rn(T[1],p)||0])});var u=.8*p-2,f=u/C*.3,v=(u-f*(C-1))/C,_=v/2-u/2;Uw(w,function(k,T){i.push(_),_+=f+v,n.push(Math.min(Math.max(v,s[T][0]),s[T][1]))})}(o),Uw(a,function(c,h){!function(p,y,w){var C=p.coordinateSystem,n=p.getData(),i=w/2,s="horizontal"===p.get("layout")?0:1,d=1-s,u=["x","y"],f=n.mapDimension(u[s]),v=n.mapDimension(u[d],!0);if(!(null==f||v.length<5))for(var _=0;_<n.count();_++){var k=n.get(f,_),T=z(k,v[2],_),M=z(k,v[0],_),I=z(k,v[1],_),O=z(k,v[3],_),R=z(k,v[4],_),N=[];L(N,I,0),L(N,O,1),N.push(M,I,R,O),V(N,M),V(N,R),V(N,T),n.setItemLayout(_,{initBaseline:T[d],ends:N})}function z(J,te,re){var ie,he=n.get(te,re),fe=[];return fe[s]=J,fe[d]=he,isNaN(J)||isNaN(he)?ie=[NaN,NaN]:(ie=C.dataToPoint(fe))[s]+=y,ie}function L(J,te,re){var ie=te.slice(),he=te.slice();ie[s]+=i,he[s]-=i,re?J.push(ie,he):J.push(he,ie)}function V(J,te){var re=te.slice(),ie=te.slice();re[s]-=i,ie[s]+=i,J.push(re,ie)}}(c,o.boxOffsetList[h],o.boxWidthList[h])}))})}),Me(Yr.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(e,t,o){var a=t.getItemLayout(e);return a&&o.rect(a.brushRect)}}),Cc,!0);var aI=["itemStyle"],qf=["emphasis","itemStyle"],Ys=["color","color0","borderColor","borderColor0"],Rx=(Za.extend({type:"candlestick",render:function(e,t,o){this.group.removeClipPath(),this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},incrementalPrepareRender:function(e,t,o){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,o,a){this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e){var t=e.getData(),o=this._data,a=this.group,c=t.getLayout("isSimpleBox"),h=e.get("clip",!0),p=e.coordinateSystem,y=p.getArea&&p.getArea();this._data||a.removeAll(),t.diff(o).add(function(w){if(t.hasValue(w)){var C,n=t.getItemLayout(w);if(h&&_h(y,n))return;Fs(C=xh(n,0,!0),{shape:{points:n.ends}},e,w),$f(C,t,w,c),a.add(C),t.setItemGraphicEl(w,C)}}).update(function(w,C){var n=o.getItemGraphicEl(C);if(t.hasValue(w)){var i=t.getItemLayout(w);h&&_h(y,i)?a.remove(n):(n?Eo(n,{shape:{points:i.ends}},e,w):n=xh(i),$f(n,t,w,c),a.add(n),t.setItemGraphicEl(w,n))}else a.remove(n)}).remove(function(w){var C=o.getItemGraphicEl(w);C&&a.remove(C)}).execute(),this._data=t},_renderLarge:function(e){this._clear(),Gw(e,this.group);var t=e.get("clip",!0)?Ak(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},_incrementalRenderNormal:function(e,t){for(var o,a=t.getData(),c=a.getLayout("isSimpleBox");null!=(o=e.next());){var h;$f(h=xh(a.getItemLayout(o)),a,o,c),h.incremental=!0,this.group.add(h)}},_incrementalRenderLarge:function(e,t){Gw(t,this.group,!0)},remove:function(e){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:Tt}),Mo.extend({type:"normalCandlestickBox",shape:{},buildPath:function(e,t){var o=t.points;this.__simpleBox?(e.moveTo(o[4][0],o[4][1]),e.lineTo(o[6][0],o[6][1])):(e.moveTo(o[0][0],o[0][1]),e.lineTo(o[1][0],o[1][1]),e.lineTo(o[2][0],o[2][1]),e.lineTo(o[3][0],o[3][1]),e.closePath(),e.moveTo(o[4][0],o[4][1]),e.lineTo(o[5][0],o[5][1]),e.moveTo(o[6][0],o[6][1]),e.lineTo(o[7][0],o[7][1]))}}));function xh(e,t,o){var a=e.ends;return new Rx({shape:{points:o?function(c,h){return Se(c,function(p){return(p=p.slice())[1]=h.initBaseline,p})}(a,e):a},z2:100})}function _h(e,t){for(var o=!0,a=0;a<t.ends.length;a++)if(e.contain(t.ends[a][0],t.ends[a][1])){o=!1;break}return o}function $f(e,t,o,a){var c=t.getItemModel(o),h=c.getModel(aI),p=t.getItemVisual(o,"color"),y=t.getItemVisual(o,"borderColor")||p,w=h.getItemStyle(Ys);e.useStyle(w),e.style.strokeNoScale=!0,e.style.fill=p,e.style.stroke=y,e.__simpleBox=a,qr(e,c.getModel(qf).getItemStyle())}var Yf=Mo.extend({type:"largeCandlestickBox",shape:{},buildPath:function(e,t){for(var o=t.points,a=0;a<o.length;)if(this.__sign===o[a++]){var c=o[a++];e.moveTo(c,o[a++]),e.lineTo(c,o[a++])}else a+=3}});function Gw(e,t,o){var a=e.getData(),c=a.getLayout("largePoints"),h=new Yf({shape:{points:c},__sign:1});t.add(h);var p=new Yf({shape:{points:c},__sign:-1});t.add(p),sI(1,h,e,a),sI(-1,p,e,a),o&&(h.incremental=!0,p.incremental=!0)}function sI(e,t,o,a){var c=0<e?"P":"N",h=a.getVisual("borderColor"+c)||a.getVisual("color"+c),p=o.getModel(aI).getItemStyle(Ys);t.useStyle(p),t.style.fill=null,t.style.stroke=h}var $O=["itemStyle","borderColor"],YO=["itemStyle","borderColor0"],XO=["itemStyle","color"],PT=["itemStyle","color0"],wg={seriesType:"candlestick",plan:oh(),performRawSeries:!0,reset:function(e,t){if(e.getData().setVisual({legendSymbol:"roundRect",colorP:o(1,e),colorN:o(-1,e),borderColorP:a(1,e),borderColorN:a(-1,e)}),!t.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(c,h){for(var p;null!=(p=c.next());){var y=h.getItemModel(p),w=h.getItemLayout(p).sign;h.setItemVisual(p,{color:o(w,y),borderColor:a(w,y)})}}};function o(c,h){return h.get(0<c?XO:PT)}function a(c,h){return h.get(0<c?$O:YO)}}},BT=typeof Float32Array<"u"?Float32Array:Array,lI={seriesType:"candlestick",plan:oh(),reset:function(e){var i,s,d,u,f,v,_,k,t=e.coordinateSystem,o=e.getData(),a=(s=o,f="category"===(u=(i=e).getBaseAxis()).type?u.getBandWidth():(d=u.getExtent(),Math.abs(d[1]-d[0])/s.count()),v=rn(_n(i.get("barMaxWidth"),f),f),_=rn(_n(i.get("barMinWidth"),1),f),null!=(k=i.get("barWidth"))?rn(k,f):Math.max(Math.min(f/2,v),_)),c=["x","y"],h=o.mapDimension(c[0]),p=o.mapDimension(c[1],!0),y=p[0],w=p[1],C=p[2],n=p[3];if(o.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),!(null==h||p.length<4))return{progress:e.pipelineContext.large?function(i,s){for(var d,u,f=new BT(4*i.count),v=0,_=[],k=[];null!=(u=i.next());){var T=s.get(h,u),M=s.get(y,u),I=s.get(w,u),O=s.get(C,u),R=s.get(n,u);isNaN(T)||isNaN(O)||isNaN(R)?(f[v++]=NaN,v+=3):(f[v++]=jw(s,u,M,I,w),_[0]=T,_[1]=O,d=t.dataToPoint(_,null,k),f[v++]=d?d[0]:NaN,f[v++]=d?d[1]:NaN,_[1]=R,d=t.dataToPoint(_,null,k),f[v++]=d?d[1]:NaN)}s.setLayout("largePoints",f)}:function(i,s){for(var d;null!=(d=i.next());){var u=s.get(h,d),f=s.get(y,d),v=s.get(w,d),_=s.get(C,d),k=s.get(n,d),T=Math.min(f,v),M=Math.max(f,v),I=L(T,u),O=L(M,u),R=L(_,u),N=L(k,u),z=[];V(z,O,0),V(z,I,1),z.push(te(N),te(O),te(R),te(I)),s.setItemLayout(d,{sign:jw(s,d,f,v,w),initBaseline:v<f?O[1]:I[1],ends:z,brushRect:(re=_,ie=k,he=u,fe=void 0,ye=void 0,fe=L(re,he),ye=L(ie,he),fe[0]-=a/2,ye[0]-=a/2,{x:fe[0],y:fe[1],width:a,height:ye[1]-fe[1]})})}var re,ie,he,fe,ye;function L(re,ie){var he=[];return he[0]=ie,he[1]=re,isNaN(ie)||isNaN(re)?[NaN,NaN]:t.dataToPoint(he)}function V(re,ie,he){var fe=ie.slice(),ye=ie.slice();fe[0]=ap(fe[0]+a/2,1,!1),ye[0]=ap(ye[0]-a/2,1,!0),he?re.push(fe,ye):re.push(ye,fe)}function te(re){return re[0]=ap(re[0],1),re}}}}};function jw(e,t,o,a,c){return a<o?-1:o<a?1:0<t?e.get(c,t-1)<=a?1:-1:1}function zT(e,t){var o=t.rippleEffectColor||t.color;e.eachChild(function(a){a.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?o:null,fill:"fill"===t.brushType?o:null}})})}function FT(e,t){pn.call(this);var o=new gg(e,t),a=new pn;this.add(o),this.add(a),a.beforeUpdate=function(){this.attr(o.getScale())},this.updateData(e,t)}ks(function(e){e&&nt(e.series)&&ee(e.series,function(t){ue(t)&&"k"===t.type&&(t.type="candlestick")})}),yi(wg),Wn(lI),Yr.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(e,t){return ug(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var Sg=FT.prototype;Sg.stopEffectAnimation=function(){this.childAt(1).removeAll()},Sg.startEffectAnimation=function(e){for(var t=e.symbolType,o=e.color,a=this.childAt(1),c=0;c<3;c++){var h=Kc(t,-1,-1,2,2,o);h.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var p=-c/3*e.period+e.effectOffset;h.animate("",!0).when(e.period,{scale:[e.rippleScale/2,e.rippleScale/2]}).delay(p).start(),h.animateStyle(!0).when(e.period,{opacity:0}).delay(p).start(),a.add(h)}zT(a,e)},Sg.updateEffectAnimation=function(e){for(var t=this._effectCfg,o=this.childAt(1),a=["symbolType","period","rippleScale"],c=0;c<a.length;c++){var h=a[c];if(t[h]!==e[h])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}zT(o,e)},Sg.highlight=function(){this.trigger("emphasis")},Sg.downplay=function(){this.trigger("normal")},Sg.updateData=function(e,t){var o=e.hostModel;this.childAt(0).updateData(e,t);var f,a=this.childAt(1),c=e.getItemModel(t),h=e.getItemVisual(t,"symbol"),p=(nt(f=e.getItemVisual(t,"symbolSize"))||(f=[+f,+f]),f),y=e.getItemVisual(t,"color");a.attr("scale",p),a.traverse(function(f){f.attr({fill:y})});var w=c.getShallow("symbolOffset");if(w){var C=a.position;C[0]=rn(w[0],p[0]),C[1]=rn(w[1],p[1])}var n=e.getItemVisual(t,"symbolRotate");a.rotation=(n||0)*Math.PI/180||0;var i={};if(i.showEffectOn=o.get("showEffectOn"),i.rippleScale=c.get("rippleEffect.scale"),i.brushType=c.get("rippleEffect.brushType"),i.period=1e3*c.get("rippleEffect.period"),i.effectOffset=t/e.count(),i.z=c.getShallow("z")||0,i.zlevel=c.getShallow("zlevel")||0,i.symbolType=h,i.color=y,i.rippleEffectColor=c.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===i.showEffectOn)this._effectCfg?this.updateEffectAnimation(i):this.startEffectAnimation(i),this._effectCfg=i;else{this._effectCfg=null,this.stopEffectAnimation();var s=this.childAt(0),d=function(){s.highlight(),"render"!==i.showEffectOn&&this.startEffectAnimation(i)},u=function(){s.downplay(),"render"!==i.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",d,this).on("mouseout",u,this).on("emphasis",d,this).on("normal",u,this)}this._effectCfg=i},Sg.fadeOut=function(e){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),e&&e()},ve(FT,pn),Ts({type:"effectScatter",init:function(){this._symbolDraw=new Ap(FT)},render:function(e,t,o){var a=e.getData(),c=this._symbolDraw;c.updateData(a),this.group.add(c.group)},updateTransform:function(e,t,o){var a=e.getData();this.group.dirty();var c=Ms().reset(e);c.progress&&c.progress({start:0,end:a.count()},a),this._symbolDraw.updateLayout(a)},_updateGroupTransform:function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=Bg(t.getRoamTransform()),this.group.decomposeTransform())},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(t)},dispose:function(){}}),yi(Xl("effectScatter","circle")),Wn(Ms("effectScatter"));var wh=typeof Uint32Array>"u"?Array:Uint32Array,Lx=typeof Float64Array>"u"?Array:Float64Array;function cI(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=Se(t,function(o){var a={coords:[o[0].coord,o[1].coord]};return o[0].name&&(a.fromName=o[0].name),o[1].name&&(a.toName=o[1].name),de([a,o[0],o[1]])}))}var VT=Yr.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(e){e.data=e.data||[],cI(e);var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count)),VT.superApply(this,"init",arguments)},mergeOption:function(e){if(cI(e),e.data){var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count))}VT.superApply(this,"mergeOption",arguments)},appendData:function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=pt(this._flatCoords,t.flatCoords),this._flatCoordsOffset=pt(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var t=this.getData().getItemModel(e);return t.option instanceof Array?t.option:t.getShallow("coords")},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,t){if(this._flatCoordsOffset){for(var o=this._flatCoordsOffset[2*e],a=this._flatCoordsOffset[2*e+1],c=0;c<a;c++)t[c]=t[c]||[],t[c][0]=this._flatCoords[o+2*c],t[c][1]=this._flatCoords[o+2*c+1];return a}var h=this._getCoordsFromItemModel(e);for(c=0;c<h.length;c++)t[c]=t[c]||[],t[c][0]=h[c][0],t[c][1]=h[c][1];return h.length},_processFlatCoordsArray:function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),"number"!=typeof e[0])return{flatCoordsOffset:null,flatCoords:null,count:e.length};for(var o=e.length,a=new wh(o),c=new Lx(o),h=0,p=0,y=0,w=0;w<o;){y++;var C=e[w++];a[p++]=h+t,a[p++]=C;for(var n=0;n<C;n++){var i=e[w++],s=e[w++];c[h++]=i,c[h++]=s}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,p),flatCoords:c,count:y}},getInitialData:function(e,t){var o=new Ja(["value"],this);return o.hasItemOption=!1,o.initData(e.data,[],function(a,c,h,p){if(a instanceof Array)return NaN;o.hasItemOption=!0;var y=a.value;return null!=y?y instanceof Array?y[p]:y:void 0}),o},formatTooltip:function(e){var t=this.getData().getItemModel(e),o=t.get("name");if(o)return o;var a=t.get("fromName"),c=t.get("toName"),h=[];return null!=a&&h.push(a),null!=c&&h.push(c),Hi(h.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){return this.option.progressive??(this.option.large?1e4:this.get("progressive"))},getProgressiveThreshold:function(){return this.option.progressiveThreshold??(this.option.large?2e4:this.get("progressiveThreshold"))},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function iy(e,t,o){pn.call(this),this.add(this.createLine(e,t,o)),this._updateEffectSymbol(e,t)}var Xf=iy.prototype;function Sh(e,t,o){pn.call(this),this._createPolyline(e,t,o)}Xf.createLine=function(e,t,o){return new vg(e,t,o)},Xf._updateEffectSymbol=function(e,t){var o=e.getItemModel(t).getModel("effect"),a=o.get("symbolSize"),c=o.get("symbol");nt(a)||(a=[a,a]);var h=o.get("color")||e.getItemVisual(t,"color"),p=this.childAt(1);this._symbolType!==c&&(this.remove(p),(p=Kc(c,-.5,-.5,1,1,h)).z2=100,p.culling=!0,this.add(p)),p&&(p.setStyle("shadowColor",h),p.setStyle(o.getItemStyle(["color"])),p.attr("scale",a),p.setColor(h),p.attr("scale",a),this._symbolType=c,this._symbolScale=a,this._updateEffectAnimation(e,o,t))},Xf._updateEffectAnimation=function(e,t,o){var a=this.childAt(1);if(a){var c=this,h=e.getItemLayout(o),p=1e3*t.get("period"),y=t.get("loop"),w=t.get("constantSpeed"),C=Jt(t.get("delay"),function(d){return d/e.count()*p/3}),n="function"==typeof C;if(a.ignore=!0,this.updateAnimationPoints(a,h),0<w&&(p=this.getLineLength(a)/w*1e3),p!==this._period||y!==this._loop){a.stopAnimation();var i=C;n&&(i=C(o)),0<a.__t&&(i=-p*a.__t),a.__t=0;var s=a.animate("",y).when(p,{__t:1}).delay(i).during(function(){c.updateSymbolPosition(a)});y||s.done(function(){c.remove(a)}),s.start()}this._period=p,this._loop=y}},Xf.getLineLength=function(e){return Br(e.__p1,e.__cp1)+Br(e.__cp1,e.__p2)},Xf.updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},Xf.updateData=function(e,t,o){this.childAt(0).updateData(e,t,o),this._updateEffectSymbol(e,t)},Xf.updateSymbolPosition=function(e){var t=e.__p1,o=e.__p2,a=e.__cp1,c=e.__t,h=e.position,p=[h[0],h[1]],y=Ni,w=H1;h[0]=y(t[0],a[0],o[0],c),h[1]=y(t[1],a[1],o[1],c);var C=w(t[0],a[0],o[0],c),n=w(t[1],a[1],o[1],c);if(e.rotation=-Math.atan2(n,C)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==e.__lastT&&e.__lastT<e.__t){var i=1.05*Br(p,h);e.attr("scale",[e.scale[0],i]),1===c&&(h[0]=p[0]+(h[0]-p[0])/2,h[1]=p[1]+(h[1]-p[1])/2)}else 1===e.__lastT?(i=2*Br(t,h),e.attr("scale",[e.scale[0],i])):e.attr("scale",this._symbolScale);e.__lastT=e.__t,e.ignore=!1},Xf.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var o=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,o,t)},ve(iy,pn);var HT=Sh.prototype;function Px(e,t,o){iy.call(this,e,t,o),this._lastFrame=0,this._lastFramePercent=0}HT._createPolyline=function(e,t,o){var a=e.getItemLayout(t),c=new Zi({shape:{points:a}});this.add(c),this._updateCommonStl(e,t,o)},HT.updateData=function(e,t,o){var a=e.hostModel;Eo(this.childAt(0),{shape:{points:e.getItemLayout(t)}},a,t),this._updateCommonStl(e,t,o)},HT._updateCommonStl=function(e,t,o){var a=this.childAt(0),c=e.getItemModel(t),h=e.getItemVisual(t,"color"),p=o&&o.lineStyle,y=o&&o.hoverLineStyle;o&&!e.hasItemOption||(p=c.getModel("lineStyle").getLineStyle(),y=c.getModel("emphasis.lineStyle").getLineStyle()),a.useStyle(_e({strokeNoScale:!0,fill:"none",stroke:h},p)),a.hoverStyle=y,qr(this)},HT.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},ve(Sh,pn);var qw=Px.prototype;qw.createLine=function(e,t,o){return new Sh(e,t,o)},qw.updateAnimationPoints=function(e,t){this._points=t;for(var o=[0],a=0,c=1;c<t.length;c++)a+=Br(t[c-1],t[c]),o.push(a);if(0!==a){for(c=0;c<o.length;c++)o[c]/=a;this._offsets=o,this._length=a}},qw.getLineLength=function(e){return this._length},qw.updateSymbolPosition=function(e){var t=e.__t,o=this._points,a=this._offsets,c=o.length;if(a){var h=this._lastFrame;if(t<this._lastFramePercent){for(p=Math.min(h+1,c-1);0<=p&&!(a[p]<=t);p--);p=Math.min(p,c-2)}else{for(var p=h;p<c&&!(a[p]>t);p++);p=Math.min(p-1,c-2)}Ml(e.position,o[p],o[p+1],(t-a[p])/(a[p+1]-a[p])),e.rotation=-Math.atan2(o[p+1][1]-o[p][1],o[p+1][0]-o[p][0])-Math.PI/2,this._lastFrame=p,this._lastFramePercent=t,e.ignore=!1}},ve(Px,iy);var dI=ra({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(e,t){var o=t.segs,a=t.curveness;if(t.polyline)for(var c=0;c<o.length;){var h=o[c++];if(0<h){e.moveTo(o[c++],o[c++]);for(var p=1;p<h;p++)e.lineTo(o[c++],o[c++])}}else for(c=0;c<o.length;){var y=o[c++],w=o[c++],C=o[c++],n=o[c++];e.moveTo(y,w),0<a?e.quadraticCurveTo((y+C)/2-(w-n)*a,(w+n)/2-(C-y)*a,C,n):e.lineTo(C,n)}},findDataIndex:function(e,t){var o=this.shape,a=o.segs,c=o.curveness;if(o.polyline)for(var h=0,p=0;p<a.length;){var y=a[p++];if(0<y)for(var w=a[p++],C=a[p++],n=1;n<y;n++)if(wa(w,C,i=a[p++],s=a[p++]))return h;h++}else for(h=0,p=0;p<a.length;){w=a[p++],C=a[p++];var i=a[p++],s=a[p++];if(0<c){if(Pt(w,C,(w+i)/2-(C-s)*c,(C+s)/2-(i-w)*c,i,s))return h}else if(wa(w,C,i,s))return h;h++}return-1}});function WT(){this.group=new pn}var Zf=WT.prototype;Zf.isPersistent=function(){return!this._incremental},Zf.updateData=function(e){this.group.removeAll();var t=new dI({rectHover:!0,cursor:"default"});t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},Zf.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),5e5<e.count()?(this._incremental||(this._incremental=new Kn({silent:!0})),this.group.add(this._incremental)):this._incremental=null},Zf.incrementalUpdate=function(e,t){var o=new dI;o.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(o,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(o,!0):(o.rectHover=!0,o.cursor="default",o.__startIndex=e.start,this.group.add(o))},Zf.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Zf._setCommon=function(e,t,o){var a=t.hostModel;e.setShape({polyline:a.get("polyline"),curveness:a.get("lineStyle.curveness")}),e.useStyle(a.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var c=t.getVisual("color");c&&e.setStyle("stroke",c),e.setStyle("fill"),o||(e.seriesIndex=a.seriesIndex,e.on("mousemove",function(h){e.dataIndex=null;var p=e.findDataIndex(h.offsetX,h.offsetY);0<p&&(e.dataIndex=p+e.__startIndex)}))},Zf._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var ZO={seriesType:"lines",plan:oh(),reset:function(e){var t=e.coordinateSystem,o=e.get("polyline"),a=e.pipelineContext.large;return{progress:function(c,h){var p=[];if(a){var y,w=c.end-c.start;if(o){for(var C=0,n=c.start;n<c.end;n++)C+=e.getLineCoordsCount(n);y=new Float32Array(w+2*C)}else y=new Float32Array(4*w);var i=0,s=[];for(n=c.start;n<c.end;n++){var d=e.getLineCoords(n,p);o&&(y[i++]=d);for(var u=0;u<d;u++)s=t.dataToPoint(p[u],!1,s),y[i++]=s[0],y[i++]=s[1]}h.setLayout("linesPoints",y)}else for(n=c.start;n<c.end;n++){var f=h.getItemModel(n),v=(d=e.getLineCoords(n,p),[]);if(o)for(var _=0;_<d;_++)v.push(t.dataToPoint(p[_]));else{v[0]=t.dataToPoint(p[0]),v[1]=t.dataToPoint(p[1]);var k=f.get("lineStyle.curveness");+k&&(v[2]=[(v[0][0]+v[1][0])/2-(v[0][1]-v[1][1])*k,(v[0][1]+v[1][1])/2-(v[1][0]-v[0][0])*k])}h.setItemLayout(n,v)}}}}};function $w(e){return e instanceof Array||(e=[e,e]),e}Ts({type:"lines",init:function(){},render:function(e,t,o){var a=e.getData(),c=this._updateLineDraw(a,e),h=e.get("zlevel"),p=e.get("effect.trailLength"),y=o.getZr(),w="svg"===y.painter.getType();w||y.painter.getLayer(h).clear(!0),null==this._lastZlevel||w||y.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&p&&(w||y.configLayer(h,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(p/10+.9,1),0)})),c.updateData(a);var C=e.get("clip",!0)&&Ak(e.coordinateSystem,!1,e);C?this.group.setClipPath(C):this.group.removeClipPath(),this._lastZlevel=h,this._finished=!0},incrementalPrepareRender:function(e,t,o){var a=e.getData();this._updateLineDraw(a,e).incrementalPrepareUpdate(a),this._clearLayer(o),this._finished=!1},incrementalRender:function(e,t,o){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,o){var a=e.getData(),c=e.pipelineContext;if(!this._finished||c.large||c.progressiveRender)return{update:!0};var h=ZO.reset(e);h.progress&&h.progress({start:0,end:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(o)},_updateLineDraw:function(e,t){var o=this._lineDraw,a=this._showEffect(t),c=!!t.get("polyline"),h=t.pipelineContext.large;return o&&a===this._hasEffet&&c===this._isPolyline&&h===this._isLargeDraw||(o&&o.remove(),o=this._lineDraw=h?new WT:new Rf(c?a?Px:Sh:a?iy:vg),this._hasEffet=a,this._isPolyline=c,this._isLargeDraw=h,this.group.removeAll()),this.group.add(o.group),o},_showEffect:function(e){return!!e.get("effect.show")},_clearLayer:function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},dispose:function(){}});var uI="lineStyle.opacity".split("."),UT={seriesType:"lines",reset:function(e,t,o){var a=$w(e.get("symbol")),c=$w(e.get("symbolSize")),h=e.getData();return h.setVisual("fromSymbol",a&&a[0]),h.setVisual("toSymbol",a&&a[1]),h.setVisual("fromSymbolSize",c&&c[0]),h.setVisual("toSymbolSize",c&&c[1]),h.setVisual("opacity",e.get(uI)),{dataEach:h.hasItemOption?function(p,y){var w=p.getItemModel(y),C=$w(w.getShallow("symbol",!0)),n=$w(w.getShallow("symbolSize",!0)),i=w.get(uI);C[0]&&p.setItemVisual(y,"fromSymbol",C[0]),C[1]&&p.setItemVisual(y,"toSymbol",C[1]),n[0]&&p.setItemVisual(y,"fromSymbolSize",n[0]),n[1]&&p.setItemVisual(y,"toSymbolSize",n[1]),p.setItemVisual(y,"opacity",i)}:null}}};function hI(){var e=ae();this.canvas=e,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}Wn(ZO),yi(UT),Yr.extend({type:"series.heatmap",getInitialData:function(e,t){return ug(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var e=yl.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}}),hI.prototype={update:function(e,t,o,a,c,h){var p=this._getBrush(),y=this._getGradient(e,c,"inRange"),w=this._getGradient(e,c,"outOfRange"),C=this.pointSize+this.blurSize,n=this.canvas,i=n.getContext("2d"),s=e.length;n.width=t,n.height=o;for(var d=0;d<s;++d){var u=e[d],f=u[0],v=u[1],_=a(u[2]);i.globalAlpha=_,i.drawImage(p,f-C,v-C)}if(!n.width||!n.height)return n;for(var k=i.getImageData(0,0,n.width,n.height),T=k.data,M=0,I=T.length,O=this.minOpacity,R=this.maxOpacity-O;M<I;){_=T[M+3]/256;var N=4*Math.floor(255*_);if(0<_){var z=h(_)?y:w;0<_&&(_=_*R+O),T[M++]=z[N],T[M++]=z[1+N],T[M++]=z[2+N],T[M++]=z[3+N]*_*256}else M+=4}return i.putImageData(k,0,0),n},_getBrush:function(){var e=this._brushCanvas||(this._brushCanvas=ae()),t=this.pointSize+this.blurSize,o=2*t;e.width=o,e.height=o;var a=e.getContext("2d");return a.clearRect(0,0,o,o),a.shadowOffsetX=o,a.shadowBlur=this.blurSize,a.shadowColor="#000",a.beginPath(),a.arc(-t,t,this.pointSize,0,2*Math.PI,!0),a.closePath(),a.fill(),e},_getGradient:function(e,t,o){for(var a=this._gradientPixels,c=a[o]||(a[o]=new Uint8ClampedArray(1024)),h=[0,0,0,0],p=0,y=0;y<256;y++)t[o](y/255,!0,h),c[p++]=h[0],c[p++]=h[1],c[p++]=h[2],c[p++]=h[3];return c}},Ts({type:"heatmap",render:function(e,t,o){var a;t.eachComponent("visualMap",function(h){h.eachTargetSeries(function(p){p===e&&(a=h)})}),this.group.removeAll(),this._incrementalDisplayable=null;var c=e.coordinateSystem;"cartesian2d"===c.type||"calendar"===c.type?this._renderOnCartesianAndCalendar(e,o,0,e.getData().count()):function(h){var p=h.dimensions;return"lng"===p[0]&&"lat"===p[1]}(c)&&this._renderOnGeo(c,e,a,o)},incrementalPrepareRender:function(e,t,o){this.group.removeAll()},incrementalRender:function(e,t,o,a){t.coordinateSystem&&this._renderOnCartesianAndCalendar(t,a,e.start,e.end,!0)},_renderOnCartesianAndCalendar:function(e,t,o,a,c){var h,p,y=e.coordinateSystem;if("cartesian2d"===y.type){var w=y.getAxis("x"),C=y.getAxis("y");h=w.getBandWidth(),p=C.getBandWidth()}for(var n=this.group,i=e.getData(),s="emphasis.itemStyle",d="emphasis.label",u=e.getModel("itemStyle").getItemStyle(["color"]),f=e.getModel(s).getItemStyle(),v=e.getModel("label"),_=e.getModel(d),k=y.type,T="cartesian2d"===k?[i.mapDimension("x"),i.mapDimension("y"),i.mapDimension("value")]:[i.mapDimension("time"),i.mapDimension("value")],M=o;M<a;M++){var I;if("cartesian2d"===k){if(isNaN(i.get(T[2],M)))continue;var O=y.dataToPoint([i.get(T[0],M),i.get(T[1],M)]);I=new sr({shape:{x:Math.floor(Math.round(O[0])-h/2),y:Math.floor(Math.round(O[1])-p/2),width:Math.ceil(h),height:Math.ceil(p)},style:{fill:i.getItemVisual(M,"color"),opacity:i.getItemVisual(M,"opacity")}})}else{if(isNaN(i.get(T[1],M)))continue;I=new sr({z2:1,shape:y.dataToRect([i.get(T[0],M)]).contentShape,style:{fill:i.getItemVisual(M,"color"),opacity:i.getItemVisual(M,"opacity")}})}var R=i.getItemModel(M);i.hasItemOption&&(u=R.getModel("itemStyle").getItemStyle(["color"]),f=R.getModel(s).getItemStyle(),v=R.getModel("label"),_=R.getModel(d));var N=e.getRawValue(M),z="-";N&&null!=N[2]&&(z=N[2]),ei(u,f,v,_,{labelFetcher:e,labelDataIndex:M,defaultText:z,isRectText:!0}),I.setStyle(u),qr(I,i.hasItemOption?f:pe({},f)),(I.incremental=c)&&(I.useHoverLayer=!0),n.add(I),i.setItemGraphicEl(M,I)}},_renderOnGeo:function(e,t,o,a){var c=o.targetVisuals.inRange,h=o.targetVisuals.outOfRange,p=t.getData(),y=this._hmLayer||this._hmLayer||new hI;y.blurSize=t.get("blurSize"),y.pointSize=t.get("pointSize"),y.minOpacity=t.get("minOpacity"),y.maxOpacity=t.get("maxOpacity");var w=e.getViewRect().clone(),C=e.getRoamTransform();w.applyTransform(C);var I,O,R,n=Math.max(w.x,0),i=Math.max(w.y,0),s=Math.min(w.width+w.x,a.getWidth()),d=Math.min(w.height+w.y,a.getHeight()),u=s-n,f=d-i,v=[p.mapDimension("lng"),p.mapDimension("lat"),p.mapDimension("value")],_=p.mapArray(v,function(I,O,R){var N=e.dataToPoint([I,O]);return N[0]-=n,N[1]-=i,N.push(R),N}),k=o.getExtent(),T="visualMap.continuous"===o.type?(O=[((O=o.option.range)[0]-(I=k)[0])/(R=I[1]-I[0]),(O[1]-I[0])/R],function(N){return N>=O[0]&&N<=O[1]}):function(I,O,R){var N=I[1]-I[0],z=(O=Se(O,function(V){return{interval:[(V.interval[0]-I[0])/N,(V.interval[1]-I[0])/N]}})).length,L=0;return function(V){for(var J=L;J<z;J++)if((te=O[J].interval)[0]<=V&&V<=te[1]){L=J;break}if(J===z)for(J=L-1;0<=J;J--){var te;if((te=O[J].interval)[0]<=V&&V<=te[1]){L=J;break}}return 0<=J&&J<z&&R[J]}}(k,o.getPieceList(),o.option.selected);y.update(_,u,f,c.color.getNormalizer(),{inRange:c.color.getColorMapper(),outOfRange:h.color.getColorMapper()},T);var M=new xr({style:{width:u,height:f,x:n,y:i,image:y.canvas},silent:!0});this.group.add(M)},dispose:function(){}});var Bx=Op.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(e){return e.stack=null,Bx.superApply(this,"getInitialData",arguments)}}),gI=["itemStyle","borderWidth"],Cg=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],Ud=new Md;function ay(e,t,o,a){var u,f,_,T,M,I,O,R,N,z,L,V,c=e.getItemLayout(t),h=o.get("symbolRepeat"),p=o.get("symbolClip"),y=o.get("symbolPosition")||"start",w=(o.get("symbolRotate")||0)*Math.PI/180||0,C=o.get("symbolPatternSize")||2,n=o.isAnimationEnabled(),i={dataIndex:t,layout:c,itemModel:o,symbolType:e.getItemVisual(t,"symbol")||"circle",color:e.getItemVisual(t,"color"),symbolClip:p,symbolRepeat:h,symbolRepeatDirection:o.get("symbolRepeatDirection"),symbolPatternSize:C,rotation:w,animationModel:n?o:null,hoverAnimation:n&&o.get("hoverAnimation"),z2:o.getShallow("z",!0)||0};(function(u,f,v,_,k){var T,M=_.valueDim,I=u.get("symbolBoundingData"),O=_.coordSys.getOtherAxis(_.coordSys.getBaseAxis()),R=O.toGlobalCoord(O.dataToCoord(0)),N=1-+(v[M.wh]<=0);if(nt(I)){var z=[Kf(O,I[0])-R,Kf(O,I[1])-R];z[1]<z[0]&&z.reverse(),T=z[N]}else T=null!=I?Kf(O,I)-R:f?_.coordSysExtent[M.index][N]-R:v[M.wh];k.boundingLength=T,f&&(k.repeatCutLength=v[M.wh]),k.pxSign=0<T?1:T<0?-1:0})(o,h,c,a,i),u=e,f=t,_=h,T=i.boundingLength,M=i.pxSign,I=C,R=i,N=(O=a).valueDim,z=O.categoryDim,L=Math.abs(c[z.wh]),(V=nt(V=u.getItemVisual(f,"symbolSize"))?V.slice():(null==V&&(V="100%"),[V,V]))[z.index]=rn(V[z.index],L),V[N.index]=rn(V[N.index],_?L:Math.abs(T)),R.symbolSize=V,(R.symbolScale=[V[0]/I,V[1]/I])[N.index]*=(O.isHorizontal?-1:1)*M,function(u,f,v,_,k){var T=u.get(gI)||0;T&&(Ud.attr({scale:f.slice(),rotation:v}),Ud.updateTransform(),T/=Ud.getLineScale(),T*=f[_.valueDim.index]),k.valueLineWidth=T}(o,i.symbolScale,w,a,i);var s=i.symbolSize,d=o.get("symbolOffset");return nt(d)&&(d=[rn(d[0],s[0]),rn(d[1],s[1])]),function(u,f,v,_,k,T,M,I,O,R,N,z){var L=N.categoryDim,V=N.valueDim,J=z.pxSign,te=Math.max(f[V.index]+I,0),re=te;if(_){var ie=Math.abs(O),he=Jt(u.get("symbolMargin"),"15%")+"",fe=!1;he.lastIndexOf("!")===he.length-1&&(fe=!0,he=he.slice(0,he.length-1)),he=rn(he,f[V.index]);var ye=Math.max(te+2*he,0),Ie=fe?0:2*he,He=sa(_),we=He?_:$T((ie+Ie)/ye);ye=te+2*(he=(ie-we*te)/2/(fe?we:we-1)),Ie=fe?0:2*he,He||"fixed"===_||(we=R?$T((Math.abs(R)+Ie)/ye):0),re=we*ye-Ie,z.repeatTimes=we,z.symbolMargin=he}var De=J*(re/2),Be=z.pathPosition=[];Be[L.index]=v[L.wh]/2,Be[V.index]="start"===M?De:"end"===M?O-De:O/2,T&&(Be[0]+=T[0],Be[1]+=T[1]);var et=z.bundlePosition=[];et[L.index]=v[L.xy],et[V.index]=v[V.xy];var Ye=z.barRectShape=pe({},v);Ye[V.wh]=J*Math.max(Math.abs(v[V.wh]),Math.abs(Be[V.index]+De)),Ye[L.wh]=v[L.wh];var it=z.clipShape={};it[L.xy]=-v[L.xy],it[L.wh]=N.ecSize[L.wh],it[V.xy]=0,it[V.wh]=v[V.wh]}(o,s,c,h,0,d,y,i.valueLineWidth,i.boundingLength,i.repeatCutLength,a,i),i}function Kf(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function kg(e){var t=e.symbolPatternSize,o=Kc(e.symbolType,-t/2,-t/2,t,t,e.color);return o.attr({culling:!0}),"image"!==o.type&&o.setStyle({strokeNoScale:!0}),o}function Gp(e,t,o,a){var c=e.__pictorialBundle,y=o.pathPosition,w=t.valueDim,C=o.repeatTimes||0,n=0,i=o.symbolSize[t.valueDim.index]+o.valueLineWidth+2*o.symbolMargin;for(Vx(e,function(_){_.__pictorialAnimationIndex=n,_.__pictorialRepeatTimes=C,n<C?Ch(_,null,u(n),o,a):Ch(_,null,{scale:[0,0]},o,a,function(){c.remove(_)}),Xw(_,o),n++});n<C;n++){var s=kg(o);s.__pictorialAnimationIndex=n,s.__pictorialRepeatTimes=C,c.add(s);var d=u(n);Ch(s,{position:d.position,scale:[0,0]},{scale:d.scale,rotation:d.rotation},o,a),s.on("mouseover",f).on("mouseout",v),Xw(s,o)}function u(_){var k=y.slice(),T=o.pxSign,M=_;return("start"===o.symbolRepeatDirection?0<T:T<0)&&(M=C-1-_),k[w.index]=i*(M-C/2+.5)+y[w.index],{position:k,scale:o.symbolScale.slice(),rotation:o.rotation}}function f(){Vx(e,function(_){_.trigger("emphasis")})}function v(){Vx(e,function(_){_.trigger("normal")})}}function zx(e,t,o,a){var c=e.__pictorialBundle,h=e.__pictorialMainPath;h?Ch(h,null,{position:o.pathPosition.slice(),scale:o.symbolScale.slice(),rotation:o.rotation},o,a):(h=e.__pictorialMainPath=kg(o),c.add(h),Ch(h,{position:o.pathPosition.slice(),scale:[0,0],rotation:o.rotation},{scale:o.symbolScale.slice()},o,a),h.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),Xw(h,o)}function Fx(e,t,o){var a=pe({},t.barRectShape),c=e.__pictorialBarRect;c?Ch(c,null,{shape:a},t,o):(c=e.__pictorialBarRect=new sr({z2:2,shape:a,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),e.add(c))}function GT(e,t,o,a){if(o.symbolClip){var c=e.__pictorialClipPath,h=pe({},o.clipShape),p=t.valueDim,y=o.animationModel,w=o.dataIndex;if(c)Eo(c,{shape:h},y,w);else{h[p.wh]=0,c=new sr({shape:h}),e.__pictorialBundle.setClipPath(c),e.__pictorialClipPath=c;var C={};C[p.wh]=o.clipShape[p.wh],ti[a?"updateProps":"initProps"](c,{shape:C},y,w)}}}function Yw(e,t){var o=e.getItemModel(t);return o.getAnimationDelayParams=jT,o.isAnimationEnabled=pI,o}function jT(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function pI(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Xw(e,t){e.off("emphasis").off("normal");var o=t.symbolScale.slice();t.hoverAnimation&&e.on("emphasis",function(){this.animateTo({scale:[1.1*o[0],1.1*o[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:o.slice()},400,"elasticOut")})}function Jf(e,t,o,a){var c=new pn,h=new pn;return c.add(h),(c.__pictorialBundle=h).attr("position",o.bundlePosition.slice()),o.symbolRepeat?Gp(c,t,o):zx(c,0,o),Fx(c,o,a),GT(c,t,o,a),c.__pictorialShapeStr=mI(e,o),c.__pictorialSymbolMeta=o,c}function Zw(e,t,o,a){var c=a.__pictorialBarRect;c&&(c.style.text=null);var h=[];Vx(a,function(p){h.push(p)}),a.__pictorialMainPath&&h.push(a.__pictorialMainPath),a.__pictorialClipPath&&(o=null),ee(h,function(p){Eo(p,{scale:[0,0]},o,t,function(){a.parent&&a.parent.remove(a)})}),e.setItemGraphicEl(t,null)}function mI(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function Vx(e,t,o){ee(e.__pictorialBundle.children(),function(a){a!==e.__pictorialBarRect&&t.call(o,a)})}function Ch(e,t,o,a,c,h){t&&e.attr(t),a.symbolClip&&!c?o&&e.attr(o):o&&ti[c?"updateProps":"initProps"](e,o,a.animationModel,a.dataIndex,h)}function qT(e,t,o){var a=o.color,c=o.dataIndex,h=o.itemModel,p=h.getModel("itemStyle").getItemStyle(["color"]),y=h.getModel("emphasis.itemStyle").getItemStyle(),w=h.getShallow("cursor");Vx(e,function(i){i.setColor(a),i.setStyle(_e({fill:a,opacity:o.opacity},p)),qr(i,y),w&&(i.cursor=w),i.z2=o.z2});var C={},n=e.__pictorialBarRect;Q_(n.style,C,h,a,t.seriesModel,c),qr(n,C)}function $T(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}function Kw(e,t,o,a,c){bi.call(this,e,t,o),this.type=a||"value",this.position=c||"bottom",this.orient=null}function YT(e,t,o){this.dimension="single",this.dimensions=["single"],this._axis=null,this._init(e,t,o),this.model=e}function Tu(e,t){t=t||{};var a=e.axis,c={},h=a.position,p=a.orient,y=e.coordinateSystem.getRect(),w=[y.x,y.x+y.width,y.y,y.y+y.height],C={horizontal:{top:w[2],bottom:w[3]},vertical:{left:w[0],right:w[1]}};c.position=["vertical"===p?C.vertical[h]:w[0],"horizontal"===p?C.horizontal[h]:w[3]],c.rotation=Math.PI/2*{horizontal:0,vertical:1}[p],c.labelDirection=c.tickDirection=c.nameDirection={top:-1,bottom:1,right:1,left:-1}[h],e.get("axisTick.inside")&&(c.tickDirection=-c.tickDirection),Jt(t.labelInside,e.get("axisLabel.inside"))&&(c.labelDirection=-c.labelDirection);var n=t.rotate;return null==n&&(n=e.get("axisLabel.rotate")),c.labelRotation="top"===h?-n:n,c.z2=1,c}Ts({type:"pictorialBar",render:function(e,t,o){var a=this.group,c=e.getData(),h=this._data,p=e.coordinateSystem,y=!!p.getBaseAxis().isHorizontal(),w=p.grid.getRect(),C={ecSize:{width:o.getWidth(),height:o.getHeight()},seriesModel:e,coordSys:p,coordSysExtent:[[w.x,w.x+w.width],[w.y,w.y+w.height]],isHorizontal:y,valueDim:Cg[+y],categoryDim:Cg[1-y]};return c.diff(h).add(function(n){if(c.hasValue(n)){var i=Yw(c,n),s=ay(c,n,i,C),d=Jf(c,C,s);c.setItemGraphicEl(n,d),a.add(d),qT(d,C,s)}}).update(function(n,i){var v,_,k,T,M,s=h.getItemGraphicEl(i);if(c.hasValue(n)){var d=Yw(c,n),u=ay(c,n,d,C),f=mI(c,u);s&&f!==s.__pictorialShapeStr&&(a.remove(s),c.setItemGraphicEl(n,null),s=null),s?(_=C,T=(k=u).animationModel,M=k.dataIndex,Eo((v=s).__pictorialBundle,{position:k.bundlePosition.slice()},T,M),k.symbolRepeat?Gp(v,_,k,!0):zx(v,0,k,!0),Fx(v,k,!0),GT(v,_,k,!0)):s=Jf(c,C,u,!0),c.setItemGraphicEl(n,s),s.__pictorialSymbolMeta=u,a.add(s),qT(s,C,u)}else a.remove(s)}).remove(function(n){var i=h.getItemGraphicEl(n);i&&Zw(h,n,i.__pictorialSymbolMeta.animationModel,i)}).execute(),this._data=c,this.group},dispose:Tt,remove:function(e,t){var o=this.group,a=this._data;e.get("animation")?a&&a.eachItemGraphicEl(function(c){Zw(a,c.dataIndex,e,c)}):o.removeAll()}}),Wn(wt(sO,"pictorialBar")),yi(Xl("pictorialBar","roundRect")),Kw.prototype={constructor:Kw,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},pointToData:function(e,t){return this.coordinateSystem.pointToData(e,t)[0]},toGlobalCoord:null,toLocalCoord:null},ve(Kw,bi),yl.register("single",{create:function(e,t){var o=[];return e.eachComponent("singleAxis",function(a,c){var h=new YT(a,e,t);h.name="single_"+c,h.resize(a,t),a.coordinateSystem=h,o.push(h)}),e.eachSeries(function(a){if("singleAxis"===a.get("coordinateSystem")){var c=e.queryComponents({mainType:"singleAxis",index:a.get("singleAxisIndex"),id:a.get("singleAxisId")})[0];a.coordinateSystem=c&&c.coordinateSystem}}),o},dimensions:(YT.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:YT,_init:function(e,t,o){var c=new Kw(this.dimension,Fb(e),[0,0],e.get("type"),e.get("position"));c.onBand="category"===c.type&&e.get("boundaryGap"),c.inverse=e.get("inverse"),c.orient=e.get("orient"),(e.axis=c).model=e,(c.coordinateSystem=this)._axis=c},update:function(e,t){e.eachSeries(function(o){if(o.coordinateSystem===this){var a=o.getData();ee(a.mapDimension(this.dimension,!0),function(c){this._axis.scale.unionExtentFromData(a,c)},this),of(this._axis.scale,this._axis.model)}},this)},resize:function(e,t){this._rect=Xa({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var e=this._rect,t=this._axis,o=t.isHorizontal(),a=o?[0,e.width]:[0,e.height],c=t.reverse?1:0;t.setExtent(a[c],a[1-c]),this._updateAxisTransform(t,o?e.x:e.y)},_updateAxisTransform:function(e,t){var o=e.getExtent(),a=o[0]+o[1],c=e.isHorizontal();e.toGlobalCoord=c?function(h){return h+t}:function(h){return a-h+t},e.toLocalCoord=c?function(h){return h-t}:function(h){return a-h+t}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(e){var t=this.getRect(),o=this.getAxis();return"horizontal"===o.orient?o.contain(o.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:o.contain(o.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},pointToData:function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e["horizontal"===t.orient?0:1]))]},dataToPoint:function(e){var t=this.getAxis(),o=this.getRect(),a=[],c="horizontal"===t.orient?0:1;return e instanceof Array&&(e=e[0]),a[c]=t.toGlobalCoord(t.dataToCoord(+e)),a[1-c]=0==c?o.y+o.height/2:o.x+o.width/2,a}}).dimensions});var Qf=["axisLine","axisTickLabel","axisName"],Gd=["splitArea","splitLine"],XT=ed.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(e,t,o,a){var c=this.group;c.removeAll();var h=this._axisGroup;this._axisGroup=new pn;var p=Tu(e),y=new wl(e,p);ee(Qf,y.add,y),c.add(this._axisGroup),c.add(y.getGroup()),ee(Gd,function(w){e.get(w+".show")&&this["_"+w](e)},this),db(h,this._axisGroup,e),XT.superCall(this,"render",e,t,o,a)},remove:function(){hf(this)},_splitLine:function(e){var t=e.axis;if(!t.scale.isBlank()){var o=e.getModel("splitLine"),a=o.getModel("lineStyle"),c=a.get("width"),h=a.get("color");h=h instanceof Array?h:[h];for(var p=e.coordinateSystem.getRect(),y=t.isHorizontal(),w=[],C=0,n=t.getTicksCoords({tickModel:o}),i=[],s=[],d=0;d<n.length;++d){var u=t.toGlobalCoord(n[d].coord);y?(i[0]=u,i[1]=p.y,s[0]=u,s[1]=p.y+p.height):(i[0]=p.x,i[1]=u,s[0]=p.x+p.width,s[1]=u);var f=C++%h.length;w[f]=w[f]||[],w[f].push(new Ya({subPixelOptimize:!0,shape:{x1:i[0],y1:i[1],x2:s[0],y2:s[1]},style:{lineWidth:c},silent:!0}))}for(d=0;d<w.length;++d)this.group.add(qc(w[d],{style:{stroke:h[d%h.length],lineDash:a.getLineDash(c),lineWidth:c},silent:!0}))}},_splitArea:function(e){zk(this,this._axisGroup,e,e)}}),Jw=wo.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});function ZT(e,t){var o,a=[],c=e.seriesIndex;if(null==c||!(o=t.getSeriesByIndex(c)))return{point:[]};var h=o.getData(),p=pm(h,e);if(null==p||p<0||nt(p))return{point:[]};var y=h.getItemGraphicEl(p),w=o.coordinateSystem;if(o.getTooltipPosition)a=o.getTooltipPosition(p)||[];else if(w&&w.dataToPoint)a=w.dataToPoint(h.getValues(Se(w.dimensions,function(n){return h.mapDimension(n)}),p,!0))||[];else if(y){var C=y.getBoundingRect().clone();C.applyTransform(y.transform),a=[C.x+C.width/2,C.y+C.height/2]}return{point:a,el:y}}le(Jw.prototype,rf),yu("single",Jw,function(e,t){return t.type||(t.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var Mu=ee,Hx=wt,KT=Xi();function JT(e,t,o,a,c){var C,n,i,s,d,u,f,v,h=e.axis;if(!h.scale.isBlank()&&h.containData(t))if(e.involveSeries){var p=(s=(i=(n=e).axis).dim,d=C=t,u=[],f=Number.MAX_VALUE,v=-1,Mu(n.seriesModels,function(_,k){var T,M,I=_.getData().mapDimension(s,!0);if(_.getAxisTooltipData){var O=_.getAxisTooltipData(I,C,i);M=O.dataIndices,T=O.nestestValue}else{if(!(M=_.getData().indicesOfNearest(I[0],C,"category"===i.type?.5:null)).length)return;T=_.getData().get(I[0],M[0])}if(null!=T&&isFinite(T)){var R=C-T,N=Math.abs(R);N<=f&&((N<f||0<=R&&v<0)&&(f=N,v=R,d=T,u.length=0),Mu(M,function(z){u.push({seriesIndex:_.seriesIndex,dataIndexInside:z,dataIndex:_.getData().getRawIndex(z)})}))}}),{payloadBatch:u,snapToValue:d}),y=p.payloadBatch,w=p.snapToValue;y[0]&&null==c.seriesIndex&&pe(c,y[0]),!a&&e.snap&&h.containData(w)&&null!=w&&(t=w),o.showPointer(e,t,y,c),o.showTooltip(e,p,w)}else o.showPointer(e,t)}function fI(e,t,o,a){e[t.key]={value:o,payloadBatch:a}}function QT(e,t,o,a){var c=o.payloadBatch,h=t.axis,p=h.model,y=t.axisPointerModel;if(t.triggerTooltip&&c.length){var w=t.coordSys.model,C=Qc(w),n=e.map[C];n||(n=e.map[C]={coordSysId:w.id,coordSysIndex:w.componentIndex,coordSysType:w.type,coordSysMainType:w.mainType,dataByAxis:[]},e.list.push(n)),n.dataByAxis.push({axisDim:h.dim,axisIndex:p.componentIndex,axisType:p.type,axisId:p.id,value:a,valueLabelOpt:{precision:y.get("label.precision"),formatter:y.get("label.formatter")},seriesDataIndices:c.slice()})}}function Au(e){var t=e.axis.model,o={},a=o.axisDim=e.axis.dim;return o.axisIndex=o[a+"AxisIndex"]=t.componentIndex,o.axisName=o[a+"AxisName"]=t.name,o.axisId=o[a+"AxisId"]=t.id,o}function Tn(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}Gs({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var Ql=Xi(),vI=ee;function Wx(e,t,o){if(!Oe.node){var a=t.getZr();Ql(a).records||(Ql(a).records={}),function(c,h){function p(y,w){c.on(y,function(C){var i,s,d,n=(i=h,{dispatchAction:d=function(u){var f=s[u.type];f?f.push(u):(u.dispatchAction=d,i.dispatchAction(u))},pendings:s={showTip:[],hideTip:[]}});vI(Ql(c).records,function(i){i&&w(i,C,n.dispatchAction)}),function(i,s){var d,u=i.showTip.length,f=i.hideTip.length;u?d=i.showTip[u-1]:f&&(d=i.hideTip[f-1]),d&&(d.dispatchAction=null,s.dispatchAction(d))}(n.pendings,h)})}Ql(c).initialized||(Ql(c).initialized=!0,p("click",wt(eM,"click")),p("mousemove",wt(eM,"mousemove")),p("globalout",yI))}(a,t),(Ql(a).records[e]||(Ql(a).records[e]={})).handler=o}}function yI(e,t,o){e.handler("leave",null,o)}function eM(e,t,o,a){t.handler(e,o,a)}function Qw(e,t){if(!Oe.node){var o=t.getZr();(Ql(o).records||{})[e]&&(Ql(o).records[e]=null)}}var sy=fr({type:"axisPointer",render:function(e,t,o){var a=t.getComponent("tooltip"),c=e.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";Wx("axisPointer",o,function(h,p,y){"none"!==c&&("leave"===h||0<=c.indexOf(h))&&y({type:"updateAxisPointer",currTrigger:h,x:p&&p.offsetX,y:p&&p.offsetY})})},remove:function(e,t){Qw(t.getZr(),"axisPointer"),sy.superApply(this._model,"remove",arguments)},dispose:function(e,t){Qw("axisPointer",t),sy.superApply(this._model,"dispose",arguments)}}),jp=Xi(),tM=K,ev=rt;function tv(){}function bI(e,t,o,a){!function c(h,p){if(ue(h)&&ue(p)){var y=!0;return ee(p,function(w,C){y=y&&c(h[C],w)}),!!y}return h===p}(jp(o).lastProp,a)&&(jp(o).lastProp=a,t?Eo(o,a,e):(o.stopAnimation(),o.attr(a)))}function nM(e,t){e[t.get("label.show")?"show":"hide"]()}function oM(e){return{position:e.position.slice(),rotation:e.rotation||0}}function KO(e,t,o){var a=t.get("z"),c=t.get("zlevel");e&&e.traverse(function(h){"group"!==h.type&&(null!=a&&(h.z=a),null!=c&&(h.zlevel=c),h.silent=o)})}function xI(e){var t,o=e.get("type"),a=e.getModel(o+"Style");return"line"===o?(t=a.getLineStyle()).fill=null:"shadow"===o&&((t=a.getAreaStyle()).stroke=null),t}function _I(e,t,o,a,c){var h=JO(o.get("value"),t.axis,t.ecModel,o.get("seriesDataIndices"),{precision:o.get("label.precision"),formatter:o.get("label.formatter")}),p=o.getModel("label"),y=Em(p.get("padding")||0),w=p.getFont(),C=rl(h,w),n=c.position,i=C.width+y[1]+y[3],s=C.height+y[0]+y[2],d=c.align;"right"===d&&(n[0]-=i),"center"===d&&(n[0]-=i/2);var v,_,k,T,M,I,u=c.verticalAlign;"bottom"===u&&(n[1]-=s),"middle"===u&&(n[1]-=s/2),v=n,_=i,k=s,M=(T=a).getWidth(),I=T.getHeight(),v[0]=Math.min(v[0]+_,M)-_,v[1]=Math.min(v[1]+k,I)-k,v[0]=Math.max(v[0],0),v[1]=Math.max(v[1],0);var f=p.get("backgroundColor");f&&"auto"!==f||(f=t.get("axisLine.lineStyle.color")),e.label={shape:{x:0,y:0,width:i,height:s,r:p.get("borderRadius")},position:n.slice(),style:{text:h,textFont:w,textFill:p.getTextColor(),textPosition:"inside",textPadding:y,fill:f,stroke:p.get("borderColor")||"transparent",lineWidth:p.get("borderWidth")||0,shadowBlur:p.get("shadowBlur"),shadowColor:p.get("shadowColor"),shadowOffsetX:p.get("shadowOffsetX"),shadowOffsetY:p.get("shadowOffsetY")},z2:10}}function JO(e,t,o,a,c){e=t.scale.parse(e);var h=t.scale.getLabel(e,{precision:c.precision}),p=c.formatter;if(p){var y={value:yk(t,e),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};ee(a,function(w){var C=o.getSeriesByIndex(w.seriesIndex),i=C&&C.getDataParams(w.dataIndexInside);i&&y.seriesData.push(i)}),Wt(p)?h=p.replace("{value}",h):Bt(p)&&(h=p(y))}return h}function wI(e,t,o){var a=Ii();return Rc(a,a,o.rotation),zr(a,a,o.position),vi([e.dataToCoord(t),(o.labelOffset||0)+(o.labelDirection||1)*(o.labelMargin||0)],a)}function eS(e,t,o,a,c,h){var p=wl.innerTextLayout(o.rotation,0,o.labelDirection);o.labelMargin=c.get("label.margin"),_I(t,a,c,h,{position:wI(a.axis,e,o),align:p.textAlign,verticalAlign:p.textVerticalAlign})}function Ux(e,t,o){return{x1:e[o=o||0],y1:e[1-o],x2:t[o],y2:t[1-o]}}function SI(e,t,o){return{x:e[o=o||0],y:e[1-o],width:t[o],height:t[1-o]}}function tS(e,t,o,a,c,h){return{cx:e,cy:t,r0:o,r:a,startAngle:c,endAngle:h,clockwise:!0}}Yy((tv.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(e,t,o,a){var c=t.get("value"),h=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=o,a||this._lastValue!==c||this._lastStatus!==h){this._lastValue=c,this._lastStatus=h;var p=this._group,y=this._handle;if(!h||"hide"===h)return p&&p.hide(),void(y&&y.hide());p&&p.show(),y&&y.show();var w={};this.makeElOption(w,c,e,t,o);var C=w.graphicKey;C!==this._lastGraphicKey&&this.clear(o),this._lastGraphicKey=C;var n=this._moveAnimation=this.determineAnimation(e,t);if(p){var i=wt(bI,t,n);this.updatePointerEl(p,w,i,t),this.updateLabelEl(p,w,i,t)}else p=this._group=new pn,this.createPointerEl(p,w,e,t),this.createLabelEl(p,w,e,t),o.getZr().add(p);KO(p,t,!0),this._renderHandle(c)}},remove:function(e){this.clear(e)},dispose:function(e){this.clear(e)},determineAnimation:function(e,t){var o=t.get("animation"),a=e.axis,c="category"===a.type,h=t.get("snap");if(!h&&!c)return!1;if("auto"!==o&&null!=o)return!0===o;var p=this.animationThreshold;if(c&&a.getBandWidth()>p)return!0;if(h){var y=Xb(e).seriesDataCount,w=a.getExtent();return Math.abs(w[0]-w[1])/y>p}return!1},makeElOption:function(e,t,o,a,c){},createPointerEl:function(e,t,o,a){var c=t.pointer;if(c){var h=jp(e).pointerEl=new ti[c.type](tM(t.pointer));e.add(h)}},createLabelEl:function(e,t,o,a){if(t.label){var c=jp(e).labelEl=new sr(tM(t.label));e.add(c),nM(c,a)}},updatePointerEl:function(e,t,o){var a=jp(e).pointerEl;a&&t.pointer&&(a.setStyle(t.pointer.style),o(a,{shape:t.pointer.shape}))},updateLabelEl:function(e,t,o,a){var c=jp(e).labelEl;c&&(c.setStyle(t.label.style),o(c,{shape:t.label.shape,position:t.label.position}),nM(c,a))},_renderHandle:function(e){if(!this._dragging&&this.updateHandleTransform){var t,o=this._axisPointerModel,a=this._api.getZr(),c=this._handle,h=o.getModel("handle"),p=o.get("status");if(!h.get("show")||!p||"hide"===p)return c&&a.remove(c),void(this._handle=null);this._handle||(t=!0,c=this._handle=Im(h.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(w){Xn(w.event)},onmousedown:ev(this._onHandleDragMove,this,0,0),drift:ev(this._onHandleDragMove,this),ondragend:ev(this._onHandleDragEnd,this)}),a.add(c)),KO(c,o,!1),c.setStyle(h.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var y=h.get("size");nt(y)||(y=[y,y]),c.attr("scale",[y[0]/2,y[1]/2]),pp(this,"_doDispatchAxisPointer",h.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},_moveHandleToValue:function(e,t){bI(this._axisPointerModel,!t&&this._moveAnimation,this._handle,oM(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(e,t){var o=this._handle;if(o){this._dragging=!0;var a=this.updateHandleTransform(oM(o),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=a,o.stopAnimation(),o.attr(oM(a)),jp(o).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},_onHandleDragEnd:function(e){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),o=this._group,a=this._handle;t&&o&&(this._lastGraphicKey=null,o&&t.remove(o),a&&t.remove(a),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(e,t,o){return{x:e[o=o||0],y:e[1-o],width:t[o],height:t[1-o]}}}).constructor=tv);var QO=tv.extend({makeElOption:function(e,t,o,a,c){var h=o.axis,p=h.grid,y=a.get("type"),w=rM(p,h).getOtherAxis(h).getGlobalExtent(),C=h.toGlobalCoord(h.dataToCoord(t,!0));if(y&&"none"!==y){var n=xI(a),i=eE[y](h,C,w);i.style=n,e.graphicKey=i.type,e.pointer=i}eS(t,e,Kb(p.model,o),o,a,c)},getHandleTransform:function(e,t,o){var a=Kb(t.axis.grid.model,t,{labelInside:!1});return a.labelMargin=o.get("handle.margin"),{position:wI(t.axis,e,a),rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,o,a){var c=o.axis,h=c.grid,p=c.getGlobalExtent(!0),y=rM(h,c).getOtherAxis(c).getGlobalExtent(),w="x"===c.dim?0:1,C=e.position;C[w]+=t[w],C[w]=Math.min(p[1],C[w]),C[w]=Math.max(p[0],C[w]);var n=(y[1]+y[0])/2,i=[n,n];return i[w]=C[w],{position:C,rotation:e.rotation,cursorPoint:i,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][w]}}});function rM(e,t){var o={};return o[t.dim+"AxisIndex"]=t.index,e.getCartesian(o)}var eE={line:function(e,t,o){return{type:"Line",subPixelOptimize:!0,shape:Ux([t,o[0]],[t,o[1]],CI(e))}},shadow:function(e,t,o){var a=Math.max(1,e.getBandWidth());return{type:"Rect",shape:SI([t-a/2,o[0]],[a,o[1]-o[0]],CI(e))}}};function CI(e){return"x"===e.dim?0:1}ed.registerAxisPointerClass("CartesianAxisPointer",QO),ks(function(e){if(e){e.axisPointer&&0!==e.axisPointer.length||(e.axisPointer={});var t=e.axisPointer.link;t&&!nt(t)&&(e.axisPointer.link=[t])}}),Kt(Xc.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=function Z_(e,t){var o={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(a,c,h){var p=c.getComponent("tooltip"),y=c.getComponent("axisPointer"),w=y.get("link",!0)||[],C=[];uf(h.getCoordinateSystems(),function(n){if(n.axisPointerEnabled){var i=Qc(n.model),s=a.coordSysAxesInfo[i]={},d=(a.coordSysMap[i]=n).model.getModel("tooltip",p);if(uf(n.getAxes(),$b(_,!1,null)),n.getTooltipAxes&&p&&d.get("show")){var u="axis"===d.get("trigger"),f="cross"===d.get("axisPointer.type"),v=n.getTooltipAxes(d.get("axisPointer.axis"));(u||f)&&uf(v.baseAxes,$b(_,!f||"cross",u)),f&&uf(v.otherAxes,$b(_,"cross",!1))}}function _(k,T,M){var I=M.model.getModel("axisPointer",y),O=I.get("show");if(O&&("auto"!==O||k||D0(I))){null==T&&(T=I.get("triggerTooltip"));var R=(I=k?function(te,re,ie,he,fe,ye){var Ie=re.getModel("axisPointer"),He={};uf(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(et){He[et]=K(Ie.get(et))}),He.snap="category"!==te.type&&!!ye,"cross"===Ie.get("type")&&(He.type="line");var we=He.label||(He.label={});if(null==we.show&&(we.show=!1),"cross"===fe){var De=Ie.get("label.show");if(we.show=null==De||De,!ye){var Be=He.lineStyle=Ie.get("crossStyle");Be&&_e(we,Be.textStyle)}}return te.model.getModel("axisPointer",new Fo(He,ie,he))}(M,d,y,c,k,T):I).get("snap"),N=Qc(M.model),z=T||R||"category"===M.type,L=a.axesInfo[N]={key:N,axis:M,coordSys:n,axisPointerModel:I,triggerTooltip:T,involveSeries:z,snap:R,useHandle:D0(I),seriesModels:[]};s[N]=L,a.seriesInvolved|=z;var V=function(te,re){for(var ie=re.model,he=re.dim,fe=0;fe<te.length;fe++){var ye=te[fe]||{};if(Yb(ye[he+"AxisId"],ie.id)||Yb(ye[he+"AxisIndex"],ie.componentIndex)||Yb(ye[he+"AxisName"],ie.name))return fe}}(w,M);if(null!=V){var J=C[V]||(C[V]={axesInfo:{}});J.axesInfo[N]=L,J.mapper=w[V].mapper,L.linkGroup=J}}}})}(o,e,t),o.seriesInvolved&&function(a,c){c.eachSeries(function(h){var p=h.coordinateSystem,y=h.get("tooltip.trigger",!0),w=h.get("tooltip.show",!0);p&&"none"!==y&&!1!==y&&"item"!==y&&!1!==w&&!1!==h.get("axisPointer.show",!0)&&uf(a.coordSysAxesInfo[Qc(p.model)],function(C){var n=C.axis;p.getAxis(n.dim)===n&&(C.seriesModels.push(h),null==C.seriesDataCount&&(C.seriesDataCount=0),C.seriesDataCount+=h.getData().count())})},this)}(o,e),o}(e,t)}),Xo({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(e,t,o){var _,k,M,a=e.currTrigger,c=[e.x,e.y],h=e,p=e.dispatchAction||rt(o.dispatchAction,o),y=t.getComponent("axisPointer").coordSysAxesInfo;if(y){Tn(c)&&(c=ZT({seriesIndex:h.seriesIndex,dataIndex:h.dataIndex},t).point);var w=Tn(c),C=h.axesInfo,n=y.axesInfo,i="leave"===a||Tn(c),s={},d={},u={list:[],map:{}},f={showPointer:Hx(fI,d),showTooltip:Hx(QT,u)};Mu(y.coordSysMap,function(_,k){var T=w||_.containPoint(c);Mu(y.coordSysAxesInfo[k],function(M,I){var O=M.axis,R=function(z,L){for(var V=0;V<(z||[]).length;V++){var J=z[V];if(L.axis.dim===J.axisDim&&L.axis.model.componentIndex===J.axisIndex)return J}}(C,M);if(!i&&T&&(!C||R)){var N=R&&R.value;null!=N||w||(N=O.pointToData(c)),null!=N&&JT(M,N,f,!1,s)}})});var v={};return Mu(n,function(_,k){var T=_.linkGroup;T&&!d[k]&&Mu(T.axesInfo,function(M,I){var O=d[I];if(M!==_&&O){var R=O.value;T.mapper&&(R=_.axis.scale.parse(T.mapper(R,Au(M),Au(_)))),v[_.key]=R}})}),Mu(v,function(_,k){JT(n[k],_,f,!0,s)}),_=d,k=n,M=s.axesInfo=[],Mu(k,function(I,O){var R=I.axisPointerModel.option,N=_[O];N?(I.useHandle||(R.status="show"),R.value=N.value,R.seriesDataIndices=(N.payloadBatch||[]).slice()):I.useHandle||(R.status="hide"),"show"===R.status&&M.push({axisDim:I.axis.dim,axisIndex:I.axis.model.componentIndex,value:R.value})}),function(_,k,T,M){if(Tn(k)||!_.list.length)return M({type:"hideTip"});var I=((_.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};M({type:"showTip",escapeConnect:!0,x:k[0],y:k[1],tooltipOption:T.tooltipOption,position:T.position,dataIndexInside:I.dataIndexInside,dataIndex:I.dataIndex,seriesIndex:I.seriesIndex,dataByCoordSys:_.list})}(u,c,e,p),function(_,k,T){var M=T.getZr(),I="axisPointerLastHighlights",O=KT(M)[I]||{},R=KT(M)[I]={};Mu(_,function(L,V){var J=L.axisPointerModel.option;"show"===J.status&&Mu(J.seriesDataIndices,function(te){R[te.seriesIndex+" | "+te.dataIndex]=te})});var N=[],z=[];ee(O,function(L,V){R[V]||z.push(L)}),ee(R,function(L,V){O[V]||N.push(L)}),z.length&&T.dispatchAction({type:"downplay",escapeConnect:!0,batch:z}),N.length&&T.dispatchAction({type:"highlight",escapeConnect:!0,batch:N})}(n,0,o),s}});var tE=["x","y"],nE=["width","height"],ud=tv.extend({makeElOption:function(e,t,o,a,c){var h=o.axis,p=h.coordinateSystem,y=nS(p,1-Tg(h)),w=p.dataToPoint(t)[0],C=a.get("type");if(C&&"none"!==C){var n=xI(a),i=ly[C](h,w,y);i.style=n,e.graphicKey=i.type,e.pointer=i}eS(t,e,Tu(o),o,a,c)},getHandleTransform:function(e,t,o){var a=Tu(t,{labelInside:!1});return a.labelMargin=o.get("handle.margin"),{position:wI(t.axis,e,a),rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,o,a){var c=o.axis,h=c.coordinateSystem,p=Tg(c),y=nS(h,p),w=e.position;w[p]+=t[p],w[p]=Math.min(y[1],w[p]),w[p]=Math.max(y[0],w[p]);var C=nS(h,1-p),n=(C[1]+C[0])/2,i=[n,n];return i[p]=w[p],{position:w,rotation:e.rotation,cursorPoint:i,tooltipOption:{verticalAlign:"middle"}}}}),ly={line:function(e,t,o){return{type:"Line",subPixelOptimize:!0,shape:Ux([t,o[0]],[t,o[1]],Tg(e))}},shadow:function(e,t,o){var a=e.getBandWidth();return{type:"Rect",shape:SI([t-a/2,o[0]],[a,o[1]-o[0]],Tg(e))}}};function Tg(e){return e.isHorizontal()?0:1}function nS(e,t){var o=e.getRect();return[o[tE[t]],o[tE[t]]+o[nE[t]]]}ed.registerAxisPointerClass("SingleAxisPointer",ud),fr({type:"single"});var kI=Yr.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(e){kI.superApply(this,"init",arguments),this.legendVisualProvider=new L0(rt(this.getData,this),rt(this.getRawData,this))},fixData:function(e){var t=e.length,o={},a=Kg(e,function(n){return o.hasOwnProperty(n[0])||(o[n[0]]=-1),n[2]}),c=[];a.buckets.each(function(n,i){c.push({name:i,dataList:n})});for(var h=c.length,p=0;p<h;++p){for(var y=c[p].name,w=0;w<c[p].dataList.length;++w)o[C=c[p].dataList[w][0]]=p;for(var C in o)o.hasOwnProperty(C)&&o[C]!==p&&(o[C]=p,e[t]=[],e[t][0]=C,e[t][1]=0,e[t][2]=y,t++)}return e},getInitialData:function(e,t){for(var o=t.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),a=We(e.data,function(i){return void 0!==i[2]}),c=this.fixData(a||[]),h=[],p=this.nameMap=ft(),y=0,w=0;w<c.length;++w)h.push(c[w][2]),p.get(c[w][2])||(p.set(c[w][2],y),y++);var C=S0(c,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:nk(o)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),n=new Ja(C,this);return n.initData(c),n},getLayerSeries:function(){for(var e=this.getData(),t=e.count(),o=[],a=0;a<t;++a)o[a]=a;var c=e.mapDimension("single"),h=Kg(o,function(y){return e.get("name",y)}),p=[];return h.buckets.each(function(y,w){y.sort(function(C,n){return e.get(c,C)-e.get(c,n)}),p.push({name:w,indices:y})}),p},getAxisTooltipData:function(e,t,o){nt(e)||(e=e?[e]:[]);for(var a,c=this.getData(),h=this.getLayerSeries(),p=[],y=h.length,w=0;w<y;++w){for(var C=Number.MAX_VALUE,n=-1,i=h[w].indices.length,s=0;s<i;++s){var d=c.get(e[0],h[w].indices[s]),u=Math.abs(d-t);u<=C&&(a=d,C=u,n=h[w].indices[s])}p.push(n)}return{dataIndices:p,nestestValue:a}},formatTooltip:function(e){var t=this.getData(),o=t.getName(e),a=t.get(t.mapDimension("value"),e);return!isNaN(a)&&null!=a||(a="-"),Hi(o+" : "+a)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});function TI(e,t,o){if(e.count())for(var a,c=t.coordinateSystem,h=t.getLayerSeries(),p=e.mapDimension("single"),y=e.mapDimension("value"),w=Se(h,function(v){return Se(v.indices,function(_){var k=c.dataToPoint(e.get(p,_));return k[1]=e.get(y,_),k})}),C=function(v){for(var _=v.length,k=v[0].length,T=[],M=[],I=0,O={},R=0;R<k;++R){for(var N=0,z=0;N<_;++N)z+=v[N][R][1];I<z&&(I=z),T.push(z)}for(var L=0;L<k;++L)M[L]=(I-T[L])/2;for(var V=I=0;V<k;++V){var J=T[V]+M[V];I<J&&(I=J)}return O.y0=M,O.max=I,O}(w),n=C.y0,i=o/C.max,s=h.length,d=h[0].indices.length,u=0;u<d;++u){e.setItemLayout(h[0].indices[u],{layerIndex:0,x:w[0][u][0],y0:a=n[u]*i,y:w[0][u][1]*i});for(var f=1;f<s;++f)e.setItemLayout(h[f].indices[u],{layerIndex:f,x:w[f][u][0],y0:a+=w[f-1][u][1]*i,y:w[f][u][1]*i})}}Ts({type:"themeRiver",init:function(){this._layers=[]},render:function(e,t,o){var a=e.getData(),c=this.group,h=e.getLayerSeries(),p=a.getLayout("layoutInfo");function C(d){return d.name}c.attr("position",[0,p.rect.y+p.boundaryGap[0]]);var n=new za(this._layersSeries||[],h,C,C),i={};function s(d,u,f){var Ie,He,De,v=this._layers;if("remove"!==d){for(var _,k,T,M=[],I=[],O=h[u].indices,R=0;R<O.length;R++){var N=a.getItemLayout(O[R]),z=N.x,L=N.y0,V=N.y;M.push([z,L]),I.push([z,L+V]),_=a.getItemVisual(O[R],"color")}var J=a.getItemLayout(O[0]),te=a.getItemModel(O[R-1]),re=te.getModel("label"),ie=re.get("margin");if("add"===d){var he=i[u]=new pn;k=new Wb({shape:{points:M,stackedOnPoints:I,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),T=new Yo({style:{x:J.x-ie,y:J.y0+J.y/2}}),he.add(k),he.add(T),c.add(he),k.setClipPath((Ie=k.getBoundingRect(),He=e,Fs(De=new sr({shape:{x:Ie.x-10,y:Ie.y-10,width:0,height:Ie.height+20}}),{shape:{width:Ie.width+20,height:Ie.height+20}},He,function(){k.removeClipPath()}),De))}else k=(he=v[f]).childAt(0),T=he.childAt(1),c.add(he),i[u]=he,Eo(k,{shape:{points:M,stackedOnPoints:I}},e),Eo(T,{style:{x:J.x-ie,y:J.y0+J.y/2}},e);var fe=te.getModel("emphasis.itemStyle"),ye=te.getModel("itemStyle");Fi(T.style,re,{text:re.get("show")?e.getFormattedLabel(O[R-1],"normal")||a.getName(O[R-1]):null,textVerticalAlign:"middle"}),k.setStyle(pe({fill:_},ye.getItemStyle(["color"]))),qr(k,fe.getItemStyle())}else c.remove(v[u])}n.add(rt(s,this,"add")).update(rt(s,this,"update")).remove(rt(s,this,"remove")).execute(),this._layersSeries=h,this._layers=i},dispose:function(){}}),Wn(function(e,t){e.eachSeriesByType("themeRiver",function(o){var a=o.getData(),c=o.coordinateSystem,h={},p=c.getRect();h.rect=p;var y=o.get("boundaryGap"),w=c.getAxis();h.boundaryGap=y,"horizontal"===w.orient?(y[0]=rn(y[0],p.height),y[1]=rn(y[1],p.height),TI(a,o,p.height-y[0]-y[1])):(y[0]=rn(y[0],p.width),y[1]=rn(y[1],p.width),TI(a,o,p.width-y[0]-y[1])),a.setLayout("layoutInfo",h)})}),yi(function(e){e.eachSeriesByType("themeRiver",function(t){var o=t.getData(),a=t.getRawData(),c=t.get("color"),h=ft();o.each(function(p){h.set(o.getRawIndex(p),p)}),a.each(function(p){var y=a.getName(p),w=c[(t.nameMap.get(y)-1)%c.length];a.setItemVisual(p,"color",w);var C=h.get(p);null!=C&&o.setItemVisual(C,"color",w)})})}),Kt(zd("themeRiver")),Yr.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(e,t){var o={name:e.name,children:e.data};!function h(p){var y=0;ee(p.children,function(C){h(C);var n=C.value;nt(n)&&(n=n[0]),y+=n});var w=p.value;nt(w)&&(w=w[0]),null!=w&&!isNaN(w)||(w=y),w<0&&(w=0),nt(p.value)?p.value[0]=w:p.value=w}(o);var a=Se(e.levels||[],function(h){return new Fo(h,this,t)},this),c=Rp.createTree(o,this,function(h){h.wrapMethod("getItemModel",function(p,y){var w=c.getNodeByDataIndex(y),C=a[w.depth];return C&&(p.parentModel=C),p})});return c.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(e){var t=Yr.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=fw(o,this),t},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});var hd=2,aM=4;function Gx(e,t,o){pn.call(this);var a=new uc({z2:hd});a.seriesIndex=t.seriesIndex;var c=new Yo({z2:aM,silent:e.getModel("label").get("silent")});function h(){c.ignore=c.hoverIgnore}function p(){c.ignore=c.normalIgnore}this.add(a),this.add(c),this.updateData(!0,e,"normal",t,o),this.on("emphasis",h).on("normal",p).on("mouseover",h).on("mouseout",p)}var qp=Gx.prototype;qp.updateData=function(e,t,o,a,c){(this.node=t).piece=this,a=a||this._seriesModel,c=c||this._ecModel;var h=this.childAt(0);h.dataIndex=t.dataIndex;var p=t.getModel(),y=t.getLayout(),w=pe({},y);w.label=null;var u,v,C=function(u,f,v){var _=u.getVisual("color"),k=u.getVisual("visualMeta");k&&0!==k.length||(_=null);var T=u.getModel("itemStyle").get("color");if(T)return T;if(_)return _;if(0===u.depth)return v.option.color[0];var M=v.option.color.length;return v.option.color[function(I){for(var O=I;1<O.depth;)O=O.parentNode;return Ue(I.getAncestors()[0].children,O)}(u)%M]}(t,0,c);u=t,v=C,a.getData().setItemVisual(u.dataIndex,"color",v);var n,i=p.getModel("itemStyle").getItemStyle();n=_e({lineJoin:"bevel",fill:(n="normal"===o?i:le(p.getModel(o+".itemStyle").getItemStyle(),i)).fill||C},n),e?(h.setShape(w),h.shape.r=y.r0,Eo(h,{shape:{r:y.r}},a,t.dataIndex),h.useStyle(n)):"object"==typeof n.fill&&n.fill.type||"object"==typeof h.style.fill&&h.style.fill.type?(Eo(h,{shape:w},a),h.useStyle(n)):Eo(h,{shape:w,style:n},a),this._updateLabel(a,C,o);var s=p.getShallow("cursor");if(s&&h.attr("cursor",s),e){var d=a.getShallow("highlightPolicy");this._initEvents(h,t,a,d)}this._seriesModel=a||this._seriesModel,this._ecModel=c||this._ecModel,qr(this)},qp.onEmphasis=function(e){var t=this;this.node.hostTree.root.eachNode(function(o){o.piece&&(t.node===o?o.piece.updateData(!1,o,"emphasis"):function(a,c,h){return"none"!==h&&("self"===h?a===c:"ancestor"===h?a===c||a.isAncestorOf(c):a===c||a.isDescendantOf(c))}(o,t.node,e)?o.piece.childAt(0).trigger("highlight"):"none"!==e&&o.piece.childAt(0).trigger("downplay"))})},qp.onNormal=function(){this.node.hostTree.root.eachNode(function(e){e.piece&&e.piece.updateData(!1,e,"normal")})},qp.onHighlight=function(){this.updateData(!1,this.node,"highlight")},qp.onDownplay=function(){this.updateData(!1,this.node,"downplay")},qp._updateLabel=function(e,t,o){var a=this.node.getModel(),c=a.getModel("label"),h="normal"===o||"emphasis"===o?c:a.getModel(o+".label"),p=a.getModel("emphasis.label"),y=h.get("formatter")?o:"normal",w=Jt(e.getFormattedLabel(this.node.dataIndex,y,null,null,"label"),this.node.name);!1===N("show")&&(w="");var C=this.node.getLayout(),n=h.get("minAngle");null==n&&(n=c.get("minAngle")),null!=(n=n/180*Math.PI)&&Math.abs(C.endAngle-C.startAngle)<n&&(w="");var s=this.childAt(1);ei(s.style,s.hoverStyle||{},c,p,{defaultText:h.getShallow("show")?w:null,autoColor:t,useInsideStyle:!0});var d,u=(C.startAngle+C.endAngle)/2,f=Math.cos(u),v=Math.sin(u),_=N("position"),k=N("distance")||0,T=N("align");"outside"===_?(d=C.r+k,T=u>Math.PI/2?"right":"left"):T&&"center"!==T?"left"===T?(d=C.r0+k,u>Math.PI/2&&(T="right")):"right"===T&&(d=C.r-k,u>Math.PI/2&&(T="left")):(d=(C.r+C.r0)/2,T="center"),s.attr("style",{text:w,textAlign:T,textVerticalAlign:N("verticalAlign")||"middle",opacity:N("opacity")}),s.attr("position",[d*f+C.cx,d*v+C.cy]);var O=N("rotate"),R=0;function N(z){return h.get(z)??c.get(z)}"radial"===O?(R=-u)<-Math.PI/2&&(R+=Math.PI):"tangential"===O?(R=Math.PI/2-u)>Math.PI/2?R-=Math.PI:R<-Math.PI/2&&(R+=Math.PI):"number"==typeof O&&(R=O*Math.PI/180),s.attr("rotation",R)},qp._initEvents=function(e,t,o,a){function c(){p.onEmphasis(a)}function h(){p.onNormal()}e.off("mouseover").off("mouseout").off("emphasis").off("normal");var p=this;o.isAnimationEnabled()&&e.on("mouseover",c).on("mouseout",h).on("emphasis",c).on("normal",h).on("downplay",function(){p.onDownplay()}).on("highlight",function(){p.onHighlight()})},ve(Gx,pn),Za.extend({type:"sunburst",init:function(){},render:function(e,t,o,a){var c=this;this.seriesModel=e,this.api=o,this.ecModel=t;var h=e.getData(),p=h.tree.root,y=e.getViewRoot(),w=this.group,C=e.get("renderLabelForZeroData"),n=[];if(y.eachNode(function(u){n.push(u)}),function(u,f){function v(k){return k.getId()}function _(k,T){!function(M,I){if(C||!M||M.getValue()||(M=null),M!==p&&I!==p)if(I&&I.piece)M?(I.piece.updateData(!1,M,"normal",e,t),h.setItemGraphicEl(M.dataIndex,I.piece)):(R=I)&&R.piece&&(w.remove(R.piece),R.piece=null);else if(M){var O=new Gx(M,e,t);w.add(O),h.setItemGraphicEl(M.dataIndex,O)}var R}(null==k?null:u[k],null==T?null:f[T])}0===u.length&&0===f.length||new za(f,u,v,v).add(_).update(_).remove(wt(_,null)).execute()}(n,this._oldChildren||[]),function(u,f){if(0<f.depth){c.virtualPiece?c.virtualPiece.updateData(!1,u,"normal",e,t):(c.virtualPiece=new Gx(u,e,t),w.add(c.virtualPiece)),f.piece._onclickEvent&&f.piece.off("click",f.piece._onclickEvent);var v=function(_){c._rootToNode(f.parentNode)};f.piece._onclickEvent=v,c.virtualPiece.on("click",v)}else c.virtualPiece&&(w.remove(c.virtualPiece),c.virtualPiece=null)}(p,y),a&&a.highlight&&a.highlight.piece){var s=e.getShallow("highlightPolicy");a.highlight.piece.onEmphasis(s)}else if(a&&a.unhighlight){var d=this.virtualPiece;!d&&p.children.length&&(d=p.children[0].piece),d&&d.onNormal()}this._initEvents(),this._oldChildren=n},dispose:function(){},_initEvents:function(){function e(o){var a=!1;t.seriesModel.getViewRoot().eachNode(function(c){if(!a&&c.piece&&c.piece.childAt(0)===o.target){var h=c.getModel().get("nodeClick");if("rootToNode"===h)t._rootToNode(c);else if("link"===h){var p=c.getModel(),y=p.get("link");y&&gc(y,p.get("target",!0)||"_blank")}a=!0}})}var t=this;this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",e),this.group._onclickEvent=e},_rootToNode:function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},containPoint:function(e,t){var o=t.getData().getItemLayout(0);if(o){var a=e[0]-o.cx,c=e[1]-o.cy,h=Math.sqrt(a*a+c*c);return h<=o.r&&h>=o.r0}}});var Iu="sunburstRootToNode";Xo({type:Iu,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(o,a){var c=H0(e,[Iu],o);if(c){var h=o.getViewRoot();h&&(e.direction=mw(h,c.node)?"rollUp":"drillDown"),o.resetViewRoot(c.node)}})});var sM="sunburstHighlight";Xo({type:sM,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(o,a){var c=H0(e,[sM],o);c&&(e.highlight=c.node)})}),Xo({type:"sunburstUnhighlight",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(o,a){e.unhighlight=!0})});var nv=Math.PI/180;function jx(e,t){return t=t||[0,0],Se(["x","y"],function(o,a){var c=this.getAxis(o),h=t[a],p=e[a]/2;return"category"===c.type?c.getBandWidth():Math.abs(c.dataToCoord(h-p)-c.dataToCoord(h+p))},this)}function lM(e,t){return t=t||[0,0],Se([0,1],function(o){var a=t[o],c=e[o]/2,h=[],p=[];return h[o]=a-c,p[o]=a+c,h[1-o]=p[1-o]=t[1-o],Math.abs(this.dataToPoint(h)[o]-this.dataToPoint(p)[o])},this)}function rS(e,t){var o=this.getAxis(),a=t instanceof Array?t[0]:t,c=(e instanceof Array?e[0]:e)/2;return"category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(a-c)-o.dataToCoord(a+c))}function rE(e,t){return Se(["Radius","Angle"],function(o,a){var c=this["get"+o+"Axis"](),h=t[a],p=e[a]/2,y="dataTo"+o,w="category"===c.type?c.getBandWidth():Math.abs(c[y](h-p)-c[y](h+p));return"Angle"===o&&(w=w*Math.PI/180),w},this)}yi(wt(As,"sunburst")),Wn(wt(function(e,t,o,a){t.eachSeriesByType(e,function(c){var h=c.get("center"),p=c.get("radius");nt(p)||(p=[0,p]),nt(h)||(h=[h,h]);var y=o.getWidth(),w=o.getHeight(),C=Math.min(y,w),n=rn(h[0],y),i=rn(h[1],w),s=rn(p[0],C/2),d=rn(p[1],C/2),u=-c.get("startAngle")*nv,f=c.get("minAngle")*nv,v=c.getData().tree.root,_=c.getViewRoot(),k=_.depth,T=c.get("sort");null!=T&&function fe(ye,Ie){var He=ye.children||[];ye.children=function oS(e,t){if("function"==typeof t)return e.sort(t);var o="asc"===t;return e.sort(function(a,c){var h=(a.getValue()-c.getValue())*(o?1:-1);return 0==h?(a.dataIndex-c.dataIndex)*(o?-1:1):h})}(He,Ie),He.length&&ee(ye.children,function(we){fe(we,Ie)})}(_,T);var M=0;ee(_.children,function(fe){isNaN(fe.getValue())||M++});var I=_.getValue(),O=Math.PI/(I||M)*2,R=0<_.depth,z=(d-s)/(_.height-(R?-1:1)||1),L=c.get("clockwise"),V=c.get("stillShowZeroSum"),J=L?1:-1,te=function(fe,ye){if(fe){var Ie=ye;if(fe!==v){var He=fe.getValue(),we=0===I&&V?O:He*O;we<f&&(we=f),Ie=ye+J*we;var De=fe.depth-k-(R?-1:1),Be=s+z*De,et=s+z*(1+De),Ye=fe.getModel();null!=Ye.get("r0")&&(Be=rn(Ye.get("r0"),C/2)),null!=Ye.get("r")&&(et=rn(Ye.get("r"),C/2)),fe.setLayout({angle:we,startAngle:ye,endAngle:Ie,clockwise:L,cx:n,cy:i,r0:Be,r:et})}if(fe.children&&fe.children.length){var it=0;ee(fe.children,function(yt){it+=te(yt,ye+it)})}return Ie-ye}};if(R){var he=2*Math.PI;v.setLayout({angle:he,startAngle:u,endAngle:u+he,clockwise:L,cx:n,cy:i,r0:s,r:s+z})}te(_,u)})},"sunburst")),Kt(wt(zd,"sunburst"));var iS=hC,MI=["itemStyle"],sN=["emphasis","itemStyle"],iE=["label"],ov=["emphasis","label"],cM="e\0\0",AI={cartesian2d:function(e){var t=e.grid.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(o){return e.dataToPoint(o)},size:rt(jx,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(o){return e.dataToPoint(o)},size:rt(lM,e)}}},singleAxis:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(o){return e.dataToPoint(o)},size:rt(rS,e)}}},polar:function(e){var t=e.getRadiusAxis(),o=e.getAngleAxis(),a=t.getExtent();return a[0]>a[1]&&a.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:a[1],r0:a[0]},api:{coord:rt(function(c){var h=t.dataToRadius(c[0]),p=o.dataToAngle(c[1]),y=e.coordToPoint([h,p]);return y.push(h,p*Math.PI/180),y}),size:rt(rE,e)}}},calendar:function(e){var t=e.getRect(),o=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:o.start,end:o.end,weeks:o.weeks,dayCount:o.allDay}},api:{coord:function(a,c){return e.dataToPoint(a,c)}}}}};function aE(e,t,o,a,c){null==o[e]||c||(t[e]=o[e],o[e]=a[e])}function $p(e,t,o,a){var c=e.get("renderItem"),h=e.coordinateSystem,p={};h&&(p=h.prepareCustoms?h.prepareCustoms():AI[h.type](h));var y,w,C,n,i,v,_,s=_e({getWidth:a.getWidth,getHeight:a.getHeight,getZr:a.getZr,getDevicePixelRatio:a.getDevicePixelRatio,value:function(v,_){return null==_&&(_=y),t.get(t.getDimension(v||0),_)},style:function(v,_){null==_&&(_=y),f(_);var k=w.getModel(MI).getItemStyle();null!=i&&(k.fill=i);var T=t.getItemVisual(_,"opacity");null!=T&&(k.opacity=T);var M=v?uM(v,C):C;return Fi(k,M,null,{autoColor:i,isRectText:!0}),k.text=M.getShallow("show")?_n(e.getFormattedLabel(_,"normal"),T0(t,_)):null,v&&Mg(k,v),k},styleEmphasis:function(v,_){null==_&&(_=y),f(_);var k=w.getModel(sN).getItemStyle(),T=v?uM(v,n):n;return Fi(k,T,null,{isRectText:!0},!0),k.text=T.getShallow("show")?hn(e.getFormattedLabel(_,"emphasis"),e.getFormattedLabel(_,"normal"),T0(t,_)):null,v&&Mg(k,v),k},visual:function(v,_){return null==_&&(_=y),t.getItemVisual(_,v)},barLayout:function(v){if(h.getBaseAxis)return function(_){var k=[],T=_.axis;if("category"===T.type){for(var M=T.getBandWidth(),I=0;I<_.count;I++)k.push(_e({bandWidth:M,axisKey:"axis0",stackId:N_+I},_));var O=R_(k),R=[];for(I=0;I<_.count;I++){var N=O.axis0[N_+I];N.offsetCenter=N.offset+N.width/2,R.push(N)}return R}}(_e({axis:h.getBaseAxis()},v))},currentSeriesIndices:function(){return o.getCurrentSeriesIndices()},font:function(v){return bC(v,o)}},p.api||{}),d={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:p.coordSys,dataInsideLength:t.count(),encode:(v=e.getData(),_={},ee(v.dimensions,function(k,T){var M=v.getDimensionInfo(k);if(!M.isExtraCoord){var I=M.coordDim;(_[I]=_[I]||[])[M.coordDimIndex]=T}}),_)},u=!0;return function(v,_){return y=v,u=!0,c&&c(_e({dataIndexInside:v,dataIndex:t.getRawIndex(v),actionType:_?_.type:null},d),s)};function f(v){null==v&&(v=y),u&&(w=t.getItemModel(v),C=w.getModel(iE),n=w.getModel(ov),i=t.getItemVisual(v,"color"),u=!1)}}function dM(e,t,o,a,c,h){return(e=rv(e,t,o,a,c,h,!0))&&h.setItemGraphicEl(t,e),e}function rv(e,t,o,a,c,h,p){var s,y=!o,w=(o=o||{}).type,C=o.shape,n=o.style;if(e&&(y||null!=w&&w!==e.__customGraphicType||"path"===w&&(s=C)&&(s.hasOwnProperty("pathData")||s.hasOwnProperty("d"))&&lE(C)!==e.__customPathData||"image"===w&&cy(n,"image")&&n.image!==e.__customImagePath||"text"===w&&cy(C,"text")&&n.text!==e.__customText)&&(c.remove(e),e=null),!y){var i=!e;return function(s,d,u,f,v,_,k){var T={},M=u.style||{};if(u.shape&&(T.shape=K(u.shape)),u.position&&(T.position=u.position.slice()),u.scale&&(T.scale=u.scale.slice()),u.origin&&(T.origin=u.origin.slice()),u.rotation&&(T.rotation=u.rotation),"image"===s.type&&u.style){var I=T.style={};ee(["x","y","width","height"],function(N){aE(N,I,M,s.style,_)})}if("text"===s.type&&u.style&&(I=T.style={},ee(["x","y"],function(N){aE(N,I,M,s.style,_)}),!M.hasOwnProperty("textFill")&&M.fill&&(M.textFill=M.fill),!M.hasOwnProperty("textStroke")&&M.stroke&&(M.textStroke=M.stroke)),"group"!==s.type&&(s.useStyle(M),_)){s.style.opacity=0;var O=M.opacity;null==O&&(O=1),Fs(s,{style:{opacity:O}},f,d)}_?s.attr(T):Eo(s,T,f,d),u.hasOwnProperty("z2")&&s.attr("z2",u.z2||0),u.hasOwnProperty("silent")&&s.attr("silent",u.silent),u.hasOwnProperty("invisible")&&s.attr("invisible",u.invisible),u.hasOwnProperty("ignore")&&s.attr("ignore",u.ignore),u.hasOwnProperty("info")&&s.attr("info",u.info);var R=u.styleEmphasis;Gh(s,R),k&&ut(s,!1!==R)}(e=e||function(s){var d,u=s.type;if("path"===u){var f=s.shape,v=null!=f.width&&null!=f.height?{x:f.x||0,y:f.y||0,width:f.width,height:f.height}:null,_=lE(f);(d=jc(_,null,v,f.layout||"center")).__customPathData=_}else if("image"===u)(d=new xr({})).__customImagePath=s.style.image;else if("text"===u)(d=new Yo({})).__customText=s.style.text;else if("group"===u)d=new pn;else{if("compoundPath"===u)throw new Error('"compoundPath" is not supported yet.');d=new(cn(u))}return d.__customGraphicType=u,d.name=s.name,d}(o),t,o,a,0,i,p),"group"===w&&function(s,d,u,f,v){var R,_=u.children,k=_?_.length:0,T=u.$mergeChildren,M="byName"===T||u.diffChildrenByName,I=!1===T;if(k||M||I){if(M)return void new za((R={oldChildren:s.children()||[],newChildren:_||[],dataIndex:d,animatableModel:f,group:s,data:v}).oldChildren,R.newChildren,II,II,R).add(sE).update(sE).remove(qx).execute();I&&s.removeAll();for(var O=0;O<k;O++)_[O]&&rv(s.childAt(O),d,_[O],f,s,v)}}(e,t,o,a,h),c.add(e),e}}function II(e,t){return(e&&e.name)??cM+t}function sE(e,t){var o=this.context;rv(null!=t?o.oldChildren[t]:null,o.dataIndex,null!=e?o.newChildren[e]:null,o.animatableModel,o.group,o.data)}function uM(e,t){var o=new Fo({},t);return ee(iS,function(a,c){e.hasOwnProperty(a)&&(o.option[c]=e[a])}),o}function Mg(e,t){for(var o in t)!t.hasOwnProperty(o)&&iS.hasOwnProperty(o)||(e[o]=t[o])}function qx(e){var t=this.context,o=t.oldChildren[e];o&&t.group.remove(o)}function lE(e){return e&&(e.pathData||e.d)}function cy(e,t){return e&&e.hasOwnProperty(t)}function hM(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function $x(e,t){return t.dim+e.model.componentIndex}function Yp(e,t){bi.call(this,"radius",e,t),this.type="category"}Yr.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(e,t){return ug(this.getSource(),this)},getDataParams:function(e,t,o){var a=Yr.prototype.getDataParams.apply(this,arguments);return o&&(a.info=o.info),a}}),Za.extend({type:"custom",_data:null,render:function(e,t,o,a){var c=this._data,h=e.getData(),p=this.group,y=$p(e,h,t,o);h.diff(c).add(function(C){dM(null,C,y(C,a),e,p,h)}).update(function(C,n){dM(c.getItemGraphicEl(n),C,y(C,a),e,p,h)}).remove(function(C){var n=c.getItemGraphicEl(C);n&&p.remove(n)}).execute();var w=e.get("clip",!0)?Ak(e.coordinateSystem,!1,e):null;w?p.setClipPath(w):p.removeClipPath(),this._data=h},incrementalPrepareRender:function(e,t,o){this.group.removeAll(),this._data=null},incrementalRender:function(e,t,o,a,c){var h=t.getData(),p=$p(t,h,o,a);function y(C){C.isGroup||(C.incremental=!0,C.useHoverLayer=!0)}for(var w=e.start;w<e.end;w++)dM(null,w,p(w,c),t,this.group,h).traverse(y)},dispose:Tt,filterForExposedEvent:function(e,t,o,a){var c=t.element;if(null==c||o.name===c)return!0;for(;(o=o.parent)&&o!==this.group;)if(o.name===c)return!0;return!1}}),Yp.prototype={constructor:Yp,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToRadius:bi.prototype.dataToCoord,radiusToData:bi.prototype.coordToData},ve(Yp,bi);var DI=Xi();function Yx(e,t){bi.call(this,"angle",e,t=t||[0,360]),this.type="category"}function aS(e){this.name=e||"",this.cx=0,this.cy=0,this._radiusAxis=new Yp,this._angleAxis=new Yx,this._radiusAxis.polar=this._angleAxis.polar=this}Yx.prototype={constructor:Yx,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToAngle:bi.prototype.dataToCoord,angleToData:bi.prototype.coordToData,calculateCategoryInterval:function(){var e=this.getLabelModel(),t=this.scale,o=t.getExtent(),a=t.count();if(o[1]-o[0]<1)return 0;var c=o[0],h=this.dataToCoord(c+1)-this.dataToCoord(c),p=Math.abs(h),y=rl(c,e.getFont(),"center","top"),w=Math.max(y.height,7)/p;isNaN(w)&&(w=1/0);var C=Math.max(0,Math.floor(w)),n=DI(this.model),i=n.lastAutoInterval,s=n.lastTickCount;return null!=i&&null!=s&&Math.abs(i-C)<=1&&Math.abs(s-a)<=1&&C<i?C=i:(n.lastTickCount=a,n.lastAutoInterval=C),C}},ve(Yx,bi),aS.prototype={type:"polar",axisPointerEnabled:!0,constructor:aS,dimensions:["radius","angle"],model:null,containPoint:function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},containData:function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},getAxis:function(e){return this["_"+e+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(e){var t=[],o=this._angleAxis,a=this._radiusAxis;return o.scale.type===e&&t.push(o),a.scale.type===e&&t.push(a),t},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(e){var t=null!=e&&"auto"!==e?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},dataToPoint:function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},pointToData:function(e,t){var o=this.pointToCoord(e);return[this._radiusAxis.radiusToData(o[0],t),this._angleAxis.angleToData(o[1],t)]},pointToCoord:function(e){var t=e[0]-this.cx,o=e[1]-this.cy,a=this.getAngleAxis(),c=a.getExtent(),h=Math.min(c[0],c[1]),p=Math.max(c[0],c[1]);a.inverse?h=p-360:p=h+360;var y=Math.sqrt(t*t+o*o);t/=y,o/=y;for(var w=Math.atan2(-o,t)/Math.PI*180,C=w<h?1:-1;w<h||p<w;)w+=360*C;return[y,w]},coordToPoint:function(e){var t=e[0],o=e[1]/180*Math.PI;return[Math.cos(o)*t+this.cx,-Math.sin(o)*t+this.cy]},getArea:function(){var e=this.getAngleAxis(),t=this.getRadiusAxis().getExtent().slice();t[0]>t[1]&&t.reverse();var o=e.getExtent(),a=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:t[0],r:t[1],startAngle:-o[0]*a,endAngle:-o[1]*a,clockwise:e.inverse,contain:function(c,h){var p=c-this.cx,y=h-this.cy,w=p*p+y*y,C=this.r,n=this.r0;return w<=C*C&&n*n<=w}}}};var iv=wo.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});function Zx(e,t){return t.type||(t.data?"category":"value")}function dy(e,t){var o=this,a=o.getAngleAxis(),c=o.getRadiusAxis();if(a.scale.setExtent(1/0,-1/0),c.scale.setExtent(1/0,-1/0),e.eachSeries(function(y){if(y.coordinateSystem===o){var w=y.getData();ee(w.mapDimension("radius",!0),function(C){c.scale.unionExtentFromData(w,Nb(w,C))}),ee(w.mapDimension("angle",!0),function(C){a.scale.unionExtentFromData(w,Nb(w,C))})}}),of(a.scale,a.model),of(c.scale,c.model),"category"===a.type&&!a.onBand){var h=a.getExtent(),p=360/a.scale.count();a.inverse?h[1]+=p:h[1]-=p,a.setExtent(h[0],h[1])}}function gM(e,t){if(e.type=t.get("type"),e.scale=Fb(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),"angleAxis"===t.mainType){e.inverse^=t.get("clockwise");var o=t.get("startAngle");e.setExtent(o,o+(e.inverse?-360:360))}(t.axis=e).model=t}le(iv.prototype,rf),yu("angle",iv,Zx,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),yu("radius",iv,Zx,{splitNumber:5}),Gs({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(e){var t;return this.ecModel.eachComponent(e,function(o){o.getCoordSysModel()===this&&(t=o)},this),t},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),yl.register("polar",{dimensions:aS.prototype.dimensions,create:function(e,t){var o=[];return e.eachComponent("polar",function(a,c){var h=new aS(c);h.update=dy;var p=h.getRadiusAxis(),y=h.getAngleAxis(),w=a.findAxisModel("radiusAxis"),C=a.findAxisModel("angleAxis");gM(p,w),gM(y,C),function(n,i,s){var d=i.get("center"),u=s.getWidth(),f=s.getHeight();n.cx=rn(d[0],u),n.cy=rn(d[1],f);var v=n.getRadiusAxis(),_=Math.min(u,f)/2,k=i.get("radius");null==k?k=[0,"100%"]:nt(k)||(k=[0,k]),k=[rn(k[0],_),rn(k[1],_)],v.inverse?v.setExtent(k[1],k[0]):v.setExtent(k[0],k[1])}(h,a,t),o.push(h),(a.coordinateSystem=h).model=a}),e.eachSeries(function(a){if("polar"===a.get("coordinateSystem")){var c=e.queryComponents({mainType:"polar",index:a.get("polarIndex"),id:a.get("polarId")})[0];a.coordinateSystem=c.coordinateSystem}}),o}});var OI=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function av(e,t,o){t[1]>t[0]&&(t=t.slice().reverse());var a=e.coordToPoint([t[0],o]),c=e.coordToPoint([t[1],o]);return{x1:a[0],y1:a[1],x2:c[0],y2:c[1]}}function sv(e){return e.getRadiusAxis().inverse?0:1}function lv(e){var t=e[0],o=e[e.length-1];t&&o&&Math.abs(Math.abs(t.coord-o.coord)-360)<1e-4&&e.pop()}ed.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var o=e.axis,a=o.polar,c=a.getRadiusAxis().getExtent(),h=o.getTicksCoords(),p=o.getMinorTicksCoords(),y=Se(o.getViewLabels(),function(w){return(w=K(w)).coord=o.dataToCoord(w.tickValue),w});lv(y),lv(h),ee(OI,function(w){!e.get(w+".show")||o.scale.isBlank()&&"axisLine"!==w||this["_"+w](e,a,h,p,c,y)},this)}},_axisLine:function(e,t,o,a,c){var h,p=e.getModel("axisLine.lineStyle"),y=sv(t),w=y?0:1;(h=0===c[w]?new Md({shape:{cx:t.cx,cy:t.cy,r:c[y]},style:p.getLineStyle(),z2:1,silent:!0}):new op({shape:{cx:t.cx,cy:t.cy,r:c[y],r0:c[w]},style:p.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(h)},_axisTick:function(e,t,o,a,c){var h=e.getModel("axisTick"),p=(h.get("inside")?-1:1)*h.get("length"),y=c[sv(t)],w=Se(o,function(C){return new Ya({shape:av(t,[y,y+p],C.coord)})});this.group.add(qc(w,{style:_e(h.getModel("lineStyle").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})}))},_minorTick:function(e,t,o,a,c){if(a.length){for(var h=e.getModel("axisTick"),p=e.getModel("minorTick"),y=(h.get("inside")?-1:1)*p.get("length"),w=c[sv(t)],C=[],n=0;n<a.length;n++)for(var i=0;i<a[n].length;i++)C.push(new Ya({shape:av(t,[w,w+y],a[n][i].coord)}));this.group.add(qc(C,{style:_e(p.getModel("lineStyle").getLineStyle(),_e(h.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(e,t,o,a,c,h){var p=e.getCategories(!0),y=e.getModel("axisLabel"),w=y.get("margin"),C=e.get("triggerEvent");ee(h,function(n,i){var s=y,d=n.tickValue,u=c[sv(t)],f=t.coordToPoint([u+w,n.coord]),v=t.cx,_=t.cy,k=Math.abs(f[0]-v)/u<.3?"center":f[0]>v?"left":"right",T=Math.abs(f[1]-_)/u<.3?"middle":f[1]>_?"top":"bottom";p&&p[d]&&p[d].textStyle&&(s=new Fo(p[d].textStyle,y,y.ecModel));var M=new Yo({silent:wl.isLabelSilent(e)});this.group.add(M),Fi(M.style,s,{x:f[0],y:f[1],textFill:s.getTextColor()||e.get("axisLine.lineStyle.color"),text:n.formattedLabel,textAlign:k,textVerticalAlign:T}),C&&(M.eventData=wl.makeAxisEventDataBase(e),M.eventData.targetType="axisLabel",M.eventData.value=n.rawLabel)},this)},_splitLine:function(e,t,o,a,c){var h=e.getModel("splitLine").getModel("lineStyle"),p=h.get("color"),y=0;p=p instanceof Array?p:[p];for(var w=[],C=0;C<o.length;C++){var n=y++%p.length;w[n]=w[n]||[],w[n].push(new Ya({shape:av(t,c,o[C].coord)}))}for(C=0;C<w.length;C++)this.group.add(qc(w[C],{style:_e({stroke:p[C%p.length]},h.getLineStyle()),silent:!0,z:e.get("z")}))},_minorSplitLine:function(e,t,o,a,c){if(a.length){for(var h=e.getModel("minorSplitLine").getModel("lineStyle"),p=[],y=0;y<a.length;y++)for(var w=0;w<a[y].length;w++)p.push(new Ya({shape:av(t,c,a[y][w].coord)}));this.group.add(qc(p,{style:h.getLineStyle(),silent:!0,z:e.get("z")}))}},_splitArea:function(e,t,o,a,c){if(o.length){var h=e.getModel("splitArea").getModel("areaStyle"),p=h.get("color"),y=0;p=p instanceof Array?p:[p];for(var w=[],C=Math.PI/180,n=-o[0].coord*C,i=Math.min(c[0],c[1]),s=Math.max(c[0],c[1]),d=e.get("clockwise"),u=1;u<o.length;u++){var f=y++%p.length;w[f]=w[f]||[],w[f].push(new uc({shape:{cx:t.cx,cy:t.cy,r0:i,r:s,startAngle:n,endAngle:-o[u].coord*C,clockwise:d},silent:!0})),n=-o[u].coord*C}for(u=0;u<w.length;u++)this.group.add(qc(w[u],{style:_e({fill:p[u%p.length]},h.getAreaStyle()),silent:!0}))}}});var lN=["axisLine","axisTickLabel","axisName"],cE=["splitLine","splitArea","minorSplitLine"];ed.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var o=e.axis,a=o.polar,c=a.getAngleAxis(),h=o.getTicksCoords(),p=o.getMinorTicksCoords(),y=c.getExtent()[0],w=o.getExtent(),C={position:[(i=a).cx,i.cy],rotation:y/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1},n=new wl(e,C);ee(lN,n.add,n),this.group.add(n.getGroup()),ee(cE,function(i){e.get(i+".show")&&!o.scale.isBlank()&&this["_"+i](e,a,y,w,h,p)},this)}var i},_splitLine:function(e,t,o,a,c){var h=e.getModel("splitLine").getModel("lineStyle"),p=h.get("color"),y=0;p=p instanceof Array?p:[p];for(var w=[],C=0;C<c.length;C++){var n=y++%p.length;w[n]=w[n]||[],w[n].push(new Md({shape:{cx:t.cx,cy:t.cy,r:c[C].coord}}))}for(C=0;C<w.length;C++)this.group.add(qc(w[C],{style:_e({stroke:p[C%p.length],fill:null},h.getLineStyle()),silent:!0}))},_minorSplitLine:function(e,t,o,a,c,h){if(h.length){for(var p=e.getModel("minorSplitLine").getModel("lineStyle"),y=[],w=0;w<h.length;w++)for(var C=0;C<h[w].length;C++)y.push(new Md({shape:{cx:t.cx,cy:t.cy,r:h[w][C].coord}}));this.group.add(qc(y,{style:_e({fill:null},p.getLineStyle()),silent:!0}))}},_splitArea:function(e,t,o,a,c){if(c.length){var h=e.getModel("splitArea").getModel("areaStyle"),p=h.get("color"),y=0;p=p instanceof Array?p:[p];for(var w=[],C=c[0].coord,n=1;n<c.length;n++){var i=y++%p.length;w[i]=w[i]||[],w[i].push(new uc({shape:{cx:t.cx,cy:t.cy,r0:C,r:c[n].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),C=c[n].coord}for(n=0;n<w.length;n++)this.group.add(qc(w[n],{style:_e({fill:p[n%p.length]},h.getAreaStyle()),silent:!0}))}}});var EI=tv.extend({makeElOption:function(e,t,o,a,c){var h=o.axis;"angle"===h.dim&&(this.animationThreshold=Math.PI/18);var p,y=h.polar,w=y.getOtherAxis(h).getExtent();p=h["dataTo"+o0(h.dim)](t);var C=a.get("type");if(C&&"none"!==C){var n=xI(a),i=cN[C](h,y,p,w,n);i.style=n,e.graphicKey=i.type,e.pointer=i}var s=a.get("label.margin");_I(e,o,a,c,function(d,u,f,v,_){var k=u.axis,T=k.dataToCoord(d),M=v.getAngleAxis().getExtent()[0];M=M/180*Math.PI;var I,O,R,N=v.getRadiusAxis().getExtent();if("radius"===k.dim){var z=Ii();Rc(z,z,M),zr(z,z,[v.cx,v.cy]),I=vi([T,-_],z);var L=u.getModel("axisLabel").get("rotate")||0,V=wl.innerTextLayout(M,L*Math.PI/180,-1);O=V.textAlign,R=V.textVerticalAlign}else{var J=N[1];I=v.coordToPoint([J+_,T]);var te=v.cx,re=v.cy;O=Math.abs(I[0]-te)/J<.3?"center":I[0]>te?"left":"right",R=Math.abs(I[1]-re)/J<.3?"middle":I[1]>re?"top":"bottom"}return{position:I,align:O,verticalAlign:R}}(t,o,0,y,s))}}),cN={line:function(e,t,o,a,c){return"angle"===e.dim?{type:"Line",shape:Ux(t.coordToPoint([a[0],o]),t.coordToPoint([a[1],o]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:o}}},shadow:function(e,t,o,a,c){var h=Math.max(1,e.getBandWidth()),p=Math.PI/180;return"angle"===e.dim?{type:"Sector",shape:tS(t.cx,t.cy,a[0],a[1],(-o-h/2)*p,(h/2-o)*p)}:{type:"Sector",shape:tS(t.cx,t.cy,o-h/2,o+h/2,0,2*Math.PI)}}};function pM(e,t){t.update="updateView",Xo(t,function(o,a){var c={};return a.eachComponent({mainType:"geo",query:o},function(h){h[e](o.name),ee(h.coordinateSystem.regions,function(p){c[p.name]=h.isSelected(p.name)||!1})}),{selected:c,name:o.name}})}function Ag(e,t,o){this._model=e}function dE(e,t,o,a){var c=o.calendarModel,h=o.seriesModel,p=c?c.coordinateSystem:h?h.coordinateSystem:null;return p===this?p[e](a):null}ed.registerAxisPointerClass("PolarAxisPointer",EI),Wn(wt(function(e,t,o){var a={},c=function(h){var p={};ee(h,function(w,C){var n=w.getData(),i=w.coordinateSystem,s=i.getBaseAxis(),d=$x(i,s),u=s.getExtent(),f="category"===s.type?s.getBandWidth():Math.abs(u[1]-u[0])/n.count(),v=p[d]||{bandWidth:f,remainedWidth:f,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},_=v.stacks;p[d]=v;var k=hM(w);_[k]||v.autoWidthCount++,_[k]=_[k]||{width:0,maxWidth:0};var T=rn(w.get("barWidth"),f),M=rn(w.get("barMaxWidth"),f),I=w.get("barGap"),O=w.get("barCategoryGap");T&&!_[k].width&&(T=Math.min(v.remainedWidth,T),_[k].width=T,v.remainedWidth-=T),M&&(_[k].maxWidth=M),null!=I&&(v.gap=I),null!=O&&(v.categoryGap=O)});var y={};return ee(p,function(w,C){y[C]={};var n=w.stacks,s=rn(w.categoryGap,w.bandWidth),d=rn(w.gap,1),u=w.remainedWidth,f=w.autoWidthCount,v=(u-s)/(f+(f-1)*d);v=Math.max(v,0),ee(n,function(M,I){var O=M.maxWidth;O&&O<v&&(O=Math.min(O,u),M.width&&(O=Math.min(O,M.width)),u-=O,M.width=O,f--)}),v=(u-s)/(f+(f-1)*d),v=Math.max(v,0);var _,k=0;ee(n,function(M,I){M.width||(M.width=v),k+=(_=M).width*(1+d)}),_&&(k-=_.width*d);var T=-k/2;ee(n,function(M,I){y[C][I]=y[C][I]||{offset:T,width:M.width},T+=M.width*(1+d)})}),y}(We(t.getSeriesByType(e),function(h){return!t.isSeriesFiltered(h)&&h.coordinateSystem&&"polar"===h.coordinateSystem.type}));t.eachSeriesByType(e,function(h){if("polar"===h.coordinateSystem.type){var p=h.getData(),y=h.coordinateSystem,w=y.getBaseAxis(),C=$x(y,w),n=hM(h),i=c[C][n],s=i.offset,d=i.width,u=y.getOtherAxis(w),f=h.coordinateSystem.cx,v=h.coordinateSystem.cy,_=h.get("barMinHeight")||0,k=h.get("barMinAngle")||0;a[n]=a[n]||[];for(var T=p.mapDimension(u.dim),M=p.mapDimension(w.dim),I=dg(p,T),O="radius"!==w.dim||!h.get("roundCap",!0),R="radius"===u.dim?u.dataToRadius(0):u.dataToAngle(0),N=0,z=p.count();N<z;N++){var L,V,J,te,re=p.get(T,N),ie=p.get(M,N),he=0<=re?"p":"n",fe=R;if(I&&(a[n][ie]||(a[n][ie]={p:R,n:R}),fe=a[n][ie][he]),"radius"===u.dim){var ye=u.dataToRadius(re)-R,Ie=w.dataToAngle(ie);Math.abs(ye)<_&&(ye=(ye<0?-1:1)*_),V=(L=fe)+ye,te=(J=Ie-s)-d,I&&(a[n][ie][he]=V)}else{var He=u.dataToAngle(re,O)-R,we=w.dataToRadius(ie);Math.abs(He)<k&&(He=(He<0?-1:1)*k),V=(L=we+s)+d,te=(J=fe)+He,I&&(a[n][ie][he]=te)}p.setItemLayout(N,{cx:f,cy:v,r0:L,r:V,startAngle:-J*Math.PI/180,endAngle:-te*Math.PI/180})}}},this)},"bar")),fr({type:"polar"}),Me(wo.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(e){wo.prototype.init.apply(this,arguments),Fl(e,"label",["show"])},optionUpdated:function(){var e=this.option,t=this;e.regions=SO.getFilledRegions(e.regions,e.map,e.nameMap),this._optionModelMap=F(e.regions||[],function(o,a){return a.name&&o.set(a.name,new Fo(a,t)),o},ft()),this.updateSelectedMap(e.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(e){return this._optionModelMap.get(e)||new Fo(null,this,this.ecModel)},getFormattedLabel:function(e,t){t=t||"normal";var o=this.getRegionModel(e).get(("normal"===t?"":t+".")+"label.formatter"),a={name:e};return"function"==typeof o?(a.status=t,o(a)):"string"==typeof o?o.replace("{a}",e??""):void 0},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e}}),_u),fr({type:"geo",init:function(e,t){var o=new nx(t,!0);this._mapDraw=o,this.group.add(o.group)},render:function(e,t,o,a){if(!a||"geoToggleSelect"!==a.type||a.from!==this.uid){var c=this._mapDraw;e.get("show")?c.draw(e,t,o,this,a):this._mapDraw.group.removeAll(),this.group.silent=e.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),pM("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),pM("select",{type:"geoSelect",event:"geoselected"}),pM("unSelect",{type:"geoUnSelect",event:"geounselected"}),Ag.prototype={constructor:Ag,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(e){var t=(e=ub(e)).getFullYear(),o=e.getMonth()+1;o=o<10?"0"+o:o;var a=e.getDate();a=a<10?"0"+a:a;var c=e.getDay();return{y:t,m:o,d:a,day:c=Math.abs((c+7-this.getFirstDayOfWeek())%7),time:e.getTime(),formatedDate:t+"-"+o+"-"+a,date:e}},getNextNDay:function(e,t){return 0===(t=t||0)||(e=new Date(this.getDateInfo(e).time)).setDate(e.getDate()+t),this.getDateInfo(e)},update:function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var o=this._rangeInfo.weeks||1,a=["width","height"],c=this._model.get("cellSize").slice(),h=this._model.getBoxLayoutParams(),p="horizontal"===this._orient?[o,7]:[7,o];ee([0,1],function(n){C(c,n)&&(h[a[n]]=c[n]*p[n])});var y={width:t.getWidth(),height:t.getHeight()},w=this._rect=Xa(h,y);function C(n,i){return null!=n[i]&&"auto"!==n[i]}ee([0,1],function(n){C(c,n)||(c[n]=w[a[n]]/p[n])}),this._sw=c[0],this._sh=c[1]},dataToPoint:function(e,t){nt(e)&&(e=e[0]),null==t&&(t=!0);var o=this.getDateInfo(e),a=this._rangeInfo;if(t&&!(o.time>=a.start.time&&o.time<a.end.time+864e5))return[NaN,NaN];var h=o.day,p=this._getRangeInfo([a.start.time,o.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+h*this._sw+this._sw/2,this._rect.y+p*this._sh+this._sh/2]:[this._rect.x+p*this._sw+this._sw/2,this._rect.y+h*this._sh+this._sh/2]},pointToData:function(e){var t=this.pointToDate(e);return t&&t.time},dataToRect:function(e,t){var o=this.dataToPoint(e,t);return{contentShape:{x:o[0]-(this._sw-this._lineWidth)/2,y:o[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:o,tl:[o[0]-this._sw/2,o[1]-this._sh/2],tr:[o[0]+this._sw/2,o[1]-this._sh/2],br:[o[0]+this._sw/2,o[1]+this._sh/2],bl:[o[0]-this._sw/2,o[1]+this._sh/2]}},pointToDate:function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,o=Math.floor((e[1]-this._rect.y)/this._sh)+1,a=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(o,t-1,a):this._getDateByWeeksAndDay(t,o-1,a)},convertToPixel:wt(dE,"dataToPoint"),convertFromPixel:wt(dE,"pointToData"),_initRangeOption:function(){var e=this._model.get("range"),t=e;if(nt(t)&&1===t.length&&(t=t[0]),/^\d{4}$/.test(t)&&(e=[t+"-01-01",t+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(t)){var o=this.getDateInfo(t),a=o.date;a.setMonth(a.getMonth()+1);var c=this.getNextNDay(a,-1);e=[o.formatedDate,c.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(t)&&(e=[t,t]);var h=this._getRangeInfo(e);return h.start.time>h.end.time&&e.reverse(),e},_getRangeInfo:function(e){var t;(e=[this.getDateInfo(e[0]),this.getDateInfo(e[1])])[0].time>e[1].time&&(t=!0,e.reverse());var o=Math.floor(e[1].time/864e5)-Math.floor(e[0].time/864e5)+1,a=new Date(e[0].time),c=a.getDate(),h=e[1].date.getDate();a.setDate(c+o-1);var p=a.getDate();if(p!==h)for(var y=0<a.getTime()-e[1].time?1:-1;(p=a.getDate())!==h&&0<(a.getTime()-e[1].time)*y;)o-=y,a.setDate(p-y);var w=Math.floor((o+e[0].day+6)/7),C=t?1-w:w-1;return t&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:o,weeks:w,nthWeek:C,fweek:e[0].day,lweek:e[1].day}},_getDateByWeeksAndDay:function(e,t,o){var a=this._getRangeInfo(o);if(e>a.weeks||0===e&&t<a.fweek||e===a.weeks&&t>a.lweek)return!1;var c=7*(e-1)-a.fweek+t,h=new Date(a.start.time);return h.setDate(a.start.d+c),this.getDateInfo(h)}},Ag.dimensions=Ag.prototype.dimensions,Ag.getDimensionsInfo=Ag.prototype.getDimensionsInfo,Ag.create=function(e,t){var o=[];return e.eachComponent("calendar",function(a){var c=new Ag(a,e,t);o.push(c),a.coordinateSystem=c}),e.eachSeries(function(a){"calendar"===a.get("coordinateSystem")&&(a.coordinateSystem=o[a.get("calendarIndex")||0])}),o},yl.register("calendar",Ag);var NI=wo.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(e,t,o,a){var c=Lm(e);NI.superApply(this,"init",arguments),cv(e,c)},mergeOption:function(e,t){NI.superApply(this,"mergeOption",arguments),cv(this.option,e)}});function cv(e,t){var o=e.cellSize;nt(o)?1===o.length&&(o[1]=o[0]):o=e.cellSize=[o,o];var a=Se([0,1],function(c){return function(h,p){return null!=h[Nm[p][0]]||null!=h[Nm[p][1]]&&null!=h[Nm[p][2]]}(t,c)&&(o[c]="auto"),null!=o[c]&&"auto"!==o[c]});Rm(e,t,{type:"box",ignoreSize:a})}var uE={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},mM={EN:["S","M","T","W","T","F","S"],CN:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]};fr({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(e,t,o){var a=this.group;a.removeAll();var c=e.coordinateSystem,h=c.getRangeInfo(),p=c.getOrient();this._renderDayRect(e,h,a),this._renderLines(e,h,p,a),this._renderYearText(e,h,p,a),this._renderMonthText(e,p,a),this._renderWeekText(e,h,p,a)},_renderDayRect:function(e,t,o){for(var a=e.coordinateSystem,c=e.getModel("itemStyle").getItemStyle(),h=a.getCellWidth(),p=a.getCellHeight(),y=t.start.time;y<=t.end.time;y=a.getNextNDay(y,1).time){var w=a.dataToRect([y],!1).tl,C=new sr({shape:{x:w[0],y:w[1],width:h,height:p},cursor:"default",style:c});o.add(C)}},_renderLines:function(e,t,o,a){var c=this,h=e.coordinateSystem,p=e.getModel("splitLine.lineStyle").getLineStyle(),y=e.get("splitLine.show"),w=p.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var C=t.start,n=0;C.time<=t.end.time;n++){s(C.formatedDate),0===n&&(C=h.getDateInfo(t.start.y+"-"+t.start.m));var i=C.date;i.setMonth(i.getMonth()+1),C=h.getDateInfo(i)}function s(d){c._firstDayOfMonth.push(h.getDateInfo(d)),c._firstDayPoints.push(h.dataToRect([d],!1).tl);var u=c._getLinePointsOfOneWeek(e,d,o);c._tlpoints.push(u[0]),c._blpoints.push(u[u.length-1]),y&&c._drawSplitline(u,p,a)}s(h.getNextNDay(t.end.time,1).formatedDate),y&&this._drawSplitline(c._getEdgesPoints(c._tlpoints,w,o),p,a),y&&this._drawSplitline(c._getEdgesPoints(c._blpoints,w,o),p,a)},_getEdgesPoints:function(e,t,o){var a=[e[0].slice(),e[e.length-1].slice()],c="horizontal"===o?0:1;return a[0][c]=a[0][c]-t/2,a[1][c]=a[1][c]+t/2,a},_drawSplitline:function(e,t,o){var a=new Zi({z2:20,shape:{points:e},style:t});o.add(a)},_getLinePointsOfOneWeek:function(e,t,o){var a=e.coordinateSystem;t=a.getDateInfo(t);for(var c=[],h=0;h<7;h++){var p=a.getNextNDay(t.time,h),y=a.dataToRect([p.time],!1);c[2*p.day]=y.tl,c[2*p.day+1]=y["horizontal"===o?"bl":"tr"]}return c},_formatterLabel:function(e,t){return"string"==typeof e&&e?TA(e,t):"function"==typeof e?e(t):t.nameMap},_yearTextPositionControl:function(e,t,o,a,c){t=t.slice();var h=["center","bottom"];"bottom"===a?(t[1]+=c,h=["center","top"]):"left"===a?t[0]-=c:"right"===a?(t[0]+=c,h=["center","top"]):t[1]-=c;var p=0;return"left"!==a&&"right"!==a||(p=Math.PI/2),{rotation:p,position:t,style:{textAlign:h[0],textVerticalAlign:h[1]}}},_renderYearText:function(e,t,o,a){var c=e.getModel("yearLabel");if(c.get("show")){var h=c.get("margin"),p=c.get("position");p=p||("horizontal"!==o?"top":"left");var y=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],w=(y[0][0]+y[1][0])/2,C=(y[0][1]+y[1][1])/2,n="horizontal"===o?0:1,i={top:[w,y[n][1]],bottom:[w,y[1-n][1]],left:[y[1-n][0],C],right:[y[n][0],C]},s=t.start.y;+t.end.y>+t.start.y&&(s=s+"-"+t.end.y);var d=c.get("formatter"),f=this._formatterLabel(d,{start:t.start.y,end:t.end.y,nameMap:s}),v=new Yo({z2:30});Fi(v.style,c,{text:f}),v.attr(this._yearTextPositionControl(v,i[p],o,p,h)),a.add(v)}},_monthTextPositionControl:function(e,t,o,a,c){var h="left",p="top",y=e[0],w=e[1];return"horizontal"===o?(w+=c,t&&(h="center"),"start"===a&&(p="bottom")):(y+=c,t&&(p="middle"),"start"===a&&(h="right")),{x:y,y:w,textAlign:h,textVerticalAlign:p}},_renderMonthText:function(e,t,o){var a=e.getModel("monthLabel");if(a.get("show")){var c=a.get("nameMap"),h=a.get("margin"),p=a.get("position"),y=a.get("align"),w=[this._tlpoints,this._blpoints];Wt(c)&&(c=uE[c.toUpperCase()]||[]);var C="start"===p?0:1,n="horizontal"===t?0:1;h="start"===p?-h:h;for(var i="center"===y,s=0;s<w[C].length-1;s++){var d=w[C][s].slice(),u=this._firstDayOfMonth[s];i&&(d[n]=(this._firstDayPoints[s][n]+w[0][s+1][n])/2);var v=a.get("formatter"),_=c[+u.m-1],k={yyyy:u.y,yy:(u.y+"").slice(2),MM:u.m,M:+u.m,nameMap:_},T=this._formatterLabel(v,k),M=new Yo({z2:30});pe(Fi(M.style,a,{text:T}),this._monthTextPositionControl(d,i,t,p,h)),o.add(M)}}},_weekTextPositionControl:function(e,t,o,a,c){var h="center",p="middle",y=e[0],w=e[1],C="start"===o;return"horizontal"===t?(y=y+a+(C?1:-1)*c[0]/2,h=C?"right":"left"):(w=w+a+(C?1:-1)*c[1]/2,p=C?"bottom":"top"),{x:y,y:w,textAlign:h,textVerticalAlign:p}},_renderWeekText:function(e,t,o,a){var c=e.getModel("dayLabel");if(c.get("show")){var h=e.coordinateSystem,p=c.get("position"),y=c.get("nameMap"),w=c.get("margin"),C=h.getFirstDayOfWeek();Wt(y)&&(y=mM[y.toUpperCase()]||[]);var n=h.getNextNDay(t.end.time,7-t.lweek).time,i=[h.getCellWidth(),h.getCellHeight()];w=rn(w,i["horizontal"===o?0:1]),"start"===p&&(n=h.getNextNDay(t.start.time,-(7+t.fweek)).time,w=-w);for(var s=0;s<7;s++){var d,u=h.getNextNDay(n,s),f=h.dataToRect([u.time],!1).center;d=Math.abs((s+C)%7);var v=new Yo({z2:30});pe(Fi(v.style,c,{text:y[d]}),this._weekTextPositionControl(f,o,p,w,i)),a.add(v)}}}});var uy={path:null,compoundPath:null,group:pn,image:xr,text:Yo};ks(function(e){var t=e.graphic;nt(t)?e.graphic=t[0]&&t[0].elements?[e.graphic[0]]:[{elements:t}]:t&&!t.elements&&(e.graphic=[{elements:[t]}])});var RI=Gs({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(e){var t=this.option.elements;this.option.elements=null,RI.superApply(this,"mergeOption",arguments),this.option.elements=t},optionUpdated:function(e,t){var o=this.option,a=(t?o:e).elements,c=o.elements=t?[]:o.elements,h=[];this._flatten(a,h);var p=sC(c,h);cl(p);var y=this._elOptionsToUpdate=[];ee(p,function(C,n){var s,d,u,f,v,_,i=C.option;i&&(y.push(i),function(s,d){var u=s.exist;if(d.id=s.keyInfo.id,!d.type&&u&&(d.type=u.type),null==d.parentId){var f=d.parentOption;f?d.parentId=f.id:u&&(d.parentId=u.parentId)}d.parentOption=null}(C,i),s=c,d=n,f=pe({},u=i),v=s[d],"merge"===(_=u.$action||"merge")?v?(le(v,f,!0),Rm(v,f,{ignoreSize:!0}),MC(u,v)):s[d]=f:"replace"===_?s[d]=f:"remove"===_&&v&&(s[d]=null),function(s,d){s&&(s.hv=d.hv=[kc(d,["left","right"]),kc(d,["top","bottom"])],"group"===s.type&&(null==s.width&&(s.width=d.width=0),null==s.height&&(s.height=d.height=0)))}(c[n],i))},this);for(var w=c.length-1;0<=w;w--)null==c[w]?c.splice(w,1):delete c[w].$action},_flatten:function(e,t,o){ee(e,function(a){if(a){o&&(a.parentOption=o),t.push(a);var c=a.children;"group"===a.type&&c&&this._flatten(c,t,a),delete a.children}},this)},useElOptionsToUpdate:function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e}});function Ig(e,t,o,a){var c=o.type,h=new(uy.hasOwnProperty(c)?uy[c]:cn(c))(o);t.add(h),a.set(e,h),h.__ecGraphicId=e}function hy(e,t){var o=e&&e.parent;o&&("group"===e.type&&e.traverse(function(a){hy(a,t)}),t.removeKey(e.__ecGraphicId),o.remove(e))}function kc(e,t){var o;return ee(t,function(a){null!=e[a]&&"auto"!==e[a]&&(o=!0)}),o}fr({type:"graphic",init:function(e,t){this._elMap=ft()},render:function(e,t,o){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,o)},_updateElements:function(e){var t=e.useElOptionsToUpdate();if(t){var o=this._elMap,a=this.group;ee(t,function(c){var h=c.$action,p=c.id,y=o.get(p),w=c.parentId,C=null!=w?o.get(w):a,n=c.style;"text"===c.type&&n&&(c.hv&&c.hv[1]&&(n.textVerticalAlign=n.textBaseline=null),!n.hasOwnProperty("textFill")&&n.fill&&(n.textFill=n.fill),!n.hasOwnProperty("textStroke")&&n.stroke&&(n.textStroke=n.stroke));var d,i=(d=pe({},d=c),ee(["id","parentId","$action","hv","bounding"].concat(o_),function(u){delete d[u]}),d);h&&"merge"!==h?"replace"===h?(hy(y,o),Ig(p,C,i,o)):"remove"===h&&hy(y,o):y?y.attr(i):Ig(p,C,i,o);var s=o.get(p);s&&(s.__ecGraphicWidthOption=c.width,s.__ecGraphicHeightOption=c.height,function(d,u){var f=d.eventData;d.silent||d.ignore||f||(f=d.eventData={componentType:"graphic",componentIndex:u.componentIndex,name:d.name}),f&&(f.info=d.info)}(s,e))})}},_relocate:function(e,t){for(var o=e.option.elements,a=this.group,c=this._elMap,h=t.getWidth(),p=t.getHeight(),y=0;y<o.length;y++){var w=o[y];if((n=c.get(w.id))&&n.isGroup){var C=(i=n.parent)===a;n.__ecGraphicWidth=rn(n.__ecGraphicWidthOption,C?h:i.__ecGraphicWidth)||0,n.__ecGraphicHeight=rn(n.__ecGraphicHeightOption,C?p:i.__ecGraphicHeight)||0}}for(y=o.length-1;0<=y;y--){var n,i;(n=c.get((w=o[y]).id))&&Jh(n,w,(i=n.parent)===a?{width:h,height:p}:{width:i.__ecGraphicWidth,height:i.__ecGraphicHeight},null,{hv:w.hv,boundingMode:w.bounding})}},_clear:function(){var e=this._elMap;e.each(function(t){hy(t,e)}),this._elMap=ft()},dispose:function(){this._clear()}});var dv={};function uv(e,t){dv[e]=t}function LI(e){return dv[e]}var dN=Gs({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){dN.superApply(this,"optionUpdated",arguments),ee(this.option.feature,function(e,t){var o=LI(t);o&&le(e,o.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}});function PI(e,t){var o=Em(t.get("padding")),a=t.getItemStyle(["color","opacity"]);return a.fill=t.get("backgroundColor"),new sr({shape:{x:e.x-o[3],y:e.y-o[0],width:e.width+o[1]+o[3],height:e.height+o[0]+o[2],r:t.get("borderRadius")},style:a,silent:!0,z2:-1})}fr({type:"toolbox",render:function(e,t,o,a){var n,i,s,d,u,f,v,c=this.group;if(c.removeAll(),e.get("show")){var h=+e.get("itemSize"),p=e.get("feature")||{},y=this._features||(this._features={}),w=[];ee(p,function(n,i){w.push(i)}),new za(this._featureNames||[],w).add(C).update(C).remove(wt(C,null)).execute(),this._featureNames=w,n=c,s=o,d=(i=e).getBoxLayoutParams(),u=i.get("padding"),v=Xa(d,f={width:s.getWidth(),height:s.getHeight()},u),Kh(i.get("orient"),n,i.get("itemGap"),v.width,v.height),Jh(n,d,f,u),c.add(PI(c.getBoundingRect(),e)),c.eachChild(function(n){var i=n.__title,s=n.hoverStyle;if(s&&i){var d=rl(i,xn(s)),u=n.position[0]+c.position[0],f=!1;n.position[1]+c.position[1]+h+d.height>o.getHeight()&&(s.textPosition="top",f=!0);var v=f?-5-d.height:h+8;u+d.width/2>o.getWidth()?(s.textPosition=["100%",v],s.textAlign="right"):u-d.width/2<0&&(s.textPosition=[0,v],s.textAlign="left")}})}function C(n,i){var s,d=w[n],u=w[i],f=p[d],v=new Fo(f,e,e.ecModel);if(a&&null!=a.newTitle&&a.featureName===d&&(f.title=a.newTitle),d&&!u){if(0===d.indexOf("my"))s={model:v,onclick:v.option.onclick,featureName:d};else{var _=LI(d);if(!_)return;s=new _(v,t,o)}y[d]=s}else{if(!(s=y[u]))return;s.model=v,s.ecModel=t,s.api=o}d||!u?v.get("show")&&!s.unusable?(function(k,T,M){var I=k.getModel("iconStyle"),O=k.getModel("emphasis.iconStyle"),R=T.getIcons?T.getIcons():k.get("icon"),N=k.get("title")||{};if("string"==typeof R){var z=R,L=N;N={},(R={})[M]=z,N[M]=L}var V=k.iconPaths={};ee(R,function(J,te){var re=Im(J,{},{x:-h/2,y:-h/2,width:h,height:h});re.setStyle(I.getItemStyle()),re.hoverStyle=O.getItemStyle(),re.setStyle({text:N[te],textAlign:O.get("textAlign"),textBorderRadius:O.get("textBorderRadius"),textPadding:O.get("textPadding"),textFill:null});var ie=e.getModel("tooltip");ie&&ie.get("show")&&re.attr("tooltip",pe({content:N[te],formatter:ie.get("formatter",!0)||function(){return N[te]},formatterParams:{componentType:"toolbox",name:te,title:N[te],$vars:["name","title"]},position:ie.get("position",!0)||"bottom"},ie.option)),qr(re),e.get("showTitle")&&(re.__title=N[te],re.on("mouseover",function(){var he=O.getItemStyle(),fe="vertical"===e.get("orient")?null==e.get("right")?"right":"left":null==e.get("bottom")?"bottom":"top";re.setStyle({textFill:O.get("textFill")||he.fill||he.stroke||"#000",textBackgroundColor:O.get("textBackgroundColor"),textPosition:O.get("textPosition")||fe})}).on("mouseout",function(){re.setStyle({textFill:null,textBackgroundColor:null})})),re.trigger(k.get("iconStatus."+te)||"normal"),c.add(re),re.on("click",rt(T.onclick,T,t,o,te)),V[te]=re})}(v,s,d),v.setIconStatus=function(k,T){var M=this.option,I=this.iconPaths;M.iconStatus=M.iconStatus||{},M.iconStatus[k]=T,I[k]&&I[k].trigger(T)},s.render&&s.render(v,t,o,a)):s.remove&&s.remove(t,o):s.dispose&&s.dispose(t,o)}},updateView:function(e,t,o,a){ee(this._features,function(c){c.updateView&&c.updateView(c.model,t,o,a)})},remove:function(e,t){ee(this._features,function(o){o.remove&&o.remove(e,t)}),this.group.removeAll()},dispose:function(e,t){ee(this._features,function(o){o.dispose&&o.dispose(e,t)})}});var gy=rg.toolbox.saveAsImage;function py(e){this.model=e}py.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:gy.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:gy.lang.slice()},py.prototype.unusable=!Oe.canvasSupported,py.prototype.onclick=function(e,t){var o=this.model,a=o.get("name")||e.get("title.0.text")||"echarts",c="svg"===t.getZr().painter.getType()?"svg":o.get("type",!0)||"png",h=t.getConnectedDataURL({type:c,backgroundColor:o.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")});if("function"!=typeof MouseEvent||Oe.browser.ie||Oe.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var p=atob(h.split(",")[1]),y=p.length,w=new Uint8Array(y);y--;)w[y]=p.charCodeAt(y);var C=new Blob([w]);window.navigator.msSaveOrOpenBlob(C,a+"."+c)}else{var n=o.get("lang"),i='<body style="margin:0;"><img src="'+h+'" style="max-width:100%;" title="'+(n&&n[0]||"")+'" /></body>';window.open().document.write(i)}else{var s=document.createElement("a");s.download=a+"."+c,s.target="_blank",s.href=h;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});s.dispatchEvent(d)}},uv("saveAsImage",py);var sS=rg.toolbox.magicType,fM="__ec_magicType_stack__";function Kx(e){this.model=e}Kx.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:K(sS.title),option:{},seriesIndex:{}};var BI=Kx.prototype;BI.getIcons=function(){var e=this.model,t=e.get("icon"),o={};return ee(e.get("type"),function(a){t[a]&&(o[a]=t[a])}),o};var lS={line:function(e,t,o,a){if("bar"===e)return le({id:t,type:"line",data:o.get("data"),stack:o.get("stack"),markPoint:o.get("markPoint"),markLine:o.get("markLine")},a.get("option.line")||{},!0)},bar:function(e,t,o,a){if("line"===e)return le({id:t,type:"bar",data:o.get("data"),stack:o.get("stack"),markPoint:o.get("markPoint"),markLine:o.get("markLine")},a.get("option.bar")||{},!0)},stack:function(e,t,o,a){var c=o.get("stack")===fM;if("line"===e||"bar"===e)return a.setIconStatus("stack",c?"normal":"emphasis"),le({id:t,stack:c?"":fM},a.get("option.stack")||{},!0)}},zI=[["line","bar"],["stack"]];BI.onclick=function(e,t,o){var a=this.model,c=a.get("seriesIndex."+o);if(lS[o]){var h,p={series:[]};ee(zI,function(y){0<=Ue(y,o)&&ee(y,function(w){a.setIconStatus(w,"normal")})}),a.setIconStatus(o,"emphasis"),e.eachComponent({mainType:"series",query:null==c?null:{seriesIndex:c}},function(y){var n=lS[o](y.subType,y.id,y,a);n&&(_e(n,y.option),p.series.push(n));var i=y.coordinateSystem;if(i&&"cartesian2d"===i.type&&("line"===o||"bar"===o)){var s=i.getAxesByScale("ordinal")[0];if(s){var d=s.dim+"Axis",u=e.queryComponents({mainType:d,index:y.get(name+"Index"),id:y.get(name+"Id")})[0].componentIndex;p[d]=p[d]||[];for(var f=0;f<=u;f++)p[d][u]=p[d][u]||{};p[d][u].boundaryGap="bar"===o}}}),"stack"===o&&(h=p.series&&p.series[0]&&p.series[0].stack===fM?le({stack:sS.title.tiled},sS.title):K(sS.title)),t.dispatchAction({type:"changeMagicType",currentType:o,newOption:p,newTitle:h,featureName:"magicType"})}},Xo({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)}),uv("magicType",Kx);var FI=rg.toolbox.dataView,Xs=new Array(60).join("-"),Xp="\t";function Du(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var cS=new RegExp("["+Xp+"]+","g");function ec(e){this._dom=null,this.model=e}ec.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:K(FI.title),lang:K(FI.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},ec.prototype.onclick=function(e,t){var o=t.getDom(),a=this.model;this._dom&&o.removeChild(this._dom);var c=document.createElement("div");c.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",c.style.backgroundColor=a.get("backgroundColor")||"#fff";var h=document.createElement("h4"),p=a.get("lang")||[];h.innerHTML=p[0]||a.get("title"),h.style.cssText="margin: 10px 20px;",h.style.color=a.get("textColor");var y=document.createElement("div"),w=document.createElement("textarea");y.style.cssText="display:block;width:100%;overflow:auto;";var C=a.get("optionToContent"),n=a.get("contentToOption"),i=function hE(e){var t=function(o){var a={},c=[],h=[];return o.eachRawSeries(function(p){var y=p.coordinateSystem;if(!y||"cartesian2d"!==y.type&&"polar"!==y.type)c.push(p);else{var w=y.getBaseAxis();if("category"===w.type){var C=w.dim+"_"+w.index;a[C]||(a[C]={categoryAxis:w,valueAxis:y.getOtherAxis(w),series:[]},h.push({axisDim:w.dim,axisIndex:w.index})),a[C].series.push(p)}else c.push(p)}}),{seriesGroupByCategoryAxis:a,other:c,meta:h}}(e);return{value:We([function(o){var a=[];return ee(o,function(c,h){var p=c.categoryAxis,y=c.valueAxis.dim,w=[" "].concat(Se(c.series,function(u){return u.name})),C=[p.model.getCategories()];ee(c.series,function(u){var f=u.getRawData();C.push(u.getRawData().mapArray(f.mapDimension(y),function(v){return v}))});for(var n=[w.join(Xp)],i=0;i<C[0].length;i++){for(var s=[],d=0;d<C.length;d++)s.push(C[d][i]);n.push(s.join(Xp))}a.push(n.join("\n"))}),a.join("\n\n"+Xs+"\n\n")}(t.seriesGroupByCategoryAxis),function(o){return Se(o,function(a){var c=a.getRawData(),h=[a.name],p=[];return c.each(c.dimensions,function(){for(var y=arguments.length,C=c.getName(arguments[y-1]),n=0;n<y-1;n++)p[n]=arguments[n];h.push((C?C+Xp:"")+p.join(Xp))}),h.join("\n")}).join("\n\n"+Xs+"\n\n")}(t.other)],function(o){return o.replace(/[\n\t\s]/g,"")}).join("\n\n"+Xs+"\n\n"),meta:t.meta}}(e);if("function"==typeof C){var s=C(t.getOption());"string"==typeof s?y.innerHTML=s:xi(s)&&y.appendChild(s)}else y.appendChild(w),w.readOnly=a.get("readOnly"),w.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",w.style.color=a.get("textColor"),w.style.borderColor=a.get("textareaBorderColor"),w.style.backgroundColor=a.get("textareaColor"),w.value=i.value;var d=i.meta,u=document.createElement("div");u.style.cssText="position:absolute;bottom:0;left:0;right:0;";var f="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",v=document.createElement("div"),_=document.createElement("div");f+=";background-color:"+a.get("buttonColor"),f+=";color:"+a.get("buttonTextColor");var k=this;function T(){o.removeChild(c),k._dom=null}$n(v,"click",T),$n(_,"click",function(){var M;try{M="function"==typeof n?n(y,t.getOption()):function Zp(e,t){var o=e.split(new RegExp("\n*"+Xs+"\n*","g")),a={series:[]};return ee(o,function(c,h){if(function(C){if(0<=C.slice(0,C.indexOf("\n")).indexOf(Xp))return!0}(c)){var p=function(C){for(var n=C.split(/\n+/g),i=[],s=Se(Du(n.shift()).split(cS),function(v){return{name:v,data:[]}}),d=0;d<n.length;d++){var u=Du(n[d]).split(cS);i.push(u.shift());for(var f=0;f<u.length;f++)s[f]&&(s[f].data[d]=u[f])}return{series:s,categories:i}}(c),y=t[h],w=y.axisDim+"Axis";y&&(a[w]=a[w]||[],a[w][y.axisIndex]={data:p.categories},a.series=a.series.concat(p.series))}else p=function(C){for(var n=C.split(/\n+/g),i=Du(n.shift()),s=[],d=0;d<n.length;d++){var u=Du(n[d]);if(u){var f,v=u.split(cS),_="",k=!1;f=isNaN(v[0])?(k=!0,_=v[0],v=v.slice(1),s[d]={name:_,value:[]},s[d].value):s[d]=[];for(var T=0;T<v.length;T++)f.push(+v[T]);1===f.length&&(k?s[d].value=f[0]:s[d]=f[0])}}return{name:i,data:s}}(c),a.series.push(p)}),a}(w.value,d)}catch(I){throw T(),new Error("Data view format error "+I)}M&&t.dispatchAction({type:"changeDataView",newOption:M}),T()}),v.innerHTML=p[1],_.innerHTML=p[2],_.style.cssText=f,v.style.cssText=f,a.get("readOnly")||u.appendChild(_),u.appendChild(v),c.appendChild(h),c.appendChild(y),c.appendChild(u),y.style.height=o.clientHeight-80+"px",o.appendChild(c),this._dom=c},ec.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},ec.prototype.dispose=function(e,t){this.remove(e,t)},uv("dataView",ec),Xo({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var o=[];ee(e.newOption.series,function(a){var p,y,c=t.getSeriesByName(a.name)[0];if(c){var h=c.get("data");o.push({name:a.name,data:(p=a.data,y=h,Se(p,function(w,C){var n=y&&y[C];if(!ue(n)||nt(n))return w;ue(w)&&!nt(w)||(w={value:w});var i=null!=n.name&&null==w.name;return w=_e(w,n),i&&delete w.name,w}))})}else o.push(pe({type:"scatter"},a))}),t.mergeOption(_e({series:o},e.newOption))});var Tc=ee,hv=Ue,my=wt,dS=["dataToPoint","pointToData"],fy=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function gv(e,t,o){var a=this._targetInfoList=[],c={},h=vy(t,e);Tc(VI,function(p,y){o&&o.include&&!(0<=hv(o.include,y))||p(h,a,c)})}var Kp=gv.prototype;function Jx(e){return e[0]>e[1]&&e.reverse(),e}function vy(e,t){return F1(e,t,{includeMainTypes:fy})}Kp.setOutputRanges=function(e,t){this.matchOutputRanges(e,t,function(o,a,c){if((o.coordRanges||(o.coordRanges=[])).push(a),!o.coordRange){o.coordRange=a;var h=uS[o.brushType](0,c,a);o.__rangeOffset={offset:Qx[o.brushType](h.values,o.range,[1,1]),xyMinMax:h.xyMinMax}}})},Kp.matchOutputRanges=function(e,t,o){Tc(e,function(a){var c=this.findTargetInfo(a,t);c&&!0!==c&&ee(c.coordSyses,function(h){var p=uS[a.brushType](1,h,a.range);o(a,p.values,h,t)})},this)},Kp.setInputRanges=function(e,t){Tc(e,function(o){var y,w,C,n,a=this.findTargetInfo(o,t);if(o.range=o.range||[],a&&!0!==a){o.panelId=a.panelId;var c=uS[o.brushType](0,a.coordSys,o.coordRange),h=o.__rangeOffset;o.range=h?Qx[o.brushType](c.values,h.offset,(y=h.xyMinMax,w=gE(c.xyMinMax),C=gE(y),n=[w[0]/C[0],w[1]/C[1]],isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n)):c.values}},this)},Kp.makePanelOpts=function(e,t){return Se(this._targetInfoList,function(o){var a=o.getPanelRect();return{panelId:o.panelId,defaultBrushType:t&&t(o),clipPath:ET(a),isTargetByCursor:zw(a,e,o.coordSysModel),getLinearBrushOtherExtent:Ix(a)}})},Kp.controlSeries=function(e,t,o){var a=this.findTargetInfo(e,o);return!0===a||a&&0<=hv(a.coordSyses,t.coordinateSystem)},Kp.findTargetInfo=function(e,t){for(var o=this._targetInfoList,a=vy(t,e),c=0;c<o.length;c++){var h=o[c],p=e.panelId;if(p){if(h.panelId===p)return h}else for(c=0;c<HI.length;c++)if(HI[c](a,h))return h}return!0};var VI={grid:function(e,t){var o=e.xAxisModels,a=e.yAxisModels,c=e.gridModels,h=ft(),p={},y={};(o||a||c)&&(Tc(o,function(w){var C=w.axis.grid.model;h.set(C.id,C),p[C.id]=!0}),Tc(a,function(w){var C=w.axis.grid.model;h.set(C.id,C),y[C.id]=!0}),Tc(c,function(w){h.set(w.id,w),p[w.id]=!0,y[w.id]=!0}),h.each(function(w){var n=[];Tc(w.coordinateSystem.getCartesians(),function(i,s){(0<=hv(o,i.getAxis("x").model)||0<=hv(a,i.getAxis("y").model))&&n.push(i)}),t.push({panelId:"grid--"+w.id,gridModel:w,coordSysModel:w,coordSys:n[0],coordSyses:n,getPanelRect:WI.grid,xAxisDeclared:p[w.id],yAxisDeclared:y[w.id]})}))},geo:function(e,t){Tc(e.geoModels,function(o){var a=o.coordinateSystem;t.push({panelId:"geo--"+o.id,geoModel:o,coordSysModel:o,coordSys:a,coordSyses:[a],getPanelRect:WI.geo})})}},HI=[function(e,t){var o=e.xAxisModel,a=e.yAxisModel,c=e.gridModel;return!c&&o&&(c=o.axis.grid.model),!c&&a&&(c=a.axis.grid.model),c&&c===t.gridModel},function(e,t){var o=e.geoModel;return o&&o===t.geoModel}],WI={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(qh(e)),t}},uS={lineX:my(us,0),lineY:my(us,1),rect:function(e,t,o){var a=t[dS[e]]([o[0][0],o[1][0]]),c=t[dS[e]]([o[0][1],o[1][1]]),h=[Jx([a[0],c[0]]),Jx([a[1],c[1]])];return{values:h,xyMinMax:h}},polygon:function(e,t,o){var a=[[1/0,-1/0],[1/0,-1/0]];return{values:Se(o,function(c){var h=t[dS[e]](c);return a[0][0]=Math.min(a[0][0],h[0]),a[1][0]=Math.min(a[1][0],h[1]),a[0][1]=Math.max(a[0][1],h[0]),a[1][1]=Math.max(a[1][1],h[1]),h}),xyMinMax:a}}};function us(e,t,o,a){var c=o.getAxis(["x","y"][e]),h=Jx(Se([0,1],function(y){return t?c.coordToData(c.toLocalCoord(a[y])):c.toGlobalCoord(c.dataToCoord(a[y]))})),p=[];return p[e]=h,p[1-e]=[NaN,NaN],{values:h,xyMinMax:p}}var Qx={lineX:my(yy,0),lineY:my(yy,1),rect:function(e,t,o){return[[e[0][0]-o[0]*t[0][0],e[0][1]-o[0]*t[0][1]],[e[1][0]-o[1]*t[1][0],e[1][1]-o[1]*t[1][1]]]},polygon:function(e,t,o){return Se(e,function(a,c){return[a[0]-o[0]*t[c][0],a[1]-o[1]*t[c][1]]})}};function yy(e,t,o,a){return[t[0]-a[e]*o[0],t[1]-a[e]*o[1]]}function gE(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var hS=ee,e1="\0_ec_hist_store";function t1(e){return e[e1]||(e[e1]=[{}])}wo.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var gS,n1,pE,mE,vM=["cartesian2d","polar","singleAxis"],UI=(n1=["axisIndex","axis","index","id"],pE=Se(gS=(gS=["x","y","z","radius","angle","single"]).slice(),o0),mE=Se(n1=(n1||[]).slice(),o0),function(e,t){ee(gS,function(o,a){for(var c={name:o,capital:pE[a]},h=0;h<n1.length;h++)c[n1[h]]=o+mE[h];e.call(t,c)})});function jI(e,t,o,a){this._dimName=e,this._axisIndex=t,this.ecModel=a,this._dataZoomModel=o}var pv=ee,yM=Om;function Mc(e,t){var o=e.getAxisModel(),a=e._percentWindow,c=e._valueWindow;if(a){var h=Xh(c,[0,500]);h=Math.min(h,20);var p=t||0===a[0]&&100===a[1];o.setRange(p?null:+c[0].toFixed(h),p?null:+c[1].toFixed(h))}}jI.prototype={constructor:jI,hostedBy:function(e){return this._dataZoomModel===e},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var e=[],t=this.ecModel;return t.eachSeries(function(o){if(function(h){return 0<=Ue(vM,h)}(o.get("coordinateSystem"))){var a=this._dimName,c=t.queryComponents({mainType:a+"Axis",index:o.get(a+"AxisIndex"),id:o.get(a+"AxisId")})[0];this._axisIndex===(c&&c.componentIndex)&&e.push(o)}},this),e},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var e,t,o,a=this._dimName,c=this.ecModel,h=this.getAxisModel();return e="x"===a||"y"===a?(t="gridIndex","x"===a?"y":"x"):(t="polarIndex","angle"===a?"radius":"angle"),c.eachComponent(e+"Axis",function(p){(p.get(t)||0)===(h.get(t)||0)&&(o=p)}),o},getMinMaxSpan:function(){return K(this._minMaxSpan)},calculateDataWindow:function(e){var t,o=this._dataExtent,a=this.getAxisModel().axis.scale,c=this._dataZoomModel.getRangePropMode(),h=[0,100],p=[],y=[];pv(["start","end"],function(n,i){var s=e[n],d=e[n+"Value"];"percent"===c[i]?(null==s&&(s=h[i]),d=a.parse(Ht(s,h,o))):(t=!0,s=Ht(d=null==d?o[i]:a.parse(d),o,h)),y[i]=d,p[i]=s}),yM(y),yM(p);var w=this._minMaxSpan;function C(n,i,s,d,u){var f=u?"Span":"ValueSpan";vh(0,n,s,"all",w["min"+f],w["max"+f]);for(var v=0;v<2;v++)i[v]=Ht(n[v],s,d,!0),u&&(i[v]=a.parse(i[v]))}return t?C(y,p,o,h,!1):C(p,y,h,o,!0),{valueWindow:y,percentWindow:p}},reset:function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(a,c,h){var p=[1/0,-1/0];return pv(h,function(y){var w=y.getData();w&&pv(w.mapDimension(c,!0),function(C){var n=w.getApproximateExtent(C);n[0]<p[0]&&(p[0]=n[0]),n[1]>p[1]&&(p[1]=n[1])})}),p[1]<p[0]&&(p=[NaN,NaN]),function(y,w){var C=y.getAxisModel(),n=C.getMin(!0),i="category"===C.get("type"),s=i&&C.getCategories().length;null!=n&&"dataMin"!==n&&"function"!=typeof n?w[0]=n:i&&(w[0]=0<s?0:NaN);var d=C.getMax(!0);null!=d&&"dataMax"!==d&&"function"!=typeof d?w[1]=d:i&&(w[1]=0<s?s-1:NaN),C.get("scale",!0)||(0<w[0]&&(w[0]=0),w[1]<0&&(w[1]=0))}(a,p),p}(this,this._dimName,t),function(a){var c=a._minMaxSpan={},h=a._dataZoomModel,p=a._dataExtent;pv(["min","max"],function(y){var w=h.get(y+"Span"),C=h.get(y+"ValueSpan");null!=C&&(C=a.getAxisModel().axis.scale.parse(C)),null!=C?w=Ht(p[0]+C,p,[0,100],!0):null!=w&&(C=Ht(w,[0,100],p,!0)-p[0]),c[y+"Span"]=w,c[y+"ValueSpan"]=C})}(this);var o=this.calculateDataWindow(e.settledOption);this._valueWindow=o.valueWindow,this._percentWindow=o.percentWindow,Mc(this)}},restore:function(e){e===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,Mc(this,!0))},filterData:function(e,t){if(e===this._dataZoomModel){var o=this._dimName,a=this.getTargetSeriesModels(),c=e.get("filterMode"),h=this._valueWindow;"none"!==c&&pv(a,function(p){var y=p.getData(),w=y.mapDimension(o,!0);w.length&&("weakFilter"===c?y.filterSelf(function(C){for(var n,i,s,d=0;d<w.length;d++){var u=y.get(w[d],C),f=!isNaN(u),v=u<h[0],_=u>h[1];if(f&&!v&&!_)return!0;f&&(s=!0),v&&(n=!0),_&&(i=!0)}return s&&n&&i}):pv(w,function(C){if("empty"===c)p.setData(y=y.map(C,function(i){return(s=i)>=h[0]&&s<=h[1]?i:NaN;var s}));else{var n={};n[C]=h,y.selectRange(n)}}),pv(w,function(C){y.setApproximateExtent(h,C)}))})}}};var by=ee,Dg=UI,xy=Gs({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(e,t,o){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var a=qI(e);this.settledOption=a,this.mergeDefaultAndTheme(e,o),this.doInit(a)},mergeOption:function(e){var t=qI(e);le(this.option,e,!0),le(this.settledOption,t,!0),this.doInit(t)},doInit:function(e){var t=this.option;Oe.canvasSupported||(t.realtime=!1),this._setDefaultThrottle(e),_y(this,e);var o=this.settledOption;by([["start","startValue"],["end","endValue"]],function(a,c){"value"===this._rangePropMode[c]&&(t[a[0]]=o[a[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var e=this._axisProxies;this.eachTargetAxis(function(t,o,a,c){var h=this.dependentModels[t.axis][o],p=h.__dzAxisProxy||(h.__dzAxisProxy=new jI(t.name,o,this,c));e[t.name+"_"+o]=p},this)},_resetTarget:function(){var e=this.option,t=this._judgeAutoMode();Dg(function(o){var a=o.axisIndex;e[a]=hr(e[a])},this),"axisIndex"===t?this._autoSetAxisIndex():"orient"===t&&this._autoSetOrient()},_judgeAutoMode:function(){var e=this.option,t=!1;Dg(function(a){null!=e[a.axisIndex]&&(t=!0)},this);var o=e.orient;return null==o&&t?"orient":t?void 0:(null==o&&(e.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var e=!0,t=this.get("orient",!0),o=this.option,a=this.dependentModels;if(e){var c="vertical"===t?"y":"x";a[c+"Axis"].length?(o[c+"AxisIndex"]=[0],e=!1):by(a.singleAxis,function(h){e&&h.get("orient",!0)===t&&(o.singleAxisIndex=[h.componentIndex],e=!1)})}e&&Dg(function(h){if(e){var p=[],y=this.dependentModels[h.axis];if(y.length&&!p.length)for(var w=0,C=y.length;w<C;w++)"category"===y[w].get("type")&&p.push(w);(o[h.axisIndex]=p).length&&(e=!1)}},this),e&&this.ecModel.eachSeries(function(h){this._isSeriesHasAllAxesTypeOf(h,"value")&&Dg(function(p){var y=o[p.axisIndex],w=h.get(p.axisIndex),C=h.get(p.axisId);Ue(y,w=h.ecModel.queryComponents({mainType:p.axis,index:w,id:C})[0].componentIndex)<0&&y.push(w)})},this)},_autoSetOrient:function(){var e;this.eachTargetAxis(function(t){e=e||t.name},this),this.option.orient="y"===e?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(e,t){var o=!0;return Dg(function(a){var c=e.get(a.axisIndex),h=this.dependentModels[a.axis][c];h&&h.get("type")===t||(o=!1)},this),o},_setDefaultThrottle:function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&0<t.animationDurationUpdate?100:20}},getFirstTargetAxisModel:function(){var e;return Dg(function(t){if(null==e){var o=this.get(t.axisIndex);o.length&&(e=this.dependentModels[t.axis][o[0]])}},this),e},eachTargetAxis:function(e,t){var o=this.ecModel;Dg(function(a){by(this.get(a.axisIndex),function(c){e.call(t,a,c,this,o)},this)},this)},getAxisProxy:function(e,t){return this._axisProxies[e+"_"+t]},getAxisModel:function(e,t){var o=this.getAxisProxy(e,t);return o&&o.getAxisModel()},setRawRange:function(e){var t=this.option,o=this.settledOption;by([["start","startValue"],["end","endValue"]],function(a){null==e[a[0]]&&null==e[a[1]]||(t[a[0]]=o[a[0]]=e[a[0]],t[a[1]]=o[a[1]]=e[a[1]])},this),_y(this,e)},setCalculatedRange:function(e){var t=this.option;by(["start","startValue","end","endValue"],function(o){t[o]=e[o]})},getPercentRange:function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},getValueRange:function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var o=this.findRepresentativeAxisProxy();return o?o.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(e){if(e)return e.__dzAxisProxy;var t=this._axisProxies;for(var o in t)if(t.hasOwnProperty(o)&&t[o].hostedBy(this))return t[o];for(var o in t)if(t.hasOwnProperty(o)&&!t[o].hostedBy(this))return t[o]},getRangePropMode:function(){return this._rangePropMode.slice()}});function qI(e){var t={};return by(["start","end","startValue","endValue","throttle"],function(o){e.hasOwnProperty(o)&&(t[o]=e[o])}),t}function _y(e,t){var o=e._rangePropMode,a=e.get("rangeMode");by([["start","startValue"],["end","endValue"]],function(c,h){var p=null!=t[c[0]],y=null!=t[c[1]];p&&!y?o[h]="percent":!p&&y?o[h]="value":a?o[h]=a[h]:p&&(o[h]="percent")})}var mv=Id.extend({type:"dataZoom",render:function(e,t,o,a){this.dataZoomModel=e,this.ecModel=t,this.api=o},getTargetCoordInfo:function(){var t=this.ecModel,o={};return this.dataZoomModel.eachTargetAxis(function(a,c){var h=t.getComponent(a.axis,c);if(h){var p=h.getCoordSysModel();p&&function(y,w,C,n){for(var i,s=0;s<C.length;s++)if(C[s].model===y){i=C[s];break}i||C.push(i={model:y,axisModels:[],coordIndex:n}),i.axisModels.push(w)}(p,h,o[p.mainType]||(o[p.mainType]=[]),p.componentIndex)}},this),o}});xy.extend({type:"dataZoom.select"}),mv.extend({type:"dataZoom.select"}),Kt({getTargetSeries:function(e){var t=ft();return e.eachComponent("dataZoom",function(o){o.eachTargetAxis(function(a,c,h){ee(h.getAxisProxy(a.name,c).getTargetSeriesModels(),function(p){t.set(p.uid,p)})})}),t},modifyOutputEnd:!0,overallReset:function(e,t){e.eachComponent("dataZoom",function(o){o.eachTargetAxis(function(a,c,h){h.getAxisProxy(a.name,c).reset(h,t)}),o.eachTargetAxis(function(a,c,h){h.getAxisProxy(a.name,c).filterData(h,t)})}),e.eachComponent("dataZoom",function(o){var a=o.findRepresentativeAxisProxy(),c=a.getDataPercentWindow(),h=a.getDataValueWindow();o.setCalculatedRange({start:c[0],end:c[1],startValue:h[0],endValue:h[1]})})}}),Xo("dataZoom",function(e,t){var o=function GI(e,t,o){return function(c){var h,p={nodes:[],records:{}};if(t(function(w){p.records[w.name]={}}),!c)return p;for(a(c,p);h=!1,e(y),h;);function y(w){var C,n,i;!(0<=Ue(p.nodes,w))&&(C=w,n=p,i=!1,t(function(s){ee(o(C,s)||[],function(d){n.records[s.name][d]&&(i=!0)})}),i)&&(a(w,p),h=!0)}return p};function a(c,h){h.nodes.push(c),t(function(p){ee(o(c,p)||[],function(y){h.records[p.name][y]=!0})})}}(rt(t.eachComponent,t,"dataZoom"),UI,function(c,h){return c.get(h.axisIndex)}),a=[];t.eachComponent({mainType:"dataZoom",query:e},function(c,h){a.push.apply(a,o(c).nodes)}),ee(a,function(c,h){c.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})});var pS=ee;function $I(e,t,o){(this._brushController=new Wp(o.getZr())).on("brush",rt(this._onBrush,this)).mount()}$I.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:K(rg.toolbox.dataZoom.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var Ou=$I.prototype;Ou.render=function(e,t,o,a){this.model=e,this.ecModel=t,this.api=o,function(c,h,p,y,w){var C=p._isZoomActive;y&&"takeGlobalCursor"===y.type&&(C="dataZoomSelect"===y.key&&y.dataZoomSelectActive),p._isZoomActive=C,c.setIconStatus("zoom",C?"emphasis":"normal");var n=new gv(fv(c.option),h,{include:["grid"]});p._brushController.setPanels(n.makePanelOpts(w,function(i){return i.xAxisDeclared&&!i.yAxisDeclared?"lineX":!i.xAxisDeclared&&i.yAxisDeclared?"lineY":"rect"})).enableBrush(!!C&&{brushType:"auto",brushStyle:c.getModel("brushStyle").getItemStyle()})}(e,t,this,a,o),function(c,h){c.setIconStatus("back",1<t1(h).length?"emphasis":"normal")}(e,t)},Ou.onclick=function(e,t,o){jd[o].call(this)},Ou.remove=function(e,t){this._brushController.unmount()},Ou.dispose=function(e,t){this._brushController.dispose()};var jd={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function(e){var t=t1(e),o=t[t.length-1];1<t.length&&t.pop();var a={};return hS(o,function(c,h){for(var p=t.length-1;0<=p;p--)if(c=t[p][h]){a[h]=c;break}}),a}(this.ecModel))}};function fv(e){var t={};return ee(["xAxisIndex","yAxisIndex"],function(o){t[o]=e[o],null==t[o]&&(t[o]="all"),!1!==t[o]&&"none"!==t[o]||(t[o]=[])}),t}function o1(e){this.model=e}Ou._onBrush=function(e,t){if(t.isEnd&&e.length){var o={},a=this.ecModel;this._brushController.updateCovers([]),new gv(fv(this.model.option),a,{include:["grid"]}).matchOutputRanges(e,a,function(h,p,y){if("cartesian2d"===y.type){var w=h.brushType;"rect"===w?(c("x",y,p[0]),c("y",y,p[1])):c({lineX:"x",lineY:"y"}[w],y,p)}}),function(h,p){var y=t1(h);hS(p,function(w,C){for(var n=y.length-1;0<=n&&!y[n][C];n--);if(n<0){var i=h.queryComponents({mainType:"dataZoom",subType:"select",id:C})[0];if(i){var s=i.getPercentRange();y[0][C]={dataZoomId:C,start:s[0],end:s[1]}}}}),y.push(p)}(a,o),this._dispatchZoomAction(o)}function c(h,p,y){var s,d,f,w=p.getAxis(h),C=w.model,n=(s=h,d=C,a.eachComponent({mainType:"dataZoom",subType:"select"},function(v){v.getAxisModel(s,d.componentIndex)&&(f=v)}),f),i=n.findRepresentativeAxisProxy(C).getMinMaxSpan();null==i.minValueSpan&&null==i.maxValueSpan||(y=vh(0,y.slice(),w.scale.getExtent(),0,i.minValueSpan,i.maxValueSpan)),n&&(o[n.id]={dataZoomId:n.id,startValue:y[0],endValue:y[1]})}},Ou._dispatchZoomAction=function(e){var t=[];pS(e,function(o,a){t.push(K(o))}),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},uv("dataZoom",$I),ks(function(e){if(e){var t=e.dataZoom||(e.dataZoom=[]);nt(t)||(e.dataZoom=t=[t]);var o=e.toolbox;if(o&&(nt(o)&&(o=o[0]),o&&o.feature)){var a=o.feature.dataZoom;c("xAxis",a),c("yAxis",a)}}function c(h,p){if(p){var y=h+"Index",w=p[y];null==w||"all"===w||nt(w)||(w=!1===w||"none"===w?[]:[w]),nt(i=e[h])||(i=i?[i]:[]),pS(i,function(C,n){if(null==w||"all"===w||-1!==Ue(w,n)){var i={type:"select",$fromToolbox:!0,filterMode:p.filterMode||"filter",id:"\0_ec_\0toolbox-dataZoom_"+h+n};i[y]=n,t.push(i)}})}var i}}),o1.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:rg.toolbox.restore.title},o1.prototype.onclick=function(e,t,o){(function(a){a[e1]=null})(e),t.dispatchAction({type:"restore",from:this.uid})},uv("restore",o1),Xo({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")}),Gs({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var YI=ee,XI=e_,vE=["","-webkit-","-moz-","-o-"];function ZI(e,t,o,a,c){var w,n,h=t&&t.painter;if(o){var p=h&&h.getViewportRoot();p&&(w=e,n=document.body,dt(ma,p,a,c,!0)&&dt(w,n,ma[0],ma[1]))}else{e[0]=a,e[1]=c;var y=h&&h.getViewportRootOffset();y&&(e[0]+=y.offsetLeft,e[1]+=y.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function bM(e,t,o){if(Oe.wxa)return null;var a=document.createElement("div");a.domBelongToZr=!0,this.el=a;var c=this._zr=t.getZr(),h=this._appendToBody=o&&o.appendToBody;this._styleCoord=[0,0,0,0],ZI(this._styleCoord,c,h,t.getWidth()/2,t.getHeight()/2),h?document.body.appendChild(a):e.appendChild(a),this._container=e,this._show=!1;var p=this;a.onmouseenter=function(){p._enterable&&(clearTimeout(p._hideTimeout),p._show=!0),p._inContent=!0},a.onmousemove=function(y){if(y=y||window.event,!p._enterable){var w=c.handler;En(c.painter.getViewportRoot(),y,!0),w.dispatch("mousemove",y)}},a.onmouseleave=function(){p._enterable&&p._show&&p.hideLater(p._hideDelay),p._inContent=!1}}function fS(e,t,o,a){e[0]=o,e[1]=a,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function vS(e){var t=this._zr=e.getZr();this._styleCoord=[0,0,0,0],fS(this._styleCoord,t,e.getWidth()/2,e.getHeight()/2),this._show=!1}bM.prototype={constructor:bM,_enterable:!0,update:function(e){var t=this._container,o=t.currentStyle||document.defaultView.getComputedStyle(t),a=t.style;"absolute"!==a.position&&"absolute"!==o.position&&(a.position="relative"),e.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[3],o=this._styleCoord[2]*this._zr.getWidth(),a=t*this._zr.getHeight();this.moveTo(o,a)},show:function(e){clearTimeout(this._hideTimeout);var t=this.el,o=this._styleCoord;t.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function mS(e){var p,w,t=[],o=e.get("transitionDuration"),a=e.get("backgroundColor"),c=e.getModel("textStyle"),h=e.get("padding");return o&&t.push((w="left "+(p=o)+"s "+"cubic-bezier(0.23, 1, 0.32, 1)"+",top "+p+"s cubic-bezier(0.23, 1, 0.32, 1)",Se(vE,function(C){return C+"transition:"+w}).join(";"))),a&&(Oe.canvasSupported?t.push("background-Color:"+a):(t.push("background-Color:#"+zg(a)),t.push("filter:alpha(opacity=70)"))),YI(["width","color","radius"],function(p){var y="border-"+p,w=XI(y),C=e.get(w);null!=C&&t.push(y+":"+C+("color"===p?"":"px"))}),t.push(function(p){var y=[],w=p.get("fontSize"),C=p.getTextColor();C&&y.push("color:"+C),y.push("font:"+p.getFont());var n=p.get("lineHeight");null==n&&(n=Math.round(3*w/2)),w&&y.push("line-height:"+n+"px");var i=p.get("textShadowColor"),s=p.get("textShadowBlur")||0,d=p.get("textShadowOffsetX")||0,u=p.get("textShadowOffsetY")||0;return s&&y.push("text-shadow:"+d+"px "+u+"px "+s+"px "+i),YI(["decoration","align"],function(f){var v=p.get(f);v&&y.push("text-"+f+":"+v)}),y.join(";")}(c)),null!=h&&t.push("padding:"+Em(h).join("px ")+"px"),t.join(";")+";"}(e)+";left:"+o[0]+"px;top:"+o[1]+"px;"+(e.get("extraCssText")||""),t.style.display=t.innerHTML?"block":"none",t.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(e){this.el.innerHTML=e??""},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el;return[e.clientWidth,e.clientHeight]},moveTo:function(e,t){var o=this._styleCoord;ZI(o,this._zr,this._appendToBody,e,t);var a=this.el.style;a.left=o[0]+"px",a.top=o[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(rt(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var e=this.el.clientWidth,t=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var o=document.defaultView.getComputedStyle(this.el);o&&(e+=parseInt(o.borderLeftWidth,10)+parseInt(o.borderRightWidth,10),t+=parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10))}return{width:e,height:t}}},vS.prototype={constructor:vS,_enterable:!0,update:function(e){e.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[3],o=this._styleCoord[2]*this._zr.getWidth(),a=t*this._zr.getHeight();this.moveTo(o,a)},show:function(e){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(e,t,o){this.el&&this._zr.remove(this.el);for(var a={},c=e,h="{marker",p=c.indexOf(h);0<=p;){var y=c.indexOf("|}"),w=c.substr(p+h.length,y-p-h.length);a["marker"+w]=-1<w.indexOf("sub")?{textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:t[w],textOffset:[3,0]}:{textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:t[w]},p=(c=c.substr(y+1)).indexOf("{marker")}var C=o.getModel("textStyle"),n=C.get("fontSize"),i=o.get("textLineHeight");null==i&&(i=Math.round(3*n/2)),this.el=new Yo({style:Fi({},C,{rich:a,text:e,textBackgroundColor:o.get("backgroundColor"),textBorderRadius:o.get("borderRadius"),textFill:o.get("textStyle.color"),textPadding:o.get("padding"),textLineHeight:i}),z:o.get("z")}),this._zr.add(this.el);var s=this;this.el.on("mouseover",function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0}),this.el.on("mouseout",function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1})},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el.getBoundingRect();return[e.width,e.height]},moveTo:function(e,t){if(this.el){var o=this._styleCoord;fS(o,this._zr,e,t),this.el.attr("position",[o[0],o[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(rt(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var e=this.getSize();return{width:e[0],height:e[1]}}};var KI=rt,r1=ee,yE=rn,hN=new sr({shape:{x:-1,y:-1,width:2,height:2}});function yS(e){for(var t=e.pop();e.length;){var o=e.pop();o&&(Fo.isInstance(o)&&(o=o.get("tooltip",!0)),"string"==typeof o&&(o={formatter:o}),t=new Fo(o,t,t.ecModel))}return t}function JI(e,t){return e.dispatchAction||rt(t.dispatchAction,t)}function bE(e){return"center"===e||"middle"===e}fr({type:"tooltip",init:function(e,t){if(!Oe.node){var o,a=e.getComponent("tooltip"),c=a.get("renderMode");this._renderMode=Zg(c),"html"===this._renderMode?(o=new bM(t.getDom(),t,{appendToBody:a.get("appendToBody",!0)}),this._newLine="<br/>"):(o=new vS(t),this._newLine="\n"),this._tooltipContent=o}},render:function(e,t,o){if(!Oe.node){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=o,this._lastDataByCoordSys=null,this._alwaysShowContent=e.get("alwaysShowContent");var a=this._tooltipContent;a.update(e),a.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var e=this._tooltipModel.get("triggerOn");Wx("itemTooltip",this._api,KI(function(t,o,a){"none"!==e&&(0<=e.indexOf(t)?this._tryShow(o,a):"leave"===t&&this._hide(a))},this))},_keepShow:function(){var e=this._tooltipModel,t=this._ecModel,o=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==e.get("triggerOn")){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){o.isDisposed()||a.manuallyShowTip(e,t,o,{x:a._lastX,y:a._lastY})})}},manuallyShowTip:function(e,t,o,a){if(a.from!==this.uid&&!Oe.node){var c=JI(a,o);this._ticket="";var h=a.dataByCoordSys;if(a.tooltip&&null!=a.x&&null!=a.y){var p=hN;p.position=[a.x,a.y],p.update(),p.tooltip=a.tooltip,this._tryShow({offsetX:a.x,offsetY:a.y,target:p},c)}else if(h)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:a.dataByCoordSys,tooltipOption:a.tooltipOption},c);else if(null!=a.seriesIndex){if(this._manuallyAxisShowTip(e,t,o,a))return;var y=ZT(a,t),w=y.point[0],C=y.point[1];null!=w&&null!=C&&this._tryShow({offsetX:w,offsetY:C,position:a.position,target:y.el},c)}else null!=a.x&&null!=a.y&&(o.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:o.getZr().findHover(a.x,a.y).target},c))}},manuallyHideTip:function(e,t,o,a){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,a.from!==this.uid&&this._hide(JI(a,o))},_manuallyAxisShowTip:function(e,t,o,a){var c=a.seriesIndex,h=a.dataIndex,p=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=c&&null!=h&&null!=p){var y=t.getSeriesByIndex(c);if(y&&"axis"===(e=yS([y.getData().getItemModel(h),y,(y.coordinateSystem||{}).model,e])).get("trigger"))return o.dispatchAction({type:"updateAxisPointer",seriesIndex:c,dataIndex:h,position:a.position}),!0}},_tryShow:function(e,t){var o=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var a=e.dataByCoordSys;a&&a.length?this._showAxisTooltip(a,e):o&&null!=o.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(e,o,t)):o&&o.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(e,o,t)):(this._lastDataByCoordSys=null,this._hide(t))}},_showOrMove:function(e,t){var o=e.get("showDelay");t=rt(t,this),clearTimeout(this._showTimout),0<o?this._showTimout=setTimeout(t,o):t()},_showAxisTooltip:function(e,t){var o=this._ecModel,c=[t.offsetX,t.offsetY],h=[],p=[],y=yS([t.tooltipOption,this._tooltipModel]),w=this._renderMode,C=this._newLine,n={};r1(e,function(s){r1(s.dataByAxis,function(d){var u=o.getComponent(d.axisDim+"Axis",d.axisIndex),f=d.value,v=[];if(u&&null!=f){var _=JO(f,u.axis,o,d.seriesDataIndices,d.valueLabelOpt);ee(d.seriesDataIndices,function(T){var M=o.getSeriesByIndex(T.seriesIndex),I=T.dataIndexInside,O=M&&M.getDataParams(I);if(O.axisDim=d.axisDim,O.axisIndex=d.axisIndex,O.axisType=d.axisType,O.axisId=d.axisId,O.axisValue=yk(u.axis,f),O.axisValueLabel=_,O){p.push(O);var R,N=M.formatTooltip(I,!0,null,w);ue(N)?(R=N.html,le(n,N.markers)):R=N,v.push(R)}});var k=_;h.push("html"!==w?v.join(C):(k?Hi(k)+C:"")+v.join(C))}})},this),h.reverse(),h=h.join(this._newLine+this._newLine);var i=t.position;this._showOrMove(y,function(){this._updateContentNotChangedOnAxis(e)?this._updatePosition(y,i,c[0],c[1],this._tooltipContent,p):this._showTooltipContent(y,h,p,Math.random(),c[0],c[1],i,void 0,n)})},_showSeriesItemTooltip:function(e,t,o){var c=t.seriesIndex,h=this._ecModel.getSeriesByIndex(c),p=t.dataModel||h,y=t.dataIndex,w=t.dataType,C=p.getData(w),n=yS([C.getItemModel(y),p,h&&(h.coordinateSystem||{}).model,this._tooltipModel]),i=n.get("trigger");if(null==i||"item"===i){var s,d,u=p.getDataParams(y,w),f=p.formatTooltip(y,!1,w,this._renderMode);d=ue(f)?(s=f.html,f.markers):(s=f,null);var v="item_"+p.name+"_"+y;this._showOrMove(n,function(){this._showTooltipContent(n,s,u,v,e.offsetX,e.offsetY,e.position,e.target,d)}),o({type:"showTip",dataIndexInside:y,dataIndex:C.getRawIndex(y),seriesIndex:c,from:this.uid})}},_showComponentItemTooltip:function(e,t,o){var a=t.tooltip;"string"==typeof a&&(a={content:a,formatter:a});var c=new Fo(a,this._tooltipModel,this._ecModel),h=c.get("content"),p=Math.random();this._showOrMove(c,function(){this._showTooltipContent(c,h,c.get("formatterParams")||{},p,e.offsetX,e.offsetY,e.position,t)}),o({type:"showTip",from:this.uid})},_showTooltipContent:function(e,t,o,a,c,h,p,y,w){if(this._ticket="",e.get("showContent")&&e.get("show")){var C=this._tooltipContent,n=e.get("formatter");p=p||e.get("position");var i=t;if(n&&"string"==typeof n)i=n_(n,o,!0);else if("function"==typeof n){var s=KI(function(d,u){d===this._ticket&&(C.setContent(u,w,e),this._updatePosition(e,p,c,h,C,o,y))},this);this._ticket=a,i=n(o,a,s)}C.setContent(i,w,e),C.show(e),this._updatePosition(e,p,c,h,C,o,y)}},_updatePosition:function(e,t,o,a,c,h,p){var y=this._api.getWidth(),w=this._api.getHeight();t=t||e.get("position");var f,v,_,k,T,M,I,O,R,N,C=c.getSize(),n=e.get("align"),i=e.get("verticalAlign"),s=p&&p.getBoundingRect().clone();if(p&&s.applyTransform(p.transform),"function"==typeof t&&(t=t([o,a],h,c.el,s,{viewSize:[y,w],contentSize:C.slice()})),nt(t))o=yE(t[0],y),a=yE(t[1],w);else if(ue(t)){t.width=C[0],t.height=C[1];var d=Xa(t,{width:y,height:w});o=d.x,a=d.y,i=n=null}else if("string"==typeof t&&p)o=(u=function(f,v,_){var k=_[0],T=_[1],M=0,I=0,O=v.width,R=v.height;switch(f){case"inside":M=v.x+O/2-k/2,I=v.y+R/2-T/2;break;case"top":M=v.x+O/2-k/2,I=v.y-T-5;break;case"bottom":M=v.x+O/2-k/2,I=v.y+R+5;break;case"left":M=v.x-k-5,I=v.y+R/2-T/2;break;case"right":M=v.x+O+5,I=v.y+R/2-T/2}return[M,I]}(t,s,C))[0],a=u[1];else{var u;o=(f=o,v=a,_=c,k=y,T=w,M=n?null:20,I=i?null:20,O=_.getOuterSize(),R=O.width,N=O.height,null!=M&&(k<f+R+M?f-=R+M:f+=M),null!=I&&(T<v+N+I?v-=N+I:v+=I),u=[f,v])[0],a=u[1]}n&&(o-=bE(n)?C[0]/2:"right"===n?C[0]:0),i&&(a-=bE(i)?C[1]/2:"bottom"===i?C[1]:0),e.get("confine")&&(o=(u=function(f,v,_,k,T){var M=_.getOuterSize(),I=M.width,O=M.height;return f=Math.min(f+I,k)-I,v=Math.min(v+O,T)-O,[f=Math.max(f,0),v=Math.max(v,0)]}(o,a,c,y,w))[0],a=u[1]),c.moveTo(o,a)},_updateContentNotChangedOnAxis:function(e){var t=this._lastDataByCoordSys,o=!!t&&t.length===e.length;return o&&r1(t,function(a,c){var h=a.dataByAxis||{},p=(e[c]||{}).dataByAxis||[];(o&=h.length===p.length)&&r1(h,function(y,w){var C=p[w]||{},n=y.seriesDataIndices||[],i=C.seriesDataIndices||[];(o&=y.value===C.value&&y.axisType===C.axisType&&y.axisId===C.axisId&&n.length===i.length)&&r1(n,function(s,d){var u=i[d];o&=s.seriesIndex===u.seriesIndex&&s.dataIndex===u.dataIndex})})}),this._lastDataByCoordSys=e,!!o},_hide:function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},dispose:function(e,t){Oe.node||(this._tooltipContent.dispose(),Qw("itemTooltip",t))}}),Xo({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),Xo({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});var xE=["rect","polygon","keep","clear"],Ri=ee;function bS(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function xM(e,t,o){var a={};return Ri(t,function(c){var h=a[c]=function(){function p(){}return p.prototype.__hidden=p.prototype,new p}();Ri(e[c],function(p,y){if(Rr.isValidType(y)){var w={type:y,visual:p};o&&o(w,c),h[y]=new Rr(w),"opacity"===y&&((w=K(w)).type="colorAlpha",h.__hidden.__alphaForOpacity=new Rr(w))}})}),a}function QI(e,t,o){var a;ee(o,function(c){t.hasOwnProperty(c)&&bS(t[c])&&(a=!0)}),a&&ee(o,function(c){t.hasOwnProperty(c)&&bS(t[c])?e[c]=K(t[c]):delete e[c]})}var xS={lineX:eD(0),lineY:eD(1),rect:{point:function(e,t,o){return e&&o.boundingRect.contain(e[0],e[1])},rect:function(e,t,o){return e&&o.boundingRect.intersect(e)}},polygon:{point:function(e,t,o){return e&&o.boundingRect.contain(e[0],e[1])&&kp(o.range,e[0],e[1])},rect:function(e,t,o){var a=o.range;if(!e||a.length<=1)return!1;var c=e.x,h=e.y,p=e.width,y=e.height,w=a[0];return!!(kp(a,c,h)||kp(a,c+p,h)||kp(a,c,h+y)||kp(a,c+p,h+y)||Ro.create(e).contain(w[0],w[1])||Dm(c,h,c+p,h,a)||Dm(c,h,c,h+y,a)||Dm(c+p,h,c+p,h+y,a)||Dm(c,h+y,c+p,h+y,a))||void 0}}};function eD(e){var t=["x","y"],o=["width","height"];return{point:function(a,c,h){if(a)return gd(a[e],h.range)},rect:function(a,c,h){if(a){var p=h.range,y=[a[t[e]],a[t[e]]+a[o[e]]];return y[1]<y[0]&&y.reverse(),gd(y[0],p)||gd(y[1],p)||gd(p[0],y)||gd(p[1],y)}}}}function gd(e,t){return t[0]<=e&&e<=t[1]}var wy=["inBrush","outOfBrush"],_S="__ecBrushSelect",i1="__ecInBrushSelectEvent",a1=Xc.VISUAL.BRUSH;function _M(e){e.eachComponent({mainType:"brush"},function(t){(t.brushTargetManager=new gv(t.option,e)).setInputRanges(t.areas,e)})}function tD(e,t){if(!e.isDisposed()){var o=e.getZr();o[i1]=!0,e.dispatchAction({type:"brushSelect",batch:t}),o[i1]=!1}}function Og(e,t,o,a){for(var c=0,h=t.length;c<h;c++){var p=t[c];if(e[p.brushType](a,o,p.selectors,p))return!0}}function s1(e){var t=e.brushSelector;if(Wt(t)){var o=[];return ee(xS,function(c,h){o[h]=function(p,y,w,C){var n=y.getItemLayout(p);return c[t](n,w,C)}}),o}if(Bt(t)){var a={};return ee(xS,function(c,h){a[h]=t}),a}return t}Wn(a1,function(e,t,o){e.eachComponent({mainType:"brush"},function(a){o&&"takeGlobalCursor"===o.type&&a.setBrushOption("brush"===o.key?o.brushOption:{brushType:!1})}),_M(e)}),yi(a1,function(e,t,o){var a,c,h=[];e.eachComponent({mainType:"brush"},function(p,y){var w={brushId:p.id,brushIndex:y,brushName:p.name,areas:K(p.areas),selected:[]};h.push(w);var C=p.option,n=C.brushLink,i=[],s=[],d=[],u=0;y||(a=C.throttleType,c=C.throttleDelay);var f=Se(p.areas,function(T){return M=_e({boundingRect:wS[T.brushType](T)},T),I=M.selectors={},ee(xS[M.brushType],function(O,R){I[R]=function(N){return O(N,I,M)}}),M;var M,I}),v=xM(p.option,wy,function(T){T.mappingMethod="fixed"});function _(T){return"all"===n||i[T]}function k(T){return!!T.length}nt(n)&&ee(n,function(T){i[T]=1}),e.eachSeries(function(T,M){var O,R,N,I=d[M]=[];"parallel"===T.subType?(R=M,u|=(N=(O=T).coordinateSystem).hasAxisBrushed(),_(R)&&N.eachActiveState(O.getData(),function(z,L){"active"===z&&(s[L]=1)})):function(O,R,N){var J,te,z=s1(O);if(z&&(J=R,null==(te=p.option.seriesIndex)||"all"===te||!(nt(te)?Ue(te,J)<0:J!==te))&&(ee(f,function(V){z[V.brushType]&&p.brushTargetManager.controlSeries(V,O,e)&&N.push(V),u|=k(N)}),_(R)&&k(N))){var L=O.getData();L.each(function(V){Og(z,N,L,V)&&(s[V]=1)})}}(T,M,I)}),e.eachSeries(function(T,M){var I={seriesId:T.id,seriesIndex:M,seriesName:T.name,dataIndex:[]};w.selected.push(I);var O=s1(T),R=d[M],N=T.getData(),z=_(M)?function(L){return s[L]?(I.dataIndex.push(N.getRawIndex(L)),"inBrush"):"outOfBrush"}:function(L){return Og(O,R,N,L)?(I.dataIndex.push(N.getRawIndex(L)),"inBrush"):"outOfBrush"};(_(M)?u:k(R))&&function(L,V,J,te,re,ie){var he,fe={};function ye(we){return J.getItemVisual(he,we)}function Ie(we,De){J.setItemVisual(he,we,De)}function He(we,De){var Be=J.getRawDataItem(he=null==ie?we:De);if(!Be||!1!==Be.visualMap)for(var et=te.call(re,we),Ye=V[et],it=fe[et],yt=0,It=it.length;yt<It;yt++){var qt=it[yt];Ye[qt]&&Ye[qt].applyVisual(we,ye,Ie)}}ee(L,function(we){var De=Rr.prepareVisualTypes(V[we]);fe[we]=De}),null==ie?J.each(He):J.each([ie],He)}(wy,v,N,z)})}),function(p,y,w,C,n){if(n){var i=p.getZr();i[i1]||(i[_S]||(i[_S]=tD),pp(i,_S,w,y)(p,C))}}(t,a,c,h,o)});var wS={lineX:Tt,lineY:Tt,rect:function(e){return l1(e.range)},polygon:function(e){for(var t,o=e.range,a=0,c=o.length;a<c;a++){var h=o[a];h[0]<(t=t||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(t[0][0]=h[0]),h[0]>t[0][1]&&(t[0][1]=h[0]),h[1]<t[1][0]&&(t[1][0]=h[1]),h[1]>t[1][1]&&(t[1][1]=h[1])}return t&&l1(t)}};function l1(e){return new Ro(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var pd=["#ddd"];function Sy(e,t){return le({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new Fo(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}function SS(e,t,o,a){a&&a.$from===e.id||this._brushController.setPanels(e.brushTargetManager.makePanelOpts(o)).enableBrush(e.brushOption).updateCovers(e.areas.slice())}function kS(e,t,o){this.model=e,this.ecModel=t,this.api=o}Gs({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(e,t){var o=this.option;t||QI(o,e,["inBrush","outOfBrush"]);var a=o.inBrush=o.inBrush||{};o.outOfBrush=o.outOfBrush||{color:pd},a.hasOwnProperty("liftZ")||(a.liftZ=5)},setAreas:function(e){e&&(this.areas=Se(e,function(t){return Sy(this.option,t)},this))},setBrushOption:function(e){this.brushOption=Sy(this.option,e),this.brushType=this.brushOption.brushType}}),fr({type:"brush",init:function(e,t){this.ecModel=e,this.api=t,(this._brushController=new Wp(t.getZr())).on("brush",rt(this._onBrush,this)).mount()},render:function(e){return this.model=e,SS.apply(this,arguments)},updateTransform:function(e,t){return _M(t),SS.apply(this,arguments)},updateView:SS,dispose:function(){this._brushController.dispose()},_onBrush:function(e,t){var o=this.model.id;this.model.brushTargetManager.setOutputRanges(e,this.ecModel),t.isEnd&&!t.removeOnClick||this.api.dispatchAction({type:"brush",brushId:o,areas:K(e),$from:o}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:o,areas:K(e),$from:o})}}),Xo({type:"brush",event:"brush"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(o){o.setAreas(e.areas)})}),Xo({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),Xo({type:"brushEnd",event:"brushEnd",update:"none"},function(){}),kS.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:K(rg.toolbox.brush.title)};var TS=kS.prototype;function nD(e){var t=e.itemStyle||(e.itemStyle={}),o=t.emphasis||(t.emphasis={}),a=e.label||e.label||{},c=a.normal||(a.normal={}),h={normal:1,emphasis:1};ee(a,function(p,y){h[y]||vv(c,y)||(c[y]=p)}),o.label&&!vv(a,"emphasis")&&(a.emphasis=o.label,delete o.label)}function vv(e,t){return e.hasOwnProperty(t)}TS.render=TS.updateView=function(e,t,o){var a,c,h;t.eachComponent({mainType:"brush"},function(p){a=p.brushType,c=p.brushOption.brushMode||"single",h|=p.areas.length}),this._brushType=a,this._brushMode=c,ee(e.get("type",!0),function(p){e.setIconStatus(p,("keep"===p?"multiple"===c:"clear"===p?h:p===a)?"emphasis":"normal")})},TS.getIcons=function(){var e=this.model,t=e.get("icon",!0),o={};return ee(e.get("type",!0),function(a){t[a]&&(o[a]=t[a])}),o},TS.onclick=function(e,t,o){var a=this._brushType,c=this._brushMode;"clear"===o?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===o?a:a!==o&&o,brushMode:"keep"===o?"multiple"===c?"single":"multiple":c}})},uv("brush",kS),ks(function(e,t){var w,C,o=e&&e.brush;if(nt(o)||(o=o?[o]:[]),o.length){var a=[];ee(o,function(w){var C=w.hasOwnProperty("toolbox")?w.toolbox:[];C instanceof Array&&(a=a.concat(C))});var c=e&&e.toolbox;nt(c)&&(c=c[0]),c||(e.toolbox=[c={feature:{}}]);var h=c.feature||(c.feature={}),p=h.brush||(h.brush={}),y=p.type||(p.type=[]);y.push.apply(y,a),C={},ee(w=y,function(n){C[n]=1}),w.length=0,ee(C,function(n,i){w.push(i)}),t&&!y.length&&y.push.apply(y,xE)}}),Gs({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),fr({type:"title",render:function(e,t,o){if(this.group.removeAll(),e.get("show")){var a=this.group,c=e.getModel("textStyle"),h=e.getModel("subtextStyle"),p=e.get("textAlign"),y=_n(e.get("textBaseline"),e.get("textVerticalAlign")),w=new Yo({style:Fi({},c,{text:e.get("text"),textFill:c.getTextColor()},{disableBox:!0}),z2:10}),C=w.getBoundingRect(),n=e.get("subtext"),i=new Yo({style:Fi({},h,{text:n,textFill:h.getTextColor(),y:C.height+e.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),s=e.get("link"),d=e.get("sublink"),u=e.get("triggerEvent",!0);w.silent=!s&&!u,i.silent=!d&&!u,s&&w.on("click",function(){gc(s,"_"+e.get("target"))}),d&&i.on("click",function(){gc(d,"_"+e.get("subtarget"))}),w.eventData=i.eventData=u?{componentType:"title",componentIndex:e.componentIndex}:null,a.add(w),n&&a.add(i);var f=a.getBoundingRect(),v=e.getBoxLayoutParams();v.width=f.width,v.height=f.height;var _=Xa(v,{width:o.getWidth(),height:o.getHeight()},e.get("padding"));p||("middle"===(p=e.get("left")||e.get("right"))&&(p="center"),"right"===p?_.x+=_.width:"center"===p&&(_.x+=_.width/2)),y||("center"===(y=e.get("top")||e.get("bottom"))&&(y="middle"),"bottom"===y?_.y+=_.height:"middle"===y&&(_.y+=_.height/2),y=y||"top"),a.attr("position",[_.x,_.y]);var k={textAlign:p,textVerticalAlign:y};w.setStyle(k),i.setStyle(k),f=a.getBoundingRect();var T=_.margin,M=e.getItemStyle(["color","opacity"]);M.fill=e.get("backgroundColor");var I=new sr({shape:{x:f.x-T[3],y:f.y-T[0],width:f.width+T[1]+T[3],height:f.height+T[0]+T[2],r:e.get("borderRadius")},style:M,subPixelOptimize:!0,silent:!0});a.add(I)}}}),wo.registerSubTypeDefaulter("timeline",function(){return"slider"}),Xo({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t){var o=t.getComponent("timeline");return o&&null!=e.currentIndex&&(o.setCurrentIndex(e.currentIndex),!o.get("loop",!0)&&o.isIndexMax()&&o.setPlayState(!1)),t.resetOption("timeline"),_e({currentIndex:o.option.currentIndex},e)}),Xo({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var o=t.getComponent("timeline");o&&null!=e.playState&&o.setPlayState(e.playState)});var yv=wo.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(e,t,o){this.mergeDefaultAndTheme(e,o),this._initData()},mergeOption:function(e){yv.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(e){null==e&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(t<=e&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(e){this.option.autoPlay=!!e},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var e=this.option,t=e.data||[],o=e.axisType,a=this._names=[];if("category"===o){var c=[];ee(t,function(p,y){var w,C=iu(p);ue(p)?(w=K(p)).value=y:w=y,c.push(w),Wt(C)||null!=C&&!isNaN(C)||(C=""),a.push(C+"")}),t=c}(this._data=new Ja([{name:"value",type:{category:"ordinal",time:"time"}[o]||"number"}],this)).initData(t,a)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});function wM(e,t,o,a){bi.call(this,e,t,o),this.type=a||"value",this.model=null}Me(yv.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),s0);var _E=Id.extend({type:"timeline"});wM.prototype={constructor:wM,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},ve(wM,bi);var Jp=rt,SM=ee,CM=Math.PI;function kM(e,t,o,a,c,h){var p=t.get("color");c?(c.setColor(p),o.add(c),h&&h.onUpdate(c)):((c=Kc(e.get("symbol"),-1,-1,2,2,p)).setStyle("strokeNoScale",!0),o.add(c),h&&h.onCreate(c));var y=t.getItemStyle(["color","symbol","symbolSize"]);c.setStyle(y),a=le({rectHover:!0,z2:100},a,!0);var w=e.get("symbolSize");(w=w instanceof Array?w.slice():[+w,+w])[0]/=2,w[1]/=2,a.scale=w;var C=e.get("symbolOffset");if(C){var n=a.position=a.position||[0,0];n[0]+=rn(C[0],w[0]),n[1]+=rn(C[1],w[1])}var i=e.get("symbolRotate");return a.rotation=(i||0)*Math.PI/180||0,c.attr(a),c.updateTransform(),c}function TM(e,t,o,a,c){if(!e.dragging){var h=a.getModel("checkpointStyle"),p=o.dataToCoord(a.getData().get(["value"],t));c||!h.get("animation",!0)?e.attr({position:[p,0]}):(e.stopAnimation(!0),e.animateTo({position:[p,0]},h.get("animationDuration",!0),h.get("animationEasing",!0)))}}_E.extend({type:"timeline.slider",init:function(e,t){this.api=t},render:function(e,t,o,a){if(this.model=e,this.api=o,this.ecModel=t,this.group.removeAll(),e.get("show",!0)){var c=this._layout(e,o),h=this._createGroup("mainGroup"),p=this._createGroup("labelGroup"),y=this._axis=this._createAxis(c,e);e.formatTooltip=function(w){return Hi(y.scale.getLabel(w))},SM(["AxisLine","AxisTick","Control","CurrentPointer"],function(w){this["_render"+w](c,h,y,e)},this),this._renderAxisLabel(c,p,y,e),this._position(c,e)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(e,t){var z,L,o=e.get("label.position"),a=e.get("orient"),c=(L=t,Xa((z=e).getBoxLayoutParams(),{width:L.getWidth(),height:L.getHeight()},z.get("padding")));null==o||"auto"===o?o="horizontal"===a?c.y+c.height/2<t.getHeight()/2?"-":"+":c.x+c.width/2<t.getWidth()/2?"+":"-":isNaN(o)&&(o={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][o]);var h,p,y,w,C={horizontal:"center",vertical:0<=o||"+"===o?"left":"right"},n={horizontal:0<=o||"+"===o?"top":"bottom",vertical:"middle"},i={horizontal:0,vertical:CM/2},s="vertical"===a?c.height:c.width,d=e.getModel("controlStyle"),u=d.get("show",!0),f=u?d.get("itemSize"):0,v=u?d.get("itemGap"):0,_=f+v,k=e.get("label.rotate")||0;k=k*CM/180;var T=d.get("position",!0),M=u&&d.get("showPlayBtn",!0),I=u&&d.get("showPrevBtn",!0),R=0,N=s;return"left"===T||"bottom"===T?(M&&(h=[0,0],R+=_),I&&(p=[R,0],R+=_)):(M&&(h=[N-f,0],N-=_),I&&(p=[0,0],R+=_)),u&&d.get("showNextBtn",!0)&&(y=[N-f,0],N-=_),w=[R,N],e.get("inverse")&&w.reverse(),{viewRect:c,mainLength:s,orient:a,rotation:i[a],labelRotation:k,labelPosOpt:o,labelAlign:e.get("label.align")||C[a],labelBaseline:e.get("label.verticalAlign")||e.get("label.baseline")||n[a],playPosition:h,prevBtnPosition:p,nextBtnPosition:y,axisExtent:w,controlSize:f,controlGap:v}},_position:function(e,t){var o=this._mainGroup,a=this._labelGroup,c=e.viewRect;if("vertical"===e.orient){var h=Ii(),p=c.x,y=c.y+c.height;zr(h,h,[-p,-y]),Rc(h,h,-CM/2),zr(h,h,[p,y]),(c=c.clone()).applyTransform(h)}var w=v(c),C=v(o.getBoundingRect()),n=v(a.getBoundingRect()),i=o.position,s=a.position;s[0]=i[0]=w[0][0];var d,u=e.labelPosOpt;function f(k){var T=k.position;k.origin=[w[0][0]-T[0],w[1][0]-T[1]]}function v(k){return[[k.x,k.x+k.width],[k.y,k.y+k.height]]}function _(k,T,M,I,O){k[I]+=M[I][O]-T[I][O]}isNaN(u)?(_(i,C,w,1,d="+"===u?0:1),_(s,n,w,1,1-d)):(_(i,C,w,1,d=0<=u?0:1),s[1]=i[1]+u),o.attr("position",i),a.attr("position",s),o.rotation=a.rotation=e.rotation,f(o),f(a)},_createAxis:function(e,t){var o=t.getData(),a=t.get("axisType"),c=Fb(t,a);c.getTicks=function(){return o.mapArray(["value"],function(y){return y})};var h=o.getDataExtent("value");c.setExtent(h[0],h[1]),c.niceTicks();var p=new wM("value",c,e.axisExtent,a);return p.model=t,p},_createGroup:function(e){var t=this["_"+e]=new pn;return this.group.add(t),t},_renderAxisLine:function(e,t,o,a){var c=o.getExtent();a.get("lineStyle.show")&&t.add(new Ya({shape:{x1:c[0],y1:0,x2:c[1],y2:0},style:pe({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(e,t,o,a){var c=a.getData(),h=o.scale.getTicks();SM(h,function(p){var y=o.dataToCoord(p),w=c.getItemModel(p),C=w.getModel("itemStyle"),n=w.getModel("emphasis.itemStyle"),i={position:[y,0],onclick:Jp(this._changeTimeline,this,p)},s=kM(w,C,t,i);qr(s,n.getItemStyle()),w.get("tooltip")?(s.dataIndex=p,s.dataModel=a):s.dataIndex=s.dataModel=null},this)},_renderAxisLabel:function(e,t,o,a){if(o.getLabelModel().get("show")){var c=a.getData(),h=o.getViewLabels();SM(h,function(p){var y=p.tickValue,w=c.getItemModel(y),C=w.getModel("label"),n=w.getModel("emphasis.label"),i=o.dataToCoord(p.tickValue),s=new Yo({position:[i,0],rotation:e.labelRotation-e.rotation,onclick:Jp(this._changeTimeline,this,y),silent:!1});Fi(s.style,C,{text:p.formattedLabel,textAlign:e.labelAlign,textVerticalAlign:e.labelBaseline}),t.add(s),qr(s,Fi({},n))},this)}},_renderControl:function(e,t,o,a){var c=e.controlSize,h=e.rotation,p=a.getModel("controlStyle").getItemStyle(),y=a.getModel("emphasis.controlStyle").getItemStyle(),w=[0,-c/2,c,c],C=a.getPlayState(),n=a.get("inverse",!0);function i(s,d,u,f){if(s){var v=(T=w,I=(M={position:s,origin:[c/2,0],rotation:f?-h:0,rectHover:!0,style:p,onclick:u}).style,O=Im(a.get(d),M||{},new Ro(T[0],T[1],T[2],T[3])),I&&O.setStyle(I),O);t.add(v),qr(v,y)}var T,M,I,O}i(e.nextBtnPosition,"controlStyle.nextIcon",Jp(this._changeTimeline,this,n?"-":"+")),i(e.prevBtnPosition,"controlStyle.prevIcon",Jp(this._changeTimeline,this,n?"+":"-")),i(e.playPosition,"controlStyle."+(C?"stopIcon":"playIcon"),Jp(this._handlePlayClick,this,!C),!0)},_renderCurrentPointer:function(e,t,o,a){var c=a.getData(),h=a.getCurrentIndex(),p=c.getItemModel(h).getModel("checkpointStyle"),y=this;this._currentPointer=kM(p,p,this._mainGroup,{},this._currentPointer,{onCreate:function(C){C.draggable=!0,C.drift=Jp(y._handlePointerDrag,y),C.ondragend=Jp(y._handlePointerDragend,y),TM(C,h,o,a,!0)},onUpdate:function(C){TM(C,h,o,a)}})},_handlePlayClick:function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},_handlePointerDrag:function(e,t,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},_handlePointerDragend:function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},_pointerChangeTimeline:function(e,t){var o=this._toAxisCoord(e)[0],a=Om(this._axis.getExtent().slice());o>a[1]&&(o=a[1]),o<a[0]&&(o=a[0]),this._currentPointer.position[0]=o,this._currentPointer.dirty();var c=this._findNearestTick(o),h=this.model;(t||c!==h.getCurrentIndex()&&h.get("realtime"))&&this._changeTimeline(c)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(Jp(function(){var e=this.model;this._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(e){return vi(e,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(e){var t,o=this.model.getData(),a=1/0,c=this._axis;return o.each(["value"],function(h,p){var y=c.dataToCoord(h),w=Math.abs(y-e);w<a&&(a=w,t=p)}),t},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(e){var t=this.model.getCurrentIndex();"+"===e?e=t+1:"-"===e&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})}}),ks(function(e){var t=e&&e.timeline;nt(t)||(t=t?[t]:[]),ee(t,function(o){o&&function(a){var c=a.type,h={number:"value",time:"time"};if(h[c]&&(a.axisType=h[c],delete a.type),nD(a),vv(a,"controlPosition")){var p=a.controlStyle||(a.controlStyle={});vv(p,"position")||(p.position=a.controlPosition),"none"!==p.position||vv(p,"show")||(p.show=!1,delete p.position),delete a.controlPosition}ee(a.data||[],function(y){ue(y)&&!nt(y)&&(!vv(y,"value")&&vv(y,"name")&&(y.value=y.name),nD(y))})}(o)})});var wE=Zh,oD=Hi;function MM(e){Fl(e,"label",["show"])}var AM=Gs({type:"marker",dependencies:["series","grid","polar","geo"],init:function(e,t,o){this.mergeDefaultAndTheme(e,o),this._mergeOption(e,o,!1,!0)},isAnimationEnabled:function(){if(Oe.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},mergeOption:function(e,t){this._mergeOption(e,t,!1,!1)},_mergeOption:function(e,t,o,a){var c=this.constructor,h=this.mainType+"Model";o||t.eachSeries(function(p){var y=p.get(this.mainType,!0),w=p[h];y&&y.data?(w?w._mergeOption(y,t,!0):(a&&MM(y),ee(y.data,function(C){C instanceof Array?(MM(C[0]),MM(C[1])):MM(C)}),pe(w=new c(y,this,t),{mainType:this.mainType,seriesIndex:p.seriesIndex,name:p.name,createdBySelf:!0}),w.__hostSeries=p),p[h]=w):p[h]=null},this)},formatTooltip:function(e,t,o,a){var c=this.getData(),h=this.getRawValue(e),p=nt(h)?Se(h,wE).join(", "):wE(h),y=c.getName(e),w=oD(this.name);return null==h&&!y||(w+="html"===a?"<br/>":"\n"),y&&(w+=oD(y),null!=h&&(w+=" : ")),null!=h&&(w+=oD(p)),w},getData:function(){return this._data},setData:function(e){this._data=e}});Me(AM,s0),AM.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var IM=Ue;function Cy(e,t,o,a,c,h){var p=[],y=dg(t,a)?t.getCalculationInfo("stackResultDimension"):a,w=rD(t,y,e),C=t.indicesOfNearest(y,w)[0];p[c]=t.get(o,C),p[h]=t.get(y,C);var n=t.get(a,C),i=CA(t.get(a,C));return 0<=(i=Math.min(i,20))&&(p[h]=+p[h].toFixed(i)),[p,n]}var c1=wt,MS={min:c1(Cy,"min"),max:c1(Cy,"max"),average:c1(Cy,"average")};function qd(e,t){var i,o=e.getData(),a=e.coordinateSystem;if(t&&(i=t,isNaN(parseFloat(i.x))||isNaN(parseFloat(i.y)))&&!nt(t.coord)&&a){var c=a.dimensions,h=DM(t,o,a,e);if((t=K(t)).type&&MS[t.type]&&h.baseAxis&&h.valueAxis){var p=IM(c,h.baseAxis.dim),y=IM(c,h.valueAxis.dim),w=MS[t.type](o,h.baseDataDim,h.valueDataDim,p,y);t.coord=w[0],t.value=w[1]}else{for(var C=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis],n=0;n<2;n++)MS[C[n]]&&(C[n]=rD(o,o.mapDimension(c[n]),C[n]));t.coord=C}}return t}function DM(e,t,o,a){var c={};return null!=e.valueIndex||null!=e.valueDim?(c.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,c.valueAxis=o.getAxis(function(h,p){var y=h.getData(),w=y.dimensions;p=y.getDimension(p);for(var C=0;C<w.length;C++){var n=y.getDimensionInfo(w[C]);if(n.name===p)return n.coordDim}}(a,c.valueDataDim)),c.baseAxis=o.getOtherAxis(c.valueAxis),c.baseDataDim=t.mapDimension(c.baseAxis.dim)):(c.baseAxis=a.getBaseAxis(),c.valueAxis=o.getOtherAxis(c.baseAxis),c.baseDataDim=t.mapDimension(c.baseAxis.dim),c.valueDataDim=t.mapDimension(c.valueAxis.dim)),c}function ky(e,t){return!(e&&e.containData&&t.coord&&!function(o){return!(isNaN(parseFloat(o.x))&&isNaN(parseFloat(o.y)))}(t))||e.containData(t.coord)}function OM(e,t,o,a){return a<2?e.coord&&e.coord[a]:e.value}function rD(e,t,o){if("average"!==o)return"median"===o?e.getMedian(t):e.getDataExtent(t,!0)["max"===o?1:0];var a=0,c=0;return e.each(t,function(h,p){isNaN(h)||(a+=h,c++)}),a/c}var AS=fr({type:"marker",init:function(){this.markerGroupMap=ft()},render:function(e,t,o){var a=this.markerGroupMap;a.each(function(h){h.__keep=!1});var c=this.type+"Model";t.eachSeries(function(h){var p=h[c];p&&this.renderSeries(h,p,t,o)},this),a.each(function(h){h.__keep||this.group.remove(h.group)},this)},renderSeries:function(){}});function iD(e,t,o){var a=t.coordinateSystem;e.each(function(c){var h,p=e.getItemModel(c),y=rn(p.get("x"),o.getWidth()),w=rn(p.get("y"),o.getHeight());if(isNaN(y)||isNaN(w)){if(t.getMarkerPosition)h=t.getMarkerPosition(e.getValues(e.dimensions,c));else if(a){var C=e.get(a.dimensions[0],c),n=e.get(a.dimensions[1],c);h=a.dataToPoint([C,n])}}else h=[y,w];isNaN(y)||(h[0]=y),isNaN(w)||(h[1]=w),e.setItemLayout(c,h)})}function SE(e,t,o,a){var c=e.getData(),h=a.type;if(!nt(a)&&("min"===h||"max"===h||"average"===h||"median"===h||null!=a.xAxis||null!=a.yAxis)){var p,y;if(null!=a.yAxis||null!=a.xAxis)p=t.getAxis(null!=a.yAxis?"y":"x"),y=Jt(a.yAxis,a.xAxis);else{var w=DM(a,c,t,e);p=w.valueAxis,y=rD(c,Nb(c,w.valueDataDim),h)}var C="x"===p.dim?0:1,n=1-C,i=K(a),s={};i.type=null,i.coord=[],s.coord=[],i.coord[n]=-1/0,s.coord[n]=1/0;var d=o.get("precision");0<=d&&"number"==typeof y&&(y=+y.toFixed(Math.min(d,20))),i.coord[C]=s.coord[C]=y,a=[i,s,{type:h,valueIndex:a.valueIndex,value:y}]}return(a=[qd(e,a[0]),qd(e,a[1]),pe({},a[2])])[2].type=a[2].type||"",le(a[2],a[0]),le(a[2],a[1]),a}function d1(e){return!isNaN(e)&&!isFinite(e)}function EM(e,t,o,a){var c=1-e,h=a.dimensions[e];return d1(t[c])&&d1(o[c])&&t[e]===o[e]&&a.getAxis(h).containData(t[e])}function CE(e,t){if("cartesian2d"===e.type){var o=t[0].coord,a=t[1].coord;if(o&&a&&(EM(1,o,a,e)||EM(0,o,a,e)))return!0}return ky(e,t[0])&&ky(e,t[1])}function NM(e,t,o,a,c){var h,p=a.coordinateSystem,y=e.getItemModel(t),w=rn(y.get("x"),c.getWidth()),C=rn(y.get("y"),c.getHeight());if(isNaN(w)||isNaN(C)){if(a.getMarkerPosition)h=a.getMarkerPosition(e.getValues(e.dimensions,t));else{var n=p.dimensions,i=e.get(n[0],t),s=e.get(n[1],t);h=p.dataToPoint([i,s])}if("cartesian2d"===p.type){var d=p.getAxis("x"),u=p.getAxis("y");d1(e.get((n=p.dimensions)[0],t))?h[0]=d.toGlobalCoord(d.getExtent()[o?0:1]):d1(e.get(n[1],t))&&(h[1]=u.toGlobalCoord(u.getExtent()[o?0:1]))}isNaN(w)||(h[0]=w),isNaN(C)||(h[1]=C)}else h=[w,C];e.setItemLayout(t,h)}function aD(e,t,o,a){var c=qd(e,a[0]),h=qd(e,a[1]),p=Jt,y=c.coord,w=h.coord;y[0]=p(y[0],-1/0),y[1]=p(y[1],-1/0),w[0]=p(w[0],1/0),w[1]=p(w[1],1/0);var C=de([{},c,h]);return C.coord=[c.coord,h.coord],C.x0=c.x,C.y0=c.y,C.x1=h.x,C.y1=h.y,C}function u1(e){return!isNaN(e)&&!isFinite(e)}function kE(e,t,o){var a=1-e;return u1(t[a])&&u1(o[a])}function gN(e,t){var o=t.coord[0],a=t.coord[1];return!("cartesian2d"!==e.type||!o||!a||!kE(1,o,a)&&!kE(0,o,a))||ky(e,{coord:o,x:t.x0,y:t.y0})||ky(e,{coord:a,x:t.x1,y:t.y1})}function sD(e,t,o,a,c){var h,p=a.coordinateSystem,y=e.getItemModel(t),w=rn(y.get(o[0]),c.getWidth()),C=rn(y.get(o[1]),c.getHeight());if(isNaN(w)||isNaN(C)){if(a.getMarkerPosition)h=a.getMarkerPosition(e.getValues(o,t));else{var n=[d=e.get(o[0],t),u=e.get(o[1],t)];p.clampData&&p.clampData(n,n),h=p.dataToPoint(n,!0)}if("cartesian2d"===p.type){var i=p.getAxis("x"),s=p.getAxis("y"),d=e.get(o[0],t),u=e.get(o[1],t);u1(d)?h[0]=i.toGlobalCoord(i.getExtent()["x0"===o[0]?0:1]):u1(u)&&(h[1]=s.toGlobalCoord(s.getExtent()["y0"===o[1]?0:1]))}isNaN(w)||(h[0]=w),isNaN(C)||(h[1]=C)}else h=[w,C];return h}AS.extend({type:"markPoint",updateTransform:function(e,t,o){t.eachSeries(function(a){var c=a.markPointModel;c&&(iD(c.getData(),a,o),this.markerGroupMap.get(a.id).updateLayout(c))},this)},renderSeries:function(e,t,o,a){var c=e.coordinateSystem,h=e.id,p=e.getData(),y=this.markerGroupMap,w=y.get(h)||y.set(h,new Ap),C=function(n,i,s){var d;d=n?Se(n&&n.dimensions,function(v){return _e({name:v},i.getData().getDimensionInfo(i.getData().mapDimension(v))||{})}):[{name:"value",type:"float"}];var u=new Ja(d,s),f=Se(s.get("data"),wt(qd,i));return n&&(f=We(f,wt(ky,n))),u.initData(f,null,n?OM:function(v){return v.value}),u}(c,e,t);t.setData(C),iD(t.getData(),e,a),C.each(function(n){var i=C.getItemModel(n),s=i.getShallow("symbol"),d=i.getShallow("symbolSize"),u=i.getShallow("symbolRotate"),f=Bt(s),v=Bt(d),_=Bt(u);if(f||v||_){var k=t.getRawValue(n),T=t.getDataParams(n);f&&(s=s(k,T)),v&&(d=d(k,T)),_&&(u=u(k,T))}C.setItemVisual(n,{symbol:s,symbolSize:d,symbolRotate:u,color:i.get("itemStyle.color")||p.getVisual("color")})}),w.updateData(C),this.group.add(w.group),C.eachItemGraphicEl(function(n){n.traverse(function(i){i.dataModel=t})}),w.__keep=!0,w.group.silent=t.get("silent")||e.get("silent")}}),ks(function(e){e.markPoint=e.markPoint||{}}),AM.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}}),AS.extend({type:"markLine",updateTransform:function(e,t,o){t.eachSeries(function(a){var c=a.markLineModel;if(c){var h=c.getData(),p=c.__from,y=c.__to;p.each(function(w){NM(p,w,!0,a,o),NM(y,w,!1,a,o)}),h.each(function(w){h.setItemLayout(w,[p.getItemLayout(w),y.getItemLayout(w)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},renderSeries:function(e,t,o,a){var c=e.coordinateSystem,h=e.id,p=e.getData(),y=this.markerGroupMap,w=y.get(h)||y.set(h,new Rf);this.group.add(w.group);var C=function(v,_,k){var T;T=v?Se(v&&v.dimensions,function(z){return _e({name:z},_.getData().getDimensionInfo(_.getData().mapDimension(z))||{})}):[{name:"value",type:"float"}];var M=new Ja(T,k),I=new Ja(T,k),O=new Ja([],k),R=Se(k.get("data"),wt(SE,_,v,k));v&&(R=We(R,wt(CE,v)));var N=v?OM:function(z){return z.value};return M.initData(Se(R,function(z){return z[0]}),null,N),I.initData(Se(R,function(z){return z[1]}),null,N),O.initData(Se(R,function(z){return z[2]})),O.hasItemOption=!0,{from:M,to:I,line:O}}(c,e,t),n=C.from,i=C.to,s=C.line;t.__from=n,t.__to=i,t.setData(s);var d=t.get("symbol"),u=t.get("symbolSize");function f(v,_,k){var T=v.getItemModel(_);NM(v,_,k,e,a),v.setItemVisual(_,{symbolRotate:T.get("symbolRotate"),symbolSize:T.get("symbolSize")||u[k?0:1],symbol:T.get("symbol",!0)||d[k?0:1],color:T.get("itemStyle.color")||p.getVisual("color")})}nt(d)||(d=[d,d]),"number"==typeof u&&(u=[u,u]),C.from.each(function(v){f(n,v,!0),f(i,v,!1)}),s.each(function(v){var _=s.getItemModel(v).get("lineStyle.color");s.setItemVisual(v,{color:_||n.getItemVisual(v,"color")}),s.setItemLayout(v,[n.getItemLayout(v),i.getItemLayout(v)]),s.setItemVisual(v,{fromSymbolRotate:n.getItemVisual(v,"symbolRotate"),fromSymbolSize:n.getItemVisual(v,"symbolSize"),fromSymbol:n.getItemVisual(v,"symbol"),toSymbolRotate:i.getItemVisual(v,"symbolRotate"),toSymbolSize:i.getItemVisual(v,"symbolSize"),toSymbol:i.getItemVisual(v,"symbol")})}),w.updateData(s),C.line.eachItemGraphicEl(function(v,_){v.traverse(function(k){k.dataModel=t})}),w.__keep=!0,w.group.silent=t.get("silent")||e.get("silent")}}),ks(function(e){e.markLine=e.markLine||{}}),AM.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var lD=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];AS.extend({type:"markArea",updateTransform:function(e,t,o){t.eachSeries(function(a){var c=a.markAreaModel;if(c){var h=c.getData();h.each(function(p){var y=Se(lD,function(w){return sD(h,p,w,a,o)});h.setItemLayout(p,y),h.getItemGraphicEl(p).setShape("points",y)})}},this)},renderSeries:function(e,t,o,a){var c=e.coordinateSystem,h=e.id,p=e.getData(),y=this.markerGroupMap,w=y.get(h)||y.set(h,{group:new pn});this.group.add(w.group),w.__keep=!0;var C=function(n,i,s){var d,u;u=n?(d=Se(n&&n.dimensions,function(_){var k=i.getData();return _e({name:_},k.getDimensionInfo(k.mapDimension(_))||{})}),new Ja(Se(["x0","y0","x1","y1"],function(_,k){return{name:_,type:d[k%2].type}}),s)):new Ja(d=[{name:"value",type:"float"}],s);var f=Se(s.get("data"),wt(aD,i,n,s));return n&&(f=We(f,wt(gN,n))),u.initData(f,null,n?function(_,k,T,M){return _.coord[Math.floor(M/2)][M%2]}:function(_){return _.value}),u.hasItemOption=!0,u}(c,e,t);t.setData(C),C.each(function(n){var i=Se(lD,function(d){return sD(C,n,d,e,a)}),s=!0;ee(lD,function(d){if(s){var u=C.get(d[0],n),f=C.get(d[1],n);(u1(u)||c.getAxis("x").containData(u))&&(u1(f)||c.getAxis("y").containData(f))&&(s=!1)}}),C.setItemLayout(n,{points:i,allClipped:s}),C.setItemVisual(n,{color:p.getVisual("color")})}),C.diff(w.__data).add(function(n){var i=C.getItemLayout(n);if(!i.allClipped){var s=new pl({shape:{points:i.points}});C.setItemGraphicEl(n,s),w.group.add(s)}}).update(function(n,i){var s=w.__data.getItemGraphicEl(i),d=C.getItemLayout(n);d.allClipped?s&&w.group.remove(s):(s?Eo(s,{shape:{points:d.points}},t,n):s=new pl({shape:{points:d.points}}),C.setItemGraphicEl(n,s),w.group.add(s))}).remove(function(n){var i=w.__data.getItemGraphicEl(n);w.group.remove(i)}).execute(),C.eachItemGraphicEl(function(n,i){var s=C.getItemModel(i),d=s.getModel("label"),u=s.getModel("emphasis.label"),f=C.getItemVisual(i,"color");n.useStyle(_e(s.getModel("itemStyle").getItemStyle(),{fill:Ua(f,.4),stroke:f})),n.hoverStyle=s.getModel("emphasis.itemStyle").getItemStyle(),ei(n.style,n.hoverStyle,d,u,{labelFetcher:t,labelDataIndex:i,defaultText:C.getName(i)||"",isRectText:!0,autoColor:f}),qr(n,{}),n.dataModel=t}),w.__data=C,w.group.silent=t.get("silent")||e.get("silent")}}),ks(function(e){e.markArea=e.markArea||{}});var h1=rg.legend.selector,cD={all:{type:"all",title:K(h1.all)},inverse:{type:"inverse",title:K(h1.inverse)}},RM=Gs({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(e,t,o){this.mergeDefaultAndTheme(e,o),e.selected=e.selected||{},this._updateSelector(e)},mergeOption:function(e){RM.superCall(this,"mergeOption",e),this._updateSelector(e)},_updateSelector:function(e){var t=e.selector;!0===t&&(t=e.selector=["all","inverse"]),nt(t)&&ee(t,function(o,a){Wt(o)&&(o={type:o}),t[a]=le(o,cD[o.type])})},optionUpdated:function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,o=0;o<e.length;o++){var a=e[o].get("name");if(this.isSelected(a)){this.select(a),t=!0;break}}t||this.select(e[0].get("name"))}},_updateData:function(e){var t=[],o=[];e.eachRawSeries(function(c){var h;if(o.push(c.name),c.legendVisualProvider){var y=c.legendVisualProvider.getAllNames();e.isSeriesFiltered(c)||(o=o.concat(y)),y.length?t=t.concat(y):h=!0}else h=!0;h&&$y(c)&&t.push(c.name)}),this._availableNames=o;var a=Se(this.get("data")||t,function(c){return"string"!=typeof c&&"number"!=typeof c||(c={name:c}),new Fo(c,this,this.ecModel)},this);this._data=a},getData:function(){return this._data},select:function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&ee(this._data,function(o){t[o.get("name")]=!1}),t[e]=!0},unSelect:function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},toggleSelected:function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},allSelect:function(){var t=this.option.selected;ee(this._data,function(o){t[o.get("name",!0)]=!0})},inverseSelect:function(){var t=this.option.selected;ee(this._data,function(o){var a=o.get("name",!0);t.hasOwnProperty(a)||(t[a]=!0),t[a]=!t[a]})},isSelected:function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&0<=Ue(this._availableNames,e)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function g1(e,t,o){var a,c={},h="toggleSelected"===e;return o.eachComponent("legend",function(p){h&&null!=a?p[a?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?p[e]():(p[e](t.name),a=p.isSelected(t.name)),ee(p.getData(),function(y){var w=y.get("name");if("\n"!==w&&""!==w){var C=p.isSelected(w);c[w]=c.hasOwnProperty(w)?c[w]&&C:C}})}),"allSelect"===e||"inverseSelect"===e?{selected:c}:{name:t.name,selected:c}}Xo("legendToggleSelect","legendselectchanged",wt(g1,"toggleSelected")),Xo("legendAllSelect","legendselectall",wt(g1,"allSelect")),Xo("legendInverseSelect","legendinverseselect",wt(g1,"inverseSelect")),Xo("legendSelect","legendselected",wt(g1,"select")),Xo("legendUnSelect","legendunselected",wt(g1,"unSelect"));var kh=wt,TE=ee,IS=pn,pN=fr({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new IS),this.group.add(this._selectorGroup=new IS),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(e,t,o){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var c=e.get("align"),h=e.get("orient");c&&"auto"!==c||(c="right"===e.get("left")&&"vertical"===h?"right":"left");var p=e.get("selector",!0),y=e.get("selectorPosition",!0);!p||y&&"auto"!==y||(y="horizontal"===h?"end":"start"),this.renderInner(c,e,t,o,p,h,y);var w=e.getBoxLayoutParams(),C={width:o.getWidth(),height:o.getHeight()},n=e.get("padding"),i=Xa(w,C,n),s=this.layoutInner(e,c,i,a,p,y),d=Xa(_e({width:s.width,height:s.height},w),C,n);this.group.attr("position",[d.x-s.x,d.y-s.y]),this.group.add(this._backgroundEl=PI(s,e))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(e,t,o,a,c,h,p){var y=this.getContentGroup(),w=ft(),C=t.get("selectedMode"),n=[];o.eachRawSeries(function(i){i.get("legendHoverLink")||n.push(i.id)}),TE(t.getData(),function(i,s){var d=i.get("name");if(this.newlineDisabled||""!==d&&"\n"!==d){var u=o.getSeriesByName(d)[0];if(!w.get(d))if(u){var f=u.getData(),v=f.getVisual("color"),_=f.getVisual("borderColor");"function"==typeof v&&(v=v(u.getDataParams(0))),"function"==typeof _&&(_=_(u.getDataParams(0)));var k=f.getVisual("legendSymbol")||"roundRect",T=f.getVisual("symbol");this._createItem(d,s,i,t,k,T,e,v,_,C).on("click",kh(DS,d,null,a,n)).on("mouseover",kh(PM,u.name,null,a,n)).on("mouseout",kh(Wi,u.name,null,a,n)),w.set(d,!0)}else o.eachRawSeries(function(M){if(!w.get(d)&&M.legendVisualProvider){var I=M.legendVisualProvider;if(!I.containName(d))return;var O=I.indexOfName(d),R=I.getItemVisual(O,"color"),N=I.getItemVisual(O,"borderColor");this._createItem(d,s,i,t,"roundRect",null,e,R,N,C).on("click",kh(DS,null,d,a,n)).on("mouseover",kh(PM,null,d,a,n)).on("mouseout",kh(Wi,null,d,a,n)),w.set(d,!0)}},this)}else y.add(new IS({newline:!0}))},this),c&&this._createSelector(c,t,a,h,p)},_createSelector:function(e,t,o,a,c){var h=this.getSelectorGroup();TE(e,function(p){!function(y){var w=y.type,C=new Yo({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){o.dispatchAction({type:"all"===w?"legendAllSelect":"legendInverseSelect"})}});h.add(C);var n=t.getModel("selectorLabel"),i=t.getModel("emphasis.selectorLabel");ei(C.style,C.hoverStyle={},n,i,{defaultText:y.title,isRectText:!1}),qr(C)}(p)})},_createItem:function(e,t,o,a,c,h,p,y,w,C){var n=a.get("itemWidth"),i=a.get("itemHeight"),s=a.get("inactiveColor"),d=a.get("inactiveBorderColor"),u=a.get("symbolKeepAspect"),f=a.getModel("itemStyle"),v=a.isSelected(e),_=new IS,k=o.getModel("textStyle"),T=o.get("icon"),M=o.getModel("tooltip"),I=M.parentModel,O=Kc(c=T||c,0,0,n,i,v?y:s,null==u||u);if(_.add(LM(O,c,f,w,d,v)),!T&&h&&(h!==c||"none"===h)){var R=.8*i;"none"===h&&(h="circle");var N=Kc(h,(n-R)/2,(i-R)/2,R,R,v?y:s,null==u||u);_.add(LM(N,h,f,w,d,v))}var z="left"===p?n+5:-5,L=p,V=a.get("formatter"),J=e;"string"==typeof V&&V?J=V.replace("{name}",e??""):"function"==typeof V&&(J=V(e)),_.add(new Yo({style:Fi({},k,{text:J,x:z,y:i/2,textFill:v?k.getTextColor():s,textAlign:L,textVerticalAlign:"middle"})}));var te=new sr({shape:_.getBoundingRect(),invisible:!0,tooltip:M.get("show")?pe({content:e,formatter:I.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:a.componentIndex,name:e,$vars:["name"]}},M.option):null});return _.add(te),_.eachChild(function(re){re.silent=!0}),te.silent=!C,this.getContentGroup().add(_),qr(_),_.__legendDataIndex=t,_},layoutInner:function(e,t,o,a,c,h){var p=this.getContentGroup(),y=this.getSelectorGroup();Kh(e.get("orient"),p,e.get("itemGap"),o.width,o.height);var w=p.getBoundingRect(),C=[-w.x,-w.y];if(c){Kh("horizontal",y,e.get("selectorItemGap",!0));var n=y.getBoundingRect(),i=[-n.x,-n.y],s=e.get("selectorButtonGap",!0),d=e.getOrient().index,u=0===d?"width":"height",f=0===d?"height":"width",v=0===d?"y":"x";"end"===h?i[d]+=w[u]+s:C[d]+=n[u]+s,i[1-d]+=w[f]/2-n[f]/2,y.attr("position",i),p.attr("position",C);var _={x:0,y:0};return _[u]=w[u]+s+n[u],_[f]=Math.max(w[f],n[f]),_[v]=Math.min(0,n[v]+i[1-d]),_}return p.attr("position",C),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function LM(e,t,o,a,c,h){var p;return"line"!==t&&t.indexOf("empty")<0?(p=o.getItemStyle(),e.style.stroke=a,h||(p.stroke=c)):p=o.getItemStyle(["borderWidth","borderColor"]),e.setStyle(p)}function DS(e,t,o,a){Wi(e,t,o,a),o.dispatchAction({type:"legendToggleSelect",name:e??t}),PM(e,t,o,a)}function PM(e,t,o,a){var c=o.getZr().storage.getDisplayList()[0];c&&c.useHoverLayer||o.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:a})}function Wi(e,t,o,a){var c=o.getZr().storage.getDisplayList()[0];c&&c.useHoverLayer||o.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:a})}Kt(Xc.PROCESSOR.SERIES_FILTER,function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(o){for(var a=0;a<t.length;a++)if(!t[a].isSelected(o.name))return!1;return!0})}),wo.registerSubTypeDefaulter("legend",function(){return"plain"});var Eu=RM.extend({type:"legend.scroll",setScrollDataIndex:function(e){this.option.scrollDataIndex=e},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(e,t,o,a){var c=Lm(e);Eu.superCall(this,"init",e,t,o,a),ME(this,e,c)},mergeOption:function(e,t){Eu.superCall(this,"mergeOption",e,t),ME(this,this.option,e)}});function ME(e,t,o){var a=[1,1];a[e.getOrient().index]=0,Rm(t,o,{type:"box",ignoreSize:a})}var dD=pn,uD=["width","height"],BM=["x","y"],Th=pN.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){Th.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new dD),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new dD)},resetInner:function(){Th.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(e,t,o,a,c,h,p){var y=this;Th.superCall(this,"renderInner",e,t,o,a,c,h,p);var w=this._controllerGroup,C=t.get("pageIconSize",!0);nt(C)||(C=[C,C]),i("pagePrev",0);var n=t.getModel("pageTextStyle");function i(s,d){var u=s+"DataIndex",f=Im(t.get("pageIcons",!0)[t.getOrient().name][d],{onclick:rt(y._pageGo,y,u,t,a)},{x:-C[0]/2,y:-C[1]/2,width:C[0],height:C[1]});f.name=s,w.add(f)}w.add(new Yo({name:"pageText",style:{textFill:n.getTextColor(),font:n.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),i("pageNext",1)},layoutInner:function(e,t,o,a,c,h){var p=this.getSelectorGroup(),y=e.getOrient().index,w=uD[y],C=BM[y],n=uD[1-y],i=BM[1-y];c&&Kh("horizontal",p,e.get("selectorItemGap",!0));var s=e.get("selectorButtonGap",!0),d=p.getBoundingRect(),u=[-d.x,-d.y],f=K(o);c&&(f[w]=o[w]-d[w]-s);var v=this._layoutContentAndController(e,a,f,y,w,n,i);if(c){if("end"===h)u[y]+=v[w]+s;else{var _=d[w]+s;u[y]-=_,v[C]-=_}v[w]+=d[w]+s,u[1-y]+=v[i]+v[n]/2-d[n]/2,v[n]=Math.max(v[n],d[n]),v[i]=Math.min(v[i],d[i]+u[1-y]),p.attr("position",u)}return v},_layoutContentAndController:function(e,t,o,a,c,h,p){var y=this.getContentGroup(),w=this._containerGroup,C=this._controllerGroup;Kh(e.get("orient"),y,e.get("itemGap"),a?o.width:null,a?null:o.height),Kh("horizontal",C,e.get("pageButtonItemGap",!0));var n=y.getBoundingRect(),i=C.getBoundingRect(),s=this._showController=n[c]>o[c],d=[-n.x,-n.y];t||(d[a]=y.position[a]);var u=[0,0],f=[-i.x,-i.y],v=_n(e.get("pageButtonGap",!0),e.get("itemGap",!0));s&&("end"===e.get("pageButtonPosition",!0)?f[a]+=o[c]-i[c]:u[a]+=i[c]+v),f[1-a]+=n[h]/2-i[h]/2,y.attr("position",d),w.attr("position",u),C.attr("position",f);var _={x:0,y:0};if(_[c]=s?o[c]:n[c],_[h]=Math.max(n[h],i[h]),_[p]=Math.min(0,i[p]+f[1-a]),w.__rectSize=o[c],s){var k={x:0,y:0};k[c]=Math.max(o[c]-i[c]-v,0),k[h]=_[h],w.setClipPath(new sr({shape:k})),w.__rectSize=k[c]}else C.eachChild(function(M){M.attr({invisible:!0,silent:!0})});var T=this._getPageInfo(e);return null!=T.pageIndex&&Eo(y,{position:T.contentPosition},s&&e),this._updatePageInfoView(e,T),_},_pageGo:function(e,t,o){var a=this._getPageInfo(t)[e];null!=a&&o.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:t.id})},_updatePageInfoView:function(e,t){var o=this._controllerGroup;ee(["pagePrev","pageNext"],function(w){var C=null!=t[w+"DataIndex"],n=o.childOfName(w);n&&(n.setStyle("fill",e.get(C?"pageIconColor":"pageIconInactiveColor",!0)),n.cursor=C?"pointer":"default")});var a=o.childOfName("pageText"),c=e.get("pageFormatter"),h=t.pageIndex,p=null!=h?h+1:0,y=t.pageCount;a&&c&&a.setStyle("text",Wt(c)?c.replace("{current}",p).replace("{total}",y):c({current:p,total:y}))},_getPageInfo:function(e){var t=e.get("scrollDataIndex",!0),o=this.getContentGroup(),a=this._containerGroup.__rectSize,c=e.getOrient().index,h=uD[c],p=BM[c],y=this._findTargetItemIndex(t),w=o.children(),C=w[y],n=w.length,i=n?1:0,s={contentPosition:o.position.slice(),pageCount:i,pageIndex:i-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!C)return s;var d=k(C);s.contentPosition[c]=-d.s;for(var u=y+1,f=d,v=d,_=null;u<=n;++u)(!(_=k(w[u]))&&v.e>f.s+a||_&&!T(_,f.s))&&(f=v.i>f.i?v:_)&&(null==s.pageNextDataIndex&&(s.pageNextDataIndex=f.i),++s.pageCount),v=_;for(u=y-1,f=d,v=d,_=null;-1<=u;--u)(_=k(w[u]))&&T(v,_.s)||!(f.i<v.i)||(v=f,null==s.pagePrevDataIndex&&(s.pagePrevDataIndex=f.i),++s.pageCount,++s.pageIndex),f=_;return s;function k(M){if(M){var I=M.getBoundingRect(),O=I[p]+M.position[c];return{s:O,e:O+I[h],i:M.__legendDataIndex}}}function T(M,I){return M.e>=I&&M.s<=I+a}},_findTargetItemIndex:function(e){return this._showController?(this.getContentGroup().eachChild(function(a,c){var h=a.__legendDataIndex;null==o&&null!=h&&(o=c),h===e&&(t=c)}),t??o):0;var t,o}});Xo("legendScroll","legendscroll",function(e,t){var o=e.scrollDataIndex;null!=o&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(a){a.setScrollDataIndex(o)})}),xy.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});var OS=sr,Zs=Ht,zM=Om,Eg=rt,ES=ee,Ng="horizontal",AE="vertical",FM=["line","bar","candlestick","scatter"],$d=mv.extend({type:"dataZoom.slider",init:function(e,t){this._displayables={},this.api=t},render:function(e,t,o,a){$d.superApply(this,"render",arguments),pp(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=e.get("orient"),!1!==this.dataZoomModel.get("show")?(a&&"dataZoom"===a.type&&a.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){$d.superApply(this,"remove",arguments),Dd(this,"_dispatchZoomAction")},dispose:function(){$d.superApply(this,"dispose",arguments),Dd(this,"_dispatchZoomAction")},_buildView:function(){var e=this.group;e.removeAll(),this._resetLocation(),this._resetInterval();var t=this._displayables.barGroup=new pn;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},_resetLocation:function(){var e=this.dataZoomModel,t=this.api,o=this._findCoordRect(),a={width:t.getWidth(),height:t.getHeight()},c=this._orient===Ng?{right:a.width-o.x-o.width,top:a.height-30-7,width:o.width,height:30}:{right:7,top:o.y,width:30,height:o.height},h=Lm(e.option);ee(["right","top","width","height"],function(y){"ph"===h[y]&&(h[y]=c[y])});var p=Xa(h,a,e.padding);this._location={x:p.x,y:p.y},this._size=[p.width,p.height],this._orient===AE&&this._size.reverse()},_positionGroup:function(){var e=this.group,t=this._location,o=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),c=a&&a.get("inverse"),h=this._displayables.barGroup,p=(this._dataShadowInfo||{}).otherAxisInverse;h.attr(o!==Ng||c?o===Ng&&c?{scale:p?[-1,1]:[-1,-1]}:o!==AE||c?{scale:p?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:p?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:p?[1,1]:[1,-1]});var y=e.getBoundingRect([h]);e.attr("position",[t.x-y.x,t.y-y.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this._size,o=this._displayables.barGroup;o.add(new OS({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:this.dataZoomModel.get("backgroundColor")},z2:-40})),o.add(new OS({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:rt(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(e){var t=this._size,o=e.series,a=o.getRawData(),c=o.getShadowDim?o.getShadowDim():e.otherDim;if(null!=c){var h=a.getDataExtent(c),p=.3*(h[1]-h[0]);h=[h[0]-p,h[1]+p];var y,w=[0,t[1]],n=[[t[0],0],[0,0]],i=[],s=t[0]/(a.count()-1),d=0,u=Math.round(a.count()/t[0]);a.each([c],function(v,_){if(0<u&&_%u)d+=s;else{var k=null==v||isNaN(v)||""===v,T=k?0:Zs(v,h,w,!0);k&&!y&&_?(n.push([n[n.length-1][0],0]),i.push([i[i.length-1][0],0])):!k&&y&&(n.push([d,0]),i.push([d,0])),n.push([d,T]),i.push([d,T]),d+=s,y=k}});var f=this.dataZoomModel;this._displayables.barGroup.add(new pl({shape:{points:n},style:_e({fill:f.get("dataBackgroundColor")},f.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new Zi({shape:{points:i},style:f.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var o,a=this.ecModel;return e.eachTargetAxis(function(c,h){ee(e.getAxisProxy(c.name,h).getTargetSeriesModels(),function(p){if(!(o||!0!==t&&Ue(FM,p.get("type"))<0)){var y,w=a.getComponent(c.axis,h).axis,C={x:"y",y:"x",radius:"angle",angle:"radius"}[c.name],n=p.coordinateSystem;null!=C&&n.getOtherAxis&&(y=n.getOtherAxis(w).inverse),C=p.getData().mapDimension(C),o={thisAxis:w,series:p,thisDim:c.name,otherDim:C,otherAxisInverse:y}}},this)},this),o}},_renderHandle:function(){var e=this._displayables,t=e.handles=[],o=e.handleLabels=[],a=this._displayables.barGroup,c=this._size,h=this.dataZoomModel;a.add(e.filler=new OS({draggable:!0,cursor:hD(this._orient),drift:Eg(this._onDragMove,this,"all"),ondragstart:Eg(this._showDataInfo,this,!0),ondragend:Eg(this._onDragEnd,this),onmouseover:Eg(this._showDataInfo,this,!0),onmouseout:Eg(this._showDataInfo,this,!1),style:{fill:h.get("fillerColor"),textPosition:"inside"}})),a.add(new OS({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:c[0],height:c[1]},style:{stroke:h.get("dataBackgroundColor")||h.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),ES([0,1],function(p){var y=Im(h.get("handleIcon"),{cursor:hD(this._orient),draggable:!0,drift:Eg(this._onDragMove,this,p),ondragend:Eg(this._onDragEnd,this),onmouseover:Eg(this._showDataInfo,this,!0),onmouseout:Eg(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),w=y.getBoundingRect();this._handleHeight=rn(h.get("handleSize"),this._size[1]),this._handleWidth=w.width/w.height*this._handleHeight,y.setStyle(h.getModel("handleStyle").getItemStyle());var C=h.get("handleColor");null!=C&&(y.style.fill=C),a.add(t[p]=y);var n=h.textStyleModel;this.group.add(o[p]=new Yo({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:n.getTextColor(),textFont:n.getFont()},z2:10}))},this)},_resetInterval:function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[Zs(e[0],[0,100],t,!0),Zs(e[1],[0,100],t,!0)]},_updateInterval:function(e,t){var o=this.dataZoomModel,a=this._handleEnds,c=this._getViewExtent(),h=o.findRepresentativeAxisProxy().getMinMaxSpan(),p=[0,100];vh(t,a,c,o.get("zoomLock")?"all":e,null!=h.minSpan?Zs(h.minSpan,p,c,!0):null,null!=h.maxSpan?Zs(h.maxSpan,p,c,!0):null);var y=this._range,w=this._range=zM([Zs(a[0],c,p,!0),Zs(a[1],c,p,!0)]);return!y||y[0]!==w[0]||y[1]!==w[1]},_updateView:function(e){var t=this._displayables,o=this._handleEnds,a=zM(o.slice()),c=this._size;ES([0,1],function(h){var y=this._handleHeight;t.handles[h].attr({scale:[y/2,y/2],position:[o[h],c[1]/2-y/2]})},this),t.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:c[1]}),this._updateDataInfo(e)},_updateDataInfo:function(e){var t=this.dataZoomModel,o=this._displayables,a=o.handleLabels,c=this._orient,h=["",""];if(t.get("showDetail")){var p=t.findRepresentativeAxisProxy();if(p){var y=p.getAxisModel().axis,w=this._range,C=e?p.calculateDataWindow({start:w[0],end:w[1]}).valueWindow:p.getDataValueWindow();h=[this._formatLabel(C[0],y),this._formatLabel(C[1],y)]}}var n=zM(this._handleEnds.slice());function i(s){var d=qh(o.handles[s].parent,this.group),u=fl(0===s?"right":"left",d),f=this._handleWidth/2+5,v=vi([n[s]+(0===s?-f:f),this._size[1]/2],d);a[s].setStyle({x:v[0],y:v[1],textVerticalAlign:c===Ng?"middle":u,textAlign:c===Ng?u:"center",text:h[s]})}i.call(this,0),i.call(this,1)},_formatLabel:function(e,t){var o=this.dataZoomModel,a=o.get("labelFormatter"),c=o.get("labelPrecision");null!=c&&"auto"!==c||(c=t.getPixelPrecision());var h=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel(Math.round(e)):e.toFixed(Math.min(c,20));return Bt(a)?a(e,h):Wt(a)?a.replace("{value}",h):h},_showDataInfo:function(e){var t=this._displayables.handleLabels;t[0].attr("invisible",!(e=this._dragging||e)),t[1].attr("invisible",!e)},_onDragMove:function(e,t,o,a){this._dragging=!0,Xn(a.event);var c=vi([t,o],this._displayables.barGroup.getLocalTransform(),!0),h=this._updateInterval(e,c[0]),p=this.dataZoomModel.get("realtime");this._updateView(!p),h&&p&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction()},_onClickPanelClick:function(e){var t=this._size,o=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(o[0]<0||o[0]>t[0]||o[1]<0||o[1]>t[1])){var a=this._handleEnds,h=this._updateInterval("all",o[0]-(a[0]+a[1])/2);this._updateView(),h&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:e[0],end:e[1]})},_findCoordRect:function(){var e;if(ES(this.getTargetCoordInfo(),function(a){if(!e&&a.length){var c=a[0].model.coordinateSystem;e=c.getRect&&c.getRect()}}),!e){var t=this.api.getWidth(),o=this.api.getHeight();e={x:.2*t,y:.2*o,width:.6*t,height:.6*o}}return e}});function hD(e){return"vertical"===e?"ns-resize":"ew-resize"}xy.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var Ty="\0_ec_dataZoom_roams";function VM(e){return e.type+"\0_"+e.id}function gD(e){var t=e.getZr();return t[Ty]||(t[Ty]={})}function HM(e){ee(e,function(t,o){t.count||(t.controller.dispose(),delete e[o])})}function WM(e,t){e.dispatchAction({type:"dataZoom",batch:t})}var IE=rt,pD=mv.extend({type:"dataZoom.inside",init:function(e,t){},render:function(e,t,o,a){pD.superApply(this,"render",arguments),this._range=e.getPercentRange(),ee(this.getTargetCoordInfo(),function(c,h){var p=Se(c,function(y){return VM(y.model)});ee(c,function(y){var w=y.model,C={};ee(["pan","zoom","scrollMove"],function(n){C[n]=IE(p1[n],this,y,h)},this),function NS(e,t){var o=gD(e),a=t.dataZoomId,c=t.coordId;ee(o,function(y,w){var C=y.dataZoomInfos;C[a]&&Ue(t.allCoordIds,c)<0&&(delete C[a],y.count--)}),HM(o);var w,C,h=o[c];h||((h=o[c]={coordId:c,dataZoomInfos:{},count:0}).controller=(w=h,C=new ex(e.getZr()),ee(["pan","zoom","scrollMove"],function(n){C.on(n,function(i){var s=[];ee(w.dataZoomInfos,function(d){if(i.isAvailableBehavior(d.dataZoomModel.option)){var u=(d.getRange||{})[n],f=u&&u(w.controller,i);!d.dataZoomModel.get("disabled",!0)&&f&&s.push({dataZoomId:d.dataZoomId,start:f[0],end:f[1]})}}),s.length&&w.dispatchAction(s)})}),C),h.dispatchAction=wt(WM,e)),h.dataZoomInfos[a]||h.count++,h.dataZoomInfos[a]=t;var p=function(y){var w,C={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return ee(y,function(i){var s=i.dataZoomModel,d=!s.get("disabled",!0)&&(!s.get("zoomLock",!0)||"move");C["type_"+w]<C["type_"+d]&&(w=d),n&=s.get("preventDefaultMouseMove",!0)}),{controlType:w,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}(h.dataZoomInfos);h.controller.enable(p.controlType,p.opt),h.controller.setPointerChecker(t.containsPoint),pp(h,"dispatchAction",t.dataZoomModel.get("throttle",!0),"fixRate")}(o,{coordId:VM(w),allCoordIds:p,containsPoint:function(n,i,s){return w.coordinateSystem.containPoint([i,s])},dataZoomId:e.id,dataZoomModel:e,getRange:C})},this)},this)},dispose:function(){(function(e,t){var o=gD(e);ee(o,function(a){a.controller.dispose();var c=a.dataZoomInfos;c[t]&&(delete c[t],a.count--)}),HM(o)})(this.api,this.dataZoomModel.id),pD.superApply(this,"dispose",arguments),this._range=null}}),p1={zoom:function(e,t,o,a){var c=this._range,h=c.slice(),p=e.axisModels[0];if(p){var y=RS[t](null,[a.originX,a.originY],p,o,e),w=(0<y.signal?y.pixelStart+y.pixelLength-y.pixel:y.pixel-y.pixelStart)/y.pixelLength*(h[1]-h[0])+h[0],C=Math.max(1/a.scale,0);h[0]=(h[0]-w)*C+w,h[1]=(h[1]-w)*C+w;var n=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return vh(0,h,[0,100],0,n.minSpan,n.maxSpan),this._range=h,c[0]!==h[0]||c[1]!==h[1]?h:void 0}},pan:m1(function(e,t,o,a,c,h){var p=RS[a]([h.oldX,h.oldY],[h.newX,h.newY],t,c,o);return p.signal*(e[1]-e[0])*p.pixel/p.pixelLength}),scrollMove:m1(function(e,t,o,a,c,h){return RS[a]([0,0],[h.scrollDelta,h.scrollDelta],t,c,o).signal*(e[1]-e[0])*h.scrollDelta})};function m1(e){return function(t,o,a,c){var h=this._range,p=h.slice(),y=t.axisModels[0];if(y)return vh(e(p,y,t,o,a,c),p,[0,100],"all"),this._range=p,h[0]!==p[0]||h[1]!==p[1]?p:void 0}}function f1(e){var t=e&&e.visualMap;nt(t)||(t=t?[t]:[]),v1(t,function(o){if(o){bv(o,"splitList")&&!bv(o,"pieces")&&(o.pieces=o.splitList,delete o.splitList);var a=o.pieces;a&&nt(a)&&v1(a,function(c){ue(c)&&(bv(c,"start")&&!bv(c,"min")&&(c.min=c.start),bv(c,"end")&&!bv(c,"max")&&(c.max=c.end))})}})}var RS={grid:function(e,t,o,a,c){var h=o.axis,p={},y=c.model.coordinateSystem.getRect();return e=e||[0,0],"x"===h.dim?(p.pixel=t[0]-e[0],p.pixelLength=y.width,p.pixelStart=y.x,p.signal=h.inverse?1:-1):(p.pixel=t[1]-e[1],p.pixelLength=y.height,p.pixelStart=y.y,p.signal=h.inverse?-1:1),p},polar:function(e,t,o,a,c){var h=o.axis,p={},y=c.model.coordinateSystem,w=y.getRadiusAxis().getExtent(),C=y.getAngleAxis().getExtent();return e=e?y.pointToCoord(e):[0,0],t=y.pointToCoord(t),"radiusAxis"===o.mainType?(p.pixel=t[0]-e[0],p.pixelLength=w[1]-w[0],p.pixelStart=w[0],p.signal=h.inverse?1:-1):(p.pixel=t[1]-e[1],p.pixelLength=C[1]-C[0],p.pixelStart=C[0],p.signal=h.inverse?-1:1),p},singleAxis:function(e,t,o,a,c){var h=o.axis,p=c.model.coordinateSystem.getRect(),y={};return e=e||[0,0],"horizontal"===h.orient?(y.pixel=t[0]-e[0],y.pixelLength=p.width,y.pixelStart=p.x,y.signal=h.inverse?1:-1):(y.pixel=t[1]-e[1],y.pixelLength=p.height,y.pixelStart=p.y,y.signal=h.inverse?-1:1),y}},v1=ee;function bv(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}wo.registerSubTypeDefaulter("visualMap",function(e){return e.categories||(e.pieces?0<e.pieces.length:0<e.splitNumber)&&!e.calculable?"piecewise":"continuous"});var LS=Xc.VISUAL.COMPONENT;function mD(e,t,o,a){for(var c=t.targetVisuals[a],h=Rr.prepareVisualTypes(c),p={color:e.getData().getVisual("color")},y=0,w=h.length;y<w;y++){var C=h[y],n=c["opacity"===C?"__alphaForOpacity":C];n&&n.applyVisual(o,i,s)}return p.color;function i(d){return p[d]}function s(d,u){p[d]=u}}yi(LS,{createOnAllSeries:!0,reset:function(e,t){var o=[];return t.eachComponent("visualMap",function(a){var c=e.pipelineContext;!a.isTargetSeries(e)||c&&c.large||o.push(function(h,p,y,w){var C={};return ee(h,function(n){var i=Rr.prepareVisualTypes(p[n]);C[n]=i}),{progress:function(n,i){function s(R){return i.getItemVisual(u,R)}function d(R,N){i.setItemVisual(u,R,N)}var u;for(null!=w&&(w=i.getDimension(w));null!=(u=n.next());){var f=i.getRawDataItem(u);if(!f||!1!==f.visualMap)for(var v=null!=w?i.get(w,u,!0):u,_=y(v),k=p[_],T=C[_],M=0,I=T.length;M<I;M++){var O=T[M];k[O]&&k[O].applyVisual(v,s,d)}}}}}(a.stateList,a.targetVisuals,rt(a.getValueState,a),a.getDataDimension(e.getData())))}),o}}),yi(LS,{createOnAllSeries:!0,reset:function(e,t){var o=e.getData(),a=[];t.eachComponent("visualMap",function(c){if(c.isTargetSeries(e)){var h=c.getVisualMeta(rt(mD,null,e,c))||{stops:[],outerColors:[]},p=c.getDataDimension(o),y=o.getDimensionInfo(p);null!=y&&(h.dimension=y.index,a.push(h))}}),e.getData().setVisual("visualMeta",a)}});var UM=function(e,t,o){var a=K((es[e]||{})[t]);return o&&nt(a)?a[a.length-1]:a},es={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},fD=Rr.mapVisual,mN=Rr.eachVisual,GM=nt,jM=ee,PS=Om,DE=Ht,My=Gs({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(e,t,o){this.targetVisuals={},this.controllerVisuals={},this.mergeDefaultAndTheme(e,o)},optionUpdated:function(e,t){var o=this.option;Oe.canvasSupported||(o.realtime=!1),t||QI(o,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(e){var t=this.stateList;e=rt(e,this),this.controllerVisuals=xM(this.option.controller,t,e),this.targetVisuals=xM(this.option.target,t,e)},getTargetSeriesIndices:function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries(function(o,a){t.push(a)}):t=hr(e),t},eachTargetSeries:function(e,t){ee(this.getTargetSeriesIndices(),function(o){e.call(t,this.ecModel.getSeriesByIndex(o))},this)},isTargetSeries:function(e){var t=!1;return this.eachTargetSeries(function(o){o===e&&(t=!0)}),t},formatValueText:function(e,t,o){var a,c,h=this.option,p=h.precision,y=this.dataBound,w=h.formatter;return o=o||["<",">"],nt(e)&&(e=e.slice(),a=!0),c=t?e:a?[C(e[0]),C(e[1])]:C(e),Wt(w)?w.replace("{value}",a?c[0]:c).replace("{value2}",a?c[1]:c):Bt(w)?a?w(e[0],e[1]):w(e):a?e[0]===y[0]?o[0]+" "+c[1]:e[1]===y[1]?o[1]+" "+c[0]:c[0]+" - "+c[1]:c;function C(n){return n===y[0]?"min":n===y[1]?"max":(+n).toFixed(Math.min(p,20))}},resetExtent:function(){var e=this.option,t=PS([e.min,e.max]);this._dataExtent=t},getDataDimension:function(e){var t=this.option.dimension;if(null!=t||e.dimensions.length){if(null!=t)return e.getDimension(t);for(var a=e.dimensions,c=a.length-1;0<=c;c--){var h=a[c];if(!e.getDimensionInfo(h).isCalculationCoord)return h}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var e=this.ecModel,t=this.option,o={inRange:t.inRange,outOfRange:t.outOfRange},a=t.target||(t.target={}),c=t.controller||(t.controller={});le(a,o),le(c,o);var h=this.isCategory();function p(y){GM(t.color)&&!y.inRange&&(y.inRange={color:t.color.slice().reverse()}),y.inRange=y.inRange||{color:e.get("gradientColor")},jM(this.stateList,function(w){var C=y[w];if(Wt(C)){var n=UM(C,"active",h);n?(y[w]={},y[w][C]=n):delete y[w]}},this)}p.call(this,a),p.call(this,c),function(y,w,C){var n=y[w],i=y[C];n&&!i&&(i=y[C]={},jM(n,function(s,d){if(Rr.isValidType(d)){var u=UM(d,"inactive",h);null!=u&&(i[d]=u,"color"!==d||i.hasOwnProperty("opacity")||i.hasOwnProperty("colorAlpha")||(i.opacity=[0,0]))}}))}.call(this,a,"inRange","outOfRange"),function(y){var w=(y.inRange||{}).symbol||(y.outOfRange||{}).symbol,C=(y.inRange||{}).symbolSize||(y.outOfRange||{}).symbolSize,n=this.get("inactiveColor");jM(this.stateList,function(i){var s=this.itemSize,d=y[i];null==(d=d||(y[i]={color:h?n:[n]})).symbol&&(d.symbol=w&&K(w)||(h?"roundRect":["roundRect"])),null==d.symbolSize&&(d.symbolSize=C&&K(C)||(h?s[0]:[s[0],s[0]])),d.symbol=fD(d.symbol,function(v){return"none"===v||"square"===v?"roundRect":v});var u=d.symbolSize;if(null!=u){var f=-1/0;mN(u,function(v){f<v&&(f=v)}),d.symbolSize=fD(u,function(v){return DE(v,[0,f],[0,s[0]],!0)})}},this)}.call(this,c)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:Tt,getValueState:Tt,getVisualMeta:Tt}),BS=[20,140],vD=My.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(e,t){vD.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(o){o.mappingMethod="linear",o.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){vD.superApply(this,"resetItemSize",arguments);var e=this.itemSize;"horizontal"===this._orient&&e.reverse(),null!=e[0]&&!isNaN(e[0])||(e[0]=BS[0]),null!=e[1]&&!isNaN(e[1])||(e[1]=BS[1])},_resetRange:function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):nt(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},completeVisualOption:function(){My.prototype.completeVisualOption.apply(this,arguments),ee(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=0)},this)},setSelected:function(e){this.option.range=e.slice(),this._resetRange()},getSelected:function(){var e=this.getExtent(),t=Om((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},getValueState:function(e){var t=this.option.range,o=this.getExtent();return(t[0]<=o[0]||t[0]<=e)&&(t[1]>=o[1]||e<=t[1])?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries(function(o){var a=[],c=o.getData();c.each(this.getDataDimension(c),function(h,p){e[0]<=h&&h<=e[1]&&a.push(p)},this),t.push({seriesId:o.id,dataIndex:a})},this),t},getVisualMeta:function(e){var t=yD(0,0,this.getExtent()),o=yD(0,0,this.option.range.slice()),a=[];function c(i,s){a.push({value:i,color:e(i,s)})}for(var h=0,p=0,y=o.length,w=t.length;p<w&&(!o.length||t[p]<=o[0]);p++)t[p]<o[h]&&c(t[p],"outOfRange");for(var C=1;h<y;h++,C=0)C&&a.length&&c(o[h],"outOfRange"),c(o[h],"inRange");for(C=1;p<w;p++)(!o.length||o[o.length-1]<t[p])&&(C&&(a.length&&c(a[a.length-1].value,"outOfRange"),C=0),c(t[p],"outOfRange"));var n=a.length;return{stops:a,outerColors:[n?a[0].color:"transparent",n?a[n-1].color:"transparent"]}}});function yD(e,t,o){if(o[0]===o[1])return o.slice();for(var a=(o[1]-o[0])/200,c=o[0],h=[],p=0;p<=200&&c<o[1];p++)h.push(c),c+=a;return h.push(o[1]),h}var Nu=fr({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(e,t){this.ecModel=e,this.api=t},render:function(e,t,o,a){!1!==(this.visualMapModel=e).get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(e){var t=this.visualMapModel,o=Em(t.get("padding")||0),a=e.getBoundingRect();e.add(new sr({z2:-1,silent:!0,shape:{x:a.x-o[3],y:a.y-o[0],width:a.width+o[3]+o[1],height:a.height+o[0]+o[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},getControllerVisual:function(e,t,o){var a=(o=o||{}).forceState,c=this.visualMapModel,h={};if("symbol"===t&&(h.symbol=c.get("itemSymbol")),"color"===t){var p=c.get("contentColor");h.color=p}function y(n){return h[n]}function w(n,i){h[n]=i}var C=c.controllerVisuals[a||c.getValueState(e)];return ee(Rr.prepareVisualTypes(C),function(n){var i=C[n];o.convertOpacityToAlpha&&"opacity"===n&&(n="colorAlpha",i=C.__alphaForOpacity),Rr.dependsOn(n,t)&&i&&i.applyVisual(e,y,w)}),h[t]},positionGroup:function(e){var o=this.api;Jh(e,this.visualMapModel.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})},doRender:Tt});function bD(e,t,o){var a=e.option,c=a.align;if(null!=c&&"auto"!==c)return c;for(var h={width:t.getWidth(),height:t.getHeight()},p="horizontal"===a.orient?1:0,y=[["left","right","width"],["top","bottom","height"]],w=y[p],C=[0,null,10],n={},i=0;i<3;i++)n[y[1-p][i]]=C[i],n[w[i]]=2===i?o[0]:a[w[i]];var s=[["x","width",3],["y","height",0]][p],d=Xa(n,h,a.padding);return w[(d.margin[s[2]]||0)+d[s[0]]+.5*d[s[1]]<.5*h[s[1]]?0:1]}function qM(e,t){return ee(e||[],function(o){null!=o.dataIndex&&(o.dataIndexInside=o.dataIndex,o.dataIndex=null),o.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var Mh=Ht,OE=ee,Ay=Math.min,Iy=Math.max,EE=Nu.extend({type:"visualMap.continuous",init:function(){EE.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._hoverLinkDataIndices=[]},doRender:function(e,t,o,a){a&&"selectDataRange"===a.type&&a.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var o=e.get("text");this._renderEndsText(t,o,0),this._renderEndsText(t,o,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},_renderEndsText:function(e,t,o){if(t){var a=t[1-o];a=null!=a?a+"":"";var c=this.visualMapModel,h=c.get("textGap"),p=c.itemSize,y=this._shapes.barGroup,w=this._applyTransform([p[0]/2,0===o?-h:p[1]+h],y),C=this._applyTransform(0===o?"bottom":"top",y),n=this._orient,i=this.visualMapModel.textStyleModel;this.group.add(new Yo({style:{x:w[0],y:w[1],textVerticalAlign:"horizontal"===n?"middle":C,textAlign:"horizontal"===n?C:"center",text:a,textFont:i.getFont(),textFill:i.getTextColor()}}))}},_renderBar:function(e){var t=this.visualMapModel,o=this._shapes,a=t.itemSize,c=this._orient,h=this._useHandle,p=bD(t,this.api,a),y=o.barGroup=this._createBarGroup(p);y.add(o.outOfRange=zS()),y.add(o.inRange=zS(null,h?NE(this._orient):null,rt(this._dragHandle,this,"all",!1),rt(this._dragHandle,this,"all",!0)));var w=t.textStyleModel.getTextRect("\u56fd"),C=Iy(w.width,w.height);h&&(o.handleThumbs=[],o.handleLabels=[],o.handleLabelPoints=[],this._createHandle(y,0,a,C,c,p),this._createHandle(y,1,a,C,c,p)),this._createIndicator(y,a,C,c),e.add(y)},_createHandle:function(e,t,o,a,c){var d,h=rt(this._dragHandle,this,t,!1),p=rt(this._dragHandle,this,t,!0),y=zS((d=a,0===t?[[0,0],[d,0],[d,-d]]:[[0,0],[d,0],[d,d]]),NE(this._orient),h,p);y.position[0]=o[0],e.add(y);var w=this.visualMapModel.textStyleModel,C=new Yo({draggable:!0,drift:h,onmousemove:function(s){Xn(s.event)},ondragend:p,style:{x:0,y:0,text:"",textFont:w.getFont(),textFill:w.getTextColor()}});this.group.add(C);var n=["horizontal"===c?a/2:1.5*a,"horizontal"===c?0===t?-1.5*a:1.5*a:0===t?-a/2:a/2],i=this._shapes;i.handleThumbs[t]=y,i.handleLabelPoints[t]=n,i.handleLabels[t]=C},_createIndicator:function(e,t,o,a){var c=zS([[0,0]],"move");c.position[0]=t[0],c.attr({invisible:!0,silent:!0}),e.add(c);var h=this.visualMapModel.textStyleModel,p=new Yo({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:h.getFont(),textFill:h.getTextColor()}});this.group.add(p);var y=["horizontal"===a?o/2:9,0],w=this._shapes;w.indicator=c,w.indicatorLabel=p,w.indicatorLabelPoint=y},_dragHandle:function(e,t,o,a){if(this._useHandle){if(this._dragging=!t,!t){var c=this._applyTransform([o,a],this._shapes.barGroup,!0);this._updateInterval(e,c[1]),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?this._hovering||this._clearHoverLinkToSeries():$M(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},_resetInterval:function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),o=e.getExtent(),a=[0,e.itemSize[1]];this._handleEnds=[Mh(t[0],o,a,!0),Mh(t[1],o,a,!0)]},_updateInterval:function(e,t){var o=this.visualMapModel,a=this._handleEnds,c=[0,o.itemSize[1]];vh(t=t||0,a,c,e,0);var h=o.getExtent();this._dataInterval=[Mh(a[0],c,h,!0),Mh(a[1],c,h,!0)]},_updateView:function(e){var t=this.visualMapModel,o=t.getExtent(),a=this._shapes,c=[0,t.itemSize[1]],h=e?c:this._handleEnds,p=this._createBarVisual(this._dataInterval,o,h,"inRange"),y=this._createBarVisual(o,o,c,"outOfRange");a.inRange.setStyle({fill:p.barColor,opacity:p.opacity}).setShape("points",p.barPoints),a.outOfRange.setStyle({fill:y.barColor,opacity:y.opacity}).setShape("points",y.barPoints),this._updateHandle(h,p)},_createBarVisual:function(e,t,o,a){var c={forceState:a,convertOpacityToAlpha:!0},h=this._makeColorGradient(e,c),p=[this.getControllerVisual(e[0],"symbolSize",c),this.getControllerVisual(e[1],"symbolSize",c)],y=this._createBarPoints(o,p);return{barColor:new Gc(0,0,0,1,h),barPoints:y,handlesColor:[h[0].color,h[h.length-1].color]}},_makeColorGradient:function(e,t){var o=[],a=(e[1]-e[0])/100;o.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var c=1;c<100;c++){var h=e[0]+a*c;if(h>e[1])break;o.push({color:this.getControllerVisual(h,"color",t),offset:c/100})}return o.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),o},_createBarPoints:function(e,t){var o=this.visualMapModel.itemSize;return[[o[0]-t[0],e[0]],[o[0],e[0]],[o[0],e[1]],[o[0]-t[1],e[1]]]},_createBarGroup:function(e){var t=this._orient,o=this.visualMapModel.get("inverse");return new pn("horizontal"!==t||o?"horizontal"===t&&o?{scale:"bottom"===e?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==t||o?{scale:"left"===e?[1,1]:[-1,1]}:{scale:"left"===e?[1,-1]:[-1,-1]}:{scale:"bottom"===e?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(e,t){if(this._useHandle){var o=this._shapes,a=this.visualMapModel,c=o.handleThumbs,h=o.handleLabels;OE([0,1],function(p){var y=c[p];y.setStyle("fill",t.handlesColor[p]),y.position[1]=e[p];var w=vi(o.handleLabelPoints[p],qh(y,this.group));h[p].setStyle({x:w[0],y:w[1],text:a.formatValueText(this._dataInterval[p]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===p?"bottom":"top":"left",o.barGroup)})},this)}},_showIndicator:function(e,t,o,a){var _,k,T,c=this.visualMapModel,h=c.getExtent(),p=c.itemSize,w=Mh(e,h,[0,p[1]],!0),C=this._shapes,n=C.indicator;if(n){n.position[1]=w,n.attr("invisible",!1),n.setShape("points",(_=a,k=w,T=p[1],o?[[0,-Ay(_,Iy(k,0))],[6,0],[0,Ay(_,Iy(T-k,0))]]:[[0,0],[5,-5],[5,5]]));var i=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0});n.setStyle("fill",i);var s=vi(C.indicatorLabelPoint,qh(n,this.group)),d=C.indicatorLabel;d.attr("invisible",!1);var u=this._applyTransform("left",C.barGroup),f=this._orient;d.setStyle({text:(o||"")+c.formatValueText(t),textVerticalAlign:"horizontal"===f?u:"middle",textAlign:"horizontal"===f?"center":u,x:s[0],y:s[1]})}},_enableHoverLinkToSeries:function(){var e=this;this._shapes.barGroup.on("mousemove",function(t){if(e._hovering=!0,!e._dragging){var o=e.visualMapModel.itemSize,a=e._applyTransform([t.offsetX,t.offsetY],e._shapes.barGroup,!0,!0);a[1]=Ay(Iy(0,a[1]),o[1]),e._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=o[0])}}).on("mouseout",function(){e._hovering=!1,e._dragging||e._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(e,t){var u,f,v,_,o=this.visualMapModel;if(o.option.hoverLink){var c=[0,o.itemSize[1]],h=o.getExtent();e=Ay(Iy(c[0],e),c[1]);var p=(u=h,f=c,v=6,(_=o.get("hoverLinkDataSize"))&&(v=Mh(_,u,f,!0)/2),v),y=[e-p,e+p],w=Mh(e,c,h,!0),C=[Mh(y[0],c,h,!0),Mh(y[1],c,h,!0)];y[0]<c[0]&&(C[0]=-1/0),c[1]<y[1]&&(C[1]=1/0),t&&(C[0]===-1/0?this._showIndicator(w,C[1],"< ",p):C[1]===1/0?this._showIndicator(w,C[0],"> ",p):this._showIndicator(w,w,"\u2248 ",p));var n=this._hoverLinkDataIndices,i=[];(t||$M(o))&&(i=this._hoverLinkDataIndices=o.findTargetDataIndices(C));var s=function(d,u){var f={},v={};return _(d||[],f),_(u||[],v,f),[k(f),k(v)];function _(T,M,I){for(var O=0,R=T.length;O<R;O++)for(var N=T[O].seriesId,z=hr(T[O].dataIndex),L=I&&I[N],V=0,J=z.length;V<J;V++){var te=z[V];L&&L[te]?L[te]=null:(M[N]||(M[N]={}))[te]=1}}function k(T,M){var I=[];for(var O in T)if(T.hasOwnProperty(O)&&null!=T[O])if(M)I.push(+O);else{var R=k(T[O],!0);R.length&&I.push({seriesId:O,dataIndex:R})}return I}}(n,i);this._dispatchHighDown("downplay",qM(s[0],o)),this._dispatchHighDown("highlight",qM(s[1],o))}},_hoverLinkFromSeriesMouseOver:function(e){var t=e.target,o=this.visualMapModel;if(t&&null!=t.dataIndex){var a=this.ecModel.getSeriesByIndex(t.seriesIndex);if(o.isTargetSeries(a)){var c=a.getData(t.dataType),h=c.get(o.getDataDimension(c),t.dataIndex,!0);isNaN(h)||this._showIndicator(h,h)}}},_hideIndicator:function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",qM(e,this.visualMapModel)),e.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},_applyTransform:function(e,t,o,a){var c=qh(t,a?null:this.group);return ti[nt(e)?"applyTransform":"transformDirection"](e,c,o)},_dispatchHighDown:function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function zS(e,t,o,a){return new pl({shape:{points:e},draggable:!!o,cursor:t,drift:o,onmousemove:function(c){Xn(c.event)},ondragend:a})}function $M(e){return!!(e.get("hoverLinkOnHandle")??e.get("realtime"))}function NE(e){return"vertical"===e?"ns-resize":"ew-resize"}Xo({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(o){o.setSelected(e.selected)})}),ks(f1);var FS=My.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(e,t){FS.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var o=this._mode=this._determineMode();RE[this._mode].call(this),this._resetSelected(e,t);var a=this.option.categories;this.resetVisual(function(c,h){"categories"===o?(c.mappingMethod="category",c.categories=K(a)):(c.dataExtent=this.getExtent(),c.mappingMethod="piecewise",c.pieceList=Se(this._pieceList,function(p){return p=K(p),"inRange"!==h&&(p.visual=null),p}))})},completeVisualOption:function(){var e=this.option,t={},o=Rr.listVisualTypes(),a=this.isCategory();function c(h,p,y){return h&&h[p]&&(ue(h[p])?h[p].hasOwnProperty(y):h[p]===y)}ee(e.pieces,function(h){ee(o,function(p){h.hasOwnProperty(p)&&(t[p]=1)})}),ee(t,function(h,p){var y=0;ee(this.stateList,function(w){y|=c(e,w,p)||c(e.target,w,p)},this),y||ee(this.stateList,function(w){(e[w]||(e[w]={}))[p]=UM(p,"inRange"===w?"active":"inactive",a)})},this),My.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(e,t){var o=this.option,a=this._pieceList,c=(t?o:e).selected||{};if(o.selected=c,ee(a,function(p,y){var w=this.getSelectedMapKey(p);c.hasOwnProperty(w)||(c[w]=!0)},this),"single"===o.selectedMode){var h=!1;ee(a,function(p,y){var w=this.getSelectedMapKey(p);c[w]&&(h?c[w]=!1:h=!0)},this)}},getSelectedMapKey:function(e){return"categories"===this._mode?e.value+"":e.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var e=this.option;return e.pieces&&0<e.pieces.length?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(e){this.option.selected=K(e)},getValueState:function(e){var t=Rr.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries(function(o){var a=[],c=o.getData();c.each(this.getDataDimension(c),function(h,p){Rr.findPieceIndex(h,this._pieceList)===e&&a.push(p)},this),t.push({seriesId:o.id,dataIndex:a})},this),t},getRepresentValue:function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var o=e.interval||[];t=o[0]===-1/0&&o[1]===1/0?0:(o[0]+o[1])/2}return t},getVisualMeta:function(e){if(!this.isCategory()){var t=[],o=[],a=this,c=this._pieceList.slice();if(c.length){var h=c[0].interval[0];h!==-1/0&&c.unshift({interval:[-1/0,h]}),(h=c[c.length-1].interval[1])!==1/0&&c.push({interval:[h,1/0]})}else c.push({interval:[-1/0,1/0]});var p=-1/0;return ee(c,function(w){var C=w.interval;C&&(C[0]>p&&y([p,C[0]],"outOfRange"),y(C.slice()),p=C[1])},this),{stops:t,outerColors:o}}function y(w,C){var n=a.getRepresentValue({interval:w});C=C||a.getValueState(n);var i=e(n,C);w[0]===-1/0?o[0]=i:w[1]===1/0?o[1]=i:t.push({value:w[0],color:i},{value:w[1],color:i})}}}),RE={splitNumber:function(){var e=this.option,t=this._pieceList,o=Math.min(e.precision,20),a=this.getExtent(),c=e.splitNumber;c=Math.max(parseInt(c,10),1),e.splitNumber=c;for(var h=(a[1]-a[0])/c;+h.toFixed(o)!==h&&o<5;)o++;e.precision=o,h=+h.toFixed(o),e.minOpen&&t.push({interval:[-1/0,a[0]],close:[0,0]});for(var p=0,y=a[0];p<c;y+=h,p++)t.push({interval:[y,p===c-1?a[1]:y+h],close:[1,1]});e.maxOpen&&t.push({interval:[a[1],1/0],close:[0,0]}),Ra(t),ee(t,function(C,n){C.index=n,C.text=this.formatValueText(C.interval)},this)},categories:function(){var e=this.option;ee(e.categories,function(t){this._pieceList.push({text:this.formatValueText(t,!0),value:t})},this),xD(e,this._pieceList)},pieces:function(){var e=this.option,t=this._pieceList;ee(e.pieces,function(o,a){ue(o)||(o={value:o});var c={text:"",index:a};if(null!=o.label&&(c.text=o.label),o.hasOwnProperty("value")){var h=c.value=o.value;c.interval=[h,h],c.close=[1,1]}else{for(var p=c.interval=[],y=c.close=[0,0],w=[1,0,1],C=[-1/0,1/0],n=[],i=0;i<2;i++){for(var s=[["gte","gt","min"],["lte","lt","max"]][i],d=0;d<3&&null==p[i];d++)p[i]=o[s[d]],y[i]=w[d],n[i]=2===d;null==p[i]&&(p[i]=C[i])}n[0]&&p[1]===1/0&&(y[0]=0),n[1]&&p[0]===-1/0&&(y[1]=0),p[0]===p[1]&&y[0]&&y[1]&&(c.value=p[0])}c.visual=Rr.retrieveVisuals(o),t.push(c)},this),xD(e,t),Ra(t),ee(t,function(o){var a=o.close;o.text=o.text||this.formatValueText(null!=o.value?o.value:o.interval,!1,[["<","\u2264"][a[1]],[">","\u2265"][a[0]]])},this)}};function xD(e,t){var o=e.inverse;("vertical"===e.orient?!o:o)&&t.reverse()}Nu.extend({type:"visualMap.piecewise",doRender:function(){var e=this.group;e.removeAll();var t=this.visualMapModel,o=t.get("textGap"),a=t.textStyleModel,c=a.getFont(),h=a.getTextColor(),p=this._getItemAlign(),y=t.itemSize,w=this._getViewData(),C=w.endsText,n=Jt(t.get("showLabel",!0),!C);C&&this._renderEndsText(e,C[0],y,n,p),ee(w.viewPieceList,function(i){var s=i.piece,d=new pn;d.onclick=rt(this._onItemClick,this,s),this._enableHoverLink(d,i.indexInModelPieceList);var u=t.getRepresentValue(s);if(this._createItemSymbol(d,u,[0,0,y[0],y[1]]),n){var f=this.visualMapModel.getValueState(u);d.add(new Yo({style:{x:"right"===p?-o:y[0]+o,y:y[1]/2,text:s.text,textVerticalAlign:"middle",textAlign:p,textFont:c,textFill:h,opacity:"outOfRange"===f?.5:1}}))}e.add(d)},this),C&&this._renderEndsText(e,C[1],y,n,p),Kh(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},_enableHoverLink:function(e,t){function o(a){var c=this.visualMapModel;c.option.hoverLink&&this.api.dispatchAction({type:a,batch:qM(c.findTargetDataIndices(t),c)})}e.on("mouseover",rt(o,this,"highlight")).on("mouseout",rt(o,this,"downplay"))},_getItemAlign:function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return bD(e,this.api,e.itemSize);var o=t.align;return o&&"auto"!==o||(o="left"),o},_renderEndsText:function(e,t,o,a,c){if(t){var h=new pn,p=this.visualMapModel.textStyleModel;h.add(new Yo({style:{x:a?"right"===c?o[0]:0:o[0]/2,y:o[1]/2,textVerticalAlign:"middle",textAlign:a?c:"center",text:t,textFont:p.getFont(),textFill:p.getTextColor()}})),e.add(h)}},_getViewData:function(){var e=this.visualMapModel,t=Se(e.getPieceList(),function(h,p){return{piece:h,indexInModelPieceList:p}}),o=e.get("text"),a=e.get("orient"),c=e.get("inverse");return("horizontal"===a?c:!c)?t.reverse():o=o&&o.slice().reverse(),{viewPieceList:t,endsText:o}},_createItemSymbol:function(e,t,o){e.add(Kc(this.getControllerVisual(t,"symbol"),o[0],o[1],o[2],o[3],this.getControllerVisual(t,"color")))},_onItemClick:function(e){var t=this.visualMapModel,o=t.option,a=K(o.selected),c=t.getSelectedMapKey(e);"single"===o.selectedMode?(a[c]=!0,ee(a,function(h,p){a[p]=p===c})):a[c]=!a[c],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}}),ks(f1);var xv,VS="urn:schemas-microsoft-com:vml",y1=typeof window>"u"?null:window,YM=!1,hs=y1&&y1.document;function HS(e){return xv(e)}if(hs&&!Oe.canvasSupported)try{hs.namespaces.zrvml||hs.namespaces.add("zrvml",VS),xv=function(e){return hs.createElement("<zrvml:"+e+' class="zrvml">')}}catch{xv=function(t){return hs.createElement("<"+t+' xmlns="'+VS+'" class="zrvml">')}}var _D,Ah=Ul.CMD,Ar=Math.round,b1=Math.sqrt,_v=Math.abs,wD=Math.cos,SD=Math.sin,WS=Math.max;if(!Oe.canvasSupported){var ha=",",x1="progid:DXImageTransform.Microsoft",gs=21600,ts=gs/2,XM=function(e){e.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",e.coordsize=gs+","+gs,e.coordorigin="0,0"},US=function(e,t,o){return"rgb("+[e,t,o].join(",")+")"},Rg=function(e,t){t&&e&&t.parentNode!==e&&e.appendChild(t)},GS=function(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)},jS=function(e,t,o){return 1e5*(parseFloat(e)||0)+1e3*(parseFloat(t)||0)+o},CD=um,kD=function(e,t,o){var a=nl(t);o=+o,isNaN(o)&&(o=1),a&&(e.color=US(a[0],a[1],a[2]),e.opacity=o*a[3])},Dy=function(e,t,o,a){var p,y,c="fill"===t,h=e.getElementsByTagName(t)[0];null!=o[t]&&"none"!==o[t]&&(c||!c&&o.lineWidth)?(e[c?"filled":"stroked"]="true",o[t]instanceof Uc&&GS(e,h),h=h||HS(t),c?function(p,y,w){var n,i=y.fill;if(null!=i)if(i instanceof Uc){var s,d=0,u=[0,0],f=0,v=1,_=w.getBoundingRect(),k=_.width,T=_.height;if("linear"===i.type){s="gradient";var M=w.transform,I=[i.x*k,i.y*T],O=[i.x2*k,i.y2*T];M&&(ir(I,I,M),ir(O,O,M)),(d=180*Math.atan2(O[0]-I[0],O[1]-I[1])/Math.PI)<0&&(d+=360),d<1e-6&&(d=0)}else{s="gradientradial";var z=w.scale,L=k,V=T;u=[((I=[i.x*k,i.y*T])[0]-_.x)/L,(I[1]-_.y)/V],(M=w.transform)&&ir(I,I,M);var J=WS(L/=z[0]*gs,V/=z[1]*gs);v=2*i.r/J-(f=0/J)}var te=i.colorStops.slice();te.sort(function(et,Ye){return et.offset-Ye.offset});for(var re=te.length,ie=[],he=[],fe=0;fe<re;fe++){var ye=te[fe],Ie=(n=nl(ye.color),[US(n[0],n[1],n[2]),n[3]]);he.push(ye.offset*v+f+" "+Ie[0]),0!==fe&&fe!==re-1||ie.push(Ie)}if(2<=re){var He=ie[0][0],we=ie[1][0],De=ie[0][1]*y.opacity,Be=ie[1][1]*y.opacity;p.type=s,p.method="none",p.focus="100%",p.angle=d,p.color=He,p.color2=we,p.colors=he.join(","),p.opacity=Be,p.opacity2=De}"radial"===s&&(p.focusposition=u.join(","))}else kD(p,i,y.opacity)}(h,o,a):(p=h,(y=o).lineDash&&(p.dashstyle=y.lineDash.join(" ")),null==y.stroke||y.stroke instanceof Uc||kD(p,y.stroke,y.opacity)),Rg(e,h)):(e[c?"filled":"stroked"]="false",GS(e,h))},Yd=[[],[],[]];Mo.prototype.brushVML=function(e){var t=this.style,o=this._vmlEl;o||(o=HS("shape"),XM(o),this._vmlEl=o),Dy(o,"fill",t,this),Dy(o,"stroke",t,this);var a=this.transform,c=null!=a,h=o.getElementsByTagName("stroke")[0];if(h){var p=t.lineWidth;c&&!t.strokeNoScale&&(p*=b1(_v(a[0]*a[3]-a[1]*a[2]))),h.weight=p+"px"}var w=this.path||(this.path=new Ul);this.__dirtyPath&&(w.beginPath(),w.subPixelOptimize=!1,this.buildPath(w,this.shape),w.toStatic(),this.__dirtyPath=!1),o.path=function(C,n){var i,s,d,u,f,v,_=Ah.M,k=Ah.C,T=Ah.L,M=Ah.A,I=Ah.Q,O=[],R=C.data,N=C.len();for(u=0;u<N;){switch(s="",i=0,d=R[u++]){case _:s=" m ",i=1,f=R[u++],v=R[u++],Yd[0][0]=f,Yd[0][1]=v;break;case T:s=" l ",i=1,f=R[u++],v=R[u++],Yd[0][0]=f,Yd[0][1]=v;break;case I:case k:s=" c ",i=3;var z,L,V=R[u++],J=R[u++],te=R[u++],re=R[u++];d===I?(te=((z=te)+2*V)/3,re=((L=re)+2*J)/3,V=(f+2*V)/3,J=(v+2*J)/3):(z=R[u++],L=R[u++]),Yd[0][0]=V,Yd[0][1]=J,Yd[1][0]=te,Yd[1][1]=re,f=Yd[2][0]=z,v=Yd[2][1]=L;break;case M:var ie=0,he=0,fe=1,ye=1,Ie=0;n&&(ie=n[4],he=n[5],fe=b1(n[0]*n[0]+n[1]*n[1]),ye=b1(n[2]*n[2]+n[3]*n[3]),Ie=Math.atan2(-n[1]/ye,n[0]/fe));var He=R[u++],we=R[u++],De=R[u++],Be=R[u++],et=R[u++]+Ie,Ye=R[u++]+et+Ie;u++;var it=R[u++],yt=He+wD(et)*De,It=we+SD(et)*Be,qt=(V=He+wD(Ye)*De,J=we+SD(Ye)*Be,it?" wa ":" at ");Math.abs(yt-V)<1e-4&&(.01<Math.abs(Ye-et)?it&&(yt+=.0125):Math.abs(It-we)<1e-4?it&&yt<He||!it&&He<yt?J-=.0125:J+=.0125:it&&It<we||!it&&we<It?V+=.0125:V-=.0125),O.push(qt,Ar(((He-De)*fe+ie)*gs-ts),ha,Ar(((we-Be)*ye+he)*gs-ts),ha,Ar(((He+De)*fe+ie)*gs-ts),ha,Ar(((we+Be)*ye+he)*gs-ts),ha,Ar((yt*fe+ie)*gs-ts),ha,Ar((It*ye+he)*gs-ts),ha,Ar((V*fe+ie)*gs-ts),ha,Ar((J*ye+he)*gs-ts)),f=V,v=J;break;case Ah.R:var Xt=Yd[0],Dt=Yd[1];Xt[0]=R[u++],Xt[1]=R[u++],Dt[0]=Xt[0]+R[u++],Dt[1]=Xt[1]+R[u++],n&&(ir(Xt,Xt,n),ir(Dt,Dt,n)),Xt[0]=Ar(Xt[0]*gs-ts),Dt[0]=Ar(Dt[0]*gs-ts),Xt[1]=Ar(Xt[1]*gs-ts),Dt[1]=Ar(Dt[1]*gs-ts),O.push(" m ",Xt[0],ha,Xt[1]," l ",Dt[0],ha,Xt[1]," l ",Dt[0],ha,Dt[1]," l ",Xt[0],ha,Dt[1]);break;case Ah.Z:O.push(" x ")}if(0<i){O.push(s);for(var en=0;en<i;en++){var qe=Yd[en];n&&ir(qe,qe,n),O.push(Ar(qe[0]*gs-ts),ha,Ar(qe[1]*gs-ts),en<i-1?ha:"")}}}return O.join("")}(w,this.transform),o.style.zIndex=jS(this.zlevel,this.z,this.z2),Rg(e,o),null!=t.text?this.drawRectText(e,this.getBoundingRect()):this.removeRectText(e)},Mo.prototype.onRemove=function(e){GS(e,this._vmlEl),this.removeRectText(e)},Mo.prototype.onAdd=function(e){Rg(e,this._vmlEl),this.appendRectText(e)},xr.prototype.brushVML=function(e){var t,o,Be,a=this.style,c=a.image;if("object"==typeof(Be=c)&&Be.tagName&&"IMG"===Be.tagName.toUpperCase()){var h=c.src;if(h===this._imageSrc)t=this._imageWidth,o=this._imageHeight;else{var p=c.runtimeStyle,y=p.width,w=p.height;p.width="auto",p.height="auto",t=c.width,o=c.height,p.width=y,p.height=w,this._imageSrc=h,this._imageWidth=t,this._imageHeight=o}c=h}else c===this._imageSrc&&(t=this._imageWidth,o=this._imageHeight);if(c){var C=a.x||0,n=a.y||0,i=a.width,s=a.height,d=a.sWidth,u=a.sHeight,f=a.sx||0,v=a.sy||0,_=d&&u,k=this._vmlEl;k||(k=hs.createElement("div"),XM(k),this._vmlEl=k);var T,M=k.style,I=!1,O=1,R=1;if(this.transform&&(O=b1((T=this.transform)[0]*T[0]+T[1]*T[1]),R=b1(T[2]*T[2]+T[3]*T[3]),I=T[1]||T[2]),I){var N=[C,n],z=[C+i,n],L=[C,n+s],V=[C+i,n+s];ir(N,N,T),ir(z,z,T),ir(L,L,T),ir(V,V,T);var J=WS(N[0],z[0],L[0],V[0]),te=WS(N[1],z[1],L[1],V[1]),re=[];re.push("M11=",T[0]/O,ha,"M12=",T[2]/R,ha,"M21=",T[1]/O,ha,"M22=",T[3]/R,ha,"Dx=",Ar(C*O+T[4]),ha,"Dy=",Ar(n*R+T[5])),M.padding="0 "+Ar(J)+"px "+Ar(te)+"px 0",M.filter=x1+".Matrix("+re.join("")+", SizingMethod=clip)"}else T&&(C=C*O+T[4],n=n*R+T[5]),M.filter="",M.left=Ar(C)+"px",M.top=Ar(n)+"px";var ie=this._imageEl,he=this._cropEl;ie||(ie=hs.createElement("div"),this._imageEl=ie);var fe=ie.style;if(_){if(t&&o)fe.width=Ar(O*t*i/d)+"px",fe.height=Ar(R*o*s/u)+"px";else{var ye=new Image,Ie=this;ye.onload=function(){ye.onload=null,o=ye.height,fe.width=Ar(O*(t=ye.width)*i/d)+"px",fe.height=Ar(R*o*s/u)+"px",Ie._imageWidth=t,Ie._imageHeight=o,Ie._imageSrc=c},ye.src=c}he||((he=hs.createElement("div")).style.overflow="hidden",this._cropEl=he);var He=he.style;He.width=Ar((i+f*i/d)*O),He.height=Ar((s+v*s/u)*R),He.filter=x1+".Matrix(Dx="+-f*i/d*O+",Dy="+-v*s/u*R+")",he.parentNode||k.appendChild(he),ie.parentNode!==he&&he.appendChild(ie)}else fe.width=Ar(O*i)+"px",fe.height=Ar(R*s)+"px",k.appendChild(ie),he&&he.parentNode&&(k.removeChild(he),this._cropEl=null);var we="",De=a.opacity;De<1&&(we+=".Alpha(opacity="+Ar(100*De)+") "),fe.filter=we+=x1+".AlphaImageLoader(src="+c+", SizingMethod=scale)",k.style.zIndex=jS(this.zlevel,this.z,this.z2),Rg(e,k),null!=a.text&&this.drawRectText(e,this.getBoundingRect())}},xr.prototype.onRemove=function(e){GS(e,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(e)},xr.prototype.onAdd=function(e){Rg(e,this._vmlEl),this.appendRectText(e)};var Oy,qS="normal",ZM={},TD=0,fN=document.createElement("div");_D=function(e,t){var o=hs;Oy||((Oy=o.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",hs.body.appendChild(Oy));try{Oy.style.font=t}catch{}return Oy.innerHTML="",Oy.appendChild(o.createTextNode(e)),{width:Oy.offsetWidth}},ki.measureText=_D;for(var Lg=new Ro,LE=function(e,t,o,a){var c=this.style;this.__dirty&&xo(c);var h=c.text;if(null!=h&&(h+=""),h){if(c.rich){var p=Vt(h,c);h=[];for(var y=0;y<p.lines.length;y++){for(var w=p.lines[y].tokens,C=[],n=0;n<w.length;n++)C.push(w[n].text);h.push(C.join(""))}h=h.join("\n")}var i,s,d=c.textAlign,u=c.textVerticalAlign,f=function(V){var J=ZM[V];if(!J){100<TD&&(TD=0,ZM={});var te,re=fN.style;try{re.font=V,te=re.fontFamily.split(",")[0]}catch{}J={style:re.fontStyle||qS,variant:re.fontVariant||qS,weight:re.fontWeight||qS,size:0|parseFloat(re.fontSize||12),family:te||"Microsoft YaHei"},ZM[V]=J,TD++}return J}(c.font),v=f.style+" "+f.variant+" "+f.weight+" "+f.size+'px "'+f.family+'"';o=o||rl(h,v,d,u,c.textPadding,c.textLineHeight);var _=this.transform;if(_&&!a&&(Lg.copy(t),Lg.applyTransform(_),t=Lg),a)i=t.x,s=t.y;else{var k=c.textPosition;if(k instanceof Array)i=t.x+CD(k[0],t.width),s=t.y+CD(k[1],t.height),d=d||"left";else{var T=this.calculateTextPosition?this.calculateTextPosition({},c,t):be({},c,t);i=T.x,s=T.y,d=d||T.textAlign,u=u||T.textVerticalAlign}}i=ge(i,o.width,d),s=xe(s,o.height,u),s+=o.height/2;var M,I,O,R=HS,N=this._textVmlEl;N?I=(M=(O=N.firstChild).nextSibling).nextSibling:(N=R("line"),M=R("path"),I=R("textpath"),O=R("skew"),I.style["v-text-align"]="left",XM(N),M.textpathok=!0,I.on=!0,N.from="0 0",N.to="1000 0.05",Rg(N,O),Rg(N,M),Rg(N,I),this._textVmlEl=N);var z=[i,s],L=N.style;_&&a?(ir(z,z,_),O.on=!0,O.matrix=_[0].toFixed(3)+ha+_[2].toFixed(3)+ha+_[1].toFixed(3)+ha+_[3].toFixed(3)+",0,0",O.offset=(Ar(z[0])||0)+","+(Ar(z[1])||0),O.origin="0 0",L.left="0px",L.top="0px"):(O.on=!1,L.left=Ar(i)+"px",L.top=Ar(s)+"px"),I.string=String(h).replace(/&/g,"&amp;").replace(/"/g,"&quot;");try{I.style.font=v}catch{}Dy(N,"fill",{fill:c.textFill,opacity:c.opacity},this),Dy(N,"stroke",{stroke:c.textStroke,opacity:c.opacity,lineDash:c.lineDash||null},this),N.style.zIndex=jS(this.zlevel,this.z,this.z2),Rg(e,N)}},vN=function(e){GS(e,this._textVmlEl),this._textVmlEl=null},MD=function(e){Rg(e,this._textVmlEl)},AD=[il,Ei,xr,Mo,Yo],_1=0;_1<AD.length;_1++){var KM=AD[_1].prototype;KM.drawRectText=LE,KM.removeRectText=vN,KM.appendRectText=MD}Yo.prototype.brushVML=function(e){var t=this.style;null!=t.text?this.drawRectText(e,{x:t.x||0,y:t.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(e)},Yo.prototype.onRemove=function(e){this.removeRectText(e)},Yo.prototype.onAdd=function(e){this.appendRectText(e)}}function Ey(e){return parseInt(e,10)}function w1(e,t){(function(){if(!YM&&hs){YM=!0;var p=hs.styleSheets;p.length<31?hs.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):p[0].addRule(".zrvml","behavior:url(#default#VML)")}})(),this.root=e,this.storage=t;var o=document.createElement("div"),a=document.createElement("div");o.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",a.style.cssText="position:absolute;left:0;top:0;",e.appendChild(o),this._vmlRoot=a,this._vmlViewport=o,this.resize();var c=t.delFromStorage,h=t.addToStorage;t.delFromStorage=function(p){c.call(t,p),p&&p.onRemove&&p.onRemove(a)},t.addToStorage=function(p){p.onAdd&&p.onAdd(a),h.call(t,p)},this._firstPaint=!0}function Ih(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}w1.prototype={constructor:w1,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0,!0);this._paintList(e)},_paintList:function(e){for(var t=this._vmlRoot,o=0;o<e.length;o++){var a=e[o];a.invisible||a.ignore?(a.__alreadyNotVisible||a.onRemove(t),a.__alreadyNotVisible=!0):(a.__alreadyNotVisible&&a.onAdd(t),a.__alreadyNotVisible=!1,a.__dirty&&(a.beforeBrush&&a.beforeBrush(),(a.brushVML||a.brush).call(a,t),a.afterBrush&&a.afterBrush())),a.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(t),this._firstPaint=!1)},resize:function(e,t){if(e=e??this._getWidth(),t=t??this._getHeight(),this._width!==e||this._height!==t){this._width=e,this._height=t;var o=this._vmlViewport.style;o.width=e+"px",o.height=t+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var e=this.root,t=e.currentStyle;return(e.clientWidth||Ey(t.width))-Ey(t.paddingLeft)-Ey(t.paddingRight)|0},_getHeight:function(){var e=this.root,t=e.currentStyle;return(e.clientHeight||Ey(t.height))-Ey(t.paddingTop)-Ey(t.paddingBottom)|0}},ee(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(e){w1.prototype[e]=function(){}}),zl("vml",w1);var Ny=Ul.CMD,S1=Array.prototype.join,C1="none",ID=Math.round,JM=Math.sin,k1=Math.cos,rr=Math.PI,Ru=2*Math.PI,Qp=180/rr,T1=1e-4;function Xd(e){return ID(1e4*e)/1e4}function $S(e){return e<T1&&-T1<e}function QM(e,t){t&&ga(e,"transform","matrix("+S1.call(t,",")+")")}function ga(e,t,o){o&&("linear"===o.type||"radial"===o.type)||e.setAttribute(t,o)}function eA(e,t,o,a){if(p=t,null!=(w=o?p.textFill:p.fill)&&w!==C1){var c=o?t.textFill:t.fill;ga(e,"fill",c="transparent"===c?C1:c),ga(e,"fill-opacity",null!=t.fillOpacity?t.fillOpacity*t.opacity:t.opacity)}else ga(e,"fill",C1);var p,w;if(function(p,y){var w=y?p.textStroke:p.stroke;return null!=w&&w!==C1}(t,o)){var h=o?t.textStroke:t.stroke;ga(e,"stroke",h="transparent"===h?C1:h),ga(e,"stroke-width",(o?t.textStrokeWidth:t.lineWidth)/(!o&&t.strokeNoScale?a.getLineScale():1)),ga(e,"paint-order",o?"stroke":"fill"),ga(e,"stroke-opacity",null!=t.strokeOpacity?t.strokeOpacity:t.opacity),t.lineDash?(ga(e,"stroke-dasharray",t.lineDash.join(",")),ga(e,"stroke-dashoffset",ID(t.lineDashOffset||0))):ga(e,"stroke-dasharray",""),t.lineCap&&ga(e,"stroke-linecap",t.lineCap),t.lineJoin&&ga(e,"stroke-linejoin",t.lineJoin),t.miterLimit&&ga(e,"stroke-miterlimit",t.miterLimit)}else ga(e,"stroke",C1)}var M1={brush:function(e){var t=e.style,o=e.__svgEl;o||(o=Ih("path"),e.__svgEl=o),e.path||e.createPathProxy();var a=e.path;if(e.__dirtyPath){a.beginPath(),a.subPixelOptimize=!1,e.buildPath(a,e.shape),e.__dirtyPath=!1;var c=function(h){for(var p=[],y=h.data,w=h.len(),C=0;C<w;){var n="",i=0;switch(y[C++]){case Ny.M:n="M",i=2;break;case Ny.L:n="L",i=2;break;case Ny.Q:n="Q",i=4;break;case Ny.C:n="C",i=6;break;case Ny.A:var s=y[C++],d=y[C++],u=y[C++],f=y[C++],v=y[C++],_=y[C++],k=y[C++],T=y[C++],M=Math.abs(_),I=$S(M-Ru)||(T?Ru<=_:Ru<=-_),O=0<_?_%Ru:_%Ru+Ru,R=!1;R=!!I||!$S(M)&&rr<=O==!!T;var N=Xd(s+u*k1(v)),z=Xd(d+f*JM(v));I&&(_=T?Ru-1e-4:1e-4-Ru,R=!0,9===C&&p.push("M",N,z));var L=Xd(s+u*k1(v+_)),V=Xd(d+f*JM(v+_));p.push("A",Xd(u),Xd(f),ID(k*Qp),+R,+T,L,V);break;case Ny.Z:n="Z";break;case Ny.R:L=Xd(y[C++]),V=Xd(y[C++]);var J=Xd(y[C++]),te=Xd(y[C++]);p.push("M",L,V,"L",L+J,V,"L",L+J,V+te,"L",L,V+te,"L",L,V)}n&&p.push(n);for(var re=0;re<i;re++)p.push(Xd(y[C++]))}return p.join(" ")}(a);c.indexOf("NaN")<0&&ga(o,"d",c)}eA(o,t,!1,e),QM(o,e.transform),null!=t.text?Ry(e,e.getBoundingRect()):YS(e)}},tA={brush:function(e){var t=e.style,o=t.image;if(o instanceof HTMLImageElement&&(o=o.src),o){var a=t.x||0,c=t.y||0,h=t.width,p=t.height,y=e.__svgEl;y||(y=Ih("image"),e.__svgEl=y),o!==e.__imageSrc&&(y.setAttributeNS("http://www.w3.org/1999/xlink","href",o),e.__imageSrc=o),ga(y,"width",h),ga(y,"height",p),ga(y,"x",a),ga(y,"y",c),QM(y,e.transform),null!=t.text?Ry(e,e.getBoundingRect()):YS(e)}}},em={},nA=new Ro,Lu={},Ac=[],A1={left:"start",right:"end",center:"middle",middle:"middle"},Ry=function(e,t){var o=e.style,a=e.transform,c=e instanceof Yo||o.transformText;e.__dirty&&xo(o);var te,re,ie,h=o.text;if(null!=h&&(h+=""),br(h,o)){null==h&&(h=""),!c&&a&&(nA.copy(t),nA.applyTransform(a),t=nA);var p=e.__textSvgEl;p||(p=Ih("text"),e.__textSvgEl=p);var y=p.style,w=o.font||Pl,C=p.__computedFont;w!==p.__styleFont&&(y.font=p.__styleFont=w,C=p.__computedFont=y.font);var n=o.textPadding,s=e.__textCotentBlock;s&&!e.__dirtyText||(s=e.__textCotentBlock=Lt(h,C,n,o.textLineHeight,o.truncate));var d=s.outerHeight,u=s.lineHeight;Bi(Lu,e,o,t);var f=Lu.baseX,v=Lu.baseY,_=Lu.textAlign||"left",k=Lu.textVerticalAlign;!function(te,re,ie,he,fe,ye,Ie){tl(Ac),re&&ie&&Nh(Ac,ie);var He=he.textRotation;if(fe&&He){var we=he.textOrigin;"center"===we?(ye=fe.width/2+fe.x,Ie=fe.height/2+fe.y):we&&(ye=we[0]+fe.x,Ie=we[1]+fe.y),Ac[4]-=ye,Ac[5]-=Ie,Rc(Ac,Ac,He),Ac[4]+=ye,Ac[5]+=Ie}QM(te,Ac)}(p,c,a,o,t,f,v);var T=f,M=xe(v,d,k);n&&(te=f,ie=n,T="right"===(re=_)?te-ie[1]:"center"===re?te+ie[3]/2-ie[1]/2:te+ie[3],M+=n[0]),M+=u/2,eA(p,o,!0,e);var I=s.canCacheByTextString,O=e.__tspanList||(e.__tspanList=[]),R=O.length;if(I&&e.__canCacheByTextString&&e.__text===h){if(e.__dirtyText&&R)for(var N=0;N<R;++N)DD(O[N],_,T,M+N*u)}else{e.__text=h,e.__canCacheByTextString=I;var z=s.lines,L=z.length;for(N=0;N<L;N++){var V=O[N],J=z[N];V?V.__zrText!==J&&(V.innerHTML="",V.appendChild(document.createTextNode(J))):(V=O[N]=Ih("tspan"),p.appendChild(V),V.appendChild(document.createTextNode(J))),DD(V,_,T,M+N*u)}if(L<R){for(;N<R;N++)p.removeChild(O[N]);O.length=L}}}};function DD(e,t,o,a){ga(e,"dominant-baseline","middle"),ga(e,"text-anchor",A1[t]),ga(e,"x",o),ga(e,"y",a)}function YS(e){e&&e.__textSvgEl&&(e.__textSvgEl.parentNode&&e.__textSvgEl.parentNode.removeChild(e.__textSvgEl),e.__textSvgEl=null,e.__tspanList=[],e.__text=null)}function oA(){}function wv(e,t){for(var o=0,a=t.length,c=0,h=0;o<a;o++){var p=t[o];if(p.removed){for(y=[],w=h;w<h+p.count;w++)y.push(w);p.indices=y,h+=p.count}else{for(var y=[],w=c;w<c+p.count;w++)y.push(w);p.indices=y,c+=p.count,p.added||(h+=p.count)}}return t}em.drawRectText=Ry,em.brush=function(e){null!=e.style.text?Ry(e,!1):YS(e)},oA.prototype={diff:function(e,t,o){this.equals=o=o||function(u,f){return u===f};var a=this;e=e.slice();var c=(t=t.slice()).length,h=e.length,p=1,y=c+h,w=[{newPos:-1,components:[]}],C=this.extractCommon(w[0],t,e,0);if(w[0].newPos+1>=c&&h<=C+1){for(var n=[],i=0;i<t.length;i++)n.push(i);return[{indices:n,count:t.length}]}function s(){for(var u=-1*p;u<=p;u+=2){var f,v=w[u-1],_=w[u+1],k=(_?_.newPos:0)-u;v&&(w[u-1]=void 0);var T=v&&v.newPos+1<c,M=_&&0<=k&&k<h;if(T||M){if(!T||M&&v.newPos<_.newPos?(f={newPos:(I=_).newPos,components:I.components.slice(0)},a.pushComponent(f.components,void 0,!0)):((f=v).newPos++,a.pushComponent(f.components,!0,void 0)),k=a.extractCommon(f,t,e,u),f.newPos+1>=c&&h<=k+1)return wv(0,f.components);w[u]=f}else w[u]=void 0}var I;p++}for(;p<=y;){var d=s();if(d)return d}},pushComponent:function(e,t,o){var a=e[e.length-1];a&&a.added===t&&a.removed===o?e[e.length-1]={count:a.count+1,added:t,removed:o}:e.push({count:1,added:t,removed:o})},extractCommon:function(e,t,o,a){for(var c=t.length,h=o.length,p=e.newPos,y=p-a,w=0;p+1<c&&y+1<h&&this.equals(t[p+1],o[y+1]);)p++,y++,w++;return w&&e.components.push({count:w}),e.newPos=p,y},tokenize:function(e){return e.slice()},join:function(e){return e.slice()}};var OD=new oA;function Ui(e,t,o,a,c){this._zrId=e,this._svgRoot=t,this._tagNames="string"==typeof o?[o]:o,this._markLabel=a,this._domName=c||"_dom",this.nextId=0}function Pu(e,t){Ui.call(this,e,t,["linearGradient","radialGradient"],"__gradient_in_use__")}function Dh(e,t){Ui.call(this,e,t,"clipPath","__clippath_in_use__")}function Bu(e,t){Ui.call(this,e,t,["filter"],"__filter_in_use__","_shadowDom")}function Ly(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY||e.textShadowBlur||e.textShadowOffsetX||e.textShadowOffsetY)}function XS(e){return parseInt(e,10)}function Ks(e,t){return t&&e&&t.parentNode!==e}function tm(e,t,o){if(Ks(e,t)&&o){var a=o.nextSibling;a?e.insertBefore(t,a):e.appendChild(t)}}function rA(e,t){if(Ks(e,t)){var o=e.firstChild;o?e.insertBefore(t,o):e.appendChild(t)}}function ED(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)}function ZS(e){return e.__textSvgEl}function Ic(e){return e.__svgEl}function KS(e,t,o,a){this.root=e,this.storage=t,this._opts=o=pe({},o||{});var c=Ih("svg");c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("version","1.1"),c.setAttribute("baseProfile","full"),c.style.cssText="user-select:none;position:absolute;left:0;top:0;";var h=Ih("g");c.appendChild(h);var p=Ih("g");c.appendChild(p),this.gradientManager=new Pu(a,p),this.clipPathManager=new Dh(a,p),this.shadowManager=new Bu(a,p);var y=document.createElement("div");y.style.cssText="overflow:hidden;position:relative",this._svgDom=c,this._svgRoot=p,this._backgroundRoot=h,this._viewport=y,e.appendChild(y),y.appendChild(c),this.resize(o.width,o.height),this._visibleList=[]}Ui.prototype.createElement=Ih,Ui.prototype.getDefs=function(e){var t=this._svgRoot,o=this._svgRoot.getElementsByTagName("defs");return 0===o.length?e?((o=t.insertBefore(this.createElement("defs"),t.firstChild)).contains||(o.contains=function(a){var c=o.children;if(!c)return!1;for(var h=c.length-1;0<=h;--h)if(c[h]===a)return!0;return!1}),o):null:o[0]},Ui.prototype.update=function(e,t){if(e){var o=this.getDefs(!1);if(e[this._domName]&&o.contains(e[this._domName]))"function"==typeof t&&t(e);else{var a=this.add(e);a&&(e[this._domName]=a)}}},Ui.prototype.addDom=function(e){this.getDefs(!0).appendChild(e)},Ui.prototype.removeDom=function(e){var t=this.getDefs(!1);t&&e[this._domName]&&(t.removeChild(e[this._domName]),e[this._domName]=null)},Ui.prototype.getDoms=function(){var e=this.getDefs(!1);if(!e)return[];var t=[];return ee(this._tagNames,function(o){var a=e.getElementsByTagName(o);t=t.concat([].slice.call(a))}),t},Ui.prototype.markAllUnused=function(){var e=this.getDoms(),t=this;ee(e,function(o){o[t._markLabel]="0"})},Ui.prototype.markUsed=function(e){e&&(e[this._markLabel]="1")},Ui.prototype.removeUnused=function(){var e=this.getDefs(!1);if(e){var t=this.getDoms(),o=this;ee(t,function(a){"1"!==a[o._markLabel]&&e.removeChild(a)})}},Ui.prototype.getSvgProxy=function(e){return e instanceof Mo?M1:e instanceof xr?tA:e instanceof Yo?em:M1},Ui.prototype.getTextSvgElement=function(e){return e.__textSvgEl},Ui.prototype.getSvgElement=function(e){return e.__svgEl},ve(Pu,Ui),Pu.prototype.addWithoutUpdate=function(e,t){if(t&&t.style){var o=this;ee(["fill","stroke"],function(a){if(t.style[a]&&("linear"===t.style[a].type||"radial"===t.style[a].type)){var c,h=t.style[a],p=o.getDefs(!0);h._dom?(c=h._dom,p.contains(h._dom)||o.addDom(c)):c=o.add(h),o.markUsed(t);var y=c.getAttribute("id");e.setAttribute(a,"url(#"+y+")")}})}},Pu.prototype.add=function(e){var t;if("linear"===e.type)t=this.createElement("linearGradient");else{if("radial"!==e.type)return null;t=this.createElement("radialGradient")}return e.id=e.id||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-gradient-"+e.id),this.updateDom(e,t),this.addDom(t),t},Pu.prototype.update=function(e){var t=this;Ui.prototype.update.call(this,e,function(){var o=e.type,a=e._dom.tagName;"linear"===o&&"linearGradient"===a||"radial"===o&&"radialGradient"===a?t.updateDom(e,e._dom):(t.removeDom(e),t.add(e))})},Pu.prototype.updateDom=function(e,t){if("linear"===e.type)t.setAttribute("x1",e.x),t.setAttribute("y1",e.y),t.setAttribute("x2",e.x2),t.setAttribute("y2",e.y2);else{if("radial"!==e.type)return;t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("r",e.r)}t.setAttribute("gradientUnits",e.global?"userSpaceOnUse":"objectBoundingBox"),t.innerHTML="";for(var o=e.colorStops,a=0,c=o.length;a<c;++a){var h=this.createElement("stop");h.setAttribute("offset",100*o[a].offset+"%");var p=o[a].color;if(-1<p.indexOf("rgba")){var y=nl(p)[3],w=zg(p);h.setAttribute("stop-color","#"+w),h.setAttribute("stop-opacity",y)}else h.setAttribute("stop-color",o[a].color);t.appendChild(h)}e._dom=t},Pu.prototype.markUsed=function(e){if(e.style){var t=e.style.fill;t&&t._dom&&Ui.prototype.markUsed.call(this,t._dom),(t=e.style.stroke)&&t._dom&&Ui.prototype.markUsed.call(this,t._dom)}},ve(Dh,Ui),Dh.prototype.update=function(e){var t=this.getSvgElement(e);t&&this.updateDom(t,e.__clipPaths,!1);var o=this.getTextSvgElement(e);o&&this.updateDom(o,e.__clipPaths,!0),this.markUsed(e)},Dh.prototype.updateDom=function(e,t,o){if(t&&0<t.length){var a,c,h=this.getDefs(!0),p=t[0],y=o?"_textDom":"_dom";p[y]?(c=p[y].getAttribute("id"),h.contains(a=p[y])||h.appendChild(a)):(c="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(a=this.createElement("clipPath")).setAttribute("id",c),h.appendChild(a),p[y]=a);var w=this.getSvgProxy(p);if(p.transform&&p.parent.invTransform&&!o){var C=Array.prototype.slice.call(p.transform);Aa(p.transform,p.parent.invTransform,p.transform),w.brush(p),p.transform=C}else w.brush(p);var n=this.getSvgElement(p);a.innerHTML="",a.appendChild(n.cloneNode()),e.setAttribute("clip-path","url(#"+c+")"),1<t.length&&this.updateDom(a,t.slice(1),o)}else e&&e.setAttribute("clip-path","none")},Dh.prototype.markUsed=function(e){var t=this;e.__clipPaths&&ee(e.__clipPaths,function(o){o._dom&&Ui.prototype.markUsed.call(t,o._dom),o._textDom&&Ui.prototype.markUsed.call(t,o._textDom)})},ve(Bu,Ui),Bu.prototype.addWithoutUpdate=function(e,t){if(t&&Ly(t.style)){var o;t._shadowDom?(o=t._shadowDom,this.getDefs(!0).contains(t._shadowDom)||this.addDom(o)):o=this.add(t),this.markUsed(t);var a=o.getAttribute("id");e.style.filter="url(#"+a+")"}},Bu.prototype.add=function(e){var t=this.createElement("filter");return e._shadowDomId=e._shadowDomId||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-shadow-"+e._shadowDomId),this.updateDom(e,t),this.addDom(t),t},Bu.prototype.update=function(e,t){if(Ly(t.style)){var o=this;Ui.prototype.update.call(this,t,function(){o.updateDom(t,t._shadowDom)})}else this.remove(e,t)},Bu.prototype.remove=function(e,t){null!=t._shadowDomId&&(this.removeDom(e),e.style.filter="")},Bu.prototype.updateDom=function(e,t){var o=t.getElementsByTagName("feDropShadow");o=0===o.length?this.createElement("feDropShadow"):o[0];var a,c,h,p,y=e.style,w=e.scale&&e.scale[0]||1,C=e.scale&&e.scale[1]||1;if(y.shadowBlur||y.shadowOffsetX||y.shadowOffsetY)a=y.shadowOffsetX||0,c=y.shadowOffsetY||0,h=y.shadowBlur,p=y.shadowColor;else{if(!y.textShadowBlur)return void this.removeDom(t,y);a=y.textShadowOffsetX||0,c=y.textShadowOffsetY||0,h=y.textShadowBlur,p=y.textShadowColor}o.setAttribute("dx",a/w),o.setAttribute("dy",c/C),o.setAttribute("flood-color",p),o.setAttribute("stdDeviation",h/2/w+" "+h/2/C),t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width",Math.ceil(h/2*200)+"%"),t.setAttribute("height",Math.ceil(h/2*200)+"%"),t.appendChild(o),e._shadowDom=t},Bu.prototype.markUsed=function(e){e._shadowDom&&Ui.prototype.markUsed.call(this,e._shadowDom)},KS.prototype={constructor:KS,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0);this._paintList(e)},setBackgroundColor:function(e){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var t=Ih("rect");t.setAttribute("width",this.getWidth()),t.setAttribute("height",this.getHeight()),t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("id",0),t.style.fill=e,this._backgroundRoot.appendChild(t),this._backgroundNode=t},_paintList:function(e){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var t,o,a=this._svgRoot,c=this._visibleList,h=e.length,p=[];for(t=0;t<h;t++){var y=e[t],w=(o=y)instanceof Mo?M1:o instanceof xr?tA:o instanceof Yo?em:M1,C=Ic(y)||ZS(y);y.invisible||(y.__dirty&&(w&&w.brush(y),this.clipPathManager.update(y),y.style&&(this.gradientManager.update(y.style.fill),this.gradientManager.update(y.style.stroke),this.shadowManager.update(C,y)),y.__dirty=!1),p.push(y))}var n,i=OD.diff(c,p,void 0);for(t=0;t<i.length;t++)if((u=i[t]).removed)for(var s=0;s<u.count;s++){C=Ic(y=c[u.indices[s]]);var d=ZS(y);ED(a,C),ED(a,d)}for(t=0;t<i.length;t++){var u;if((u=i[t]).added)for(s=0;s<u.count;s++)C=Ic(y=p[u.indices[s]]),d=ZS(y),n?tm(a,C,n):rA(a,C),C?tm(a,d,C):n?tm(a,d,n):rA(a,d),tm(a,d,C),n=d||C||n,this.gradientManager.addWithoutUpdate(C||d,y),this.shadowManager.addWithoutUpdate(C||d,y),this.clipPathManager.markUsed(y);else if(!u.removed)for(s=0;s<u.count;s++)C=Ic(y=p[u.indices[s]]),d=ZS(y),C=Ic(y),d=ZS(y),this.gradientManager.markUsed(y),this.gradientManager.addWithoutUpdate(C||d,y),this.shadowManager.markUsed(y),this.shadowManager.addWithoutUpdate(C||d,y),this.clipPathManager.markUsed(y),d&&tm(a,d,C),n=C||d||n}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=p},_getDefs:function(e){var t,o=this._svgDom;return 0!==(t=o.getElementsByTagName("defs")).length?t[0]:e?((t=o.insertBefore(Ih("defs"),o.firstChild)).contains||(t.contains=function(a){var c=t.children;if(!c)return!1;for(var h=c.length-1;0<=h;--h)if(c[h]===a)return!0;return!1}),t):null},resize:function(e,t){var o=this._viewport;o.style.display="none";var a=this._opts;if(null!=e&&(a.width=e),null!=t&&(a.height=t),e=this._getSize(0),t=this._getSize(1),o.style.display="",this._width!==e||this._height!==t){this._width=e,this._height=t;var c=o.style;c.width=e+"px",c.height=t+"px";var h=this._svgDom;h.setAttribute("width",e),h.setAttribute("height",t)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",e),this._backgroundNode.setAttribute("height",t))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,o=["width","height"][e],a=["clientWidth","clientHeight"][e],c=["paddingLeft","paddingTop"][e],h=["paddingRight","paddingBottom"][e];if(null!=t[o]&&"auto"!==t[o])return parseFloat(t[o]);var p=this.root,y=document.defaultView.getComputedStyle(p);return(p[a]||XS(y[o])||XS(p.style[o]))-(XS(y[c])||0)-(XS(y[h])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(this._svgDom.outerHTML.replace(/></g,">\n\r<"))}},ee(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(e){KS.prototype[e]=function(){}}),zl("svg",KS),Xe.version="4.9.0",Xe.dependencies={zrender:"4.3.2"},Xe.PRIORITY=Xc,Xe.init=function(e,t,o){var a=M_(e);if(a)return a;var c=new mc(e,t,o);return c.id="ec_"+rO++,Ym[c.id]=c,zD(e,T_,c.id),function(h){var p="__connectUpdateStatus";function y(w,C){for(var n=0;n<w.length;n++)w[n][p]=C}la(C_,function(w,C){h._messageCenter.on(C,function(n){if(Xm[h.group]&&0!==h[p]){if(n&&n.escapeConnect)return;var i=h.makeActionFromEvent(n),s=[];la(Ym,function(d){d!==h&&d.group===h.group&&s.push(d)}),y(s,0),la(s,function(d){1!==d[p]&&d.dispatchAction(i)}),y(s,2)}})})}(c),c},Xe.connect=function(e){if(nt(e)){var t=e;e=null,la(t,function(o){null!=o.group&&(e=o.group)}),e=e||"g_"+Nn++,la(t,function(o){o.group=e})}return Xm[e]=!0,e},Xe.disConnect=y0,Xe.disconnect=ek,Xe.dispose=function(e){"string"==typeof e?e=Ym[e]:e instanceof mc||(e=M_(e)),e instanceof mc&&!e.isDisposed()&&e.dispose()},Xe.getInstanceByDom=M_,Xe.getInstanceById=function(e){return Ym[e]},Xe.registerTheme=Ib,Xe.registerPreprocessor=ks,Xe.registerProcessor=Kt,Xe.registerPostUpdate=function(e){oO.push(e)},Xe.registerAction=Xo,Xe.registerCoordinateSystem=tk,Xe.getCoordinateSystemDimensions=function(e){var t=yl.get(e);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()},Xe.registerLayout=Wn,Xe.registerVisual=yi,Xe.registerLoading=pu,Xe.extendComponentModel=Gs,Xe.extendComponentView=fr,Xe.extendSeriesModel=Zm,Xe.extendChartView=Ts,Xe.setCanvasCreator=function(e){U("createCanvas",e)},Xe.registerMap=function(e,t,o){YC.registerMap(e,t,o)},Xe.getMap=function(e){var t=YC.retrieveMap(e);return t&&t[0]&&{geoJson:t[0].geoJSON,specialAreas:t[0].specialAreas}},Xe.dataTool={},Xe.zrender=hm,Xe.number=Ji,Xe.format=vl,Xe.throttle=p_,Xe.helper=fO,Xe.matrix=Ia,Xe.vector=Jd,Xe.color=bd,Xe.parseGeoJSON=F_,Xe.parseGeoJson=a2,Xe.util=Hb,Xe.graphic=_k,Xe.List=Ja,Xe.Model=Fo,Xe.Axis=bi,Xe.env=Oe}),function(Xe,St){"object"==typeof exports&&typeof module<"u"?St(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],St):St(Xe.bmap={},Xe.echarts)}(this,function(Xe,St){"use strict";function wn(se,q){this._bmap=se,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=q,this._projection=new BMap.MercatorProjection}function Oe(se,q){return q=q||[0,0],St.util.map([0,1],function(j){var ne=q[j],$=se[j]/2,X=[],Y=[];return X[j]=ne-$,Y[j]=ne+$,X[1-j]=Y[1-j]=q[1-j],Math.abs(this.dataToPoint(X)[j]-this.dataToPoint(Y)[j])},this)}var Ve;function Q(se){for(var q in se)if(se.hasOwnProperty(q))return!1;return!0}wn.prototype.dimensions=["lng","lat"],wn.prototype.setZoom=function(se){this._zoom=se},wn.prototype.setCenter=function(se){this._center=this._projection.lngLatToPoint(new BMap.Point(se[0],se[1]))},wn.prototype.setMapOffset=function(se){this._mapOffset=se},wn.prototype.getBMap=function(){return this._bmap},wn.prototype.dataToPoint=function(se){var q=new BMap.Point(se[0],se[1]),j=this._bmap.pointToOverlayPixel(q),ne=this._mapOffset;return[j.x-ne[0],j.y-ne[1]]},wn.prototype.pointToData=function(se){var q=this._mapOffset;return[(se=this._bmap.overlayPixelToPoint({x:se[0]+q[0],y:se[1]+q[1]})).lng,se.lat]},wn.prototype.getViewRect=function(){var se=this._api;return new St.graphic.BoundingRect(0,0,se.getWidth(),se.getHeight())},wn.prototype.getRoamTransform=function(){return St.matrix.create()},wn.prototype.prepareCustoms=function(se){var q=this.getViewRect();return{coordSys:{type:"bmap",x:q.x,y:q.y,width:q.width,height:q.height},api:{coord:St.util.bind(this.dataToPoint,this),size:St.util.bind(Oe,this)}}},wn.dimensions=wn.prototype.dimensions,wn.create=function(se,q){var j,ne=q.getDom();se.eachComponent("bmap",function($){var X=q.getZr().painter,Y=X.getViewportRoot();if(typeof BMap>"u")throw new Error("BMap api is not loaded");if(Ve=Ve||function(){function Re(Ue){this._root=Ue}return(Re.prototype=new BMap.Overlay).initialize=function(Ue){return Ue.getPanes().labelPane.appendChild(this._root),this._root},Re.prototype.draw=function(){},Re}(),j)throw new Error("Only one bmap component can exist");if(!$.__bmap){var W=ne.querySelector(".ec-extension-bmap");W&&(Y.style.left="0px",Y.style.top="0px",ne.removeChild(W)),(W=document.createElement("div")).style.cssText="width:100%;height:100%",W.classList.add("ec-extension-bmap"),ne.appendChild(W);var U=$.get("mapOptions")||{};delete U.mapType;var K=$.__bmap=new BMap.Map(W,U),le=new Ve(Y);K.addOverlay(le),X.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}K=$.__bmap;var de=$.get("center"),pe=$.get("zoom");if(de&&pe){var _e=K.getCenter(),ae=K.getZoom();if($.centerOrZoomChanged([_e.lng,_e.lat],ae)){var Ge=new BMap.Point(de[0],de[1]);K.centerAndZoom(Ge,pe)}}(j=new wn(K,q)).setMapOffset($.__mapOffset||[0,0]),j.setZoom(pe),j.setCenter(de),$.coordinateSystem=j}),se.eachSeries(function($){"bmap"===$.get("coordinateSystem")&&($.coordinateSystem=j)})},St.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(se,q){this.option.center=se,this.option.zoom=q},centerOrZoomChanged:function(se,q){var ne,$,j=this.option;return $=j.center,!((ne=se)&&$&&ne[0]===$[0]&&ne[1]===$[1]&&q===j.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},mapOptions:{},roam:!1}}),St.extendComponentView({type:"bmap",render:function(se,q,j){function ne(Re,Ue){if(!$){var ve=Y.parentNode.parentNode.parentNode,Me=[-parseInt(ve.style.left,10)||0,-parseInt(ve.style.top,10)||0];Y.style.left=Me[0]+"px",Y.style.top=Me[1]+"px",W.setMapOffset(Me),se.__mapOffset=Me,j.dispatchAction({type:"bmapRoam"})}}var $=!0,X=se.getBMap(),Y=j.getZr().painter.getViewportRoot(),W=se.coordinateSystem;function U(){$||j.dispatchAction({type:"bmapRoam"})}X.removeEventListener("moving",this._oldMoveHandler),X.removeEventListener("moveend",this._oldMoveHandler),X.removeEventListener("zoomend",this._oldZoomEndHandler),X.addEventListener("moving",ne),X.addEventListener("moveend",ne),X.addEventListener("zoomend",U),this._oldMoveHandler=ne,this._oldZoomEndHandler=U;var K=se.get("roam");K&&"scale"!==K?X.enableDragging():X.disableDragging(),K&&"move"!==K?(X.enableScrollWheelZoom(),X.enableDoubleClickZoom(),X.enablePinchToZoom()):(X.disableScrollWheelZoom(),X.disableDoubleClickZoom(),X.disablePinchToZoom());var le=se.__mapStyle,de=se.get("mapStyle")||{},pe=JSON.stringify(de);JSON.stringify(le)!==pe&&(Q(ae)||X.setMapStyle(St.util.clone(de)),se.__mapStyle=JSON.parse(pe));var _e=se.__mapStyle2,ae=se.get("mapStyleV2")||{},Ge=JSON.stringify(ae);JSON.stringify(_e)!==Ge&&(Q(ae)||X.setMapStyleV2(St.util.clone(ae)),se.__mapStyle2=JSON.parse(Ge)),$=!1}}),St.registerCoordinateSystem("bmap",wn),St.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(se,q){q.eachComponent("bmap",function(j){var ne=j.getBMap(),$=ne.getCenter();j.setCenterAndZoom([$.lng,$.lat],ne.getZoom())})}),Xe.version="1.0.0"}),function(Xe){"object"==typeof exports&&typeof module<"u"?module.exports=Xe():"function"==typeof define&&define.amd?define([],Xe):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).Chart=Xe()}(function(){return function Xe(St,wn,Oe){function Ve(q,j){if(!wn[q]){if(!St[q]){var ne="function"==typeof require&&require;if(!j&&ne)return ne(q,!0);if(Q)return Q(q,!0);var $=new Error("Cannot find module '"+q+"'");throw $.code="MODULE_NOT_FOUND",$}var X=wn[q]={exports:{}};St[q][0].call(X.exports,function(Y){return Ve(St[q][1][Y]||Y)},X,X.exports,Xe,St,wn,Oe)}return wn[q].exports}for(var Q="function"==typeof require&&require,se=0;se<Oe.length;se++)Ve(Oe[se]);return Ve}({1:[function(Xe,St,wn){},{}],2:[function(Xe,St,wn){function Oe(U){if(U){var K=[0,0,0],le=1,de=U.match(/^#([a-fA-F0-9]{3})$/i);if(de)for(de=de[1],pe=0;pe<K.length;pe++)K[pe]=parseInt(de[pe]+de[pe],16);else if(de=U.match(/^#([a-fA-F0-9]{6})$/i))for(de=de[1],pe=0;pe<K.length;pe++)K[pe]=parseInt(de.slice(2*pe,2*pe+2),16);else if(de=U.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(pe=0;pe<K.length;pe++)K[pe]=parseInt(de[pe+1]);le=parseFloat(de[4])}else if(de=U.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(pe=0;pe<K.length;pe++)K[pe]=Math.round(2.55*parseFloat(de[pe+1]));le=parseFloat(de[4])}else if(de=U.match(/(\w+)/)){if("transparent"==de[1])return[0,0,0,0];if(!(K=X[de[1]]))return}for(var pe=0;pe<K.length;pe++)K[pe]=ne(K[pe],0,255);return le=le||0==le?ne(le,0,1):1,K[3]=le,K}}function Ve(U){if(U){var K=U.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(K){var le=parseFloat(K[4]);return[ne(parseInt(K[1]),0,360),ne(parseFloat(K[2]),0,100),ne(parseFloat(K[3]),0,100),ne(isNaN(le)?1:le,0,1)]}}}function Q(U){if(U){var K=U.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(K){var le=parseFloat(K[4]);return[ne(parseInt(K[1]),0,360),ne(parseFloat(K[2]),0,100),ne(parseFloat(K[3]),0,100),ne(isNaN(le)?1:le,0,1)]}}}function se(U,K){return void 0===K&&(K=void 0!==U[3]?U[3]:1),"rgba("+U[0]+", "+U[1]+", "+U[2]+", "+K+")"}function q(U,K){return"rgba("+Math.round(U[0]/255*100)+"%, "+Math.round(U[1]/255*100)+"%, "+Math.round(U[2]/255*100)+"%, "+(K||U[3]||1)+")"}function j(U,K){return void 0===K&&(K=void 0!==U[3]?U[3]:1),"hsla("+U[0]+", "+U[1]+"%, "+U[2]+"%, "+K+")"}function ne(U,K,le){return Math.min(Math.max(K,U),le)}function $(U){var K=U.toString(16).toUpperCase();return K.length<2?"0"+K:K}var X=Xe(6);St.exports={getRgba:Oe,getHsla:Ve,getRgb:function(U){var K=Oe(U);return K&&K.slice(0,3)},getHsl:function(U){var K=Ve(U);return K&&K.slice(0,3)},getHwb:Q,getAlpha:function(U){var K=Oe(U);return K||(K=Ve(U))||(K=Q(U))?K[3]:void 0},hexString:function(U){return"#"+$(U[0])+$(U[1])+$(U[2])},rgbString:function(U,K){return K<1||U[3]&&U[3]<1?se(U,K):"rgb("+U[0]+", "+U[1]+", "+U[2]+")"},rgbaString:se,percentString:function(U,K){return K<1||U[3]&&U[3]<1?q(U,K):"rgb("+Math.round(U[0]/255*100)+"%, "+Math.round(U[1]/255*100)+"%, "+Math.round(U[2]/255*100)+"%)"},percentaString:q,hslString:function(U,K){return K<1||U[3]&&U[3]<1?j(U,K):"hsl("+U[0]+", "+U[1]+"%, "+U[2]+"%)"},hslaString:j,hwbString:function(U,K){return void 0===K&&(K=void 0!==U[3]?U[3]:1),"hwb("+U[0]+", "+U[1]+"%, "+U[2]+"%"+(void 0!==K&&1!==K?", "+K:"")+")"},keyword:function(U){return Y[U.slice(0,3)]}};var Y={};for(var W in X)Y[X[W]]=W},{6:6}],3:[function(Xe,St,wn){var Oe=Xe(5),Ve=Xe(2),Q=function(se){return se instanceof Q?se:this instanceof Q?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof se?(q=Ve.getRgba(se))?this.setValues("rgb",q):(q=Ve.getHsla(se))?this.setValues("hsl",q):(q=Ve.getHwb(se))&&this.setValues("hwb",q):"object"==typeof se&&(void 0!==(q=se).r||void 0!==q.red?this.setValues("rgb",q):void 0!==q.l||void 0!==q.lightness?this.setValues("hsl",q):void 0!==q.v||void 0!==q.value?this.setValues("hsv",q):void 0!==q.w||void 0!==q.whiteness?this.setValues("hwb",q):void 0===q.c&&void 0===q.cyan||this.setValues("cmyk",q)))):new Q(se);var q};Q.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var se=this.values;return 1!==se.alpha?se.hwb.concat([se.alpha]):se.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var se=this.values;return se.rgb.concat([se.alpha])},hslaArray:function(){var se=this.values;return se.hsl.concat([se.alpha])},alpha:function(se){return void 0===se?this.values.alpha:(this.setValues("alpha",se),this)},red:function(se){return this.setChannel("rgb",0,se)},green:function(se){return this.setChannel("rgb",1,se)},blue:function(se){return this.setChannel("rgb",2,se)},hue:function(se){return se&&(se=(se%=360)<0?360+se:se),this.setChannel("hsl",0,se)},saturation:function(se){return this.setChannel("hsl",1,se)},lightness:function(se){return this.setChannel("hsl",2,se)},saturationv:function(se){return this.setChannel("hsv",1,se)},whiteness:function(se){return this.setChannel("hwb",1,se)},blackness:function(se){return this.setChannel("hwb",2,se)},value:function(se){return this.setChannel("hsv",2,se)},cyan:function(se){return this.setChannel("cmyk",0,se)},magenta:function(se){return this.setChannel("cmyk",1,se)},yellow:function(se){return this.setChannel("cmyk",2,se)},black:function(se){return this.setChannel("cmyk",3,se)},hexString:function(){return Ve.hexString(this.values.rgb)},rgbString:function(){return Ve.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return Ve.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return Ve.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return Ve.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return Ve.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return Ve.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return Ve.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var se=this.values.rgb;return se[0]<<16|se[1]<<8|se[2]},luminosity:function(){for(var se=this.values.rgb,q=[],j=0;j<se.length;j++){var ne=se[j]/255;q[j]=ne<=.03928?ne/12.92:Math.pow((ne+.055)/1.055,2.4)}return.2126*q[0]+.7152*q[1]+.0722*q[2]},contrast:function(se){var q=this.luminosity(),j=se.luminosity();return q>j?(q+.05)/(j+.05):(j+.05)/(q+.05)},level:function(se){var q=this.contrast(se);return q>=7.1?"AAA":q>=4.5?"AA":""},dark:function(){var se=this.values.rgb;return(299*se[0]+587*se[1]+114*se[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var se=[],q=0;q<3;q++)se[q]=255-this.values.rgb[q];return this.setValues("rgb",se),this},lighten:function(se){var q=this.values.hsl;return q[2]+=q[2]*se,this.setValues("hsl",q),this},darken:function(se){var q=this.values.hsl;return q[2]-=q[2]*se,this.setValues("hsl",q),this},saturate:function(se){var q=this.values.hsl;return q[1]+=q[1]*se,this.setValues("hsl",q),this},desaturate:function(se){var q=this.values.hsl;return q[1]-=q[1]*se,this.setValues("hsl",q),this},whiten:function(se){var q=this.values.hwb;return q[1]+=q[1]*se,this.setValues("hwb",q),this},blacken:function(se){var q=this.values.hwb;return q[2]+=q[2]*se,this.setValues("hwb",q),this},greyscale:function(){var se=this.values.rgb,q=.3*se[0]+.59*se[1]+.11*se[2];return this.setValues("rgb",[q,q,q]),this},clearer:function(se){var q=this.values.alpha;return this.setValues("alpha",q-q*se),this},opaquer:function(se){var q=this.values.alpha;return this.setValues("alpha",q+q*se),this},rotate:function(se){var q=this.values.hsl,j=(q[0]+se)%360;return q[0]=j<0?360+j:j,this.setValues("hsl",q),this},mix:function(se,q){var j=this,ne=se,$=void 0===q?.5:q,X=2*$-1,Y=j.alpha()-ne.alpha(),W=((X*Y==-1?X:(X+Y)/(1+X*Y))+1)/2,U=1-W;return this.rgb(W*j.red()+U*ne.red(),W*j.green()+U*ne.green(),W*j.blue()+U*ne.blue()).alpha(j.alpha()*$+ne.alpha()*(1-$))},toJSON:function(){return this.rgb()},clone:function(){var se,q,j=new Q,ne=this.values,$=j.values;for(var X in ne)ne.hasOwnProperty(X)&&("[object Array]"===(q={}.toString.call(se=ne[X]))?$[X]=se.slice(0):"[object Number]"===q?$[X]=se:console.error("unexpected color value:",se));return j}},Q.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Q.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Q.prototype.getValues=function(se){for(var q=this.values,j={},ne=0;ne<se.length;ne++)j[se.charAt(ne)]=q[se][ne];return 1!==q.alpha&&(j.a=q.alpha),j},Q.prototype.setValues=function(se,q){var j,U,ne=this.values,$=this.spaces,X=this.maxes,Y=1;if(this.valid=!0,"alpha"===se)Y=q;else if(q.length)ne[se]=q.slice(0,se.length),Y=q[se.length];else if(void 0!==q[se.charAt(0)]){for(j=0;j<se.length;j++)ne[se][j]=q[se.charAt(j)];Y=q.a}else if(void 0!==q[$[se][0]]){var W=$[se];for(j=0;j<se.length;j++)ne[se][j]=q[W[j]];Y=q.alpha}if(ne.alpha=Math.max(0,Math.min(1,void 0===Y?ne.alpha:Y)),"alpha"===se)return!1;for(j=0;j<se.length;j++)U=Math.max(0,Math.min(X[se][j],ne[se][j])),ne[se][j]=Math.round(U);for(var K in $)K!==se&&(ne[K]=Oe[se][K](ne[se]));return!0},Q.prototype.setSpace=function(se,q){var j=q[0];return void 0===j?this.getValues(se):("number"==typeof j&&(j=Array.prototype.slice.call(q)),this.setValues(se,j),this)},Q.prototype.setChannel=function(se,q,j){var ne=this.values[se];return void 0===j?ne[q]:(j===ne[q]||(ne[q]=j,this.setValues(se,ne)),this)},typeof window<"u"&&(window.Color=Q),St.exports=Q},{2:2,5:5}],4:[function(Xe,St,wn){function Oe(ve){var Me,ee,Se=ve[0]/255,F=ve[1]/255,We=ve[2]/255,_t=Math.min(Se,F,We),rt=Math.max(Se,F,We),wt=rt-_t;return rt==_t?Me=0:Se==rt?Me=(F-We)/wt:F==rt?Me=2+(We-Se)/wt:We==rt&&(Me=4+(Se-F)/wt),(Me=Math.min(60*Me,360))<0&&(Me+=360),ee=(_t+rt)/2,[Me,100*(rt==_t?0:ee<=.5?wt/(rt+_t):wt/(2-rt-_t)),100*ee]}function Ve(ve){var Me,Pe,Se=ve[0],F=ve[1],We=ve[2],_t=Math.min(Se,F,We),rt=Math.max(Se,F,We),wt=rt-_t;return Pe=0==rt?0:wt/rt*1e3/10,rt==_t?Me=0:Se==rt?Me=(F-We)/wt:F==rt?Me=2+(We-Se)/wt:We==rt&&(Me=4+(Se-F)/wt),(Me=Math.min(60*Me,360))<0&&(Me+=360),[Me,Pe,rt/255*1e3/10]}function Q(ve){var Me=ve[0],Pe=ve[1],ee=ve[2];return[Oe(ve)[0],1/255*Math.min(Me,Math.min(Pe,ee))*100,100*(ee=1-1/255*Math.max(Me,Math.max(Pe,ee)))]}function se(ve){var Se,F=ve[0]/255,We=ve[1]/255,_t=ve[2]/255;return[100*((1-F-(Se=Math.min(1-F,1-We,1-_t)))/(1-Se)||0),100*((1-We-Se)/(1-Se)||0),100*((1-_t-Se)/(1-Se)||0),100*Se]}function q(ve){return Re[JSON.stringify(ve)]}function j(ve){var Me=ve[0]/255,Pe=ve[1]/255,ee=ve[2]/255;return[100*(.4124*(Me=Me>.04045?Math.pow((Me+.055)/1.055,2.4):Me/12.92)+.3576*(Pe=Pe>.04045?Math.pow((Pe+.055)/1.055,2.4):Pe/12.92)+.1805*(ee=ee>.04045?Math.pow((ee+.055)/1.055,2.4):ee/12.92)),100*(.2126*Me+.7152*Pe+.0722*ee),100*(.0193*Me+.1192*Pe+.9505*ee)]}function ne(ve){var Se=j(ve),F=Se[0],We=Se[1],_t=Se[2];return We/=100,_t/=108.883,F=(F/=95.047)>.008856?Math.pow(F,1/3):7.787*F+16/116,[116*(We=We>.008856?Math.pow(We,1/3):7.787*We+16/116)-16,500*(F-We),200*(We-(_t=_t>.008856?Math.pow(_t,1/3):7.787*_t+16/116))]}function $(ve){var Me,Pe,ee,Se,F,We=ve[0]/360,_t=ve[1]/100,rt=ve[2]/100;if(0==_t)return[F=255*rt,F,F];Me=2*rt-(Pe=rt<.5?rt*(1+_t):rt+_t-rt*_t),Se=[0,0,0];for(var wt=0;wt<3;wt++)(ee=We+1/3*-(wt-1))<0&&ee++,ee>1&&ee--,Se[wt]=255*(F=6*ee<1?Me+6*(Pe-Me)*ee:2*ee<1?Pe:3*ee<2?Me+(Pe-Me)*(2/3-ee)*6:Me);return Se}function X(ve){var Me=ve[0]/60,Pe=ve[1]/100,rt=ve[2]/100,ee=Math.floor(Me)%6,Se=Me-Math.floor(Me),F=255*rt*(1-Pe),We=255*rt*(1-Pe*Se),_t=255*rt*(1-Pe*(1-Se));switch(rt*=255,ee){case 0:return[rt,_t,F];case 1:return[We,rt,F];case 2:return[F,rt,_t];case 3:return[F,We,rt];case 4:return[_t,F,rt];case 5:return[rt,F,We]}}function Y(ve){var Me,Pe,ee,Se,F=ve[0]/360,We=ve[1]/100,_t=ve[2]/100,rt=We+_t;switch(rt>1&&(We/=rt,_t/=rt),ee=6*F-(Me=Math.floor(6*F)),1&Me&&(ee=1-ee),Se=We+ee*((Pe=1-_t)-We),Me){default:case 6:case 0:r=Pe,g=Se,b=We;break;case 1:r=Se,g=Pe,b=We;break;case 2:r=We,g=Pe,b=Se;break;case 3:r=We,g=Se,b=Pe;break;case 4:r=Se,g=We,b=Pe;break;case 5:r=Pe,g=We,b=Se}return[255*r,255*g,255*b]}function W(ve){var F=ve[1]/100,We=ve[2]/100,_t=ve[3]/100;return[255*(1-Math.min(1,ve[0]/100*(1-_t)+_t)),255*(1-Math.min(1,F*(1-_t)+_t)),255*(1-Math.min(1,We*(1-_t)+_t))]}function U(ve){var Me,Pe,ee,Se=ve[0]/100,F=ve[1]/100,We=ve[2]/100;return Pe=-.9689*Se+1.8758*F+.0415*We,ee=.0557*Se+-.204*F+1.057*We,Me=(Me=3.2406*Se+-1.5372*F+-.4986*We)>.0031308?1.055*Math.pow(Me,1/2.4)-.055:Me*=12.92,Pe=Pe>.0031308?1.055*Math.pow(Pe,1/2.4)-.055:Pe*=12.92,ee=ee>.0031308?1.055*Math.pow(ee,1/2.4)-.055:ee*=12.92,[255*(Me=Math.min(Math.max(0,Me),1)),255*(Pe=Math.min(Math.max(0,Pe),1)),255*(ee=Math.min(Math.max(0,ee),1))]}function K(ve){var Se=ve[0],F=ve[1],We=ve[2];return F/=100,We/=108.883,Se=(Se/=95.047)>.008856?Math.pow(Se,1/3):7.787*Se+16/116,[116*(F=F>.008856?Math.pow(F,1/3):7.787*F+16/116)-16,500*(Se-F),200*(F-(We=We>.008856?Math.pow(We,1/3):7.787*We+16/116))]}function le(ve){var Me,Pe,ee,Se,F=ve[0],We=ve[1],_t=ve[2];return F<=8?Se=(Pe=100*F/903.3)/100*7.787+16/116:(Pe=100*Math.pow((F+16)/116,3),Se=Math.pow(Pe/100,1/3)),[Me=Me/95.047<=.008856?Me=95.047*(We/500+Se-16/116)/7.787:95.047*Math.pow(We/500+Se,3),Pe,ee=ee/108.883<=.008859?ee=108.883*(Se-_t/200-16/116)/7.787:108.883*Math.pow(Se-_t/200,3)]}function de(ve){var Pe,Se=ve[0],F=ve[1],We=ve[2];return(Pe=360*Math.atan2(We,F)/2/Math.PI)<0&&(Pe+=360),[Se,Math.sqrt(F*F+We*We),Pe]}function pe(ve){return U(le(ve))}function _e(ve){var ee,F=ve[1];return ee=ve[2]/360*2*Math.PI,[ve[0],F*Math.cos(ee),F*Math.sin(ee)]}function ae(ve){return Ge[ve]}St.exports={rgb2hsl:Oe,rgb2hsv:Ve,rgb2hwb:Q,rgb2cmyk:se,rgb2keyword:q,rgb2xyz:j,rgb2lab:ne,rgb2lch:function(ve){return de(ne(ve))},hsl2rgb:$,hsl2hsv:function(ve){var Se=ve[1]/100,F=ve[2]/100;return 0===F?[0,0,0]:[ve[0],2*(Se*=(F*=2)<=1?F:2-F)/(F+Se)*100,(F+Se)/2*100]},hsl2hwb:function(ve){return Q($(ve))},hsl2cmyk:function(ve){return se($(ve))},hsl2keyword:function(ve){return q($(ve))},hsv2rgb:X,hsv2hsl:function(ve){var Me,Pe,Se=ve[1]/100,F=ve[2]/100;return Me=Se*F,[ve[0],100*(Me=(Me/=(Pe=(2-Se)*F)<=1?Pe:2-Pe)||0),100*(Pe/=2)]},hsv2hwb:function(ve){return Q(X(ve))},hsv2cmyk:function(ve){return se(X(ve))},hsv2keyword:function(ve){return q(X(ve))},hwb2rgb:Y,hwb2hsl:function(ve){return Oe(Y(ve))},hwb2hsv:function(ve){return Ve(Y(ve))},hwb2cmyk:function(ve){return se(Y(ve))},hwb2keyword:function(ve){return q(Y(ve))},cmyk2rgb:W,cmyk2hsl:function(ve){return Oe(W(ve))},cmyk2hsv:function(ve){return Ve(W(ve))},cmyk2hwb:function(ve){return Q(W(ve))},cmyk2keyword:function(ve){return q(W(ve))},keyword2rgb:ae,keyword2hsl:function(ve){return Oe(ae(ve))},keyword2hsv:function(ve){return Ve(ae(ve))},keyword2hwb:function(ve){return Q(ae(ve))},keyword2cmyk:function(ve){return se(ae(ve))},keyword2lab:function(ve){return ne(ae(ve))},keyword2xyz:function(ve){return j(ae(ve))},xyz2rgb:U,xyz2lab:K,xyz2lch:function(ve){return de(K(ve))},lab2xyz:le,lab2rgb:pe,lab2lch:de,lch2lab:_e,lch2xyz:function(ve){return le(_e(ve))},lch2rgb:function(ve){return pe(_e(ve))}};var Ge={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Re={};for(var Ue in Ge)Re[JSON.stringify(Ge[Ue])]=Ue},{}],5:[function(Xe,St,wn){var Oe=Xe(4),Ve=function(){return new ne};for(var Q in Oe){Ve[Q+"Raw"]=function($){return function(X){return"number"==typeof X&&(X=Array.prototype.slice.call(arguments)),Oe[$](X)}}(Q);var se=/(\w+)2(\w+)/.exec(Q),q=se[1],j=se[2];(Ve[q]=Ve[q]||{})[j]=Ve[Q]=function($){return function(X){"number"==typeof X&&(X=Array.prototype.slice.call(arguments));var Y=Oe[$](X);if("string"==typeof Y||void 0===Y)return Y;for(var W=0;W<Y.length;W++)Y[W]=Math.round(Y[W]);return Y}}(Q)}var ne=function(){this.convs={}};ne.prototype.routeSpace=function($,X){var Y=X[0];return void 0===Y?this.getValues($):("number"==typeof Y&&(Y=Array.prototype.slice.call(X)),this.setValues($,Y))},ne.prototype.setValues=function($,X){return this.space=$,this.convs={},this.convs[$]=X,this},ne.prototype.getValues=function($){var X=this.convs[$];if(!X){var Y=this.space;X=Ve[Y][$](this.convs[Y]),this.convs[$]=X}return X},["rgb","hsl","hsv","cmyk","keyword"].forEach(function($){ne.prototype[$]=function(X){return this.routeSpace($,arguments)}}),St.exports=Ve},{4:4}],6:[function(Xe,St,wn){"use strict";St.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],7:[function(Xe,St,wn){var Oe=Xe(29)();Oe.helpers=Xe(45),Xe(27)(Oe),Oe.defaults=Xe(25),Oe.Element=Xe(26),Oe.elements=Xe(40),Oe.Interaction=Xe(28),Oe.platform=Xe(48),Xe(31)(Oe),Xe(22)(Oe),Xe(23)(Oe),Xe(24)(Oe),Xe(30)(Oe),Xe(33)(Oe),Xe(32)(Oe),Xe(35)(Oe),Xe(54)(Oe),Xe(52)(Oe),Xe(53)(Oe),Xe(55)(Oe),Xe(56)(Oe),Xe(57)(Oe),Xe(15)(Oe),Xe(16)(Oe),Xe(17)(Oe),Xe(18)(Oe),Xe(19)(Oe),Xe(20)(Oe),Xe(21)(Oe),Xe(8)(Oe),Xe(9)(Oe),Xe(10)(Oe),Xe(11)(Oe),Xe(12)(Oe),Xe(13)(Oe),Xe(14)(Oe);var Ve=[];Ve.push(Xe(49)(Oe),Xe(50)(Oe),Xe(51)(Oe)),Oe.plugins.register(Ve),Oe.platform.initialize(),St.exports=Oe,typeof window<"u"&&(window.Chart=Oe),Oe.canvasHelpers=Oe.helpers.canvas},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,35:35,40:40,45:45,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,8:8,9:9}],8:[function(Xe,St,wn){"use strict";St.exports=function(Oe){Oe.Bar=function(Ve,Q){return Q.type="bar",new Oe(Ve,Q)}}},{}],9:[function(Xe,St,wn){"use strict";St.exports=function(Oe){Oe.Bubble=function(Ve,Q){return Q.type="bubble",new Oe(Ve,Q)}}},{}],10:[function(Xe,St,wn){"use strict";St.exports=function(Oe){Oe.Doughnut=function(Ve,Q){return Q.type="doughnut",new Oe(Ve,Q)}}},{}],11:[function(Xe,St,wn){"use strict";St.exports=function(Oe){Oe.Line=function(Ve,Q){return Q.type="line",new Oe(Ve,Q)}}},{}],12:[function(Xe,St,wn){"use strict";St.exports=function(Oe){Oe.PolarArea=function(Ve,Q){return Q.type="polarArea",new Oe(Ve,Q)}}},{}],13:[function(Xe,St,wn){"use strict";St.exports=function(Oe){Oe.Radar=function(Ve,Q){return Q.type="radar",new Oe(Ve,Q)}}},{}],14:[function(Xe,St,wn){"use strict";St.exports=function(Oe){Oe.Scatter=function(Ve,Q){return Q.type="scatter",new Oe(Ve,Q)}}},{}],15:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(40),Q=Xe(45);Oe._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),Oe._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(se,q){var j="";return se.length>0&&(se[0].yLabel?j=se[0].yLabel:q.labels.length>0&&se[0].index<q.labels.length&&(j=q.labels[se[0].index])),j},label:function(se,q){return(q.datasets[se.datasetIndex].label||"")+": "+se.xLabel}},mode:"index",axis:"y"}}),St.exports=function(se){se.controllers.bar=se.DatasetController.extend({dataElementType:Ve.Rectangle,initialize:function(){var q,j=this;se.DatasetController.prototype.initialize.apply(j,arguments),(q=j.getMeta()).stack=j.getDataset().stack,q.bar=!0},update:function(q){var j,ne,$=this,X=$.getMeta().data;for($._ruler=$.getRuler(),j=0,ne=X.length;j<ne;++j)$.updateElement(X[j],j,q)},updateElement:function(q,j,ne){var $=this,X=$.chart,Y=$.getMeta(),W=$.getDataset(),U=q.custom||{},K=X.options.elements.rectangle;q._xScale=$.getScaleForId(Y.xAxisID),q._yScale=$.getScaleForId(Y.yAxisID),q._datasetIndex=$.index,q._index=j,q._model={datasetLabel:W.label,label:X.data.labels[j],borderSkipped:U.borderSkipped?U.borderSkipped:K.borderSkipped,backgroundColor:U.backgroundColor?U.backgroundColor:Q.valueAtIndexOrDefault(W.backgroundColor,j,K.backgroundColor),borderColor:U.borderColor?U.borderColor:Q.valueAtIndexOrDefault(W.borderColor,j,K.borderColor),borderWidth:U.borderWidth?U.borderWidth:Q.valueAtIndexOrDefault(W.borderWidth,j,K.borderWidth)},$.updateElementGeometry(q,j,ne),q.pivot()},updateElementGeometry:function(q,j,ne){var $=this,X=q._model,Y=$.getValueScale(),W=Y.getBasePixel(),U=Y.isHorizontal(),K=$._ruler||$.getRuler(),le=$.calculateBarValuePixels($.index,j),de=$.calculateBarIndexPixels($.index,j,K);X.horizontal=U,X.base=ne?W:le.base,X.x=U?ne?W:le.head:de.center,X.y=U?de.center:ne?W:le.head,X.height=U?de.size:void 0,X.width=U?void 0:de.size},getValueScaleId:function(){return this.getMeta().yAxisID},getIndexScaleId:function(){return this.getMeta().xAxisID},getValueScale:function(){return this.getScaleForId(this.getValueScaleId())},getIndexScale:function(){return this.getScaleForId(this.getIndexScaleId())},getStackCount:function(q){var j,ne,X=this.chart,Y=this.getIndexScale().options.stacked,W=void 0===q?X.data.datasets.length:q+1,U=[];for(j=0;j<W;++j)(ne=X.getDatasetMeta(j)).bar&&X.isDatasetVisible(j)&&(!1===Y||!0===Y&&-1===U.indexOf(ne.stack)||void 0===Y&&(void 0===ne.stack||-1===U.indexOf(ne.stack)))&&U.push(ne.stack);return U.length},getStackIndex:function(q){return this.getStackCount(q)-1},getRuler:function(){var q,j,$=this.getIndexScale(),X=this.getStackCount(),Y=this.index,W=[],U=$.isHorizontal(),K=U?$.left:$.top,le=K+(U?$.width:$.height);for(q=0,j=this.getMeta().data.length;q<j;++q)W.push($.getPixelForValue(null,q,Y));return{pixels:W,start:K,end:le,stackCount:X,scale:$}},calculateBarValuePixels:function(q,j){var ne,$,X,Y,W,U,K=this,le=K.chart,de=K.getMeta(),pe=K.getValueScale(),_e=le.data.datasets,ae=pe.getRightValue(_e[q].data[j]),Ge=pe.options.stacked,Re=de.stack,Ue=0;if(Ge||void 0===Ge&&void 0!==Re)for(ne=0;ne<q;++ne)($=le.getDatasetMeta(ne)).bar&&$.stack===Re&&$.controller.getValueScaleId()===pe.id&&le.isDatasetVisible(ne)&&(X=pe.getRightValue(_e[ne].data[j]),(ae<0&&X<0||ae>=0&&X>0)&&(Ue+=X));return Y=pe.getPixelForValue(Ue),{size:U=((W=pe.getPixelForValue(Ue+ae))-Y)/2,base:Y,head:W,center:W+U/2}},calculateBarIndexPixels:function(q,j,ne){var $,X,Y,U,K,de=ne.scale.options,pe=this.getStackIndex(q),_e=ne.pixels,ae=_e[j],Ge=_e.length,Re=ne.start,Ue=ne.end;return 1===Ge?($=ae>Re?ae-Re:Ue-ae,X=ae<Ue?Ue-ae:ae-Re):(j>0&&($=(ae-_e[j-1])/2,j===Ge-1&&(X=$)),j<Ge-1&&(X=(_e[j+1]-ae)/2,0===j&&($=X))),K=(U=((Y=$*de.categoryPercentage)+X*de.categoryPercentage)/ne.stackCount)*de.barPercentage,ae-=Y,ae+=U*pe,{size:K=Math.min(Q.valueOrDefault(de.barThickness,K),Q.valueOrDefault(de.maxBarThickness,1/0)),base:ae+=(U-K)/2,head:ae+K,center:ae+K/2}},draw:function(){var q=this,j=q.chart,ne=q.getValueScale(),$=q.getMeta().data,X=q.getDataset(),Y=$.length,W=0;for(Q.canvas.clipArea(j.ctx,j.chartArea);W<Y;++W)isNaN(ne.getRightValue(X.data[W]))||$[W].draw();Q.canvas.unclipArea(j.ctx)},setHoverStyle:function(q){var j=this.chart.data.datasets[q._datasetIndex],ne=q._index,$=q.custom||{},X=q._model;X.backgroundColor=$.hoverBackgroundColor?$.hoverBackgroundColor:Q.valueAtIndexOrDefault(j.hoverBackgroundColor,ne,Q.getHoverColor(X.backgroundColor)),X.borderColor=$.hoverBorderColor?$.hoverBorderColor:Q.valueAtIndexOrDefault(j.hoverBorderColor,ne,Q.getHoverColor(X.borderColor)),X.borderWidth=$.hoverBorderWidth?$.hoverBorderWidth:Q.valueAtIndexOrDefault(j.hoverBorderWidth,ne,X.borderWidth)},removeHoverStyle:function(q){var j=this.chart.data.datasets[q._datasetIndex],ne=q._index,$=q.custom||{},X=q._model,Y=this.chart.options.elements.rectangle;X.backgroundColor=$.backgroundColor?$.backgroundColor:Q.valueAtIndexOrDefault(j.backgroundColor,ne,Y.backgroundColor),X.borderColor=$.borderColor?$.borderColor:Q.valueAtIndexOrDefault(j.borderColor,ne,Y.borderColor),X.borderWidth=$.borderWidth?$.borderWidth:Q.valueAtIndexOrDefault(j.borderWidth,ne,Y.borderWidth)}}),se.controllers.horizontalBar=se.controllers.bar.extend({getValueScaleId:function(){return this.getMeta().xAxisID},getIndexScaleId:function(){return this.getMeta().yAxisID}})}},{25:25,40:40,45:45}],16:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(40),Q=Xe(45);Oe._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(se,q){return(q.datasets[se.datasetIndex].label||"")+": ("+se.xLabel+", "+se.yLabel+", "+q.datasets[se.datasetIndex].data[se.index].r+")"}}}}),St.exports=function(se){se.controllers.bubble=se.DatasetController.extend({dataElementType:Ve.Point,update:function(q){var j=this,ne=j.getMeta().data;Q.each(ne,function($,X){j.updateElement($,X,q)})},updateElement:function(q,j,ne){var $=this,X=$.getMeta(),Y=q.custom||{},W=$.getScaleForId(X.xAxisID),U=$.getScaleForId(X.yAxisID),K=$._resolveElementOptions(q,j),le=$.getDataset().data[j],de=$.index,pe=ne?W.getPixelForDecimal(.5):W.getPixelForValue("object"==typeof le?le:NaN,j,de),_e=ne?U.getBasePixel():U.getPixelForValue(le,j,de);q._xScale=W,q._yScale=U,q._options=K,q._datasetIndex=de,q._index=j,q._model={backgroundColor:K.backgroundColor,borderColor:K.borderColor,borderWidth:K.borderWidth,hitRadius:K.hitRadius,pointStyle:K.pointStyle,radius:ne?0:K.radius,skip:Y.skip||isNaN(pe)||isNaN(_e),x:pe,y:_e},q.pivot()},setHoverStyle:function(q){var j=q._model,ne=q._options;j.backgroundColor=Q.valueOrDefault(ne.hoverBackgroundColor,Q.getHoverColor(ne.backgroundColor)),j.borderColor=Q.valueOrDefault(ne.hoverBorderColor,Q.getHoverColor(ne.borderColor)),j.borderWidth=Q.valueOrDefault(ne.hoverBorderWidth,ne.borderWidth),j.radius=ne.radius+ne.hoverRadius},removeHoverStyle:function(q){var j=q._model,ne=q._options;j.backgroundColor=ne.backgroundColor,j.borderColor=ne.borderColor,j.borderWidth=ne.borderWidth,j.radius=ne.radius},_resolveElementOptions:function(q,j){var ne,$,X,Y=this,W=Y.chart,U=W.data.datasets[Y.index],K=q.custom||{},le=W.options.elements.point,de=Q.options.resolve,pe=U.data[j],_e={},ae={chart:W,dataIndex:j,dataset:U,datasetIndex:Y.index},Ge=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle"];for(ne=0,$=Ge.length;ne<$;++ne)_e[X=Ge[ne]]=de([K[X],U[X],le[X]],ae,j);return _e.radius=de([K.radius,pe?pe.r:void 0,U.radius,le.radius],ae,j),_e}})}},{25:25,40:40,45:45}],17:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(40),Q=Xe(45);Oe._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(se){var q=[];q.push('<ul class="'+se.id+'-legend">');var j=se.data,ne=j.datasets,$=j.labels;if(ne.length)for(var X=0;X<ne[0].data.length;++X)q.push('<li><span style="background-color:'+ne[0].backgroundColor[X]+'"></span>'),$[X]&&q.push($[X]),q.push("</li>");return q.push("</ul>"),q.join("")},legend:{labels:{generateLabels:function(se){var q=se.data;return q.labels.length&&q.datasets.length?q.labels.map(function(j,ne){var $=se.getDatasetMeta(0),X=q.datasets[0],Y=$.data[ne],W=Y&&Y.custom||{},U=Q.valueAtIndexOrDefault,K=se.options.elements.arc;return{text:j,fillStyle:W.backgroundColor?W.backgroundColor:U(X.backgroundColor,ne,K.backgroundColor),strokeStyle:W.borderColor?W.borderColor:U(X.borderColor,ne,K.borderColor),lineWidth:W.borderWidth?W.borderWidth:U(X.borderWidth,ne,K.borderWidth),hidden:isNaN(X.data[ne])||$.data[ne].hidden,index:ne}}):[]}},onClick:function(se,q){var j,ne,$,X=q.index,Y=this.chart;for(j=0,ne=(Y.data.datasets||[]).length;j<ne;++j)($=Y.getDatasetMeta(j)).data[X]&&($.data[X].hidden=!$.data[X].hidden);Y.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(se,q){var j=q.labels[se.index],ne=": "+q.datasets[se.datasetIndex].data[se.index];return Q.isArray(j)?(j=j.slice())[0]+=ne:j+=ne,j}}}}),Oe._set("pie",Q.clone(Oe.doughnut)),Oe._set("pie",{cutoutPercentage:0}),St.exports=function(se){se.controllers.doughnut=se.controllers.pie=se.DatasetController.extend({dataElementType:Ve.Arc,linkScales:Q.noop,getRingIndex:function(q){for(var j=0,ne=0;ne<q;++ne)this.chart.isDatasetVisible(ne)&&++j;return j},update:function(q){var j=this,ne=j.chart,$=ne.chartArea,X=ne.options,Y=X.elements.arc,W=$.right-$.left-Y.borderWidth,U=$.bottom-$.top-Y.borderWidth,K=Math.min(W,U),le={x:0,y:0},de=j.getMeta(),pe=X.cutoutPercentage,_e=X.circumference;if(_e<2*Math.PI){var ae=X.rotation%(2*Math.PI),Ge=(ae+=2*Math.PI*(ae>=Math.PI?-1:ae<-Math.PI?1:0))+_e,Re={x:Math.cos(ae),y:Math.sin(ae)},Ue={x:Math.cos(Ge),y:Math.sin(Ge)},ve=ae<=0&&Ge>=0||ae<=2*Math.PI&&2*Math.PI<=Ge,Me=ae<=.5*Math.PI&&.5*Math.PI<=Ge||ae<=2.5*Math.PI&&2.5*Math.PI<=Ge,Pe=ae<=-Math.PI&&-Math.PI<=Ge||ae<=Math.PI&&Math.PI<=Ge,ee=ae<=.5*-Math.PI&&.5*-Math.PI<=Ge||ae<=1.5*Math.PI&&1.5*Math.PI<=Ge,Se=pe/100,F={x:Pe?-1:Math.min(Re.x*(Re.x<0?1:Se),Ue.x*(Ue.x<0?1:Se)),y:ee?-1:Math.min(Re.y*(Re.y<0?1:Se),Ue.y*(Ue.y<0?1:Se))},We={x:ve?1:Math.max(Re.x*(Re.x>0?1:Se),Ue.x*(Ue.x>0?1:Se)),y:Me?1:Math.max(Re.y*(Re.y>0?1:Se),Ue.y*(Ue.y>0?1:Se))},_t={width:.5*(We.x-F.x),height:.5*(We.y-F.y)};K=Math.min(W/_t.width,U/_t.height),le={x:-.5*(We.x+F.x),y:-.5*(We.y+F.y)}}ne.borderWidth=j.getMaxBorderWidth(de.data),ne.outerRadius=Math.max((K-ne.borderWidth)/2,0),ne.innerRadius=Math.max(pe?ne.outerRadius/100*pe:0,0),ne.radiusLength=(ne.outerRadius-ne.innerRadius)/ne.getVisibleDatasetCount(),ne.offsetX=le.x*ne.outerRadius,ne.offsetY=le.y*ne.outerRadius,de.total=j.calculateTotal(),j.outerRadius=ne.outerRadius-ne.radiusLength*j.getRingIndex(j.index),j.innerRadius=Math.max(j.outerRadius-ne.radiusLength,0),Q.each(de.data,function(rt,wt){j.updateElement(rt,wt,q)})},updateElement:function(q,j,ne){var $=this,X=$.chart,Y=X.chartArea,W=X.options,U=W.animation,K=(Y.left+Y.right)/2,le=(Y.top+Y.bottom)/2,de=W.rotation,pe=W.rotation,_e=$.getDataset(),ae=ne&&U.animateRotate||q.hidden?0:$.calculateCircumference(_e.data[j])*(W.circumference/(2*Math.PI));Q.extend(q,{_datasetIndex:$.index,_index:j,_model:{x:K+X.offsetX,y:le+X.offsetY,startAngle:de,endAngle:pe,circumference:ae,outerRadius:ne&&U.animateScale?0:$.outerRadius,innerRadius:ne&&U.animateScale?0:$.innerRadius,label:(0,Q.valueAtIndexOrDefault)(_e.label,j,X.data.labels[j])}});var ve=q._model;this.removeHoverStyle(q),ne&&U.animateRotate||(ve.startAngle=0===j?W.rotation:$.getMeta().data[j-1]._model.endAngle,ve.endAngle=ve.startAngle+ve.circumference),q.pivot()},removeHoverStyle:function(q){se.DatasetController.prototype.removeHoverStyle.call(this,q,this.chart.options.elements.arc)},calculateTotal:function(){var q,j=this.getDataset(),ne=this.getMeta(),$=0;return Q.each(ne.data,function(X,Y){q=j.data[Y],isNaN(q)||X.hidden||($+=Math.abs(q))}),$},calculateCircumference:function(q){var j=this.getMeta().total;return j>0&&!isNaN(q)?2*Math.PI*(q/j):0},getMaxBorderWidth:function(q){for(var j,ne,$=0,X=this.index,Y=q.length,W=0;W<Y;W++)$=(ne=q[W]._chart?q[W]._chart.config.data.datasets[X].hoverBorderWidth:0)>($=(j=q[W]._model?q[W]._model.borderWidth:0)>$?j:$)?ne:$;return $}})}},{25:25,40:40,45:45}],18:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(40),Q=Xe(45);Oe._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}}),St.exports=function(se){function q(j,ne){return Q.valueOrDefault(j.showLine,ne.showLines)}se.controllers.line=se.DatasetController.extend({datasetElementType:Ve.Line,dataElementType:Ve.Point,update:function(j){var ne,$,X,Y=this,W=Y.getMeta(),U=W.dataset,K=W.data||[],le=Y.chart.options,de=le.elements.line,pe=Y.getScaleForId(W.yAxisID),_e=Y.getDataset(),ae=q(_e,le);for(ae&&(X=U.custom||{},void 0!==_e.tension&&void 0===_e.lineTension&&(_e.lineTension=_e.tension),U._scale=pe,U._datasetIndex=Y.index,U._children=K,U._model={spanGaps:_e.spanGaps?_e.spanGaps:le.spanGaps,tension:X.tension?X.tension:Q.valueOrDefault(_e.lineTension,de.tension),backgroundColor:X.backgroundColor?X.backgroundColor:_e.backgroundColor||de.backgroundColor,borderWidth:X.borderWidth?X.borderWidth:_e.borderWidth||de.borderWidth,borderColor:X.borderColor?X.borderColor:_e.borderColor||de.borderColor,borderCapStyle:X.borderCapStyle?X.borderCapStyle:_e.borderCapStyle||de.borderCapStyle,borderDash:X.borderDash?X.borderDash:_e.borderDash||de.borderDash,borderDashOffset:X.borderDashOffset?X.borderDashOffset:_e.borderDashOffset||de.borderDashOffset,borderJoinStyle:X.borderJoinStyle?X.borderJoinStyle:_e.borderJoinStyle||de.borderJoinStyle,fill:X.fill?X.fill:void 0!==_e.fill?_e.fill:de.fill,steppedLine:X.steppedLine?X.steppedLine:Q.valueOrDefault(_e.steppedLine,de.stepped),cubicInterpolationMode:X.cubicInterpolationMode?X.cubicInterpolationMode:Q.valueOrDefault(_e.cubicInterpolationMode,de.cubicInterpolationMode)},U.pivot()),ne=0,$=K.length;ne<$;++ne)Y.updateElement(K[ne],ne,j);for(ae&&0!==U._model.tension&&Y.updateBezierControlPoints(),ne=0,$=K.length;ne<$;++ne)K[ne].pivot()},getPointBackgroundColor:function(j,ne){var $=this.chart.options.elements.point.backgroundColor,X=this.getDataset(),Y=j.custom||{};return Y.backgroundColor?$=Y.backgroundColor:X.pointBackgroundColor?$=Q.valueAtIndexOrDefault(X.pointBackgroundColor,ne,$):X.backgroundColor&&($=X.backgroundColor),$},getPointBorderColor:function(j,ne){var $=this.chart.options.elements.point.borderColor,X=this.getDataset(),Y=j.custom||{};return Y.borderColor?$=Y.borderColor:X.pointBorderColor?$=Q.valueAtIndexOrDefault(X.pointBorderColor,ne,$):X.borderColor&&($=X.borderColor),$},getPointBorderWidth:function(j,ne){var $=this.chart.options.elements.point.borderWidth,X=this.getDataset(),Y=j.custom||{};return isNaN(Y.borderWidth)?!isNaN(X.pointBorderWidth)||Q.isArray(X.pointBorderWidth)?$=Q.valueAtIndexOrDefault(X.pointBorderWidth,ne,$):isNaN(X.borderWidth)||($=X.borderWidth):$=Y.borderWidth,$},updateElement:function(j,ne,$){var X,Y,W=this,U=W.getMeta(),K=j.custom||{},le=W.getDataset(),de=W.index,pe=le.data[ne],_e=W.getScaleForId(U.yAxisID),ae=W.getScaleForId(U.xAxisID),Ge=W.chart.options.elements.point;void 0!==le.radius&&void 0===le.pointRadius&&(le.pointRadius=le.radius),void 0!==le.hitRadius&&void 0===le.pointHitRadius&&(le.pointHitRadius=le.hitRadius),X=ae.getPixelForValue("object"==typeof pe?pe:NaN,ne,de),Y=$?_e.getBasePixel():W.calculatePointY(pe,ne,de),j._xScale=ae,j._yScale=_e,j._datasetIndex=de,j._index=ne,j._model={x:X,y:Y,skip:K.skip||isNaN(X)||isNaN(Y),radius:K.radius||Q.valueAtIndexOrDefault(le.pointRadius,ne,Ge.radius),pointStyle:K.pointStyle||Q.valueAtIndexOrDefault(le.pointStyle,ne,Ge.pointStyle),backgroundColor:W.getPointBackgroundColor(j,ne),borderColor:W.getPointBorderColor(j,ne),borderWidth:W.getPointBorderWidth(j,ne),tension:U.dataset._model?U.dataset._model.tension:0,steppedLine:!!U.dataset._model&&U.dataset._model.steppedLine,hitRadius:K.hitRadius||Q.valueAtIndexOrDefault(le.pointHitRadius,ne,Ge.hitRadius)}},calculatePointY:function(j,ne,$){var X,Y,W,U=this,K=U.chart,le=U.getMeta(),de=U.getScaleForId(le.yAxisID),pe=0,_e=0;if(de.options.stacked){for(X=0;X<$;X++)if(Y=K.data.datasets[X],"line"===(W=K.getDatasetMeta(X)).type&&W.yAxisID===de.id&&K.isDatasetVisible(X)){var ae=Number(de.getRightValue(Y.data[ne]));ae<0?_e+=ae||0:pe+=ae||0}var Ge=Number(de.getRightValue(j));return de.getPixelForValue(Ge<0?_e+Ge:pe+Ge)}return de.getPixelForValue(j)},updateBezierControlPoints:function(){function j(de,pe,_e){return Math.max(Math.min(de,_e),pe)}var ne,$,X,Y,W=this,U=W.getMeta(),K=W.chart.chartArea,le=U.data||[];if(U.dataset._model.spanGaps&&(le=le.filter(function(de){return!de._model.skip})),"monotone"===U.dataset._model.cubicInterpolationMode)Q.splineCurveMonotone(le);else for(ne=0,$=le.length;ne<$;++ne)X=le[ne]._model,Y=Q.splineCurve(Q.previousItem(le,ne)._model,X,Q.nextItem(le,ne)._model,U.dataset._model.tension),X.controlPointPreviousX=Y.previous.x,X.controlPointPreviousY=Y.previous.y,X.controlPointNextX=Y.next.x,X.controlPointNextY=Y.next.y;if(W.chart.options.elements.line.capBezierPoints)for(ne=0,$=le.length;ne<$;++ne)(X=le[ne]._model).controlPointPreviousX=j(X.controlPointPreviousX,K.left,K.right),X.controlPointPreviousY=j(X.controlPointPreviousY,K.top,K.bottom),X.controlPointNextX=j(X.controlPointNextX,K.left,K.right),X.controlPointNextY=j(X.controlPointNextY,K.top,K.bottom)},draw:function(){var j=this,ne=j.chart,$=j.getMeta(),X=$.data||[],Y=ne.chartArea,W=X.length,U=0;for(Q.canvas.clipArea(ne.ctx,Y),q(j.getDataset(),ne.options)&&$.dataset.draw(),Q.canvas.unclipArea(ne.ctx);U<W;++U)X[U].draw(Y)},setHoverStyle:function(j){var ne=this.chart.data.datasets[j._datasetIndex],$=j._index,X=j.custom||{},Y=j._model;Y.radius=X.hoverRadius||Q.valueAtIndexOrDefault(ne.pointHoverRadius,$,this.chart.options.elements.point.hoverRadius),Y.backgroundColor=X.hoverBackgroundColor||Q.valueAtIndexOrDefault(ne.pointHoverBackgroundColor,$,Q.getHoverColor(Y.backgroundColor)),Y.borderColor=X.hoverBorderColor||Q.valueAtIndexOrDefault(ne.pointHoverBorderColor,$,Q.getHoverColor(Y.borderColor)),Y.borderWidth=X.hoverBorderWidth||Q.valueAtIndexOrDefault(ne.pointHoverBorderWidth,$,Y.borderWidth)},removeHoverStyle:function(j){var ne=this,$=ne.chart.data.datasets[j._datasetIndex],X=j._index,Y=j.custom||{},W=j._model;void 0!==$.radius&&void 0===$.pointRadius&&($.pointRadius=$.radius),W.radius=Y.radius||Q.valueAtIndexOrDefault($.pointRadius,X,ne.chart.options.elements.point.radius),W.backgroundColor=ne.getPointBackgroundColor(j,X),W.borderColor=ne.getPointBorderColor(j,X),W.borderWidth=ne.getPointBorderWidth(j,X)}})}},{25:25,40:40,45:45}],19:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(40),Q=Xe(45);Oe._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(se){var q=[];q.push('<ul class="'+se.id+'-legend">');var j=se.data,ne=j.datasets,$=j.labels;if(ne.length)for(var X=0;X<ne[0].data.length;++X)q.push('<li><span style="background-color:'+ne[0].backgroundColor[X]+'"></span>'),$[X]&&q.push($[X]),q.push("</li>");return q.push("</ul>"),q.join("")},legend:{labels:{generateLabels:function(se){var q=se.data;return q.labels.length&&q.datasets.length?q.labels.map(function(j,ne){var $=se.getDatasetMeta(0),X=q.datasets[0],Y=$.data[ne].custom||{},W=Q.valueAtIndexOrDefault,U=se.options.elements.arc;return{text:j,fillStyle:Y.backgroundColor?Y.backgroundColor:W(X.backgroundColor,ne,U.backgroundColor),strokeStyle:Y.borderColor?Y.borderColor:W(X.borderColor,ne,U.borderColor),lineWidth:Y.borderWidth?Y.borderWidth:W(X.borderWidth,ne,U.borderWidth),hidden:isNaN(X.data[ne])||$.data[ne].hidden,index:ne}}):[]}},onClick:function(se,q){var j,ne,$,X=q.index,Y=this.chart;for(j=0,ne=(Y.data.datasets||[]).length;j<ne;++j)($=Y.getDatasetMeta(j)).data[X].hidden=!$.data[X].hidden;Y.update()}},tooltips:{callbacks:{title:function(){return""},label:function(se,q){return q.labels[se.index]+": "+se.yLabel}}}}),St.exports=function(se){se.controllers.polarArea=se.DatasetController.extend({dataElementType:Ve.Arc,linkScales:Q.noop,update:function(q){var j=this,ne=j.chart,$=ne.chartArea,X=j.getMeta(),Y=ne.options,W=Y.elements.arc,U=Math.min($.right-$.left,$.bottom-$.top);ne.outerRadius=Math.max((U-W.borderWidth/2)/2,0),ne.innerRadius=Math.max(Y.cutoutPercentage?ne.outerRadius/100*Y.cutoutPercentage:1,0),ne.radiusLength=(ne.outerRadius-ne.innerRadius)/ne.getVisibleDatasetCount(),j.outerRadius=ne.outerRadius-ne.radiusLength*j.index,j.innerRadius=j.outerRadius-ne.radiusLength,X.count=j.countVisibleElements(),Q.each(X.data,function(K,le){j.updateElement(K,le,q)})},updateElement:function(q,j,ne){for(var $=this,X=$.chart,Y=$.getDataset(),W=X.options,U=W.animation,K=X.scale,le=X.data.labels,de=$.calculateCircumference(Y.data[j]),pe=K.xCenter,_e=K.yCenter,ae=0,Ge=$.getMeta(),Re=0;Re<j;++Re)isNaN(Y.data[Re])||Ge.data[Re].hidden||++ae;var Ue=W.startAngle,ve=q.hidden?0:K.getDistanceFromCenterForValue(Y.data[j]),Me=Ue+de*ae,Pe=Me+(q.hidden?0:de),ee=U.animateScale?0:K.getDistanceFromCenterForValue(Y.data[j]);Q.extend(q,{_datasetIndex:$.index,_index:j,_scale:K,_model:{x:pe,y:_e,innerRadius:0,outerRadius:ne?ee:ve,startAngle:ne&&U.animateRotate?Ue:Me,endAngle:ne&&U.animateRotate?Ue:Pe,label:Q.valueAtIndexOrDefault(le,j,le[j])}}),$.removeHoverStyle(q),q.pivot()},removeHoverStyle:function(q){se.DatasetController.prototype.removeHoverStyle.call(this,q,this.chart.options.elements.arc)},countVisibleElements:function(){var q=this.getDataset(),j=this.getMeta(),ne=0;return Q.each(j.data,function($,X){isNaN(q.data[X])||$.hidden||ne++}),ne},calculateCircumference:function(q){var j=this.getMeta().count;return j>0&&!isNaN(q)?2*Math.PI/j:0}})}},{25:25,40:40,45:45}],20:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(40),Q=Xe(45);Oe._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}}),St.exports=function(se){se.controllers.radar=se.DatasetController.extend({datasetElementType:Ve.Line,dataElementType:Ve.Point,linkScales:Q.noop,update:function(q){var j=this,ne=j.getMeta(),X=ne.data,Y=ne.dataset.custom||{},W=j.getDataset(),U=j.chart.options.elements.line,K=j.chart.scale;void 0!==W.tension&&void 0===W.lineTension&&(W.lineTension=W.tension),Q.extend(ne.dataset,{_datasetIndex:j.index,_scale:K,_children:X,_loop:!0,_model:{tension:Y.tension?Y.tension:Q.valueOrDefault(W.lineTension,U.tension),backgroundColor:Y.backgroundColor?Y.backgroundColor:W.backgroundColor||U.backgroundColor,borderWidth:Y.borderWidth?Y.borderWidth:W.borderWidth||U.borderWidth,borderColor:Y.borderColor?Y.borderColor:W.borderColor||U.borderColor,fill:Y.fill?Y.fill:void 0!==W.fill?W.fill:U.fill,borderCapStyle:Y.borderCapStyle?Y.borderCapStyle:W.borderCapStyle||U.borderCapStyle,borderDash:Y.borderDash?Y.borderDash:W.borderDash||U.borderDash,borderDashOffset:Y.borderDashOffset?Y.borderDashOffset:W.borderDashOffset||U.borderDashOffset,borderJoinStyle:Y.borderJoinStyle?Y.borderJoinStyle:W.borderJoinStyle||U.borderJoinStyle}}),ne.dataset.pivot(),Q.each(X,function(le,de){j.updateElement(le,de,q)},j),j.updateBezierControlPoints()},updateElement:function(q,j,ne){var $=this,X=q.custom||{},Y=$.getDataset(),W=$.chart.scale,U=$.chart.options.elements.point,K=W.getPointPositionForValue(j,Y.data[j]);void 0!==Y.radius&&void 0===Y.pointRadius&&(Y.pointRadius=Y.radius),void 0!==Y.hitRadius&&void 0===Y.pointHitRadius&&(Y.pointHitRadius=Y.hitRadius),Q.extend(q,{_datasetIndex:$.index,_index:j,_scale:W,_model:{x:ne?W.xCenter:K.x,y:ne?W.yCenter:K.y,tension:X.tension?X.tension:Q.valueOrDefault(Y.lineTension,$.chart.options.elements.line.tension),radius:X.radius?X.radius:Q.valueAtIndexOrDefault(Y.pointRadius,j,U.radius),backgroundColor:X.backgroundColor?X.backgroundColor:Q.valueAtIndexOrDefault(Y.pointBackgroundColor,j,U.backgroundColor),borderColor:X.borderColor?X.borderColor:Q.valueAtIndexOrDefault(Y.pointBorderColor,j,U.borderColor),borderWidth:X.borderWidth?X.borderWidth:Q.valueAtIndexOrDefault(Y.pointBorderWidth,j,U.borderWidth),pointStyle:X.pointStyle?X.pointStyle:Q.valueAtIndexOrDefault(Y.pointStyle,j,U.pointStyle),hitRadius:X.hitRadius?X.hitRadius:Q.valueAtIndexOrDefault(Y.pointHitRadius,j,U.hitRadius)}}),q._model.skip=X.skip?X.skip:isNaN(q._model.x)||isNaN(q._model.y)},updateBezierControlPoints:function(){var q=this.chart.chartArea,j=this.getMeta();Q.each(j.data,function(ne,$){var X=ne._model,Y=Q.splineCurve(Q.previousItem(j.data,$,!0)._model,X,Q.nextItem(j.data,$,!0)._model,X.tension);X.controlPointPreviousX=Math.max(Math.min(Y.previous.x,q.right),q.left),X.controlPointPreviousY=Math.max(Math.min(Y.previous.y,q.bottom),q.top),X.controlPointNextX=Math.max(Math.min(Y.next.x,q.right),q.left),X.controlPointNextY=Math.max(Math.min(Y.next.y,q.bottom),q.top),ne.pivot()})},setHoverStyle:function(q){var j=this.chart.data.datasets[q._datasetIndex],ne=q.custom||{},$=q._index,X=q._model;X.radius=ne.hoverRadius?ne.hoverRadius:Q.valueAtIndexOrDefault(j.pointHoverRadius,$,this.chart.options.elements.point.hoverRadius),X.backgroundColor=ne.hoverBackgroundColor?ne.hoverBackgroundColor:Q.valueAtIndexOrDefault(j.pointHoverBackgroundColor,$,Q.getHoverColor(X.backgroundColor)),X.borderColor=ne.hoverBorderColor?ne.hoverBorderColor:Q.valueAtIndexOrDefault(j.pointHoverBorderColor,$,Q.getHoverColor(X.borderColor)),X.borderWidth=ne.hoverBorderWidth?ne.hoverBorderWidth:Q.valueAtIndexOrDefault(j.pointHoverBorderWidth,$,X.borderWidth)},removeHoverStyle:function(q){var j=this.chart.data.datasets[q._datasetIndex],ne=q.custom||{},$=q._index,X=q._model,Y=this.chart.options.elements.point;X.radius=ne.radius?ne.radius:Q.valueAtIndexOrDefault(j.pointRadius,$,Y.radius),X.backgroundColor=ne.backgroundColor?ne.backgroundColor:Q.valueAtIndexOrDefault(j.pointBackgroundColor,$,Y.backgroundColor),X.borderColor=ne.borderColor?ne.borderColor:Q.valueAtIndexOrDefault(j.pointBorderColor,$,Y.borderColor),X.borderWidth=ne.borderWidth?ne.borderWidth:Q.valueAtIndexOrDefault(j.pointBorderWidth,$,Y.borderWidth)}})}},{25:25,40:40,45:45}],21:[function(Xe,St,wn){"use strict";Xe(25)._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(Oe){return"("+Oe.xLabel+", "+Oe.yLabel+")"}}}}),St.exports=function(Oe){Oe.controllers.scatter=Oe.controllers.line}},{25:25}],22:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(26),Q=Xe(45);Oe._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:Q.noop,onComplete:Q.noop}}),St.exports=function(se){se.Animation=Ve.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),se.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(q,j,ne,$){var X,Y,W=this.animations;for(j.chart=q,$||(q.animating=!0),X=0,Y=W.length;X<Y;++X)if(W[X].chart===q)return void(W[X]=j);W.push(j),1===W.length&&this.requestAnimationFrame()},cancelAnimation:function(q){var j=Q.findIndex(this.animations,function(ne){return ne.chart===q});-1!==j&&(this.animations.splice(j,1),q.animating=!1)},requestAnimationFrame:function(){var q=this;null===q.request&&(q.request=Q.requestAnimFrame.call(window,function(){q.request=null,q.startDigest()}))},startDigest:function(){var q=this,j=Date.now(),ne=0;q.dropFrames>1&&(ne=Math.floor(q.dropFrames),q.dropFrames=q.dropFrames%1),q.advance(1+ne);var $=Date.now();q.dropFrames+=($-j)/q.frameDuration,q.animations.length>0&&q.requestAnimationFrame()},advance:function(q){for(var j,ne,$=this.animations,X=0;X<$.length;)ne=(j=$[X]).chart,j.currentStep=(j.currentStep||0)+q,j.currentStep=Math.min(j.currentStep,j.numSteps),Q.callback(j.render,[ne,j],ne),Q.callback(j.onAnimationProgress,[j],ne),j.currentStep>=j.numSteps?(Q.callback(j.onAnimationComplete,[j],ne),ne.animating=!1,$.splice(X,1)):++X}},Object.defineProperty(se.Animation.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(se.Animation.prototype,"chartInstance",{get:function(){return this.chart},set:function(q){this.chart=q}})}},{25:25,26:26,45:45}],23:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(45),Q=Xe(28),se=Xe(48);St.exports=function(q){function $(Y){return"top"===Y||"bottom"===Y}var X=q.plugins;q.types={},q.instances={},q.controllers={},Ve.extend(q.prototype,{construct:function(Y,W){var U=this;W=function j(Y){var W=(Y=Y||{}).data=Y.data||{};return W.datasets=W.datasets||[],W.labels=W.labels||[],Y.options=Ve.configMerge(Oe.global,Oe[Y.type],Y.options||{}),Y}(W);var K=se.acquireContext(Y,W),le=K&&K.canvas,de=le&&le.height,pe=le&&le.width;U.id=Ve.uid(),U.ctx=K,U.canvas=le,U.config=W,U.width=pe,U.height=de,U.aspectRatio=de?pe/de:null,U.options=W.options,U._bufferedRender=!1,U.chart=U,U.controller=U,q.instances[U.id]=U,Object.defineProperty(U,"data",{get:function(){return U.config.data},set:function(_e){U.config.data=_e}}),K&&le?(U.initialize(),U.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var Y=this;return X.notify(Y,"beforeInit"),Ve.retinaScale(Y,Y.options.devicePixelRatio),Y.bindEvents(),Y.options.responsive&&Y.resize(!0),Y.ensureScalesHaveIDs(),Y.buildScales(),Y.initToolTip(),X.notify(Y,"afterInit"),Y},clear:function(){return Ve.canvas.clear(this),this},stop:function(){return q.animationService.cancelAnimation(this),this},resize:function(Y){var W=this,U=W.options,K=W.canvas,le=U.maintainAspectRatio&&W.aspectRatio||null,de=Math.max(0,Math.floor(Ve.getMaximumWidth(K))),pe=Math.max(0,Math.floor(le?de/le:Ve.getMaximumHeight(K)));if((W.width!==de||W.height!==pe)&&(K.width=W.width=de,K.height=W.height=pe,K.style.width=de+"px",K.style.height=pe+"px",Ve.retinaScale(W,U.devicePixelRatio),!Y)){var _e={width:de,height:pe};X.notify(W,"resize",[_e]),W.options.onResize&&W.options.onResize(W,_e),W.stop(),W.update(W.options.responsiveAnimationDuration)}},ensureScalesHaveIDs:function(){var Y=this.options,W=Y.scales||{},U=Y.scale;Ve.each(W.xAxes,function(K,le){K.id=K.id||"x-axis-"+le}),Ve.each(W.yAxes,function(K,le){K.id=K.id||"y-axis-"+le}),U&&(U.id=U.id||"scale")},buildScales:function(){var Y=this,W=Y.options,U=Y.scales={},K=[];W.scales&&(K=K.concat((W.scales.xAxes||[]).map(function(le){return{options:le,dtype:"category",dposition:"bottom"}}),(W.scales.yAxes||[]).map(function(le){return{options:le,dtype:"linear",dposition:"left"}}))),W.scale&&K.push({options:W.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),Ve.each(K,function(le){var de=le.options,pe=Ve.valueOrDefault(de.type,le.dtype),_e=q.scaleService.getScaleConstructor(pe);if(_e){$(de.position)!==$(le.dposition)&&(de.position=le.dposition);var ae=new _e({id:de.id,options:de,ctx:Y.ctx,chart:Y});U[ae.id]=ae,ae.mergeTicksOptions(),le.isDefault&&(Y.scale=ae)}}),q.scaleService.addScalesToLayout(this)},buildOrUpdateControllers:function(){var Y=this,W=[],U=[];return Ve.each(Y.data.datasets,function(K,le){var de=Y.getDatasetMeta(le),pe=K.type||Y.config.type;if(de.type&&de.type!==pe&&(Y.destroyDatasetMeta(le),de=Y.getDatasetMeta(le)),de.type=pe,W.push(de.type),de.controller)de.controller.updateIndex(le);else{var _e=q.controllers[de.type];if(void 0===_e)throw new Error('"'+de.type+'" is not a chart type.');de.controller=new _e(Y,le),U.push(de.controller)}},Y),U},resetElements:function(){var Y=this;Ve.each(Y.data.datasets,function(W,U){Y.getDatasetMeta(U).controller.reset()},Y)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(Y){var W=this;if(Y&&"object"==typeof Y||(Y={duration:Y,lazy:arguments[1]}),function ne(Y){var W=Y.options;W.scale?Y.scale.options=W.scale:W.scales&&W.scales.xAxes.concat(W.scales.yAxes).forEach(function(U){Y.scales[U.id].options=U}),Y.tooltip._options=W.tooltips}(W),!1!==X.notify(W,"beforeUpdate")){W.tooltip._data=W.data;var U=W.buildOrUpdateControllers();Ve.each(W.data.datasets,function(K,le){W.getDatasetMeta(le).controller.buildOrUpdateElements()},W),W.updateLayout(),Ve.each(U,function(K){K.reset()}),W.updateDatasets(),W.tooltip.initialize(),W.lastActive=[],X.notify(W,"afterUpdate"),W._bufferedRender?W._bufferedRequest={duration:Y.duration,easing:Y.easing,lazy:Y.lazy}:W.render(Y)}},updateLayout:function(){var Y=this;!1!==X.notify(Y,"beforeLayout")&&(q.layoutService.update(this,this.width,this.height),X.notify(Y,"afterScaleUpdate"),X.notify(Y,"afterLayout"))},updateDatasets:function(){var Y=this;if(!1!==X.notify(Y,"beforeDatasetsUpdate")){for(var W=0,U=Y.data.datasets.length;W<U;++W)Y.updateDataset(W);X.notify(Y,"afterDatasetsUpdate")}},updateDataset:function(Y){var W=this,U=W.getDatasetMeta(Y),K={meta:U,index:Y};!1!==X.notify(W,"beforeDatasetUpdate",[K])&&(U.controller.update(),X.notify(W,"afterDatasetUpdate",[K]))},render:function(Y){var W=this;Y&&"object"==typeof Y||(Y={duration:Y,lazy:arguments[1]});var U=Y.duration,K=Y.lazy;if(!1!==X.notify(W,"beforeRender")){var le=W.options.animation,de=function(_e){X.notify(W,"afterRender"),Ve.callback(le&&le.onComplete,[_e],W)};if(le&&(void 0!==U&&0!==U||void 0===U&&0!==le.duration)){var pe=new q.Animation({numSteps:(U||le.duration)/16.66,easing:Y.easing||le.easing,render:function(_e,ae){var Re=ae.currentStep,Ue=Re/ae.numSteps;_e.draw((0,Ve.easing.effects[ae.easing])(Ue),Ue,Re)},onAnimationProgress:le.onProgress,onAnimationComplete:de});q.animationService.addAnimation(W,pe,U,K)}else W.draw(),de(new q.Animation({numSteps:0,chart:W}));return W}},draw:function(Y){var W=this;W.clear(),Ve.isNullOrUndef(Y)&&(Y=1),W.transition(Y),!1!==X.notify(W,"beforeDraw",[Y])&&(Ve.each(W.boxes,function(U){U.draw(W.chartArea)},W),W.scale&&W.scale.draw(),W.drawDatasets(Y),W._drawTooltip(Y),X.notify(W,"afterDraw",[Y]))},transition:function(Y){for(var W=this,U=0,K=(W.data.datasets||[]).length;U<K;++U)W.isDatasetVisible(U)&&W.getDatasetMeta(U).controller.transition(Y);W.tooltip.transition(Y)},drawDatasets:function(Y){var W=this;if(!1!==X.notify(W,"beforeDatasetsDraw",[Y])){for(var U=(W.data.datasets||[]).length-1;U>=0;--U)W.isDatasetVisible(U)&&W.drawDataset(U,Y);X.notify(W,"afterDatasetsDraw",[Y])}},drawDataset:function(Y,W){var U=this,K=U.getDatasetMeta(Y),le={meta:K,index:Y,easingValue:W};!1!==X.notify(U,"beforeDatasetDraw",[le])&&(K.controller.draw(W),X.notify(U,"afterDatasetDraw",[le]))},_drawTooltip:function(Y){var W=this,U=W.tooltip,K={tooltip:U,easingValue:Y};!1!==X.notify(W,"beforeTooltipDraw",[K])&&(U.draw(),X.notify(W,"afterTooltipDraw",[K]))},getElementAtEvent:function(Y){return Q.modes.single(this,Y)},getElementsAtEvent:function(Y){return Q.modes.label(this,Y,{intersect:!0})},getElementsAtXAxis:function(Y){return Q.modes["x-axis"](this,Y,{intersect:!0})},getElementsAtEventForMode:function(Y,W,U){var K=Q.modes[W];return"function"==typeof K?K(this,Y,U):[]},getDatasetAtEvent:function(Y){return Q.modes.dataset(this,Y,{intersect:!0})},getDatasetMeta:function(Y){var W=this,U=W.data.datasets[Y];U._meta||(U._meta={});var K=U._meta[W.id];return K||(K=U._meta[W.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),K},getVisibleDatasetCount:function(){for(var Y=0,W=0,U=this.data.datasets.length;W<U;++W)this.isDatasetVisible(W)&&Y++;return Y},isDatasetVisible:function(Y){var W=this.getDatasetMeta(Y);return"boolean"==typeof W.hidden?!W.hidden:!this.data.datasets[Y].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(Y){var W=this.id,U=this.data.datasets[Y],K=U._meta&&U._meta[W];K&&(K.controller.destroy(),delete U._meta[W])},destroy:function(){var Y,W,U=this,K=U.canvas;for(U.stop(),Y=0,W=U.data.datasets.length;Y<W;++Y)U.destroyDatasetMeta(Y);K&&(U.unbindEvents(),Ve.canvas.clear(U),se.releaseContext(U.ctx),U.canvas=null,U.ctx=null),X.notify(U,"destroy"),delete q.instances[U.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var Y=this;Y.tooltip=new q.Tooltip({_chart:Y,_chartInstance:Y,_data:Y.data,_options:Y.options.tooltips},Y)},bindEvents:function(){var Y=this,W=Y._listeners={},U=function(){Y.eventHandler.apply(Y,arguments)};Ve.each(Y.options.events,function(K){se.addEventListener(Y,K,U),W[K]=U}),Y.options.responsive&&(U=function(){Y.resize()},se.addEventListener(Y,"resize",U),W.resize=U)},unbindEvents:function(){var Y=this,W=Y._listeners;W&&(delete Y._listeners,Ve.each(W,function(U,K){se.removeEventListener(Y,K,U)}))},updateHoverStyle:function(Y,W,U){var K,le,de,pe=U?"setHoverStyle":"removeHoverStyle";for(le=0,de=Y.length;le<de;++le)(K=Y[le])&&this.getDatasetMeta(K._datasetIndex).controller[pe](K)},eventHandler:function(Y){var W=this,U=W.tooltip;if(!1!==X.notify(W,"beforeEvent",[Y])){W._bufferedRender=!0,W._bufferedRequest=null;var K=W.handleEvent(Y);K|=U&&U.handleEvent(Y),X.notify(W,"afterEvent",[Y]);var le=W._bufferedRequest;return le?W.render(le):K&&!W.animating&&(W.stop(),W.render(W.options.hover.animationDuration,!0)),W._bufferedRender=!1,W._bufferedRequest=null,W}},handleEvent:function(Y){var le,W=this,U=W.options||{},K=U.hover;return W.lastActive=W.lastActive||[],W.active="mouseout"===Y.type?[]:W.getElementsAtEventForMode(Y,K.mode,K),Ve.callback(U.onHover||U.hover.onHover,[Y.native,W.active],W),"mouseup"!==Y.type&&"click"!==Y.type||U.onClick&&U.onClick.call(W,Y.native,W.active),W.lastActive.length&&W.updateHoverStyle(W.lastActive,K.mode,!1),W.active.length&&K.mode&&W.updateHoverStyle(W.active,K.mode,!0),le=!Ve.arrayEquals(W.active,W.lastActive),W.lastActive=W.active,le}}),q.Controller=q}},{25:25,28:28,45:45,48:48}],24:[function(Xe,St,wn){"use strict";var Oe=Xe(45);St.exports=function(Ve){function se(j,ne){var $=j._chartjs;if($){var X=$.listeners,Y=X.indexOf(ne);-1!==Y&&X.splice(Y,1),X.length>0||(q.forEach(function(W){delete j[W]}),delete j._chartjs)}}var q=["push","pop","shift","splice","unshift"];Ve.DatasetController=function(j,ne){this.initialize(j,ne)},Oe.extend(Ve.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(j,ne){var $=this;$.chart=j,$.index=ne,$.linkScales(),$.addElements()},updateIndex:function(j){this.index=j},linkScales:function(){var j=this,ne=j.getMeta(),$=j.getDataset();null===ne.xAxisID&&(ne.xAxisID=$.xAxisID||j.chart.options.scales.xAxes[0].id),null===ne.yAxisID&&(ne.yAxisID=$.yAxisID||j.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(j){return this.chart.scales[j]},reset:function(){this.update(!0)},destroy:function(){this._data&&se(this._data,this)},createMetaDataset:function(){var j=this,ne=j.datasetElementType;return ne&&new ne({_chart:j.chart,_datasetIndex:j.index})},createMetaData:function(j){var $=this.dataElementType;return $&&new $({_chart:this.chart,_datasetIndex:this.index,_index:j})},addElements:function(){var j,ne,$=this,X=$.getMeta(),Y=$.getDataset().data||[],W=X.data;for(j=0,ne=Y.length;j<ne;++j)W[j]=W[j]||$.createMetaData(j);X.dataset=X.dataset||$.createMetaDataset()},addElementAndReset:function(j){var ne=this.createMetaData(j);this.getMeta().data.splice(j,0,ne),this.updateElement(ne,j,!0)},buildOrUpdateElements:function(){var j=this,ne=j.getDataset(),$=ne.data||(ne.data=[]);j._data!==$&&(j._data&&se(j._data,j),function Q(j,ne){j._chartjs?j._chartjs.listeners.push(ne):(Object.defineProperty(j,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[ne]}}),q.forEach(function($){var X="onData"+$.charAt(0).toUpperCase()+$.slice(1),Y=j[$];Object.defineProperty(j,$,{configurable:!0,enumerable:!1,value:function(){var W=Array.prototype.slice.call(arguments),U=Y.apply(this,W);return Oe.each(j._chartjs.listeners,function(K){"function"==typeof K[X]&&K[X].apply(K,W)}),U}})}))}($,j),j._data=$),j.resyncElements()},update:Oe.noop,transition:function(j){for(var ne=this.getMeta(),$=ne.data||[],X=$.length,Y=0;Y<X;++Y)$[Y].transition(j);ne.dataset&&ne.dataset.transition(j)},draw:function(){var j=this.getMeta(),ne=j.data||[],$=ne.length,X=0;for(j.dataset&&j.dataset.draw();X<$;++X)ne[X].draw()},removeHoverStyle:function(j,ne){var $=this.chart.data.datasets[j._datasetIndex],X=j._index,Y=j.custom||{},W=Oe.valueAtIndexOrDefault,U=j._model;U.backgroundColor=Y.backgroundColor?Y.backgroundColor:W($.backgroundColor,X,ne.backgroundColor),U.borderColor=Y.borderColor?Y.borderColor:W($.borderColor,X,ne.borderColor),U.borderWidth=Y.borderWidth?Y.borderWidth:W($.borderWidth,X,ne.borderWidth)},setHoverStyle:function(j){var ne=this.chart.data.datasets[j._datasetIndex],$=j._index,X=j.custom||{},Y=Oe.valueAtIndexOrDefault,W=Oe.getHoverColor,U=j._model;U.backgroundColor=X.hoverBackgroundColor?X.hoverBackgroundColor:Y(ne.hoverBackgroundColor,$,W(U.backgroundColor)),U.borderColor=X.hoverBorderColor?X.hoverBorderColor:Y(ne.hoverBorderColor,$,W(U.borderColor)),U.borderWidth=X.hoverBorderWidth?X.hoverBorderWidth:Y(ne.hoverBorderWidth,$,U.borderWidth)},resyncElements:function(){var j=this,ne=j.getMeta(),$=j.getDataset().data,X=ne.data.length,Y=$.length;Y<X?ne.data.splice(Y,X-Y):Y>X&&j.insertElements(X,Y-X)},insertElements:function(j,ne){for(var $=0;$<ne;++$)this.addElementAndReset(j+$)},onDataPush:function(){this.insertElements(this.getDataset().data.length-1,arguments.length)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(j,ne){this.getMeta().data.splice(j,ne),this.insertElements(j,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Ve.DatasetController.extend=Oe.inherits}},{45:45}],25:[function(Xe,St,wn){"use strict";var Oe=Xe(45);St.exports={_set:function(Ve,Q){return Oe.merge(this[Ve]||(this[Ve]={}),Q)}}},{45:45}],26:[function(Xe,St,wn){"use strict";var Ve=Xe(3),Q=Xe(45),se=function(q){Q.extend(this,q),this.initialize.apply(this,arguments)};Q.extend(se.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var q=this;return q._view||(q._view=Q.clone(q._model)),q._start={},q},transition:function(q){var j=this,ne=j._model,$=j._start,X=j._view;return ne&&1!==q?(X||(X=j._view={}),$||($=j._start={}),function Oe(q,j,ne,$){var X,Y,W,U,K,le,de,pe,_e,ae=Object.keys(ne);for(X=0,Y=ae.length;X<Y;++X)if(le=ne[W=ae[X]],j.hasOwnProperty(W)||(j[W]=le),(U=j[W])!==le&&"_"!==W[0]){if(q.hasOwnProperty(W)||(q[W]=U),(de=typeof le)==typeof(K=q[W]))if("string"===de){if((pe=Ve(K)).valid&&(_e=Ve(le)).valid){j[W]=_e.mix(pe,$).rgbString();continue}}else if("number"===de&&isFinite(K)&&isFinite(le)){j[W]=K+(le-K)*$;continue}j[W]=le}}($,X,ne,q),j):(j._view=ne,j._start=null,j)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return Q.isNumber(this._model.x)&&Q.isNumber(this._model.y)}}),se.extend=Q.inherits,St.exports=se},{3:3,45:45}],27:[function(Xe,St,wn){"use strict";var Oe=Xe(3),Ve=Xe(25),Q=Xe(45);St.exports=function(se){function q($,X,Y){var W;return"string"==typeof $?(W=parseInt($,10),-1!==$.indexOf("%")&&(W=W/100*X.parentNode[Y])):W=$,W}function j($){return null!=$&&"none"!==$}function ne($,X,Y){var W=document.defaultView,U=$.parentNode,K=W.getComputedStyle($)[X],le=W.getComputedStyle(U)[X],de=j(K),pe=j(le),_e=Number.POSITIVE_INFINITY;return de||pe?Math.min(de?q(K,$,Y):_e,pe?q(le,U,Y):_e):"none"}Q.configMerge=function(){return Q.merge(Q.clone(arguments[0]),[].slice.call(arguments,1),{merger:function($,X,Y,W){var U=X[$]||{},K=Y[$];"scales"===$?X[$]=Q.scaleMerge(U,K):"scale"===$?X[$]=Q.merge(U,[se.scaleService.getScaleDefaults(K.type),K]):Q._merger($,X,Y,W)}})},Q.scaleMerge=function(){return Q.merge(Q.clone(arguments[0]),[].slice.call(arguments,1),{merger:function($,X,Y,W){if("xAxes"===$||"yAxes"===$){var U,K,le,de=Y[$].length;for(X[$]||(X[$]=[]),U=0;U<de;++U)K=Q.valueOrDefault((le=Y[$][U]).type,"xAxes"===$?"category":"linear"),U>=X[$].length&&X[$].push({}),Q.merge(X[$][U],!X[$][U].type||le.type&&le.type!==X[$][U].type?[se.scaleService.getScaleDefaults(K),le]:le)}else Q._merger($,X,Y,W)}})},Q.where=function($,X){if(Q.isArray($)&&Array.prototype.filter)return $.filter(X);var Y=[];return Q.each($,function(W){X(W)&&Y.push(W)}),Y},Q.findIndex=Array.prototype.findIndex?function($,X,Y){return $.findIndex(X,Y)}:function($,X,Y){Y=void 0===Y?$:Y;for(var W=0,U=$.length;W<U;++W)if(X.call(Y,$[W],W,$))return W;return-1},Q.findNextWhere=function($,X,Y){Q.isNullOrUndef(Y)&&(Y=-1);for(var W=Y+1;W<$.length;W++){var U=$[W];if(X(U))return U}},Q.findPreviousWhere=function($,X,Y){Q.isNullOrUndef(Y)&&(Y=$.length);for(var W=Y-1;W>=0;W--){var U=$[W];if(X(U))return U}},Q.isNumber=function($){return!isNaN(parseFloat($))&&isFinite($)},Q.almostEquals=function($,X,Y){return Math.abs($-X)<Y},Q.almostWhole=function($,X){var Y=Math.round($);return Y-X<$&&Y+X>$},Q.max=function($){return $.reduce(function(X,Y){return isNaN(Y)?X:Math.max(X,Y)},Number.NEGATIVE_INFINITY)},Q.min=function($){return $.reduce(function(X,Y){return isNaN(Y)?X:Math.min(X,Y)},Number.POSITIVE_INFINITY)},Q.sign=Math.sign?function($){return Math.sign($)}:function($){return 0==($=+$)||isNaN($)?$:$>0?1:-1},Q.log10=Math.log10?function($){return Math.log10($)}:function($){return Math.log($)/Math.LN10},Q.toRadians=function($){return $*(Math.PI/180)},Q.toDegrees=function($){return $*(180/Math.PI)},Q.getAngleFromPoint=function($,X){var Y=X.x-$.x,W=X.y-$.y,U=Math.sqrt(Y*Y+W*W),K=Math.atan2(W,Y);return K<-.5*Math.PI&&(K+=2*Math.PI),{angle:K,distance:U}},Q.distanceBetweenPoints=function($,X){return Math.sqrt(Math.pow(X.x-$.x,2)+Math.pow(X.y-$.y,2))},Q.aliasPixel=function($){return $%2==0?0:.5},Q.splineCurve=function($,X,Y,W){var U=$.skip?X:$,K=X,le=Y.skip?X:Y,de=Math.sqrt(Math.pow(K.x-U.x,2)+Math.pow(K.y-U.y,2)),pe=Math.sqrt(Math.pow(le.x-K.x,2)+Math.pow(le.y-K.y,2)),_e=de/(de+pe),ae=pe/(de+pe),Ge=W*(_e=isNaN(_e)?0:_e),Re=W*(ae=isNaN(ae)?0:ae);return{previous:{x:K.x-Ge*(le.x-U.x),y:K.y-Ge*(le.y-U.y)},next:{x:K.x+Re*(le.x-U.x),y:K.y+Re*(le.y-U.y)}}},Q.EPSILON=Number.EPSILON||1e-14,Q.splineCurveMonotone=function($){var X,Y,W,U,pe,_e,ae,Ge,Re,K=($||[]).map(function(Ue){return{model:Ue._model,deltaK:0,mK:0}}),le=K.length;for(X=0;X<le;++X)if(!(W=K[X]).model.skip){if(Y=X>0?K[X-1]:null,(U=X<le-1?K[X+1]:null)&&!U.model.skip){var de=U.model.x-W.model.x;W.deltaK=0!==de?(U.model.y-W.model.y)/de:0}W.mK=!Y||Y.model.skip?W.deltaK:!U||U.model.skip?Y.deltaK:this.sign(Y.deltaK)!==this.sign(W.deltaK)?0:(Y.deltaK+W.deltaK)/2}for(X=0;X<le-1;++X)U=K[X+1],(W=K[X]).model.skip||U.model.skip||(Q.almostEquals(W.deltaK,0,this.EPSILON)?W.mK=U.mK=0:(pe=W.mK/W.deltaK,_e=U.mK/W.deltaK,(Ge=Math.pow(pe,2)+Math.pow(_e,2))<=9||(ae=3/Math.sqrt(Ge),W.mK=pe*ae*W.deltaK,U.mK=_e*ae*W.deltaK)));for(X=0;X<le;++X)(W=K[X]).model.skip||(U=X<le-1?K[X+1]:null,(Y=X>0?K[X-1]:null)&&!Y.model.skip&&(W.model.controlPointPreviousX=W.model.x-(Re=(W.model.x-Y.model.x)/3),W.model.controlPointPreviousY=W.model.y-Re*W.mK),U&&!U.model.skip&&(W.model.controlPointNextX=W.model.x+(Re=(U.model.x-W.model.x)/3),W.model.controlPointNextY=W.model.y+Re*W.mK))},Q.nextItem=function($,X,Y){return Y?X>=$.length-1?$[0]:$[X+1]:X>=$.length-1?$[$.length-1]:$[X+1]},Q.previousItem=function($,X,Y){return Y?X<=0?$[$.length-1]:$[X-1]:X<=0?$[0]:$[X-1]},Q.niceNum=function($,X){var Y=Math.floor(Q.log10($)),W=$/Math.pow(10,Y);return(X?W<1.5?1:W<3?2:W<7?5:10:W<=1?1:W<=2?2:W<=5?5:10)*Math.pow(10,Y)},Q.requestAnimFrame=typeof window>"u"?function($){$()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function($){return window.setTimeout($,1e3/60)},Q.getRelativePosition=function($,X){var Y,W,U=$.originalEvent||$,K=$.currentTarget||$.srcElement,le=K.getBoundingClientRect(),de=U.touches;de&&de.length>0?(Y=de[0].clientX,W=de[0].clientY):(Y=U.clientX,W=U.clientY);var pe=parseFloat(Q.getStyle(K,"padding-left")),_e=parseFloat(Q.getStyle(K,"padding-top")),ae=parseFloat(Q.getStyle(K,"padding-right")),Ge=parseFloat(Q.getStyle(K,"padding-bottom")),Ue=le.bottom-le.top-_e-Ge;return{x:Y=Math.round((Y-le.left-pe)/(le.right-le.left-pe-ae)*K.width/X.currentDevicePixelRatio),y:W=Math.round((W-le.top-_e)/Ue*K.height/X.currentDevicePixelRatio)}},Q.getConstraintWidth=function($){return ne($,"max-width","clientWidth")},Q.getConstraintHeight=function($){return ne($,"max-height","clientHeight")},Q.getMaximumWidth=function($){var X=$.parentNode;if(!X)return $.clientWidth;var Y=parseInt(Q.getStyle(X,"padding-left"),10),W=parseInt(Q.getStyle(X,"padding-right"),10),U=X.clientWidth-Y-W,K=Q.getConstraintWidth($);return isNaN(K)?U:Math.min(U,K)},Q.getMaximumHeight=function($){var X=$.parentNode;if(!X)return $.clientHeight;var Y=parseInt(Q.getStyle(X,"padding-top"),10),W=parseInt(Q.getStyle(X,"padding-bottom"),10),U=X.clientHeight-Y-W,K=Q.getConstraintHeight($);return isNaN(K)?U:Math.min(U,K)},Q.getStyle=function($,X){return $.currentStyle?$.currentStyle[X]:document.defaultView.getComputedStyle($,null).getPropertyValue(X)},Q.retinaScale=function($,X){var Y=$.currentDevicePixelRatio=X||window.devicePixelRatio||1;if(1!==Y){var W=$.canvas,U=$.height,K=$.width;W.height=U*Y,W.width=K*Y,$.ctx.scale(Y,Y),W.style.height=U+"px",W.style.width=K+"px"}},Q.fontString=function($,X,Y){return X+" "+$+"px "+Y},Q.longestText=function($,X,Y,W){var U=(W=W||{}).data=W.data||{},K=W.garbageCollect=W.garbageCollect||[];W.font!==X&&(U=W.data={},K=W.garbageCollect=[],W.font=X),$.font=X;var le=0;Q.each(Y,function(_e){null!=_e&&!0!==Q.isArray(_e)?le=Q.measureText($,U,K,le,_e):Q.isArray(_e)&&Q.each(_e,function(ae){null==ae||Q.isArray(ae)||(le=Q.measureText($,U,K,le,ae))})});var de=K.length/2;if(de>Y.length){for(var pe=0;pe<de;pe++)delete U[K[pe]];K.splice(0,de)}return le},Q.measureText=function($,X,Y,W,U){var K=X[U];return K||(K=X[U]=$.measureText(U).width,Y.push(U)),K>W&&(W=K),W},Q.numberOfLabelLines=function($){var X=1;return Q.each($,function(Y){Q.isArray(Y)&&Y.length>X&&(X=Y.length)}),X},Q.color=Oe?function($){return $ instanceof CanvasGradient&&($=Ve.global.defaultColor),Oe($)}:function($){return console.error("Color.js not found!"),$},Q.getHoverColor=function($){return $ instanceof CanvasPattern?$:Q.color($).saturate(.5).darken(.1).rgbString()}}},{25:25,3:3,45:45}],28:[function(Xe,St,wn){"use strict";function Oe($,X){return $.native?{x:$.x,y:$.y}:ne.getRelativePosition($,X)}function Ve($,X){var Y,W,U,K,le;for(W=0,K=$.data.datasets.length;W<K;++W)if($.isDatasetVisible(W))for(U=0,le=(Y=$.getDatasetMeta(W)).data.length;U<le;++U){var de=Y.data[U];de._view.skip||X(de)}}function Q($,X){var Y=[];return Ve($,function(W){W.inRange(X.x,X.y)&&Y.push(W)}),Y}function se($,X,Y,W){var U=Number.POSITIVE_INFINITY,K=[];return Ve($,function(le){if(!Y||le.inRange(X.x,X.y)){var de=le.getCenterPoint(),pe=W(X,de);pe<U?(K=[le],U=pe):pe===U&&K.push(le)}}),K}function q($){var X=-1!==$.indexOf("x"),Y=-1!==$.indexOf("y");return function(W,U){var K=X?Math.abs(W.x-U.x):0,le=Y?Math.abs(W.y-U.y):0;return Math.sqrt(Math.pow(K,2)+Math.pow(le,2))}}function j($,X,Y){var W=Oe(X,$);Y.axis=Y.axis||"x";var U=q(Y.axis),K=Y.intersect?Q($,W):se($,W,!1,U),le=[];return K.length?($.data.datasets.forEach(function(de,pe){if($.isDatasetVisible(pe)){var _e=$.getDatasetMeta(pe).data[K[0]._index];_e&&!_e._view.skip&&le.push(_e)}}),le):[]}var ne=Xe(45);St.exports={modes:{single:function($,X){var Y=Oe(X,$),W=[];return Ve($,function(U){if(U.inRange(Y.x,Y.y))return W.push(U),W}),W.slice(0,1)},label:j,index:j,dataset:function($,X,Y){var W=Oe(X,$);Y.axis=Y.axis||"xy";var U=q(Y.axis),K=Y.intersect?Q($,W):se($,W,!1,U);return K.length>0&&(K=$.getDatasetMeta(K[0]._datasetIndex).data),K},"x-axis":function($,X){return j($,X,{intersect:!1})},point:function($,X){return Q($,Oe(X,$))},nearest:function($,X,Y){var W=Oe(X,$);Y.axis=Y.axis||"xy";var U=q(Y.axis),K=se($,W,Y.intersect,U);return K.length>1&&K.sort(function(le,de){var pe=le.getArea()-de.getArea();return 0===pe&&(pe=le._datasetIndex-de._datasetIndex),pe}),K.slice(0,1)},x:function($,X,Y){var W=Oe(X,$),U=[],K=!1;return Ve($,function(le){le.inXRange(W.x)&&U.push(le),le.inRange(W.x,W.y)&&(K=!0)}),Y.intersect&&!K&&(U=[]),U},y:function($,X,Y){var W=Oe(X,$),U=[],K=!1;return Ve($,function(le){le.inYRange(W.y)&&U.push(le),le.inRange(W.x,W.y)&&(K=!0)}),Y.intersect&&!K&&(U=[]),U}}}},{45:45}],29:[function(Xe,St,wn){"use strict";Xe(25)._set("global",{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},layout:{padding:{top:0,right:0,bottom:0,left:0}}}),St.exports=function(){var Oe=function(Ve,Q){return this.construct(Ve,Q),this};return Oe.Chart=Oe,Oe}},{25:25}],30:[function(Xe,St,wn){"use strict";var Oe=Xe(45);St.exports=function(Ve){function Q(q,j){return Oe.where(q,function(ne){return ne.position===j})}function se(q,j){q.forEach(function(ne,$){return ne._tmpIndex_=$,ne}),q.sort(function(ne,$){var X=j?$:ne,Y=j?ne:$;return X.weight===Y.weight?X._tmpIndex_-Y._tmpIndex_:X.weight-Y.weight}),q.forEach(function(ne){delete ne._tmpIndex_})}Ve.layoutService={defaults:{},addBox:function(q,j){q.boxes||(q.boxes=[]),j.fullWidth=j.fullWidth||!1,j.position=j.position||"top",j.weight=j.weight||0,q.boxes.push(j)},removeBox:function(q,j){var ne=q.boxes?q.boxes.indexOf(j):-1;-1!==ne&&q.boxes.splice(ne,1)},configure:function(q,j,ne){for(var $,X=["fullWidth","position","weight"],Y=X.length,W=0;W<Y;++W)ne.hasOwnProperty($=X[W])&&(j[$]=ne[$])},update:function(q,j,ne){function $(Qe){var uo=Oe.findNextWhere(We,function(dn){return dn.box===Qe});if(uo)if(Qe.isHorizontal()){var Yn={left:Math.max(Bt,_t),right:Math.max(Wt,rt),top:0,bottom:0};Qe.update(Qe.fullWidth?Ue:Se,ve/2,Yn)}else Qe.update(uo.minSize.width,F)}function X(Qe){Qe.isHorizontal()?(Qe.left=Qe.fullWidth?U:Bt,Qe.right=Qe.fullWidth?j-K:Bt+Se,Qe.top=hn,Qe.bottom=hn+Qe.height,hn=Qe.bottom):(Qe.left=_n,Qe.right=_n+Qe.width,Qe.top=ue,Qe.bottom=ue+F,_n=Qe.right)}if(q){var W=Oe.options.toPadding((q.options.layout||{}).padding),U=W.left,K=W.right,le=W.top,de=W.bottom,pe=Q(q.boxes,"left"),_e=Q(q.boxes,"right"),ae=Q(q.boxes,"top"),Ge=Q(q.boxes,"bottom"),Re=Q(q.boxes,"chartArea");se(pe,!0),se(_e,!1),se(ae,!0),se(Ge,!1);var Ue=j-U-K,ve=ne-le-de,Me=ve/2,Pe=(j-Ue/2)/(pe.length+_e.length),ee=(ne-Me)/(ae.length+Ge.length),Se=Ue,F=ve,We=[];Oe.each(pe.concat(_e,ae,Ge),function(Qe){var uo,Yn=Qe.isHorizontal();Yn?(uo=Qe.update(Qe.fullWidth?Ue:Se,ee),F-=uo.height):(uo=Qe.update(Pe,Me),Se-=uo.width),We.push({horizontal:Yn,minSize:uo,box:Qe})});var _t=0,rt=0,wt=0,nt=0;Oe.each(ae.concat(Ge),function(Qe){if(Qe.getPadding){var uo=Qe.getPadding();_t=Math.max(_t,uo.left),rt=Math.max(rt,uo.right)}}),Oe.each(pe.concat(_e),function(Qe){if(Qe.getPadding){var uo=Qe.getPadding();wt=Math.max(wt,uo.top),nt=Math.max(nt,uo.bottom)}});var Bt=U,Wt=K,ue=le,Ct=de;Oe.each(pe.concat(_e),$),Oe.each(pe,function(Qe){Bt+=Qe.width}),Oe.each(_e,function(Qe){Wt+=Qe.width}),Oe.each(ae.concat(Ge),$),Oe.each(ae,function(Qe){ue+=Qe.height}),Oe.each(Ge,function(Qe){Ct+=Qe.height}),Oe.each(pe.concat(_e),function(Qe){var uo=Oe.findNextWhere(We,function(dn){return dn.box===Qe});uo&&Qe.update(uo.minSize.width,F,{left:0,right:0,top:ue,bottom:Ct})}),Bt=U,Wt=K,ue=le,Ct=de,Oe.each(pe,function(Qe){Bt+=Qe.width}),Oe.each(_e,function(Qe){Wt+=Qe.width}),Oe.each(ae,function(Qe){ue+=Qe.height}),Oe.each(Ge,function(Qe){Ct+=Qe.height});var Gt=Math.max(_t-Bt,0);Bt+=Gt,Wt+=Math.max(rt-Wt,0);var xi=Math.max(wt-ue,0);ue+=xi,Ct+=Math.max(nt-Ct,0);var to=ne-ue-Ct,Jt=j-Bt-Wt;Jt===Se&&to===F||(Oe.each(pe,function(Qe){Qe.height=to}),Oe.each(_e,function(Qe){Qe.height=to}),Oe.each(ae,function(Qe){Qe.fullWidth||(Qe.width=Jt)}),Oe.each(Ge,function(Qe){Qe.fullWidth||(Qe.width=Jt)}),F=to,Se=Jt);var _n=U+Gt,hn=le+xi;Oe.each(pe.concat(ae),X),_n+=Se,hn+=F,Oe.each(_e,X),Oe.each(Ge,X),q.chartArea={left:Bt,top:ue,right:Bt+Se,bottom:ue+F},Oe.each(Re,function(Qe){Qe.left=q.chartArea.left,Qe.top=q.chartArea.top,Qe.right=q.chartArea.right,Qe.bottom=q.chartArea.bottom,Qe.update(Se,F)})}}}}},{45:45}],31:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(26),Q=Xe(45);Oe._set("global",{plugins:{}}),St.exports=function(se){se.plugins={_plugins:[],_cacheId:0,register:function(q){var j=this._plugins;[].concat(q).forEach(function(ne){-1===j.indexOf(ne)&&j.push(ne)}),this._cacheId++},unregister:function(q){var j=this._plugins;[].concat(q).forEach(function(ne){var $=j.indexOf(ne);-1!==$&&j.splice($,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(q,j,ne){var $,X,Y,W,U,K=this.descriptors(q),le=K.length;for($=0;$<le;++$)if("function"==typeof(U=(Y=(X=K[$]).plugin)[j])&&((W=[q].concat(ne||[])).push(X.options),!1===U.apply(Y,W)))return!1;return!0},descriptors:function(q){var j=q._plugins||(q._plugins={});if(j.id===this._cacheId)return j.descriptors;var ne=[],$=[],X=q&&q.config||{},Y=X.options&&X.options.plugins||{};return this._plugins.concat(X.plugins||[]).forEach(function(W){if(-1===ne.indexOf(W)){var U=W.id,K=Y[U];!1!==K&&(!0===K&&(K=Q.clone(Oe.global.plugins[U])),ne.push(W),$.push({plugin:W,options:K||{}}))}}),j.descriptors=$,j.id=this._cacheId,$}},se.pluginService=se.plugins,se.PluginBase=Ve.extend({})}},{25:25,26:26,45:45}],32:[function(Xe,St,wn){"use strict";function Oe(ne){var $,X,Y=[];for($=0,X=ne.length;$<X;++$)Y.push(ne[$].label);return Y}function Ve(ne,$,X){var Y=ne.getPixelForTick($);return X&&(Y-=0===$?(ne.getPixelForTick(1)-Y)/2:(Y-ne.getPixelForTick($-1))/2),Y}var Q=Xe(25),se=Xe(26),q=Xe(45),j=Xe(34);Q._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",lineHeight:1.2,padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:j.formatters.values,minor:{},major:{}}}),St.exports=function(ne){function $(W,U,K){return q.isArray(U)?q.longestText(W,K,U):W.measureText(U).width}function X(W){var U=q.valueOrDefault,K=Q.global,le=U(W.fontSize,K.defaultFontSize),de=U(W.fontStyle,K.defaultFontStyle),pe=U(W.fontFamily,K.defaultFontFamily);return{size:le,style:de,family:pe,font:q.fontString(le,de,pe)}}function Y(W){return q.options.toLineHeight(q.valueOrDefault(W.lineHeight,1.2),q.valueOrDefault(W.fontSize,Q.global.defaultFontSize))}ne.Scale=se.extend({getPadding:function(){var W=this;return{left:W.paddingLeft||0,top:W.paddingTop||0,right:W.paddingRight||0,bottom:W.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var W=this.options.ticks;for(var U in!1===W.minor&&(W.minor={display:!1}),!1===W.major&&(W.major={display:!1}),W)"major"!==U&&"minor"!==U&&(void 0===W.minor[U]&&(W.minor[U]=W[U]),void 0===W.major[U]&&(W.major[U]=W[U]))},beforeUpdate:function(){q.callback(this.options.beforeUpdate,[this])},update:function(W,U,K){var le,de,pe,_e,ae,Ge,Re=this;for(Re.beforeUpdate(),Re.maxWidth=W,Re.maxHeight=U,Re.margins=q.extend({left:0,right:0,top:0,bottom:0},K),Re.longestTextCache=Re.longestTextCache||{},Re.beforeSetDimensions(),Re.setDimensions(),Re.afterSetDimensions(),Re.beforeDataLimits(),Re.determineDataLimits(),Re.afterDataLimits(),Re.beforeBuildTicks(),ae=Re.buildTicks()||[],Re.afterBuildTicks(),Re.beforeTickToLabelConversion(),pe=Re.convertTicksToLabels(ae)||Re.ticks,Re.afterTickToLabelConversion(),Re.ticks=pe,le=0,de=pe.length;le<de;++le)_e=pe[le],(Ge=ae[le])?Ge.label=_e:ae.push(Ge={label:_e,major:!1});return Re._ticks=ae,Re.beforeCalculateTickRotation(),Re.calculateTickRotation(),Re.afterCalculateTickRotation(),Re.beforeFit(),Re.fit(),Re.afterFit(),Re.afterUpdate(),Re.minSize},afterUpdate:function(){q.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){q.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var W=this;W.isHorizontal()?(W.width=W.maxWidth,W.left=0,W.right=W.width):(W.height=W.maxHeight,W.top=0,W.bottom=W.height),W.paddingLeft=0,W.paddingTop=0,W.paddingRight=0,W.paddingBottom=0},afterSetDimensions:function(){q.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){q.callback(this.options.beforeDataLimits,[this])},determineDataLimits:q.noop,afterDataLimits:function(){q.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){q.callback(this.options.beforeBuildTicks,[this])},buildTicks:q.noop,afterBuildTicks:function(){q.callback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){q.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var W=this,U=W.options.ticks;W.ticks=W.ticks.map(U.userCallback||U.callback,this)},afterTickToLabelConversion:function(){q.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){q.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var W=this,U=W.ctx,K=W.options.ticks,le=Oe(W._ticks),de=X(K);U.font=de.font;var pe=K.minRotation||0;if(le.length&&W.options.display&&W.isHorizontal())for(var _e,ae=q.longestText(U,de.font,le,W.longestTextCache),Ge=ae,Re=W.getPixelForTick(1)-W.getPixelForTick(0)-6;Ge>Re&&pe<K.maxRotation;){var Ue=q.toRadians(pe);if(_e=Math.cos(Ue),Math.sin(Ue)*ae>W.maxHeight){pe--;break}pe++,Ge=_e*ae}W.labelRotation=pe},afterCalculateTickRotation:function(){q.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){q.callback(this.options.beforeFit,[this])},fit:function(){var W=this,U=W.minSize={width:0,height:0},K=Oe(W._ticks),le=W.options,de=le.ticks,pe=le.scaleLabel,_e=le.gridLines,ae=le.display,Ge=W.isHorizontal(),Re=X(de),Ue=le.gridLines.tickMarkLength;if(U.width=Ge?W.isFullWidth()?W.maxWidth-W.margins.left-W.margins.right:W.maxWidth:ae&&_e.drawTicks?Ue:0,U.height=Ge?ae&&_e.drawTicks?Ue:0:W.maxHeight,pe.display&&ae){var ve=Y(pe)+q.options.toPadding(pe.padding).height;Ge?U.height+=ve:U.width+=ve}if(de.display&&ae){var Me=q.longestText(W.ctx,Re.font,K,W.longestTextCache),Pe=q.numberOfLabelLines(K),ee=.5*Re.size,Se=W.options.ticks.padding;if(Ge){W.longestLabelWidth=Me;var F=q.toRadians(W.labelRotation),We=Math.cos(F),_t=Math.sin(F)*Me+Re.size*Pe+ee*(Pe-1)+ee;U.height=Math.min(W.maxHeight,U.height+_t+Se),W.ctx.font=Re.font;var rt=$(W.ctx,K[0],Re.font),wt=$(W.ctx,K[K.length-1],Re.font);0!==W.labelRotation?(W.paddingLeft="bottom"===le.position?We*rt+3:We*ee+3,W.paddingRight="bottom"===le.position?We*ee+3:We*wt+3):(W.paddingLeft=rt/2+3,W.paddingRight=wt/2+3)}else de.mirror?Me=0:Me+=Se+ee,U.width=Math.min(W.maxWidth,U.width+Me),W.paddingTop=Re.size/2,W.paddingBottom=Re.size/2}W.handleMargins(),W.width=U.width,W.height=U.height},handleMargins:function(){var W=this;W.margins&&(W.paddingLeft=Math.max(W.paddingLeft-W.margins.left,0),W.paddingTop=Math.max(W.paddingTop-W.margins.top,0),W.paddingRight=Math.max(W.paddingRight-W.margins.right,0),W.paddingBottom=Math.max(W.paddingBottom-W.margins.bottom,0))},afterFit:function(){q.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(W){if(q.isNullOrUndef(W))return NaN;if("number"==typeof W&&!isFinite(W))return NaN;if(W)if(this.isHorizontal()){if(void 0!==W.x)return this.getRightValue(W.x)}else if(void 0!==W.y)return this.getRightValue(W.y);return W},getLabelForIndex:q.noop,getPixelForValue:q.noop,getValueForPixel:q.noop,getPixelForTick:function(W){var U=this,K=U.options.offset;if(U.isHorizontal()){var le=(U.width-(U.paddingLeft+U.paddingRight))/Math.max(U._ticks.length-(K?0:1),1),de=le*W+U.paddingLeft;return K&&(de+=le/2),U.left+Math.round(de)+(U.isFullWidth()?U.margins.left:0)}return U.top+W*((U.height-(U.paddingTop+U.paddingBottom))/(U._ticks.length-1))},getPixelForDecimal:function(W){var U=this;return U.isHorizontal()?U.left+Math.round((U.width-(U.paddingLeft+U.paddingRight))*W+U.paddingLeft)+(U.isFullWidth()?U.margins.left:0):U.top+W*U.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var W=this,U=W.min,K=W.max;return W.beginAtZero?0:U<0&&K<0?K:U>0&&K>0?U:0},_autoSkip:function(W){var U,K,le,de,pe=this,_e=pe.isHorizontal(),ae=pe.options.ticks.minor,Ge=W.length,Re=q.toRadians(pe.labelRotation),Ue=Math.cos(Re),ve=pe.longestLabelWidth*Ue,Me=[];for(ae.maxTicksLimit&&(de=ae.maxTicksLimit),_e&&(U=!1,(ve+ae.autoSkipPadding)*Ge>pe.width-(pe.paddingLeft+pe.paddingRight)&&(U=1+Math.floor((ve+ae.autoSkipPadding)*Ge/(pe.width-(pe.paddingLeft+pe.paddingRight)))),de&&Ge>de&&(U=Math.max(U,Math.floor(Ge/de)))),K=0;K<Ge;K++)le=W[K],(U>1&&K%U>0||K%U==0&&K+U>=Ge)&&K!==Ge-1&&delete le.label,Me.push(le);return Me},draw:function(W){var U=this,K=U.options;if(K.display){var le=U.ctx,de=Q.global,pe=K.ticks.minor,_e=K.ticks.major||pe,ae=K.gridLines,Ge=K.scaleLabel,Re=0!==U.labelRotation,Ue=U.isHorizontal(),ve=pe.autoSkip?U._autoSkip(U.getTicks()):U.getTicks(),Me=q.valueOrDefault(pe.fontColor,de.defaultFontColor),Pe=X(pe),ee=q.valueOrDefault(_e.fontColor,de.defaultFontColor),Se=X(_e),F=ae.drawTicks?ae.tickMarkLength:0,We=q.valueOrDefault(Ge.fontColor,de.defaultFontColor),_t=X(Ge),rt=q.options.toPadding(Ge.padding),wt=q.toRadians(U.labelRotation),nt=[],Bt="right"===K.position?U.left:U.right-F,Wt="right"===K.position?U.left+F:U.right,ue="bottom"===K.position?U.top:U.bottom-F,Ct="bottom"===K.position?U.top+F:U.bottom;if(q.each(ve,function(Ao,Oo){if(!q.isNullOrUndef(Ao.label)){var _i,Qo,ft,pt,Tt=Ao.label;Oo===U.zeroLineIndex&&K.offset===ae.offsetGridLines?(_i=ae.zeroLineWidth,Qo=ae.zeroLineColor,ft=ae.zeroLineBorderDash,pt=ae.zeroLineBorderDashOffset):(_i=q.valueAtIndexOrDefault(ae.lineWidth,Oo),Qo=q.valueAtIndexOrDefault(ae.color,Oo),ft=q.valueOrDefault(ae.borderDash,de.borderDash),pt=q.valueOrDefault(ae.borderDashOffset,de.borderDashOffset));var $t,tn,on,Sn,no,ao,Rn,wi,Go,Si,Ds="middle",Ur="middle",vs=pe.padding;if(Ue){var ho=F+vs;"bottom"===K.position?(Ur=Re?"middle":"top",Ds=Re?"right":"center",Si=U.top+ho):(Ur=Re?"middle":"bottom",Ds=Re?"left":"center",Si=U.bottom-ho);var vn=Ve(U,Oo,ae.offsetGridLines&&ve.length>1);vn<U.left&&(Qo="rgba(0,0,0,0)"),vn+=q.aliasPixel(_i),Go=U.getPixelForTick(Oo)+pe.labelOffset,$t=on=no=Rn=vn,tn=ue,Sn=Ct,ao=W.top,wi=W.bottom}else{var bo,Br="left"===K.position;pe.mirror?(Ds=Br?"left":"right",bo=vs):(Ds=Br?"right":"left",bo=F+vs),Go=Br?U.right-bo:U.left+bo;var Ma=Ve(U,Oo,ae.offsetGridLines&&ve.length>1);Ma<U.top&&(Qo="rgba(0,0,0,0)"),Ma+=q.aliasPixel(_i),Si=U.getPixelForTick(Oo)+pe.labelOffset,$t=Bt,on=Wt,no=W.left,Rn=W.right,tn=Sn=ao=wi=Ma}nt.push({tx1:$t,ty1:tn,tx2:on,ty2:Sn,x1:no,y1:ao,x2:Rn,y2:wi,labelX:Go,labelY:Si,glWidth:_i,glColor:Qo,glBorderDash:ft,glBorderDashOffset:pt,rotation:-1*wt,label:Tt,major:Ao.major,textBaseline:Ur,textAlign:Ds})}}),q.each(nt,function(Ao){if(ae.display&&(le.save(),le.lineWidth=Ao.glWidth,le.strokeStyle=Ao.glColor,le.setLineDash&&(le.setLineDash(Ao.glBorderDash),le.lineDashOffset=Ao.glBorderDashOffset),le.beginPath(),ae.drawTicks&&(le.moveTo(Ao.tx1,Ao.ty1),le.lineTo(Ao.tx2,Ao.ty2)),ae.drawOnChartArea&&(le.moveTo(Ao.x1,Ao.y1),le.lineTo(Ao.x2,Ao.y2)),le.stroke(),le.restore()),pe.display){le.save(),le.translate(Ao.labelX,Ao.labelY),le.rotate(Ao.rotation),le.font=Ao.major?Se.font:Pe.font,le.fillStyle=Ao.major?ee:Me,le.textBaseline=Ao.textBaseline,le.textAlign=Ao.textAlign;var Oo=Ao.label;if(q.isArray(Oo))for(var _i=0,Qo=0;_i<Oo.length;++_i)le.fillText(""+Oo[_i],0,Qo),Qo+=1.5*Pe.size;else le.fillText(Oo,0,0);le.restore()}}),Ge.display){var Gt,xi,to=0,Jt=Y(Ge)/2;if(Ue)Gt=U.left+(U.right-U.left)/2,xi="bottom"===K.position?U.bottom-Jt-rt.bottom:U.top+Jt+rt.top;else{var _n="left"===K.position;Gt=_n?U.left+Jt+rt.top:U.right-Jt-rt.top,xi=U.top+(U.bottom-U.top)/2,to=_n?-.5*Math.PI:.5*Math.PI}le.save(),le.translate(Gt,xi),le.rotate(to),le.textAlign="center",le.textBaseline="middle",le.fillStyle=We,le.font=_t.font,le.fillText(Ge.labelString,0,0),le.restore()}if(ae.drawBorder){le.lineWidth=q.valueAtIndexOrDefault(ae.lineWidth,0),le.strokeStyle=q.valueAtIndexOrDefault(ae.color,0);var hn=U.left,Qe=U.right,uo=U.top,Yn=U.bottom,dn=q.aliasPixel(le.lineWidth);Ue?(uo=Yn="top"===K.position?U.bottom:U.top,uo+=dn,Yn+=dn):(hn=Qe="left"===K.position?U.right:U.left,hn+=dn,Qe+=dn),le.beginPath(),le.moveTo(hn,uo),le.lineTo(Qe,Yn),le.stroke()}}}})}},{25:25,26:26,34:34,45:45}],33:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(45);St.exports=function(Q){Q.scaleService={constructors:{},defaults:{},registerScaleType:function(se,q,j){this.constructors[se]=q,this.defaults[se]=Ve.clone(j)},getScaleConstructor:function(se){return this.constructors.hasOwnProperty(se)?this.constructors[se]:void 0},getScaleDefaults:function(se){return this.defaults.hasOwnProperty(se)?Ve.merge({},[Oe.scale,this.defaults[se]]):{}},updateScaleDefaults:function(se,q){var j=this;j.defaults.hasOwnProperty(se)&&(j.defaults[se]=Ve.extend(j.defaults[se],q))},addScalesToLayout:function(se){Ve.each(se.scales,function(q){q.fullWidth=q.options.fullWidth,q.position=q.options.position,q.weight=q.options.weight,Q.layoutService.addBox(se,q)})}}}},{25:25,45:45}],34:[function(Xe,St,wn){"use strict";var Oe=Xe(45);St.exports={generators:{linear:function(Ve,Q){var se,q=[];if(Ve.stepSize&&Ve.stepSize>0)se=Ve.stepSize;else{var j=Oe.niceNum(Q.max-Q.min,!1);se=Oe.niceNum(j/(Ve.maxTicks-1),!0)}var ne=Math.floor(Q.min/se)*se,$=Math.ceil(Q.max/se)*se;Ve.min&&Ve.max&&Ve.stepSize&&Oe.almostWhole((Ve.max-Ve.min)/Ve.stepSize,se/1e3)&&(ne=Ve.min,$=Ve.max);var X=($-ne)/se;X=Oe.almostEquals(X,Math.round(X),se/1e3)?Math.round(X):Math.ceil(X),q.push(void 0!==Ve.min?Ve.min:ne);for(var Y=1;Y<X;++Y)q.push(ne+Y*se);return q.push(void 0!==Ve.max?Ve.max:$),q},logarithmic:function(Ve,Q){var se,q,j=[],ne=Oe.valueOrDefault,$=ne(Ve.min,Math.pow(10,Math.floor(Oe.log10(Q.min)))),X=Math.floor(Oe.log10(Q.max)),Y=Math.ceil(Q.max/Math.pow(10,X));0===$?(se=Math.floor(Oe.log10(Q.minNotZero)),q=Math.floor(Q.minNotZero/Math.pow(10,se)),j.push($),$=q*Math.pow(10,se)):(se=Math.floor(Oe.log10($)),q=Math.floor($/Math.pow(10,se)));do{j.push($),10==++q&&(q=1,++se),$=q*Math.pow(10,se)}while(se<X||se===X&&q<Y);var W=ne(Ve.max,$);return j.push(W),j}},formatters:{values:function(Ve){return Oe.isArray(Ve)?Ve:""+Ve},linear:function(Ve,Q,se){var q=se.length>3?se[2]-se[1]:se[1]-se[0];Math.abs(q)>1&&Ve!==Math.floor(Ve)&&(q=Ve-Math.floor(Ve));var j=Oe.log10(Math.abs(q)),ne="";if(0!==Ve){var $=-1*Math.floor(j);$=Math.max(Math.min($,20),0),ne=Ve.toFixed($)}else ne="0";return ne},logarithmic:function(Ve,Q,se){var q=Ve/Math.pow(10,Math.floor(Oe.log10(Ve)));return 0===Ve?"0":1===q||2===q||5===q||0===Q||Q===se.length-1?Ve.toExponential():""}}}},{45:45}],35:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(26),Q=Xe(45);Oe._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:Q.noop,title:function(se,q){var j="",ne=q.labels,$=ne?ne.length:0;if(se.length>0){var X=se[0];X.xLabel?j=X.xLabel:$>0&&X.index<$&&(j=ne[X.index])}return j},afterTitle:Q.noop,beforeBody:Q.noop,beforeLabel:Q.noop,label:function(se,q){var j=q.datasets[se.datasetIndex].label||"";return j&&(j+=": "),j+se.yLabel},labelColor:function(se,q){var j=q.getDatasetMeta(se.datasetIndex).data[se.index]._view;return{borderColor:j.borderColor,backgroundColor:j.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:Q.noop,afterBody:Q.noop,beforeFooter:Q.noop,footer:Q.noop,afterFooter:Q.noop}}}),St.exports=function(se){function q(U,K){var le=Q.color(U);return le.alpha(K*le.alpha()).rgbaString()}function j(U,K){return K&&(Q.isArray(K)?Array.prototype.push.apply(U,K):U.push(K)),U}function ne(U){var K=U._xScale,le=U._yScale||U._scale,de=U._index,pe=U._datasetIndex;return{xLabel:K?K.getLabelForIndex(de,pe):"",yLabel:le?le.getLabelForIndex(de,pe):"",index:de,datasetIndex:pe,x:U._model.x,y:U._model.y}}function $(U){var K=Oe.global,le=Q.valueOrDefault;return{xPadding:U.xPadding,yPadding:U.yPadding,xAlign:U.xAlign,yAlign:U.yAlign,bodyFontColor:U.bodyFontColor,_bodyFontFamily:le(U.bodyFontFamily,K.defaultFontFamily),_bodyFontStyle:le(U.bodyFontStyle,K.defaultFontStyle),_bodyAlign:U.bodyAlign,bodyFontSize:le(U.bodyFontSize,K.defaultFontSize),bodySpacing:U.bodySpacing,titleFontColor:U.titleFontColor,_titleFontFamily:le(U.titleFontFamily,K.defaultFontFamily),_titleFontStyle:le(U.titleFontStyle,K.defaultFontStyle),titleFontSize:le(U.titleFontSize,K.defaultFontSize),_titleAlign:U.titleAlign,titleSpacing:U.titleSpacing,titleMarginBottom:U.titleMarginBottom,footerFontColor:U.footerFontColor,_footerFontFamily:le(U.footerFontFamily,K.defaultFontFamily),_footerFontStyle:le(U.footerFontStyle,K.defaultFontStyle),footerFontSize:le(U.footerFontSize,K.defaultFontSize),_footerAlign:U.footerAlign,footerSpacing:U.footerSpacing,footerMarginTop:U.footerMarginTop,caretSize:U.caretSize,cornerRadius:U.cornerRadius,backgroundColor:U.backgroundColor,opacity:0,legendColorBackground:U.multiKeyBackground,displayColors:U.displayColors,borderColor:U.borderColor,borderWidth:U.borderWidth}}se.Tooltip=Ve.extend({initialize:function(){this._model=$(this._options),this._lastActive=[]},getTitle:function(){var U=this,K=U._options.callbacks,le=K.beforeTitle.apply(U,arguments),de=K.title.apply(U,arguments),pe=K.afterTitle.apply(U,arguments),_e=[];return _e=j(_e,le),_e=j(_e,de),j(_e,pe)},getBeforeBody:function(){var U=this._options.callbacks.beforeBody.apply(this,arguments);return Q.isArray(U)?U:void 0!==U?[U]:[]},getBody:function(U,K){var le=this,de=le._options.callbacks,pe=[];return Q.each(U,function(_e){var ae={before:[],lines:[],after:[]};j(ae.before,de.beforeLabel.call(le,_e,K)),j(ae.lines,de.label.call(le,_e,K)),j(ae.after,de.afterLabel.call(le,_e,K)),pe.push(ae)}),pe},getAfterBody:function(){var U=this._options.callbacks.afterBody.apply(this,arguments);return Q.isArray(U)?U:void 0!==U?[U]:[]},getFooter:function(){var U=this,K=U._options.callbacks,le=K.beforeFooter.apply(U,arguments),de=K.footer.apply(U,arguments),pe=K.afterFooter.apply(U,arguments),_e=[];return _e=j(_e,le),_e=j(_e,de),j(_e,pe)},update:function(U){var K,le,de=this,pe=de._options,_e=de._model,ae=de._model=$(pe),Ge=de._active,Re=de._data,Ue={xAlign:_e.xAlign,yAlign:_e.yAlign},ve={x:_e.x,y:_e.y},Me={width:_e.width,height:_e.height},Pe={x:_e.caretX,y:_e.caretY};if(Ge.length){ae.opacity=1;var ee=[],Se=[];Pe=se.Tooltip.positioners[pe.position].call(de,Ge,de._eventPosition);var F=[];for(K=0,le=Ge.length;K<le;++K)F.push(ne(Ge[K]));pe.filter&&(F=F.filter(function(We){return pe.filter(We,Re)})),pe.itemSort&&(F=F.sort(function(We,_t){return pe.itemSort(We,_t,Re)})),Q.each(F,function(We){ee.push(pe.callbacks.labelColor.call(de,We,de._chart)),Se.push(pe.callbacks.labelTextColor.call(de,We,de._chart))}),ae.title=de.getTitle(F,Re),ae.beforeBody=de.getBeforeBody(F,Re),ae.body=de.getBody(F,Re),ae.afterBody=de.getAfterBody(F,Re),ae.footer=de.getFooter(F,Re),ae.x=Math.round(Pe.x),ae.y=Math.round(Pe.y),ae.caretPadding=pe.caretPadding,ae.labelColors=ee,ae.labelTextColors=Se,ae.dataPoints=F,ve=function W(U,K,le){var de=U.x,pe=U.y,ae=U.caretPadding,Re=le.xAlign,Ue=le.yAlign,ve=U.caretSize+ae,Me=U.cornerRadius+ae;return"right"===Re?de-=K.width:"center"===Re&&(de-=K.width/2),"top"===Ue?pe+=ve:pe-="bottom"===Ue?K.height+ve:K.height/2,"center"===Ue?"left"===Re?de+=ve:"right"===Re&&(de-=ve):"left"===Re?de-=Me:"right"===Re&&(de+=Me),{x:de,y:pe}}(ae,Me=function X(U,K){var le=U._chart.ctx,de=2*K.yPadding,pe=0,_e=K.body,ae=_e.reduce(function(Se,F){return Se+F.before.length+F.lines.length+F.after.length},0),Ge=K.title.length,Re=K.footer.length,Ue=K.titleFontSize,ve=K.bodyFontSize,Me=K.footerFontSize;de+=Ge*Ue,de+=Ge?(Ge-1)*K.titleSpacing:0,de+=Ge?K.titleMarginBottom:0,de+=(ae+=K.beforeBody.length+K.afterBody.length)*ve,de+=ae?(ae-1)*K.bodySpacing:0,de+=Re?K.footerMarginTop:0,de+=Re*Me,de+=Re?(Re-1)*K.footerSpacing:0;var Pe=0,ee=function(Se){pe=Math.max(pe,le.measureText(Se).width+Pe)};return le.font=Q.fontString(Ue,K._titleFontStyle,K._titleFontFamily),Q.each(K.title,ee),le.font=Q.fontString(ve,K._bodyFontStyle,K._bodyFontFamily),Q.each(K.beforeBody.concat(K.afterBody),ee),Pe=K.displayColors?ve+2:0,Q.each(_e,function(Se){Q.each(Se.before,ee),Q.each(Se.lines,ee),Q.each(Se.after,ee)}),Pe=0,le.font=Q.fontString(Me,K._footerFontStyle,K._footerFontFamily),Q.each(K.footer,ee),{width:pe+=2*K.xPadding,height:de}}(this,ae),Ue=function Y(U,K){var le=U._model,de=U._chart,pe=U._chart.chartArea,_e="center",ae="center";le.y<K.height?ae="top":le.y>de.height-K.height&&(ae="bottom");var Ge,Re,Ue,ve,Me,Pe=(pe.left+pe.right)/2,ee=(pe.top+pe.bottom)/2;"center"===ae?(Ge=function(F){return F<=Pe},Re=function(F){return F>Pe}):(Ge=function(F){return F<=K.width/2},Re=function(F){return F>=de.width-K.width/2}),Ue=function(F){return F+K.width>de.width},ve=function(F){return F-K.width<0},Me=function(F){return F<=ee?"top":"bottom"},Ge(le.x)?(_e="left",Ue(le.x)&&(_e="center",ae=Me(le.y))):Re(le.x)&&(_e="right",ve(le.x)&&(_e="center",ae=Me(le.y)));var Se=U._options;return{xAlign:Se.xAlign?Se.xAlign:_e,yAlign:Se.yAlign?Se.yAlign:ae}}(this,Me))}else ae.opacity=0;return ae.xAlign=Ue.xAlign,ae.yAlign=Ue.yAlign,ae.x=ve.x,ae.y=ve.y,ae.width=Me.width,ae.height=Me.height,ae.caretX=Pe.x,ae.caretY=Pe.y,de._model=ae,U&&pe.custom&&pe.custom.call(de,ae),de},drawCaret:function(U,K){var le=this._chart.ctx,pe=this.getCaretPosition(U,K,this._view);le.lineTo(pe.x1,pe.y1),le.lineTo(pe.x2,pe.y2),le.lineTo(pe.x3,pe.y3)},getCaretPosition:function(U,K,le){var de,pe,_e,ae,Ge,Re,Ue=le.caretSize,ve=le.cornerRadius,Me=le.xAlign,Pe=le.yAlign,ee=U.x,Se=U.y,F=K.width,We=K.height;if("center"===Pe)Ge=Se+We/2,"left"===Me?(pe=(de=ee)-Ue,_e=de,ae=Ge+Ue,Re=Ge-Ue):(pe=(de=ee+F)+Ue,_e=de,ae=Ge-Ue,Re=Ge+Ue);else if("left"===Me?(de=(pe=ee+ve+Ue)-Ue,_e=pe+Ue):"right"===Me?(de=(pe=ee+F-ve-Ue)-Ue,_e=pe+Ue):(de=(pe=ee+F/2)-Ue,_e=pe+Ue),"top"===Pe)Ge=(ae=Se)-Ue,Re=ae;else{Ge=(ae=Se+We)+Ue,Re=ae;var _t=_e;_e=de,de=_t}return{x1:de,x2:pe,x3:_e,y1:ae,y2:Ge,y3:Re}},drawTitle:function(U,K,le,de){var pe=K.title;if(pe.length){le.textAlign=K._titleAlign,le.textBaseline="top";var Ge,Re,_e=K.titleFontSize,ae=K.titleSpacing;for(le.fillStyle=q(K.titleFontColor,de),le.font=Q.fontString(_e,K._titleFontStyle,K._titleFontFamily),Ge=0,Re=pe.length;Ge<Re;++Ge)le.fillText(pe[Ge],U.x,U.y),U.y+=_e+ae,Ge+1===pe.length&&(U.y+=K.titleMarginBottom-ae)}},drawBody:function(U,K,le,de){var pe=K.bodyFontSize,_e=K.bodySpacing,ae=K.body;le.textAlign=K._bodyAlign,le.textBaseline="top",le.font=Q.fontString(pe,K._bodyFontStyle,K._bodyFontFamily);var Ge=0,Re=function(ve){le.fillText(ve,U.x+Ge,U.y),U.y+=pe+_e};le.fillStyle=q(K.bodyFontColor,de),Q.each(K.beforeBody,Re);var Ue=K.displayColors;Ge=Ue?pe+2:0,Q.each(ae,function(ve,Me){var Pe=q(K.labelTextColors[Me],de);le.fillStyle=Pe,Q.each(ve.before,Re),Q.each(ve.lines,function(ee){Ue&&(le.fillStyle=q(K.legendColorBackground,de),le.fillRect(U.x,U.y,pe,pe),le.lineWidth=1,le.strokeStyle=q(K.labelColors[Me].borderColor,de),le.strokeRect(U.x,U.y,pe,pe),le.fillStyle=q(K.labelColors[Me].backgroundColor,de),le.fillRect(U.x+1,U.y+1,pe-2,pe-2),le.fillStyle=Pe),Re(ee)}),Q.each(ve.after,Re)}),Ge=0,Q.each(K.afterBody,Re),U.y-=_e},drawFooter:function(U,K,le,de){var pe=K.footer;pe.length&&(U.y+=K.footerMarginTop,le.textAlign=K._footerAlign,le.textBaseline="top",le.fillStyle=q(K.footerFontColor,de),le.font=Q.fontString(K.footerFontSize,K._footerFontStyle,K._footerFontFamily),Q.each(pe,function(_e){le.fillText(_e,U.x,U.y),U.y+=K.footerFontSize+K.footerSpacing}))},drawBackground:function(U,K,le,de,pe){le.fillStyle=q(K.backgroundColor,pe),le.strokeStyle=q(K.borderColor,pe),le.lineWidth=K.borderWidth;var _e=K.xAlign,ae=K.yAlign,Ge=U.x,Re=U.y,Ue=de.width,ve=de.height,Me=K.cornerRadius;le.beginPath(),le.moveTo(Ge+Me,Re),"top"===ae&&this.drawCaret(U,de),le.lineTo(Ge+Ue-Me,Re),le.quadraticCurveTo(Ge+Ue,Re,Ge+Ue,Re+Me),"center"===ae&&"right"===_e&&this.drawCaret(U,de),le.lineTo(Ge+Ue,Re+ve-Me),le.quadraticCurveTo(Ge+Ue,Re+ve,Ge+Ue-Me,Re+ve),"bottom"===ae&&this.drawCaret(U,de),le.lineTo(Ge+Me,Re+ve),le.quadraticCurveTo(Ge,Re+ve,Ge,Re+ve-Me),"center"===ae&&"left"===_e&&this.drawCaret(U,de),le.lineTo(Ge,Re+Me),le.quadraticCurveTo(Ge,Re,Ge+Me,Re),le.closePath(),le.fill(),K.borderWidth>0&&le.stroke()},draw:function(){var U=this._chart.ctx,K=this._view;if(0!==K.opacity){var le={width:K.width,height:K.height},de={x:K.x,y:K.y},pe=Math.abs(K.opacity<.001)?0:K.opacity;this._options.enabled&&(K.title.length||K.beforeBody.length||K.body.length||K.afterBody.length||K.footer.length)&&(this.drawBackground(de,K,U,le,pe),de.x+=K.xPadding,de.y+=K.yPadding,this.drawTitle(de,K,U,pe),this.drawBody(de,K,U,pe),this.drawFooter(de,K,U,pe))}},handleEvent:function(U){var K=this,le=K._options,de=!1;if(K._lastActive=K._lastActive||[],K._active="mouseout"===U.type?[]:K._chart.getElementsAtEventForMode(U,le.mode,le),!(de=!Q.arrayEquals(K._active,K._lastActive)))return!1;if(K._lastActive=K._active,le.enabled||le.custom){K._eventPosition={x:U.x,y:U.y};var pe=K._model;K.update(!0),K.pivot(),de|=pe.x!==K._model.x||pe.y!==K._model.y}return de}}),se.Tooltip.positioners={average:function(U){if(!U.length)return!1;var K,le,de=0,pe=0,_e=0;for(K=0,le=U.length;K<le;++K){var ae=U[K];if(ae&&ae.hasValue()){var Ge=ae.tooltipPosition();de+=Ge.x,pe+=Ge.y,++_e}}return{x:Math.round(de/_e),y:Math.round(pe/_e)}},nearest:function(U,K){var le,de,pe,_e=K.x,ae=K.y,Ge=Number.POSITIVE_INFINITY;for(le=0,de=U.length;le<de;++le){var Re=U[le];if(Re&&Re.hasValue()){var Ue=Re.getCenterPoint(),ve=Q.distanceBetweenPoints(K,Ue);ve<Ge&&(Ge=ve,pe=Re)}}if(pe){var Me=pe.tooltipPosition();_e=Me.x,ae=Me.y}return{x:_e,y:ae}}}}},{25:25,26:26,45:45}],36:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(26),Q=Xe(45);Oe._set("global",{elements:{arc:{backgroundColor:Oe.global.defaultColor,borderColor:"#fff",borderWidth:2}}}),St.exports=Ve.extend({inLabelRange:function(se){var q=this._view;return!!q&&Math.pow(se-q.x,2)<Math.pow(q.radius+q.hoverRadius,2)},inRange:function(se,q){var j=this._view;if(j){for(var ne=Q.getAngleFromPoint(j,{x:se,y:q}),$=ne.angle,X=ne.distance,Y=j.startAngle,W=j.endAngle;W<Y;)W+=2*Math.PI;for(;$>W;)$-=2*Math.PI;for(;$<Y;)$+=2*Math.PI;return $>=Y&&$<=W&&X>=j.innerRadius&&X<=j.outerRadius}return!1},getCenterPoint:function(){var se=this._view,q=(se.startAngle+se.endAngle)/2,j=(se.innerRadius+se.outerRadius)/2;return{x:se.x+Math.cos(q)*j,y:se.y+Math.sin(q)*j}},getArea:function(){var se=this._view;return Math.PI*((se.endAngle-se.startAngle)/(2*Math.PI))*(Math.pow(se.outerRadius,2)-Math.pow(se.innerRadius,2))},tooltipPosition:function(){var se=this._view,q=se.startAngle+(se.endAngle-se.startAngle)/2,j=(se.outerRadius-se.innerRadius)/2+se.innerRadius;return{x:se.x+Math.cos(q)*j,y:se.y+Math.sin(q)*j}},draw:function(){var se=this._chart.ctx,q=this._view,j=q.startAngle,ne=q.endAngle;se.beginPath(),se.arc(q.x,q.y,q.outerRadius,j,ne),se.arc(q.x,q.y,q.innerRadius,ne,j,!0),se.closePath(),se.strokeStyle=q.borderColor,se.lineWidth=q.borderWidth,se.fillStyle=q.backgroundColor,se.fill(),se.lineJoin="bevel",q.borderWidth&&se.stroke()}})},{25:25,26:26,45:45}],37:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(26),Q=Xe(45),se=Oe.global;Oe._set("global",{elements:{line:{tension:.4,backgroundColor:se.defaultColor,borderWidth:3,borderColor:se.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}}),St.exports=Ve.extend({draw:function(){var q,j,ne,$,X=this,Y=X._view,W=X._chart.ctx,U=Y.spanGaps,K=X._children.slice(),le=se.elements.line,de=-1;for(X._loop&&K.length&&K.push(K[0]),W.save(),W.lineCap=Y.borderCapStyle||le.borderCapStyle,W.setLineDash&&W.setLineDash(Y.borderDash||le.borderDash),W.lineDashOffset=Y.borderDashOffset||le.borderDashOffset,W.lineJoin=Y.borderJoinStyle||le.borderJoinStyle,W.lineWidth=Y.borderWidth||le.borderWidth,W.strokeStyle=Y.borderColor||se.defaultColor,W.beginPath(),de=-1,q=0;q<K.length;++q)j=K[q],ne=Q.previousItem(K,q),$=j._view,0===q?$.skip||(W.moveTo($.x,$.y),de=q):(ne=-1===de?ne:K[de],$.skip||(de!==q-1&&!U||-1===de?W.moveTo($.x,$.y):Q.canvas.lineTo(W,ne._view,j._view),de=q));W.stroke(),W.restore()}})},{25:25,26:26,45:45}],38:[function(Xe,St,wn){"use strict";function Oe(j){var ne=this._view;return!!ne&&Math.pow(j-ne.x,2)<Math.pow(ne.radius+ne.hitRadius,2)}var Ve=Xe(25),Q=Xe(26),se=Xe(45),q=Ve.global.defaultColor;Ve._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:q,borderColor:q,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}}),St.exports=Q.extend({inRange:function(j,ne){var $=this._view;return!!$&&Math.pow(j-$.x,2)+Math.pow(ne-$.y,2)<Math.pow($.hitRadius+$.radius,2)},inLabelRange:Oe,inXRange:Oe,inYRange:function(j){var ne=this._view;return!!ne&&Math.pow(j-ne.y,2)<Math.pow(ne.radius+ne.hitRadius,2)},getCenterPoint:function(){var j=this._view;return{x:j.x,y:j.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var j=this._view;return{x:j.x,y:j.y,padding:j.radius+j.borderWidth}},draw:function(j){var ne=this._view,$=this._model,X=this._chart.ctx,Y=ne.pointStyle,W=ne.radius,U=ne.x,K=ne.y,le=se.color,de=0;ne.skip||(X.strokeStyle=ne.borderColor||q,X.lineWidth=se.valueOrDefault(ne.borderWidth,Ve.global.elements.point.borderWidth),X.fillStyle=ne.backgroundColor||q,void 0!==j&&($.x<j.left||1.01*j.right<$.x||$.y<j.top||1.01*j.bottom<$.y)&&($.x<j.left?de=(U-$.x)/(j.left-$.x):1.01*j.right<$.x?de=($.x-U)/($.x-j.right):$.y<j.top?de=(K-$.y)/(j.top-$.y):1.01*j.bottom<$.y&&(de=($.y-K)/($.y-j.bottom)),de=Math.round(100*de)/100,X.strokeStyle=le(X.strokeStyle).alpha(de).rgbString(),X.fillStyle=le(X.fillStyle).alpha(de).rgbString()),se.canvas.drawPoint(X,Y,W,U,K))}})},{25:25,26:26,45:45}],39:[function(Xe,St,wn){"use strict";function Oe(q){return void 0!==q._view.width}function Ve(q){var j,ne,$,X,Y=q._view;if(Oe(q)){var W=Y.width/2;j=Y.x-W,ne=Y.x+W,$=Math.min(Y.y,Y.base),X=Math.max(Y.y,Y.base)}else{var U=Y.height/2;j=Math.min(Y.x,Y.base),ne=Math.max(Y.x,Y.base),$=Y.y-U,X=Y.y+U}return{left:j,top:$,right:ne,bottom:X}}var Q=Xe(25),se=Xe(26);Q._set("global",{elements:{rectangle:{backgroundColor:Q.global.defaultColor,borderColor:Q.global.defaultColor,borderSkipped:"bottom",borderWidth:0}}}),St.exports=se.extend({draw:function(){function q(Se){return ve[(Me+Se)%4]}var j,ne,$,X,Y,W,U,K=this._chart.ctx,le=this._view,de=le.borderWidth;if(le.horizontal?($=le.y-le.height/2,X=le.y+le.height/2,Y=(ne=le.x)>(j=le.base)?1:-1,W=1,U=le.borderSkipped||"left"):(j=le.x-le.width/2,ne=le.x+le.width/2,Y=1,W=(X=le.base)>($=le.y)?1:-1,U=le.borderSkipped||"bottom"),de){var pe=Math.min(Math.abs(j-ne),Math.abs($-X)),_e=(de=de>pe?pe:de)/2,ae=j+("left"!==U?_e*Y:0),Ge=ne+("right"!==U?-_e*Y:0),Re=$+("top"!==U?_e*W:0),Ue=X+("bottom"!==U?-_e*W:0);ae!==Ge&&($=Re,X=Ue),Re!==Ue&&(j=ae,ne=Ge)}K.beginPath(),K.fillStyle=le.backgroundColor,K.strokeStyle=le.borderColor,K.lineWidth=de;var ve=[[j,X],[j,$],[ne,$],[ne,X]],Me=["bottom","left","top","right"].indexOf(U,0);-1===Me&&(Me=0);var Pe=q(0);K.moveTo(Pe[0],Pe[1]);for(var ee=1;ee<4;ee++)Pe=q(ee),K.lineTo(Pe[0],Pe[1]);K.fill(),de&&K.stroke()},height:function(){var q=this._view;return q.base-q.y},inRange:function(q,j){var ne=!1;if(this._view){var $=Ve(this);ne=q>=$.left&&q<=$.right&&j>=$.top&&j<=$.bottom}return ne},inLabelRange:function(q,j){if(!this._view)return!1;var $=Ve(this);return Oe(this)?q>=$.left&&q<=$.right:j>=$.top&&j<=$.bottom},inXRange:function(q){var j=Ve(this);return q>=j.left&&q<=j.right},inYRange:function(q){var j=Ve(this);return q>=j.top&&q<=j.bottom},getCenterPoint:function(){var q,j,ne=this._view;return Oe(this)?(q=ne.x,j=(ne.y+ne.base)/2):(q=(ne.x+ne.base)/2,j=ne.y),{x:q,y:j}},getArea:function(){var q=this._view;return q.width*Math.abs(q.y-q.base)},tooltipPosition:function(){var q=this._view;return{x:q.x,y:q.y}}})},{25:25,26:26}],40:[function(Xe,St,wn){"use strict";St.exports={},St.exports.Arc=Xe(36),St.exports.Line=Xe(37),St.exports.Point=Xe(38),St.exports.Rectangle=Xe(39)},{36:36,37:37,38:38,39:39}],41:[function(Xe,St,Ve){"use strict";var Oe=Xe(42);Ve=St.exports={clear:function(Q){Q.ctx.clearRect(0,0,Q.width,Q.height)},roundedRect:function(Q,se,q,j,ne,$){if($){var X=Math.min($,j/2),Y=Math.min($,ne/2);Q.moveTo(se+X,q),Q.lineTo(se+j-X,q),Q.quadraticCurveTo(se+j,q,se+j,q+Y),Q.lineTo(se+j,q+ne-Y),Q.quadraticCurveTo(se+j,q+ne,se+j-X,q+ne),Q.lineTo(se+X,q+ne),Q.quadraticCurveTo(se,q+ne,se,q+ne-Y),Q.lineTo(se,q+Y),Q.quadraticCurveTo(se,q,se+X,q)}else Q.rect(se,q,j,ne)},drawPoint:function(Q,se,q,j,ne){var $,X,Y,W,U,K;if(!se||"object"!=typeof se||"[object HTMLImageElement]"!==($=se.toString())&&"[object HTMLCanvasElement]"!==$){if(!(isNaN(q)||q<=0)){switch(se){default:Q.beginPath(),Q.arc(j,ne,q,0,2*Math.PI),Q.closePath(),Q.fill();break;case"triangle":Q.beginPath(),U=(X=3*q/Math.sqrt(3))*Math.sqrt(3)/2,Q.moveTo(j-X/2,ne+U/3),Q.lineTo(j+X/2,ne+U/3),Q.lineTo(j,ne-2*U/3),Q.closePath(),Q.fill();break;case"rect":K=1/Math.SQRT2*q,Q.beginPath(),Q.fillRect(j-K,ne-K,2*K,2*K),Q.strokeRect(j-K,ne-K,2*K,2*K);break;case"rectRounded":var le=q/Math.SQRT2,de=j-le,pe=ne-le,_e=Math.SQRT2*q;Q.beginPath(),this.roundedRect(Q,de,pe,_e,_e,q/2),Q.closePath(),Q.fill();break;case"rectRot":K=1/Math.SQRT2*q,Q.beginPath(),Q.moveTo(j-K,ne),Q.lineTo(j,ne+K),Q.lineTo(j+K,ne),Q.lineTo(j,ne-K),Q.closePath(),Q.fill();break;case"cross":Q.beginPath(),Q.moveTo(j,ne+q),Q.lineTo(j,ne-q),Q.moveTo(j-q,ne),Q.lineTo(j+q,ne),Q.closePath();break;case"crossRot":Q.beginPath(),Y=Math.cos(Math.PI/4)*q,W=Math.sin(Math.PI/4)*q,Q.moveTo(j-Y,ne-W),Q.lineTo(j+Y,ne+W),Q.moveTo(j-Y,ne+W),Q.lineTo(j+Y,ne-W),Q.closePath();break;case"star":Q.beginPath(),Q.moveTo(j,ne+q),Q.lineTo(j,ne-q),Q.moveTo(j-q,ne),Q.lineTo(j+q,ne),Y=Math.cos(Math.PI/4)*q,W=Math.sin(Math.PI/4)*q,Q.moveTo(j-Y,ne-W),Q.lineTo(j+Y,ne+W),Q.moveTo(j-Y,ne+W),Q.lineTo(j+Y,ne-W),Q.closePath();break;case"line":Q.beginPath(),Q.moveTo(j-q,ne),Q.lineTo(j+q,ne),Q.closePath();break;case"dash":Q.beginPath(),Q.moveTo(j,ne),Q.lineTo(j+q,ne),Q.closePath()}Q.stroke()}}else Q.drawImage(se,j-se.width/2,ne-se.height/2,se.width,se.height)},clipArea:function(Q,se){Q.save(),Q.beginPath(),Q.rect(se.left,se.top,se.right-se.left,se.bottom-se.top),Q.clip()},unclipArea:function(Q){Q.restore()},lineTo:function(Q,se,q,j){if(q.steppedLine)return"after"===q.steppedLine&&!j||"after"!==q.steppedLine&&j?Q.lineTo(se.x,q.y):Q.lineTo(q.x,se.y),void Q.lineTo(q.x,q.y);q.tension?Q.bezierCurveTo(j?se.controlPointPreviousX:se.controlPointNextX,j?se.controlPointPreviousY:se.controlPointNextY,j?q.controlPointNextX:q.controlPointPreviousX,j?q.controlPointNextY:q.controlPointPreviousY,q.x,q.y):Q.lineTo(q.x,q.y)}},Oe.clear=Ve.clear,Oe.drawRoundedRectangle=function(Q){Q.beginPath(),Ve.roundedRect.apply(Ve,arguments),Q.closePath()}},{42:42}],42:[function(Xe,St,wn){"use strict";var Ve,Oe={noop:function(){},uid:(Ve=0,function(){return Ve++}),isNullOrUndef:function(Ve){return null==Ve},isArray:Array.isArray?Array.isArray:function(Ve){return"[object Array]"===Object.prototype.toString.call(Ve)},isObject:function(Ve){return null!==Ve&&"[object Object]"===Object.prototype.toString.call(Ve)},valueOrDefault:function(Ve,Q){return void 0===Ve?Q:Ve},valueAtIndexOrDefault:function(Ve,Q,se){return Oe.valueOrDefault(Oe.isArray(Ve)?Ve[Q]:Ve,se)},callback:function(Ve,Q,se){if(Ve&&"function"==typeof Ve.call)return Ve.apply(se,Q)},each:function(Ve,Q,se,q){var j,ne,$;if(Oe.isArray(Ve))if(ne=Ve.length,q)for(j=ne-1;j>=0;j--)Q.call(se,Ve[j],j);else for(j=0;j<ne;j++)Q.call(se,Ve[j],j);else if(Oe.isObject(Ve))for(ne=($=Object.keys(Ve)).length,j=0;j<ne;j++)Q.call(se,Ve[$[j]],$[j])},arrayEquals:function(Ve,Q){var se,q,j,ne;if(!Ve||!Q||Ve.length!==Q.length)return!1;for(se=0,q=Ve.length;se<q;++se)if(ne=Q[se],(j=Ve[se])instanceof Array&&ne instanceof Array){if(!Oe.arrayEquals(j,ne))return!1}else if(j!==ne)return!1;return!0},clone:function(Ve){if(Oe.isArray(Ve))return Ve.map(Oe.clone);if(Oe.isObject(Ve)){for(var Q={},se=Object.keys(Ve),q=se.length,j=0;j<q;++j)Q[se[j]]=Oe.clone(Ve[se[j]]);return Q}return Ve},_merger:function(Ve,Q,se,q){var j=Q[Ve],ne=se[Ve];Oe.isObject(j)&&Oe.isObject(ne)?Oe.merge(j,ne,q):Q[Ve]=Oe.clone(ne)},_mergerIf:function(Ve,Q,se){var q=Q[Ve],j=se[Ve];Oe.isObject(q)&&Oe.isObject(j)?Oe.mergeIf(q,j):Q.hasOwnProperty(Ve)||(Q[Ve]=Oe.clone(j))},merge:function(Ve,Q,se){var q,j,ne,$,X,Y=Oe.isArray(Q)?Q:[Q],W=Y.length;if(!Oe.isObject(Ve))return Ve;for(q=(se=se||{}).merger||Oe._merger,j=0;j<W;++j)if(Oe.isObject(Q=Y[j]))for(X=0,$=(ne=Object.keys(Q)).length;X<$;++X)q(ne[X],Ve,Q,se);return Ve},mergeIf:function(Ve,Q){return Oe.merge(Ve,Q,{merger:Oe._mergerIf})},extend:function(Ve){for(var Q=1,se=arguments.length;Q<se;++Q)Oe.each(arguments[Q],function(q,j){Ve[j]=q});return Ve},inherits:function(Ve){var Q=this,se=Ve&&Ve.hasOwnProperty("constructor")?Ve.constructor:function(){return Q.apply(this,arguments)},q=function(){this.constructor=se};return q.prototype=Q.prototype,se.prototype=new q,se.extend=Oe.inherits,Ve&&Oe.extend(se.prototype,Ve),se.__super__=Q.prototype,se}};St.exports=Oe,Oe.callCallback=Oe.callback,Oe.indexOf=function(Ve,Q,se){return Array.prototype.indexOf.call(Ve,Q,se)},Oe.getValueOrDefault=Oe.valueOrDefault,Oe.getValueAtIndexOrDefault=Oe.valueAtIndexOrDefault},{}],43:[function(Xe,St,wn){"use strict";var Oe=Xe(42),Ve={linear:function(Q){return Q},easeInQuad:function(Q){return Q*Q},easeOutQuad:function(Q){return-Q*(Q-2)},easeInOutQuad:function(Q){return(Q/=.5)<1?.5*Q*Q:-.5*(--Q*(Q-2)-1)},easeInCubic:function(Q){return Q*Q*Q},easeOutCubic:function(Q){return(Q-=1)*Q*Q+1},easeInOutCubic:function(Q){return(Q/=.5)<1?.5*Q*Q*Q:.5*((Q-=2)*Q*Q+2)},easeInQuart:function(Q){return Q*Q*Q*Q},easeOutQuart:function(Q){return-((Q-=1)*Q*Q*Q-1)},easeInOutQuart:function(Q){return(Q/=.5)<1?.5*Q*Q*Q*Q:-.5*((Q-=2)*Q*Q*Q-2)},easeInQuint:function(Q){return Q*Q*Q*Q*Q},easeOutQuint:function(Q){return(Q-=1)*Q*Q*Q*Q+1},easeInOutQuint:function(Q){return(Q/=.5)<1?.5*Q*Q*Q*Q*Q:.5*((Q-=2)*Q*Q*Q*Q+2)},easeInSine:function(Q){return 1-Math.cos(Q*(Math.PI/2))},easeOutSine:function(Q){return Math.sin(Q*(Math.PI/2))},easeInOutSine:function(Q){return-.5*(Math.cos(Math.PI*Q)-1)},easeInExpo:function(Q){return 0===Q?0:Math.pow(2,10*(Q-1))},easeOutExpo:function(Q){return 1===Q?1:1-Math.pow(2,-10*Q)},easeInOutExpo:function(Q){return 0===Q?0:1===Q?1:(Q/=.5)<1?.5*Math.pow(2,10*(Q-1)):.5*(2-Math.pow(2,-10*--Q))},easeInCirc:function(Q){return Q>=1?Q:-(Math.sqrt(1-Q*Q)-1)},easeOutCirc:function(Q){return Math.sqrt(1-(Q-=1)*Q)},easeInOutCirc:function(Q){return(Q/=.5)<1?-.5*(Math.sqrt(1-Q*Q)-1):.5*(Math.sqrt(1-(Q-=2)*Q)+1)},easeInElastic:function(Q){var se=1.70158,q=0,j=1;return 0===Q?0:1===Q?1:(q||(q=.3),j<1?(j=1,se=q/4):se=q/(2*Math.PI)*Math.asin(1/j),-j*Math.pow(2,10*(Q-=1))*Math.sin((Q-se)*(2*Math.PI)/q))},easeOutElastic:function(Q){var se=1.70158,q=0,j=1;return 0===Q?0:1===Q?1:(q||(q=.3),j<1?(j=1,se=q/4):se=q/(2*Math.PI)*Math.asin(1/j),j*Math.pow(2,-10*Q)*Math.sin((Q-se)*(2*Math.PI)/q)+1)},easeInOutElastic:function(Q){var se=1.70158,q=0,j=1;return 0===Q?0:2==(Q/=.5)?1:(q||(q=.45),j<1?(j=1,se=q/4):se=q/(2*Math.PI)*Math.asin(1/j),Q<1?j*Math.pow(2,10*(Q-=1))*Math.sin((Q-se)*(2*Math.PI)/q)*-.5:j*Math.pow(2,-10*(Q-=1))*Math.sin((Q-se)*(2*Math.PI)/q)*.5+1)},easeInBack:function(Q){return Q*Q*(2.70158*Q-1.70158)},easeOutBack:function(Q){return(Q-=1)*Q*(2.70158*Q+1.70158)+1},easeInOutBack:function(Q){var se=1.70158;return(Q/=.5)<1?Q*Q*((1+(se*=1.525))*Q-se)*.5:.5*((Q-=2)*Q*((1+(se*=1.525))*Q+se)+2)},easeInBounce:function(Q){return 1-Ve.easeOutBounce(1-Q)},easeOutBounce:function(Q){return Q<1/2.75?7.5625*Q*Q:Q<2/2.75?7.5625*(Q-=1.5/2.75)*Q+.75:Q<2.5/2.75?7.5625*(Q-=2.25/2.75)*Q+.9375:7.5625*(Q-=2.625/2.75)*Q+.984375},easeInOutBounce:function(Q){return Q<.5?.5*Ve.easeInBounce(2*Q):.5*Ve.easeOutBounce(2*Q-1)+.5}};St.exports={effects:Ve},Oe.easingEffects=Ve},{42:42}],44:[function(Xe,St,wn){"use strict";var Oe=Xe(42);St.exports={toLineHeight:function(Ve,Q){var se=(""+Ve).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!se||"normal"===se[1])return 1.2*Q;switch(Ve=+se[2],se[3]){case"px":return Ve;case"%":Ve/=100}return Q*Ve},toPadding:function(Ve){var Q,se,q,j;return Oe.isObject(Ve)?(Q=+Ve.top||0,se=+Ve.right||0,q=+Ve.bottom||0,j=+Ve.left||0):Q=se=q=j=+Ve||0,{top:Q,right:se,bottom:q,left:j,height:Q+q,width:j+se}},resolve:function(Ve,Q,se){var q,j,ne;for(q=0,j=Ve.length;q<j;++q)if(void 0!==(ne=Ve[q])&&(void 0!==Q&&"function"==typeof ne&&(ne=ne(Q)),void 0!==se&&Oe.isArray(ne)&&(ne=ne[se]),void 0!==ne))return ne}}},{42:42}],45:[function(Xe,St,wn){"use strict";St.exports=Xe(42),St.exports.easing=Xe(43),St.exports.canvas=Xe(41),St.exports.options=Xe(44)},{41:41,42:42,43:43,44:44}],46:[function(Xe,St,wn){St.exports={acquireContext:function(Oe){return Oe&&Oe.canvas&&(Oe=Oe.canvas),Oe&&Oe.getContext("2d")||null}}},{}],47:[function(Xe,St,wn){"use strict";function Oe(ve,Me){var Pe=le.getStyle(ve,Me),ee=Pe&&Pe.match(/^(\d+)(\.\d+)?px$/);return ee?Number(ee[1]):void 0}function Q(ve,Me,Pe){ve.addEventListener(Me,Pe,Ue)}function se(ve,Me,Pe){ve.removeEventListener(Me,Pe,Ue)}function q(ve,Me,Pe,ee,Se){return{type:ve,chart:Me,native:Se||null,x:void 0!==Pe?Pe:null,y:void 0!==ee?ee:null}}var le=Xe(45),de="$chartjs",pe="chartjs-",_e=pe+"render-monitor",ae=pe+"render-animation",Ge=["animationstart","webkitAnimationStart"],Re={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ue=!!function(){var ve=!1;try{var Me=Object.defineProperty({},"passive",{get:function(){ve=!0}});window.addEventListener("e",null,Me)}catch{}return ve}()&&{passive:!0};St.exports={_enabled:typeof window<"u"&&typeof document<"u",initialize:function(){var ve="from{opacity:0.99}to{opacity:1}";!function K(ve,Me){var Pe=ve._style||document.createElement("style");ve._style||(ve._style=Pe,Me="/* Chart.js */\n"+Me,Pe.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(Pe)),Pe.appendChild(document.createTextNode(Me))}(this,"@-webkit-keyframes "+ae+"{"+ve+"}@keyframes "+ae+"{"+ve+"}."+_e+"{-webkit-animation:"+ae+" 0.001s;animation:"+ae+" 0.001s;}")},acquireContext:function(ve,Me){"string"==typeof ve?ve=document.getElementById(ve):ve.length&&(ve=ve[0]),ve&&ve.canvas&&(ve=ve.canvas);var Pe=ve&&ve.getContext&&ve.getContext("2d");return Pe&&Pe.canvas===ve?(function Ve(ve,Me){var Pe=ve.style,ee=ve.getAttribute("height"),Se=ve.getAttribute("width");if(ve[de]={initial:{height:ee,width:Se,style:{display:Pe.display,height:Pe.height,width:Pe.width}}},Pe.display=Pe.display||"block",null===Se||""===Se){var F=Oe(ve,"width");void 0!==F&&(ve.width=F)}if(null===ee||""===ee)if(""===ve.style.height)ve.height=ve.width/(Me.options.aspectRatio||2);else{var We=Oe(ve,"height");void 0!==F&&(ve.height=We)}}(ve,Me),Pe):null},releaseContext:function(ve){var Me=ve.canvas;if(Me[de]){var Pe=Me[de].initial;["height","width"].forEach(function(ee){var Se=Pe[ee];le.isNullOrUndef(Se)?Me.removeAttribute(ee):Me.setAttribute(ee,Se)}),le.each(Pe.style||{},function(ee,Se){Me.style[Se]=ee}),Me.width=Me.width,delete Me[de]}},addEventListener:function(ve,Me,Pe){var ee=ve.canvas;if("resize"!==Me){var Se=Pe[de]||(Pe[de]={});Q(ee,Me,(Se.proxies||(Se.proxies={}))[ve.id+"_"+Me]=function(F){Pe(function j(ve,Me){var Pe=Re[ve.type]||ve.type,ee=le.getRelativePosition(ve,Me);return q(Pe,Me,ee.x,ee.y,ve)}(F,ve))})}else!function W(ve,Me,Pe){var ee=ve[de]||(ve[de]={}),Se=ee.resizer=function $(ve){var Me=document.createElement("div"),Pe=pe+"size-monitor",ee="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;";Me.style.cssText=ee,Me.className=Pe,Me.innerHTML='<div class="'+Pe+'-expand" style="'+ee+'"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="'+Pe+'-shrink" style="'+ee+'"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div>';var Se=Me.childNodes[0],F=Me.childNodes[1];Me._reset=function(){Se.scrollLeft=1e6,Se.scrollTop=1e6,F.scrollLeft=1e6,F.scrollTop=1e6};var We=function(){Me._reset(),ve()};return Q(Se,"scroll",We.bind(Se,"expand")),Q(F,"scroll",We.bind(F,"shrink")),Me}(function ne(ve,Me){var Pe=!1,ee=[];return function(){ee=Array.prototype.slice.call(arguments),Me=Me||this,Pe||(Pe=!0,le.requestAnimFrame.call(window,function(){Pe=!1,ve.apply(Me,ee)}))}}(function(){if(ee.resizer)return Me(q("resize",Pe))}));!function X(ve,Me){var Pe=ve[de]||(ve[de]={}),ee=Pe.renderProxy=function(Se){Se.animationName===ae&&Me()};le.each(Ge,function(Se){Q(ve,Se,ee)}),Pe.reflow=!!ve.offsetParent,ve.classList.add(_e)}(ve,function(){if(ee.resizer){var F=ve.parentNode;F&&F!==Se.parentNode&&F.insertBefore(Se,F.firstChild),Se._reset()}})}(ee,Pe,ve)},removeEventListener:function(ve,Me,Pe){var ee=ve.canvas;if("resize"!==Me){var Se=((Pe[de]||{}).proxies||{})[ve.id+"_"+Me];Se&&se(ee,Me,Se)}else!function U(ve){var Me=ve[de]||{},Pe=Me.resizer;delete Me.resizer,function Y(ve){var Me=ve[de]||{},Pe=Me.renderProxy;Pe&&(le.each(Ge,function(ee){se(ve,ee,Pe)}),delete Me.renderProxy),ve.classList.remove(_e)}(ve),Pe&&Pe.parentNode&&Pe.parentNode.removeChild(Pe)}(ee)}},le.addEvent=Q,le.removeEvent=se},{45:45}],48:[function(Xe,St,wn){"use strict";var Oe=Xe(45),Ve=Xe(46),Q=Xe(47);St.exports=Oe.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Q._enabled?Q:Ve)},{45:45,46:46,47:47}],49:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(40),Q=Xe(45);Oe._set("global",{plugins:{filler:{propagate:!0}}}),St.exports=function(){function se(U,K,le){var de,pe=U._model||{},_e=pe.fill;if(void 0===_e&&(_e=!!pe.backgroundColor),!1===_e||null===_e)return!1;if(!0===_e)return"origin";if(de=parseFloat(_e,10),isFinite(de)&&Math.floor(de)===de)return"-"!==_e[0]&&"+"!==_e[0]||(de=K+de),!(de===K||de<0||de>=le)&&de;switch(_e){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return _e;default:return!1}}function q(U){var K,le=U.el._model||{},de=U.el._scale||{},pe=U.fill,_e=null;if(isFinite(pe))return null;if("start"===pe?_e=void 0===le.scaleBottom?de.bottom:le.scaleBottom:"end"===pe?_e=void 0===le.scaleTop?de.top:le.scaleTop:void 0!==le.scaleZero?_e=le.scaleZero:de.getBasePosition?_e=de.getBasePosition():de.getBasePixel&&(_e=de.getBasePixel()),null!=_e){if(void 0!==_e.x&&void 0!==_e.y)return _e;if("number"==typeof _e&&isFinite(_e))return{x:(K=de.isHorizontal())?_e:null,y:K?null:_e}}return null}function j(U,K,le){var de,pe=U[K].fill,_e=[K];if(!le)return pe;for(;!1!==pe&&-1===_e.indexOf(pe);){if(!isFinite(pe))return pe;if(!(de=U[pe]))return!1;if(de.visible)return pe;_e.push(pe),pe=de.fill}return!1}function ne(U){var K=U.fill,le="dataset";return!1===K?null:(isFinite(K)||(le="boundary"),W[le](U))}function $(U){return U&&!U.skip}function X(U,K,le,de,pe){var _e;if(de&&pe){for(U.moveTo(K[0].x,K[0].y),_e=1;_e<de;++_e)Q.canvas.lineTo(U,K[_e-1],K[_e]);for(U.lineTo(le[pe-1].x,le[pe-1].y),_e=pe-1;_e>0;--_e)Q.canvas.lineTo(U,le[_e],le[_e-1],!0)}}var W={dataset:function(U){var K=U.fill,le=U.chart,de=le.getDatasetMeta(K),pe=de&&le.isDatasetVisible(K)&&de.dataset._children||[],_e=pe.length||0;return _e?function(ae,Ge){return Ge<_e&&pe[Ge]._view||null}:null},boundary:function(U){var K=U.boundary,le=K?K.x:null,de=K?K.y:null;return function(pe){return{x:null===le?pe.x:le,y:null===de?pe.y:de}}}};return{id:"filler",afterDatasetsUpdate:function(U,K){var le,de,pe,_e,ae=(U.data.datasets||[]).length,Ge=K.propagate,Re=[];for(de=0;de<ae;++de)_e=null,(pe=(le=U.getDatasetMeta(de)).dataset)&&pe._model&&pe instanceof Ve.Line&&(_e={visible:U.isDatasetVisible(de),fill:se(pe,de,ae),chart:U,el:pe}),le.$filler=_e,Re.push(_e);for(de=0;de<ae;++de)(_e=Re[de])&&(_e.fill=j(Re,de,Ge),_e.boundary=q(_e),_e.mapper=ne(_e))},beforeDatasetDraw:function(U,K){var le=K.meta.$filler;if(le){var de=U.ctx,pe=le.el,_e=pe._view,ae=pe._children||[],Ge=le.mapper,Re=_e.backgroundColor||Oe.global.defaultColor;Ge&&Re&&ae.length&&(Q.canvas.clipArea(de,U.chartArea),function Y(U,K,le,de,pe,_e){var ae,Ge,Re,Ue,ve,Me,Pe,ee=K.length,Se=de.spanGaps,F=[],We=[],_t=0,rt=0;for(U.beginPath(),ae=0,Ge=ee+!!_e;ae<Ge;++ae)ve=le(Ue=K[Re=ae%ee]._view,Re,de),Me=$(Ue),Pe=$(ve),Me&&Pe?(_t=F.push(Ue),rt=We.push(ve)):_t&&rt&&(Se?(Me&&F.push(Ue),Pe&&We.push(ve)):(X(U,F,We,_t,rt),_t=rt=0,F=[],We=[]));X(U,F,We,_t,rt),U.closePath(),U.fillStyle=pe,U.fill()}(de,ae,Ge,_e,Re,pe._loop),Q.canvas.unclipArea(de))}}}}},{25:25,40:40,45:45}],50:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(26),Q=Xe(45);Oe._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(se,q){var j=q.datasetIndex,ne=this.chart,$=ne.getDatasetMeta(j);$.hidden=null===$.hidden?!ne.data.datasets[j].hidden:null,ne.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(se){var q=se.data;return Q.isArray(q.datasets)?q.datasets.map(function(j,ne){return{text:j.label,fillStyle:Q.isArray(j.backgroundColor)?j.backgroundColor[0]:j.backgroundColor,hidden:!se.isDatasetVisible(ne),lineCap:j.borderCapStyle,lineDash:j.borderDash,lineDashOffset:j.borderDashOffset,lineJoin:j.borderJoinStyle,lineWidth:j.borderWidth,strokeStyle:j.borderColor,pointStyle:j.pointStyle,datasetIndex:ne}},this):[]}}},legendCallback:function(se){var q=[];q.push('<ul class="'+se.id+'-legend">');for(var j=0;j<se.data.datasets.length;j++)q.push('<li><span style="background-color:'+se.data.datasets[j].backgroundColor+'"></span>'),se.data.datasets[j].label&&q.push(se.data.datasets[j].label),q.push("</li>");return q.push("</ul>"),q.join("")}}),St.exports=function(se){function q(X,Y){return X.usePointStyle?Y*Math.SQRT2:X.boxWidth}function j(X,Y){var W=new se.Legend({ctx:X.ctx,options:Y,chart:X});ne.configure(X,W,Y),ne.addBox(X,W),X.legend=W}var ne=se.layoutService,$=Q.noop;return se.Legend=Ve.extend({initialize:function(X){Q.extend(this,X),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:$,update:function(X,Y,W){var U=this;return U.beforeUpdate(),U.maxWidth=X,U.maxHeight=Y,U.margins=W,U.beforeSetDimensions(),U.setDimensions(),U.afterSetDimensions(),U.beforeBuildLabels(),U.buildLabels(),U.afterBuildLabels(),U.beforeFit(),U.fit(),U.afterFit(),U.afterUpdate(),U.minSize},afterUpdate:$,beforeSetDimensions:$,setDimensions:function(){var X=this;X.isHorizontal()?(X.width=X.maxWidth,X.left=0,X.right=X.width):(X.height=X.maxHeight,X.top=0,X.bottom=X.height),X.paddingLeft=0,X.paddingTop=0,X.paddingRight=0,X.paddingBottom=0,X.minSize={width:0,height:0}},afterSetDimensions:$,beforeBuildLabels:$,buildLabels:function(){var X=this,Y=X.options.labels||{},W=Q.callback(Y.generateLabels,[X.chart],X)||[];Y.filter&&(W=W.filter(function(U){return Y.filter(U,X.chart.data)})),X.options.reverse&&W.reverse(),X.legendItems=W},afterBuildLabels:$,beforeFit:$,fit:function(){var X=this,Y=X.options,W=Y.labels,U=Y.display,K=X.ctx,le=Oe.global,de=Q.valueOrDefault,pe=de(W.fontSize,le.defaultFontSize),_e=de(W.fontStyle,le.defaultFontStyle),ae=de(W.fontFamily,le.defaultFontFamily),Ge=Q.fontString(pe,_e,ae),Re=X.legendHitBoxes=[],Ue=X.minSize,ve=X.isHorizontal();if(ve?(Ue.width=X.maxWidth,Ue.height=U?10:0):(Ue.width=U?10:0,Ue.height=X.maxHeight),U)if(K.font=Ge,ve){var Me=X.lineWidths=[0],Pe=X.legendItems.length?pe+W.padding:0;K.textAlign="left",K.textBaseline="top",Q.each(X.legendItems,function(wt,nt){var Bt=q(W,pe)+pe/2+K.measureText(wt.text).width;Me[Me.length-1]+Bt+W.padding>=X.width&&(Pe+=pe+W.padding,Me[Me.length]=X.left),Re[nt]={left:0,top:0,width:Bt,height:pe},Me[Me.length-1]+=Bt+W.padding}),Ue.height+=Pe}else{var ee=W.padding,Se=X.columnWidths=[],F=W.padding,We=0,_t=0,rt=pe+ee;Q.each(X.legendItems,function(wt,nt){var Bt=q(W,pe)+pe/2+K.measureText(wt.text).width;_t+rt>Ue.height&&(F+=We+W.padding,Se.push(We),We=0,_t=0),We=Math.max(We,Bt),_t+=rt,Re[nt]={left:0,top:0,width:Bt,height:pe}}),F+=We,Se.push(We),Ue.width+=F}X.width=Ue.width,X.height=Ue.height},afterFit:$,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var X=this,Y=X.options,W=Y.labels,U=Oe.global,K=U.elements.line,le=X.width,de=X.lineWidths;if(Y.display){var pe,_e=X.ctx,ae=Q.valueOrDefault,Ge=ae(W.fontColor,U.defaultFontColor),Re=ae(W.fontSize,U.defaultFontSize),Ue=ae(W.fontStyle,U.defaultFontStyle),ve=ae(W.fontFamily,U.defaultFontFamily),Me=Q.fontString(Re,Ue,ve);_e.textAlign="left",_e.textBaseline="middle",_e.lineWidth=.5,_e.strokeStyle=Ge,_e.fillStyle=Ge,_e.font=Me;var Pe=q(W,Re),ee=X.legendHitBoxes,We=X.isHorizontal();pe=We?{x:X.left+(le-de[0])/2,y:X.top+W.padding,line:0}:{x:X.left+W.padding,y:X.top+W.padding,line:0};var _t=Re+W.padding;Q.each(X.legendItems,function(rt,wt){var nt=_e.measureText(rt.text).width,Bt=Pe+Re/2+nt,Wt=pe.x,ue=pe.y;We?Wt+Bt>=le&&(ue=pe.y+=_t,pe.line++,Wt=pe.x=X.left+(le-de[pe.line])/2):ue+_t>X.bottom&&(Wt=pe.x=Wt+X.columnWidths[pe.line]+W.padding,ue=pe.y=X.top+W.padding,pe.line++),function(rt,wt,nt){if(!(isNaN(Pe)||Pe<=0)){_e.save(),_e.fillStyle=ae(nt.fillStyle,U.defaultColor),_e.lineCap=ae(nt.lineCap,K.borderCapStyle),_e.lineDashOffset=ae(nt.lineDashOffset,K.borderDashOffset),_e.lineJoin=ae(nt.lineJoin,K.borderJoinStyle),_e.lineWidth=ae(nt.lineWidth,K.borderWidth),_e.strokeStyle=ae(nt.strokeStyle,U.defaultColor);var Bt=0===ae(nt.lineWidth,K.borderWidth);if(_e.setLineDash&&_e.setLineDash(ae(nt.lineDash,K.borderDash)),Y.labels&&Y.labels.usePointStyle){var Wt=Re*Math.SQRT2/2,ue=Wt/Math.SQRT2;Q.canvas.drawPoint(_e,nt.pointStyle,Wt,rt+ue,wt+ue)}else Bt||_e.strokeRect(rt,wt,Pe,Re),_e.fillRect(rt,wt,Pe,Re);_e.restore()}}(Wt,ue,rt),ee[wt].left=Wt,ee[wt].top=ue,function(rt,wt,nt,Bt){var Wt=Re/2,ue=Pe+Wt+rt,Ct=wt+Wt;_e.fillText(nt.text,ue,Ct),nt.hidden&&(_e.beginPath(),_e.lineWidth=2,_e.moveTo(ue,Ct),_e.lineTo(ue+Bt,Ct),_e.stroke())}(Wt,ue,rt,nt),We?pe.x+=Bt+W.padding:pe.y+=_t})}},handleEvent:function(X){var Y=this,W=Y.options,U="mouseup"===X.type?"click":X.type,K=!1;if("mousemove"===U){if(!W.onHover)return}else if("click"!==U||!W.onClick)return;var le=X.x,de=X.y;if(le>=Y.left&&le<=Y.right&&de>=Y.top&&de<=Y.bottom)for(var pe=Y.legendHitBoxes,_e=0;_e<pe.length;++_e){var ae=pe[_e];if(le>=ae.left&&le<=ae.left+ae.width&&de>=ae.top&&de<=ae.top+ae.height){if("click"===U){W.onClick.call(Y,X.native,Y.legendItems[_e]),K=!0;break}if("mousemove"===U){W.onHover.call(Y,X.native,Y.legendItems[_e]),K=!0;break}}}return K}}),{id:"legend",beforeInit:function(X){var Y=X.options.legend;Y&&j(X,Y)},beforeUpdate:function(X){var Y=X.options.legend,W=X.legend;Y?(Q.mergeIf(Y,Oe.global.legend),W?(ne.configure(X,W,Y),W.options=Y):j(X,Y)):W&&(ne.removeBox(X,W),delete X.legend)},afterEvent:function(X,Y){var W=X.legend;W&&W.handleEvent(Y)}}}},{25:25,26:26,45:45}],51:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(26),Q=Xe(45);Oe._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,lineHeight:1.2,padding:10,position:"top",text:"",weight:2e3}}),St.exports=function(se){function q($,X){var Y=new se.Title({ctx:$.ctx,options:X,chart:$});j.configure($,Y,X),j.addBox($,Y),$.titleBlock=Y}var j=se.layoutService,ne=Q.noop;return se.Title=Ve.extend({initialize:function($){Q.extend(this,$),this.legendHitBoxes=[]},beforeUpdate:ne,update:function($,X,Y){var W=this;return W.beforeUpdate(),W.maxWidth=$,W.maxHeight=X,W.margins=Y,W.beforeSetDimensions(),W.setDimensions(),W.afterSetDimensions(),W.beforeBuildLabels(),W.buildLabels(),W.afterBuildLabels(),W.beforeFit(),W.fit(),W.afterFit(),W.afterUpdate(),W.minSize},afterUpdate:ne,beforeSetDimensions:ne,setDimensions:function(){var $=this;$.isHorizontal()?($.width=$.maxWidth,$.left=0,$.right=$.width):($.height=$.maxHeight,$.top=0,$.bottom=$.height),$.paddingLeft=0,$.paddingTop=0,$.paddingRight=0,$.paddingBottom=0,$.minSize={width:0,height:0}},afterSetDimensions:ne,beforeBuildLabels:ne,buildLabels:ne,afterBuildLabels:ne,beforeFit:ne,fit:function(){var $=this,Y=$.options,W=Y.display,U=(0,Q.valueOrDefault)(Y.fontSize,Oe.global.defaultFontSize),K=$.minSize,le=Q.isArray(Y.text)?Y.text.length:1,de=Q.options.toLineHeight(Y.lineHeight,U),pe=W?le*de+2*Y.padding:0;$.isHorizontal()?(K.width=$.maxWidth,K.height=pe):(K.width=pe,K.height=$.maxHeight),$.width=K.width,$.height=K.height},afterFit:ne,isHorizontal:function(){var $=this.options.position;return"top"===$||"bottom"===$},draw:function(){var $=this,X=$.ctx,Y=Q.valueOrDefault,W=$.options,U=Oe.global;if(W.display){var K,le,de,pe=Y(W.fontSize,U.defaultFontSize),_e=Y(W.fontStyle,U.defaultFontStyle),ae=Y(W.fontFamily,U.defaultFontFamily),Ge=Q.fontString(pe,_e,ae),Re=Q.options.toLineHeight(W.lineHeight,pe),Ue=Re/2+W.padding,ve=0,Me=$.top,Pe=$.left,ee=$.bottom,Se=$.right;X.fillStyle=Y(W.fontColor,U.defaultFontColor),X.font=Ge,$.isHorizontal()?(le=Pe+(Se-Pe)/2,de=Me+Ue,K=Se-Pe):(le="left"===W.position?Pe+Ue:Se-Ue,de=Me+(ee-Me)/2,K=ee-Me,ve=Math.PI*("left"===W.position?-.5:.5)),X.save(),X.translate(le,de),X.rotate(ve),X.textAlign="center",X.textBaseline="middle";var F=W.text;if(Q.isArray(F))for(var We=0,_t=0;_t<F.length;++_t)X.fillText(F[_t],0,We,K),We+=Re;else X.fillText(F,0,0,K);X.restore()}}}),{id:"title",beforeInit:function($){var X=$.options.title;X&&q($,X)},beforeUpdate:function($){var X=$.options.title,Y=$.titleBlock;X?(Q.mergeIf(X,Oe.global.title),Y?(j.configure($,Y,X),Y.options=X):q($,X)):Y&&(se.layoutService.removeBox($,Y),delete $.titleBlock)}}}},{25:25,26:26,45:45}],52:[function(Xe,St,wn){"use strict";St.exports=function(Oe){var Ve=Oe.Scale.extend({getLabels:function(){var Q=this.chart.data;return this.options.labels||(this.isHorizontal()?Q.xLabels:Q.yLabels)||Q.labels},determineDataLimits:function(){var q,Q=this,se=Q.getLabels();Q.minIndex=0,Q.maxIndex=se.length-1,void 0!==Q.options.ticks.min&&(q=se.indexOf(Q.options.ticks.min),Q.minIndex=-1!==q?q:Q.minIndex),void 0!==Q.options.ticks.max&&(q=se.indexOf(Q.options.ticks.max),Q.maxIndex=-1!==q?q:Q.maxIndex),Q.min=se[Q.minIndex],Q.max=se[Q.maxIndex]},buildTicks:function(){var Q=this,se=Q.getLabels();Q.ticks=0===Q.minIndex&&Q.maxIndex===se.length-1?se:se.slice(Q.minIndex,Q.maxIndex+1)},getLabelForIndex:function(Q,se){var q=this,j=q.chart.data,ne=q.isHorizontal();return j.yLabels&&!ne?q.getRightValue(j.datasets[se].data[Q]):q.ticks[Q-q.minIndex]},getPixelForValue:function(Q,se){var q,j=this,ne=j.options.offset,$=Math.max(j.maxIndex+1-j.minIndex-(ne?0:1),1);if(null!=Q&&(q=j.isHorizontal()?Q.x:Q.y),void 0!==q||void 0!==Q&&isNaN(se)){var Y=j.getLabels().indexOf(Q=q||Q);se=-1!==Y?Y:se}if(j.isHorizontal()){var W=j.width/$,U=W*(se-j.minIndex);return ne&&(U+=W/2),j.left+Math.round(U)}var K=j.height/$,le=K*(se-j.minIndex);return ne&&(le+=K/2),j.top+Math.round(le)},getPixelForTick:function(Q){return this.getPixelForValue(this.ticks[Q],Q+this.minIndex,null)},getValueForPixel:function(Q){var se=this,q=se.options.offset,j=Math.max(se._ticks.length-(q?0:1),1),ne=se.isHorizontal(),$=(ne?se.width:se.height)/j;return Q-=ne?se.left:se.top,q&&(Q-=$/2),(Q<=0?0:Math.round(Q/$))+se.minIndex},getBasePixel:function(){return this.bottom}});Oe.scaleService.registerScaleType("category",Ve,{position:"bottom"})}},{}],53:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(45),Q=Xe(34);St.exports=function(se){var q={position:"left",ticks:{callback:Q.formatters.linear}},j=se.LinearScaleBase.extend({determineDataLimits:function(){function ne(de){return U?de.xAxisID===$.id:de.yAxisID===$.id}var $=this,X=$.options,Y=$.chart,W=Y.data.datasets,U=$.isHorizontal();$.min=null,$.max=null;var K=X.stacked;if(void 0===K&&Ve.each(W,function(de,pe){if(!K){var _e=Y.getDatasetMeta(pe);Y.isDatasetVisible(pe)&&ne(_e)&&void 0!==_e.stack&&(K=!0)}}),X.stacked||K){var le={};Ve.each(W,function(de,pe){var _e=Y.getDatasetMeta(pe),ae=[_e.type,void 0===X.stacked&&void 0===_e.stack?pe:"",_e.stack].join(".");void 0===le[ae]&&(le[ae]={positiveValues:[],negativeValues:[]});var Ge=le[ae].positiveValues,Re=le[ae].negativeValues;Y.isDatasetVisible(pe)&&ne(_e)&&Ve.each(de.data,function(Ue,ve){var Me=+$.getRightValue(Ue);isNaN(Me)||_e.data[ve].hidden||(Ge[ve]=Ge[ve]||0,Re[ve]=Re[ve]||0,X.relativePoints?Ge[ve]=100:Me<0?Re[ve]+=Me:Ge[ve]+=Me)})}),Ve.each(le,function(de){var pe=de.positiveValues.concat(de.negativeValues),_e=Ve.min(pe),ae=Ve.max(pe);$.min=null===$.min?_e:Math.min($.min,_e),$.max=null===$.max?ae:Math.max($.max,ae)})}else Ve.each(W,function(de,pe){var _e=Y.getDatasetMeta(pe);Y.isDatasetVisible(pe)&&ne(_e)&&Ve.each(de.data,function(ae,Ge){var Re=+$.getRightValue(ae);isNaN(Re)||_e.data[Ge].hidden||((null===$.min||Re<$.min)&&($.min=Re),(null===$.max||Re>$.max)&&($.max=Re))})});$.min=isFinite($.min)&&!isNaN($.min)?$.min:0,$.max=isFinite($.max)&&!isNaN($.max)?$.max:1,this.handleTickRangeOptions()},getTickLimit:function(){var ne,$=this,X=$.options.ticks;if($.isHorizontal())ne=Math.min(X.maxTicksLimit?X.maxTicksLimit:11,Math.ceil($.width/50));else{var Y=Ve.valueOrDefault(X.fontSize,Oe.global.defaultFontSize);ne=Math.min(X.maxTicksLimit?X.maxTicksLimit:11,Math.ceil($.height/(2*Y)))}return ne},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(ne,$){return+this.getRightValue(this.chart.data.datasets[$].data[ne])},getPixelForValue:function(ne){var $,X=this,Y=X.start,W=+X.getRightValue(ne),U=X.end-Y;return X.isHorizontal()?($=X.left+X.width/U*(W-Y),Math.round($)):($=X.bottom-X.height/U*(W-Y),Math.round($))},getValueForPixel:function(ne){var $=this,X=$.isHorizontal();return $.start+(X?ne-$.left:$.bottom-ne)/(X?$.width:$.height)*($.end-$.start)},getPixelForTick:function(ne){return this.getPixelForValue(this.ticksAsNumbers[ne])}});se.scaleService.registerScaleType("linear",j,q)}},{25:25,34:34,45:45}],54:[function(Xe,St,wn){"use strict";var Oe=Xe(45),Ve=Xe(34);St.exports=function(Q){var se=Oe.noop;Q.LinearScaleBase=Q.Scale.extend({getRightValue:function(q){return"string"==typeof q?+q:Q.Scale.prototype.getRightValue.call(this,q)},handleTickRangeOptions:function(){var q=this,j=q.options.ticks;if(j.beginAtZero){var ne=Oe.sign(q.min),$=Oe.sign(q.max);ne<0&&$<0?q.max=0:ne>0&&$>0&&(q.min=0)}var X=void 0!==j.min||void 0!==j.suggestedMin,Y=void 0!==j.max||void 0!==j.suggestedMax;void 0!==j.min?q.min=j.min:void 0!==j.suggestedMin&&(q.min=null===q.min?j.suggestedMin:Math.min(q.min,j.suggestedMin)),void 0!==j.max?q.max=j.max:void 0!==j.suggestedMax&&(q.max=null===q.max?j.suggestedMax:Math.max(q.max,j.suggestedMax)),X!==Y&&q.min>=q.max&&(X?q.max=q.min+1:q.min=q.max-1),q.min===q.max&&(q.max++,j.beginAtZero||q.min--)},getTickLimit:se,handleDirectionalChanges:se,buildTicks:function(){var q=this,j=q.options.ticks,ne=q.getTickLimit(),$={maxTicks:ne=Math.max(2,ne),min:j.min,max:j.max,stepSize:Oe.valueOrDefault(j.fixedStepSize,j.stepSize)},X=q.ticks=Ve.generators.linear($,q);q.handleDirectionalChanges(),q.max=Oe.max(X),q.min=Oe.min(X),j.reverse?(X.reverse(),q.start=q.max,q.end=q.min):(q.start=q.min,q.end=q.max)},convertTicksToLabels:function(){var q=this;q.ticksAsNumbers=q.ticks.slice(),q.zeroLineIndex=q.ticks.indexOf(0),Q.Scale.prototype.convertTicksToLabels.call(q)}})}},{34:34,45:45}],55:[function(Xe,St,wn){"use strict";var Oe=Xe(45),Ve=Xe(34);St.exports=function(Q){var se={position:"left",ticks:{callback:Ve.formatters.logarithmic}},q=Q.Scale.extend({determineDataLimits:function(){function j(pe){return K?pe.xAxisID===ne.id:pe.yAxisID===ne.id}var ne=this,$=ne.options,X=$.ticks,Y=ne.chart,W=Y.data.datasets,U=Oe.valueOrDefault,K=ne.isHorizontal();ne.min=null,ne.max=null,ne.minNotZero=null;var le=$.stacked;if(void 0===le&&Oe.each(W,function(pe,_e){if(!le){var ae=Y.getDatasetMeta(_e);Y.isDatasetVisible(_e)&&j(ae)&&void 0!==ae.stack&&(le=!0)}}),$.stacked||le){var de={};Oe.each(W,function(pe,_e){var ae=Y.getDatasetMeta(_e),Ge=[ae.type,void 0===$.stacked&&void 0===ae.stack?_e:"",ae.stack].join(".");Y.isDatasetVisible(_e)&&j(ae)&&(void 0===de[Ge]&&(de[Ge]=[]),Oe.each(pe.data,function(Re,Ue){var ve=de[Ge],Me=+ne.getRightValue(Re);isNaN(Me)||ae.data[Ue].hidden||(ve[Ue]=ve[Ue]||0,$.relativePoints?ve[Ue]=100:ve[Ue]+=Me)}))}),Oe.each(de,function(pe){var _e=Oe.min(pe),ae=Oe.max(pe);ne.min=null===ne.min?_e:Math.min(ne.min,_e),ne.max=null===ne.max?ae:Math.max(ne.max,ae)})}else Oe.each(W,function(pe,_e){var ae=Y.getDatasetMeta(_e);Y.isDatasetVisible(_e)&&j(ae)&&Oe.each(pe.data,function(Ge,Re){var Ue=+ne.getRightValue(Ge);isNaN(Ue)||ae.data[Re].hidden||((null===ne.min||Ue<ne.min)&&(ne.min=Ue),(null===ne.max||Ue>ne.max)&&(ne.max=Ue),0!==Ue&&(null===ne.minNotZero||Ue<ne.minNotZero)&&(ne.minNotZero=Ue))})});ne.min=U(X.min,ne.min),ne.max=U(X.max,ne.max),ne.min===ne.max&&(0!==ne.min&&null!==ne.min?(ne.min=Math.pow(10,Math.floor(Oe.log10(ne.min))-1),ne.max=Math.pow(10,Math.floor(Oe.log10(ne.max))+1)):(ne.min=1,ne.max=10))},buildTicks:function(){var j=this,ne=j.options.ticks,X=j.ticks=Ve.generators.logarithmic({min:ne.min,max:ne.max},j);j.isHorizontal()||X.reverse(),j.max=Oe.max(X),j.min=Oe.min(X),ne.reverse?(X.reverse(),j.start=j.max,j.end=j.min):(j.start=j.min,j.end=j.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),Q.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(j,ne){return+this.getRightValue(this.chart.data.datasets[ne].data[j])},getPixelForTick:function(j){return this.getPixelForValue(this.tickValues[j])},getPixelForValue:function(j){var ne,$,X,Y=this,W=Y.start,U=+Y.getRightValue(j),K=Y.options.ticks;return Y.isHorizontal()?(X=Oe.log10(Y.end)-Oe.log10(W),$=0===U?Y.left:Y.left+(ne=Y.width)/X*(Oe.log10(U)-Oe.log10(W))):(ne=Y.height,0!==W||K.reverse?0===Y.end&&K.reverse?(X=Oe.log10(Y.start)-Oe.log10(Y.minNotZero),$=U===Y.end?Y.top:U===Y.minNotZero?Y.top+.02*ne:Y.top+.02*ne+.98*ne/X*(Oe.log10(U)-Oe.log10(Y.minNotZero))):0===U?$=K.reverse?Y.top:Y.bottom:(X=Oe.log10(Y.end)-Oe.log10(W),$=Y.bottom-(ne=Y.height)/X*(Oe.log10(U)-Oe.log10(W))):(X=Oe.log10(Y.end)-Oe.log10(Y.minNotZero),$=U===W?Y.bottom:U===Y.minNotZero?Y.bottom-.02*ne:Y.bottom-.02*ne-.98*ne/X*(Oe.log10(U)-Oe.log10(Y.minNotZero)))),$},getValueForPixel:function(j){var ne,$,X=this,Y=Oe.log10(X.end)-Oe.log10(X.start);return X.isHorizontal()?($=X.width,ne=X.start*Math.pow(10,(j-X.left)*Y/$)):($=X.height,ne=Math.pow(10,(X.bottom-j)*Y/$)/X.start),ne}});Q.scaleService.registerScaleType("logarithmic",q,se)}},{34:34,45:45}],56:[function(Xe,St,wn){"use strict";var Oe=Xe(25),Ve=Xe(45),Q=Xe(34);St.exports=function(se){function q(Re){var Ue=Re.options;return Ue.angleLines.display||Ue.pointLabels.display?Re.chart.data.labels.length:0}function j(Re){var Ue=Re.options.pointLabels,ve=Ve.valueOrDefault(Ue.fontSize,_e.defaultFontSize),Me=Ve.valueOrDefault(Ue.fontStyle,_e.defaultFontStyle),Pe=Ve.valueOrDefault(Ue.fontFamily,_e.defaultFontFamily);return{size:ve,style:Me,family:Pe,font:Ve.fontString(ve,Me,Pe)}}function ne(Re,Ue,ve){return Ve.isArray(ve)?{w:Ve.longestText(Re,Re.font,ve),h:ve.length*Ue+1.5*(ve.length-1)*Ue}:{w:Re.measureText(ve).width,h:Ue}}function $(Re,Ue,ve,Me,Pe){return Re===Me||Re===Pe?{start:Ue-ve/2,end:Ue+ve/2}:Re<Me||Re>Pe?{start:Ue-ve-5,end:Ue}:{start:Ue,end:Ue+ve+5}}function W(Re){return 0===Re||180===Re?"center":Re<180?"left":"right"}function U(Re,Ue,ve,Me){if(Ve.isArray(Ue))for(var Pe=ve.y,ee=1.5*Me,Se=0;Se<Ue.length;++Se)Re.fillText(Ue[Se],ve.x,Pe),Pe+=ee;else Re.fillText(Ue,ve.x,ve.y)}function K(Re,Ue,ve){90===Re||270===Re?ve.y-=Ue.h/2:(Re>270||Re<90)&&(ve.y-=Ue.h)}function pe(Re){return Ve.isNumber(Re)?Re:0}var _e=Oe.global,ae={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Q.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(Re){return Re}}},Ge=se.LinearScaleBase.extend({setDimensions:function(){var Re=this,Ue=Re.options,ve=Ue.ticks;Re.width=Re.maxWidth,Re.height=Re.maxHeight,Re.xCenter=Math.round(Re.width/2),Re.yCenter=Math.round(Re.height/2);var Me=Ve.min([Re.height,Re.width]),Pe=Ve.valueOrDefault(ve.fontSize,_e.defaultFontSize);Re.drawingArea=Ue.display?Me/2-(Pe/2+ve.backdropPaddingY):Me/2},determineDataLimits:function(){var Re=this,Ue=Re.chart,ve=Number.POSITIVE_INFINITY,Me=Number.NEGATIVE_INFINITY;Ve.each(Ue.data.datasets,function(Pe,ee){if(Ue.isDatasetVisible(ee)){var Se=Ue.getDatasetMeta(ee);Ve.each(Pe.data,function(F,We){var _t=+Re.getRightValue(F);isNaN(_t)||Se.data[We].hidden||(ve=Math.min(_t,ve),Me=Math.max(_t,Me))})}}),Re.min=ve===Number.POSITIVE_INFINITY?0:ve,Re.max=Me===Number.NEGATIVE_INFINITY?0:Me,Re.handleTickRangeOptions()},getTickLimit:function(){var Re=this.options.ticks,Ue=Ve.valueOrDefault(Re.fontSize,_e.defaultFontSize);return Math.min(Re.maxTicksLimit?Re.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*Ue)))},convertTicksToLabels:function(){var Re=this;se.LinearScaleBase.prototype.convertTicksToLabels.call(Re),Re.pointLabels=Re.chart.data.labels.map(Re.options.pointLabels.callback,Re)},getLabelForIndex:function(Re,Ue){return+this.getRightValue(this.chart.data.datasets[Ue].data[Re])},fit:function(){this.options.pointLabels.display?function X(Re){var Ue,ve,Me,Pe=j(Re),ee=Math.min(Re.height/2,Re.width/2),Se={r:Re.width,l:0,t:Re.height,b:0},F={};Re.ctx.font=Pe.font,Re._pointLabelSizes=[];var We=q(Re);for(Ue=0;Ue<We;Ue++){Me=Re.getPointPosition(Ue,ee),ve=ne(Re.ctx,Pe.size,Re.pointLabels[Ue]||""),Re._pointLabelSizes[Ue]=ve;var _t=Re.getIndexAngle(Ue),rt=Ve.toDegrees(_t)%360,wt=$(rt,Me.x,ve.w,0,180),nt=$(rt,Me.y,ve.h,90,270);wt.start<Se.l&&(Se.l=wt.start,F.l=_t),wt.end>Se.r&&(Se.r=wt.end,F.r=_t),nt.start<Se.t&&(Se.t=nt.start,F.t=_t),nt.end>Se.b&&(Se.b=nt.end,F.b=_t)}Re.setReductions(ee,Se,F)}(this):function Y(Re){var Ue=Math.min(Re.height/2,Re.width/2);Re.drawingArea=Math.round(Ue),Re.setCenterPoint(0,0,0,0)}(this)},setReductions:function(Re,Ue,ve){var Pe=Ue.l/Math.sin(ve.l),ee=Math.max(Ue.r-this.width,0)/Math.sin(ve.r),Se=-Ue.t/Math.cos(ve.t),F=-Math.max(Ue.b-this.height,0)/Math.cos(ve.b);Pe=pe(Pe),ee=pe(ee),Se=pe(Se),F=pe(F),this.drawingArea=Math.min(Math.round(Re-(Pe+ee)/2),Math.round(Re-(Se+F)/2)),this.setCenterPoint(Pe,ee,Se,F)},setCenterPoint:function(Re,Ue,ve,Me){var Pe=this,F=ve+Pe.drawingArea,We=Pe.height-Me-Pe.drawingArea;Pe.xCenter=Math.round((Re+Pe.drawingArea+(Pe.width-Ue-Pe.drawingArea))/2+Pe.left),Pe.yCenter=Math.round((F+We)/2+Pe.top)},getIndexAngle:function(Re){return Re*(2*Math.PI/q(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(Re){var Ue=this;if(null===Re)return 0;var ve=Ue.drawingArea/(Ue.max-Ue.min);return Ue.options.ticks.reverse?(Ue.max-Re)*ve:(Re-Ue.min)*ve},getPointPosition:function(Re,Ue){var Me=this.getIndexAngle(Re)-Math.PI/2;return{x:Math.round(Math.cos(Me)*Ue)+this.xCenter,y:Math.round(Math.sin(Me)*Ue)+this.yCenter}},getPointPositionForValue:function(Re,Ue){return this.getPointPosition(Re,this.getDistanceFromCenterForValue(Ue))},getBasePosition:function(){var Ue=this.min,ve=this.max;return this.getPointPositionForValue(0,this.beginAtZero?0:Ue<0&&ve<0?ve:Ue>0&&ve>0?Ue:0)},draw:function(){var Re=this,Ue=Re.options,ve=Ue.gridLines,Me=Ue.ticks,Pe=Ve.valueOrDefault;if(Ue.display){var ee=Re.ctx,Se=this.getIndexAngle(0),F=Pe(Me.fontSize,_e.defaultFontSize),We=Pe(Me.fontStyle,_e.defaultFontStyle),_t=Pe(Me.fontFamily,_e.defaultFontFamily),rt=Ve.fontString(F,We,_t);Ve.each(Re.ticks,function(wt,nt){if(nt>0||Me.reverse){var Bt=Re.getDistanceFromCenterForValue(Re.ticksAsNumbers[nt]);if(ve.display&&0!==nt&&function de(Re,Ue,ve,Me){var Pe=Re.ctx;if(Pe.strokeStyle=Ve.valueAtIndexOrDefault(Ue.color,Me-1),Pe.lineWidth=Ve.valueAtIndexOrDefault(Ue.lineWidth,Me-1),Re.options.gridLines.circular)Pe.beginPath(),Pe.arc(Re.xCenter,Re.yCenter,ve,0,2*Math.PI),Pe.closePath(),Pe.stroke();else{var ee=q(Re);if(0===ee)return;Pe.beginPath();var Se=Re.getPointPosition(0,ve);Pe.moveTo(Se.x,Se.y);for(var F=1;F<ee;F++)Se=Re.getPointPosition(F,ve),Pe.lineTo(Se.x,Se.y);Pe.closePath(),Pe.stroke()}}(Re,ve,Bt,nt),Me.display){var Wt=Pe(Me.fontColor,_e.defaultFontColor);if(ee.font=rt,ee.save(),ee.translate(Re.xCenter,Re.yCenter),ee.rotate(Se),Me.showLabelBackdrop){var ue=ee.measureText(wt).width;ee.fillStyle=Me.backdropColor,ee.fillRect(-ue/2-Me.backdropPaddingX,-Bt-F/2-Me.backdropPaddingY,ue+2*Me.backdropPaddingX,F+2*Me.backdropPaddingY)}ee.textAlign="center",ee.textBaseline="middle",ee.fillStyle=Wt,ee.fillText(wt,0,-Bt),ee.restore()}}}),(Ue.angleLines.display||Ue.pointLabels.display)&&function le(Re){var Ue=Re.ctx,ve=Ve.valueOrDefault,Me=Re.options,Pe=Me.angleLines,ee=Me.pointLabels;Ue.lineWidth=Pe.lineWidth,Ue.strokeStyle=Pe.color;var Se=Re.getDistanceFromCenterForValue(Me.ticks.reverse?Re.min:Re.max),F=j(Re);Ue.textBaseline="top";for(var We=q(Re)-1;We>=0;We--){if(Pe.display){var _t=Re.getPointPosition(We,Se);Ue.beginPath(),Ue.moveTo(Re.xCenter,Re.yCenter),Ue.lineTo(_t.x,_t.y),Ue.stroke(),Ue.closePath()}if(ee.display){var rt=Re.getPointPosition(We,Se+5),wt=ve(ee.fontColor,_e.defaultFontColor);Ue.font=F.font,Ue.fillStyle=wt;var nt=Re.getIndexAngle(We),Bt=Ve.toDegrees(nt);Ue.textAlign=W(Bt),K(Bt,Re._pointLabelSizes[We],rt),U(Ue,Re.pointLabels[We]||"",rt,F.size)}}}(Re)}}});se.scaleService.registerScaleType("radialLinear",Ge,ae)}},{25:25,34:34,45:45}],57:[function(Xe,St,wn){"use strict";function Oe(ve,Me){return ve-Me}function Ve(ve){var Me,Pe,ee,Se={},F=[];for(Me=0,Pe=ve.length;Me<Pe;++Me)Se[ee=ve[Me]]||(Se[ee]=!0,F.push(ee));return F}function q(ve,Me,Pe,ee){var Se=function se(ve,Me,Pe){for(var ee,Se,F,We=0,_t=ve.length-1;We>=0&&We<=_t;){if(F=ve[ee=We+_t>>1],!(Se=ve[ee-1]||null))return{lo:null,hi:F};if(F[Me]<Pe)We=ee+1;else{if(!(Se[Me]>Pe))return{lo:Se,hi:F};_t=ee-1}}return{lo:F,hi:null}}(ve,Me,Pe),F=Se.lo?Se.hi?Se.lo:ve[ve.length-2]:ve[0],We=Se.lo?Se.hi?Se.hi:ve[ve.length-1]:ve[1],_t=We[Me]-F[Me];return F[ee]+(We[ee]-F[ee])*(_t?(Pe-F[Me])/_t:0)}function j(ve,Me){var Pe=Me.parser,ee=Me.parser||Me.format;return"function"==typeof Pe?Pe(ve):"string"==typeof ve&&"string"==typeof ee?de(ve,ee):(ve instanceof de||(ve=de(ve)),ve.isValid()?ve:"function"==typeof ee?ee(ve):ve)}function ne(ve,Me){if(_e.isNullOrUndef(ve))return null;var Pe=Me.options.time,ee=j(Me.getRightValue(ve),Pe);return ee.isValid()?(Pe.round&&ee.startOf(Pe.round),ee.valueOf()):null}function W(ve){for(var Me=Ue.indexOf(ve)+1,Pe=Ue.length;Me<Pe;++Me)if(Re[Ue[Me]].common)return Ue[Me]}var de=Xe(1);de="function"==typeof de?de:window.moment;var pe=Xe(25),_e=Xe(45),ae=Number.MIN_SAFE_INTEGER||-9007199254740991,Ge=Number.MAX_SAFE_INTEGER||9007199254740991,Re={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},Ue=Object.keys(Re);St.exports=function(ve){var Me=ve.Scale.extend({initialize:function(){if(!de)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");this.mergeTicksOptions(),ve.Scale.prototype.initialize.call(this)},update:function(){var ee=this.options;return ee.time&&ee.time.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),ve.Scale.prototype.update.apply(this,arguments)},getRightValue:function(Pe){return Pe&&void 0!==Pe.t&&(Pe=Pe.t),ve.Scale.prototype.getRightValue.call(this,Pe)},determineDataLimits:function(){var Pe,ee,Se,F,We,_t,rt=this,wt=rt.chart,nt=rt.options.time,Bt=Ge,Wt=ae,ue=[],Ct=[],Gt=[];for(Pe=0,Se=wt.data.labels.length;Pe<Se;++Pe)Gt.push(ne(wt.data.labels[Pe],rt));for(Pe=0,Se=(wt.data.datasets||[]).length;Pe<Se;++Pe)if(wt.isDatasetVisible(Pe))if(_e.isObject((We=wt.data.datasets[Pe].data)[0]))for(Ct[Pe]=[],ee=0,F=We.length;ee<F;++ee)_t=ne(We[ee],rt),ue.push(_t),Ct[Pe][ee]=_t;else ue.push.apply(ue,Gt),Ct[Pe]=Gt.slice(0);else Ct[Pe]=[];Gt.length&&(Gt=Ve(Gt).sort(Oe),Bt=Math.min(Bt,Gt[0]),Wt=Math.max(Wt,Gt[Gt.length-1])),ue.length&&(ue=Ve(ue).sort(Oe),Bt=Math.min(Bt,ue[0]),Wt=Math.max(Wt,ue[ue.length-1])),Bt=ne(nt.min,rt)||Bt,Wt=ne(nt.max,rt)||Wt,Bt=Bt===Ge?+de().startOf("day"):Bt,Wt=Wt===ae?+de().endOf("day")+1:Wt,rt.min=Math.min(Bt,Wt),rt.max=Math.max(Bt+1,Wt),rt._horizontal=rt.isHorizontal(),rt._table=[],rt._timestamps={data:ue,datasets:Ct,labels:Gt}},buildTicks:function(){var Pe,ee,Se,F=this,We=F.min,_t=F.max,rt=F.options,wt=rt.time,nt=[],Bt=[];switch(rt.ticks.source){case"data":nt=F._timestamps.data;break;case"labels":nt=F._timestamps.labels;break;default:nt=function U(ve,Me,Pe,ee){var Se,F=ee.time,We=F.unit||function X(ve,Me,Pe,ee){var Se,F,_t=Ue.length;for(Se=Ue.indexOf(ve);Se<_t-1;++Se)if((F=Re[Ue[Se]]).common&&Math.ceil((Pe-Me)/((F.steps?F.steps[F.steps.length-1]:Ge)*F.size))<=ee)return Ue[Se];return Ue[_t-1]}(F.minUnit,ve,Me,Pe),_t=W(We),rt=_e.valueOrDefault(F.stepSize,F.unitStepSize),wt="week"===We&&F.isoWeekday,nt=ee.ticks.major.enabled,Bt=Re[We],Wt=de(ve),ue=de(Me),Ct=[];for(rt||(rt=function $(ve,Me,Pe,ee){var Se,F,We,_t=Me-ve,rt=Re[Pe],wt=rt.size,nt=rt.steps;if(!nt)return Math.ceil(_t/((ee||1)*wt));for(Se=0,F=nt.length;Se<F&&(We=nt[Se],!(Math.ceil(_t/(wt*We))<=ee));++Se);return We}(ve,Me,We,Pe)),wt&&(Wt=Wt.isoWeekday(wt),ue=ue.isoWeekday(wt)),Wt=Wt.startOf(wt?"day":We),(ue=ue.startOf(wt?"day":We))<Me&&ue.add(1,We),Se=de(Wt),nt&&_t&&!wt&&!F.round&&(Se.startOf(_t),Se.add(~~((Wt-Se)/(Bt.size*rt))*rt,We));Se<ue;Se.add(rt,We))Ct.push(+Se);return Ct.push(+Se),Ct}(We,_t,F.getLabelCapacity(We),rt)}for("ticks"===rt.bounds&&nt.length&&(We=nt[0],_t=nt[nt.length-1]),We=ne(wt.min,F)||We,_t=ne(wt.max,F)||_t,Pe=0,ee=nt.length;Pe<ee;++Pe)(Se=nt[Pe])>=We&&Se<=_t&&Bt.push(Se);return F.min=We,F.max=_t,F._unit=wt.unit||function Y(ve,Me,Pe,ee){var Se,F,We=de.duration(de(ee).diff(de(Pe)));for(Se=Ue.length-1;Se>=Ue.indexOf(Me);Se--)if(Re[F=Ue[Se]].common&&We.as(F)>=ve.length)return F;return Ue[Me?Ue.indexOf(Me):0]}(Bt,wt.minUnit,F.min,F.max),F._majorUnit=W(F._unit),F._table=function Q(ve,Me,Pe,ee){if("linear"===ee||!ve.length)return[{time:Me,pos:0},{time:Pe,pos:1}];var Se,F,We,_t,rt,wt=[],nt=[Me];for(Se=0,F=ve.length;Se<F;++Se)(_t=ve[Se])>Me&&_t<Pe&&nt.push(_t);for(nt.push(Pe),Se=0,F=nt.length;Se<F;++Se)rt=nt[Se+1],_t=nt[Se],void 0!==(We=nt[Se-1])&&void 0!==rt&&Math.round((rt+We)/2)===_t||wt.push({time:_t,pos:Se/(F-1)});return wt}(F._timestamps.data,We,_t,rt.distribution),F._offsets=function K(ve,Me,Pe,ee,Se){var We,_t=0,rt=0;return Se.offset&&Me.length&&(Se.time.min||(We=Me[0],_t=(q(ve,"time",Me.length>1?Me[1]:ee,"pos")-q(ve,"time",We,"pos"))/2),Se.time.max||(We=Me.length>1?Me[Me.length-2]:Pe,rt=(q(ve,"time",Me[Me.length-1],"pos")-q(ve,"time",We,"pos"))/2)),{left:_t,right:rt}}(F._table,Bt,We,_t,rt),function le(ve,Me){var Pe,ee,Se,F,We=[];for(Pe=0,ee=ve.length;Pe<ee;++Pe)Se=ve[Pe],F=!!Me&&Se===+de(Se).startOf(Me),We.push({value:Se,major:F});return We}(Bt,F._majorUnit)},getLabelForIndex:function(Pe,ee){var F=this.chart.data,We=this.options.time,_t=F.labels&&Pe<F.labels.length?F.labels[Pe]:"",rt=F.datasets[ee].data[Pe];return _e.isObject(rt)&&(_t=this.getRightValue(rt)),We.tooltipFormat&&(_t=j(_t,We).format(We.tooltipFormat)),_t},tickFormatFunction:function(Pe,ee,Se,F){var _t=this.options,rt=Pe.valueOf(),wt=_t.time.displayFormats,nt=wt[this._unit],Bt=this._majorUnit,Wt=wt[Bt],ue=Pe.clone().startOf(Bt).valueOf(),Ct=_t.ticks.major,Gt=Ct.enabled&&Bt&&Wt&&rt===ue,xi=Pe.format(F||(Gt?Wt:nt)),to=Gt?Ct:_t.ticks.minor,Jt=_e.valueOrDefault(to.callback,to.userCallback);return Jt?Jt(xi,ee,Se):xi},convertTicksToLabels:function(Pe){var ee,Se,F=[];for(ee=0,Se=Pe.length;ee<Se;++ee)F.push(this.tickFormatFunction(de(Pe[ee].value),ee,Pe));return F},getPixelForOffset:function(Pe){var ee=this,Se=ee._horizontal?ee.width:ee.height,F=ee._horizontal?ee.left:ee.top,We=q(ee._table,"time",Pe,"pos");return F+Se*(ee._offsets.left+We)/(ee._offsets.left+1+ee._offsets.right)},getPixelForValue:function(Pe,ee,Se){var F=this,We=null;if(void 0!==ee&&void 0!==Se&&(We=F._timestamps.datasets[Se][ee]),null===We&&(We=ne(Pe,F)),null!==We)return F.getPixelForOffset(We)},getPixelForTick:function(Pe){var ee=this.getTicks();return Pe>=0&&Pe<ee.length?this.getPixelForOffset(ee[Pe].value):null},getValueForPixel:function(Pe){var ee=this,Se=ee._horizontal?ee.width:ee.height,_t=q(ee._table,"pos",(Se?(Pe-(ee._horizontal?ee.left:ee.top))/Se:0)*(ee._offsets.left+1+ee._offsets.left)-ee._offsets.right,"time");return de(_t)},getLabelWidth:function(Pe){var Se=this.options.ticks,F=this.ctx.measureText(Pe).width,We=_e.toRadians(Se.maxRotation),_t=Math.cos(We),rt=Math.sin(We);return F*_t+_e.valueOrDefault(Se.fontSize,pe.global.defaultFontSize)*rt},getLabelCapacity:function(Pe){var ee=this,Se=ee.options.time.displayFormats.millisecond,F=ee.tickFormatFunction(de(Pe),0,[],Se),We=ee.getLabelWidth(F),_t=ee.isHorizontal()?ee.width:ee.height;return Math.floor(_t/We)}});ve.scaleService.registerScaleType("time",Me,{position:"bottom",distribution:"linear",bounds:"data",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}})}},{1:1,25:25,45:45}]},{},[7])(7)});